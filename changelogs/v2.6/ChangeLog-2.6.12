commit 9ee1c939d1cb936b1f98e8d81aeffab57bae46ab
Author: Linus Torvalds <torvalds@ppc970.osdl.org>
Date:   Fri Jun 17 12:48:29 2005 -0700

    Linux 2.6.12

commit dfd11c2e61d3c0c417d341866ed53c44933b65b4
Author: Linus Torvalds <torvalds@ppc970.osdl.org>
Date:   Fri Jun 17 12:35:26 2005 -0700

    Merge 'for-linus' branch of rsync://rsync.kernel.org/pub/scm/linux/kernel/git/axboe/linux-2.6-block

commit 794f5bfa77955c4455f6d72d8b0e2bee25f1ff0c
Author: Christoph Hellwig <hch@lst.de>
Date:   Fri Jun 17 12:25:25 2005 -0700

    [PATCH] PCI: don't override drv->shutdown unconditionally
    
    There are many drivers that have been setting the generic driver
    model level shutdown callback, and pci thus must not override it.
    
    Without this patch we can have really bad data loss on various
    raid controllers.
    
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit caf2857ac6e0ba2651e722f05d5f7d3ec8ef2615
Author: Ingo Molnar <mingo@elte.hu>
Date:   Fri Jun 17 11:36:36 2005 +0200

    [PATCH] timer exit cleanup
    
    Do all timer zapping in exit_itimers.
    
    Signed-off-by: Ingo Molnar <mingo@elte.hu>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit db3b5848ea6440968fcdd29b80514d0de044bb7c
Author: Kiyoshi Ueda  <k-ueda@ct.jp.nec.com>
Date:   Fri Jun 17 16:15:10 2005 +0200

    When cfq I/O scheduler is selected, get_request() in __make_request() calls
    __cfq_get_queue().  __cfq_get_queue() finds an existing queue (struct
    cfq_queue) of the current process for the device and returns it.  If it's not
    found, __cfq_get_queue() creates and returns a new one if __cfq_get_queue() is
    called with __GFP_WAIT flag, or __cfq_get_queue() returns NULL (this means that
    get_request() fails) if no __GFP_WAIT flag.
    
    On the other hand, in __make_request(), get_request() is called without
    __GFP_WAIT flag at the first time.  Thus, the get_request() fails when there is
    no existing queue, typically when it's called for the first I/O request of the
    process to the device.
    
    Though it will be followed by get_request_wait() for general case,
    __make_request() will just end the I/O with an error (EWOULDBLOCK) when the
    request was for read-ahead.
    
    Signed-off-by: Jens Axboe <axboe@suse.de>
    Signed-off-by: Kiyoshi Ueda <k-ueda@ct.jp.nec.com>
    Signed-off-by: Jun'ichi Nomura <j-nomura@ce.jp.nec.com>

commit 97008082eacab047c189028202e055280f799ace
Author: Linus Torvalds <torvalds@ppc970.osdl.org>
Date:   Thu Jun 16 13:40:39 2005 -0700

    Merge master.kernel.org:/home/rmk/linux-2.6-arm

commit 22f11c4e662ef0bdd87f09370a76c83ed738d5fd
Author: Nicolas Pitre <nico@org.rmk.(none)>
Date:   Thu Jun 16 21:23:56 2005 +0100

    [PATCH] ARM: 2715/1: restore CPLD interrupts upon resume for Lubbock and Mainstone
    
    Patch from Nicolas Pitre
    
    Without this some devices fail to work again after a suspend event.
    
    Signed-off-by: Nicolas Pitre
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit 043cf3fd20a22df5957c28888f4c8d41438f2140
Author: Linus Torvalds <torvalds@ppc970.osdl.org>
Date:   Thu Jun 16 13:22:23 2005 -0700

    Merge master.kernel.org:/home/rmk/linux-2.6-arm

commit 95220a2ea334b5ff2168cc9bf31c0e08b29bae21
Author: Catalin Marinas <catalin.marinas@com.rmk.(none)>
Date:   Thu Jun 16 18:01:12 2005 +0100

    [PATCH] ARM: 2714/1: Fix the IB2 definitions for the Versatile platform
    
    Patch from Catalin Marinas
    
    The initial IB2 addresses did not depend on the IB2 base. This
    patch defines them as (VERSATILE_IB2_BASE + offset).
    
    Signed-off-by: Catalin Marinas
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit fea7722fd7b45c6957caed84251d95269319fe16
Author: Catalin Marinas <catalin.marinas@com.rmk.(none)>
Date:   Thu Jun 16 18:01:11 2005 +0100

    [PATCH] ARM: 2713/1: Fix the GPIO base for Integrator/CP
    
    Patch from Catalin Marinas
    
    The GPIO base for Integrator/CP is different from the
    Integrator/AP. This patch sets the correct value for
    INTEGRATOR_GPIO_BASE.
    
    Signed-off-by: Catalin Marinas
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit 90ef713b6368dcfe7a74bcc0026b998b4c44d5bc
Author: Catalin Marinas <catalin.marinas@com.rmk.(none)>
Date:   Thu Jun 16 18:01:11 2005 +0100

    [PATCH] ARM: 2712/1: Fix the RGB order for the Versatile CLCD
    
    Patch from Catalin Marinas
    
    The current red and blue colours on the Versatile CLCD are
    reversed when the 5:6:5 mode is used. The patch sets the proper
    bit in the SYS_CLCD register value.
    
    Signed-off-by: Catalin Marinas
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit c081474c184b34136e09e1e335f41356a11c7b68
Author: Linus Torvalds <torvalds@ppc970.osdl.org>
Date:   Thu Jun 16 09:53:48 2005 -0700

    Merge 'for-linus' branch of master.kernel.org:/pub/scm/linux/kernel/git/axboe/linux-2.6-block

commit 58125f95c62a44f12bb71c58ef70f0068d20c7a2
Author: Oliver Neukum <oliver@neukum.org>
Date:   Wed Jun 15 22:26:38 2005 -0700

    [PATCH] fix for kaweth broken by changes in the networking layer
    
    Cc: Greg KH <greg@kroah.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit e41fb09b2fa15db095d3ee981299f488d7b48dfe
Author: Dmitry Torokhov <dtor_core@ameritech.net>
Date:   Wed Jun 15 22:26:36 2005 -0700

    [PATCH] ALPS: fix enabling hardware tapping
    
    It looks like logic for enabling hardware tapping in ALPS driver was
    inverted and we enable it only if it was already enabled by BIOS or
    firmware.
    
    I have a confirmation from one user that the patch below fixes the problem
    for him and it might be beneficial if we could get it into 2.6.12.
    
    Signed-off-by: Dmitry Torokhov <dtor@mail.ru>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 5db92850d3ab72b830a0fe6e30eaec8462801408
Author: Daniel Jacobowitz <dan@debian.org>
Date:   Wed Jun 15 22:26:34 2005 -0700

    [PATCH] Fix large core dumps with a 32-bit off_t
    
    The ELF core dump code has one use of off_t when writing out segments.
    Some of the segments may be passed the 2GB limit of an off_t, even on a
    32-bit system, so it's important to use loff_t instead.  This fixes a
    corrupted core dump in the bigcore test in GDB's testsuite.
    
    Signed-off-by: Daniel Jacobowitz <dan@codesourcery.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit a2ef79e1840ebbd0b5907e53c755efd5662112a1
Author: Alexandre Oliva <oliva@lsd.ic.unicamp.br>
Date:   Wed Jun 15 22:26:31 2005 -0700

    [PATCH] sbp2 slab corruption fix
    
    This fixed a problem that showed up in the Fedora development tree a few
    weeks before the Fedora Core 4 release, initially as slab corruption, later
    as hard crashes on boot up, when slab debugging was disabled for the
    release.  More details on the history at
    https://bugzilla.redhat.com/bugzilla/show_bug.cgi?id=158424
    
    The problem is caused by sbp2's use of scsi_host->hostdata[0] to hold a
    scsi_id, without explicitly requesting space for it.  Since hostdata is
    declared as a zero-sized array, we don't get any such space by default, so
    it must be explicitly requested.  The patch below implements just that.
    
    Signed-off-by: Alexandre Oliva <aoliva@redhat.com>
    Cc: Jody McIntyre <scjody@modernduck.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit c374f127e4ff17a318b9ae95a5bf65f370c2d0b1
Author: Tejun Heo  <htejun@gmail.com>
Date:   Thu Jun 16 12:57:31 2005 +0200

     This patch fixes q->unplug_thresh condition check in
    __elv_add_request().  rq.count[READ] + rq.count[WRITE] can increase
    more than one if another thread has allocated a request after the
    current request is allocated or in_flight could have changed resulting
    in larger-than-one change of nrq, thus breaking the threshold
    mechanism.
    
    Signed-off-by: Jens Axboe <axboe@suse.de>
    Signed-off-by: Tejun Heo <htejun@gmail.com>
    
    

commit 9c56187d3c345cc0e7a2f162b8c32543175d7bf7
Author: Tejun Heo  <htejun@gmail.com>
Date:   Thu Jun 16 12:56:15 2005 +0200

    This patch kills elevator_global_init() in elevator.c which does
    nothing.
    
    Signed-off-by: Jens Axboe <axboe@suse.de>
    Signed-off-by: Tejun Heo <htejun@gmail.com>

commit bcfff0b471a60df350338bcd727fc9b8a6aa54b2
Author: David S. Miller <davem@davemloft.net>
Date:   Wed Jun 15 20:51:14 2005 -0700

    [NETFILTER]: ipt_recent: last_pkts is an array of "unsigned long" not "u_int32_t"
    
    This fixes various crashes on 64-bit when using this module.
    
    Based upon a patch by Juergen Kreileder <jk@blackdown.de>.
    
    Signed-off-by: David S. Miller <davem@davemloft.net>
    ACKed-by: Patrick McHardy <kaber@trash.net>

commit 1016888fb69662936b32ab767c7419a3be9a69d3
Author: Olaf Hering <olh@suse.de>
Date:   Tue Jun 14 13:52:19 2005 -0700

    [PATCH] update ppc64 defconfig
    
    enable cpusets
    enable new lpfc and jsm drivers
    enable new dm-multipath
    leave new agp disabled
    disable rivafb, it does not handle the cards in G5 models (FX5200 as example)
    the new nvidiafb doesnt work on bigendian, yet
    
    Signed-off-by: Olaf Hering <olh@suse.de>
    Acked-by: Paul Mackerras <paulus@samba.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 4845f3333765b732aa2d7ea6d72fd03cfec4fbf3
Author: Paul Mackerras <paulus@samba.org>
Date:   Tue Jun 14 22:19:24 2005 +1000

    [PATCH] ppc64: update example configs
    
    Here is a patch to update the example configs in arch/ppc64/configs.
    
    Signed-off-by: Paul Mackerras <paulus@samba.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit dcf78d80a6c2de829ec08c8e663a3370e982d616
Author: Karsten Wiese <annabellesgarden@yahoo.de>
Date:   Tue Jun 14 09:56:20 2005 -0700

    [PATCH] usbusx2y: prevent oops & dead keyboard on usb unplugging while the device is being used
    
    Without this patch, some usb kobjects, which are parents to the usx2y's
    kobjects can be freed before the usx2y's.  This led to an oops in
    get_kobj_path_length() and a dead keyboard, when the usx2y's kobjects
    were freed.  The patch ensures the correct sequence.  Tested ok on
    kernel 2.6.12-rc2.
    
    Present in ALSA cvs
    
    Signed-off-by: Karsten Wiese <annabellesgarden@yahoo.de>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>
    Signed-off-by: Chris Wright <chrisw@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit efa93dbedd0e2eacf49ea6fff1fe4397d520cf61
Author: Karsten Wiese <annabellesgarden@yahoo.de>
Date:   Tue Jun 14 09:54:55 2005 -0700

    [PATCH] usbaudio: prevent oops & dead keyboard on usb unplugging while the device is being used
    
    Without this patch, some usb kobjects, which are parents to the usx2y's
    kobjects can be freed before the usx2y's.  This led to an oops in
    get_kobj_path_length() and a dead keyboard, when the usx2y's kobjects
    were freed.  The patch ensures the correct sequence.  Tested ok on
    kernel 2.6.12-rc2.
    
    Present in ALSA cvs
    
    Signed-off-by: Karsten Wiese <annabellesgarden@yahoo.de>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>
    Signed-off-by: Chris Wright <chrisw@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 9a47696970bc8233818d370011e2fddae5cfce9f
Author: Randy Dunlap <rdunlap@xenotime.net>
Date:   Mon Jun 13 22:58:09 2005 -0700

    [PATCH] macmodes: needs a license
    
    Module needs a license to prevent kernel tainting.
    
    Signed-off-by: Randy Dunlap <rdunlap@xenotime.net>
    Acked-by: Geert Uytterhoeven <geert@linux-m68k.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 92c6dc59b7c1ca514021502c7eef53b9f2c738fd
Author: Thomas Hood <jdthood@aglu.demon.nl>
Date:   Mon Jun 13 22:58:04 2005 -0700

    [PATCH] apm.c: ignore_normal_resume is set a bit too late
    
    This patch causes the ignore_normal_resume flag to be set slightly earlier,
    before there is a chance that the apm driver will receive the normal resume
    event from the BIOS.  (Addresses Debian bug #310865)
    
    Signed-off-by: Thomas Hood <jdthood@yahoo.co.uk>
    Acked-by: Stephen Rothwell <sfr@canb.auug.org.au>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 223230e78900e5f0be984f7697cb9bf172d71a35
Author: Markus Lidel <Markus.Lidel@shadowconnect.com>
Date:   Mon Jun 13 22:58:00 2005 -0700

    [PATCH] i2o: Fix free of event memory in i2o_block_event()
    
    Fixed freeing of event memory in i2o_block_event()
    
    Signed-off-by: Markus Lidel <Markus.Lidel@shadowconnect.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit e2c16499515aa044676a14b97a1b8a35f879152a
Author: Jon Smirl <jonsmirl@gmail.com>
Date:   Mon Jun 13 15:52:36 2005 -0700

    [PATCH] Typo in fbdev sysfs support, virtual_size
    
    It prints out x,x instead of x,y.
    
    Signed-off-by: Jon Smirl <jonsmirl@gmail.com>
    Cc: "Antonino A. Daplas" <adaplas@hotpop.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 6df3cecbb95345981718b38d357c50bc3425420a
Author: Jan Kara <jack@suse.cz>
Date:   Mon Jun 13 15:52:32 2005 -0700

    [PATCH] cond_resched_lock() fix
    
    On one path, cond_resched_lock() fails to return true if it dropped the lock.
    We think this might be causing the crashes in JBD's log_do_checkpoint().
    
    Cc: Ingo Molnar <mingo@elte.hu>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit f797f9cc5485b50c35c106b462e1bc432ec37f90
Author: Olof Johansson <olof@lixom.net>
Date:   Mon Jun 13 15:52:27 2005 -0700

    [PATCH] Fix PCI BAR size interpretation on 64-bit arches
    
    On 64-bit machines, PCI_BASE_ADDRESS_MEM_MASK and other mask constants
    passed to pci_size() are 64-bit (for example ~0x0fUL).  However, pci_size
    does comparisons between the u32 arguments and the mask, which will fail
    even though any result from pci_size is still just 32-bit.
    
    Changing the mask argument to u32 seems the obvious thing to do, since all
    arithmetic in the function is 32-bit and having a larger mask makes no
    sense.
    
    This triggered on a PPC64 system here where an adapter (VGA, as it
    happened) had a memory region base of 0xfe000000 and a sz of the same,
    matching the if (max == maxbase ...) test at the bottom of pci_size but
    failing the mask comparison.  Quite a corner case which I guess explains
    why we haven't seen it until now.
    
    Signed-off-by: Olof Johansson <olof@lixom.net>
    Acked-by: Greg KH <greg@kroah.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit a3c77c67a443e631febf708bb0c376caede31657
Author: Jeff Dike <jdike@addtoit.com>
Date:   Mon Jun 13 15:52:18 2005 -0700

    [PATCH] uml: slirp and slip driver cleanups and fixes
    
    This patch merges a lot of duplicated code in the slip and slirp drivers,
    abstracts out the slip protocol, and makes the slip driver work in 2.6.
    
    Signed-off-by: Jeff Dike <jdike@addtoit.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 98fdffccea6cc3fe9dba32c0fcc310bcb5d71529
Author: Jeff Dike <jdike@addtoit.com>
Date:   Mon Jun 13 15:52:14 2005 -0700

    [PATCH] uml: use fork instead of clone
    
    Convert the boot-time host ptrace testing from clone to fork.  They were
    essentially doing fork anyway.  This cleans up the code a bit, and makes
    valgrind a bit happier about grinding it.
    
    Signed-off-by: Jeff Dike <jdike@addtoit.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 36ca1195ad7f760a6af3814cb002bd3a3d4b4db1
Author: Jeff Dike <jdike@addtoit.com>
Date:   Mon Jun 13 15:52:10 2005 -0700

    [PATCH] uml: build cleanups
    
    Fix a build failure when CONFIG_MODE_SKAS is disabled and make a Makefile
    comment fit in 80 columns.
    
    Signed-off-by: Jeff Dike <jdike@addtoit.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 8447f3f4659d91c2f11a1476522369c9d6ae6ada
Author: Jeff Dike <jdike@addtoit.com>
Date:   Mon Jun 13 15:52:04 2005 -0700

    [PATCH] uml: remove duplicate includes
    
    A few files include the same header twice.
    
    Signed-off-by: Jeff Dike <jdike@addtoit.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 628c70da8f6c1d5a3bc3af8ca338f18ee3093438
Author: Linus Torvalds <torvalds@ppc970.osdl.org>
Date:   Mon Jun 13 18:49:44 2005 -0700

    Merge rsync://rsync.kernel.org/pub/scm/linux/kernel/git/davem/net-2.6

commit a96aca88ac71f75e566981b554da44bfd0d111e8
Author: Patrick McHardy <kaber@trash.net>
Date:   Mon Jun 13 18:27:13 2005 -0700

    [NETFILTER]: Advance seq-file position in exp_next_seq()
    
    Signed-off-by: Patrick McHardy <kaber@trash.net>
    Signed-off-by: David S. Miller <davem@davemloft.net>
    

commit cbd83da82b15292337ff2b71e619c9a3a95f6d80
Author: Linus Torvalds <torvalds@ppc970.osdl.org>
Date:   Mon Jun 13 17:51:55 2005 -0700

    Update DCO ("signoff") rules to 1.1
    
    This adds a clause that notes explicitly that the person doing the
    sign-off knows that the project (and his sign-off) is public and will
    possibly get archived and re-distributed.

commit 814d8ffd5009e13f1266759b583ef847c5350d77
Author: Linus Torvalds <torvalds@ppc970.osdl.org>
Date:   Mon Jun 13 16:24:01 2005 -0700

    Merge rsync://rsync.kernel.org/pub/scm/linux/kernel/git/davem/net-2.6

commit 1c2fb7f93cb20621772bf304f3dba0849942e5db
Author: J. Simonetti <jeroen@simonetti.nl>
Date:   Mon Jun 13 15:19:03 2005 -0700

    [IPV4]: Sysctl configurable icmp error source address.
    
    This patch alows you to change the source address of icmp error
    messages. It applies cleanly to 2.6.11.11 and retains the default
    behaviour.
    
    In the old (default) behaviour icmp error messages are sent with the ip
    of the exiting interface.
    
    The new behaviour (when the sysctl variable is toggled on), it will send
    the message with the ip of the interface that received the packet that
    caused the icmp error. This is the behaviour network administrators will
    expect from a router. It makes debugging complicated network layouts
    much easier. Also, all 'vendor routers' I know of have the later
    behaviour.
    
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 6a6ddb2a9c11fcc3e8d7517841d28c9ea206ddef
Author: Sridhar Samudrala <sri@us.ibm.com>
Date:   Mon Jun 13 15:13:05 2005 -0700

    [SCTP] Fix incorrect setting of sk_bound_dev_if when binding/sending to a ipv6
    link local address.
    
    Signed-off-by: Sridhar Samudrala <sri@us.ibm.com>
    Signed-off-by: David S. Miller <davem@davemloft.net>
    

commit cdac4e07748934e37e415437055ed591aed9eb21
Author: Neil Horman <nhorman@redhat.com>
Date:   Mon Jun 13 15:12:33 2005 -0700

    [SCTP] Add support for ip_nonlocal_bind sysctl & IP_FREEBIND socket option
    
    Signed-off-by: Neil Horman <nhorman@redhat.com>
    Signed-off-by: Sridhar Samudrala <sri@us.ibm.com>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit bca735bd0d5969497704a125b05344b92155172f
Author: Vladislav Yasevich <vladislav.yasevich@hp.com>
Date:   Mon Jun 13 15:11:57 2005 -0700

    [SCTP] Extend the info exported via /proc/net/sctp to support netstat for SCTP.
    
    Signed-off-by: Vladislav Yasevich <vladislav.yasevich@hp.com>
    Signed-off-by: Sridhar Samudrala <sri@us.ibm.com>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 0fd9a65a76e883b7d16e72dde3f8bf20ebc1e82a
Author: Neil Horman <nhorman@redhat.com>
Date:   Mon Jun 13 15:11:24 2005 -0700

    [SCTP] Support SO_BINDTODEVICE socket option on incoming packets.
    
    Signed-off-by: Neil Horman <nhorman@redhat.com>
    Signed-off-by: Sridhar Samudrala <sri@us.ibm.com
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 4243cac1e76228f7ba916d5df9e75a219352160a
Author: Vladislav Yasevich <vladislav.yasevich@hp.com>
Date:   Mon Jun 13 15:10:49 2005 -0700

    [SCTP]: Fix bug in restart of peeled-off associations.
    
    Signed-off-by: Vladislav Yasevich <vladislav.yasevich@hp.com>
    Signed-off-by: Sridhar Samudrala <sri@us.ibm.com>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 77bd91967a97e5b94ae36113efe1d9e4f68a716e
Author: Rémi Denis-Courmont <rdenis@simphalempin.com>
Date:   Mon Jun 13 15:01:34 2005 -0700

    [IPv6] Don't generate temporary for TUN devices
    
    Userland layer-2 tunneling devices allocated through the TUNTAP driver 
    (drivers/net/tun.c) have a type of ARPHRD_NONE, and have no link-layer 
    address. The kernel complains at regular interval when IPv6 Privacy 
    extension are enabled because it can't find an hardware address :
    
    Dec 29 11:02:04 auguste kernel: __ipv6_regen_rndid(idev=cb3e0c00): 
    cannot get EUI64 identifier; use random bytes.
    
    IPv6 Privacy extensions should probably be disabled on that sort of 
    device. They won't work anyway. If userland wants a more usual 
    Ethernet-ish interface with usual IPv6 autoconfiguration, it will use a 
    TAP device with an emulated link-layer  and a random hardware address 
    rather than a TUN device.
    
    As far as I could fine, TUN virtual device from TUNTAP is the very only 
    sort of device using ARPHRD_NONE as kernel device type.
    
    Signed-off-by: Rémi Denis-Courmont <rdenis@simphalempin.com>
    Acked-by: YOSHIFUJI Hideaki <yoshfuji@linux-ipv6.org>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 84427d533076a08137779b3182a71c37bf000b27
Author: YOSHIFUJI Hideaki <yoshfuji@linux-ipv6.org>
Date:   Mon Jun 13 14:59:44 2005 -0700

    [IPV6]: Ensure to use icmpv6_socket in non-preemptive context.
    
    We saw following trace several times:
    
    |BUG: using smp_processor_id() in preemptible [00000001] code: httpd/30137
    |caller is icmpv6_send+0x23/0x540
    | [<c01ad63b>] smp_processor_id+0x9b/0xb8
    | [<c02993e7>] icmpv6_send+0x23/0x540
    
    This is because of icmpv6_socket, which is the only one user of
    smp_processor_id() in icmpv6_send(), AFAIK.
    
    Since it should be used in non-preemptive context,
    let's defer the dereference after disabling preemption
    (by icmpv6_xmit_lock()).
    
    Signed-off-by: YOSHIFUJI Hideaki <yoshfuji@linux-ipv6.org>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 386bfcf5e8a3c34d92156c945c8db58a1e2f7c69
Author: Linus Torvalds <torvalds@ppc970.osdl.org>
Date:   Mon Jun 13 14:47:47 2005 -0700

    Merge master.kernel.org:/home/rmk/linux-2.6-arm

commit a8fa3f0c59f8a1e1d89542cff0be5b057b684653
Author: Nicolas Pitre <nico@org.rmk.(none)>
Date:   Mon Jun 13 22:35:41 2005 +0100

    [PATCH] ARM: 2711/1: fix compilation on PXA targets with CONFIG_PM=n
    
    Patch from Nicolas Pitre
    
    Signed-off-by: Nicolas Pitre
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit 979b6c135fc4d466a39d8e3ec05583e5ee30261a
Author: Ralf Baechle <ralf@linux-mips.org>
Date:   Mon Jun 13 14:30:40 2005 -0700

    [NET]: Move the netdev list to vger.kernel.org.
    
    From: Ralf Baechle <ralf@linux-mips.org>
    
    There are archives of the old list at http://oss.sgi.com/archives/netdev
    
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: David S. Miller <davem@davemloft.net>
    

commit 6efd8455cff1979dd081daaa1ce3d3f1764863dc
Author: Randy Dunlap <rdunlap@xenotime.net>
Date:   Mon Jun 13 14:29:06 2005 -0700

    [IPV4]: Multipath modules need a license to prevent kernel tainting.
    
    Signed-off-by: Randy Dunlap <rdunlap@xenotime.net>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit e7626486c3c4ce456b11a7944edf164ef76fc599
Author: Andi Kleen <ak@suse.de>
Date:   Mon Jun 13 14:24:52 2005 -0700

    [TCP]: Adjust TCP mem order check to new alloc_large_system_hash
    
    Signed-off-by: Andi Kleen <ak@suse.de>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 03722adce90a248d0bea77d390decbd05991e2d2
Author: Tom Rini <trini@kernel.crashing.org>
Date:   Mon Jun 13 13:57:10 2005 -0700

    [NET]: linux/if_tr.h needs asm/byteorder.h
    
    <linux/if_tr.h> uses __be16, but does not directly include
    <asm/byteorder.h>.  Add this in, so that dhcp/net-tools token ring code
    can compile again.
    
    Signed-off-by: Tom Rini <trini@kernel.crashing.org>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 980802e311088fda56c16650589faa4597c695fb
Author: Trond Myklebust <Trond.Myklebust@netapp.com>
Date:   Mon Jun 13 11:14:01 2005 -0400

    [PATCH] NFS: Ensure that we revalidate the cached file length for llseek(SEEK_END)
    
    This fixes a data corruption error for mail delivery applications that
    expect to be able to do posix locking and then append writes on NFS.
    
    Signed-off-by: Trond Myklebust <Trond.Myklebust@netapp.com>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit c22fa3acbc2ef79ea57217643f6cd6d226963069
Author: David Brownell <david-b@pacbell.net>
Date:   Mon Jun 13 07:15:28 2005 -0700

    [PATCH] spin longer for ehci port reset completion
    
    This makes the EHCI driver spin a bit longer before concluding that the
    port reset failed.  "Obviously safe."
    
    It allows some devices to enumerate that previously didn't.  We've seen
    a bunch of these problem reports recently, this will make some go away.
    
    As reported by Michael Zapf <Michael.Zapf@uni-kassel.de>, some EHCI
    controllers seem to take forever to finish port resets and produce
    "port N reset error -110" type errors.  Spinning a bit longer helps.
    
    Signed-off-by: David Brownell <dbrownell@users.sourceforge.net>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit c0105338eb4e61e537ca34ae06921177cb6efcf0
Author: Alan Cox <alan@lxorguk.ukuu.org.uk>
Date:   Sat Jun 11 18:00:52 2005 +0100

    [PATCH] pwc bug fix
    
    The pwc chainsaw session left some setups not working.  There is a
    sanity check on compression buffers that simply isn't right any more as
    we never allocate one.
    
    This doesn't address the email and other changes.  I'll do those
    tomorrow if I get time, but it is the minimal fix for the code and basic
    feature set.
    
    Signed-off-by: Alan Cox <alan@redhat.com>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 8d5f7b4353dae4c7ee342c61303372fd996ca161
Author: Benjamin Herrenschmidt <benh@kernel.crashing.org>
Date:   Sat Jun 11 09:45:30 2005 +1000

    [PATCH] radeonfb: don't blow up VGA console on load
    
    The current radeonfb memset's the framebuffer to 0 when loaded.  This
    removes occasional artifacts but has the nasty side effect that if you
    load radeonfb without framebuffer console, you destroy the VGA text
    buffer, font, etc...  radeon must not touch the framebuffer content when
    it doesn't "own" it.
    
    Signed-off-by: Benjamin Herrenschmidt <benh@kernel.crashing.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit c3315ede1bdf7bc706b59870df41b9cdb6e3995a
Author: Geert Uytterhoeven <geert@linux-m68k.org>
Date:   Sun Jun 12 11:25:42 2005 +0200

    [PATCH] M68k: Mark Sun-3 NCR5380 SCSI broken
    
    M68k: Mark Sun-3 NCR5380 SCSI broken until NCR5380_abort() and
    NCR5380_bus_reset() are replaced with real new-style EH routines (the old EH
    SCSI constants were removed in 2.6.12-rc3).
    
    Signed-off-by: Geert Uytterhoeven <geert@linux-m68k.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 707f919c643937e43a04e31d0502ecbf5a10445a
Author: Geert Uytterhoeven <geert@linux-m68k.org>
Date:   Sun Jun 12 11:25:43 2005 +0200

    [PATCH] M68k: Update defconfigs
    
    Signed-off-by: Geert Uytterhoeven <geert@linux-m68k.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit a58e76f25432dc5e3e84d04c27bec03347ca365b
Author: Geert Uytterhoeven <geert@linux-m68k.org>
Date:   Sun Jun 12 10:56:26 2005 +0200

    [PATCH] Remove obsolete HAVE_ARCH_GET_SIGNAL_TO_DELIVER?
    
    Now m68k no longer sets HAVE_ARCH_GET_SIGNAL_TO_DELIVER, can it be removed
    completely? Or may ARM26 still need it? Note that its usage was removed from
    kernel/signal.c about 2 months ago.
    
    Signed-off-by: Geert Uytterhoeven <geert@linux-m68k.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 392a8b7efe069564bf7ed057103b1a3f41e55734
Author: Geert Uytterhoeven <geert@linux-m68k.org>
Date:   Sun Jun 12 10:57:40 2005 +0200

    [PATCH] IrDA: IrDA: Fix CONFIG_VIA_FIR typo (double `those')
    
    Signed-off-by: Geert Uytterhoeven <geert@linux-m68k.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit bb011b8e8eded247cb71cb6d10e47517aacbd542
Author: David Brownell <david-b@net.rmk.(none)>
Date:   Sun Jun 12 23:26:05 2005 +0100

    [PATCH] ARM: 2709/1: Systems with PCMCIA should also see IDE options (for CompactFlash memories)
    
    Patch from David Brownell
    
    The ARM generic Kconfig filters out IDE options ... except for
    an error prone ARMload of special cases.
    This adds one general case to the systems that will offer IDE options:
    kernels with PCMCIA support, which probably want to use IDE to access
    CompactFlash cards.  This might allow many (most?) of the other cases
    to disappear, for systems that only see IDE hardware through CF cards.
    Right now this one patch is used to gate access to CF cards, including
    MicroDrives, for both omap_cf and at91_cf drivers.
    
    Signed-off-by: David Brownell
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit 27198d855abbfc82df69e81b6c8d2f333580114c
Author: Linus Torvalds <torvalds@ppc970.osdl.org>
Date:   Fri Jun 10 20:35:10 2005 -0700

    Merge rsync://rsync.kernel.org/pub/scm/linux/kernel/git/sfrench/cifs-2.6

commit a7df849c67f0a5248693e432d03f738e84d6826c
Author: Linus Torvalds <torvalds@ppc970.osdl.org>
Date:   Fri Jun 10 20:23:21 2005 -0700

    Merge rsync://rsync.kernel.org/pub/scm/linux/kernel/git/airlied/drm-2.6

commit 90abb7b5f3bd9271a455cd640a70c285b4fd0c89
Author: Linus Torvalds <torvalds@ppc970.osdl.org>
Date:   Fri Jun 10 09:37:21 2005 -0700

    ppc: remove two extraneous descriptors for the 405EP CPU
    
    The patch to add them keeps on getting applied, over and
    over again ;)
    
    Hopefully no more.

commit 74e8ebc55d85ca1acb3e73610965bea63cc39054
Author: Dave Airlie <airlied@starflyer.(none)>
Date:   Fri Jun 10 19:27:51 2005 +1000

    [PATCH] remove bogus hack from radeon IRQ handler
    
    This removes a bogus hack from the radeon IRQ handler.
    There is a better fix from myself and benh in DRM CVS but I'll wait
    until 2.6.13-rc so it gets more testing.
    
    Signed-off-by: Dave Airlie <airlied@linux.ie>

commit e98ded32f37a538b906d98059b3db71be36405a7
Author: Dave Airlie <airlied@starflyer.(none)>
Date:   Fri Jun 10 18:47:38 2005 +1000

    [PATCH] drm add i945G pci id
    
    Add pci identifier for i945G chipset
    
    Signed-off-by: Dave Airlie <airlied@linux.ie>

commit 0086b5ec7834b78358dea3f713275a9ae2b229ec
Author: Benjamin Herrenschmidt <benh@kernel.crashing.org>
Date:   Fri Jun 10 14:19:02 2005 +1000

    [PATCH] ppc32: Fix nasty sleep/wakeup problem
    
    Despite all the care lately in making the powermac sleep/wakeup as
    robust as possible, there is still a nasty related to the use of cpufreq
    on PMU based machines.  Unfortunately, it affects paulus old powerbook
    so I have to fix it :)
    
    We didn't manage to understand what is precisely going on, it leads to
    memory corruption and might have to do with RAM not beeing properly
    refreshed when a cpufreq transition is done right before the sleep.
    
    The best workaround (and less intrusive at this point) we could come up
    with is included in this patch.  We basically do _not_ force a switch to
    high speed on suspend anymore (that is what is causing the problem) on
    those machines.  We still force a speed switch on wakeup (since we don't
    know what speed we are coming back from sleep at, and that seems to work
    fine).
    
    Since, during this short interval, the actual CPU speed might be
    incorrect, we also hack around by multiplying loops_per_jiffy by 2 (max
    speed factor on those machines) during early wakeup stage to make sure
    udelay's during that time aren't too short.
    
    For after 2.6.12, we'll change udelay implementation to use the CPU
    timebase (which is always constant) instead like we do on ppc64 and thus
    get rid of all those problems.
    
    Signed-off-by: Benjamin Herrenschmidt <benh@kernel.crashing.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 243cd55e021baf28babdd88112ac03ae5cd4bb9c
Author: Michael Ellerman <michael@ellerman.id.au>
Date:   Thu Jun 9 12:36:33 2005 -0700

    [PATCH] iseries_veth: Supress spurious WARN_ON() at module unload
    
    My patch from a few weeks back (now in mainline), called "Cleanup skbs to
    prevent unregister_netdevice() hanging", can cause our TX timeout code to
    fire on machines with lots of VLANs (because it takes > 2 seconds between
    when we stop the queues and when we're finished stopping the connections).
    
    When that happens the TX timeout code freaks out and does a WARN_ON()
    because as far as it's concerned there shouldn't be a TX timeout happening,
    which is fair enough.
    
    I have a "proper" fix for this, which is to a) do refcounting on
    connections and b) implement a proper ack timer so we don't keep unacked
    skbs lying around for ever.  But for 2.6.12 I propose just supressing the
    WARN_ON().  Users will still see the "NETDEV WATCHDOG" warning, but that's
    not nearly as bad as a WARN_ON() which users interpret as an Oops.
    
    Signed-off-by: Michael Ellerman <michael@ellerman.id.au>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 7fbdf1a23be1837b8bc5bcec096015ca99e00aa7
Author: Eugene Surovegin <ebs@ebshome.net>
Date:   Thu Jun 9 12:36:29 2005 -0700

    [PATCH] ppc32: add 405EP cpu_spec entry
    
    Add a definition for PPC 405EP which was lost somehow during 2.4 -> 2.6
    transition.
    
    Recent change to arch/ppc/kernel/misc.S ("Fix incorrect CPU_FTR fixup usage
    for unified caches") triggered this bug and 405EP boards don't boot
    anymore.
    
    Signed-off-by: Eugene Surovegin <ebs@ebshome.net>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 04dc9ba882d224612f8db50fd60c8a45b843e77c
Author: Linus Torvalds <torvalds@ppc970.osdl.org>
Date:   Thu Jun 9 15:37:56 2005 -0700

    Merge rsync://rsync.kernel.org/pub/scm/linux/kernel/git/gregkh/usb-2.6

commit d80d6fc08e111c411a349c4fa0c6d9bf41851087
Author: Linus Torvalds <torvalds@ppc970.osdl.org>
Date:   Thu Jun 9 15:36:31 2005 -0700

    Merge master.kernel.org:/home/rmk/linux-2.6-arm

commit 99fdb2fe523480a8748a5af18139bb1f7785c815
Author: Linus Torvalds <torvalds@ppc970.osdl.org>
Date:   Thu Jun 9 15:25:29 2005 -0700

    Merge rsync://rsync.kernel.org/pub/scm/linux/kernel/git/aegl/linux-2.6

commit 1e06276704c101bd1ae7b62879faaffcd7496a3e
Author: Narendra Sankar <nsankar@broadcom.com>
Date:   Fri May 6 12:00:05 2005 -0700

    [PATCH] PCI: MSI functionality broken on Serverworks GC chipset
    
    MSI functionality is broken on the GC_LE x86 chipset that Serverworks
    developed and that is being used in various platforms today. Broadcom is
    going to push out to the kernel MSI enabled Gigabit drivers (in the very
    near future), and we would like to make sure that MSI does not get
    enabled on any platforms using the GC_LE chipset (device id 0x17).
    Following the AMD 8131 example, I am including a patch to disable MSI
    functionality when a GCNB_LE is detected. Please let me know if there
    are any issues with this. This is a permanent fix for this chipset, as
    the hardware will not be updated.
    
    Signed-off-by: Narendra Sankar <nsankar@broadcom.com>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit f5d9b97ee0d6d00a29bf881263510d74291fb862
Author: Steve French <sfrench@hera.kernel.org>
Date:   Thu Jun 9 14:44:56 2005 -0700

    Merge with rsync://rsync.kernel.org/pub/scm/linux/kernel/git/torvalds/linux-2.6.git
    

commit 3079ca621e9e09f4593c20a9a2f24237c355f683
Author: Steve French <sfrench@hera.kernel.org>
Date:   Thu Jun 9 14:44:07 2005 -0700

    [CIFS] Fix cifs update of page cache. Write at correct offset when out of memory
    and add_to_page_cache fails.  
    
    Thanks to Shaggy for pointing out the fix.
    
    Signed-off-by: Steve French (sfrench@us.ibm.com)
    Signed-off-by: Shaggy (shaggy@us.ibm.com)
    

commit 07c6d48fd10a8eeae899e06876aa0b885a8e2a1b
Author: Vincent Sanders <vince@org.rmk.(none)>
Date:   Thu Jun 9 21:59:22 2005 +0100

    [PATCH] ARM: 2708/1: Fix hackkit CPU Frequency build faliure
    
    Patch from Vincent Sanders
    
    This fixes the "multiple definitions of cpufreq_get" build faliure on
    the hackkit SA1100 platform.
    
    Signed-off-by: Vincent Sanders
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit 7aa0b0d5ab5eed29a49fce55868456bca073d77e
Author: Vincent Sanders <vince@org.rmk.(none)>
Date:   Thu Jun 9 21:59:21 2005 +0100

    [PATCH] ARM: 2707/2: Fix badge4 CPU Frequency build faliure
    
    Patch from Vincent Sanders
    
    This fixes the "multiple definitions of cpufreq_get" build faliure on
    the Badge4 SA1100 platform.
    
    Signed-off-by: Vincent Sanders
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit a2a64769d0d3cc0380b4b6ecdcb781a2f790a69e
Author: Christoph Lameter <clameter@sgi.com>
Date:   Thu Jun 9 12:29:00 2005 -0700

    [IA64] Fix race condition in the rt_sigprocmask fastcall
    
    current->blocked will be set to the value of current->thread_info->flags if the
    cmpxchg to update thread_info->flags fails. For performance reasons the store into
    current->blocked was placed in the cmpxchg loop. However, the cmpxchg overwrites the
    register holding the value to be stored. In the rare case of a retry the value of
    thread_info->flags will be written into current->blocked.
    
    The fix is to use another register so that the register containing the current->blocked
    value is not overwritten.
    
    Signed-off-by: Christoph Lameter <clameter@sgi.com>
    Signed-off-by: Tony Luck <tony.luck@intel.com>

commit cf380ee7308db0f067ceb2ae8b852838788bf453
Author: Linus Torvalds <torvalds@ppc970.osdl.org>
Date:   Thu Jun 9 10:44:48 2005 -0700

    Merge rsync://rsync.kernel.org/pub/scm/linux/kernel/git/gregkh/usb-2.6

commit 12035d64565ae7ecbc7fe906e7fcc8a4a71a3789
Author: Dave Neuer <dneuer@org.rmk.(none)>
Date:   Thu Jun 9 17:40:55 2005 +0100

    [PATCH] ARM: 2706/1: Fix compile on SA-based iPAQs and remove stale CREDITS info
    
    Patch from Dave Neuer
    
    This fixes the "multiple definitions of cpufreq_get" errors on
    StrongARM-based iPAQs.
    
    Signed-off-by: Dave Neuer
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit 1834cd9fd27763f4e55184e4138a19ba36620174
Author: Linus Torvalds <torvalds@ppc970.osdl.org>
Date:   Thu Jun 9 09:04:11 2005 -0700

    Merge master.kernel.org:/home/rmk/linux-2.6-arm

commit 4e71e47da3367e8df5994a17fb421ddeaa5025e3
Author: Russell King <rmk@dyn-67.arm.linux.org.uk>
Date:   Thu Jun 9 16:53:28 2005 +0100

    [PATCH] ARM: Remove zero-byte sized file
    
    Remove the remaining zero byte file left over from the Xscale
    fixes.
    
    Signed-off-by: Russell King <rmk@arm.linux.org.uk>

commit 76854ceac3ef3408ab9a50a2521147fb14779f58
Author: Ian Abbott <abbotti@mev.co.uk>
Date:   Thu Jun 2 10:34:11 2005 +0100

    [PATCH] USB: ftdi_sio: avoid losing received data in tty-ldisc
    
    ftdi_sio: Avoid losing bytes at tty-ldisc.
    
    This patch was originally developed by Daniel Smertnig.  I
    (Ian Abbott) made a few changes.  It has been tested by both
    Daniel and I, at least for raw, non-canonical receive data
    processing.
    
    Here is Daniel's original description of the patch:
    
    ===
    During a project in which I was using a FTDI 232BM to
    transmit data at relative high speeds (625kBit/s), I
    noticed a problem where data was lost even if flow
    control was enabled: The FTDI-Driver receives 512 Bytes
    of data over USB at a time, which consists of 8 64-Byte
    packets. Subtracting the 2 bytes of status information
    included in each packet this gives 496 "real" data
    bytes per read.
    
    This data is passed (indirectly, via the flip buffers)
    to the tty line discipline which takes care of
    throttling when there the free buffer space reaches
    TTY_THRESHOLD_THROTTLE (128). Because the FTDI driver
    processes up to 496 bytes at a time, throttling won't
    happen in time and the line discipline will discard the
    remaining bytes.
    
    To avoid this the patch passes data in 62-byte blocks
    to the tty layer and checks the available space in the
    ldisc-buffers. If there isn't enough free space,
    processing the rest of the data is delayed using a
    workqueue.
    
    Note: The original problem should be easily
    reproducible with a userspace program which does slow &
    small reads.
    ===
    
    Signed-off-by: Ian Abbott <abbotti@mev.co.uk>
    Signed-off-by: Daniel Smertnig <daniel.smertnig@gmail.com>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 9f793d2c77ec5818679e4747c554d9333cecf476
Author: Pete Zaitcev <zaitcev@redhat.com>
Date:   Mon Jun 6 13:54:59 2005 -0700

    [PATCH] USB: fix ub issues
    
    This smoothes two imperfections:
    - Increase number of LUNs per device from 4 to 9. The best solution
      would be to remove this limit altogether, but that has to wait until
      the time when more than 26 hosts are allowed.
    - Replace mdelay with msleep in a probing routine.
    
    Signed-off-by: Pete Zaitcev <zaitcev@yahoo.com>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 03e49d40ea3436cae0fe43708f11584130ee4a0c
Author: Scott Murray <scottm@somanetworks.com>
Date:   Mon Jun 6 15:48:04 2005 -0400

    [PATCH] PCI Hotplug: fix CPCI reference counting bug
    
    Here's a patch that fixes up the pci_dev refcounting in the CPCI code.
    I've done some testing against it and it seems fine here.
    
    Signed-off-by: Scott Murray <scottm@somanetworks.com>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 6952df035509717bdc46194b2a3d6ffb9349f267
Author: Albert Lee <albertcc@tw.ibm.com>
Date:   Mon Jun 6 15:56:03 2005 +0800

    [PATCH] sg traverse fix for __atapi_pio_bytes()
    
    Problem:
    Incorrect md5sum when using ATAPI PIO mode to verify a distro CD.
    
    Root cause:  sg traverse problem.
    In __atapi_pio_bytes(), if qc->cursg++ is increased and "goto
    next_page" is executed, then sg is not updated to the new qc->cursg
    and the old sg is overwritten with the new data.
    
    Changes:
    - Replace "goto next_page" with "goto next_sg" to make sg updated.
    
    Signed-off-by: Albert Lee <albertcc@tw.ibm.com>

commit e1dd23a0012c3929737798fda9fede0e783f4ff3
Author: Jens Axboe <axboe@suse.de>
Date:   Wed Jun 8 13:02:25 2005 +0200

    [PATCH] sata_sil: Fix FIFO PCI Bus Arbitration kernel oops
    
    Correct this.
    
    diff --git a/drivers/scsi/sata_sil.c b/drivers/scsi/sata_sil.c

commit 5273a00d9c763108397658d440618f7ac3e40f83
Author: Linus Torvalds <torvalds@ppc970.osdl.org>
Date:   Wed Jun 8 16:36:31 2005 -0700

    Merge rsync://rsync.kernel.org/pub/scm/linux/kernel/git/davem/net-2.6

commit ce10d979053379553757c3b178a138facaddff82
Author: Paul Mackerras <paulus@samba.org>
Date:   Wed Jun 8 21:59:15 2005 +1000

    [PATCH] ppc64: Fix PER_LINUX32 behaviour
    
    This patch fixes some bugs in the ppc64 PER_LINUX32 implementation,
    noted by Juergen Kreileder:
    
    * uname(2) doesn't respect PER_LINUX32, it returns 'ppc64' instead of 'ppc'
    * Child processes of a PER_LINUX32 process don't inherit PER_LINUX32
    
    Along the way I took the opportunity to move things around so that
    sys_ppc32.c only has 32-bit syscall emulation functions and to remove
    the obsolete "fakeppc" command line option.
    
    Signed-off-by: Paul Mackerras <paulus@samba.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit fee02f80e68abbcc45ed3c5dd5ed09d04a284791
Author: Linus Torvalds <torvalds@ppc970.osdl.org>
Date:   Wed Jun 8 16:22:16 2005 -0700

    Merge rsync://rsync.kernel.org/pub/scm/linux/kernel/git/davem/tg3-2.6

commit 4f58802fae8a51d9e79454746584175c14f84519
Author: Lars Marowsky-Bree <lmb@suse.de>
Date:   Wed Jun 8 15:50:31 2005 -0700

    [PATCH] dm: Handle READA requests in dm-mpath.c
    
    READA errors failing with EWOULDBLOCK/EAGAIN do not constitute a valid
    reason for failing the path; this lead to erratic errors on DM multipath
    devices.  This error can be safely propagated upwards without failing the
    path.
    
    Acked-by: Kevin Corry <kevcorry@us.ibm.com>
    Acked-by: Jens Axboe <axboe@suse.de>
    Signed-off-by: Lars Marowsky-Bree <lmb@suse.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 05062d96a23ec0959ee5ea969f40813170c73c0e
Author: Peter Chubb <peterc@gelato.unsw.edu.au>
Date:   Wed Jun 8 15:50:20 2005 -0700

    [PATCH] ia64: fix floating-point preemption problem
    
    There've been reports of problems with CONFIG_PREEMPT=y and the high
    floating point partition.  This is caused by the possibility of preemption
    and rescheduling on a different processor while saving or restioirng the
    high partition.
    
    The only places where the FPU state is touched are in ptrace, in
    switch_to(), and where handling a floating-point exception.  In switch_to()
    preemption is off.  So it's only in trap.c and ptrace.c that we need to
    prevent preemption.
    
    Here is a patch that adds commentary to make the conditions clear, and adds
    appropriate preempt_{en,dis}able() calls to make it so.  In trap.c I use
    preempt_enable_no_resched(), as we're about to return to user space where
    the preemption flag will be checked anyway.
    
    Signed-off-by: Peter Chubb <peterc@gelato.unsw.edu.au>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit f829fd23c87918374bac0d90404fe12f0e788d52
Author: Ananth N Mavinakayanahalli <ananth@in.ibm.com>
Date:   Wed Jun 8 15:50:00 2005 -0700

    [PATCH] ppc64 kprobes: remove spurious MSR_SE masking
    
    Remove spurious MSR_SE reset during kprobe processing.
    single_step_exception() already does it for us.  Reset it to be safe when
    executing the fault_handler.
    
    Signed-off-by: Ananth N Mavinakayanahalli <ananth@in.ibm.com>
    Signed-off-by: Paul Mackerras <paulus@samba.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 63224d1e8b4cf87cc7420201a8cb3b44b9bf0b40
Author: Ananth N Mavinakayanahalli <ananth@in.ibm.com>
Date:   Wed Jun 8 15:49:41 2005 -0700

    [PATCH] ppc64 kprobes: correct kprobe registration return values
    
    Add stricter checks during kprobe registration.  Return correct error value so
    insmod doesn't succeed.  Also printk reason for registration failure.
    
    Signed-off-by: Ananth N Mavinakayanahalli <ananth@in.ibm.com>
    Signed-off-by: Paul Mackerras <paulus@samba.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 42442ed5744b03f5351a142649b8b4c97e6950ab
Author: Andrew Morton <akpm@osdl.org>
Date:   Wed Jun 8 15:49:25 2005 -0700

    [PATCH] revert x86_64-use-the-e820-hole-to-map-the-iommu-agp-aperture
    
    Martin Bligh determined that this patch is causing his test box to not boot.
    Revert.
    
    Andi Kleen <ak@muc.de>
    
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 5754c9b649e414f1e3a3ea2ec15e42ed3e42eeb8
Author: Keith Owens <kaos@ocs.com.au>
Date:   Wed Jun 8 15:49:07 2005 -0700

    [PATCH] Stop arch/i386/kernel/vsyscall-note.o being rebuilt every time
    
    arch/i386/kernel/vsyscall-note.o is not listed as a target so its .cmd file
    is neither considered as a target nor is it read on the next build.  This
    causes vsyscall-note.o to be rebuilt every time that you run make, which
    causes vmlinux to be rebuilt every time.
    
    Signed-off-by: Keith Owens <kaos@ocs.com.au>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit f8acd944ea511af02485b1709c07ac7aac12aa48
Author: William Lee Irwin III <wli@holomorphy.com>
Date:   Wed Jun 8 15:48:52 2005 -0700

    [PATCH] sparc32: silence access_ok() warnings
    
    The fact that access_ok() doesn't use some of its arguments trips some
    unused variable warnings.  This patch silences them permanently.
    
    Signed-off-by: William Irwin <wli@holomorphy.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit beb9e1c3f32a0f878765c7c1142f91083739c5bd
Author: Eugene Surovegin <ebs@ebshome.net>
Date:   Wed Jun 8 15:48:42 2005 -0700

    [PATCH] ppc32: add 405EP cpu_spec entry
    
    Add a definition for PPC 405EP which was lost somehow during 2.4 -> 2.6
    transition.
    
    Recent change to arch/ppc/kernel/misc.S ("Fix incorrect CPU_FTR fixup usage
    for unified caches") triggered this bug and 405EP boards don't boot
    anymore.
    
    Signed-off-by: Eugene Surovegin <ebs@ebshome.net>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 1f96ddb4fb40961a8ebebf7a00bbfaad55aacbd2
Author: Jeff Dike <jdike@addtoit.com>
Date:   Wed Jun 8 15:48:27 2005 -0700

    [PATCH] uml: clean up error path
    
    This cleans an error path which used to leak file descriptors by returning
    without trying to tidy up.
    
    Signed-off-by: Jeff Dike <jdike@addtoit.com>
    Cc: Paolo 'Blaisorblade' Giarrusso <blaisorblade@yahoo.it>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 501cb02b431fb88c7f157c46c8b54de59d1dd463
Author: Jeff Dike <jdike@addtoit.com>
Date:   Wed Jun 8 15:48:13 2005 -0700

    [PATCH] uml: fix strace -f
    
    It turns out that we need to check for pending signals when a newly forked
    process is run for the first time.  With strace -f, strace needs to know about
    the forked process before it gets going.  If it doesn't, then it ptraces some
    bogus values into its registers, and the process segfaults.  So, I added calls
    to interrupt_end, which does that, plus checks for reschedules.  There
    shouldn't be any of those, but x86 does the same thing, so I'm copying that
    behavior to be safe.
    
    Signed-off-by: Jeff Dike <jdike@addtoit.com>
    Cc: Paolo 'Blaisorblade' Giarrusso <blaisorblade@yahoo.it>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit da00d9a5466558ccd9e7b7d04b13d7cb9160c876
Author: Jeff Dike <jdike@addtoit.com>
Date:   Wed Jun 8 15:48:01 2005 -0700

    [PATCH] uml: compile fixes for gcc 4
    
    This is a bunch of compile fixes provoked by building UML with gcc 4.  There
    are a bunch of signedness mismatches, a couple of uninitialized references,
    and a botched C99 structure initialization which had somehow gone unnoticed.
    
    Signed-off-by: Jeff Dike <jdike@addtoit.com>
    Cc: Paolo 'Blaisorblade' Giarrusso <blaisorblade@yahoo.it>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 3df59529ad1045da61698bb5dd8ebaa547aeb46f
Author: Jeff Dike <jdike@addtoit.com>
Date:   Wed Jun 8 15:47:50 2005 -0700

    [PATCH] uml: make the emulated iomem driver work on 2.6
    
    This makes the minimal fixes needed to make the UML iomem driver work in 2.6.
    
    Signed-off-by: Jeff Dike <jdike@addtoit.com>
    Cc: Paolo 'Blaisorblade' Giarrusso <blaisorblade@yahoo.it>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit a38133298fc678335a0229e97b6161a7ac6fec84
Author: Linus Torvalds <torvalds@ppc970.osdl.org>
Date:   Wed Jun 8 16:06:15 2005 -0700

    Merge rsync://rsync.kernel.org/pub/scm/linux/kernel/git/aegl/linux-2.6

commit 98e56405521b74b4826f855d45ef7859f34548ff
Author: Thomas Graf <tgraf@suug.ch>
Date:   Wed Jun 8 15:11:19 2005 -0700

    [PKT_SCHED]: Fix numeric comparison in meta ematch
    
    This patch is brought to you by the department of applied stupidity.
    
    Signed-off-by: Thomas Graf <tgraf@suug.ch>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit e1e284a4bd827db2288af9536664b44590e419eb
Author: Thomas Graf <tgraf@suug.ch>
Date:   Wed Jun 8 15:11:02 2005 -0700

    [PKT_SCHED]: Dump classification result for basic classifier
    
    Signed-off-by: Thomas Graf <tgraf@suug.ch>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 4890062960cbc4d3cebdbd8261a68bc85efcf5d4
Author: Thomas Graf <tgraf@suug.ch>
Date:   Wed Jun 8 15:10:48 2005 -0700

    [PKT_SCHED]: Allow socket attributes to be matched on via meta ematch
    
    Adds meta collectors for all socket attributes that make sense
    to be filtered upon. Some of them are only useful for debugging
    but having them doesn't hurt.
    
    Signed-off-by: Thomas Graf <tgraf@suug.ch>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit b824979aeccbfd997e6e5dbe75c47d586b5a2923
Author: Thomas Graf <tgraf@suug.ch>
Date:   Wed Jun 8 15:10:22 2005 -0700

    [PKT_SCHED]: Fix typo in NET_EMATCH_STACK help text
    
    Spotted by Geert Uytterhoeven <geert@linux-m68k.org>.
    
    Signed-off-by: Thomas Graf <tgraf@suug.ch>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit e3876605450979fe52a1a03e7eb78a89bf59e76a
Author: Stephen Hemminger <shemminger@osdl.org>
Date:   Wed Jun 8 14:56:01 2005 -0700

    [NET]: Fix sysctl net.core.dev_weight
    
    Changing the sysctl net.core.dev_weight has no effect because the weight
    of the backlog devices is set during initialization and never changed.
    
    This patch propagates any changes to the global value affected by sysctl
    to the per-cpu devices. It is done every time the packet handler
    function is run.
    
    Signed-off-by: Stephen Hemminger <shemminger@osdl.org>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 699a411451a32cc111410f44f172b265f6d679c8
Author: Stephen Hemminger <shemminger@osdl.org>
Date:   Wed Jun 8 14:55:42 2005 -0700

    [NET]: Allow controlling NAPI device weight with sysfs
    
    Simple interface to allow changing network device scheduling weight
    with sysfs. Please consider this for 2.6.12, since risk/impact is small.
    
    Signed-off-by: Stephen Hemminger <shemminger@osdl.org>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 8181b8c1f3a69fe5abcc51cb732eb512ccd1566a
Author: Gabor Fekete <gfekete@cc.jyu.fi>
Date:   Wed Jun 8 14:54:38 2005 -0700

    [IPV6]: Update parm.link in ip6ip6_tnl_change()
    
    Signed-off-by: Gabor Fekete <gfekete@cc.jyu.fi>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit ed7fce6c13bdd802817e1988d67047d432e7e30b
Author: David S. Miller <davem@davemloft.net>
Date:   Wed Jun 8 14:15:52 2005 -0700

    [TG3]: Update driver version and release date.
    
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 6d1cfbab4de64f2d0c5b0f81177ade0d75b69288
Author: Michael Chan <mchan@broadcom.com>
Date:   Wed Jun 8 14:13:14 2005 -0700

    [TG3]: Fix 5700/5701 DMA corruption on Apple G4.
    
    Fix 5700/5701 DMA write corruption on Apple G4 by detecting the Apple
    UniNorth PCI 1.5 chipset and adjusting the DMA write boundary to 16. DMA
    test fails to detect the problem with this chipset.
    
    Thanks to Manuel Perez Ayala for reporting the problem and helping to
    debug it.
    
    Signed-off-by: Michael Chan <mchan@broadcom.com>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 70aa488cff83c965c9e1850f48d82b000d0d6c1c
Author: Keith Owens <kaos@sgi.com>
Date:   Fri May 27 23:09:00 2005 -0700

    [IA64] Extract correct break number for break.b
    
    break.b does not store the break number in cr.iim, instead it stores 0,
    which makes all break.b instructions look like BUG().  Extract the
    break number from the instruction itself.
    
    Signed-off-by: Keith Owens <kaos@sgi.com>
    Signed-off-by: Tony Luck <tony.luck@intel.com>

commit 86ebacd360767f6a5cf9c8810977593dccf3f3da
Author: Tony Luck <tony.luck@intel.com>
Date:   Wed Jun 8 12:12:48 2005 -0700

    [IA64] Update comment to describe modes set in default control register.
    
    Christian Hildner pointed out that the comment did not match what the
    code does in cpu_init() when we set up the default control register.
    Patch based on suggestions from Ken Chen.
    
    Signed-off-by: Tony Luck <tony.luck@intel.com>

commit 97d26b8042a6f14cc4a19e84e911a953363e3d69
Author: Linus Torvalds <torvalds@ppc970.osdl.org>
Date:   Wed Jun 8 11:43:17 2005 -0700

    Merge master.kernel.org:/home/rmk/linux-2.6-arm

commit 5131bf5db73529e972459060d8559f72e036fe53
Author: Linus Torvalds <torvalds@ppc970.osdl.org>
Date:   Wed Jun 8 11:42:44 2005 -0700

    Merge master.kernel.org:/home/rmk/linux-2.6-serial

commit 866ba633a81c1e179038f7527809d9513160a6f7
Author: Keith Owens <kaos@sgi.com>
Date:   Mon Jun 6 02:04:00 2005 -0700

    [IA64] Module gp must point to valid memory
    
    Some bits of the kernel assume that gp always points to valid memory,
    in particular PHYSICAL_MODE_ENTER() assumes that both gp and sp are
    valid virtual addresses with associated physical pages.  The IA64
    module loader puts gp well past the end of the module, with no physical
    backing.  Offsets on gp are still valid, but physical mode addressing
    breaks for modules.  Ensure that gp always falls within the module
    body.  Also ensure that gp is 8 byte aligned.
    
    Signed-off-by: Keith Owens <kaos@sgi.com>
    Signed-off-by: Tony Luck <tony.luck@intel.com>

commit ff39bc772ad18d8c7f9334926053b718d7932de0
Author: Russell King <rmk@dyn-67.arm.linux.org.uk>
Date:   Wed Jun 8 19:26:47 2005 +0100

    [PATCH] Serial: remove unused variable in sa1100 driver
    
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit dcef1f634657dabe7905af3ccda12cf7f0b6fcc1
Author: Nicolas Pitre <nico@org.rmk.(none)>
Date:   Wed Jun 8 19:00:47 2005 +0100

    [PATCH] ARM: 2664/2: add support for atomic ops on pre-ARMv6 SMP systems
    
    Patch from Nicolas Pitre
    
    Not that there might be many of them on the planet, but at least RMK
    apparently has one.
    
    Signed-off-by: Nicolas Pitre
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit aeabbbbe126f3d5e61e2db07629443cd10932bb2
Author: Nicolas Pitre <nico@org.rmk.(none)>
Date:   Wed Jun 8 19:00:16 2005 +0100

    [PATCH] ARM: 2705/1: fix writesw for misaligned source pointer
    
    Patch from Nicolas Pitre
    
    Signed-off-by: Nicolas Pitre
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit 57cfa5e97ff60d909a7e0a5f6e4d0a49aa3e2aec
Author: Giorgio Padrin <giorgio@org.rmk.(none)>
Date:   Wed Jun 8 19:00:15 2005 +0100

    [PATCH] ARM: 2703/1: pxa-regs.h: complete I2S GPIO alternate functions for PXA27x
    
    Patch from Giorgio Padrin
    
    The patch completes I2S GPIO alternate functions for PXA27x, adding I2S_SYSCLK.
    File: pxa-regs.h .
    
    Signed-off-by: Giorgio Padrin
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit ad597bd518559f59ede8d01262cdf4467e13282e
Author: David Mosberger-Tang <davidm@hpl.hp.com>
Date:   Wed Jun 8 10:45:00 2005 -0700

    [IA64] Fill holes in FIXADDR_USER space with zero pages.
    
    This fixes an oops reported by Jason Baron.
    
    Signed-off-by: David Mosberger-Tang <davidm@hpl.hp.com>
    Signed-off-by: Tony Luck <tony.luck@intel.com>

commit 358c6ac0dd4ffa5e44d59d4008a2627aa2f02b6f
Author: Ananth N Mavinakayanahalli <amavin@redhat.com>
Date:   Wed Jun 8 15:33:43 2005 +1000

    [PATCH] ppc64 kprobes: don't eat dabr/iabr exceptions
    
    Kprobes was eating the hardware instruction and data address
    breakpoint exceptions.  This patch fixes it; kprobes doesn't use those
    exceptions at all and should ignore them.
    
    Signed-off-by: Ananth N Mavinakayanahalli <amavin@redhat.com>
    Signed-off-by: Paul Mackerras <paulus@samba.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 7840e5e95c1a8622425f11454600a49b6c718886
Author: Olaf Hering <olh@suse.de>
Date:   Wed Jun 8 15:12:00 2005 +1000

    [PATCH] ppc64: print negative numbers correctly in boot wrapper
    
    if num has a value of -1, accessing the digits[] array will fail and the
    format string will be printed in funny way, or not at all. This happens if
    one prints negative numbers.
    Just change the code to match lib/vsprintf.c
    asm/div64.h cant be used because u64 maps to u32 for this build.
    
    Signed-off-by: Olaf Hering <olh@suse.de>
    Signed-off-by: Paul Mackerras <paulus@samba.org>

commit 35d1bc90546d1f0af198886ae8062a550142d926
Author: Linus Torvalds <torvalds@ppc970.osdl.org>
Date:   Wed Jun 8 07:57:17 2005 -0700

    Automatic merge of master.kernel.org:/home/rmk/linux-2.6-arm

commit f8f98a9335db4a7d6285b785180fad720bf22864
Author: Russell King <rmk@dyn-67.arm.linux.org.uk>
Date:   Wed Jun 8 15:28:24 2005 +0100

    [PATCH] ARM: Fix Xscale copy_page implementation
    
    The ARM copypage changes in 2.6.12-rc4-git1 removed the preempt locking
    from the copypage functions which broke the XScale implementation.
    This patch fixes the locking on XScale and removes the now unneeded
    minicache code.
    
    Signed-off-by: Russell King <rmk@arm.linux.org.uk>
    Checked-by: Richard Purdie

commit 1d6757fbff5bc86e94e59ab0d7bdd7e71351d839
Author: Trond Myklebust <Trond.Myklebust@netapp.com>
Date:   Tue Jun 7 18:37:01 2005 -0400

    [PATCH] NFS: Fix lookup intent handling
    
    We should never apply a lookup intent to anything other than the last
    path component in an open(), create() or access() call.
    
    Introduce the helper nfs_lookup_check_intent() which always returns
    zero if LOOKUP_CONTINUE or LOOKUP_PARENT are set, and returns the
    intent flags if we're on the last component of the lookup.
    By doing so, we fix a bug in open(O_EXCL), where we may end up
    optimizing away a real lookup of the parent directory.
    
    Problem noticed by Linda Dunaphant <linda.dunaphant@ccur.com>
    Signed-off-by: Trond Myklebust <Trond.Myklebust@netapp.com>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit eba4f669d6ec9be4173bb2619e9b8500b3c36542
Author: Linus Torvalds <torvalds@ppc970.osdl.org>
Date:   Tue Jun 7 13:41:30 2005 -0700

    Merge of master.kernel.org:/pub/scm/linux/kernel/git/davej/agpgart

commit 93cffffa19960464a52f9c78d9a6150270d23785
Author: Bjorn Helgaas <bjorn.helgaas@hp.com>
Date:   Tue Jun 7 13:22:18 2005 -0700

    [PATCH] PCI: do VIA IRQ fixup always, not just in PIC mode
    
    At least some VIA chipsets require the fixup even in IO-APIC mode.
    
    This was found and debugged with the patient assistance of Stian
    Jordet <liste@jordet.nu> on an Asus CUV266-DLS motherboard.
    
    Signed-off-by: Bjorn Helgaas <bjorn.helgaas@hp.com>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit a86d1f4301fad4ff44c1f614c897000bc574ab2f
Author: Vojtech Pavlik <vojtech@suse.cz>
Date:   Tue Jun 7 13:22:14 2005 -0700

    [PATCH] input: disable scroll feature on AT keyboards
    
    This patch disables the scroll feature on AT keyboards by default, because
    it causes the numbers of mouse devices to shift, breaking user setups.
    
    Signed-off-by: Vojtech Pavlik <vojtech@suse.cz>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit ad95d6098dd1e94a09d2a1fdf39fd8281fcd8958
Author: Eugene Surovegin <ebs@ebshome.net>
Date:   Tue Jun 7 13:22:09 2005 -0700

    [PATCH] ppc32: add 405EP cpu_spec entry
    
    Add a definition for PPC 405EP which was lost somehow during 2.4 -> 2.6
    transition.
    
    Recent change to arch/ppc/kernel/misc.S ("Fix incorrect CPU_FTR fixup usage
    for unified caches") triggered this bug and 405EP boards don't boot
    anymore.
    
    Signed-off-by: Eugene Surovegin <ebs@ebshome.net>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit eda9937656e0b9879ca521140fe61cbc9788c398
Author: Matthew Dobson <colpatch@us.ibm.com>
Date:   Tue Jun 7 13:22:05 2005 -0700

    [PATCH] send_IPI_mask_sequence() warning fix
    
    In file included from arch/i386/kernel/smp.c:235:
    include/asm-i386/mach-numaq/mach_ipi.h:4: warning: `send_IPI_mask_sequence'
    declared inline after its definition
    
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 66bb8bf8b235ba4d37fda14375827864977c6a3e
Author: David Mosberger <davidm@napali.hpl.hp.com>
Date:   Mon Apr 4 13:29:43 2005 -0700

    [PATCH] Replace check_bridge_mode() with (bridge->mode & AGSTAT_MODE_3_0).
    
    [AGPGART] Replace check_bridge_mode() with (bridge->mode & AGSTAT_MODE_3_0).
    
    As mentioned earlier, the current check_bridge_mode() code assumes
    that AGP bridges are PCI devices.  This isn't always true.  Definitely
    not for HP zx1 chipset and the same seems to be the case for SGI's AGP
    bridge.
    
    The patch below fixes the problem by picking up the AGP_MODE_3_0 bit
    from bridge->mode.  I feel like I may be missing something, since I
    can't see any reason why check_bridge_mode() wasn't doing that in the
    first place.  According to the AGP 3.0 specs, the AGP_MODE_3_0 bit is
    determined during the hardware reset and cannot be changed, so it
    seems to me it should be safe to pick it up from bridge->mode.
    
    With the patch applied, I can definitely use AGP acceleration both
    with AGP 2.0 and AGP 3.0 (one with an Nvidia card, the other with an
    ATI FireGL card).
    
    Unless someone spots a problem, please apply this patch so 3d
    acceleration can work on zx1 boxes again.
    
    This makes AGP work again on machines with an AGP bridge that isn't a
    PCI device.
    
    Signed-off-by: David Mosberger-Tang <davidm@hpl.hp.com>
    Signed-off-by: Dave Jones <davej@redhat.com>
    

commit 07eee78ea8ba2d0b7b20551c35a3e7dd158d50bb
Author: Keir Fraser <Keir.Fraser@cl.cam.ac.uk>
Date:   Wed Mar 30 13:17:04 2005 -0800

    [PATCH] AGP fix for Xen VMM
    
    When Linux is running on the Xen virtual machine monitor, physical
    addresses are virtualised and cannot be directly referenced by the AGP
    GART.  This patch fixes the GART driver for Xen by adding a layer of
    abstraction between physical addresses and 'GART addresses'.
    
    Architecture-specific functions are also defined for allocating and freeing
    the GATT.  Xen requires this to ensure that table really is contiguous from
    the point of view of the GART.
    
    These extra interface functions are defined as 'no-ops' for all existing
    architectures that use the GART driver.
    
    Signed-off-by: Keir Fraser <keir@xensource.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Dave Jones <davej@redhat.com>
    

commit e29b545cb153f230fbd8ff4c19bc98ab950f9f5c
Author: Michael Werner <werner@mrcoffee.engr.sgi.com>
Date:   Sun Mar 27 22:08:42 2005 -0800

    [PATCH] sgi-agp: fixes a problem with accessing GART memory in sgi_tioca_insert_memory and sgi_tioca_remove_memory
    
    This patch fixes a problem with accessing GART memory in
    sgi_tioca_insert_memory and sgi_tioca_remove_memory.
    
     sgi-agp.c |   12 +++++++++---
     1 files changed, 9 insertions(+), 3 deletions(-)
    
    Signed-off-by: Mike Werner <werner@sgi.com>
    Signed-off-by: Dave Jones <davej@redhat.com>
    

commit d0de98fa16169562bd74913c6c9b3857f9065c79
Author: Alan Hourihane <alanh@fairlite.demon.co.uk>
Date:   Tue May 31 19:50:49 2005 +0100

    [PATCH] i945G patch for agpgart
    
    Attached is a small patch for i945G support against 2.6.11.11.
    
    From: Alan Hourihane <alanh@fairlite.demon.co.uk>
    Signed-off-by: Dave Jones <davej@redhat.com>
    

commit 2bfe94905d3601774c6418c020ba830c118578b4
Author: Tony Luck <tony.luck@intel.com>
Date:   Tue Jun 7 11:29:43 2005 -0700

    Auto merge with /home/aegl/GIT/linus

commit 3f5948fa2cbbda1261eec9a39ef3004b3caf73fb
Author: David Mosberger <davidm@napali.hpl.hp.com>
Date:   Mon Jun 6 15:50:09 2005 -0700

    [PATCH] Include <linux/config.h> before testing CONFIG_ACPI
    
    I'm not sure why this issue is suddenly showing, but without this
    patchlet, the zx1 config won't compile anymore (e.g., to see the
    compilation-error, look for "***" in [1]).
    
    [1] http://www.gelato.unsw.edu.au/kerncomp/results//2005-06-06-17-00/zx1_defconfig-log.html
    
    Signed-off-by: David Mosberger-Tang <davidm@hpl.hp.com>
    Cc: "Brown, Len" <len.brown@intel.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 74262de5d15fe0cab9e6fe75655a502d3c90acca
Author: Tom Rini <trini@kernel.crashing.org>
Date:   Mon Jun 6 15:50:08 2005 -0700

    [PATCH] ppc32: add <linux/compiler.h> to <asm/sigcontext.h>
    
    On ppc32, <asm/sigcontext.h> uses __user, but doesn't directly include
    <linux/compiler.h>.  This adds that in.  Without this, glibc will not
    compile.
    
    Signed-off-by: Tom Rini <trini@kernel.crashing.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit ef130126cc8794f748d7513735ecb4d3d99fa39e
Author: Linus Torvalds <torvalds@ppc970.osdl.org>
Date:   Mon Jun 6 16:59:55 2005 -0700

    Merge of rsync://rsync.kernel.org/pub/scm/linux/kernel/git/davem/tg3-2.6

commit 5065cc02ccf9212d31ecb7fcd63d734e242e64b1
Author: Linus Torvalds <torvalds@ppc970.osdl.org>
Date:   Mon Jun 6 16:58:53 2005 -0700

    Merge of rsync://rsync.kernel.org/pub/scm/linux/kernel/git/davem/net-2.6

commit 26abd53d8e9e51bbeea0b4772e8dffece3eeff38
Author: Tony Luck <tony.luck@intel.com>
Date:   Mon Jun 6 15:42:07 2005 -0700

    auto merge with /home/aegl/GIT/linus

commit 15def7bfb6902aa2b2bc67059f26d696fb27c235
Author: David S. Miller <davem@davemloft.net>
Date:   Mon Jun 6 15:22:56 2005 -0700

    [TG3]: Update driver version and release date.
    
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 9ba27794197a18168b99ccecfb7b799f18b64426
Author: Michael Chan <mchan@broadcom.com>
Date:   Mon Jun 6 15:16:20 2005 -0700

    [TG3] Fix link failure in 5701
    
    On some 5701 devices with older bootcode, the LED configuration bits in
    SRAM may be invalid with value zero. The fix is to check for invalid
    bits (0) and default to PHY 1 mode. Incorrect LED mode will lead to
    error in programming the PHY.
    
    Thanks to Grant Grundler for debugging the problem.
    
    >From Grant:
    | In May, 2004,  tg3 v3.4 changed how MAC_LED_CTRL (0x40c) was getting
    | programmed and how to determine what to program into LED_CTRL. The new
    | code trusted NIC_SRAM_DATA_CFG (0x00000b58) to indicate what to write
    | to LED_CTRL and MII EXT_CTRL registers. On "IOX Core Lan", SRAM was
    | saying MODE_MAC (0x0) and that doesn't work.
    
    Signed-off-by: Michael Chan <mchan@broadcom.com>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 49cabf49abd7676d026a61baabf5aae9337a82be
Author: Michael Chan <mchan@broadcom.com>
Date:   Mon Jun 6 15:15:17 2005 -0700

    [TG3]: Add TSO firmware license
    
    Signed-off-by: Michael Chan <mchan@broadcom.com>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 9beb1d587f690d5b2f9087f8f10c0ff9f6b66886
Author: John W. Linville <linville@tuxdriver.com>
Date:   Mon Jun 6 15:14:35 2005 -0700

    [TG3]: Update pci.ids for BCM5752
    
    Signed-off-by: John W. Linville <linville@tuxdriver.com>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit fa04ae5c09f3dfedbc923c2954a9a26a573833f1
Author: David S. Miller <davem@davemloft.net>
Date:   Mon Jun 6 15:07:19 2005 -0700

    [ETHTOOL]: Check correct pointer in ethtool_set_coalesce().
    
    It was checking the "GET" function pointer instead of
    the "SET" one.  Looks like a cut&paste error :-)
    
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 8f5bb0438b86d1a5393176ceeec2836fd469edf8
Author: Yoshinori Sato <ysato@users.sourceforge.jp>
Date:   Mon Jun 6 14:46:32 2005 -0700

    [PATCH] binfmt_flat mmap flag fix
    
    Make sure that binfmt_flat passes the correct flags into do_mmap().  nommu's
    validate_mmap_request() will simple return -EINVAL if we try and pass it a
    flags value of zero.
    
    Signed-off-by: Yoshinori Sato <ysato@users.sourceforge.jp>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit d671a1cbf7c7a5c5562106d39eb7f830ae5273ae
Author: Al Viro <viro@www.linux.org.uk>
Date:   Mon Jun 6 13:36:14 2005 -0700

    [PATCH] namei fixes (19/19)
    
    __do_follow_link() passes potentially worng vfsmount to touch_atime().  It
    matters only in (currently impossible) case of symlink mounted on something,
    but it's trivial to fix and that actually makes more sense.
    
    Signed-off-by: Al Viro <viro@parcelfarce.linux.theplanet.co.uk>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 634ee7017b31e46e28c0bd2cb488213331bfd39a
Author: Al Viro <viro@www.linux.org.uk>
Date:   Mon Jun 6 13:36:13 2005 -0700

    [PATCH] namei fixes (18/19)
    
    Cosmetical cleanups - __follow_mount() calls in __link_path_walk() absorbed
    into do_lookup().
    
    Obviously equivalent transformation.
    
    Signed-off-by: Al Viro <viro@parcelfarce.linux.theplanet.co.uk>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 58c465eba4d7ed307c4c7cb3382ba7ee565e8858
Author: Al Viro <viro@www.linux.org.uk>
Date:   Mon Jun 6 13:36:13 2005 -0700

    [PATCH] namei fixes (17/19)
    
    follow_mount() made void, reordered dput()/mntput() in it.
    
    follow_dotdot() switched from struct vfmount ** + struct dentry ** to
    struct nameidata *; callers updated.
    
    Equivalent transformation + fix for too-early-mntput() race.
    
    Signed-off-by: Al Viro <viro@parcelfarce.linux.theplanet.co.uk>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 39ca6d49759346d4710c759d443eec8048b27213
Author: Al Viro <viro@www.linux.org.uk>
Date:   Mon Jun 6 13:36:12 2005 -0700

    [PATCH] namei fixes (16/19)
    
    Conditional mntput() moved into __do_follow_link().  There it collapses with
    unconditional mntget() on the same sucker, closing another too-early-mntput()
    race.
    
    Signed-off-by: Al Viro <viro@parcelfarce.linux.theplanet.co.uk>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit d9d29a29669f96903d9950bb881c2a393fd33849
Author: Al Viro <viro@www.linux.org.uk>
Date:   Mon Jun 6 13:36:11 2005 -0700

    [PATCH] namei fixes (15/19)
    
    Getting rid of sloppy logics:
    
    a) in do_follow_link() we have the wrong vfsmount dropped if our symlink
    had been mounted on something.  Currently it worls only because we never
    get such situation (modulo filesystem playing dirty tricks on us).  And
    it obfuscates already convoluted logics...
    
    b) same goes for open_namei().
    
    c) in __link_path_walk() we have another "it should never happen" sloppiness -
    out_dput: there does double-free on underlying vfsmount and leaks the covering
    one if we hit it just after crossing a mountpoint.  Again, wrong vfsmount
    getting dropped.
    
    d) another too-early-mntput() race - in do_follow_mount() we need to postpone
    conditional mntput(path->mnt) until after dput(path->dentry).  Again, this one
    happens only in it-currently-never-happens-unless-some-fs-plays-dirty
    scenario...
    
    Signed-off-by: Al Viro <viro@parcelfarce.linux.theplanet.co.uk>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 4b7b9772e4c3d87e649d4c419d2487aacf1235aa
Author: Al Viro <viro@www.linux.org.uk>
Date:   Mon Jun 6 13:36:10 2005 -0700

    [PATCH] namei fixes (14/19)
    
    shifted conditional mntput() into do_follow_link() - all callers were doing
    the same thing.
    
    Obviously equivalent transformation.
    
    Signed-off-by: Al Viro <viro@parcelfarce.linux.theplanet.co.uk>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit ba7a4c1a76f56c607560f1676680ff491747bdae
Author: Al Viro <viro@www.linux.org.uk>
Date:   Mon Jun 6 13:36:08 2005 -0700

    [PATCH] namei fixes (13/19)
    
    In open_namei() exit_dput: we have mntput() done in the wrong order -
    if nd->mnt != path.mnt we end up doing
    	mntput(nd->mnt);
    	nd->mnt = path.mnt;
    	dput(nd->dentry);
    	mntput(nd->mnt);
    which drops nd->dentry too late.  Fixed by having path.mnt go first.
    That allows to switch O_NOFOLLOW under if (__follow_mount(...)) back
    to exit_dput, while we are at it.
    
    Fix for early-mntput() race + equivalent transformation.
    
    Signed-off-by: Al Viro <viro@parcelfarce.linux.theplanet.co.uk>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit a15a3f6fc67d910f43098acec6e19d25a37d7cb9
Author: Al Viro <viro@www.linux.org.uk>
Date:   Mon Jun 6 13:36:08 2005 -0700

    [PATCH] namei fixes (12/19)
    
    In open_namei() we take mntput(nd->mnt);nd->mnt=path.mnt; out of the if
    (__follow_mount(...)), making it conditional on nd->mnt != path.mnt instead.
    
    Then we shift the result downstream.
    
    Equivalent transformations.
    
    Signed-off-by: Al Viro <viro@parcelfarce.linux.theplanet.co.uk>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 2f12dbfbb6286c725c283a169f8f05e89a86848b
Author: Al Viro <viro@www.linux.org.uk>
Date:   Mon Jun 6 13:36:07 2005 -0700

    [PATCH] namei fixes (11/19)
    
    shifted conditional mntput() calls in __link_path_walk() downstream.
    
    Obviously equivalent transformation.
    
    Signed-off-by: Al Viro <viro@parcelfarce.linux.theplanet.co.uk>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit e13b210f6f7bdc44dfee0a9bbd633a32db0d6333
Author: Al Viro <viro@www.linux.org.uk>
Date:   Mon Jun 6 13:36:06 2005 -0700

    [PATCH] namei fixes (10/19)
    
    In open_namei(), __follow_down() loop turned into __follow_mount().
    Instead of
    	if we are on a mountpoint dentry
    		if O_NOFOLLOW checks fail
    			drop path.dentry
    			drop nd
    			return
    		do equivalent of follow_mount(&path.mnt, &path.dentry)
    		nd->mnt = path.mnt
    we do
    	if __follow_mount(path) had, indeed, traversed mountpoint
    		/* now both nd->mnt and path.mnt are pinned down */
    		if O_NOFOLLOW checks fail
    			drop path.dentry
    			drop path.mnt
    			drop nd
    			return
    		mntput(nd->mnt)
    		nd->mnt = path.mnt
    
    Now __follow_down() can be folded into follow_down() - no other callers left.
    We need to reorder dput()/mntput() there - same problem as in follow_mount().
    
    Equivalent transformation + fix for a bug in O_NOFOLLOW handling - we used to
    get -ELOOP if we had the same fs mounted on /foo and /bar, had something bound
    on /bar/baz and tried to open /foo/baz with O_NOFOLLOW.  And fix of
    too-early-mntput() race in follow_down()
    
    Signed-off-by: Al Viro <viro@parcelfarce.linux.theplanet.co.uk>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 463ffb2e9d39c2a3fd8c3c1d4a34e01f2078f972
Author: Al Viro <viro@www.linux.org.uk>
Date:   Mon Jun 6 13:36:05 2005 -0700

    [PATCH] namei fixes (9/19)
    
    New helper: __follow_mount(struct path *path).  Same as follow_mount(), except
    that we do *not* do mntput() after the first lookup_mnt().
    
    IOW, original path->mnt stays pinned down.  We also take care to do dput()
    before mntput() in the loop body (follow_mount() also needs that reordering,
    but that will be done later in the series).
    
    The following are equivalent, assuming that path.mnt == x:
    (1)
    	follow_mount(&path.mnt, &path.dentry)
    (2)
    	__follow_mount(&path);
    	if (path->mnt != x)
    		mntput(x);
    (3)
    	if (__follow_mount(&path))
    		mntput(x);
    
    Callers of follow_mount() in __link_path_walk() converted to (2).
    
    Equivalent transformation + fix for too-late-mntput() race in __follow_mount()
    loop.
    
    Signed-off-by: Al Viro <viro@parcelfarce.linux.theplanet.co.uk>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit d671d5e51400aab03c713a16ce3545aa81ad7b1c
Author: Al Viro <viro@www.linux.org.uk>
Date:   Mon Jun 6 13:36:04 2005 -0700

    [PATCH] namei fixes (8/19)
    
    In open_namei() we never use path.mnt or path.dentry after exit: or ok:.
    Assignment of path.dentry in case of LAST_BIND is dead code and only
    obfuscates already convoluted function; assignment of path.mnt after
    __do_follow_link() can be moved down to the place where we set path.dentry.
    
    Obviously equivalent transformations, just to clean the air a bit in that
    region.
    
    Signed-off-by: Al Viro <viro@parcelfarce.linux.theplanet.co.uk>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit cd4e91d3bca8d5527289f5984cf32e9fe6fb8293
Author: Al Viro <viro@www.linux.org.uk>
Date:   Mon Jun 6 13:36:03 2005 -0700

    [PATCH] namei fixes (7/19)
    
    The first argument of __do_follow_link() switched to struct path *
    (__do_follow_link(path->dentry, ...) -> __do_follow_link(path, ...)).
    
    All callers have the same calls of mntget() right before and dput()/mntput()
    right after __do_follow_link(); these calls have been moved inside.
    
    Obviously equivalent transformations.
    
    Signed-off-by: Al Viro <viro@parcelfarce.linux.theplanet.co.uk>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 839d9f93c9f1623fb37234d464d739617879d97e
Author: Al Viro <viro@www.linux.org.uk>
Date:   Mon Jun 6 13:36:02 2005 -0700

    [PATCH] namei fixes (6/19)
    
    mntget(path->mnt) in do_follow_link() moved down to right before the
    __do_follow_link() call and rigth after loop: resp.
    
    dput()+mntput() on non-ELOOP branch moved up to right after __do_follow_link()
    call.
    
    resulting
    loop:
    	mntget(path->mnt);
    	path_release(nd);
    	dput(path->mnt);
    	mntput(path->mnt);
    replaced with equivalent
    	dput(path->mnt);
    	path_release(nd);
    
    Equivalent transformations - the reason why we have that mntget() is that
    __do_follow_link() can drop a reference to nd->mnt and that's what holds
    path->mnt.  So that call can happen at any point prior to __do_follow_link()
    touching nd->mnt.  The rest is obvious.
    
    NOTE: current tree relies on symlinks *never* being mounted on anything.  It's
    not hard to get rid of that assumption (actually, that will come for free
    later in the series).  For now we are just not making the situation worse than
    it is.
    
    Signed-off-by: Al Viro <viro@parcelfarce.linux.theplanet.co.uk>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 1be4a0900be5d2c2fd9cd012e3a153e1ea47b96a
Author: Al Viro <viro@www.linux.org.uk>
Date:   Mon Jun 6 13:36:01 2005 -0700

    [PATCH] namei fixes (5/19)
    
    fix for too early mntput() in open_namei() - we pin path.mnt down for the
    duration of __do_follow_link().  Otherwise we could get the fs where our
    symlink lived unmounted while we were in __do_follow_link().  That would end
    up with dentry of symlink staying pinned down through the fs shutdown.
    
    Signed-off-by: Al Viro <viro@parcelfarce.linux.theplanet.co.uk>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit d73ffe16b8baafae6e9249acee6b50c24099c6de
Author: Al Viro <viro@www.linux.org.uk>
Date:   Mon Jun 6 13:36:01 2005 -0700

    [PATCH] namei fixes (4/19)
    
    path.mnt in open_namei() set to mirror nd->mnt.
    
    nd->mnt is set in 3 places in that function - path_lookup() in the beginning,
    __follow_down() loop after do_last: and __do_follow_link() call after
    do_link:.
    
    We set path.mnt to nd->mnt after path_lookup() and __do_follow_link().  In
    __follow_down() loop we use &path.mnt instead of &nd->mnt and set nd->mnt to
    path.mnt immediately after that loop.
    
    Obviously equivalent transformation.
    
    Signed-off-by: Al Viro <viro@parcelfarce.linux.theplanet.co.uk>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 4e7506e4dd9e40c189fcbec95d5dbc92f2e5926a
Author: Al Viro <viro@www.linux.org.uk>
Date:   Mon Jun 6 13:36:00 2005 -0700

    [PATCH] namei fixes (3/19)
    
    Replaced struct dentry *dentry in namei with struct path path.  All uses of
    dentry replaced with path.dentry there.
    
    Obviously equivalent transformation.
    
    Signed-off-by: Al Viro <viro@parcelfarce.linux.theplanet.co.uk>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 5f92b3bcec0fa2e2d775b589850097f9dc6b2de2
Author: Al Viro <viro@www.linux.org.uk>
Date:   Mon Jun 6 13:35:59 2005 -0700

    [PATCH] namei fixes (2/19)
    
    All callers of do_follow_link() do mntget() right before it and
    dput()+mntput() right after.  These calls are moved inside do_follow_link()
    now.
    
    Obviously equivalent transformation.
    
    Signed-off-by: Al Viro <viro@parcelfarce.linux.theplanet.co.uk>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 90ebe5654febe3555a2516d51d3d251226d35fdb
Author: Al Viro <viro@www.linux.org.uk>
Date:   Mon Jun 6 13:35:58 2005 -0700

    [PATCH] namei fixes
    
    OK, here comes a patch series that hopefully should close all
    too-early-mntput() races in fs/namei.c.  Entire area is convoluted as hell, so
    I'm splitting that series into _very_ small chunks.
    
    Patches alread in the tree close only (very wide) races in following symlinks
    (see "busy inodes after umount" thread some time ago).  Unfortunately, quite a
    few narrower races of the same nature were not closed.  Hopefully this should
    take care of all of them.
    
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 4481e8eea761857367162b0957277d5524fbea63
Author: Kumar Gala <galak@freescale.com>
Date:   Mon Jun 6 13:35:57 2005 -0700

    [PATCH] ppc32: Fix incorrect CPU_FTR fixup usage for unified caches
    
    Runtime feature support for unified caches was testing a userland feature
    flag (PPC_FEATURE_UNIFIED_CACHE) instead of a cpu feature flag
    (CPU_FTR_SPLIT_ID_CACHE).  Luckily the current defined bit mask for cpu
    features and userland features do not overlap so this only causes an issue
    on machines with a unified cache, which is extremely rare on PPC today.
    
    Signed-off-by: Kumar Gala <kumar.gala@freescale.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 8e2894e51d6407e47226a60c0d19bf384642c55a
Author: Yoshinori Sato <ysato@users.sourceforge.jp>
Date:   Mon Jun 6 13:35:56 2005 -0700

    [PATCH] h8300 build error fix
    
    h8300 was missing a few definitions.
    
    Signed-off-by: Yoshinori Sato <ysato@users.sourceforge.jp>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 3399ba5b70eccc918ea4ab2630cac68f5c8ff845
Author: Denis Vlasenko <vda@ilport.com.ua>
Date:   Mon Jun 6 13:35:55 2005 -0700

    [PATCH] moxa: do not ignore input
    
    Stop using tty internal structure in mxser_receive_chars(), use
    tty_insert_flip_char(tty, ch flag); instead.
    
    Without this change driver ignores any rx'ed chars.
    
    Run tested.
    
    Cc: Alan Cox <alan@redhat.com>
    Cc: Russell King <rmk@arm.linux.org.uk>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit a51171816826b074828fa96cb6ef60fc3b13631a
Author: Martin Schwidefsky <schwidefsky@de.ibm.com>
Date:   Mon Jun 6 13:35:54 2005 -0700

    [PATCH] broken fault_in_pages_readable call in generic_file_buffered_write()
    
    fault_in_pages_readable() is being passed an incorrect `end' address, which
    can result in writes accidentally faulting in pages which will not be affected
    by the write() call.
    
    Signed-off-by: Martin Schwidefsky <schwidefsky@de.ibm.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 0b68177ccd12866d9f19cafad212b861c9d02a8c
Author: Steve French <sfrench@hera.kernel.org>
Date:   Mon Jun 6 09:57:33 2005 -0700

    Merge with rsync://rsync.kernel.org/pub/scm/linux/kernel/git/torvalds/linux-2.6.git
    

commit 7cef5677ef3a8084f2588ce0a129dc95d65161f6
Author: Linus Torvalds <torvalds@ppc970.osdl.org>
Date:   Mon Jun 6 08:22:29 2005 -0700

    Linux 2.6.12-rc6
    
    Getting ready for the real release..

commit eae936e21bd726f9d9555f2262d439fbcd61dccf
Author: Yoichi Yuasa <yuasa@hh.iij4u.or.jp>
Date:   Sat Jun 4 15:43:34 2005 -0700

    [PATCH] serial: update NEC VR4100 series serial support
    
    - Changed the return value of unknown type to NULL.
    
    - Deleted the NULL check of dev_id in siu_interrupt().
    
    - Deleted the NULL check of port->membase in siu_shutdown().
    
    - Added the NULL check of port->membase to siu_startup().
    
    - Removed early_uart_ops. Now using vr41xx_siu standerd one.
    
    - Changed KSEG1ADDR() in siu_console_setup() to ioremap().
    
    - When uart_add_one_port() failed, changed to set NULL to port->dev.
    
    Signed-off-by: Yoichi Yuasa <yuasa@hh.iij4u.or.jp>
    Cc: Russell King <rmk@arm.linux.org.uk>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit f26d583e41aedad8159acf9533fa287d7209dfbf
Author: Gerald Schaefer <geraldsc@de.ibm.com>
Date:   Sat Jun 4 15:43:33 2005 -0700

    [PATCH] s390: deadlock in appldata
    
    The system might hang when using appldata_mem with high I/O traffic and a
    large number of devices.  The spinlocks bdev_lock and swaplock are acquired
    via calls to si_meminfo() and si_swapinfo() from a tasklet, i.e.  interrupt
    context, which can lead to a deadlock.  Replace tasklet with work queue.
    
    Signed-off-by: Martin Schwidefsky <schwidefsky@de.ibm.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 595bf2aacae96d0f87352a1ff5476b79e52e212f
Author: Martin Schwidefsky <schwidefsky@de.ibm.com>
Date:   Sat Jun 4 15:43:32 2005 -0700

    [PATCH] s390: in_interrupt vs. in_atomic
    
    The condition for no context in do_exception checks for hard and soft
    interrupts by using in_interrupt() but not for preemption.  This is bad for
    the users of __copy_from/to_user_inatomic because the fault handler might call
    schedule although the preemption count is != 0.  Use in_atomic() instead
    in_interrupt().
    
    Signed-off-by: Martin Schwidefsky <schwidefsky@de.ibm.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit c5c3a6d8fe923b8780b9cd10e72344b8cf8518b5
Author: Bodo Stroesser <bstroesser@fujitsu-siemens.com>
Date:   Sat Jun 4 15:43:32 2005 -0700

    [PATCH] s390: uml ptrace fixes
    
    To make UML build and run on s390, I needed to do these two little
    changes:
    
    1) UML includes some of the subarch's (s390) headers. I had to
       change one of them with the following one-liner, to make this
       compile. AFAICS, this change doesn't break compilation of s390
       itself.
    
    2) UML needs to intercept syscalls via ptrace to invalidate the syscall,
       read syscall's parameters and write the result with the result of
       UML's syscall processing. Also, UML needs to make sure, that the host
       does no syscall restart processing. On i386 for example, this can be
       done by writing -1 to orig_eax on the 2nd syscall interception
       (orig_eax is the syscall number, which after the interception is used
       as a "interrupt was a syscall" flag only.
       Unfortunately, s390 holds syscall number and syscall result in gpr2 and
       its "interrupt was a syscall" flag (trap) is unreachable via ptrace.
       So I changed the host to set trap to -1, if the syscall number is changed
       to an invalid value on the first syscall interception.
    
    Signed-off-by: Martin Schwidefsky <schwidefsky@de.ibm.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 778959db97c7ed8eed4025916916b17a4629ce3d
Author: Martin Schwidefsky <schwidefsky@de.ibm.com>
Date:   Sat Jun 4 15:43:30 2005 -0700

    [PATCH] s390: ptrace peek and poke
    
    The special cases of peek and poke on acrs[15] and the fpc register are not
    handled correctly.  A poke on acrs[15] will clobber the 4 bytes after the
    access registers in the thread_info structure.  That happens to be the kernel
    stack pointer.  A poke on the fpc with an invalid value is not caught by the
    validity check.  On the next context switch the broken fpc value will cause a
    program check in the kernel.  Improving the checks in peek and poke fixes
    this.
    
    Signed-off-by: Martin Schwidefsky <schwidefsky@de.ibm.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 854715be73b221596c7127d4042e1120d4539e19
Author: Qu Fuping <fs@ercist.iscas.ac.cn>
Date:   Sat Jun 4 15:43:29 2005 -0700

    [PATCH] mpage_end_io_write() I/O error handling fix
    
    When fsync() runs wait_on_page_writeback_range() it only inspects pages which
    are actually under I/O (PAGECACHE_TAG_WRITEBACK).  If a page completed I/O
    prior to wait_on_page_writeback_range() looking at it, it is supposed to have
    recorded its I/O error state in the address_space.
    
    But mpage_mpage_end_io_write() forgot to set the address_space error flag in
    this case.
    
    Signed-off-by: Qu Fuping <fs@ercist.iscas.ac.cn>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit d3045064054a93d303094cfb96d980cc3c82a64c
Author: Linus Torvalds <torvalds@ppc970.osdl.org>
Date:   Sat Jun 4 08:18:39 2005 -0700

    Automatic merge of 'misc-fixes' branch from
    
    	rsync://rsync.kernel.org/pub/scm/linux/kernel/git/jgarzik/netdev-2.6

commit 910313aa1db1b0c63ee9684bb4f35c17e7192f43
Author:  <jgarzik@pretzel.yyz.us>
Date:   Sat Jun 4 04:31:44 2005 -0400

    Automatic merge of /spare/repo/netdev-2.6 branch r8169-fix

commit 17d82fcc6a15887b7138d35802ab8fc5f249794f
Author: Deepak Saxena <dsaxena@net.rmk.(none)>
Date:   Fri Jun 3 22:18:52 2005 +0100

    [PATCH] ARM: 2700/1: Disable IXP2000 IRQs at bootup
    
    Patch from Deepak Saxena
    
    The IXDP2800 bootloader does not disable IRQs before jumping into
    the kernel and this is causing the Grand Unified KGDB to crash
    the system when we do an early call to trap_init() and irq handlers
    have not yet been registered. This patch disables IRQs before we
    jump into the kernel.
    
    Signed-off-by: Deepak Saxena
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit 8be3de3fd8469154a2b3e18a4712032dac5b4a53
Author: Nathan Lynch <ntl@pobox.com>
Date:   Fri Jun 3 14:25:25 2005 -0500

    [PATCH] prom_find_machine_type typo breaks pSeries lpar boot
    
    A typo in prom_find_machine_type from Ben's recent patch "ppc64: Fix
    result code handling in prom_init" prevents pSeries LPAR systems from
    booting.
    
    Tested on a pSeries 570 and OpenPower 720 (both Power5 LPAR).
    
    Signed-off-by: Nathan Lynch <ntl@pobox.com>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 8775420d2fbcfff866995471ea5f6130d14d121c
Author: Todd Poynor <tpoynor@com.rmk.(none)>
Date:   Fri Jun 3 20:52:27 2005 +0100

    [PATCH] ARM: 2691/1: PXA27x sleep fixes take 2
    
    Patch from Todd Poynor
    
    PXA27x sleep fixes:
    * set additional sleep/wakeup registers for Mainstone boards.
    * move CKEN=0 to pxa25x-specific code; that value is harmful on pxa27x.
    * save/restore additional registers, including some found necessary for
    C5 processors and/or newer blob versions.
    * enable future support of additional sleep modes for PXA27x (eg,
    standby, deep sleep).
    * split off cpu-specific sleep processing between pxa27x and pxa25x into
    separate files (partly in preparation for additional sleep modes).
    Includes fixes from David Burrage.
    
    Signed-off-by: Todd Poynor
    Signed-off-by: Nicolas Pitre
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit 718a30a5cf0a9142f716a49853bd4b4a25a8da1b
Author: Mike Frysinger <vapier@org.rmk.(none)>
Date:   Fri Jun 3 20:52:26 2005 +0100

    [PATCH] ARM: 2696/1: remove ';' in ELF_DATA define in asm-arm{,26}/elf.h
    
    Patch from Mike Frysinger
    
    the ELF_DATA define in both arm asm subdirs of linux/include/ contain a
    semicolon at the end.  this of course will cause any code that tries to use
    ELF_DATA in assignment or comparison to fail.  no other arch has a semicolon
    in their ELF_DATA defines.
    
    Signed-off-by: Mike Frysinger
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit 105bb2698b54a838165947199f1c8be5c2e7d9bb
Author: Albrecht Dreß <albrecht.dress@com.rmk.(none)>
Date:   Fri Jun 3 20:52:26 2005 +0100

    [PATCH] ARM: 2694/1: [s3c2410/dma] release irq properly to fix kernel oops
    
    Patch from Albrecht Dreß
    
    Problem:
    When a module requests a DMA channel via the function s3c2410_dma_request(), this function requests the appropriate irq under the name of the client module. When the client module is unloaded, it calls s3c2410_dma_free() which does not free the irq. Consequently, when e.g. running "cat /proc/interrupts", the irq owner points to freed memory, leading to a kernel oops.
    File:
    linux/arch/arm/mach-s3c2410/dma.c
    Fix:
    trivial, below
    
    Signed-off-by: Albrecht Dreß
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit 4ab5c01c7cc28f29d5cf5f2a591cb6f7bbece48e
Author: Deepak Saxena <dsaxena@net.rmk.(none)>
Date:   Fri Jun 3 20:52:25 2005 +0100

    [PATCH] ARM: 2692/1: Fix compile warnings in include/asm-arm/arch-ixp2000/io.h
    
    Patch from Deepak Saxena
    
    This patch fixes the following warnings:
    include/asm/arch/io.h: In function `insw':
    include/asm/arch/io.h:78: warning: comparison of distinct pointer types
    lacks acast
    include/asm/arch/io.h:79: warning: comparison of distinct pointer types
    lacks acast
    include/asm/arch/io.h: In function `outsw':
    include/asm/arch/io.h:103: warning: comparison of distinct pointer types
    lacks a cast
    include/asm/arch/io.h:104: warning: comparison of distinct pointer types
    lacks a cast
    include/asm/arch/io.h: In function `inw':
    include/asm/arch/io.h:127: warning: comparison of distinct pointer types
    lacks a cast
    
    Signed-off-by: Deepak Saxena
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit ff89bf3bc0534aa03b5375aa906544d96911bad4
Author: Dean Nelson <dcn@sgi.com>
Date:   Fri Jun 3 05:25:00 2005 -0700

    [IA64] fix setting of sn_hub_info->shub_1_1_found
    
    Fix a bug in which shub_1_1_found is not being properly initialized or set,
    resulting in the improper setting of sn_hub_info->shub_1_1_found.
    
    Signed-off-by: Dean Nelson <dcn@sgi.com>
    Signed-off-by: Tony Luck <tony.luck@intel.com>

commit d8d088d25822b0199fdfb392085e1cf8a5914a97
Author: Linus Torvalds <torvalds@ppc970.osdl.org>
Date:   Fri Jun 3 08:54:02 2005 -0700

    Automatic merge of rsync://www.parisc-linux.org/~jejb/git/scsi-for-linus-2.6

commit b05a720b374ac6af05b2fd4c70bb2c61a9f461ca
Author: Greg Ungerer <gerg@snapgear.com>
Date:   Fri Jun 3 11:35:20 2005 +1000

    [PATCH] m68knommu: fix scheduling and race problems in idle loop
    
    Re-work the m68knommu specific idle code according to suggestions
    from Nick Piggin <nickpiggin@yahoo.com.au>.
    
    A couple of rules that we need to follow:
    
    1. Preempt should now disabled over idle routines. Should only be enabled
    to call schedule() then disabled again.
    
    3. When cpu_idle finds (need_resched() == 'true'), it should call schedule().
    It should not call schedule() otherwise.
    
    Also fix interrupt locking around the need_resched() and cpu stop state
    so that there is no race condition.
    
    Signed-off-by: Greg Ungerer <gerg@snapgear.com>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit f4d340cf869b2b63e1043eed72aa2eab6fa2cb2c
Author: David Brownell <david-b@pacbell.net>
Date:   Fri Jun 3 08:01:35 2005 -0700

    [PATCH] USB: resolve Zaurus problem
    
    This "obvious" one-liner is needed to recognize Zaurus SL 6000;
    it just checks two GUIDs not just one.
    
    OSDL bugids #4512 and #4545 seem to be duplicates of this report.
    
    From: Gerald Skerbitz <gsker@tcfreenet.org>
    Signed-off-by: David Brownell <dbrownell@users.sourceforge.net>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit c92715b3c22e94105a8fd9e4a23047d05c5077e7
Author: Nathan Lynch <ntl@pobox.com>
Date:   Thu Jun 2 17:15:09 2005 -0500

    [SCSI] fix slab corruption during ipr probe
    
    With CONFIG_DEBUG_SLAB=y I see slab corruption messages during boot on
    pSeries machines with IPR adapters with any 2.6.12-rc kernel.
    
    The change which seems to have introduced the problem is "SCSI: revamp
    target scanning routines" and may be found at:
    http://marc.theaimsgroup.com/?l=bk-commits-head&m=111093946426333&w=2
    
    In order to revert that in a 2.6.12-rc1 tree, I had to revert "target
    code updates to support scanned targets" first:
    http://marc.theaimsgroup.com/?l=bk-commits-head&m=111094132524649&w=2
    
    With both patches reverted, the corruption messages go away.
    
    ipr: IBM Power RAID SCSI Device Driver version: 2.0.13 (February 21,
    2005)
    ipr 0001:d0:01.0: Found IOA with IRQ: 167
    ipr 0001:d0:01.0: Starting IOA initialization sequence.
    ipr 0001:d0:01.0: Adapter firmware version: 020A005C
    ipr 0001:d0:01.0: IOA initialized.
    scsi0 : IBM 570B Storage Adapter
      Vendor: IBM       Model: VSBPD4E1  U4SCSI  Rev: 4770
      Type:   Enclosure                          ANSI SCSI revision: 02
      Vendor: IBM   H0  Model: HUS103036FL3800   Rev: RPQF
      Type:   Direct-Access                      ANSI SCSI revision: 04
      Vendor: IBM   H0  Model: HUS103036FL3800   Rev: RPQF
      Type:   Direct-Access                      ANSI SCSI revision: 04
      Vendor: IBM   H0  Model: HUS103036FL3800   Rev: RPQF
      Type:   Direct-Access                      ANSI SCSI revision: 04
      Vendor: IBM   H0  Model: HUS103036FL3800   Rev: RPQF
      Type:   Direct-Access                      ANSI SCSI revision: 04
      Vendor: IBM       Model: VSBPD4E1  U4SCSI  Rev: 4770
      Type:   Enclosure                          ANSI SCSI revision: 02
    Slab corruption: start=c0000001e8de5268, len=512
    Redzone: 0x5a2cf071/0x5a2cf071.
    Last user: [<c00000000029c3a0>](.scsi_target_dev_release+0x28/0x50)
    080: 6b 6b 6b 6b 6b 6b 6b 6b 6b 6b 6b 6b 6b 6b 6b 6a
    Prev obj: start=c0000001e8de5050, len=512
    Redzone: 0x5a2cf071/0x5a2cf071.
    Last user: [<0000000000000000>](0x0)
    000: 6b 6b 6b 6b 6b 6b 6b 6b 6b 6b 6b 6b 6b 6b 6b 6b
    010: 6b 6b 6b 6b 6b 6b 6b 6b 6b 6b 6b 6b 6b 6b 6b 6b
    Next obj: start=c0000001e8de5480, len=512
    Redzone: 0x170fc2a5/0x170fc2a5.
    Last user: [<c000000000228d7c>](.as_init_queue+0x5c/0x228)
    000: c0 00 00 01 e8 83 26 08 00 00 00 00 00 00 00 00
    010: 00 00 00 00 00 00 00 00 c0 00 00 01 e8 de 54 98
    Slab corruption: start=c0000001e8de5268, len=512
    Redzone: 0x5a2cf071/0x5a2cf071.
    Last user: [<c00000000029c3a0>](.scsi_target_dev_release+0x28/0x50)
    080: 6b 6b 6b 6b 6b 6b 6b 6b 6b 6b 6b 6b 6b 6b 6b 6a
    Prev obj: start=c0000001e8de5050, len=512
    Redzone: 0x5a2cf071/0x5a2cf071.
    Last user: [<0000000000000000>](0x0)
    000: 6b 6b 6b 6b 6b 6b 6b 6b 6b 6b 6b 6b 6b 6b 6b 6b
    010: 6b 6b 6b 6b 6b 6b 6b 6b 6b 6b 6b 6b 6b 6b 6b 6b
    Next obj: start=c0000001e8de5480, len=512
    Redzone: 0x170fc2a5/0x170fc2a5.
    Last user: [<c000000000228d7c>](.as_init_queue+0x5c/0x228)
    000: c0 00 00 01 e8 83 26 08 00 00 00 00 00 00 00 00
    010: 00 00 00 00 00 00 00 00 c0 00 00 01 e8 de 54 98
    ...
    
    I did some digging and the problem seems to be a refcounting issue in
    __scsi_add_device.  The target gets freed in scsi_target_reap, and
    then __scsi_add_device tries to do another device_put on it.
    
    Signed-off-by: Nathan Lynch <ntl@pobox.com>
    Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

commit 18e144d32cd3dae6953c385e4b376ef9688b61b0
Author: Andrew Vasquez <andrew.vasquez@qlogic.com>
Date:   Fri May 27 15:04:47 2005 -0700

    [SCSI] qla2xxx: fix bad locking during eh_abort
    
    
    Correct incorrect locking order in qla2xxx_eh_abort() handler which
    would case a hang during certain code-paths.
    
    With extra pieces to fix the irq state in the locks.
    
    Signed-off-by: Andrew Vasquez <andrew.vasquez@qlogic.com>
    Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

commit 39a66b8d22a36cfa1a48f7f59c6a4639d9c99653
Author: Craig Shelley <craig@microtron.org.uk>
Date:   Fri May 27 00:09:56 2005 +0100

    [PATCH] USB: CP2101 Add support for flow control
    
    Added support to get/set flow control line levels using TIOCMGET and
    TIOCMSET.
    Added support for RTSCTS hardware flow control.
    cp2101_get_config and cp2101_set_config modified to support long request
    strings, required for configuring flow control.
    
    Signed-off-by: Craig Shelley craig@microtron.org.uk
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 719df469cb51199316ae2a11c75a8046be34b899
Author: Roman Kagan <rkagan@mail.ru>
Date:   Fri May 6 00:55:56 2005 +0400

    [PATCH] USB: update urb documentation
    
    On Wed, May 04, 2005 at 01:37:30PM -0700, David Brownell wrote:
    > On Wednesday 04 May 2005 12:19 pm, Roman Kagan wrote:
    > > struct urb {
    > > 	/* private, usb core and host controller only fields in the urb */
    > > 	...
    > > 	struct list_head urb_list;	/* list pointer to all active urbs */
    > > 	...
    > > };
    > >
    > > Is it safe to use it for driver's purposes when the driver owns the urb,
    > > that is, starting from the completion routine until the urb is submitted
    > > with usb_submit_urb()?
    >
    > Right now, it should be.
    
    Great!  FWIW I've briefly tested a modified version of usbatm using
    the list head in struct urb instead of creating a wrapper struct, and I
    haven't seen any failures yet.  So I tend to believe that your "should
    be" actually means "is" :)
    
    > > If it is, can it be guaranteed in future, e.g.
    > > by moving the list head into the public section of struct urb?
    >
    > In fact I'm not sure why it ever got called "private" to usbcore/hcds.
    > I thought the idea was that it should be like urb->status, reserved for
    > whoever controls the URB.
    
    OK then how about the following (essentially documentation) patch?
    
    Signed-off-by: Roman Kagan <rkagan@mail.ru>
    Acked-by: David Brownell <david-b@pacbell.net>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 1724757e5ab5219b46876ac6e4e362a4b2dcfa86
Author: Phil Dibowitz <phil@ipom.com>
Date:   Sat May 21 00:45:55 2005 -0700

    [PATCH] USB Storage: Add unusual_devs for Trumpion Voice Recorder
    
    The original entry of this patch was submitted by Filippo Bardelli
    <filibard@libero.it>, with cleanups and patch-ification by me.
    
    This corrects the subclass that the device reports.
    
    Signed-off-by: Phil Dibowitz <phil@ipom.com>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 77ddecc3c047e4e9bd7332d3173def93ea2de1ad
Author: Paulo Marques <pmarques@grupopie.com>
Date:   Wed May 18 13:12:49 2005 +0100

    [PATCH] USB: make MODALIAS code a bit smaller devices
    
    This patch makes the code to provide modalias in sysfs for usb devices
    56 bytes smaller in i386, while making it clear that the first part of
    the modalias string is the same no matter what the device class is.
    
    Signed-Off-By: Paulo Marques <pmarques@grupopie.com>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 58cfe9113e485f7e04bd0eac4fc4251b330af501
Author: Matthias Urlichs <smurf@smurf.noris.de>
Date:   Mon May 23 17:00:48 2005 -0700

    [PATCH] USB: add Option Card driver
    
    This patch adds a new driver for "Option" cards.  This is a GSM data card,
    controlled by three "serial ports" which are connected via an OHCI adapter,
    all located on an oversized PC-Card.  It's sold by several GSM service
    providers.
    
    Traditionally, this card has been accessed via the standard serial driver
    and appropriate vendor= and product= options.  However, testing has
    revealed several problems with this approach, including hung data transfers
    and lost data blocks when receiving.
    
    Therefore, I've written a separate driver.
    
    Signed-off-by: Matthias Urlichs <smurf@smurf.noris.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 4871d3be13ea2b33edc9ba6fbcc30fc047087be7
Author: Greg Kroah-Hartman <gregkh@suse.de>
Date:   Thu Jun 2 22:18:12 2005 -0700

    [PATCH] USB: add Vernier devices to HID blacklist
    
    They aren't really HID devices.
    
    Damm microsoft HID driver, that thing has caused more companies to have
    to do this kind of hack...
    
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit dc1d1003e8309ef8e5153ce0c00cce76144abbdb
Author: Lonnie Mendez <lmendez19@austin.rr.com>
Date:   Tue May 10 00:17:17 2005 -0500

    [PATCH] USB: hid-core: add Earthmate lt-20 productid to blacklist table
    
    This patch adds the DeLorme Earthmate lt-20 productid to the hid
    blacklist table.  This patch ensures the lt-20 can be claimed by the
    appropriate driver (cypress_m8).
    
    Adds the product id 0x200, of the DeLorme Earthmate lt-20, to the hid
    blacklist table.
    
    Signed-off-by: Lonnie Mendez <lmendez19@austin.rr.com>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 5ce0482e18193a15223911515ee44373cffb35b8
Author: Ping Cheng <pingc@wacom.com>
Date:   Thu May 5 15:12:57 2005 -0700

    [PATCH] USB: add new wacom device to usb hid-core list
    
    - add Intuos3 and Cintiq 21UX
    
    Signed-off-by: Ping Cheng <pingc@wacom.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit d7771a33bf2b23fc6d0b9c133fb0c00670154f10
Author: Adrian Bunk <bunk@stusta.de>
Date:   Thu May 5 18:49:59 2005 +0200

    [PATCH] USB: remove drivers/usb/media/pwc/ChangeLog
    
    This patch removes the outdated ChangeLog file for this driver.
    
    Signed-off-by: Adrian Bunk <bunk@stusta.de>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit f4800078d9ed4bd20b1b27f56e7b68cfa0d73038
Author: Pete Zaitcev <zaitcev@redhat.com>
Date:   Sun May 1 16:05:40 2005 -0700

    [PATCH] USB: Support multiply-LUN devices in ub
    
    Signed-off-by: Pete Zaitcev <zaitcev@redhat.com>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>
    
    diff -urp -X dontdiff linux-2.6.12-rc3/drivers/block/ub.c linux-2.6.12-rc3-lem/drivers/block/ub.c

commit aa447acb9291518506a1aec644db47fa6c6e36eb
Author: Linus Torvalds <torvalds@ppc970.osdl.org>
Date:   Thu Jun 2 17:39:49 2005 -0700

    Automatic merge of rsync://rsync.kernel.org/pub/scm/linux/kernel/git/davem/net-2.6

commit 5ba0eac6e0b7e2889649a1105d97c600595e2bb1
Author: Jiri Benc <jbenc@suse.cz>
Date:   Thu Jun 2 16:48:05 2005 -0700

    [NET]: Fix HH_DATA_OFF.
    
    When the hardware header size is a multiple of HH_DATA_MOD, HH_DATA_OFF()
    incorrectly returns HH_DATA_MOD (instead of 0). This affects ieee80211 layer
    as 802.11 header is 32 bytes long.
    
    Signed-off-by: Jiri Benc <jbenc@suse.cz>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit b597ef4712c05c962640a655386a7f06cc1a1fbc
Author: Christoph Hellwig <hch@lst.de>
Date:   Thu Jun 2 16:36:00 2005 -0700

    [NET]: Fix locking in shaper driver.
    
     o use a semaphore instead of an opencoded and racy lock
     o move locking out of shaper_kick and into the callers - most just
       released the lock before calling shaper_kick
     o remove in_interrupt() tests.  from ->close we can always block, from
       ->hard_start_xmit and timer context never
    
    Signed-off-by: Christoph Hellwig <hch@lst.de>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 317604633eface11cb7452298fa44a34624633dc
Author: Linus Torvalds <torvalds@ppc970.osdl.org>
Date:   Thu Jun 2 16:07:03 2005 -0700

    Merge of 'docs' branch from
    
    	rsync://rsync.kernel.org/pub/scm/linux/kernel/git/jgarzik/libata-dev

commit d7aaf48128ec7fcefcee92ea22833afc1a80e268
Author:  <jgarzik@pretzel.yyz.us>
Date:   Thu Jun 2 18:43:09 2005 -0400

    Automatic merge of /spare/repo/linux-2.6/.git branch HEAD

commit decc6d0b68f27bbb8a0357fccf41936a3c196b03
Author: Jeff Garzik <jgarzik@pobox.com>
Date:   Thu Jun 2 18:42:33 2005 -0400

    libata: kernel-doc warning fixes

commit 0baab86b00cdf9785ac2bb2ce1ab63995b3866ca
Author: Edward Falk <efalk@google.com>
Date:   Thu Jun 2 18:17:13 2005 -0400

    libata: update inline source docs

commit d0d2f2df65ddea9a30ddd117f769bfff65d3fc56
Author: Steve French <sfrench@hera.kernel.org>
Date:   Thu Jun 2 15:12:36 2005 -0700

    [CIFS] Update cifs version number and fix whitespace
    
    Signed-off-by: Steve French (sfrench@us.ibm.com)

commit 0fd56f67890acf7904c83e7de6cb71723eb1c962
Author: Adrian Bunk <bunk@stusta.de>
Date:   Thu Jun 2 14:04:00 2005 -0700

    [PATCH] drivers/net/hamradio/baycom_epp.c: cleanups
    
    The times when tricky goto's produced better codes are long gone.
    
    This patch should express the same in a better way.
    
    (Also fixes the final gcc-4.0 x86 compile error)
    
    Signed-off-by: Adrian Bunk <bunk@stusta.de>
    Cc: Jeff Garzik <jgarzik@pobox.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit c4eb2a93319d61923635c84a5f5e68965b14c754
Author: Anton Blanchard <anton@samba.org>
Date:   Thu Jun 2 14:02:03 2005 -0700

    [PATCH] ppc64: remove decr_overclock
    
    Now that we have HZ=1000 there is much less of a need for decr_overclock.
    Remove it.
    
    Leave spread_lpevents but move it into iSeries_setup.c.  We should look at
    making event spreading the default some day.
    
    Signed-off-by: Anton Blanchard <anton@samba.org>
    Acked-by: Stephen Rothwell <sfr@canb.auug.org.au>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 6dc2f0c7df6cefda5932ac8bcd9ca5ef45de36ee
Author: Anton Blanchard <anton@samba.org>
Date:   Thu Jun 2 14:02:02 2005 -0700

    [PATCH] ppc64: cleanup iseries runlight support
    
    The iseries has a bar graph on the front panel that shows how busy it is.
    The operating system sets and clears a bit in the CTRL register to control
    it.
    
    Instead of going to the complexity of using a thread info bit, just set and
    clear it in the idle loop.
    
    Also create two helper functions, ppc64_runlatch_on and ppc64_runlatch_off.
    
    Finally don't use the short form of the SPR defines.
    
    Signed-off-by: Anton Blanchard <anton@samba.org>
    Acked-by: Stephen Rothwell <sfr@canb.auug.org.au>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 79f1248962cfa1e11a5610e0349bc3515687516d
Author: Anton Blanchard <anton@samba.org>
Date:   Thu Jun 2 14:02:02 2005 -0700

    [PATCH] ppc64: cleanup SPR definitions
    
    There are a bunch of irrelevant SPR definitions in asm/processer.h.  Cut
    them down a bit, also add a DABR_TRANSLATION define which will be used
    shortly.
    
    Signed-off-by: Anton Blanchard <anton@samba.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 7e3b11a9be6ac94bf4af81757b6a10e7e65b846f
Author: Jan Kara <jack@suse.cz>
Date:   Thu Jun 2 14:02:01 2005 -0700

    [PATCH] ext3: fix list scanning in __cleanup_transaction
    
    Fix a bug in list scanning that can cause us to skip the last buffer on the
    checkpoint list (and hence fail to do any progress under some rather
    unfavorable conditions).
    
    The problem is we first do jh=next_jh and then test
    
    	} while (jh!=last_jh);
    
    Hence we skip the last buffer on the list (if it was not the only buffer on
    the list).  As we already do jh=next_jh; in the beginning of the loop we
    are safe to just remove the assignment in the end.  It can happen that 'jh'
    will be freed at the point we test jh != last_jh but that does not matter
    as we never *dereference* the pointer.
    
    Signed-off-by: Jan Kara <jack@suse.cz>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 00ea81459c279f14a7b344320a71c94f60f88929
Author: Jan Kara <jack@suse.cz>
Date:   Thu Jun 2 14:02:00 2005 -0700

    [PATCH] ext3: fix log_do_checkpoint() assertion failure
    
    Fix possible false assertion failure in log_do_checkpoint().  We might fail
    to detect that we actually made a progress when cleaning up the checkpoint
    lists if we don't retry after writing something to disk.  The patch was
    confirmed to fix observed assertion failures for several users.
    
    When we flushed some buffers we need to retry scanning the list.
    Otherwise we can fail to detect our progress.
    
    Signed-off-by: Jan Kara <jack@suse.cz>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 467ca22d3371f132ee225a5591a1ed0cd518cb3d
Author: Steve French <sfrench@hera.kernel.org>
Date:   Thu Jun 2 14:42:23 2005 -0700

    Merge with rsync://rsync.kernel.org/pub/scm/linux/kernel/git/torvalds/linux-2.6.git
    

commit 4fef0304eeaa4156db5625e3578f92ed94645a43
Author: Adrian Bunk <bunk@stusta.de>
Date:   Thu Jun 2 13:06:36 2005 -0700

    [IPV6]: Kill export of fl6_sock_lookup.
    
    There is no usage of this EXPORT_SYMBOL in the kernel.
    
    Signed-off-by: Adrian Bunk <bunk@stusta.de>
    Acked-by: Hideaki YOSHIFUJI <yoshfuji@linux-ipv6.org>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit a2c1aa54746bace5d03cc66521fbf3bb6fb2f916
Author: Jesper Juhl <juhl-lkml@dif.dk>
Date:   Thu Jun 2 13:04:07 2005 -0700

    [ATM]: [drivers] kill pointless NULL checks and casts before kfree()
    
    Signed-off-by: Jesper Juhl <juhl-lkml@dif.dk>
    Signed-off-by: Chas Williams <chas@cmf.nrl.navy.mil>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 3087e1ff8d64da7b6b527e89d0c0864ab36294b8
Author: Jan Beulich <jbeulich@novell.com>
Date:   Thu Jun 2 13:03:15 2005 -0700

    [ATM]: fix ATM makefile for out-of-source-tree builds
    
    Signed-off-by: Jan Beulich <jbeulich@novell.com>
    Signed-off-by: Chas Williams <chas@cmf.nrl.navy.mil>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 64a6c7aa3836e357499d2e822388f30c11f13604
Author: Adrian Bunk <bunk@stusta.de>
Date:   Thu Jun 2 13:02:25 2005 -0700

    [IPVS]: remove net/ipv4/ipvs/ip_vs_proto_icmp.c
    
    ip_vs_proto_icmp.c was never finished.
    
    Signed-off-by: Adrian Bunk <bunk@stusta.de>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 1e86d1c648508fd50e6c9960576b87906a7906ad
Author: Benjamin Herrenschmidt <benh@kernel.crashing.org>
Date:   Thu Jun 2 14:11:37 2005 +1000

    [PATCH] ppc64: Fix result code handling in prom_init
    
    prom_init(), the trampoline code that "talks" to Open Firmware during
    early boot, has various issues with managing OF result codes. Some of my
    recent fixups in fact made the problem worse on some platforms.
    
    This patch reworks it all. Tested on g5, Maple, POWER3 and POWER5.
    
    Signed-off-by: Benjamin Herrenschmidt <benh@kernel.crashing.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit e0d6d71440a3a35c6fc2dde09f8e8d4d7bd44dda
Author: Linus Torvalds <torvalds@ppc970.osdl.org>
Date:   Wed Jun 1 19:17:59 2005 -0700

    Merge of master.kernel.org:/pub/scm/linux/kernel/git/aegl/linux-2.6

commit 16a789c11df5069576ef89f817348dbc6f3bd87e
Author: Linus Torvalds <torvalds@ppc970.osdl.org>
Date:   Wed Jun 1 16:32:03 2005 -0700

    Automatic merge of rsync://rsync.kernel.org/pub/scm/linux/kernel/git/sfrench/cifs-2.6

commit d8caebd285a084ee1e4d484ce597865228614067
Author: Peter Chubb <peterc@gelato.unsw.edu.au>
Date:   Tue May 31 22:37:00 2005 -0700

    [IA64] fix compilation warning in sys32_epoll_wait()
    
    This gets rid of an unused variable `error' in sys_ia32.c:sys32_epoll_wait()
    
    Getting rid of this one makes parsing the output of the kernecomp
    autobuild easier --- searching for `Error' to find a problem kept
    hitting this one, even though it's only a warning.
    
    Signed-off-by: Tony Luck <tony.luck@intel.com>

commit b655913bf364603d17ad770dc4fb80e60555a255
Author: Peter Chubb <peterc@gelato.unsw.edu.au>
Date:   Tue May 31 22:34:00 2005 -0700

    [IA64] Cleanup compile warnings for ski config
    
    The attached patch cleans up a compilation warning when ACPI
    is turned off (i.e., when compiling for the Ski simulator).
    
    Signed-off-by: Tony Luck <tony.luck@intel.com>

commit 12725675e26d52c39e856d341035b94bf7802458
Author: Steve French <sfrench@hera.kernel.org>
Date:   Wed Jun 1 15:02:37 2005 -0700

    Merge with rsync://rsync.kernel.org/pub/scm/linux/kernel/git/torvalds/linux-2.6.git
    

commit 72a95d14f5047d9efb1e82a9f0b9f230f06d6e3d
Author: Linus Torvalds <torvalds@ppc970.osdl.org>
Date:   Wed Jun 1 13:21:58 2005 -0700

    Automatic merge of rsync://rsync.kernel.org/pub/scm/linux/kernel/git/davem/net-2.6

commit f9a22239257561df80ef54fc8f31880e2fb2a27b
Author: Linus Torvalds <torvalds@ppc970.osdl.org>
Date:   Wed Jun 1 13:20:35 2005 -0700

    Automatic merge of rsync://rsync.kernel.org/pub/scm/linux/kernel/git/davem/sparc-2.6

commit eff910a91ac04ab1d9e210d4f721484af3b39c8d
Author: Linus Torvalds <torvalds@ppc970.osdl.org>
Date:   Wed Jun 1 07:56:33 2005 -0700

    Automatic merge of rsync://rsync.kernel.org/pub/scm/linux/kernel/git/gregkh/usb-2.6

commit a340ba1071ccec7da5d5c689471ff8bc07fe022d
Author: Linus Torvalds <torvalds@ppc970.osdl.org>
Date:   Wed Jun 1 07:56:10 2005 -0700

    Automatic merge of rsync://rsync.kernel.org/pub/scm/linux/kernel/git/gregkh/i2c-2.6

commit c10fccddf00cb216349ce3171ce2e39d7c70371b
Author: Linus Torvalds <torvalds@ppc970.osdl.org>
Date:   Wed Jun 1 07:55:46 2005 -0700

    Automatic merge of rsync://rsync.kernel.org/pub/scm/linux/kernel/git/gregkh/pci-2.6

commit 5f64f73957f6cae3222f97f2599199ee562f7f3f
Author: Benjamin Herrenschmidt <benh@kernel.crashing.org>
Date:   Wed Jun 1 17:07:27 2005 +1000

    [PATCH] ppc32/ppc64: cleanup /proc/device-tree
    
    This cleans up the /proc/device-tree representation of the Open Firmware
    device-tree on ppc and ppc64.  It does the following things:
    
     - Workaround an issue in some Apple device-trees where a property may
       exist with the same name as a child node of the parent.  We now
       simply "drop" the property instead of creating duplicate entries in
       /proc with random result...
    
     - Do not try to chop off the "@0" at the end of a node name whose unit
       address is 0.  This is not useful, inconsistent, and the code was
       buggy and didn't always work anyway.
    
     - Do not create symlinks for the short name and unit address parts of a
       node.  These were never really used, bloated the memory footprint of
       the device-tree with useless struct proc_dir_entry and their matching
       dentry and inode cache bloat.
    
    This results in smaller code, smaller memory footprint, and a more
    accurate view of the tree presented to userland.
    
    Signed-off-by: Benjamin Herrenschmidt <benh@kernel.crashing.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit f93ea2349832c040bdf66dc7495aa87bfe3394b8
Author: Benjamin Herrenschmidt <benh@kernel.crashing.org>
Date:   Wed Jun 1 17:02:22 2005 +1000

    [PATCH] ppc32: Apple device-tree bug fix
    
    This is the ppc32 patch equivalent to the just posted ppc64 one working
    around a bug in Apple device-trees regarding the "cpus" nodes.
    
    Signed-off-by: Benjamin Herrenschmidt <benh@kernel.crashing.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 44e4665cc9d856d15f04a012c78e4ab48f71290b
Author: Benjamin Herrenschmidt <benh@kernel.crashing.org>
Date:   Wed Jun 1 14:54:25 2005 +1000

    [PATCH] ppc64: Fix a device-tree bug on Apple's
    
    Apple's Open Firmware has a funny bug when creating the /cpus nodes
    where it leaves a dangling '\0' character in the CPU name which ends up
    appearing in the full path of the node. This is bogus and
    confuses /proc/device-tree badly.
    
    This patch strips those bogus zero's from the node full path when
    reading the device-tree from Open Firmware. The "name" property is not
    modified and still contains the spurrious 0 (it basically contains 0
    tailing 0 instead of one) but that shouldn't be a problem.
    
    An equivalent patch for ppc32 will follow shortly
    
    Signed-off-by: Benjamin Herrenschmidt <benh@kernel.crashing.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 88314ee73fd75eb32abdcb3119cd303c116d4500
Author: David S. Miller <davem@davemloft.net>
Date:   Tue May 31 19:13:52 2005 -0700

    [SPARC64]: Refine PCI strbuf ctx-based flush.
    
    The initial peek read PIO of the match register is just a waste.
    Just do the flush writes first, as that is more efficient.
    
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 21e3024cbddb712f6a078bf4132d7682d3c4e35e
Author: Venkatesh Pallipadi <venkatesh.pallipadi@intel.com>
Date:   Wed May 25 14:43:56 2005 -0700

    [PATCH] cpufreq-stats driver documentation
    
    Documentation for cpufreq stats.
    
    Signed-off-by: Venkatesh Pallipadi <venkatesh.pallipadi@intel.com>
    Signed-off-by: Dave Jones <davej@redhat.com>
    

commit 58f1df25403988b73d7129fcd2c4d4c24017f1af
Author: Venkatesh Pallipadi <venkatesh.pallipadi@intel.com>
Date:   Wed May 25 14:46:50 2005 -0700

    [PATCH] cpufreq-stats driver updates
    
    Changes to the cpufreq stats driver:
    * Changes the way P-state transition table looks in /sysfs providing more
      clear output
    * Changes the time unit in the output from HZ to clock_t
    
    Signed-off-by: Venkatesh Pallipadi <venkatesh.pallipadi@intel.com>
    Signed-off-by: Dave Jones <davej@redhat.com>
    

commit f94ea640a28230f82a4395c34e1290748a9f6586
Author: Dave Jones <davej@redhat.com>
Date:   Tue May 31 19:03:52 2005 -0700

    [CPUFREQ] Typos.
    
    cpfureq developers cant spel.
    
    Signed-off-by: Dave Jones <davej@redhat.com>
    

commit 6778bae0f2f1d4af1b8bb876c992ea094ee958b4
Author: Dave Jones <davej@redhat.com>
Date:   Tue May 31 19:03:51 2005 -0700

    [CPUFREQ] longhaul - adjust transition latency.
    
    From patch by: Ken Staton <ken_staton@agilent.com>
    Signed-off-by: Dave Jones <davej@redhat.com>
    

commit 1174631418fbb2c0c6946081b0b7d391f5d92861
Author: Dave Jones <davej@redhat.com>
Date:   Tue May 31 19:03:51 2005 -0700

    [CPUFREQ] Longhaul: Magic timer frobbing.
    
    As mandated by the spec, disable timer around transitions.
    
    From code by : Ken Staton <ken_staton@agilent.com
    Signed-off-by: Dave Jones <davej@redhat.com>
    

commit 3be6a48f3c8df1b2fbbe57face95a03d167bda1b
Author: Dave Jones <davej@redhat.com>
Date:   Tue May 31 19:03:51 2005 -0700

    [CPUFREQ] longhaul - disable PCI mastering around transition.
    
    The spec states that we have to do this, which is *horrid*.
    
    Based on code from: Ken Staton <ken_staton@agilent.com>
    Signed-off-by: Dave Jones <davej@redhat.com>
    

commit e131832ca7d3a3e5f9c7624bb310a7747dc2b57c
Author: Dave Jones <davej@redhat.com>
Date:   Tue May 31 19:03:50 2005 -0700

    [CPUFREQ] ondemand governor default sampling downfactor as 1
    
    [PATCH] [5/5] ondemand governor default sampling downfactor as 1
    
    Make default sampling downfactor 1.
    This works better with earlier auto downscaling change in ondemand governor.
    
    Signed-off-by: Venkatesh Pallipadi <venkatesh.pallipadi@intel.com>
    Signed-off-by: Dave Jones <davej@redhat.com>
    

commit c29f1403098135bdef75b190a5037db514701031
Author: Dave Jones <davej@redhat.com>
Date:   Tue May 31 19:03:50 2005 -0700

    [CPUFREQ] ondemand governor automatic downscaling
    
    [PATCH] [4/5] ondemand governor automatic downscaling
    
    Here is a change of policy for the ondemand governor. The modification
    concerns the frequency downscaling. Instead of decreasing to a lower
    frequency when the CPU usage is under 20%, this new policy automatically
    scales to the optimal frequency. The optimal frequency being the lowest
    frequency which provides enough power to not trigger the upscaling policy.
    
    Signed-off-by: Eric Piel <eric.piel@tremplin-utc.net>
    Signed-off-by: Venkatesh Pallipadi <venkatesh.pallipadi@intel.com>
    Signed-off-by: Dave Jones <davej@redhat.com>
    

commit 9c7d269b9b05440dd0fe92d96f4e5d7e73dd7238
Author: Dave Jones <davej@redhat.com>
Date:   Tue May 31 19:03:49 2005 -0700

    [CPUFREQ] ondemand,conservative governor idle_tick clean-up
    
    [PATCH] [3/5] ondemand,conservative governor idle_tick clean-up
    
    Ondemand and conservative governor clean-up, it factorises the idle ticks 
    measurement.
    
    Signed-off-by: Eric Piel <eric.piel@tremplin-utc.net>
    Signed-off-by: Venkatesh Pallipadi <venkatesh.pallipadi@intel.com>
    Signed-off-by: Dave Jones <davej@redhat.com>
    

commit 790d76fa979f55bfc49a6901bb911778949b582d
Author: Dave Jones <davej@redhat.com>
Date:   Tue May 31 19:03:49 2005 -0700

    [CPUFREQ] ondemand,conservative governor store the idle ticks for all cpus
    
    [PATCH] [2/5] ondemand,conservative governor store the idle ticks for all cpus
    
    Ondemand, conservative governor did not store prev_cpu_idle_up into 
    prev_cpu_idle_down for other CPUs than the current CPU.
    
    Signed-off-by: Eric Piel <eric.piel@tremplin-utc.net>
    Signed-off-by: Venkatesh Pallipadi <venkatesh.pallipadi@intel.com>
    Signed-off-by: Dave Jones <davej@redhat.com>
    

commit dac1c1a56279b4545a822ec7bc770003c233e546
Author: Dave Jones <davej@redhat.com>
Date:   Tue May 31 19:03:49 2005 -0700

    [CPUFREQ] ondemand,conservative minor bug-fix and cleanup
    
    [PATCH] [1/5] ondemand,conservative minor bug-fix and cleanup
    
    Attached patch fixes some minor issues with Alexander's patch and related
    cleanup in both ondemand and conservative governor.
    
    Signed-off-by: Venkatesh Pallipadi <venkatesh.pallipadi@intel.com>
    Signed-off-by: Dave Jones <davej@redhat.com>
    

commit 1206aaac285904e3e3995eecbf4129b6555a8973
Author: Dave Jones <davej@redhat.com>
Date:   Tue May 31 19:03:48 2005 -0700

    [CPUFREQ] Allow ondemand stepping to be changed by user.
    
    Adds support so that the cpufreq change stepping is no longer fixed at 5% and
    can be changed dynamically by the user
    
    Signed-off-by: Alexander Clouter <alex-kernel@digriz.org.uk>
    Signed-off-by: Dave Jones <davej@redhat.com>
    

commit c11420a616039e2181e4ecbffb4d125d39e6877d
Author: Dave Jones <davej@redhat.com>
Date:   Tue May 31 19:03:48 2005 -0700

    [CPUFREQ] Prevents un-necessary cpufreq changes if we are already at min/max
    
    Signed-off-by: Alexander Clouter <alex-kernel@digriz.org.uk>
    Signed-off-by: Dave Jones <davej@redhat.com>
    

commit 3d5ee9e55d13de28d2fa58d6e13f2e4d3a5f8b1a
Author: Dave Jones <davej@redhat.com>
Date:   Tue May 31 19:03:47 2005 -0700

    [CPUFREQ] Add support to cpufreq_ondemand to ignore 'nice' cpu time
    
    Signed-off-by: Alexander Clouter <alex-kernel@digriz.org.uk>
    Signed-off-by: Dave Jones <davej@redhat.com>
    

commit b9170836d1aa4ded7cc1ac1cb8fbc7867061c98c
Author: Dave Jones <davej@redhat.com>
Date:   Tue May 31 19:03:47 2005 -0700

    [CPUFREQ] Conservative cpufreq governer
    
    A new cpufreq module, based on the ondemand one with my additional patches
    just posted.  This one is more suitable for battery environments where its
    probably more appealing to have the cpu freq gracefully increase and decrease
    rather than flip between the min and max freq's.
    
    N.B. Bruno Ducrot pointed out that the amd64's "do have unacceptable latency
    between min and max freq transition, due to the step-by-step requirements
    (200MHz IIRC)"; so AMD64 users would probably benefit from this too.
    
    Signed-off-by: Alexander Clouter <alex-kernel@digriz.org.uk>
    Signed-off-by: Dave Jones <davej@redhat.com>
    

commit b53cc6ead046093477ec7a3354d620337101ea5b
Author: Dave Jones <davej@redhat.com>
Date:   Tue May 31 19:03:47 2005 -0700

    [CPUFREQ] fix up comment in cpufreq.h
    
    Fix up comment in cpufreq.h stating transition latency should be passed
    in microseconds -- it was decided long ago to switch to nanoseconds.
    
    Signed-off-by: Dominik Brodowski <linux@dominikbrodowski.net>
    Signed-off-by: Dave Jones <davej@redhat.com>
    

commit 065b807ca1f5bdbeb081e3cf75ac8de9be8ac212
Author: Dave Jones <davej@redhat.com>
Date:   Tue May 31 19:03:46 2005 -0700

    [CPUFREQ] dual-core powernow-k8
    
    With the release of the dual-core AMD Opterons last week,
    it's high time that cpufreq supported them.  The attached
    patch applies cleanly to 2.6.12-rc3 and updates powernow-k8
    to support the latest Athlon 64 and Opteron processors.
    
    Update the driver to version 1.40.0 and provide support
    for dual-core processors.
    
    Signed-off-by: Mark Langsdorf <mark.langsdorf@amd.com>
    Signed-off-by: Dave Jones <davej@redhat.com>

commit 7f335d4ef2d50a693fad70b8fa053d0382f4a45c
Author: Dave Jones <davej@redhat.com>
Date:   Tue May 31 19:03:46 2005 -0700

    [CPUFREQ] make cpufreq_gov_dbs static
    
    This patch makes a needlessly global and EXPORT_SYMBOL'ed struct static.
    
    Signed-off-by: Adrian Bunk <bunk@stusta.de>
    Signed-off-by: Dave Jones <davej@redhat.com>
    

commit c5d28fb297efaa97c4b90e36f9dff3066e7f2778
Author: Dave Jones <davej@redhat.com>
Date:   Tue May 31 19:03:46 2005 -0700

    [CPUFREQ] Recalibrate cpu_khz [2/2]
    
    Some cpufreq drivers (at that time, only powernow-k7) need to recalibrate the
    cpu_khz at runtime.
    
    Signed-off-by: Bruno Ducrot <ducrot@poupinou.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Dave Jones <davej@redhat.com>
    

commit 91350ed49bf3613e243c2e216228cd4ae8f32516
Author: Dave Jones <davej@redhat.com>
Date:   Tue May 31 19:03:45 2005 -0700

    [CPUFREQ] Recalibrate cpu_khz [1/2]
    
    We have to recalibrate cpu_khz in order to use the current FID instead the max
    FID since some BIOS do not put the processor at maximum frequency at POST. 
    Also, some BIOS will change the processor frequency at our back after cpu_khz
    was calibrate.  Finally, this will fix a long standing bug when we do
    something like this:
    
    # rmmod powernow-k7
    # modprobe powernow-k7
    
    Signed-off-by: Bruno Ducrot <ducrot@poupinou.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Dave Jones <davej@redhat.com>
    

commit bf6fc9fd2d848d06b8f6c4caccef1dba9ef8c4c6
Author: Dave Jones <davej@redhat.com>
Date:   Tue May 31 19:03:45 2005 -0700

    [CPUFREQ] AMD Elan SC520 cpufreq driver.
    
    From: Sean Young <sean@mess.org>
    Signed-off-by: Dave Jones <davej@redhat.com>
    

commit 3310010818aa12145905faf97ffe3742acc842e2
Author: Dave Jones <davej@redhat.com>
Date:   Tue May 31 19:03:44 2005 -0700

    [CPUFREQ] Add warning comment about default governors.
    
    This comes up time and time again. Until its fixed, place this
    comment in the Kconfig which should stem the flow of resubmissions.
    
    Signed-off-by: Rob Weryk <rjweryk@uwo.ca>
    Signed-off-by: Dave Jones <davej@redhat.com>
    

commit 6f4095af6df7aa365ecf18473c8b05c5f6c38a78
Author: Dave Jones <davej@redhat.com>
Date:   Tue May 31 19:03:44 2005 -0700

    [CPUFREQ] speedstep-smi: it works on at least one P4M
    
    The speedstep-smi driver actually works on >=1 notebook with a
    Pentium 4-M CPU where all other cpufreq drivers fail. Therefore,
    allow speedstep-smi on P4Ms again, but warn users of likely failure
    
    Signed-off-by: Dominik Brodowski <linux@dominikbrodowski.net>
    Signed-off-by: Dave Jones <davej@redhat.com>
    

commit 6fe711658fcf92d39d84c0b7e6332ed6625dc520
Author: Dave Jones <davej@redhat.com>
Date:   Tue May 31 19:03:44 2005 -0700

    [CPUFREQ] ondemand: trivial clean-ups
    
    Trivial ondemand governor clean-ups:
    - change from sampling_rate_in_HZ() to the official function
    usecs_to_jiffies().
    - use for_each_online_cpu() to instead of using "if (cpu_online(i))"
    
    Signed-off-by: Eric Piel <eric.piel@tremplin-utc.net>
    Signed-off-by: Venkatesh Pallipadi <venkatesh.pallipadi@intel.com>
    Signed-off-by: Dominik Brodowski <linux@dominikbrodowski.net>
    Signed-off-by: Dave Jones <davej@redhat.com>
    

commit 8282864a96ef0a7b88ee9e4b357e08504131394d
Author: Dave Jones <davej@redhat.com>
Date:   Tue May 31 19:03:43 2005 -0700

    [CPUFREQ] speedstep-centrino: Pentium 4 - M (HT) support
    
    The Pentium 4 - Ms (HT) with CPUID 0xF34 and 0xF41 seem to support
    centrino-like enhanced speedstep; however, no "table" support is possible.
    Therefore, put NULL entries into speedstep-centrino.c
    
    Signed-off-by: Dominik Brodowski <linux@dominikbrodowski.net>
    Signed-off-by: Dave Jones <davej@redhat.com>
    

commit 78ee998fd46ed4cc647ee442d2a5492f389ee27a
Author: Dave Jones <davej@redhat.com>
Date:   Tue May 31 19:03:43 2005 -0700

    [CPUFREQ] cpufreq-core: reduce warning messages.
    
    cpufreq core is printing out messages at KERN_WARNING level that the core
    recovers from without intervention, and that the system administrator can
    do nothing about.  Patch below reduces the severity of these messages to
    debug.
    
    Signed-off-by: Matt Domsch <Matt_Domsch@dell.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Dave Jones <davej@redhat.com>
    

commit 7eb53d88230e23f83b2e20a78955e1412fa7bb26
Author: Dave Jones <davej@redhat.com>
Date:   Tue May 31 19:03:42 2005 -0700

    [CPUFREQ] powernow-k7: don't print khz element of FSB.
    
    Signed-off-by: Dave Jones <davej@redhat.com>
    

commit 92bab26be5544d8b495389646490fcfdca6dbcf2
Author: Jeff Garzik <jgarzik@pobox.com>
Date:   Tue May 31 20:43:57 2005 -0400

    libata: more docs updates

commit 36839836e8132731e0cadddce452423036a1d5b3
Author: Edgar E Iglesias <edgar@axis.com>
Date:   Tue May 31 17:08:05 2005 -0700

    [IPSEC]: Fix esp_decap_data size verification in esp4.
    
    Signed-off-by: Edgar E Iglesias <edgar@axis.com>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 7c963ad1d113790a8c723a178988b675868f3abe
Author: David S. Miller <davem@davemloft.net>
Date:   Tue May 31 16:57:59 2005 -0700

    [SPARC64]: Fix streaming buffer flushing on PCI and SBUS.
    
    Firstly, if the direction is TODEVICE, then dirty data in the
    streaming cache is impossible so we can elide the flush-flag
    synchronization in that case.
    
    Next, the context allocator is broken.  It is highly likely
    that contexts get used multiple times for different dma
    mappings, which confuses the strbuf flushing code and makes
    it run inefficiently.
    
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 08e9cd1fc559c00bc05df3fc551efe3b87c57ee3
Author: Thomas Graf <tgraf@suug.ch>
Date:   Tue May 31 15:17:28 2005 -0700

    [PKT_SCHED]: Disable dsmark debugging messages by default
    
    Signed-off-by: Thomas Graf <tgraf@suug.ch>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 486b53e59ca8cd07d91ad88375c1c884b15cc9bd
Author: Thomas Graf <tgraf@suug.ch>
Date:   Tue May 31 15:16:52 2005 -0700

    [PKT_SCHED]: make dsmark try using pfifo instead of noop while grafting
    
    Signed-off-by: Thomas Graf <tgraf@suug.ch>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 0451eb074eef30240c6c06dacf2911bee26831e1
Author: Thomas Graf <tgraf@suug.ch>
Date:   Tue May 31 15:15:58 2005 -0700

    [PKT_SCHED]: Fix dsmark to count ignored indices while walking
    
    Unused indices which are ignored while walking must still
    be counted to avoid dumping the same index twice.
    
    Signed-off-by: Thomas Graf <tgraf@suug.ch>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit e74d633dc5f56bf059f870370b2f36b021298652
Author: Goffredo Baroncelli <kreijack@inwind.it>
Date:   Tue May 31 14:39:31 2005 -0700

    [PATCH] UDF filesystem: array '__mon_yday' declared as not static
    
    in fs/udf/udftime.c the global array '__mon_yday' is not static, and it
    conflicts with the glibc one when the kernel is compiled as user mode.
    
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 97d3a00f77fa527886d53dd943017654ce142186
Author: Peter Chubb <peterc@gelato.unsw.edu.au>
Date:   Tue May 31 14:39:30 2005 -0700

    [PATCH] pcdp.c build fix
    
    In file included from drivers/firmware/pcdp.c:18:
    drivers/firmware/pcdp.h:48: error: field `addr' has incomplete type
    drivers/firmware/pcdp.c: In function `setup_serial_console':
    drivers/firmware/pcdp.c:27: error:  `ACPI_ADR_SPACE_SYSTEM_MEMORY' undeclared (first use in this  function)
    
    Cc: <tony.luck@intel.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit ae92ef8a442421356950a0a8dfdc35e8e783000e
Author: Roman Zippel <zippel@linux-m68k.org>
Date:   Tue May 31 14:39:29 2005 -0700

    [PATCH] flush icache in correct context
    
    flush_icache_range() is used in two different situation - in binfmt_elf.c &
    co for user space mappings and module.c for kernel modules.  On m68k
    flush_icache_range() doesn't know which data to flush, as it has separate
    address spaces and the pointer argument can be valid in either address
    space.
    
    First I considered splitting flush_icache_range(), but this patch is
    simpler.  Setting the correct context gives flush_icache_range() enough
    information to flush the correct data.
    
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit f50734569c25c4e902bd3d0fb2e5bd93a200cc75
Author: Anton Blanchard <anton@samba.org>
Date:   Tue May 31 14:39:29 2005 -0700

    [PATCH] ppc64: allow timer based profiling on iseries
    
    We used to have an iseries specific profiler that used /proc/profile.  Now
    thats gone we can use the generic timer based stuff.
    
    Signed-off-by: Anton Blanchard <anton@samba.org>
    Acked-by: Stephen Rothwell <sfr@canb.auug.org.au>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 2e214953295dd33fc62d43ac7ec91997afad75bb
Author: Nick Piggin <nickpiggin@yahoo.com.au>
Date:   Tue May 31 14:39:28 2005 -0700

    [PATCH] h8300 sleep problem
    
    h8300 appears to sleep (halt) when need_resched IS set.
    
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit adaa765d76f58b47e10a4760f2c0bc86de5479b9
Author: Alexander Nyberg <alexn@telia.com>
Date:   Tue May 31 14:39:27 2005 -0700

    [PATCH] acpi build fix: x86 setup.c
    
    This is a neverending story
    
    linux/acpi.h contains empty declarations for acpi_boot_init() &
    acpi_boot_table_init() but they are nested inside #ifdef CONFIG_ACPI.
    
    So we'll have to #ifdef in arch/i386/kernel/setup.c: setup_arch()
    
    Signed-off-by: Alexander Nyberg <alexn@telia.com>
    Cc: "Brown, Len" <len.brown@intel.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 9c2be6a0fa186e2cb0cf14f41f20b08a5809a026
Author: Andi Kleen <ak@suse.de>
Date:   Tue May 31 14:39:26 2005 -0700

    [PATCH] x86_64 CONFIG_ACPI=n build fix
    
    Make CONFIG_X86_PM_TIMER dependent on CONFIG_ACPI
    
    Signed-off-by: Andi Kleen <ak@suse.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 8d91640606c47551771a9b27664f249f4b176613
Author: Andi Kleen <ak@suse.de>
Date:   Tue May 31 14:39:26 2005 -0700

    [PATCH] x86_64: More fixes for compilation without CONFIG_ACPI
    
    Suggested by Alexander Nyberg
    
    Signed-off-by: Andi Kleen <ak@suse.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit af6f5e3247a68074e384ef93c0b4bce1b73c9d80
Author: Steve French <sfrench@hera.kernel.org>
Date:   Tue May 31 14:32:44 2005 -0700

    Merge with rsync://rsync.kernel.org/pub/scm/linux/kernel/git/torvalds/linux-2.6.git
    

commit bcc488ab02254a6e60d749187a632dc3d642d4f8
Author: Scott Murray <scottm@somanetworks.com>
Date:   Fri May 27 16:48:52 2005 -0400

    [PATCH] PCI Hotplug: more CPCI updates
    
    Here is my third attempt at a patch to further update the CompactPCI
    hotplug driver infrastructure to address the pci_enable_device issue
    discussed on the list as well as a few other issues I discovered during
    some more testing.  This version addresses a few more issues pointed out
    by Prarit Bhargava.  Changes include:
    - cpci_enable_device and its recursive calling of pci_enable_device on
      new devices removed.
    - Use list_rwsem to avoid slot status change races between disable_slot
      and check_slots.
    - Fixed oopsing in cpci_hp_unregister_bus caused by calling list_del on
      a slot after calling pci_hp_deregister.
    - Removed kfree calls in cleanup_slots since release_slot will have
      done it already.
    - Reworked init_slots a bit to fix latch and adapter file updating on
      subsequent calls to cpci_hp_start.
    - Improved sanity checking in cpci_hp_register_controller.
    - Now shut things down correctly in cpci_hotplug_exit.
    - Switch to pci_get_slot instead of deprecated pci_find_slot.
    - A bunch of CodingStyle fixes.
    
    Signed-off-by: Scott Murray <scottm@somanetworks.com>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit af00f9811e0ccbd3db84ddc4cffb0da942653393
Author: Andy Currid <acurrid@nvidia.com>
Date:   Mon May 23 08:55:45 2005 -0700

    [PATCH] PCI: amd74xx patch for new NVIDIA device IDs
    
    Here's the 2.6 amd74xx patch for NVIDIA MCP51.
    
    Signed-off-by: Andy Currid <acurrid@nvidia.com>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 2ac2610b26c9da72820443328ff2c56c7b8c87b8
Author: Kenji Kaneshige <kaneshige.kenji@jp.fujitsu.com>
Date:   Fri May 27 16:08:14 2005 +0900

    [PATCH] PCI Hotplug: SHPCHP driver doesn't enable PERR and SERR properly
    
    Current shpchp driver doesn't seem to program command register to
    enable PERR and SERR properly. The following patch fixes this issue.
    
    Signed-off-by: Kenji Kaneshige <kaneshige.kenji@jp.fujitsu.com>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 7a8cb869f31de525bc34095f51f8c8a43ffcb6a9
Author: Kenji Kaneshige <kaneshige.kenji@jp.fujitsu.com>
Date:   Mon May 23 19:50:32 2005 +0900

    [PATCH] PCI Hotplug: shpchp driver doesn't program _HPP values properly
    
    Current shpchp driver doesn't seem to program _HPP values
    properly. The following patch fixes this issue.
    
    Signed-off-by: Kenji Kaneshige <kaneshige.kenji@jp.fujitsu.com>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 06299db3e7f857a4985cf70dc1a5049ec12482c1
Author: Greg Kroah-Hartman <gregkh@suse.de>
Date:   Thu May 26 05:55:55 2005 -0700

    [PATCH] USB: fix usb-serial generic initialization
    
    At module load time, if a generic device is found, the tty information
    for the device is not set up properly (as the tty structures aren't initialized
    yet.)  This can cause big problems for things like udev.  This patch fixes this.
    
    Thanks to Kay Sievers for the original patch for this problem.
    
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 47900743a56dc41a053107d64054aca3e1b42157
Author: Ian Abbott <abbotti@mev.co.uk>
Date:   Tue May 17 15:12:13 2005 +0100

    [PATCH] USB: ftdi_sio: new PID for ELV UM100
    
    ftdi_sio: Add PID for "ELV USB Module UM100".
    PID sent by Armin Laugher.
    
    Signed-off-by: Ian Abbott <abbotti@mev.co.uk>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit c6de2b64eb575a3f9326969ec5fcdc6032b38e42
Author: David Brownell <david-b@pacbell.net>
Date:   Thu May 26 05:55:55 2005 -0700

    [PATCH] USB: add sl811_cs support
    
    This adds support for a CF-card USB Host adapter, the Ratoc REX-CFU1U, by
    wrapping a PCMCIA driver around the existing "sl811-hcd" platform driver.
    
    This CF card is especially useful for PDAs, which currently tend to have
    no other solution for USB host capability.
    
    From: Botond Botyanszki <boti@rocketmail.com>
    Signed-off-by: David Brownell <dbrownell@users.sourceforge.net>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 1e9a47b62f7daf5a94fdd74a94dd4e076f44909a
Author: David Brownell <david-b@pacbell.net>
Date:   Thu May 26 05:55:55 2005 -0700

    [PATCH] USB: sl811-hcd fixes
    
    Various fixes to the sl811-hcd driver:
    
      * Fix small glitches that crept in during recent evolution of usbcore's hcd
        glue layer, coupling endpoint state records to usbcore and active urbs.
        (As noted by folk whose boards weren't stuck on 2.6.9 kernels...)
    
      * Cope with various system-specific issues:
          - Some configurations (e.g. a CF-card uses this chip) have iospace
            addresses for the two registers, rather than memory mapped ones.
          - Some configurations do interesting things with IRQs; maybe the
            line is shared, or it doesn't support level triggering.
          - Not all boards can drive the chip reset line in software.
    
      * Address a potential race during unlinking.
    
      * Tweak probe/remove section info to handle the case where this segment
        of a platform bus is hotpluggable (e.g. CF card).  (The basic problem
        is that CONFIG_HOTPLUG is global, which is wrong since not all busses
        can hotplug even on hotplug-friendly systems...)  Also export the
        driver, so that the CF driver can depend on it.
    
    Also removed some annoying end-of-line whitespace.
    
    Signed-off-by: David Brownell <dbrownell@users.sourceforge.net>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 4a4e5787e0b721021fe0a456ddc987a04cebfc8d
Author: R.Marek@sh.cvut.cz <R.Marek@sh.cvut.cz>
Date:   Thu Apr 21 09:07:56 2005 +0000

    [PATCH] I2C: ALI1563 SMBus driver fix
    
    This patch fixes "grave" bugs in i2c-ali1563 driver. It seems on recent
    chipset revisions the HSTS_DONE is set only for block transfers, so we
    must detect the end of ordinary transaction other way. Also due to missing
    and mask, setting other transfer modes was not possible. Moreover the
    continous byte mode transfer uses DAT0 for command rather than CMD command.
    All those changes were tested with help of Chunhao Huang from Winbond.
    
    I'm willing to maintain the driver. Second patch adds me as maintainer
    if this is neccessary.
    
    Signed-Off-By: Rudolf Marek <r.marek@sh.cvut.cz>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 2e3e80c2b75e3815a0160cbd23d4fdb767d66b35
Author: Linus Torvalds <torvalds@ppc970.osdl.org>
Date:   Tue May 31 11:07:54 2005 -0700

    Automatic merge of rsync://rsync.kernel.org/pub/scm/linux/kernel/git/aegl/linux-2.6

commit fffcc150a21853651ea890a605832c5cccbb6279
Author: Tony Luck <tony.luck@intel.com>
Date:   Tue May 31 10:38:32 2005 -0700

    [IA64] Use "PER_CPU" form of EXPORT macro
    
    I was gently reminded that there are per-cpu forms of the EXPORT_SYMBOL macros.
    
    Signed-off-by: Tony Luck <tony.luck@intel.com>

commit 4e7c6816d680d1945916db047a47847afe4b9b02
Author: Jens Axboe <axboe@suse.de>
Date:   Tue May 31 17:47:36 2005 +0200

    [PATCH] Relax idecd dma alignment check
    
    Only the address needs alignment of mask bits, length should work with
    a relaxed alignment check.
    
    Signed-off-by: Jens Axboe <axboe@suse.de>
    
    [ This is take 2: make the length check be for 16-byte alignment, not
      just word alignment.  That should hopefully keep everybody happy,
      while still allowing CD writing with DMA ]
    
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 05fda3b1d88ebac1fc866fc3ed5b7ef5a4672fa6
Author: Paul Mackerras <paulus@samba.org>
Date:   Tue May 31 17:01:11 2005 +1000

    [PATCH] ppc64: actually call prom_send_capabilities
    
    When I sent in the patch adding the code for the kernel to tell the
    firmware about its capabilities on pSeries machines, I included the
    function to give the capabilities to firmware but somehow forgot the
    hunk that adds the call to the new function.  This patch adds the
    call.
    
    Signed-off-by: Paul Mackerras <paulus@samba.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 0cba632b737fc2de76934137b8dccf92d9fa4d19
Author: Jeff Garzik <jgarzik@pobox.com>
Date:   Mon May 30 19:49:12 2005 -0400

    libata: doc updates

commit 208d89843b7b03978d8e748b8b991c1be81c4f43
Author: Herbert Xu <herbert@gondor.apana.org.au>
Date:   Mon May 30 15:50:15 2005 -0700

    [IPV4]: Fix BUG() in 2.6.x, udp_poll(), fragments + CONFIG_HIGHMEM
    
    Steven Hand <Steven.Hand@cl.cam.ac.uk> wrote:
    > 
    > Reconstructed forward trace: 
    > 
    >   net/ipv4/udp.c:1334   spin_lock_irq() 
    >   net/ipv4/udp.c:1336   udp_checksum_complete() 
    > net/core/skbuff.c:1069   skb_shinfo(skb)->nr_frags > 1
    > net/core/skbuff.c:1086   kunmap_skb_frag()
    > net/core/skbuff.h:1087   local_bh_enable()
    > kernel/softirq.c:0140   WARN_ON(irqs_disabled());
    
    The receive queue lock is never taken in IRQs (and should never be) so
    we can simply substitute bh for irq.
    
    Signed-off-by: Herbert Xu <herbert@gondor.apana.org.au>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 9bb7bc942d3da606f184ac6a4dfc7e4d470c831b
Author: Harald Welte <laforge@netfilter.org>
Date:   Mon May 30 15:35:26 2005 -0700

    [NETFILTER]: Fix deadlock with ip_queue and tcp local input path.
    
    When we have ip_queue being used from LOCAL_IN, then we end up with a
    situation where the verdicts coming back from userspace traverse the TCP
    input path from syscall context.  While this seems to work most of the
    time, there's an ugly deadlock:
    
    syscall context is interrupted by the timer interrupt.  When the timer
    interrupt leaves, the timer softirq get's scheduled and calls
    tcp_delack_timer() and alike.  They themselves do bh_lock_sock(sk),
    which is already held from somewhere else -> boom.
    
    I've now tested the suggested solution by Patrick McHardy and Herbert Xu to
    simply use local_bh_{en,dis}able().
    
    Signed-off-by: Harald Welte <laforge@netfilter.org>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 780a87f71841932db8dbb0f1eb9daf3a973a6bd6
Author: Jeff Garzik <jgarzik@pobox.com>
Date:   Mon May 30 15:41:05 2005 -0400

    libata: more doc updates
    
    Document recently-added ata_port_operations hooks.
    
    Fill several doc stubs in libata-core.c.

commit 07dd39b9f62e0532c6922459c3a26d54a07bc231
Author: Jeff Garzik <jgarzik@pobox.com>
Date:   Mon May 30 13:15:52 2005 -0400

    libata: minor DocBook update

commit 5e485b7975472ba4a408523deb6541e70c451842
Author: Linus Torvalds <torvalds@ppc970.osdl.org>
Date:   Sun May 29 22:39:38 2005 -0700

    Merge of rsync://rsync.kernel.org/pub/scm/linux/kernel/git/davem/tg3-2.6

commit acf0f100e95516e2ba5a3353c3b86dbcd159e3d1
Author: David S. Miller <davem@sunset.davemloft.net>
Date:   Sun May 29 21:25:01 2005 -0700

    Merge of /home/davem/src/GIT/tg3-2.6/

commit d1102b59ca7b3a3c58912330a4ae38f549c8d569
Author: David S. Miller <davem@davemloft.net>
Date:   Sun May 29 20:28:25 2005 -0700

    [NET]: Use %lx for netdev->features sysfs formatting.
    
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 6c94d3611be61e4cff33b311f1a626d93d1d3e92
Author: David S. Miller <davem@davemloft.net>
Date:   Sun May 29 20:28:01 2005 -0700

    [IPV6]: Clear up user copy warning in flowlabel code.
    
    We are intentionally ignoring the copy_to_user() value,
    make it clear to the compiler too.
    
    Noted by Jeff Garzik.
    
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 69f6a0fafcdf0bfe85af182695d6d38f80f9d549
Author: Jon Mason <jdmason@us.ibm.com>
Date:   Sun May 29 20:27:24 2005 -0700

    [NET]: Add ethtool support for NETIF_F_HW_CSUM.
    
    Signed-off-by: Jon Mason <jdmason@us.ibm.com>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 37e20a66db02eff9adbeee043af990cca85d0034
Author: Pravin B. Shelar <pravins@calsoftinc.com>
Date:   Sun May 29 20:26:44 2005 -0700

    [IPV4]: Kill MULTIPATHHOLDROUTE flag.
    
    It cannot work properly, so just ignore it in drr
    and rr multipath algorithms just like the random
    multipath algorithm does.
    
    Suggested by Herbert Xu.
    
    Signed-off by: Pravin B. Shelar <pravins@calsoftinc.com>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 79165121bc09c209451487d977df910c4ff6fc94
Author: Michael Ellerman <michael@ellerman.id.au>
Date:   Sun May 29 20:24:30 2005 -0700

    [NET]: Add is_multicast_ether_addr() in include/linux/etherdevice.h
    
    This patch adds is_multicast_ether_addr() to go along with
    is_valid_ether_addr() and friends. It then changes
    is_valid_ether_addr() to use the new macro, and fixes up the comment
    on that function to move implementation details out of the API doco.
    
    Signed-off-by: Michael Ellerman <michael@ellerman.id.au>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 8f937c6099858eee15fae14009dcbd05177fa91d
Author: Harald Welte <laforge@gnumonks.org>
Date:   Sun May 29 20:23:46 2005 -0700

    [IPV4]: Primary and secondary addresses
    
    Add an option to make secondary IP addresses get promoted
    when primary IP addresses are removed from the device.
    It defaults to off to preserve existing behavior.
    
    Signed-off-by: Harald Welte <laforge@gnumonks.org>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 79158229b09873ca296ac53de5c952488f944646
Author: Linus Torvalds <torvalds@ppc970.osdl.org>
Date:   Sun May 29 19:30:03 2005 -0700

    Automatic merge of 'misc-fixes' branch from
    
    	rsync://rsync.kernel.org/pub/scm/linux/kernel/git/jgarzik/libata-dev

commit 1b62815193f6c20c60958e5347751155833e3d35
Author: Michael Chan <mchan@broadcom.com>
Date:   Sun May 29 14:59:49 2005 -0700

    [TG3]: Fix bug in tg3_load_firmware_cpu
    
    Add tg3_nvram_lock() and tg3_nvram_unlock() calls around tg3_halt_cpu().
    It is possible that the bootcode may be loading code from nvram during
    this call and stopping the cpu without getting the lock may cause
    uncompleted nvram data to be left in the nvram data register. Subsequent
    calls to read/write nvram data will fail.
    
    Signed-off-by: Michael Chan <mchan@broadcom.com>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit d4bc3927d284784b3f0bff05b4eed2242cc3e226
Author: Michael Chan <mchan@broadcom.com>
Date:   Sun May 29 14:59:20 2005 -0700

    [TG3]: Add interrupt test
    
    This test uses the previously added tg3_test_interrupt() to perform the
    test.
    
    Signed-off-by: Michael Chan <mchan@broadcom.com>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit c76949a6826fc11efcd6bb1abdca1ae02761071d
Author: Michael Chan <mchan@broadcom.com>
Date:   Sun May 29 14:58:59 2005 -0700

    [TG3]: Add loopback test
    
    The test will loopback one packet in MAC loopback mode and verify the
    packet data.
    
    Signed-off-by: Michael Chan <mchan@broadcom.com>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 7942e1dbd7252b480ed238096dca617189d293df
Author: Michael Chan <mchan@broadcom.com>
Date:   Sun May 29 14:58:36 2005 -0700

    [TG3]: Add memory test
    
    Signed-off-by: Michael Chan <mchan@broadcom.com>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit a71116d1f3b85a69fe3a3acec9223fefb4b1fc66
Author: Michael Chan <mchan@broadcom.com>
Date:   Sun May 29 14:58:11 2005 -0700

    [TG3]: Add register test
    
    Signed-off-by: Michael Chan <mchan@broadcom.com>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 944d980ecaabe44616a9e2d50101ce774f517bb6
Author: Michael Chan <mchan@broadcom.com>
Date:   Sun May 29 14:57:48 2005 -0700

    [TG3]: Add parameter to tg3_halt
    
    Add a reset kind parameter to tg3_halt() so that the RESET_KIND_SUSPEND
    parameter can be passed to tg3_halt() before doing offline tests.
    
    All other calls to tg3_halt() will use the RESET_KIND_SHUTDOWN
    parameter.
    
    Signed-off-by: Michael Chan <mchan@broadcom.com>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit ca43007a92662621e5819912fc31c346e3a2eed8
Author: Michael Chan <mchan@broadcom.com>
Date:   Sun May 29 14:57:23 2005 -0700

    [TG3]: Add link test
    
    Signed-off-by: Michael Chan <mchan@broadcom.com>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 566f86adb336637d03900f53b886d879aa5f5d56
Author: Michael Chan <mchan@broadcom.com>
Date:   Sun May 29 14:56:58 2005 -0700

    [TG3]: Add nvram test
    
    Signed-off-by: Michael Chan <mchan@broadcom.com>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 4cafd3f533475c976879d85773735c004f09f576
Author: Michael Chan <mchan@broadcom.com>
Date:   Sun May 29 14:56:34 2005 -0700

    [TG3]: Add basic selftest infrastructure
    
    Signed-off-by: Michael Chan <mchan@broadcom.com>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 7ce54e3f428b33af714271140601c87b8bf2c544
Author: Stephen Hemminger <shemminger@osdl.org>
Date:   Sun May 29 14:16:48 2005 -0700

    [BRIDGE]: receive path optimization
    
    This improves the bridge local receive path by avoiding going
    through another softirq.  The bridge receive path is already being called
    from a netif_receive_skb() there is no point in going through another
    receiveq round trip.
    
    Recursion is limited because bridge can never be a port of a bridge
    so handle_bridge() always returns.
    
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 85967bb46dd1f8f2c49b85a313866c00ac0c9b59
Author: Stephen Hemminger <shemminger@osdl.org>
Date:   Sun May 29 14:15:55 2005 -0700

    [BRIDGE]: prevent bad forwarding table updates
    
    Avoid poisoning of the bridge forwarding table by frames that have been
    dropped by filtering. This prevents spoofed source addresses on hostile
    side of bridge from causing packet leakage, a small but possible security
    risk.
    
    Signed-off-by: Stephen Hemminger <shemminger@osdl.org>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 81d35307dd468b92fe8c58797abb13c62e3e64dd
Author: Stephen Hemminger <shemminger@osdl.org>
Date:   Sun May 29 14:15:17 2005 -0700

    [BRIDGE]: set features based on enslaved devices
    
    Make features of the bridge pseudo-device be a subset of the underlying
    devices.  Motivated by Xen and others who use bridging to do failover.
    
    Signed-off-by: Catalin BOIE <catab at umrella.ro>
    Signed-off-by: Stephen Hemminger <shemminger@osdl.org>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 81e8157583c559c27aac75c708d40a35f563d734
Author: Stephen Hemminger <shemminger@osdl.org>
Date:   Sun May 29 14:14:35 2005 -0700

    [BRIDGE]: make dev->features unsigned
    
    The features field in netdevice is really a bitmask, and bitmask's should
    be unsigned.
    
    Signed-off-by: Stephen Hemminger <shemminger@osdl.org>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit d8a33ac435c43a1a404b2ec560ef1d1536710c36
Author: Stephen Hemminger <shemminger@osdl.org>
Date:   Sun May 29 14:13:47 2005 -0700

    [BRIDGE]: features change notification
    
    Resend of earlier patch (no changes) from Catalin used to provide
    device feature change notification.
    
    Signed-off-by: Catalin BOIE <catab at umbrella.ro>
    Acked-by: Stephen Hemminger <shemminger@osdl.org>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 7238cfb3342078ad6d1dd06c7b567da428672476
Author: Jeff Garzik <jgarzik@pobox.com>
Date:   Sun May 29 14:48:20 2005 -0400

    libata: bump version

commit d582c4ea307873503a68d6d7ab72ee8599e032a9
Author:  <jgarzik@pretzel.yyz.us>
Date:   Sun May 29 14:24:57 2005 -0400

    Automatic merge of /spare/repo/netdev-2.6 branch use-after-unmap

commit 45b30105e7231b70bb855923dbca443ee3ba44c3
Author: Linus Torvalds <torvalds@ppc970.osdl.org>
Date:   Sun May 29 10:40:13 2005 -0700

    Automatic merge of 'for-linus' branch from
    
    	rsync://rsync.kernel.org/pub/scm/linux/kernel/git/dtor/input

commit 7d6064d44bc79e328f2794ee7322ba2676511e2b
Author: Vojtech Pavlik <vojtech@suse.cz>
Date:   Sun May 29 01:27:44 2005 -0500

    Input: Fix fast scrolling scancodes in atkbd.c
    
    Signed-off-by: Vojtech Pavlik <vojtech@suse.cz>
    Signed-off-by: Dmitry Torokhov <dtor@mail.ru>

commit 6cf2b3fc9934a56ceeb393ea5d0149e0bebc80fa
Author: Kumar Gala <galak@freescale.com>
Date:   Sat May 28 15:52:15 2005 -0700

    [PATCH] ppc32: i8259 PIC should not be initialized if PCI is not configured
    
    Trying to initialize the i8259 PIC will not work if CONFIG_PCI is not
    enabled.  The kernel hangs if the initialization is tried.
    
    Signed-off-by: Kumar Gala <kumar.gala@freescale.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit f9e4a005827ec0b33f0c61fec1634a5a3421decd
Author: Kumar Gala <galak@freescale.com>
Date:   Sat May 28 15:52:15 2005 -0700

    [PATCH] ppc32: Add soft reset to MPC834x
    
    This change allows mpc83xx_restart to issue a software reset.
    
    Signed-off-by: Randy Vinson <rvinson@mvista.com>
    Signed-off-by: Kumar Gala <kumar.gala@freescale.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit ff945023c6a455679165b14d298316e262ceeb1f
Author: Kumar Gala <galak@freescale.com>
Date:   Sat May 28 15:52:14 2005 -0700

    [PATCH] ppc32: MPC834x BCSR_SIZE too small for use in a BAT.
    
    The call to io_block_mapping was creating an invalid BAT entry because the
    value of BCSR_SIZE (32K) is too small to be used in a BAT (128K min).  This
    change removes the io_block_mapping call since these registers can easily
    be mapped using ioremap at the point of use.
    
    Signed-off-by: Randy Vinson <rvinson@mvista.com>
    Signed-off-by: Kumar Gala <kumar.gala@freescale.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 92b4dc16257fef814ddf1c8d1d2a20f67f67ee4b
Author: Kumar Gala <galak@freescale.com>
Date:   Sat May 28 15:52:13 2005 -0700

    [PATCH] ppc32: Simplified load string emulation error checking
    
    The error checking for emulation of load string instructions was overly
    generous and would cause certain valid forms of the instructions to be
    treated as illegal.  We drop the range checking since the architecture
    allows this to be boundedly undefined.  Tests on CPUs that support these
    instructions appear not do cause illegal instruction traps on range errors
    and just allow the execution to occur.
    
    Thanks to Kim Phillips for debugging this and figuring out what real HW was
    doing.
    
    Signed-off-by: Kumar Gala <kumar.gala@freescale.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 91f9855a7afbb160ba1709bf342858732138abad
Author: Kumar Gala <galak@freescale.com>
Date:   Sat May 28 15:52:12 2005 -0700

    [PATCH] ppc32: Fix building MPC8555 CDS when CONFIG_PCI is disabled
    
    The patch that introduced support for the VIA chipset broke building if
    CONFIG_PCI is disabled.
    
    Signed-off-by: Kumar Gala <kumar.gala@freescale.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit a6dbba77a9d4b47c60d60c4f07fa79b3ca93a1d5
Author: Vitaly Bordug <vbordug@ru.mvista.com>
Date:   Sat May 28 15:52:09 2005 -0700

    [PATCH] ppc32: Support for 82xx PQII on-chip PCI bridge
    
    This patch adds on-chip PCI bridge support for the PQ2 family.  The
    incomplete existent code is updated with interrupt handling stuff and
    board-specific bits for 8272ADS and PQ2FADS; the related files were renamed
    (from m8260_pci to m82xx_pci) to be of more generic fashion.  This is
    tested with 8266ADS and 8272ADS, should work on PQ2FADS as well.
    
    Signed-off-by: Vitaly Bordug <vbordug@ru.mvista.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit ed36959621451da7195be83b87878b060ce64724
Author: Kumar Gala <galak@freescale.com>
Date:   Sat May 28 15:52:07 2005 -0700

    [PATCH] ppc32: Add VIA IDE support to MPC8555 CDS platform
    
    Add support for the VIA IDE controller that exists on the MPC8555 CDS
    system.  Updated the config for the system to enable support by default.
    
    Signed-off-by: Scott Hall <shall@mvista.com>
    Signed-off-by: Kumar Gala <kumar.gala@freescale.com>
    Cc: Bartlomiej Zolnierkiewicz <B.Zolnierkiewicz@elka.pw.edu.pl>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 252fcaed48fc5473b3fc3cafbf977244b0cbf670
Author: Kumar Gala <galak@freescale.com>
Date:   Sat May 28 15:52:06 2005 -0700

    [PATCH] ppc32: Fix some minor issues related to FSL Book-E KGDB support
    
    Some debug registers needed to be initialized early on to allow proper
    support for KGDB.  Additionally, we need to setup the
    ppc.md_early_serial_map function pointer on boards that have serial support
    for KGDB.
    
    Signed-off-by: Kumar Gala <kumar.gala@freescale.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 94b9f46d61904422c498bf4cf9a90cc14398d311
Author: Kumar Gala <galak@freescale.com>
Date:   Sat May 28 15:52:05 2005 -0700

    [PATCH] ppc32: Fix uImage make target to report success correctly
    
    The existing make rule when building a uImage would check to see if the
    image file existed to report 'is ready' or 'not made'.  However make
    appeared to compute the file list before the rule was executed.
    
    Signed-off-by: Chris Clark <cpclark@xmission.com>
    Signed-off-by: Kumar Gala <kumar.gala@freescale.com>
    Signed-off-by: Sam Ravnborg <sam@ravnborg.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 8e21683bb458c73c6fe87844202a64eac730995e
Author: Paolo 'Blaisorblade' Giarrusso <blaisorblade@yahoo.it>
Date:   Sat May 28 15:52:04 2005 -0700

    [PATCH] uml: remove jail mode + other leftovers
    
    This var is currently useless, as it's apparent from reading the code. Until
    2.6.11 it was used in some code related to jail mode, in the same proc.:
    
            if(jail){
    		while(!reading) sched_yield();
    	}
    
    jail mode has been dropped, together with that use, so let's finish dropping
    this.
    
    Also, remove some other useless definitions I met.
    
    Acked-by: Jeff Dike <jdike@addtoit.com>
    Signed-off-by: Paolo 'Blaisorblade' Giarrusso <blaisorblade@yahoo.it>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit f767b02f35a3db5c1b1c6454992c070510cef07f
Author: Paolo 'Blaisorblade' Giarrusso <blaisorblade@yahoo.it>
Date:   Sat May 28 15:52:03 2005 -0700

    [PATCH] uml: fixlet for arch_prctl_skas
    
    Fix it a bit (after some cross checking with "man arch_prctl"). There were:
    *) typos FS/GS and back
    *) FS in place of FS_BASE (and the same for GS)
    *) the procedure used put_user on &addr, where addr was the parameter (i.e.
    changed its param with put_user, completely useless) rather than interpreting
    addr as a pointer, as requested in this case (see the man page).
    
    Signed-off-by: Paolo 'Blaisorblade' Giarrusso <blaisorblade@yahoo.it>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 8f28e8fa46625310102aea06fac61ba04c8b5b88
Author: Paolo 'Blaisorblade' Giarrusso <blaisorblade@yahoo.it>
Date:   Sat May 28 15:52:02 2005 -0700

    [PATCH] irq code: Add coherence test for PREEMPT_ACTIVE
    
    After porting this fixlet to UML:
    
    http://linux.bkbits.net:8080/linux-2.5/cset@41791ab52lfMuF2i3V-eTIGRBbDYKQ
    
    , I've also added a warning which should refuse compilation with insane values
    for PREEMPT_ACTIVE...  maybe we should simply move PREEMPT_ACTIVE out of
    architectures using GENERIC_IRQS.
    
    Signed-off-by: Paolo 'Blaisorblade' Giarrusso <blaisorblade@yahoo.it>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 37053cc84d51a790a6e5c3987665902cdab122a5
Author: Paul Mundt <lethal@Linux-SH.ORG>
Date:   Sat May 28 15:52:01 2005 -0700

    [PATCH] sh: PREEMPT_ACTIVE fix
    
    Port Paulus's ppc64 fix to sh:
    
      When the generic IRQ stuff went in, it seems that HARDIRQ_BITS got bumped
      from 9 (for ppc64) up to 12.  Consequently, the PREEMPT_ACTIVE bit is now
      within HARDIRQ_MASK, and I get in_interrupt() falsely returning true when
      PREEMPT_ACTIVE is set, and thus a BUG_ON tripping in arch/ppc64/mm/tlb.c.
    
    Signed-off-by: Paul Mundt <lethal@linux-sh.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit affac4bcbba617d7329b04c7882bc49a9826e12f
Author: Paolo 'Blaisorblade' Giarrusso <blaisorblade@yahoo.it>
Date:   Sat May 28 15:52:00 2005 -0700

    [PATCH] uml: fix PREEMPT_ACTIVE
    
    This is a continuation for UML of:
    
    http://linux.bkbits.net:8080/linux-2.5/cset@41791ab52lfMuF2i3V-eTIGRBbDYKQ
    
    Signed-off-by: Paolo 'Blaisorblade' Giarrusso <blaisorblade@yahoo.it>
    Cc: Paul Mackerras <paulus@samba.org>
    Cc: Ingo Molnar <mingo@elte.hu>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit b3461034d7d46455060c8476910be22b6b0fc313
Author: Paolo 'Blaisorblade' Giarrusso <blaisorblade@yahoo.it>
Date:   Sat May 28 15:52:00 2005 -0700

    [PATCH] uml: stack dump fix
    
    Copy (and adapt) to UML the stack code dumper used in i386 when
    CONFIG_FRAME_POINTER is enabled.
    
    Signed-off-by: Paolo 'Blaisorblade' Giarrusso <blaisorblade@yahoo.it>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 37fce857bec00d26d0e8251c909da2bd8736c949
Author: Paolo 'Blaisorblade' Giarrusso <blaisorblade@yahoo.it>
Date:   Sat May 28 15:51:59 2005 -0700

    [PATCH] uml: split CONFIG_FRAME_POINTER from DEBUG_INFO
    
    Until now, FRAME_POINTER was set = DEBUG_INFO for UML.  Change it to be the
    default way, so that it can be enabled alone (for instance to get better
    backtraces on crashes).  The call-trace dumper which uses the frame pointer is
    not yet in, I'm going to introduce it in a separate patch.
    
    Signed-off-by: Paolo 'Blaisorblade' Giarrusso <blaisorblade@yahoo.it>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 567b56508f7367e161d6d861ef214a900ab45ce9
Author: Paolo 'Blaisorblade' Giarrusso <blaisorblade@yahoo.it>
Date:   Sat May 28 15:51:58 2005 -0700

    [PATCH] uml: add MOD_LICENSE to random driver
    
    Add a MODULE_LICENSE("GPL") to the driver, remove some unused macros and add
    the GPL license (it's GPL-licensed anyway since it's a GPL-derivative, apart
    that Jeff Dike releases GPL software, in case anybody is wondering).
    
    Signed-off-by: Paolo 'Blaisorblade' Giarrusso <blaisorblade@yahoo.it>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 34a1a63e37ee8d60bdb842476d9337cdff5413d9
Author: Paolo 'Blaisorblade' Giarrusso <blaisorblade@yahoo.it>
Date:   Sat May 28 15:51:57 2005 -0700

    [PATCH] uml: add modversions support
    
    Actually, the real support was added by some earlier patches.  Now we simply
    re-enable the config.  option.  I've actually tested it and it works well.
    
    Signed-off-by: Paolo 'Blaisorblade' Giarrusso <blaisorblade@yahoo.it>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 7590d3ec1cda7d504c25103bde0c9911f93810e9
Author: Jeff Dike <jdike@addtoit.com>
Date:   Sat May 28 15:51:57 2005 -0700

    [PATCH] uml: remove unused code
    
    This removes two now unused files and a couple of unused functions.
    
    Signed-off-by: Jeff Dike <jdike@addtoit.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 92515da73a5df50db45111b8659ac463b4800236
Author: Jeff Dike <jdike@addtoit.com>
Date:   Sat May 28 15:51:56 2005 -0700

    [PATCH] uml: fix segfault on exit with CONFIG_GCOV
    
    We need to disable signals on exit in all cases, not just when rebooting.
    
    Signed-off-by: Jeff Dike <jdike@addtoit.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 0894e27e7999bdbad2e65734caa1d5de65e7d890
Author: Jeff Dike <jdike@addtoit.com>
Date:   Sat May 28 15:51:55 2005 -0700

    [PATCH] uml: single-space a help message
    
    One of the ubd driver help strings was bust.
    
    Signed-off-by: Jeff Dike <jdike@addtoit.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit a2e4b972c99685d9d7b869c4bf8d8b258ff5b60c
Author: Jeff Dike <jdike@addtoit.com>
Date:   Sat May 28 15:51:54 2005 -0700

    [PATCH] uml: remove 2_5compat.h
    
    Remove old useless header that was used in Ye Olde Times during 2.4->2.5
    porting to abstract differences.  It's definitions are no more used anyway, so
    let's finally kill it.
    
    Signed-off-by: Paolo 'Blaisorblade' Giarrusso <blaisorblade@yahoo.it>
    Signed-off-by: Jeff Dike <jdike@addtoit.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 6770cb61ff6d557613a8382b28f9b0a919fb112f
Author: Jeff Dike <jdike@addtoit.com>
Date:   Sat May 28 15:51:54 2005 -0700

    [PATCH] uml: turn off kmalloc always on a fatal signal
    
    We should turn off kmalloc when getting a fatal signal regardless of the mode
    we're in.
    
    Signed-off-by: Jeff Dike <jdike@addtoit.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit b9e0d0696c9e86d4e40b23039feefb8c377cb524
Author: Jeff Dike <jdike@addtoit.com>
Date:   Sat May 28 15:51:53 2005 -0700

    [PATCH] uml: fix a couple of warnings
    
    Eliminate an unused variable warning in ptrace.c and a size mismatch warning
    by adding a cast to __pa.
    
    Signed-off-by: Jeff Dike <jdike@addtoit.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 226d97ec3e47b54ecc13f6ea3c300dc6a1b290c3
Author: Manu Abraham <manu@kromtek.com>
Date:   Sat May 28 15:51:52 2005 -0700

    [PATCH] dvb: Small cleanup
    
    Miscellaneous cleanup
    
    Signed-off-by: Manu Abraham <manu@kromtek.com>
    Cc: Johannes Stezenbach <js@linuxtv.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 86360a3edeb6b7b6230dc13ef6835d2851409502
Author: Manu Abraham <manu@kromtek.com>
Date:   Sat May 28 15:51:51 2005 -0700

    [PATCH] dvb: Fix 22k tone control
    
    Signed-off-by: Manu Abraham <manu@kromtek.com>
    Cc: Johannes Stezenbach <js@linuxtv.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 8f6da8f166228c1720d16216a9d82d630c58de57
Author: Manu Abraham <manu@kromtek.com>
Date:   Sat May 28 15:51:51 2005 -0700

    [PATCH] dvb: Fix LNB power switching
    
    Signed-off-by: Manu Abraham <manu@kromtek.com>
    Cc: Johannes Stezenbach <js@linuxtv.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 0eac3e486e1f246a9d59fee9251cc69e409cb58e
Author: Manu Abraham <manu@kromtek.com>
Date:   Sat May 28 15:51:50 2005 -0700

    [PATCH] dvb: Remove unnecessary casts
    
    Cleanup unnecessary (and undesirable) casts, demodulator_priv is already a
    void*.  Suggestion from Andrew Morton
    
    Signed-off-by: Manu Abraham <manu@kromtek.com>
    Cc: Johannes Stezenbach <js@linuxtv.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 203fe8b3d1f5b1b527e86f6dbe5b75960acb7f4f
Author: Manu Abraham <manu@kromtek.com>
Date:   Sat May 28 15:51:48 2005 -0700

    [PATCH] dvb: Fix Mini DiSEqC bug
    
    The bug was visible as a warning with gcc-3.4.4 (prerelease)
    
    Message:
    drivers/media/dvb/bt8xx/dst.c:1349: warning: initialization from
    incompatible pointer type.
    
    Signed-off-by: Manu Abraham <manu@kromtek.com>
    Cc: Johannes Stezenbach <js@linuxtv.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 5212dd58e67e4b8009107d69a9de45dd2e687496
Author: Vojtech Pavlik <vojtech@suse.cz>
Date:   Sat May 28 15:51:47 2005 -0700

    [PATCH] input: Fix fast scrolling scancodes in atkbd.c
    
    Signed-off-by: Vojtech Pavlik <vojtech@suse.cz>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 346e399b2a3a01b323fa74a0937e2d855479833b
Author: Patrick McManus <mcmanus@ducksong.com>
Date:   Sat May 28 15:51:46 2005 -0700

    [PATCH] intelfb section fix
    
    On Nov 16 2004 a change to intelfbdrv.c was commited (as part of 0.9.2 it
    looks like) that added __initdata to all of the module param variables that
    seems to create the opportunity for an oops.
    
    I've recently been chasing an OOPS
    (http://marc.theaimsgroup.com/?l=linux-kernel&m=111552250920370&w=2) I
    created by reading every file on the /sys file system and I've traced it
    back to this code in the intelfbdrv.  Though I had root privs in my initial
    problem report, it turns out they are un-necessary to generate the oops -
    all you've got to do is "cat /sys/module/intelfb/parameters/mode" enough
    times and eventually it will oops.
    
    This is because sysfs automatically exports all module_param declarations
    to the sysfs file system..  which means those variables can be dynamically
    evaluated at any later time, which of course means marking them __initdata
    is a bad idea ;)..  when they happen to be char *'s it is an especially bad
    idea ;).
    
    Applying the patch below clears up the OOPS for me.
    
    Signed-off-by: Patrick McManus <mcmanus@ducksong.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit c1e4c8d3ee3300f363a52fd4cf3d90fdf5098f5a
Author: Pavel Machek <pavel@suse.cz>
Date:   Fri May 27 12:53:03 2005 -0700

    [PATCH] fix jumpy mouse cursor on console
    
    Do not send empty events to gpm.  (Keyboards are assumed to have scroll
    wheel these days, that makes them part-mouse.  That means typing on
    keyboard generates empty mouse events).
    
    From: Dmitry Torokhov <dtor_core@ameritech.net>
    Signed-off-by: Pavel Machek <pavel@suse.cz>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 8bd7f125e2f217c8aa3dff005ae291c81246c340
Author: Shaohua Li <shaohua.li@intel.com>
Date:   Fri May 27 12:53:03 2005 -0700

    [PATCH] swsusp: ahd_dv_0 can't be stopped
    
    This driver wants to set PF_NOFREEZE.
    
    Cc: James Bottomley <James.Bottomley@steeleye.com>
    Cc: Pavel Machek <pavel@ucw.cz>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit b16eeb47292597a8bf3ad53fdaf1f727f57bd8e4
Author: Benjamin Herrenschmidt <benh@kernel.crashing.org>
Date:   Fri May 27 12:53:02 2005 -0700

    [PATCH] ppc32: Fix cpufreq vs. sleep issue
    
    Recent kernels occasionally trigger a PMU timeout on some mac laptops,
    typically on wakeup from sleep.  This seem to be caused by either a too big
    latency caused by the cpufreq switch on wakeup from sleep or by an
    interrupt beeing lost due to the reset of the interrupt controller done
    during wakeup.
    
    This patch makes that code more robust by stopping PMU auto poll activity
    around cpufreq changes on machines that use the PMU for such changes (long
    latency switching involving a CPU hard reset and flush of all caches) and
    by removing the reset of the open pic interrupt controller on wakeup (that
    can cause the loss of an interrupt and Darwin doesn't do it, so it must not
    be necessary).
    
    Signed-off-by: Benjamin Herrenschmidt <benh@kernel.crashing.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 49f384b82b03416dd7e4fc77847a959fe3247362
Author: Siddha, Suresh B <suresh.b.siddha@intel.com>
Date:   Fri May 27 12:53:01 2005 -0700

    [PATCH] x86: fix smp_num_siblings on buggy BIOSes
    
    This fixes 'smp_num_siblings' value on the systems with a buggy bios,
    which sets number of siblings to '2' even when HT is disabled.  (more
    details are at http://bugzilla.kernel.org/show_bug.cgi?id=4359)
    
    I am planning to do more cleanup in this area (like moving smp_num_siblings
    to per cpuinfo) shortly.
    
    Signed-off-by: Suresh Siddha <suresh.b.siddha@intel.com>
    Signed-off-by: Venkatesh Pallipadi <venkatesh.pallipadi@intel.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit b60c1f6ffd88850079ae419aa933ab0eddbd5535
Author: John Hawkes <hawkes@sgi.com>
Date:   Fri May 27 12:53:00 2005 -0700

    [PATCH] drop note_interrupt() for per-CPU for proper scaling
    
    The "unhandled interrupts" catcher, note_interrupt(), increments a global
    desc->irq_count and grossly damages scaling of very large systems, e.g.,
    >192p ia64 Altix, because of this highly contented cacheline, especially
    for timer interrupts.  384p is severely crippled, and 512p is unuseable.
    
    All calls to note_interrupt() can be disabled by booting with "noirqdebug",
    but this disables the useful interrupt checking for all interrupts.
    
    I propose eliminating note_interrupt() for all per-CPU interrupts.  This
    was the behavior of linux-2.6.10 and earlier, but in 2.6.11 a code
    restructuring added a call to note_interrupt() for per-CPU interrupts.
    Besides, note_interrupt() is a bit racy for concurrent CPU calls anyway, as
    the desc->irq_count++ increment isn't atomic (which, if done, would make
    scaling even worse).
    
    Signed-off-by: John Hawkes <hawkes@sgi.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 70ffc71c5c42c8ac62d951e80d9799bd5764f2f5
Author: Adrian Bunk <bunk@stusta.de>
Date:   Fri May 27 12:52:59 2005 -0700

    [PATCH] arch/i386/kernel/cpu/intel_cacheinfo.c: section fix
    
    num_cache_leaves is used in __devexit cache_remove_dev() and can therefore
    not be __devinit.
    
    Signed-off-by: Adrian Bunk <bunk@stusta.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 9db29258893b08a838e5ecfa4a0933c9c1f2e305
Author: Stephen Rothwell <sfr@canb.auug.org.au>
Date:   Fri May 27 12:52:58 2005 -0700

    [PATCH] ppc64 iSeries: make virtual DVD-RAMs writable again
    
    It appears that another test has been added in the Uniform CDROM layer that
    must be passed before a DVD-RAM is considered writeable.  This patch
    implements an emulation of the needed packet command for the viocd driver.
    
    Signed-off-by: Stephen Rothwell <sfr@canb.auug.org.au>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 9ae250d175e1cbff82223ce2c07897c790c5b948
Author: Benjamin Herrenschmidt <benh@kernel.crashing.org>
Date:   Fri May 27 12:52:57 2005 -0700

    [PATCH] ppc32: Fix Alsa PowerMac driver on old machines
    
    The g5 support code broke some earlier models unfortunately as those bail
    out early from the detect function, before the point where I added the code
    to locate the PCI device for use with DMA allocations.
    
    This patch fixes it.
    
    Signed-off-by: Benjamin Herrenschmidt <benh@kernel.crashing.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit d6649bc76a57523209a6b2ee4844c9078a4dd8bb
Author: Benjamin Herrenschmidt <benh@kernel.crashing.org>
Date:   Fri May 27 12:52:56 2005 -0700

    [PATCH] ppc32: small cpufreq update
    
    This patch adds a missing attribute to pmac cpufreq so that
    "scaling_available_frequencies" works.  It also cleans up the duplicate
    definitions for low and high speed constants.
    
    Signed-off-by: Benjamin Herrenschmidt <benh@kernel.crashing.org>
    Signed-off-by: John Clemens <clemej@alum.rpi.edu>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit c5924b7d97430657fa07ebf1a208c7e8cf135ef3
Author: Oliver Korpilla <Oliver.Korpilla@gmx.de>
Date:   Fri May 27 12:52:55 2005 -0700

    [PATCH] x86_64: signal.c build fix
    
    For unspecified reasons, arch/x86_64/kernel/signal.c apparently needs
    ia32_unistd.h.
    
    Cc: Andi Kleen <ak@muc.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit dcefb396c2af4d52fba48dc58b4021794b042046
Author: Dave Jones <davej@redhat.com>
Date:   Sat May 28 00:51:24 2005 -0400

    [PATCH] Fix up pwc driver compilation.
    
    The neutering of the pwc driver was incomplete. It still references
    some now-dead files..
    
    Signed-off-by: Dave Jones <davej@redhat.com>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 409b7506759430f7c3841d425ca1f8a31eeadece
Author: Dmitry Torokhov <dtor_core@ameritech.net>
Date:   Sat May 28 02:12:18 2005 -0500

    Input: synaptics - reduce verboseness of synaptics driver - there
           is no reason one driver should take 10 lines in dmesg.
    
    Signed-off-by: Dmitry Torokhov <dtor@mail.ru>

commit b4ff99b60c5e17b1031deb20c9d7688ebe6c9659
Author: Dmitry Torokhov <dtor_core@ameritech.net>
Date:   Sat May 28 02:12:10 2005 -0500

    Input: yet another model that does not play nicely when i8042 is
           put in MUX mode - Fujitsu Lifebook S6230
    
    Signed-off-by: Dmitry Torokhov <dtor@mail.ru>

commit 59311de3fb5f293b2e99d7f52e0ab5572759951d
Author: Dmitry Torokhov <dtor_core@ameritech.net>
Date:   Sat May 28 02:12:05 2005 -0500

    Input: automatically disable MUX mode on Toshiba Satellite P10
           because it interferes with ALPS touchpad detection and
           causes horrible death on reboot. Since P10 does not have
           external PS/2 ports MUX mode does not have any advantages
           over legacy mode anyway.
    
    Signed-off-by: Dmitry Torokhov <dtor@mail.ru>

commit a07461ec0cffb105c7e7b7404520ea2c74129db0
Author: Dmitry Torokhov <dtor_core@ameritech.net>
Date:   Sat May 28 02:12:00 2005 -0500

    Input: gunze - fix out-of-bound array access reported by Adrian Bunk.
    
    Signed-off-by: Dmitry Torokhov <dtor@mail.ru>

commit f24949e8e0b9bed223ad9a435bf37e91ee8d0db7
Author: Vojtech Pavlik <vojtech@suse.cz>
Date:   Sat May 28 02:11:49 2005 -0500

    Input: Fix button mapping in joydev - BTN_TRIGGER was being
           mapped twice, resulting in it being the last (instead
           of first) button on a joystick.
    
    Signed-off-by: Vojtech Pavlik <vojtech@suse.cz>
    Signed-off-by: Dmitry Torokhov <dtor@mail.ru>

commit 7741e9317137a7456baa9c09ad8308c80c23b8db
Author: Vojtech Pavlik <vojtech@suse.cz>
Date:   Sat May 28 02:11:42 2005 -0500

    Input: Workaround for Sunrex K8561 IR Keyboard/Mouse. The mouse
           sends an incorrect ID and wasn't recognized.
    
    Reported-by: Stefan Seyfried <seife@suse.de>
    Signed-off-by: Vojtech Pavlik <vojtech@suse.cz>
    Signed-off-by: Dmitry Torokhov <dtor@mail.ru>

commit 74af42bb729651855f78ea27498250724689130e
Author: Kurt Garloff <garloff@suse.de>
Date:   Sat May 28 02:11:38 2005 -0500

    Input: Avoid double unregistering of i8042 PnP driver. This can happen
           when no i8042 controller (not PnP, not legacy) is present.
    
    From: Kurt Garloff <garloff@suse.de>
    Signed-off-by: Vojtech Pavlik <vojtech@suse.cz>
    Signed-off-by: Dmitry Torokhov <dtor@mail.ru>

commit 5a72afc03ccc29458502cf032f5c34e5ee004ae7
Author: Dmitry Torokhov <dtor_core@ameritech.net>
Date:   Sat May 28 02:11:32 2005 -0500

    Input: Tone down the severity of a printk() in i386/ia64 arch code
           for i386, it's printed on many machines and usually is not
           a cause for worry.
    
    Signed-off-by: Dmitry Torokhov <dtor@mail.ru>
    Signed-off-by: Vojtech Pavlik <vojtech@suse.cz>

commit 2673c836ab9a44b02d45ae5c1c44c03df138dba4
Author: Vojtech Pavlik <vojtech@suse.cz>
Date:   Sat May 28 02:11:27 2005 -0500

    Input: Only write the CTR in i8042 resume function. Reading it is
           wrong, since it may (will) contain nonsensical data.
    
    Signed-off-by: Vojtech Pavlik <vojtech@suse.cz>
    Signed-off-by: Dmitry Torokhov <dtor@mail.ru>

commit be15692310ec0e93998d763931089cb21386a058
Author: Vojtech Pavlik <vojtech@suse.cz>
Date:   Sat May 28 02:11:19 2005 -0500

    Input: Remove (now) unused variable in i8042.c
    
    Signed-off-by: Vojtech Pavlik <vojtech@suse.cz>
    Signed-off-by: Dmitry Torokhov <dtor@mail.ru>

commit 39fa58007a54b09c91cb7bf3ce3cfcc4957f92ff
Author: Vojtech Pavlik <vojtech@suse.cz>
Date:   Sat May 28 02:11:16 2005 -0500

    Input: Add a missing KERN_INFO message designation, fix behavior
           when only a keyboard part of the controller is detected.
    
    Signed-off-by: Vojtech Pavlik <vojtech@suse.cz>
    Signed-off-by: Dmitry Torokhov <dtor@mail.ru>

commit 668d1e6093110f7534e661e2ff43d54c74659b6d
Author: Adrian Bunk <bunk@stusta.de>
Date:   Sat May 28 02:11:12 2005 -0500

    Input:
    This patch adds dummy gameport_register_port, gameport_unregister_port
    and gameport_set_phys functions to gameport.h for the case when a driver
    can't use gameport.
    
    This fixes the compilation of some OSS drivers with GAMEPORT=n without
    the need to #if inside every single driver.
    
    This patch also removes the non-working and now obsolete SOUND_GAMEPORT.
    
    This patch is also an alternative solution for ALSA drivers with similar
    problems (but #if's inside the drivers might have the advantage of
    saving some more bytes of gameport is not available).
    
    The only user-visible change is that for GAMEPORT=m the affected OSS
    drivers are now allowed to be built statically (but they won't have
    gameport support).
    
    Signed-off-by: Adrian Bunk <bunk@stusta.de>
    Signed-off-by: Vojtech Pavlik <vojtech@suse.cz>
    Signed-off-by: Dmitry Torokhov <dtor@mail.ru>

commit 271b74d0b886301f297407dd7ae11b99607f8089
Author: Andrew Morton <akpm@osdl.org>
Date:   Sat May 28 02:11:06 2005 -0500

    Input: Fix a warning in psmouse-base.c
    
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Vojtech Pavlik <vojtech@suse.cz>
    Signed-off-by: Dmitry Torokhov <dtor@mail.ru>

commit 87507cfdd2cde397c9da8f6e7ec23b2b47ec53d6
Author: domen@coderock.org <domen@coderock.org>
Date:   Fri Apr 8 09:53:06 2005 +0200

    [PATCH] drivers/scsi/ahci: add #include req'd for the DMA_{64,32}BIT_MASK constants
    
    The previous patch did not compile cleanly on all architectures so
    here's a fixed one which #includes <linux/dma-mapping.h>.
    
    Use the DMA_{64,32}BIT_MASK constants from dma-mapping.h when calling
    pci_set_dma_mask() or pci_set_consistent_dma_mask()
    This patch includes dma-mapping.h explicitly because it caused errors
    on some architectures otherwise.
    See http://marc.theaimsgroup.com/?t=108001993000001&r=1&w=2 for details
    
    Signed-off-by: Tobias Klauser <tklauser@nuerscht.ch>
    Signed-off-by: Domen Puncer <domen@coderock.org>
    
    diff -puN drivers/scsi/ahci.c~dma_mask-drivers_scsi_ahci drivers/scsi/ahci.c

commit 7003c05d77593f567e9940e68a944d846228fd7a
Author: domen@coderock.org <domen@coderock.org>
Date:   Fri Apr 8 09:53:09 2005 +0200

    [PATCH] drivers/scsi/sata_vsc: add #include req'd for DMA_32BIT_MASK constant
    
    The previous patch did not compile cleanly on all architectures so
    here's a fixed one which #includes <linux/dma-mapping.h>.
    
    Use the DMA_{64,32}BIT_MASK constants from dma-mapping.h when calling
    pci_set_dma_mask() or pci_set_consistent_dma_mask()
    This patch includes dma-mapping.h explicitly because it caused errors
    on some architectures otherwise.
    See http://marc.theaimsgroup.com/?t=108001993000001&r=1&w=2 for details
    
    Signed-off-by: Tobias Klauser <tklauser@nuerscht.ch>
    Signed-off-by: Domen Puncer <domen@coderock.org>
    
    diff -puN drivers/scsi/sata_vsc.c~dma_mask-drivers_scsi_sata_vsc drivers/scsi/sata_vsc.c

commit b9a6eaffe7ff3d3481efa9fa353b2c6a02eda756
Author: Daniel Ritz <daniel.ritz@gmx.ch>
Date:   Sun Apr 10 20:27:45 2005 +0200

    [PATCH] 3c574_cs: disable interrupts in el3_close
    
    3c574_cs forgets to disable interrupts during el3_close().
    fix it by doing what 3c59x does.
    
    Signed-off-by: Daniel Ritz <daniel.ritz@gmx.ch>

commit 254feb882a7c6e4e51416dff6a97d847fbbba551
Author: Linus Torvalds <torvalds@ppc970.osdl.org>
Date:   Fri May 27 09:26:10 2005 -0700

    Automatic merge of rsync://rsync.kernel.org/pub/scm/linux/kernel/git/hch/xfs-2.6

commit 8aadff7dd519800ce7c0e7fb75dcd4438b373134
Author: Alexander Nyberg <alexn@telia.com>
Date:   Fri May 27 12:48:50 2005 +0200

    [PATCH] Note on ACPI build fix
    
    Even after the previous fix you can still set CONFIG_ACPI_BOOT
    indirectly even without CONFIG_ACPI by choosing CONFIG_PCI and
    CONFIG_PCI_MMCONFIG.
    
    That doesn't build very well either.
    
    This makes PCI_MMCONFIG depend on ACPI, fixing that hole.
    
    [ I guess in theory Kconfig could follow the whole chain of dependencies
      for things that get selected, but that sounds insanely complicated, so
      we'll just fix up these things by hand.  --Linus ]
    
    Signed-off-by: Alexander Nyberg <alexn@telia.com>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 3e11c3ce0a4ce3d30802babccb0e5f881778ccf1
Author: Len Brown <lenb@toshiba.hsd1.ma.comcast.net>
Date:   Fri May 27 04:53:27 2005 -0400

    [PATCH] ACPI build fix
    
    Fix 2.6.12 CONFIG_ACPI=n build regression.
    CONFIG_ACPI_BOOT shall be set only if CONFIG_ACPI.
    
    Signed-off-by: Len Brown <len.brown@intel.com>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 9920e91450ee9b373dd4924f79d287a267b8f6a3
Author: Alexander Nyberg <alexn@telia.com>
Date:   Fri May 27 12:27:05 2005 +0200

    [PATCH] Fixup VIA IRQ quirk
    
    quirk_via_irqpic can't be __devinit for swsuspend
    
    Signed-off-by: Alexander Nyberg <alexn@telia.com>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 25be5e6ccc5c9cab77012fabbb72520f9b6e4618
Author: Len Brown <lenb@toshiba.hsd1.ma.comcast.net>
Date:   Fri May 27 04:21:50 2005 -0400

    [PATCH] VIA IRQ quirk
    
    Delete quirk_via_bridge(), restore quirk_via_irqpic() -- but now
    improved to be invoked upon device ENABLE, and now only for VIA devices
    -- not all devices behind VIA bridges.
    
    Signed-off-by: Bjorn Helgaas <bjorn.helgaas@hp.com>
    Signed-off-by: Len Brown <len.brown@intel.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 2efe86b809d97debaaf9fcc13b041aedf15bd3d2
Author: Paul Jackson <pj@sgi.com>
Date:   Fri May 27 02:02:43 2005 -0700

    [PATCH] cpuset exit NULL dereference fix
    
    There is a race in the kernel cpuset code, between the code
    to handle notify_on_release, and the code to remove a cpuset.
    The notify_on_release code can end up trying to access a
    cpuset that has been removed.  In the most common case, this
    causes a NULL pointer dereference from the routine cpuset_path.
    However all manner of bad things are possible, in theory at least.
    
    The existing code decrements the cpuset use count, and if the
    count goes to zero, processes the notify_on_release request,
    if appropriate.  However, once the count goes to zero, unless we
    are holding the global cpuset_sem semaphore, there is nothing to
    stop another task from immediately removing the cpuset entirely,
    and recycling its memory.
    
    The obvious fix would be to always hold the cpuset_sem
    semaphore while decrementing the use count and dealing with
    notify_on_release.  However we don't want to force a global
    semaphore into the mainline task exit path, as that might create
    a scaling problem.
    
    The actual fix is almost as easy - since this is only an issue
    for cpusets using notify_on_release, which the top level big
    cpusets don't normally need to use, only take the cpuset_sem
    for cpusets using notify_on_release.
    
    This code has been run for hours without a hiccup, while running
    a cpuset create/destroy stress test that could crash the existing
    kernel in seconds.  This patch applies to the current -linus
    git kernel.
    
    Signed-off-by: Paul Jackson <pj@sgi.com>
    Acked-by: Simon Derr <simon.derr@bull.net>
    Acked-by: Dinakar Guniguntala <dino@in.ibm.com>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 88c1834633341bbb94e315433067496338bff4ad
Author: Alan Cox <alan@lxorguk.ukuu.org.uk>
Date:   Fri May 27 13:40:53 2005 +0100

    [PATCH] remove non-cleanroom pwc driver compression
    
    The original pwc author raised some questions about the reverse
    engineering of the decompressor algorithms used in the pwc driver.
    Having done some detailed investigation it appears those concerns that
    clean room policy was not followed are reasonable.  I've also had a
    friendly discussion with Philips to ask their view on this.
    
    This removes the problem items of code which reduces the pwc
    functionality in the kernel a little but leaves all the framework for
    setup that will be needed for decompressors in user space (where they
    eventually belong).  This change set is designed to be the minimal risk
    change set given that 2.6.12 is hopefully close to hand, with a view to
    merging the much updated pwc code in 2.6.13 series kernels.
    
    Someone else can then redo the decompressors properly (clean room) in
    user space.
    
    Note that while its easy to say that it should have been caught earlier,
    but the violation was really only obvious to someone who had access to
    both the proprietary source and the 'GPL' source.

commit 5d9e4ea55ae19f9083b9c2c97cc912b823ee7ab4
Author: Linus Torvalds <torvalds@ppc970.osdl.org>
Date:   Fri May 27 07:36:17 2005 -0700

    ide-cd: revert DMA mask test change
    
    The change to require the DMA length to be only word-aligned was not
    safe.

commit 66f5507133f97088e553b1c8f8d341a0efd438f9
Author: Christoph Hellwig <hch@hera.kernel.org>
Date:   Fri May 27 01:17:08 2005 -0700

    [XFS] remove an over-zealous WARN_ON

commit b19312c4c8f3f84da57bba01d45549df1cf10dcd
Author: Christoph Hellwig <hch@hera.kernel.org>
Date:   Fri May 27 01:16:24 2005 -0700

    Merge with /pub/scm/linux/kernel/git/torvalds/linux-2.6.git
    

commit aa8f0dc6c3dbf1cf3ff58f3e945c981be134814d
Author: Jeff Garzik <jgarzik@pobox.com>
Date:   Thu May 26 21:54:27 2005 -0400

    libata: Fix use-after-iounmap
    
    Jens Axboe pointed out that the iounmap() call in libata was occurring
    too early, and some drivers (ahci, probably others) were using ioremap'd
    memory after it had been unmapped.
    
    The patch should address that problem by way of improving the libata
    driver API:
    
    * move ->host_stop() call after all ->port_stop() calls have occurred.
    
    * create default helper function ata_host_stop(), and move iounmap()
    call there.
    
    * add ->host_stop_prewalk() hook, use it in sata_qstor.c (hi Mark).
    sata_qstor appears to require the host-stop-before-port-stop ordering
    that existed prior to applying the attached patch.

commit 462cee296476278acaa54c41925b3273e0e4dd40
Author:  <jgarzik@pretzel.yyz.us>
Date:   Thu May 26 21:40:25 2005 -0400

    Automatic merge of rsync://rsync.kernel.org/pub/scm/linux/kernel/git/torvalds/linux-2.6.git branch HEAD

commit d68b8622ccbee8a18e495ad1650c3306f2eeb0d6
Author: Roland McGrath <roland@redhat.com>
Date:   Thu May 26 15:21:13 2005 -0700

    [PATCH] i386: fix prevent_tail_call
    
    We fixed this bug before, but it didn't take.  It may have been the case
    that the problem was first noticed to occur in a CONFIG_REGPARM compile.
    But it's not regparm functions that need not to make tail calls, it's
    asmlinkage functions called with a user pt_regs frame on the stack
    supplying their arguments.  prevent_tail_call probably doesn't do anything
    at all in regparm functions (your argument registers are going to be
    clobbered, period).  It was a braino to conditionalize that definition in
    the first place.
    
    Signed-off-by: Roland McGrath <roland@redhat.com>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 4ec5240ec367a592834385893200dd4fb369354c
Author: Linus Torvalds <torvalds@ppc970.osdl.org>
Date:   Thu May 26 13:54:33 2005 -0700

    Automatic merge of rsync://rsync.kernel.org/pub/scm/linux/kernel/git/davem/net-2.6

commit b6016b767397258b58163494a869f8f1199e6897
Author: Michael Chan <mchan@broadcom.com>
Date:   Thu May 26 13:03:09 2005 -0700

    [BNX2]: New Broadcom gigabit network driver.
    
    A new driver bnx2 for Broadcom bcm5706 is available.
    
    The patch also includes new 1000BASE-X advertisement bit definitions in
    mii.h
    
    Thanks to David Miller and Jeff Garzik for reviewing and their valuable
    feedback.
    
    Signed-off-by: Michael Chan <mchan@broadcom.com>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit c8b35d2a29ec3c93e3b9c1e70d649a77a214b1c1
Author: Alexey Dobriyan <adobriyan@gmail.com>
Date:   Thu May 26 12:59:42 2005 -0700

    [TOKENRING]: net/802/tr.c: s/struct rif_cache_s/struct rif_cache/
    
    "_s" suffix is certainly of hungarian origin.
    
    Signed-off-by: Alexey Dobriyan <adobriyan@gmail.com>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit c6b3365391c626206f6789354794a81a010cb7a1
Author: Alexey Dobriyan <adobriyan@gmail.com>
Date:   Thu May 26 12:59:05 2005 -0700

    [TOKENRING]: be'ify trh_hdr, trllc, rif_cache_s
    
    Signed-off-by: Alexey Dobriyan <adobriyan@gmail.com>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 92d63decc0b6a5d600f792fcf5f3ff9718c09a3d
Author: Hideaki YOSHIFUJI <yoshfuji@linux-ipv6.org>
Date:   Thu May 26 12:58:04 2005 -0700

    From: Kazunori Miyazawa <kazunori@miyazawa.org>
    
    [XFRM] Call dst_check() with appropriate cookie
    
    This fixes infinite loop issue with IPv6 tunnel mode.
    
    Signed-off-by: Kazunori Miyazawa <kazunori@miyazawa.org>
    Signed-off-by: Hideaki YOSHIFUJI <yoshfuji@linux-ipv6.org>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 2f872f0401d4b470990864fbf99c19130f25ad4d
Author: Jay Vosburgh <fubar@us.ibm.com>
Date:   Thu May 26 12:56:59 2005 -0700

    [BONDING]: bonding using arp_ip_target may stay down with active path 
    
    Correcting the list traversal makes the problem go away.
    
    Signed-off-by: Jay Vosburgh <fubar@us.ibm.com>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 0dca51d362b8e4af6b0dbc9e54d1e5165341918a
Author: Stephen Hemminger <shemminger@osdl.org>
Date:   Thu May 26 12:55:48 2005 -0700

    [PKT_SCHED] netem: allow random reordering (with fix)
    
    Here is a fixed up version of the reorder feature of netem.
    It is the same as the earlier patch plus with the bugfix from Julio merged in.
    Has expected backwards compatibility behaviour.
    
    Go ahead and merge this one, the TCP strangeness I was seeing was due
    to the reordering bug, and previous version of TSO patch.
    
    Signed-off-by: Stephen Hemminger <shemminger@osdl.org>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 0f9f32ac65ee4a452a912a8440cebbc4dff73852
Author: Stephen Hemminger <shemminger@osdl.org>
Date:   Thu May 26 12:55:01 2005 -0700

    [PKT_SCHED] netem: use only inner qdisc -- no private skbuff queue
    
    Netem works better if there if packets are just queued in the inner discipline
    rather than having a separate delayed queue. Change to use the dequeue/requeue
    to peek like TBF does.
    
    By doing this potential qlen problems with the old method are avoided. The problems
    happened when the netem_run that moved packets from the inner discipline to the nested
    discipline failed (because inner queue was full). This happened in dequeue, so the
    effective qlen of the netem would be decreased (because of the drop), but there was
    no way to keep the outer qdisc (caller of netem dequeue) in sync.
    
    The problem window is still there since this patch doesn't address the issue of
    requeue failing in netem_dequeue, but that shouldn't happen since the sequence dequeue/requeue
    should always work.  Long term correct fix is to implement qdisc->peek in all the qdisc's
    to allow for this (needed by several other qdisc's as well).
    
    Signed-off-by: Stephen Hemminger <shemminger@osdl.org>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 0afb51e72855971dba83b3c6b70c547c2d1161fd
Author: Stephen Hemminger <shemminger@osdl.org>
Date:   Thu May 26 12:53:49 2005 -0700

    [PKT_SCHED]: netem: reinsert for duplication
    
    Handle duplication of packets in netem by re-inserting at top of qdisc tree.
    This avoid problems with qlen accounting with nested qdisc. This recursion
    requires no additional locking but will potentially increase stack depth.
    
    Signed-off-by: Stephen Hemminger <shemminger@osdl.org>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit f49809fe9b39e22b0f6f75c86295ce216ce3e374
Author: Linus Torvalds <torvalds@ppc970.osdl.org>
Date:   Thu May 26 10:27:39 2005 -0700

    Automatic merge of 'for-linus' branch from
    
    	rsync://rsync.kernel.org/pub/scm/linux/kernel/git/jgarzik/netdev-2.6

commit d11cf326bd5e785cc5a3f5a3d3f4e3a5522f4fb7
Author: Zhang Yanmin <yanmin.zhang@intel.com>
Date:   Sun May 22 17:47:00 2005 -0700

    [IA64] sys_mmap doesn't follow posix.1 when parameter len=0
    
    In IA64 kernel, sys_mmap calls do_mmap2 and do_mmap2 returns addr if
    len=0, which means the mmap sys call succeeds.
    
    Posix.1 says:
    The mmap() function shall fail if:
    [EINVAL] The value of len is zero. 
    
    Here is a patch to fix it.
    
    Signed-off-by: Zhang Yanmin <yanmin.zhang@intel.com>
    Acked-by: David Mosberger <davidm@hpl.hp.com>
    Signed-off-by: Tony Luck <tony.luck@intel.com>

commit cdbbde14cb55dd10771ce79154f787322d88411b
Author: Linus Torvalds <torvalds@ppc970.osdl.org>
Date:   Thu May 26 10:02:30 2005 -0700

    Merge of 'misc-fixes' branch from
    
    	rsync://rsync.kernel.org/pub/scm/linux/kernel/git/jgarzik/libata-dev

commit 284e423811495f632a7a334b2b93caba07d4f778
Author: Marcello Maggioni <hayarms@gmail.com>
Date:   Thu May 26 15:47:35 2005 +0200

    [PATCH] timeout at boottime with NEC3500A (and possibly others) when inserted a CD in it
    
    From: Marcello Maggioni <hayarms@gmail.com>
    
    Problem: Some drives (NEC 3500, TDK 1616N, Mad-dog MD-16XDVD9, RICOH
    MP5163DA, Memorex DVD9 drive and IO-DATA's too for sure), if a
    CD/DVD is inserted into the tray when the system is booted and if
    before the OS bootup the BIOS checked for the presence of a bootable
    CD/DVD into the drive, during the IDE probe phase the drive may
    result busy and remain so for the next 25/30 seconds . This cause the
    drive to be skipped during the booting phase and not begin usable
    until the next reboot (if the reboot goes well and the drive doesn't
    timeout again).
    
    Solution: Rising the timeout time from 10 seconds to 35 seconds
    (during these 35 seconds every drive should wake up for sure
    according to the tests I've done).
    

commit 41bb4c43b34bcde7eb62cf19acdcf9f2eb13801d
Author: Stuart Hayes <Stuart_Hayes@dell.com>
Date:   Thu May 26 15:38:45 2005 +0200

    [PATCH] ide-scsi: kmap scatter/gather before doing PIO  
    
    From: Stuart Hayes <Stuart_Hayes@dell.com>
    
    The system can panic with a null pointer dereference using ide-scsi if
    PIO is being done on scatter gather pages that are in high memory,
    because page_address() returns 0.  We are actually seeing this using a
    tape drive.  This patch will kmap_atomic() the pages before performing
    PIO.
    

commit 8604affde9d4f52f04342d6a37c77d95fa167e7a
Author: Bartlomiej Zolnierkiewicz <bzolnier@elka.pw.edu.pl>
Date:   Thu May 26 14:55:34 2005 +0200

    [PATCH] convert IDE device drivers to driver-model
    
    * add ide_bus_match() and export ide_bus_type
    * split ide_remove_driver_from_hwgroup() out of ide_unregister()
    * move device cleanup from ide_unregister() to drive_release_dev()
    * convert ide_driver_t->name to driver->name
    * convert ide_driver_t->{attach,cleanup} to driver->{probe,remove}
    * remove ide_driver_t->busy as ide_bus_type->subsys.rwsem
      protects against concurrent ->{probe,remove} calls
    * make ide_{un}register_driver() void as it cannot fail now
    * use driver_{un}register() directly, remove ide_{un}register_driver()
    * use device_register() instead of ata_attach(), remove ata_attach()
    * add proc_print_driver() and ide_drivers_show(), remove ide_drivers_op
    * fix ide_replace_subdriver() and move it to ide-proc.c
    * remove ide_driver_t->drives, ide_drives and drives_lock
    * remove ide_driver_t->drivers, drivers and drivers_lock
    * remove ide_drive_t->driver and DRIVER() macro
    

commit 32529e0128923e42126b5d14e444c18295a452ba
Author: Albert Lee <albertcc@tw.ibm.com>
Date:   Thu May 26 03:49:42 2005 -0400

    [PATCH] libata: Fix zero sg_dma_len() on 64-bit platform
    
    When testing ATAPI PIO data transfer on the ppc64 platform,  __atapi_pio_bytes() got zero when
    sg_dma_len() is used. I checked the <asm-ppc64/scatterlish.h>, the struct scatterlist is defined as:
    
    struct scatterlist {
    	struct page *page;
    	unsigned int offset;
    	unsigned int length;
    
    	/* For TCE support */
    	u32 dma_address;
    	u32 dma_length;
    };
    
    #define sg_dma_address(sg)	((sg)->dma_address)
    #define sg_dma_len(sg)		((sg)->dma_length)
    
    So, if the scatterlist is not DMA mapped, sg_dma_len() will return zero on ppc64.
    The same problem should occur on the x86-64 platform.
    On the i386 platform, sg_dma_len() returns sg->length, that's why the problem does not occur on an i386.
    
    Changes:
    - Use sg->length if the scatterlist is not DMA mapped (yet).
    
    Signed-off-by: Albert Lee <albertcc@tw.ibm.com>

commit c1ef1f351db70ad60c793b8218dd9f6739cfd66d
Author:  <jgarzik@pretzel.yyz.us>
Date:   Thu May 26 02:17:16 2005 -0400

    Automatic merge of rsync://rsync.kernel.org/pub/scm/linux/kernel/git/torvalds/linux-2.6.git branch HEAD

commit ad6a9984eec72f3a609a8685281740f5e5f466aa
Author:  <jgarzik@pretzel.yyz.us>
Date:   Wed May 25 22:11:38 2005 -0400

    Automatic merge of /spare/repo/netdev-2.6 branch tlan

commit 38778204a1ad0d2c266f85170c2fb7d80ed43160
Author:  <jgarzik@pretzel.yyz.us>
Date:   Wed May 25 22:11:28 2005 -0400

    Automatic merge of /spare/repo/netdev-2.6 branch sis900

commit 8cf0d9d075916c9affa53a0cfa8d1b94c9e95fd7
Author:  <jgarzik@pretzel.yyz.us>
Date:   Wed May 25 22:11:14 2005 -0400

    Automatic merge of /spare/repo/netdev-2.6 branch veth

commit 8a75e7d644b373f86c8c2316392cb7374fc4e063
Author:  <jgarzik@pretzel.yyz.us>
Date:   Wed May 25 22:11:06 2005 -0400

    Automatic merge of /spare/repo/netdev-2.6 branch qeth

commit f5a702b26a0cd6052f0bae2bc3f0548538d3909c
Author:  <jgarzik@pretzel.yyz.us>
Date:   Wed May 25 22:10:53 2005 -0400

    Automatic merge of /spare/repo/netdev-2.6 branch ns83820

commit 5ea6f2c33f0c8b126136dbf1776ffbc444772cd7
Author:  <jgarzik@pretzel.yyz.us>
Date:   Wed May 25 22:10:38 2005 -0400

    Automatic merge of /spare/repo/netdev-2.6 branch natsemi

commit acb969560d5b42500697a8bcd1667ac824928383
Author:  <jgarzik@pretzel.yyz.us>
Date:   Wed May 25 22:10:25 2005 -0400

    Automatic merge of /spare/repo/netdev-2.6 branch forcedeth

commit ee03a68c108cce4af3b4988cb1204e84d81f1243
Author:  <jgarzik@pretzel.yyz.us>
Date:   Wed May 25 22:09:52 2005 -0400

    Automatic merge of /spare/repo/netdev-2.6 branch airo

commit 0c2fc10901e1b516526c92849ccd03327f119dbe
Author:  <jgarzik@pretzel.yyz.us>
Date:   Wed May 25 22:07:51 2005 -0400

    Automatic merge of /spare/repo/netdev-2.6 branch atmel

commit bef9c558841604116704e10b3d9ff3dbf4939423
Author: Linus Torvalds <torvalds@ppc970.osdl.org>
Date:   Wed May 25 18:01:26 2005 -0700

    Merge of rsync://rsync.kernel.org/pub/scm/linux/kernel/git/davem/sparc-2.6

commit 3db602bdcd52d8b7523cfb4fb705cea84dbe1617
Author: Linus Torvalds <torvalds@ppc970.osdl.org>
Date:   Wed May 25 17:56:57 2005 -0700

    Merge of 'new-ids' branch from
    
    	rsync://rsync.kernel.org/pub/scm/linux/kernel/git/jgarzik/libata-dev

commit 4c3a53d4108367f639e5e0fe9366dfd7679c5514
Author: Francisco Javier <ffelix@sshinf.com>
Date:   Wed May 25 19:29:37 2005 -0400

    [PATCH] sata_promise: add PCI ID for FastTrak TX2200 2-ports

commit 525a099771d348a25d12ef9c47aa8680c7317e35
Author: NAKAMURA Kenta <kenta@c.csce.kyushu-u.ac.jp>
Date:   Wed May 25 19:28:38 2005 -0400

    [PATCH] sata_sil: new ID 1002:437A for ATI IXP400

commit d20c507f28dbee33086e8212b98f9ddc5372cd81
Author: Colin Leroy <colin@colino.net>
Date:   Wed May 25 12:31:35 2005 -0700

    [PATCH] therm_adt746x: show correct sensor locations
    
    This patch shows the correct locations of the heat sensors present in iBook
    and PowerBooks G4, instead of displaying them as being on CPU and GPU
    (which is not always the case).
    
    Signed-off-by: Colin Leroy <colin@colino.net>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit a8bacec09352b86bd389cc93a20008577fa14764
Author: Colin Leroy <colin@colino.net>
Date:   Wed May 25 12:31:34 2005 -0700

    [PATCH] Make sure therm_adt746x only handles known hardware
    
    This patch limits therm_adt746x to currently existing fan controllers in
    Apple laptops.  It may avoid problems with future hardware.
    
    Signed-off-by: Colin Leroy <colin@colino.net>
    Cc: Benjamin Herrenschmidt <benh@kernel.crashing.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 3bf4fb820d7382318d178bd765c20028415466ab
Author: Roland Dreier <roland@topspin.com>
Date:   Wed May 25 12:31:31 2005 -0700

    [PATCH] IB: fix endianness of path record MTU field
    
    Make MTU field in SA PathRecord and MCMemberRecord a u8 rather than an enum
    to avoid complications with endianness.
    
    Signed-off-by: Roland Dreier <roland@topspin.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 561e148ea972a6e8d2c8f7aecc658b3a64f7a6de
Author: Roland Dreier <roland@topspin.com>
Date:   Wed May 25 12:31:30 2005 -0700

    [PATCH] IB: fix potential ib_umad leak
    
    Free all unclaimed MAD receive buffers when userspace closes our file so we
    don't leak memory.
    
    Signed-off-by: Roland Dreier <roland@topspin.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit e4f50f003dc568f6fc3904d451c562007bd09640
Author: Roland Dreier <roland@topspin.com>
Date:   Wed May 25 12:31:29 2005 -0700

    [PATCH] IB: allow NULL sa_query callbacks
    
    Check if a client passes a NULL callback into an SA query, and if so, never
    call back.  This fixes an oops if someone unloads ib_ipoib and ib_sa in
    rapid succession.  ib_ipoib does an MCMember delete with a NULL callback
    and 0 timeout on unload, which is usually fine since the delete completes
    successfully.  However, if ib_sa is unloaded immediately afterwards, the
    delete will be canceled and ib_sa will try to call the (now already
    unloaded) ib_ipoib module back with the cancel completion, which triggers
    the oops.
    
    Signed-off-by: Roland Dreier <roland@topspin.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 4f60fdf613536402e3313c5019b3ae6060b2ae4a
Author: Alexander Nyberg <alexn@telia.com>
Date:   Wed May 25 12:31:28 2005 -0700

    [PATCH] x86_64: CONFIG_BUG=n fixes
    
    Fixes some !CONFIG_BUG warnings:
    include/asm/mmu_context.h: I funktion `switch_mm':
    include/asm/mmu_context.h:57: varning: implicit declaration of function `out_of_line_bug'
    
    Signed-off-by: Alexander Nyberg <alexn@telia.com>
    Cc: Andi Kleen <ak@muc.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit dca79a046b93a81496bb30ca01177fb17f37ab72
Author: Neil Horman <nhorman@redhat.com>
Date:   Wed May 25 12:31:27 2005 -0700

    [PATCH] ipmi build fix
    
    It looks like the recent IPMI patches had some -mm-onlyisms.
    
    Signed-off-by: Neil Horman <nhorman@redhat.com>
    Cc: Corey Minyard <minyard@acm.org>
    Cc: Greg KH <greg@kroah.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 5daf05fbf73fc199e7a93a818e504856d07c5586
Author: Gerd Knorr <kraxel@suse.de>
Date:   Wed May 25 12:31:26 2005 -0700

    [PATCH] v4l: bttv i2c oops fix
    
    Don't try to access the i2c bus if the register wasn't successful.
    
    Signed-off-by: Gerd Knorr <kraxel@suse.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 4b463f785837f73bdd88ae3821bb7b69599010c9
Author: David S. Miller <davem@sunset.davemloft.net>
Date:   Wed May 25 14:58:04 2005 -0700

    Merge of /home/davem/src/GIT/linux-2.6/.git/

commit 1b981021e88c8c28dc6a22cb1a327d8dc9296473
Author: Linus Torvalds <torvalds@ppc970.osdl.org>
Date:   Wed May 25 14:01:50 2005 -0700

    Merge of 'for-linus' branch from
    
    	rsync://rsync.kernel.org/pub/scm/linux/kernel/git/jgarzik/netdev-2.6

commit f6f3a488e56783836a0b6ca9188719a1229f505c
Author:  <jgarzik@pretzel.yyz.us>
Date:   Wed May 25 13:57:36 2005 -0400

    Automatic merge of /spare/repo/netdev-2.6 branch amd8111

commit a58eae6480f354595c3954534e1ab591dc3ef1bf
Author:  <jgarzik@pretzel.yyz.us>
Date:   Wed May 25 13:57:25 2005 -0400

    Automatic merge of /spare/repo/netdev-2.6 branch pcnet32

commit 09e62666d8a6312426f96bf483cdb003bde556fe
Author:  <jgarzik@pretzel.yyz.us>
Date:   Wed May 25 13:57:15 2005 -0400

    Automatic merge of /spare/repo/netdev-2.6 branch ixgb

commit 34812c9e188b47b1d6c9fff8ba530e6f2365ebc4
Author:  <jgarzik@pretzel.yyz.us>
Date:   Wed May 25 13:57:03 2005 -0400

    Automatic merge of /spare/repo/netdev-2.6 branch e1000

commit d6d78f63cea62851806bf6ac40c6f53349de442b
Author:  <jgarzik@pretzel.yyz.us>
Date:   Wed May 25 13:56:55 2005 -0400

    Automatic merge of /spare/repo/netdev-2.6 branch e100

commit a83d5cf7a1d1dd22f3a8162b728a7e895192dda8
Author:  <jgarzik@pretzel.yyz.us>
Date:   Wed May 25 13:56:22 2005 -0400

    Merge of /spare/repo/netdev-2.6 branch misc-fixes

commit 384f1fcd2db8bc5a15f20f10793d8e1c82acd6c5
Author: Jens Axboe <axboe@suse.de>
Date:   Wed May 25 17:00:15 2005 +0200

    [PATCH] relax ide-cd dma restrictions
    
    This has been sitting for a while, and is causing lots of grief for
    people burning CDs.  It relaxes the dma restriction for ide-cd,
    requiring only the length to be 32-byte aligned, address should be fine
    at normal double word alignment.
    
    Signed-off-by: Jens Axboe <axboe@suse.de>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 0e15850200437c60b969025500e466383ec51ed8
Author: David Woodhouse <dwmw2@infradead.org>
Date:   Wed May 25 09:49:13 2005 +0100

    [PATCH] Speedtouch resync after lost signal.
    
    There's a bigger Speedtouch update coming your way after 2.6.12 but in
    the meantime, let's at least make it automatically resync if the DSL
    signal is lost.
    
    Signed-off-by: David Woodhouse <dwmw2@infradead.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit d0e8e29100c9866878d43bbb40ca17e8fe429851
Author: Stephen Rothwell <sfr@canb.auug.org.au>
Date:   Wed May 25 16:29:26 2005 +1000

    [PATCH] ppc64 iSeries: fix boot time setting
    
    For quite a while, there has existed a hypervisor bug on legacy iSeries
    which means that we do not get the boot time set in the kernel.  This
    patch works around that bug.  This was most noticable when the root
    partition needed to be checked at every boot as the kernel thought it
    was some time in 1905 until user mode reset the time correctly.
    
    Signed-off-by: Stephen Rothwell <sfr@canb.auug.org.au>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 8f80e5c911465743ccd3a328f992c7d8aaebf1e8
Author: Stephen Rothwell <sfr@canb.auug.org.au>
Date:   Wed May 25 13:41:26 2005 +1000

    [PATCH] ppc64: fix initialisation of gettimeofday calculations
    
    On PPC64, we keep track of when we need to update jiffies (and the
    variables used to calculate the time of day) based on the time base.
    
    If the time base frequence is sufficiently high compared to the
    processor clock frequency, then it is possible for the time of day
    variables to be corrupted at the time of the first decrementer interrupt
    we take.  This became obvious on a legacy iSeries where the time base
    frequency is the same as the processor clock.
    
    This one line patch fixes the initialisation so that the time of day
    variables and the indicator we use to tell when updates are due are
    better synchronised.
    
    Signed-off-by:  Stephen Rothwell <sfr@canb.auug.org.au>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 2a24ab628aa7b190be32f63dfb6d96f3fb61580a
Author: Linus Torvalds <torvalds@ppc970.osdl.org>
Date:   Tue May 24 20:31:20 2005 -0700

    Linux 2.6.12-rc5

commit d981289627a7e2d8ef62dfcaa11fb60da68f30c6
Author: Andrew Morton <akpm@osdl.org>
Date:   Tue May 24 19:31:10 2005 -0700

    [PATCH] aic7xxx_osm build fix
    
    Fix a c99ism.
    
    Cc: James Bottomley <James.Bottomley@steeleye.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 558ac33e094f3a47c74a3a66b19cd3616f183184
Author: Andrew Morton <akpm@osdl.org>
Date:   Tue May 24 19:31:10 2005 -0700

    [PATCH] saa6752hs build fix
    
    For older gcc's.
    
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit cafdd8ba08935d9b161bb781851dc4c0e6f70427
Author: William Lee Irwin III <wli@holomorphy.com>
Date:   Tue May 24 19:31:09 2005 -0700

    [PATCH] try_to_unmap_cluster() passes out-of-bounds pte to pte_unmap()
    
    try_to_unmap_cluster() does:
            for (pte = pte_offset_map(pmd, address);
                            address < end; pte++, address += PAGE_SIZE) {
    		...
    	}
    
    	pte_unmap(pte);
    
    It may take a little staring to notice, but pte can actually fall off the
    end of the pte page in this iteration, which makes life difficult for
    kmap_atomic() and the users not expecting it to BUG().  Of course, we're
    somewhat lucky in that arithmetic elsewhere in the function guarantees that
    at least one iteration is made, lest this force larger rearrangements to be
    made.  This issue and patch also apply to non-mm mainline and with trivial
    adjustments, at least two related kernels.
    
    Discovered during internal testing at Oracle.
    
    Signed-off-by: William Irwin <wli@holomorphy.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit c33880aaddbbab1ccf36f4457ed1090621f2e39a
Author: Kirill Korotaev <dev@sw.ru>
Date:   Tue May 24 19:29:47 2005 -0700

    [PATCH] sigkill priority fix
    
    If SIGKILL does not have priority, we cannot instantly kill task before it
    makes some unexpected job.  It can be critical, but we were unable to
    reproduce this easily until Heiko Carstens <Heiko.Carstens@de.ibm.com>
    reported this problem on LKML.
    
    Signed-Off-By: Kirill Korotaev <dev@sw.ru>
    Signed-Off-By: Alexey Kuznetsov <kuznet@ms2.inr.ac.ru>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 6431e6a28e8df423e1ebcda065e9ff086198d2c6
Author: Dominik Hackl <dominik@hackl.dhs.org>
Date:   Tue May 24 19:29:46 2005 -0700

    [PATCH] voyager_smp.c static inline fix
    
    This patch fixes a compile bug by moving a static inline function to the
    right place.  The body of a static inline function has to be declared
    before the use of this function.
    
    Signed-off-by: Dominik Hackl <dominik@hackl.dhs.org>
    Cc: James Bottomley <James.Bottomley@steeleye.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 6df16d0c35b9c0d3627f30c106e6142d3d12662b
Author: David S. Miller <davem@sunset.davemloft.net>
Date:   Tue May 24 18:08:07 2005 -0700

    Merge of davem@nuts.davemloft.net:/disk1/GIT/sparc-2.6/.git/

commit 7e43c84e3e5423ae72ae31e4cd7bbccfd1605194
Author: blaisorblade@yahoo.it <blaisorblade@yahoo.it>
Date:   Wed May 25 01:31:42 2005 +0200

    [PATCH] Cleanup DEFINE_WAIT
    
    Use LIST_HEAD_INIT rather than doing it by hand in DEFINE_WAIT.
    
    Signed-off-by: Paolo 'Blaisorblade' Giarrusso <blaisorblade@yahoo.it>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 9092f46b5aed4515d9a427d5dab3be1584851f07
Author: John W. Linville <linville@tuxdriver.com>
Date:   Wed May 18 13:41:33 2005 -0400

    [PATCH] tulip: add return to ULI526X clause in tulip_mdio_write
    
    The 'if' clause for ULI526X in tulip_mdio_write allows for
    spin_unlock_irqrestore to be called twice for tp->mii_lock.  I believe
    this is caused by the unintentional omission of a return at the end
    of that clause.  This patch adds that return.
    
    Signed-off-by: John W. Linville <linville@tuxdriver.com>

commit 187a1a94d629621d1471b42308e63573b1150773
Author: Kay Sievers <kay.sievers@vrfy.org>
Date:   Mon May 23 15:50:26 2005 -0700

    [PATCH] driver core: restore event order for device_add()
    
    As a result of the split of the kobject-registration and the
    corresponding hotplug event, the order of events for device_add() has
    changed. This restores the old order, cause it confused some userspace
    applications.
    
    Signed-off-by: Kay Sievers <kay.sievers@vrfy.org>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 816242da3735957bee99aeba40aa60c4f120a101
Author: David S. Miller <davem@davemloft.net>
Date:   Mon May 23 15:52:08 2005 -0700

    [SPARC64]: Add boot option to force UltraSPARC-III P-Cache on.
    
    Older UltraSPARC-III chips have a P-Cache bug that makes us disable it
    by default at boot time.
    
    However, this does hurt performance substantially, particularly with
    memcpy(), and the bug is _incredibly_ obscure.  I have never seen it
    triggered in practice, ever.
    
    So provide a "-P" boot option that forces the P-Cache on.  It taints
    the kernel, so if it does trigger and cause some data corruption or
    OOPS, we will find out in the logs that this option was on when it
    happened.
    
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit ab3fc403633c38aef5ef48844f8e5dbfee7c34f8
Author: Linus Torvalds <torvalds@ppc970.osdl.org>
Date:   Mon May 23 14:57:14 2005 -0700

    Merge of rsync://rsync.kernel.org/pub/scm/linux/kernel/git/davem/net-2.6.git/

commit d1faeaeb95a05275cf0c5b51b88f2fa833434625
Author: David S. Miller <davem@davemloft.net>
Date:   Mon May 23 14:00:44 2005 -0700

    [TG3]: Update driver version.
    
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit ded7340d9d9142807a1ef94ab9c51d13ab76a1c9
Author: David S. Miller <davem@davemloft.net>
Date:   Mon May 23 13:59:47 2005 -0700

    [TG3]: Increase TEST_BUFFER_SIZE to 8K.
    
    This makes the DMA bug workaround test more likely
    to find the problem on some systems.
    
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 413f5431a5a27e44c6610de640e507e1e3c885f4
Author: David S. Miller <davem@davemloft.net>
Date:   Mon May 23 13:13:15 2005 -0700

    [TG3]: Update driver version and reldate.
    
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 180e42503300629692b513daeb55a6bb0b51500c
Author: Herbert Xu <herbert@gondor.apana.org.au>
Date:   Mon May 23 13:11:07 2005 -0700

    [IPV6]: Fix xfrm tunnel oops with large packets
    
    Signed-off-by: Herbert Xu <herbert@gondor.apana.org.au>
    Acked-by: Hideaki YOSHIFUJI <yoshfuji@linux-ipv6.org>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 205902ecc7bcb2a007ed27bb3518e8f70e5d113e
Author: Alexey Dobriyan <adobriyan@gmail.com>
Date:   Mon May 23 13:09:19 2005 -0700

    [NET]: netdevice.h: be'ify packet_type
    
    Everybody does
    
    	struct packet_type foo_packet_type = {
    		.type = __constant_htons(ETH_P_FOO);
    	};
    
    5 introduced warnings will be properly fixed later.
    
    Signed-off-by: Alexey Dobriyan <adobriyan@gmail.com>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit d8659255c599ba497bcfb8b4abc187d9e0951d99
Author: Xose Vazquez Perez <xose.vazquez@gmail.com>
Date:   Mon May 23 12:54:51 2005 -0700

    [TG3]: Add 5752M device ID.
    
    Add 0x1601 as 5752M, it's a 5752 but for mobile PCs.
    Stolen from Broadcom bcm5700-8.1.55 driver.
    
    Someone forgot to add it to tg3 ;-)
    
    Signed-off-by: David S. Miller <davem@davemloft.net>
    

commit 82d1542c1df6b3a0105843deddebeff03068d1dc
Author: Jon Mason <jdmason@us.ibm.com>
Date:   Mon May 23 12:53:14 2005 -0700

    [NET]: include/linux/if_tr.h clean-up
    
    I removed the ethernet definitions (which were commented out) and
    cleaned up the tabs.
    
    Signed-off-by: Jon Mason <jdmason@us.ibm.com>

commit deaf2622bdc74270381873c7936c91500c683853
Author: David S. Miller <davem@davemloft.net>
Date:   Mon May 23 12:45:26 2005 -0700

    [NET]: Kill stray reference to sock->passcred.
    
    That struct member was deleted, but a comment
    was not updated to reflect this.
    

commit 15333038d577b0c0255c0f14a38d9e6895937453
Author: Herbert Xu <herbert@gondor.apana.org.au>
Date:   Mon May 23 12:36:25 2005 -0700

    [CRYPTO]: Only reschedule if !in_atomic()
    
    The netlink gfp_any() problem made me double-check the uses of in_softirq()
    in crypto/*.  It seems to me that we should be checking in_atomic() instead
    of in_softirq() in crypto_yield.  Otherwise people calling the crypto ops
    with spin locks held or preemption disabled will get burnt, right?
    
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 314324121f9b94b2ca657a494cf2b9cb0e4a28cc
Author: David S. Miller <davem@davemloft.net>
Date:   Mon May 23 12:03:06 2005 -0700

    [TCP]: Fix stretch ACK performance killer when doing ucopy.
    
    When we are doing ucopy, we try to defer the ACK generation to
    cleanup_rbuf().  This works most of the time very well, but if the
    ucopy prequeue is large, this ACKing behavior kills performance.
    
    With TSO, it is possible to fill the prequeue so large that by the
    time the ACK is sent and gets back to the sender, most of the window
    has emptied of data and performance suffers significantly.
    
    This behavior does help in some cases, so we should think about
    re-enabling this trick in the future, using some kind of limit in
    order to avoid the bug case.
    
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit f10d20c1f192aa90fc935207f22da32462e793ee
Author: Benjamin Herrenschmidt <benh@kernel.crashing.org>
Date:   Mon May 23 16:54:14 2005 +1000

    [PATCH] ppc64: Fix g5 hw timebase sync
    
    The hardware sync of the timebase on SMP G5s uses a black magic
    incantation to the i2c clock chip that was inspired from what Darwin
    does.
    
    However, this was an earlier version of Darwin that was ...  buggy !
    heh.  This causes the latest models to break though when starting SMP,
    so it's worth fixing.
    
    Here's a new version of the incantation based on careful transcription
    of the said incantations as found in the latest version of apple's
    temple.
    
    Signed-off-by: Benjamin Herrenschmidt <benh@kernel.crashing.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit e16fa6b9d2ad9467cf5bdf517e6b6f45e5867ad6
Author: Kumar Gala <galak@freescale.com>
Date:   Mon May 23 12:29:56 2005 -0500

    [PATCH] ppc32: Fix an off-by-one error in ipic_init
    
    There is an off-by-one error in the IPIC code that configures the
    external interrupts (Edge or Level Sensitive).
    
    Signed-off-by: Randy Vinson <rvinson@mvista.com>
    Signed-off-by: Kumar Gala <kumar.gala@freescale.com>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 1263cc67c09bc7f913a6877f3ba0427f0b76617e
Author: Benjamin Herrenschmidt <benh@kernel.crashing.org>
Date:   Mon May 23 10:03:52 2005 +1000

    [PATCH] ppc64: Fix booting on latest G5 models
    
    The latest speedbumped Apple G5 models have a "bug" in the Open Firmware
    device tree that lacks the proper interrupt routing information for the
    northbridge i2c controller.  Apple's driver silently falls back into a
    sub-optimal "polled" mode (heh, maybe they didn't even notice the bug
    because of that :), our driver didn't properly check and crashes :(
    
    This patch fixes our driver to not crash, and adds code to the
    prom_init() OF trampoline code that detects the "bug" and adds the
    missing information back for this chipset revision.  This fixes booting
    and thermal control on these models.
    
    Signed-off-by: Benjamin Herrenschmidt <benh@kernel.crashing.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit b5c44c2147a447f77e07fecdb087ae288e1f4e40
Author: Suparna Bhattacharya <suparna@in.ibm.com>
Date:   Sat May 21 16:33:36 2005 -0700

    [PATCH] fix for __generic_file_aio_read() to return 0 on EOF
    
    I came across the following problem while running ltp-aiodio testcases from
    ltp-full-20050405 on linux-2.6.12-rc3-mm3.  I tried running the tests with
    EXT3 as well as JFS filesystems.
    
    One or two fsx-linux testcases were hung after some time.  These testcases
    were hanging at wait_for_all_aios().
    
    Debugging shows that there were some iocbs which were not getting completed
    eventhough the last retry for those returned -EIOCBQUEUED.  Also all such
    pending iocbs represented READ operation.
    
    Further debugging revealed that all such iocbs hit EOF in the DIO layer.
    To be more precise, the "pos" from which they were trying to read was
    greater than the "size" of the file.  So the generic_file_direct_IO
    returned 0.
    
    This happens rarely as there is already a check in
    __generic_file_aio_read(), for whether "pos" < "size" before calling direct
    IO routine.
    
    >size = i_size_read(inode);
    >if (pos < size) {
    >	  retval = generic_file_direct_IO(READ, iocb,
    >                               iov, pos, nr_segs);
    
    But for READ, we are taking the inode->i_sem only in the DIO layer.  So it
    is possible that some other process can change the size of the file before
    we take the i_sem.  In such a case ( when "pos" > "size"), the
    __generic_file_aio_read() would return -EIOCBQUEUED even though there were
    no I/O requests submitted by the DIO layer.  This would cause the AIO layer
    to expect aio_complete() for THE iocb, which doesnot happen.  And thus the
    test hangs forever, waiting for an I/O completion, where there are no
    requests submitted at all.
    
    The following patch makes __generic_file_aio_read() return 0 (instead of
    returning -EIOCBQUEUED), on getting 0 from generic_file_direct_IO(), so
    that the AIO layer does the aio_complete().
    
    Testing:
    
    I have tested the patch on a SMP machine(with 2 Pentium 4 (HT)) running
    linux-2.6.12-rc3-mm3.  I ran the ltp-aiodio testcases and none of the
    fsx-linux tests hung.  Also the aio-stress tests ran without any problem.
    
    Signed-off-by: Suzuki K P <suzuki@in.ibm.com>
    Signed-off-by: Suparna Bhattacharya <suparna@in.ibm.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit f359b74c80bc76c1f6c2cb8f2837882f2335ba0c
Author: Vladimir Saveliev <vs@namesys.com>
Date:   Sat May 21 16:33:34 2005 -0700

    [PATCH] reiserfs: max_key fix
    
    This patch fixes a bug introduced by Al Viro's patch: [patch 136/174]
    reiserfs endianness: clone struct reiserfs_key
    
    The problem is MAX_KEY and MAX_IN_CORE_KEY defined in this patch do not
    look equal from reiserfs comp_key's point of view.  This caused reiserfs'
    sanity check to complain.
    
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 1808caffaf448f0ad42ba04b25825fc170cf8e44
Author: Linus Torvalds <torvalds@ppc970.osdl.org>
Date:   Sat May 21 15:27:09 2005 -0700

    Merge of master.kernel.org:/home/rmk/linux-2.6-mmc.git

commit 3d15e4a32dfa3da45751356e5f47aa04b97370e0
Author: Linus Torvalds <torvalds@ppc970.osdl.org>
Date:   Sat May 21 15:04:27 2005 -0700

    Merge of master.kernel.org:/home/rmk/linux-2.6-serial.git

commit 10f02d1c59e55f529140dda3a92f0099d748451c
Author: Samuel Thibault <samuel.thibault@labri.fr>
Date:   Sat May 21 17:50:15 2005 +0200

    [PATCH] spin_unlock_bh() and preempt_check_resched()
    
    In _spin_unlock_bh(lock):
    	do { \
    		_raw_spin_unlock(lock); \
    		preempt_enable(); \
    		local_bh_enable(); \
    		__release(lock); \
    	} while (0)
    
    there is no reason for using preempt_enable() instead of a simple
    preempt_enable_no_resched()
    
    Since we know bottom halves are disabled, preempt_schedule() will always
    return at once (preempt_count!=0), and hence preempt_check_resched() is
    useless here...
    
    This fixes it by using "preempt_enable_no_resched()" instead of the
    "preempt_enable()", and thus avoids the useless preempt_check_resched()
    just before re-enabling bottom halves.
    
    Signed-off-by: Samuel Thibault <samuel.thibault@ens-lyon.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 857dde2e79082d2954ede7f10783addaae956777
Author: David Woodhouse <dwmw2@org.rmk.(none)>
Date:   Sat May 21 15:52:23 2005 +0100

    When we detect that a 16550 was in fact part of a NatSemi SuperIO chip
    with high-speed mode enabled, we switch it to high-speed mode so that
    baud_base becomes 921600. However, we also need to multiply the baud
    divisor by 8 at the same time, in case it's already in use as a console.
    
    Signed-off-by: David Woodhouse
    Acked-by: Tom Rini
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit 912490db699d83cb3d03570b63df7448677a3f56
Author: Pierre Ossman <drzeus-list@cx.rmk.(none)>
Date:   Sat May 21 10:27:02 2005 +0100

    [PATCH] MMC: Proper MMC command classes support
    
    Defines for the different command classes as defined in the MMC and SD
    specifications.
    
    Removes the check for high command classes and instead checks that the
    command classes needed are present.
    Previous solution killed forward compatibility at no apparent gain.
    
    Signed-of-by: Pierre Ossman

commit 9636273dae265b9354b861b373cd43cd76a6d0fe
Author: Linus Torvalds <torvalds@ppc970.osdl.org>
Date:   Fri May 20 17:21:03 2005 -0700

    Automatic merge of rsync://www.parisc-linux.org/~jejb/git/scsi-for-linus-2.6.git

commit 2df9fa36643f03b0462b170515c1e221c3709fa9
Author: Andi Kleen <ak@suse.de>
Date:   Fri May 20 14:27:59 2005 -0700

    [PATCH] x86_64: i386/x86-64: Export cpu_core_map
    
    Needed for the powernow k8 driver for dual core support.
    
    Signed-off-by: Andi Kleen <ak@suse.de>
    Cc: <mark.langsdorf@amd.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 14d98cad82b78956957e95567b8b5fb38ec5859f
Author: Andi Kleen <ak@suse.de>
Date:   Fri May 20 14:27:59 2005 -0700

    [PATCH] x86_64: Add option to disable timer check
    
    This works around the too fast timer seen on some ATI boards.
    
    I don't feel confident enough about it yet to enable it by default, but give
    users the option.
    
    Patch and debugging from Christopher Allen Wing <wingc@engin.umich.edu>, with
    minor tweaks (renamed the option and documented it)
    
    Signed-off-by: Andi Kleen <ak@suse.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 607a16858397829806c5a4db999ce6daf327f98c
Author: Andi Kleen <ak@suse.de>
Date:   Fri May 20 14:27:58 2005 -0700

    [PATCH] x86_64: Fix 32bit system call restart
    
    The test case at
    http://cvs.sourceforge.net/viewcvs.py/posixtest/posixtestsuite/conforman
    ce/interfaces/clock_nanosleep/1-5.c fails if it runs as a 32bit process on
    x86_86 machines.
    
    The root cause is the sub 32bit process fails to restart the syscall after it
    is interrupted by a signal.
    
    The syscall number of sys_restart_syscall in table sys_call_table is
    __NR_restart_syscall (219) while it's __NR_ia32_restart_syscall
    (0) in ia32_sys_call_table. When regs->rax==(unsigned
    long)-ERESTART_RESTARTBLOCK, function do_signal doesn't distinguish if
    the process is 64bit or 32bit, and always sets restart syscall number
    as __NR_restart_syscall (219).
    
    Signed-off-by: Zhang Yanmin <yanmin.zhang@intel.com>
    Signed-off-by: Andi Kleen <ak@suse.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 4057923614e2868a865aa6c6e3bc53542c818d4d
Author: Andi Kleen <ak@suse.de>
Date:   Fri May 20 14:27:57 2005 -0700

    [PATCH] i386: Fix race in iounmap
    
    We need to hold the vmlist_lock while doing change_page_attr, otherwise we
    could reset someone else's mapping.
    
    Requires previous patch to add __remove_vm_area
    
    Signed-off-by: Andi Kleen <ak@suse.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 7856dfeb23c16ef3d8dac8871b4d5b93c70b59b9
Author: Andi Kleen <ak@suse.de>
Date:   Fri May 20 14:27:57 2005 -0700

    [PATCH] x86_64: Fixed guard page handling again in iounmap
    
    Caused oopses again.  Also fix potential mismatch in checking if
    change_page_attr was needed.
    
    To do it without races I needed to change mm/vmalloc.c to export a
    __remove_vm_area that does not take vmlist lock.
    
    Noticed by Terence Ripperda and based on a patch of his.
    
    Signed-off-by: Andi Kleen <ak@suse.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit c4d1fcf3a2ea89b6d6221fa8b4588c77aff50995
Author: Andi Kleen <ak@suse.de>
Date:   Fri May 20 14:27:56 2005 -0700

    [PATCH] x86_64: Don't allow accesses below register frame in ptrace
    
    There was a "off by one quad word" error in there.  I don't think it is
    exploitable because it will only store into a unused area, but better to plug
    it.
    
    Found and fixed by John Blackwood
    
    Signed-off-by: Andi Kleen <ak@suse.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit b41e29398a873945d02e0009ce7e57608fdb4042
Author: Andi Kleen <ak@suse.de>
Date:   Fri May 20 14:27:55 2005 -0700

    [PATCH] x86_64: 386/x86-64 Further AMD dual core fixes
    
    - Remove duplicated ifdef
    - Make core_id match what Intel uses
    - Initialize phys_proc_id correctly for non DC case
    - Handle non power of two core numbers.
    
    Fixes for both i386 and x86-64
    
    Signed-off-by: Andi Kleen <ak@suse.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit b39c4fab259b216148e705344a892c96efe1946d
Author: Paul Jackson <pj@sgi.com>
Date:   Fri May 20 13:59:15 2005 -0700

    [PATCH] cpusets+hotplug+preepmt broken
    
    This patch removes the entwining of cpusets and hotplug code in the "No
    more Mr.  Nice Guy" case of sched.c move_task_off_dead_cpu().
    
    Since the hotplug code is holding a spinlock at this point, we cannot take
    the cpuset semaphore, cpuset_sem, as would seem to be required either to
    update the tasks cpuset, or to scan up the nested cpuset chain, looking for
    the nearest cpuset ancestor that still has some CPUs that are online.  So
    we just punt and blast the tasks cpus_allowed with all bits allowed.
    
    This reverts these lines of code to what they were before the cpuset patch.
     And it updates the cpuset Doc file, to match.
    
    The one known alternative to this that seems to work came from Dinakar
    Guniguntala, and required the hotplug code to take the cpuset_sem semaphore
    much earlier in its processing.  So far as we know, the increased locking
    entanglement between cpusets and hot plug of this alternative approach is
    not worth doing in this case.
    
    Signed-off-by: Paul Jackson <pj@sgi.com>
    Acked-by: Nathan Lynch <ntl@pobox.com>
    Acked-by: Dinakar Guniguntala <dino@in.ibm.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit b2665f92ae67a2d086537979d317a6f3a5697c63
Author: Matt Porter <mporter@kernel.crashing.org>
Date:   Fri May 20 13:59:14 2005 -0700

    [PATCH] ppc32: fix CONFIG_TASK_SIZE handling on 44x
    
    This patch fixed CONFIG_TASK_SIZE handling on 44x.  Currently head_44x.S
    hardcodes 0x80000000, which breaks if user chooses to change TASK_SIZE
    (e.g.  for 3G user-space).  Tested on Ocotea in 3G/1G configuration.
    
    Signed-off-by: Eugene Surovegin <ebs@ebshome.net>
    Signed-off-by: Matt Porter <mporter@kernel.crashing.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 7f8cd80fb261177244c1479cfcad1387dbf3cd4b
Author: Kumar Gala <galak@freescale.com>
Date:   Fri May 20 13:59:13 2005 -0700

    [PATCH] ppc32: Fix platform device initialization of 8250 serial ports
    
    Initialization of 8250 serial ports that are platform devices require that
    at empty entry exists in the array of plat_serial8250_port.  With out an
    empty entry we can get some pretty random behavior.
    
    Signed-off-by: Kumar Gala <kumar.gala@freescale.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 84ddaa8c86fc12ee1c3509be5ff3464821535c17
Author: Jeff Dike <jdike@addtoit.com>
Date:   Fri May 20 13:59:12 2005 -0700

    [PATCH] uml: Change printf to printk in console driver
    
    From: Al Viro - we have error messages with KERN_ERR in them, so they
    should be printk-ed rather than printf-ed.
    
    Signed-off-by: Jeff Dike <jdike@addtoit.com>
    Cc: <viro@parcelfarce.linux.theplanet.co.uk>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 12f49643bc44c428919b210148a930496827dd26
Author: Jeff Dike <jdike@addtoit.com>
Date:   Fri May 20 13:59:12 2005 -0700

    [PATCH] uml: fixrange_init 3-level page table support
    
    From: Al Viro - add three-level page table support to fixrange_init.
    
    Signed-off-by: Jeff Dike <jdike@addtoit.com>
    Cc: <viro@parcelfarce.linux.theplanet.co.uk>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 7b9014c1da380384efe7752db38a0253a74d0238
Author: Jeff Dike <jdike@addtoit.com>
Date:   Fri May 20 13:59:11 2005 -0700

    [PATCH] uml: Remove ubd-mmap support
    
    Finally rip out the ubd-mmap code, which turned out to be broken by design.
    
    Signed-off-by: Jeff Dike <jdike@addtoit.com>
    Cc: <viro@parcelfarce.linux.theplanet.co.uk>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 9b67a3c4cd380968bffe8efb681470acda42b441
Author: Jeff Dike <jdike@addtoit.com>
Date:   Fri May 20 13:59:10 2005 -0700

    [PATCH] uml: initrd cleanup
    
    The serial UML OS-abstraction layer patch (um/kernel dir).
    
    This moves all systemcalls from initrd_user.c file under os-Linux dir and join
    initrd_user.c and initrd_kern.c files in new file initrd.c
    
    Signed-off-by: Gennady Sharapov <Gennady.V.Sharapov@intel.com>
    Signed-off-by: Jeff Dike <jdike@addtoit.com>
    Cc: <viro@parcelfarce.linux.theplanet.co.uk>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 41a9cf8ebe08ccdd5799c175f9758f14617c0b0a
Author: Jeff Dike <jdike@addtoit.com>
Date:   Fri May 20 13:59:10 2005 -0700

    [PATCH] uml: Export clear_user_*
    
    From: Oleg Drokin: This patch is needed to support kernel modules that want to
    use clear_user() (that is exported symbol on all other architectures).
    
    Signed-off-by: Jeff Dike <jdike@addtoit.com>
    Cc: <viro@parcelfarce.linux.theplanet.co.uk>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 7c00c31fc0f003363773121a0ac6f4e5b128e879
Author: Jeff Dike <jdike@addtoit.com>
Date:   Fri May 20 13:59:09 2005 -0700

    [PATCH] uml: multicast driver cleanup
    
    Byte-swapping of the port and IP address passed in to the multicast driver by
    the user used to happen in different places, which was a bug in itself.  The
    port also was swapped before being printk-ed, which led to a misleading
    message.  This patch moves the port swapping to the same place as the IP
    address swapping.  It also cleans up the error paths of mcast_open.
    
    Signed-off-by: Jeff Dike <jdike@addtoit.com>
    Cc: <viro@parcelfarce.linux.theplanet.co.uk>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 060e352236ece3325a684c72817fbacdac597574
Author: Jeff Dike <jdike@addtoit.com>
Date:   Fri May 20 13:59:08 2005 -0700

    [PATCH] uml: Delay loop cleanups
    
    This patch cleans up the delay implementations a bit, makes the loops
    unoptimizable, and exports __udelay and __const_udelay.
    
    Signed-off-by: Jeff Dike <jdike@addtoit.com>
    Cc: <viro@parcelfarce.linux.theplanet.co.uk>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 13479d52c7a61a18900d7f36730b7d3b43723d97
Author: Jeff Dike <jdike@addtoit.com>
Date:   Fri May 20 13:59:08 2005 -0700

    [PATCH] uml: Page fault fixes
    
    Any access to a PROT_NONE page should segfault the process.  A JVM seems to do
    this on purpose.  Also, Al noticed some bogus code, which is now deleted.
    
    Signed-off-by: Jeff Dike <jdike@addtoit.com>
    Cc: <viro@parcelfarce.linux.theplanet.co.uk>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit ba9950c820e556e39cd26581826b5581a64fb641
Author: Jeff Dike <jdike@addtoit.com>
Date:   Fri May 20 13:59:07 2005 -0700

    [PATCH] uml: small fixes left over from rc4
    
    Some changes that I sent in didn't make 2.6.12-rc4 for some reason.  This
    adds them back.  We have
    	an x86_64 definition of TOP_ADDR
    	a reimplementation of the x86_64 csum_partial_copy_from_user
    	some syntax fixes in arch/um/kernel/ptrace.c
    	removal of a CFLAGS definition in the x86_64 Makefile
    	some include changes in the x86_64 ptrace.c and user-offsets.h
    	a syntax fix in elf-x86_64.h
    Also moved an include in the i386 and x86_64 Makefiles to make the symlinks
    work, and some small fixes from Al Viro.
    
    Signed-off-by: Jeff Dike <jdike@addtoit.com>
    Cc: <viro@parcelfarce.linux.theplanet.co.uk>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 46f4e1b7d5fa3ddf2486bf69716c404147e38ebf
Author: Peter Osterlund <petero2@telia.com>
Date:   Fri May 20 13:59:06 2005 -0700

    [PATCH] packet driver permission checking fix
    
    If you tried to open a packet device first in read-only mode and then a
    second time in read-write mode, the second open succeeded even though the
    device was not correctly set up for writing.  If you then tried to write
    data to the device, the writes would fail with I/O errors.
    
    This patch prevents that problem by making the second open fail with
    -EBUSY.
    
    Signed-off-by: Peter Osterlund <petero2@telia.com>
    Cc: Al Viro <viro@parcelfarce.linux.theplanet.co.uk>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 2bf2c568c878b9c0bbacac5c3210a6bd81856d21
Author: James Bottomley <James.Bottomley@steeleye.com>
Date:   Thu May 19 21:30:13 2005 -0500

    [SCSI] aic7xxx: fix U160 mode
    
    The new period/dt setting routines don't get the coupling of these
    parameters correct.  This means that Domain Validation never gets DT
    set, and thus the drive gets restricted to U80.
    
    Fix this by restoring the couplings in the set routines.
    
    Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

commit fb3089dfb58bf07992252b42e77c6f35d45dff5e
Author: James Bottomley  <James.Bottomley@steeleye.com>
Date:   Tue May 17 21:09:52 2005 -0500

    [SCSI] aic7xxx: add back locking
    
    Tampering with the settings has to be done under the host lock ...
    slave_alloc isn't called under any lock, so this has to be done
    explicitly.
    
    Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

commit c7525233d2df39b95552f6f49c6b390a9c4d2e80
Author: James Bottomley  <James.Bottomley@steeleye.com>
Date:   Tue May 17 18:07:34 2005 -0500

    [SCSI] aic7xxx: make correct use of slave_alloc/destroy and remove the per device timer
    
    The allocation of all of our components should be done in slave alloc.
    Currently it's rather fancifully refcounted in the queuecommand
    callback.  This patch moves allocation and destroy to their correct
    places in slave_alloc/slave_destory.  Now we can guarantee that
    everywhere a device is requested, it's actually been allocated, so don't
    check for this anymore.
    
    Additionally, the per device busy timer was the only source of potential
    use after free.  It's been deleted because Linux does the correct thing
    with busy returns, so there's no need to implement a separate timer in
    the driver.
    
    Finally, implement code that forces all the device parameters to zero
    (i.e. async and narrow) in the slave alloc, inform the spi class of the
    bios recorded maximums and wait until slave configure before trying
    anything more adventurous.
    
    Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

commit 8e45ebcc661069bfb002c56dd942aedf43ba9239
Author: James Bottomley  <James.Bottomley@steeleye.com>
Date:   Tue May 17 00:06:08 2005 -0500

    [SCSI] aic7xxx: remove the completeq
    
    This should finish the spurious queue removal from aic7xxx (there are
    other queues that are probably unnecessary, but at least the major and
    obviously unnecessary ones are done with).
    
    Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

commit 38c29ce06d24691d6e6dd786175fcc54efd5995b
Author: James Bottomley  <James.Bottomley@steeleye.com>
Date:   Mon May 16 21:37:58 2005 -0500

    [SCSI] aic7xxx: remove the last vestiges of the runq
    
    This was rendered obsolete by the busyq removal; remove some of the last
    remnants of its presence.
    
    Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

commit 013791ee01754f83dbb4ccfd266381db74e120b5
Author: Christoph Hellwig  <hch@lst.de>
Date:   Mon May 16 18:52:39 2005 +0200

    [SCSI] aic7xxx: remove usage of obsolete typedefs
    
    Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

commit 7dfa0f2673c17334c5de75a449f7bc161c9bd2c0
Author: Christoph Hellwig  <hch@lst.de>
Date:   Mon May 16 18:54:12 2005 +0200

    [SCSI] remove dma_mask hacks
    
    pci_alloc_consistent is under 4G by default.  Also simplify the
    definition of bus_dmamap_t.
    
    Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

commit dedd831081052028f35aaf924ea3d6c55109074f
Author: Christoph Hellwig  <hch@lst.de>
Date:   Mon May 16 18:52:06 2005 +0200

    [SCSI] aic7xxx: remove Linux 2.4 ifdefs
    
    There's not much sense in sharing code anymore now that aic7xxx uses
    various transport class facilities.
    
    Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

commit c06716fe1cea97749668c83e8374b453fbd00823
Author: Christoph Hellwig  <hch@lst.de>
Date:   Mon May 16 18:51:13 2005 +0200

    [SCSI] aic7xxx: remove some DV leftovers
    
    Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

commit e4e360c325c90f7830baaa2a27cd7a1f2bdeb6b0
Author: James Bottomley  <James.Bottomley@steeleye.com>
Date:   Mon May 16 16:39:38 2005 -0500

    [SCSI] remove aic7xxx busyq
    
    The aic7xxx driver has two spurious queues in it's linux glue code: the
    busyq which queues incoming commands to the driver and the completeq
    which queues finished commands before sending them back to the mid-layer
    
    This patch just removes the busyq and makes the aic finally return the
    correct status to get the mid-layer to manage its queueing, so a command
    is either committed to the sequencer or returned to the midlayer for
    requeue.
    
    Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

commit fad01ef88d2a27303757924c1fc013b31fe9a76b
Author: James Bottomley  <James.Bottomley@steeleye.com>
Date:   Sun May 8 16:00:15 2005 -0500

    [SCSI] correct aic7xxx period setting routines
    
    This is similar to the previous sym2 problem.  For Domain Validation to
    work we can't allow any period setting to turn wide on if it was
    previously off.
    
    Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

commit 62a8612972eaea804e1e42c63ee403cd4e14cc35
Author: James Bottomley  <James.Bottomley@steeleye.com>
Date:   Fri May 6 18:05:20 2005 -0500

    [SCSI] implement parameter limits in the SPI transport class
    
    There's a basic need not to have parameters go under or over certain
    values when doing domain validation.  The basic ones are
    
    max_offset, max_width and min_period
    
    This patch makes the transport class take and enforce these three
    limits.  Currently they can be set by the user, although they could
    obviously be read from the HBA's on-board NVRAM area during
    slave_configure (if it has one).
    
    Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

commit 1c7878f024705594ac455e501ad51e475a400d5d
Author: Linus Torvalds <torvalds@ppc970.osdl.org>
Date:   Fri May 20 13:36:19 2005 -0700

    Remove some left-over empty files
    
    Hopefully the addition of -E to my applypatch script
    will mean that I won't have these kinds of leftovers
    in the future.

commit a228dfd5dc4b92288ea22d427b2bfc48ba5bb8b0
Author: David S. Miller <davem@davemloft.net>
Date:   Fri May 20 11:40:32 2005 -0700

    [SPARC64]: Fix bad performance side effect of strbuf timeout changes.
    
    The recent change to add a timeout to strbuf flushing had
    a negative performance impact.  The udelay()'s are too long,
    and they were done in the wrong order wrt. the register read
    checks.  Fix both, and things are happy again.
    
    There are more possible improvements in this area.  In fact,
    PCI streaming buffer flushing seems to be part of the bottleneck
    in network receive performance on my SunBlade1000 box.
    
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 37e0915b701281182cea9fc90e894d10addf134a
Author: Corey Minyard <minyard@acm.org>
Date:   Fri May 20 08:56:23 2005 +0200

    [PATCH] Add sysfs support for the IPMI device interface
    
    Add support for sysfs to the IPMI device interface.
    
    Clean-ups based on Dimitry Torokovs comment by Philipp Hahn.
    
    Signed-off-by: Corey Minyard <minyard@acm.org>
    Signed-off-by: Philipp Hahn <pmhahn@titan.lahn.de>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 45fed46f5b98aaf439e9ef125992ec853cd98499
Author: Paul Mackerras <paulus@samba.org>
Date:   Fri May 20 16:45:58 2005 +1000

    [PATCH] ppx32: Fix uninitialized variable in set_preferred_console
    
    This fixes an uninitialized variable warning in arch/ppc/kernel/setup.c,
    and this time gcc is actually right, there is a path that could result
    in offset being uninitialized.  Zero is a sane default in this instance.
    
    Signed-off-by: Paul Mackerras <paulus@samba.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 72480ef863740c3dc301b0803c9ed6d10716aa11
Author: Paul Mackerras <paulus@samba.org>
Date:   Fri May 20 16:50:55 2005 +1000

    [PATCH] ppc32: Fix __copy_tofrom_user return value
    
    Recently the __copy_tofrom_user routine was modified to avoid doing
    prefetches past the end of the source array.  However, in doing so we
    introduced a bug in that it now returns the wrong value for the number
    of bytes not copied when a fault is encountered.  This fixes it to
    return the correct number.
    
    Signed-off-by: Paul Mackerras <paulus@samba.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 3207a80a6e11c7ceff7e46d5ec6bfcc03c14e729
Author: Paul Mackerras <paulus@samba.org>
Date:   Fri May 20 17:15:00 2005 +1000

    [PATCH] ppc32: remove unused computation
    
    We are computing phys in the code below and never using.  This patch
    takes out the redundant computation.
    
    Signed-off-by: Paul Mackerras <paulus@samba.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 6c37a88c5b1195d4ac74d44a6413839b93df5af4
Author: Paul Mackerras <paulus@samba.org>
Date:   Fri May 20 16:57:22 2005 +1000

    [PATCH] ppc32: don't call progress functions after boot
    
    On ppc32, the platform code can supply a "progress" function that is
    used to show progress through the boot.  These functions are usually
    in an init section and so can't be called after the init pages are
    freed.  Now that the cpu bringup code can be called after the system
    is booted (for hotplug cpu) we can get the situation where the
    progress function can be called after boot.  The simple fix is to set
    the progress function pointer to NULL when the init pages are freed,
    and that is what this patch does (note that all callers already check
    whether the function pointer is NULL before trying to call it).
    
    Signed-off-by: Paul Mackerras <paulus@samba.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 07ab67c8d0d7c1021343b7d5c045033d6bf7be69
Author: Linus Torvalds <torvalds@ppc970.osdl.org>
Date:   Thu May 19 22:43:37 2005 -0700

    Fix get_unmapped_area sanity tests
    
    As noted by Chris Wright, we need to do the full range of tests regardless
    of whether MAP_FIXED is set or not, so re-organize get_unmapped_area()
    slightly to do the sanity checks unconditionally.

commit 66e60f92518268f4d2a702a1c4ffbe1caacd6290
Author: Linus Torvalds <torvalds@ppc970.osdl.org>
Date:   Thu May 19 15:31:18 2005 -0700

    Automatic merge of rsync://rsync.kernel.org/pub/scm/linux/kernel/git/davem/sparc-2.6.git/

commit 804c64ea864d0a8ee13f3de0b74158a3e9c3166d
Author: Linus Torvalds <torvalds@ppc970.osdl.org>
Date:   Thu May 19 15:29:23 2005 -0700

    Merge of rsync://rsync.kernel.org/pub/scm/linux/kernel/git/davem/net-2.6.git/

commit aa1c6a6f7f0518b42994d02756a41cbfdcac1916
Author: Tommy S. Christensen <tommy.christensen@tpack.net>
Date:   Thu May 19 13:07:32 2005 -0700

    [NETLINK]: Defer socket destruction a bit
    
    In netlink_broadcast() we're sending shared skb's to netlink listeners
    when possible (saves some copying). This is OK, since we hold the only
    other reference to the skb.
    
    However, this implies that we must drop our reference on the skb, before
    allowing a receiving socket to disappear. Otherwise, the socket buffer
    accounting is disrupted.
    
    Signed-off-by: Tommy S. Christensen <tommy.christensen@tpack.net>
    Acked-by: Herbert Xu <herbert@gondor.apana.org.au>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 68acc024ea7391e03c2c695ba0b9fb31baa974bf
Author: Tommy S. Christensen <tommy.christensen@tpack.net>
Date:   Thu May 19 13:06:35 2005 -0700

    [NETLINK]: Move broadcast skb_orphan to the skb_get path.
    
    Cloned packets don't need the orphan call.
    
    Signed-off-by: Tommy S. Christensen <tommy.christensen@tpack.net>
    Acked-by: Herbert Xu <herbert@gondor.apana.org.au>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit db61ecc3352d72513c1b07805bd6f760e30c001b
Author: Tommy S. Christensen <tommy.christensen@tpack.net>
Date:   Thu May 19 12:46:59 2005 -0700

    [NETLINK]: Fix race with recvmsg().
    
    This bug causes:
    
    assertion (!atomic_read(&sk->sk_rmem_alloc)) failed at net/netlink/af_netlink.c (122)
    
    What's happening is that:
    
    1) The skb is sent to socket 1.
    2) Someone does a recvmsg on socket 1 and drops the ref on the skb.
       Note that the rmalloc is not returned at this point since the
       skb is still referenced.
    3) The same skb is now sent to socket 2.
    
    This version of the fix resurrects the skb_orphan call that was moved
    out, last time we had 'shared-skb troubles'. It is practically a no-op
    in the common case, but still prevents the possible race with recvmsg.
    
    Signed-off-by: Tommy S. Christensen <tommy.christensen@tpack.net>
    Acked-by: Herbert Xu <herbert@gondor.apana.org.au>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 1eda339e76a9aac05883c548028bf91aed734783
Author: Jamal Hadi Salim <hadi@cyberus.ca>
Date:   Thu May 19 12:42:39 2005 -0700

    [PKT_SCHED]: Fixup simple action define.
    
    Make it consistent with other net/sched files
    
    Signed-off-by: Jamal Hadi Salim <hadi@cyberus.ca>

commit 31c26852cb2ac77f1d4acb37bcf31f165fd5eb68
Author: Herbert Xu <herbert@gondor.apana.org.au>
Date:   Thu May 19 12:39:49 2005 -0700

    [IPSEC]: Verify key payload in verify_one_algo
    
    We need to verify that the payload contains enough data so that
    attach_one_algo can copy alg_key_len bits from the payload.
    
    Signed-off-by: Herbert Xu <herbert@gondor.apana.org.au>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit b9e9dead05b19e7f52c9aa00cd3a5b7ac4fcacf4
Author: Herbert Xu <herbert@gondor.apana.org.au>
Date:   Thu May 19 12:39:04 2005 -0700

    [IPSEC]: Fixed alg_key_len usage in attach_one_algo
    
    The variable alg_key_len is in bits and not bytes.  The function
    attach_one_algo is currently using it as if it were in bytes.
    This causes it to read memory which may not be there.
    
    Signed-off-by: Herbert Xu <herbert@gondor.apana.org.au>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 8be58932ca596972e4953ae980d8bc286857cae8
Author: David S. Miller <davem@davemloft.net>
Date:   Thu May 19 12:36:33 2005 -0700

    [NETFILTER]: Do not be clever about SKB ownership in ip_ct_gather_frags().
    
    Just do an skb_orphan() and be done with it.
    Based upon discussions with Herbert Xu on netdev.
    
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit d9fa0f392b20b2b8e3df379c44194492a2446c6e
Author: Julian Anastasov <ja@ssi.bg>
Date:   Thu May 19 12:29:59 2005 -0700

    [IP_VS]: Remove extra __ip_vs_conn_put() for incoming ICMP.
    
    Remove extra __ip_vs_conn_put for incoming ICMP in direct routing
    mode. Mark de Vries reports that IPVS connections are not leaked anymore.
    
    Signed-off-by: Julian Anastasov <ja@ssi.bg>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 7e2987503dda95a5f80290bb8c06279009c2419e
Author: Steve French <sfrench@hera.kernel.org>
Date:   Thu May 19 12:26:57 2005 -0700

    Merge with rsync://rsync.kernel.org/pub/scm/linux/kernel/git/torvalds/linux-2.6.git
    

commit f81a0bffa116ea22149aa7cfb0b4ee09096d9d92
Author: Christoph Hellwig <hch@lst.de>
Date:   Thu May 19 12:26:43 2005 -0700

    [AF_UNIX]: Use lookup_create().
    
    currently it opencodes it, but that's in the way of chaning the
    lookup_hash interface.
    
    I'd prefer to disallow modular af_unix over exporting lookup_create,
    but I'll leave that to you.
    
    Signed-off-by: Christoph Hellwig <hch@lst.de>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 49a43876b935c811cfd29d8fe998a6912a1cc5c4
Author: Linus Torvalds <torvalds@osdl.org>
Date:   Wed May 18 15:39:33 2005 -0700

    [PATCH] prevent NULL mmap in topdown model
    
    Prevent the topdown allocator from allocating mmap areas all the way
    down to address zero.
    
    We still allow a MAP_FIXED mapping of page 0 (needed for various things,
    ranging from Wine and DOSEMU to people who want to allow speculative
    loads off a NULL pointer).
    
    Tested by Chris Wright.
    
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 2fdba6b085eb7068e9594cfa55ffe40466184b4d
Author: Herbert Xu <herbert@gondor.apana.org.au>
Date:   Wed May 18 22:52:33 2005 -0700

    [IPV4/IPV6] Ensure all frag_list members have NULL sk
    
    Having frag_list members which holds wmem of an sk leads to nightmares
    with partially cloned frag skb's.  The reason is that once you unleash
    a skb with a frag_list that has individual sk ownerships into the stack
    you can never undo those ownerships safely as they may have been cloned
    by things like netfilter.  Since we have to undo them in order to make
    skb_linearize happy this approach leads to a dead-end.
    
    So let's go the other way and make this an invariant:
    
    	For any skb on a frag_list, skb->sk must be NULL.
    
    That is, the socket ownership always belongs to the head skb.
    It turns out that the implementation is actually pretty simple.
    
    The above invariant is actually violated in the following patch
    for a short duration inside ip_fragment.  This is OK because the
    offending frag_list member is either destroyed at the end of the
    slow path without being sent anywhere, or it is detached from
    the frag_list before being sent.
    
    Signed-off-by: Herbert Xu <herbert@gondor.apana.org.au>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit d48102007d068df7ba3055cdc1723e12db1ba30f
Author: Evgeniy Polyakov <johnpol@2ka.mipt.ru>
Date:   Wed May 18 22:51:45 2005 -0700

    [XFRM]: skb_cow_data() does not set proper owner for new skbs.
    
    It looks like skb_cow_data() does not set 
    proper owner for newly created skb.
    
    If we have several fragments for skb and some of them
    are shared(?) or cloned (like in async IPsec) there 
    might be a situation when we require recreating skb and 
    thus using skb_copy() for it.
    Newly created skb has neither a destructor nor a socket
    assotiated with it, which must be copied from the old skb.
    As far as I can see, current code sets destructor and socket
    for the first one skb only and uses truesize of the first skb
    only to increment sk_wmem_alloc value.
    
    If above "analysis" is correct then attached patch fixes that.
    
    Signed-off-by: Evgeniy Polyakov <johnpol@2ka.mipt.ru>
    Acked-by: Herbert Xu <herbert@gondor.apana.org.au>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit f7383c22246cfccbe912541dd83103009ed2b537
Author: David S. Miller <davem@davemloft.net>
Date:   Wed May 18 22:50:53 2005 -0700

    [TG3]: In tg3_poll(), resample status_tag after doing work.
    
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 59e6b4343299373bc10dd131ab5142f53ddd838a
Author: David S. Miller <davem@davemloft.net>
Date:   Wed May 18 22:50:10 2005 -0700

    [TG3]: Refine DMA boundary setting.
    
    Extract DMA boundary bit selection into a seperate
    function, tg3_calc_dma_bndry().  Call this from
    tg3_test_dma().
    
    Make DMA test more reliable by using no DMA boundry
    setting during the test.  If the test passes, then
    use the setting we selected before the test.
    
    Signed-off-by: David S. Miller <davem@davemloft.net>
    Signed-off-by: Michael Chan <mchan@broadcom.com>

commit 15f9850d3c2d46f5851a424d2990a18b5bb5ebfd
Author: David S. Miller <davem@davemloft.net>
Date:   Wed May 18 22:49:26 2005 -0700

    [TG3]: Set minimal hw interrupt mitigation.
    
    Even though we do software interrupt mitigation
    via NAPI, it still helps to have some minimal
    hw assisted mitigation.
    
    This helps, particularly, on systems where register
    I/O overhead is much greater than the CPU horsepower.
    
    For example, it helps on NUMA systems.  In such cases
    the PIO overhead to disable interrupts for NAPI accounts
    for the majority of the packet processing cost.  The
    CPU is fast enough such that only a single packet is
    processed by each NAPI poll call.
    
    Thanks to Michael Chan for reviewing this patch.
    
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit fac9b83ea79aa3112ed245d9a4fc2a5c3ec2b7ec
Author: David S. Miller <davem@davemloft.net>
Date:   Wed May 18 22:46:34 2005 -0700

    [TG3]: Add tagged status support.
    
    When supported, use the TAGGED interrupt processing support
    the chip provides.  In this mode, instead of a "on/off" binary
    semaphore, an incrementing tag scheme is used to ACK interrupts.
    
    All MSI supporting chips support TAGGED mode, so the tg3_msi()
    interrupt handler uses it unconditionally.  This invariant is
    verified when MSI support is tested.
    
    Since we can invoke tg3_poll() multiple times per interrupt under
    high packet load, we fetch a new copy of the tag value in the
    status block right before we actually do the work.
    
    Also, because the tagged status tells the chip exactly which
    work we have processed, we can make two optimizations:
    
    1) tg3_restart_ints() need not check tg3_has_work()
    2) the tg3_timer() need not poke the chip 10 times per
       second to keep from losing interrupt events
    
    Based upon valuable feedback from Michael Chan <mchan@broadcom.com>
    
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit fe12e25ebdd195a57d3fd655061fd2525609b16b
Author: Tony Luck <tony.luck@intel.com>
Date:   Wed May 18 17:09:06 2005 -0700

    [IA64] initialize spinlock pfm_alt_install_check
    
    I applied the penultimate version of the perfmon patch, which didn't have
    the initialization of the new spinlock that was added.
    
    Signed-off-by: Tony Luck <tony.luck@intel.com>

commit 05d3794aa8bd3b2c9f7920a05003c331cdeb75c5
Author: Linus Torvalds <torvalds@ppc970.osdl.org>
Date:   Wed May 18 16:37:46 2005 -0700

    Automatic merge of rsync://rsync.kernel.org/pub/scm/linux/kernel/git/gregkh/driver-2.6.git/

commit 3d620cd75588a37c7f5547e26e2a28b046c280f0
Author: Tony Luck <tony.luck@intel.com>
Date:   Wed May 18 16:28:52 2005 -0700

    Sync with Linus - rsync://rsync.kernel.org/pub/scm/linux/kernel/git/torvalds/linux-2.6.git

commit a1ecf7f6e65637ba4470405ad39794710dbf85d4
Author: Tony Luck <tony.luck@intel.com>
Date:   Wed May 18 16:06:00 2005 -0700

    [IA64] alternate perfmon handler
    
    Patch from Charles Spirakis
    
    Some linux customers want to optimize their applications on the latest
    hardware but are not yet willing to upgrade to the latest kernel. This
    patch provides a way to plug in an alternate, basic, and GPL'ed PMU
    subsystem to help with their monitoring needs or for specialty work. It
    can also be used in case of serious unexpected bugs in perfmon. Mutual
    exclusion between the two subsystems is guaranteed, hence no conflict
    can arise from both subsystem being present.
    
    Acked-by: Stephane Eranian <eranian@hpl.hp.com>
    Signed-off-by: Tony Luck <tony.luck@intel.com>

commit 301216244b1e39c4346e56d38b079ca53d528580
Author: Stephen Tweedie <sct@redhat.com>
Date:   Wed May 18 11:47:17 2005 -0400

    [PATCH] Avoid console spam with ext3 aborted journal.
    
    Avoid console spam with ext3 aborted journal.
    
    ext3 usually reports error conditions that it detects in its environment.
    But when its journal gets aborted due to such errors, it can sometimes
    continue to report that condition forever, spamming the console to such
    an extent that the initial first cause of the journal abort can be lost.
    
    When the journal aborts, we put the filesystem into readonly mode.  Most
    subsequent filesystem operations will get rejected immediately by checks
    for MS_RDONLY either in the filesystem or in the VFS.  But some paths do
    not have such checks --- for example, if we continue to write to a file
    handle that was opened before the fs went readonly.  (We only check for
    the ROFS condition when the file is first opened.)  In these cases, we
    can continue to generate log errors similar to
    
    EXT3-fs error (device $DEV) in start_transaction: Journal has aborted
    
    for each subsequent write.
    
    There is really no point in generating these errors after the initial
    error has been fully reported.  Specifically, if we're starting a
    completely new filesystem operation, and the filesystem is *already*
    readonly (ie. the ext3 layer has already detected and handled the
    underlying jbd abort), and we see an EROFS error, then there is simply
    no point in reporting it again.
    
    Signed-off-by: Stephen Tweedie <sct@redhat.com>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit e72022e13d659bece2fc9cb2dd97afa67047dbca
Author: Stephen Tweedie <sct@redhat.com>
Date:   Wed May 18 11:22:31 2005 -0400

    [PATCH] Fix filp being passed through raw ioctl handler
    
    Don't pass meaningless file handles to block device ioctls.
    
    The recent raw IO ioctl-passthrough fix started passing the raw file
    handle into the block device ioctl handler.  That's unlikely to be
    useful, as the file handle is actually open on a character-mode raw
    device, not a block device, so dereferencing it is not going to yield
    useful results to a block device ioctl handler.
    
    Previously we just passed NULL; also not a value that can usefully
    be dereferenced, but at least if it does happen, we'll oops instead of
    silently pretending that the file is a block device, so NULL is the more
    defensive option here.  This patch reverts to that behaviour.
    
    Noticed by Al Viro.
    
    Signed-off-by: Stephen Tweedie <sct@redhat.com>
    Acked-by: Al Viro <viro@parcelfarce.linux.theplanet.co.uk>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 0b405a0f7e4d4d18fd1fe46ddf5ff465443036ab
Author: David Brownell <david-b@pacbell.net>
Date:   Thu May 12 12:06:27 2005 -0700

    [PATCH] Driver Core: remove driver model detach_state
    
    The driver model has a "detach_state" mechanism that:
    
     - Has never been used by any in-kernel drive;
     - Is superfluous, since driver remove() methods can do the same thing;
     - Became buggy when the suspend() parameter changed semantics and type;
     - Could self-deadlock when called from certain suspend contexts;
     - Is effectively wasted documentation, object code, and headspace.
    
    This removes that "detach_state" mechanism; net code shrink, as well
    as a per-device saving in the driver model and sysfs.
    
    Signed-off-by: David Brownell <dbrownell@users.sourceforge.net>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 82428b62aa6294ea640c7e920a9224ecaf46db65
Author: David Brownell <david-b@pacbell.net>
Date:   Mon May 9 08:07:00 2005 -0700

    [PATCH] Driver Core: pm diagnostics update, check for errors
    
    This patch includes various tweaks in the messaging that appears during
    system pm state transitions:
    
      * Warn about certain illegal calls in the device tree, like resuming
        child before parent or suspending parent before child.  This could
        happen easily enough through sysfs, or in some cases when drivers
        use device_pm_set_parent().
    
      * Be more consistent about dev_dbg() tracing ... do it for resume() and
        shutdown() too, and never if the driver doesn't have that method.
    
      * Say which type of system sleep state is being entered.
    
    Except for the warnings, these only affect debug messaging.
    
    Signed-off-by: David Brownell <dbrownell@users.sourceforge.net>
    Acked-by: Pavel Machek <pavel@ucw.cz>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit d1ded203adf16b42ca90e9041120ae465ca5c4a6
Author: Greg KH <gregkh@suse.de>
Date:   Thu May 5 11:57:25 2005 -0700

    [PATCH] PCI: add MODALIAS to hotplug event for pci devices
    
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 9888549e0507cc95d1d7ade1595c00ff8e902659
Author: Greg KH <gregkh@suse.de>
Date:   Thu May 5 11:57:25 2005 -0700

    [PATCH] PCI: add modalias sysfs file for pci devices
    
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit c22610dadc0452b1273494f2b5157123c6cd60e1
Author: Scott Murray <scottm@somanetworks.com>
Date:   Mon May 9 17:36:27 2005 -0400

    [PATCH] PCI Hotplug: remove pci_visit_dev
    
    If my CPCI hotplug update patch is applied, then there are no longer any
    in tree users of the pci_visit_dev API, and it and its related code can be
    removed.
    
    Signed-off-by: Scott Murray <scottm@somanetworks.com>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 43b7d7cfb157b5c8c5cc0933f4e96fd81adc81ca
Author: Scott Murray <scottm@somanetworks.com>
Date:   Mon May 9 17:31:50 2005 -0400

    [PATCH] PCI Hotplug: CPCI update
    
    [PATCH] CPCI: update
    
    I have finally done some work to update the CompactPCI hotplug driver to
    fix some of the outstanding issues in 2.6:
    - Added adapter and latch status ops so that those files will get created
      by the current PCI hotplug core.  This used to not be required, but
      seems to be now after some of the sysfs rework in the core.
    - Replaced slot list spinlock with a r/w semaphore to avoid any potential
      issues with sleeping.  This quiets all of the runtime warnings.
    - Reworked interrupt driven hot extraction handling to remove need for a
      polling operator for ENUM# status.  There are a lot of boards that only
      have an interrupt driven by ENUM#, so this lowers the bar to entry.
    - Replaced pci_visit_dev usage with better use of the PCI core functions.
      The new code is functionally equivalent to the previous code, but the
      use of pci_enable_device on insert needs to be investigated further, as
      I need to do some more testing to see if it is still necessary.
    
    Signed-off-by: Scott Murray <scottm@somanetworks.com>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 8b245e45f34280ec61e3c8d643d4613b9e0eb7a4
Author: Dely Sy <dlsy@snoqualmie.dp.intel.com>
Date:   Fri May 6 17:19:09 2005 -0700

    [PATCH] PCI Hotplug: get pciehp to work on the downstream port of a switch
    
    Here is the updated patch to get pciehp driver to work for downstream
    port of a switch and handle the difference in the offset value of PCI
    Express capability list item of different ports.
    
    Signed-off-by: Dely Sy <dely.l.sy@intel.com>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit ee17fd93a5892c162b0a02d58cdfdb9c50cf8467
Author: Dely Sy <dlsy@snoqualmie.dp.intel.com>
Date:   Thu May 5 11:57:25 2005 -0700

    [PATCH] PCI Hotplug: Fix echoing 1 to power file of enabled slot problem with SHPC driver
    
    Here is a patch to fix the problem of echoing 1 to "power" file
    to enabled slot causing the slot to power down, and echoing 0
    to disabled slot causing shpchp_disabled_slot() to be called
    twice. This problem was reported by kenji Kaneshige.
    
    Thanks,
    Dely
    
    Signed-off-by: Dely Sy <dely.l.sy@intel.com>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit b1a45695bde0204597957e448923f09ce271ca80
Author: Steve French <stevef@stevef95>
Date:   Tue May 17 16:07:23 2005 -0500

    [CIFS] fix casts of unicode strings to match function definition
    
    Signed-off-by: Steve French (sfrench@us.ibm.com)

commit 6872ec548970e9fb3ccd61013f84f9bb8b30fa9a
Author: Russ Anderson <(rja@sgi.com)>
Date:   Mon May 16 15:30:00 2005 -0700

    [IS64-SGI] Set Altix error handling features
    
    The 2.6 kernel has CPE error thresholding.
    This patch lets SAL know of this error handling feature.
    The changes are SN specific.
    
    Signed-off-by: Russ Anderson (rja@sgi.com)
    Signed-off-by: Tony Luck <tony.luck@intel.com>

commit 8eac3757158ccd9c6b43f44f228a5762fec33781
Author: Russ Anderson <(rja@sgi.com)>
Date:   Mon May 16 15:19:00 2005 -0700

    [IA64-SGI] Make Altix SAL call to POD reentrant
    
    Change the SAL call for POD mode to be reentrant.
    This change is SN specific.
    
    Signed-off-by: Russ Anderson (rja@sgi.com)
    Signed-off-by: Tony Luck <tony.luck@intel.com>

commit bb68c12b40c3c745381d7ce61d7b2e371f157505
Author: Russ Anderson <(rja@sgi.com)>
Date:   Mon May 9 15:03:00 2005 -0700

    [IA64-SGI] cpe interrupts are not being enabled.
    
    acpi_request_vector() is called in ia64_mca_init() to get the cpe_vector.
    The problem is that acpi_request_vector() looks in platform_intr_list[] to 
    get the vector, but platform_intr_list[] is not initialized with a valid
    vector until later (in sn_setup()).  Without a valid vector the code
    defaults to polling mode.
    
    This patch moves the call to acpi_request_vector() from ia64_mca_init()
    to ia64_mca_late_init(), which is after platform_intr_list[] is initialized.
    
    Signed-off-by: Russ Anderson (rja@sgi.com)
    Signed-off-by: Tony Luck <tony.luck@intel.com>

commit 056b5033fb8d16095fb074fc910fad90186374f3
Author: Jesse Barnes <jesse.barnes@intel.com>
Date:   Mon May 9 14:52:00 2005 -0700

    [PATCH] update sn2 maintainer
    
    Now that I'm no longer at SGI and don't have access to Altix equipment, 
    it's time to pass on the job of patch monkey to someone else.  Greg 
    Edwards has foolishly^Wkindly volunteered for the job, so here's a 
    patch to update the MAINTAINERS file with the appropriate information.
    
    Signed-off-by: Jesse Barnes <jesse.barnes@intel.com>
    Signed-off-by: Tony Luck <tony.luck@intel.com>

commit 02a017a9f37ae6842e065da919b5952eb847e869
Author: David Mosberger-Tang <davidm@hpl.hp.com>
Date:   Tue May 10 11:35:00 2005 -0700

    [IA64] Correct convert_to_non_syscall()
    
    convert_to_non_syscall() has the same problem that unwind_to_user()
    used to have.  Fix it likewise.
    
    Signed-off-by: David Mosberger-Tang <davidm@hpl.hp.com>
    Signed-off-by: Tony Luck <tony.luck@intel.com>

commit b2aeb9d565be5ef00fb9f921c6d2459c74d90cdf
Author: Steve French <stevef@stevef95>
Date:   Tue May 17 13:16:18 2005 -0500

    [CIFS] Fix oops in cifs_unlink.  Caused in some cases when renaming over existing,
    newly created, file.
    
    Samba bugzilla: 2697
    
    Signed-off-by: Steve French (sfrench@us.ibm.com)
    

commit 67594feb4b68074d8807f5566536e06db9130679
Author: Steve French <stevef@stevef95>
Date:   Tue May 17 13:04:49 2005 -0500

    [CIFS] missing break needed to handle < when mount option "mapchars" specified
    
    Signed-off-by: Steve French (sfrench@us.ibm.com)

commit ff0d2f90fdc4b564d47a7c26b16de81a16cfa28e
Author: Christoph Lameter <christoph@lameter.com>
Date:   Tue May 17 08:48:16 2005 -0700

    [PATCH] fix memory scribble in arch/i386/pci/fixup.c
    
    The GET_INDEX() macro should use just the low three bits of the devfn,
    otherwise we have a memory scribble in pcie_rootport_aspm_quirk that
    overwrites ptype_all
    
    Fix it to be more careful about its arguments while at it.
    
    Acked by Dely Sy <dely.l.sy@intel.com>
    
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 8c41a5f50deab01aca11155154d7e6737b3a1d9f
Author: randy_dunlap <rdunlap@xenotime.net>
Date:   Tue May 17 07:12:56 2005 -0700

    [PATCH] update CREDITS
    
    free agent
    
    Signed-off-by: Randy Dunlap <rdunlap@xenotime.net>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 19bbdf0e510471ecebb3fe09bd8b00773cc63b88
Author: Paul Mackerras <paulus@samba.org>
Date:   Tue May 17 16:48:39 2005 +1000

    [PATCH] ppc32: enable use of early_param
    
    We need to call parse_early_param() early on to allow usage of
    early_param() for command line parsing.
    
    Signed-off-by: Kumar Gala <kumar.gala@freescale.com>
    Signed-off-by: Paul Mackerras <paulus@samba.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit d0dac8082cbc2b234917ec53eb591b1ddbec80bb
Author: Tony Luck <tony.luck@intel.com>
Date:   Tue May 17 09:10:20 2005 -0700

    Merge with linus
    

commit ad542ef5b2296fa7a8518e6be67c4588b750d316
Author: Linus Torvalds <torvalds@ppc970.osdl.org>
Date:   Tue May 17 08:55:00 2005 -0700

    Automatic merge of rsync://rsync.kernel.org/pub/scm/linux/kernel/git/jgarzik/libata-2.6.git

commit f3ac91cf521be4637236d2dcb7ad4aa91f8865f0
Author:  <jgarzik@pretzel.yyz.us>
Date:   Tue May 17 11:30:39 2005 -0400

    Merge of rsync://rsync.kernel.org/pub/scm/linux/kernel/git/jgarzik/libata-dev.git

commit ff96b3d4b840e8aa126e0a60fd743417ffdee178
Author: Linus Torvalds <torvalds@ppc970.osdl.org>
Date:   Tue May 17 08:11:04 2005 -0700

    Automatic merge of rsync://rsync.kernel.org/pub/scm/linux/kernel/git/gregkh/usb-2.6.git/

commit b82a96a7f28b9939576bf79a817c7a238d784b47
Author: Johannes Stezenbach <js@linuxtv.org>
Date:   Mon May 16 21:54:49 2005 -0700

    [PATCH] dvb: budget-av: CI fixes
    
    - remove enable_ci, ci interface is assumed to be present if the saa7113
      is not found.
    - reduce the delay when checking for saa7113
    - clean up the cam reset according to specifications
    - turn off Vcc to the cam slot if cam is removed or fails reset
    - remove cam reset in ciintf_init
    - clean up printks (KERN_)
    - move gpio setting into saa7113_init
    - clean up unreadable frontend_init
    (Kenneth Aafloy)
    
    Signed-off-by: Johannes Stezenbach <js@linuxtv.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 43f1a8f8c09aa1e368157039715812139a023d20
Author: Johannes Stezenbach <js@linuxtv.org>
Date:   Mon May 16 21:54:49 2005 -0700

    [PATCH] dvb: bt8xx: whitespace cleanup
    
    whitespace cleanup
    
    Signed-off-by: Johannes Stezenbach <js@linuxtv.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit b98b79da032584b4c077568d28dde2d2fe226b54
Author: Johannes Stezenbach <js@linuxtv.org>
Date:   Mon May 16 21:54:47 2005 -0700

    [PATCH] dvb: DST: fixed CI debug output
    
    fixed CI debug output (Dominique Dumont)
    
    Signed-off-by: Johannes Stezenbach <js@linuxtv.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 42dc6617fe41ea65a94399821058353d0b12c0ab
Author: Johannes Stezenbach <js@linuxtv.org>
Date:   Mon May 16 21:54:47 2005 -0700

    [PATCH] dvb: DST: fix a bug in the module parameter
    
    fix a bug in the module parameter (Dominique Dumont)
    
    Signed-off-by: Johannes Stezenbach <js@linuxtv.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit df481ae59074756f1d0b2712d8b3fe8d04eb16c1
Author: Johannes Stezenbach <js@linuxtv.org>
Date:   Mon May 16 21:54:45 2005 -0700

    [PATCH] dvb: bt8xx: updated documentation
    
    updated documentation (Manu Abraham)
    
    Signed-off-by: Johannes Stezenbach <js@linuxtv.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 4a2cc1269b6c1404e6e882cee604d55c90927467
Author: Johannes Stezenbach <js@linuxtv.org>
Date:   Mon May 16 21:54:45 2005 -0700

    [PATCH] dvb: DST: misc. fixes
    
    removed unused module parameter session removed unnecesary delay for FTA cards
    (Manu Abraham)
    
    Signed-off-by: Johannes Stezenbach <js@linuxtv.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit b46dd4456f87fbad634d9a63d607fc54e4381cb4
Author: Johannes Stezenbach <js@linuxtv.org>
Date:   Mon May 16 21:54:44 2005 -0700

    [PATCH] dvb: DST: fix for descrambling failure
    
    fix for descrambling failure (Dominique Dumont, Manu Abraham)
    
    Signed-off-by: Johannes Stezenbach <js@linuxtv.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 8385e46fbf7c9b80008b915440f256ce88633eeb
Author: Johannes Stezenbach <js@linuxtv.org>
Date:   Mon May 16 21:54:43 2005 -0700

    [PATCH] dvb: DST: fixed tuning problem
    
    fixed a tuning problem for cards based on the old firmware (Steffen Motzer,
    Manu Abraham)
    
    Signed-off-by: Johannes Stezenbach <js@linuxtv.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit e6ac699a4f991e84b4bcdc07d9dfa8e019cf6116
Author: Johannes Stezenbach <js@linuxtv.org>
Date:   Mon May 16 21:54:42 2005 -0700

    [PATCH] dvb: DST: add support for Twinhan 200103A
    
    add support for the old Twinhan 200103A card (Steffen Motzer)
    
    Signed-off-by: Johannes Stezenbach <js@linuxtv.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 50b215a05878ce9636dace6cd21f7e91ff005058
Author: Johannes Stezenbach <js@linuxtv.org>
Date:   Mon May 16 21:54:41 2005 -0700

    [PATCH] dvb: DST: reorganize Twinhan DST driver to support CI
    
    - reorganize Twinhan DST driver to support CI
    - add support for more cards
    (Manu Abraham)
    
    Signed-off-by: Johannes Stezenbach <js@linuxtv.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit daeb6aa40be55b0750aea92dea78b8ebc40ca9a8
Author: Johannes Stezenbach <js@linuxtv.org>
Date:   Mon May 16 21:54:40 2005 -0700

    [PATCH] dvb: bt8xx: update documentation
    
    update bt8xx documentation (Uwe Bugla)
    
    Signed-off-by: Johannes Stezenbach <js@linuxtv.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit fdc53a6dbfea18e621dd23ed5cfb160837d7ce52
Author: Johannes Stezenbach <js@linuxtv.org>
Date:   Mon May 16 21:54:39 2005 -0700

    [PATCH] dvb: modified dvb_register_adapter() to avoid kmalloc/kfree
    
    Modified dvb_register_adapter() to avoid kmalloc/kfree.  Drivers have to embed
    struct dvb_adapter into their private data struct from now on.  (Andreas
    Oberritter)
    
    Signed-off-by: Johannes Stezenbach <js@linuxtv.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 0b3f5a57bf110b519b706365c86ada199075f34e
Author: Johannes Stezenbach <js@linuxtv.org>
Date:   Mon May 16 21:54:38 2005 -0700

    [PATCH] dvb: frontends: misc. minor cleanups
    
    misc. minor cleanups, select FW_LOADER and add a help text to DVB_OR51132
    
    Signed-off-by: Johannes Stezenbach <js@linuxtv.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit d91b730dfb46fa889c9c7a67d8bd6596e2ac8b21
Author: Johannes Stezenbach <js@linuxtv.org>
Date:   Mon May 16 21:54:38 2005 -0700

    [PATCH] dvb: make needlessly global code static or drop it
    
    - make needlessly global code static
    - #if 0 the following unused global functions:
      - ttpci/av7110_hw.c: av7110_reset_arm
      - ttpci/av7110_hw.c: av7110_send_ci_cmd
    - frontends/mt352.[ch]: drop mt352_read
    
    Signed-off-by: Adrian Bunk <bunk@stusta.de>
    Signed-off-by: Johannes Stezenbach <js@linuxtv.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 5e9e7226c13135063707a0c82766a2dd748f59e5
Author: Johannes Stezenbach <js@linuxtv.org>
Date:   Mon May 16 21:54:37 2005 -0700

    [PATCH] dvb: dvb-pll.h: prevent multiple inclusion
    
    added missing #ifndef and #define to inhibit multiple inclusions (Patrick
    Boettcher)
    
    Signed-off-by: Johannes Stezenbach <js@linuxtv.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 71e3420111530273f2b26fabfac4d021c2a2b79f
Author: Johannes Stezenbach <js@linuxtv.org>
Date:   Mon May 16 21:54:36 2005 -0700

    [PATCH] dvb: tda10046: support for different firmware versions
    
    added support for different tda10046 firmware versions.  tested with v20, v21
    and v25.  (Andreas Oberritter)
    
    Signed-off-by: Johannes Stezenbach <js@linuxtv.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 1dfb800f9d0391dee86d692142745415f5f65f81
Author: Johannes Stezenbach <js@linuxtv.org>
Date:   Mon May 16 21:54:35 2005 -0700

    [PATCH] dvb: tda1004x: allow N_I2C to be overridden by the card driver
    
    allow N_I2C to be overridden by the card driver (Andreas Oberritter)
    
    Signed-off-by: Johannes Stezenbach <js@linuxtv.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit dd102c752c17636b2aec7977b377c41156ed19c1
Author: Johannes Stezenbach <js@linuxtv.org>
Date:   Mon May 16 21:54:35 2005 -0700

    [PATCH] dvb: tda1004x: dont use bitfields
    
    use simple u8 instead of bitfields (Andreas Oberritter)
    
    Signed-off-by: Johannes Stezenbach <js@linuxtv.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 77b3bd0ccb2fae27e710b921f053ae16f34d70de
Author: Johannes Stezenbach <js@linuxtv.org>
Date:   Mon May 16 21:54:34 2005 -0700

    [PATCH] dvb: mt352: embed struct mt352_config in mt352_state
    
    copying the mt352_config-struct to mt352_state instead of storing just the
    pointer to it (Patrick Boettcher)
    
    Signed-off-by: Johannes Stezenbach <js@linuxtv.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit cd22d5c093faf3b123af33a8a0059f583c6b8cae
Author: Johannes Stezenbach <js@linuxtv.org>
Date:   Mon May 16 21:54:33 2005 -0700

    [PATCH] dvb: ves1820: remove unnecessary msleep
    
    remove unnecessary msleep(10) in writereg (Tony Glader)
    
    Signed-off-by: Johannes Stezenbach <js@linuxtv.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit b1471c4f67321c09359d6fa8eb5c72c2463db081
Author: Johannes Stezenbach <js@linuxtv.org>
Date:   Mon May 16 21:54:32 2005 -0700

    [PATCH] dvb: dib3000: add NULL pointer check
    
    prevent NULL pointer related Oopses (Patrick Boettcher)
    
    Signed-off-by: Johannes Stezenbach <js@linuxtv.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit b8742700f13163ffa00cddce2a3c940b9ab2ab5a
Author: Johannes Stezenbach <js@linuxtv.org>
Date:   Mon May 16 21:54:31 2005 -0700

    [PATCH] dvb: remove unnecessary casts in frontends
    
    remove unnecessary casts in frontends (Kenneth Aafloy)
    
    Signed-off-by: Johannes Stezenbach <js@linuxtv.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 591ad98db3be2cd596ac5e0cfba7b164c3bdfb52
Author: Johannes Stezenbach <js@linuxtv.org>
Date:   Mon May 16 21:54:31 2005 -0700

    [PATCH] dvb: stv0299: fix FE_DISHNETWORK_SEND_LEGACY_CMD
    
    fix the current stv0299 code that handles FE_DISHNETWORK_SEND_LEGACY_CMD.
    (supports the legacy SW21, SW44, and SW64 switches)
    
    Signed-off-by: Johannes Stezenbach <js@linuxtv.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 7f5e02db4a39c36e68878a14fae1fe7ee6dd6fcf
Author: Johannes Stezenbach <js@linuxtv.org>
Date:   Mon May 16 21:54:30 2005 -0700

    [PATCH] dvb: tda1004x: formatting cleanups
    
    mostly formatting cleanups, no functional change (Andreas Oberritter)
    
    Signed-off-by: Johannes Stezenbach <js@linuxtv.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 3a4a571124cdd04215e0f78bc53fe16bab58f32d
Author: Johannes Stezenbach <js@linuxtv.org>
Date:   Mon May 16 21:54:29 2005 -0700

    [PATCH] dvb: nxt6000: support frontend status reads
    
    add support for read_ber, read_signal_strength and read_status (Greg Wickham)
    
    Signed-off-by: Johannes Stezenbach <js@linuxtv.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 3165dcb300ff60e794909f02b1fd3a41908682ea
Author: Johannes Stezenbach <js@linuxtv.org>
Date:   Mon May 16 21:54:28 2005 -0700

    [PATCH] dvb: av7110: fix indentation
    
    fix indentation
    
    Signed-off-by: Johannes Stezenbach <js@linuxtv.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 3dbce49ea1c6885d07eb59d12889c059a868e6f5
Author: Johannes Stezenbach <js@linuxtv.org>
Date:   Mon May 16 21:54:28 2005 -0700

    [PATCH] dvb: av7110: fix comment
    
    fixed debugging instructions: av7110_debug -> debug (Oliver Endirss)
    
    Signed-off-by: Johannes Stezenbach <js@linuxtv.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 4ab3f08b28676d365f3fb8600ead325fd235711a
Author: Johannes Stezenbach <js@linuxtv.org>
Date:   Mon May 16 21:54:27 2005 -0700

    [PATCH] dvb: av7110: fix NTSC/PAL switching
    
    fix NTSC -> PAL switching (std->id is a bitmap!) (Oliver Endriss)
    
    Signed-off-by: Johannes Stezenbach <js@linuxtv.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit a65d3bb7177cbab1fca69dd97537766c2817b6b2
Author: Johannes Stezenbach <js@linuxtv.org>
Date:   Mon May 16 21:54:26 2005 -0700

    [PATCH] dvb: av7110: fix VIDEO_SET_DISPLAY_FORMAT
    
    VIDEO_SET_DISPLAY_FORMAT ioctl fixed:
    set videostate.display_format, not videostate.video_format (Oliver Endriss)
    
    Signed-off-by: Johannes Stezenbach <js@linuxtv.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 59142330aaea9d870d795065d8b91e21d5e55254
Author: Johannes Stezenbach <js@linuxtv.org>
Date:   Mon May 16 21:54:25 2005 -0700

    [PATCH] dvb: dvb_net: handle IPv6 and LLC/SNAP
    
    handle IPv6 and LLC/SNAP (Bertrand Mazieres, Matthieu Castet, Johannes
    Stezenbach)
    
    Signed-off-by: Johannes Stezenbach <js@linuxtv.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 0c53c70f6afa2d3f4d416d8c0e9a219c2f6b7cb6
Author: Johannes Stezenbach <js@linuxtv.org>
Date:   Mon May 16 21:54:24 2005 -0700

    [PATCH] dvb: remove unnecessary casts in dvb-core
    
    remove unnecessary casts in dvb-core (Kenneth Aafloy)
    
    Signed-off-by: Johannes Stezenbach <js@linuxtv.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 2d4f2c2e15795b93fa4da7a7cfac5e82df51b1f1
Author: Johannes Stezenbach <js@linuxtv.org>
Date:   Mon May 16 21:54:23 2005 -0700

    [PATCH] dvb: add support for KNC-1 cards
    
    Support KNC-1 Plus DVB-T and similar KNC-1 cards (Alexander Riedel)
    
    Signed-off-by: Johannes Stezenbach <js@linuxtv.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 6074b36715f036f56beb688f49a2a2fb5b28ad72
Author: Johannes Stezenbach <js@linuxtv.org>
Date:   Mon May 16 21:54:22 2005 -0700

    [PATCH] dvb: av7110: audio out fix
    
    Switch analog output of the Crystal sound chip to left/stereo/right mode.
    This will fix problems with some (most?) channels which do not encode
    2-channel audio correctly.  (Oliver Endriss)
    
    Signed-off-by: Johannes Stezenbach <js@linuxtv.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit f4f009a776c1db9b27346846b0db052e04a6d5ad
Author: Johannes Stezenbach <js@linuxtv.org>
Date:   Mon May 16 21:54:21 2005 -0700

    [PATCH] dvb: dvb_frontend: fix module param
    
    Remove incorrect "dvb_"-prefix from parameter description.  Error detected
    with section2text.rb, see autoparam patch.
    
    Signed-off-by: Magnus Damm <damm@opensource.se>
    Signed-off-by: Johannes Stezenbach <js@linuxtv.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit c2c62d81430e907b6599d4be43a7ee6f74d2bd69
Author: Johannes Stezenbach <js@linuxtv.org>
Date:   Mon May 16 21:54:20 2005 -0700

    [PATCH] dvb: saa7146: no need to initialize static/global variables to 0
    
    no need to initialize static/global variables to 0
    
    Signed-off-by: Johannes Stezenbach <js@linuxtv.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 3dfaebdaa2a14c7ca1fbbafff08992489087e7f1
Author: Johannes Stezenbach <js@linuxtv.org>
Date:   Mon May 16 21:54:19 2005 -0700

    [PATCH] dvb: support for TT/Hauppauge Nexus-S Rev 2.3
    
    Support for TT/Hauppauge Nexus-S Rev 2.3 (Oliver Endriss)
    
    Signed-off-by: Johannes Stezenbach <js@linuxtv.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 958706c12d7e1b21ac46a8b3bc7eabb157b20bb7
Author: Johannes Stezenbach <js@linuxtv.org>
Date:   Mon May 16 21:54:19 2005 -0700

    [PATCH] dvb: flexcop: DiSeqC fix
    
    Fixed DiSeqC switching, which was wrongly taking over from skystar2.c.  Thanks
    to Joerg Riechardt for finding the bug and testing the Fix.
    
    Signed-off-by: Patrick Boettcher <pb@linuxtv.org>
    Signed-off-by: Johannes Stezenbach <js@linuxtv.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit bdc7800122da0b6b008aa9bdafc01e32b6a4576a
Author: Johannes Stezenbach <js@linuxtv.org>
Date:   Mon May 16 21:54:18 2005 -0700

    [PATCH] dvb: flexcop: i2c read fixes
    
    rewrote the i2c-reading-part (no more ack-error ignoring, which was inherited
    from the skystar2-driver)
    
    Signed-off-by: Patrick Boettcher <pb@linuxtv.org>
    Signed-off-by: Johannes Stezenbach <js@linuxtv.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit c6ee197ccf4af454638c044706f0ba7ef6c1bb76
Author: Johannes Stezenbach <js@linuxtv.org>
Date:   Mon May 16 21:54:17 2005 -0700

    [PATCH] dvb: flexcop: readme update
    
    readme update
    
    Signed-off-by: Patrick Boettcher <pb@linuxtv.org>
    Signed-off-by: Johannes Stezenbach <js@linuxtv.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 59a7ad6c1ed3a058d375d2e679d73805e4f851ac
Author: Johannes Stezenbach <js@linuxtv.org>
Date:   Mon May 16 21:54:16 2005 -0700

    [PATCH] dvb: flexcop: fix module refcount handling
    
    Corrected the THIS_MODULE handling for the flexcop-stuff and dvb-usb which
    lead to oopses because of misorganized module dependencies.
    
    Signed-off-by: Patrick Boettcher <pb@linuxtv.org>
    Signed-off-by: Johannes Stezenbach <js@linuxtv.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit c4ee3fd469302884dda95e1f310d5ffcd9f5acf9
Author: Johannes Stezenbach <js@linuxtv.org>
Date:   Mon May 16 21:54:15 2005 -0700

    [PATCH] dvb: flexcop: use hw pid filter
    
    - enabled the HW PID by default for the PCI cards
    
    - correct the TS demux parsing when PID filter is enabled (and thus the
      timer IRQ)
    
    - rewrote the PID-filter and FULLTS control part in flexcop-hw-filter
      (thanks to Krzysztof Matula for pointing that out)
    
    Signed-off-by: Patrick Boettcher <pb@linuxtv.org>
    Signed-off-by: Johannes Stezenbach <js@linuxtv.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 4853f16ad881194ec4c49f73287ef1999b2585ea
Author: Johannes Stezenbach <js@linuxtv.org>
Date:   Mon May 16 21:54:15 2005 -0700

    [PATCH] dvb: flexcop: fixed interrupt-sharing
    
    fixed interrupt-sharing and added a spinlock to the irq-callback
    (thanks to Pascal Riekenberg)
    
    Signed-off-by: Patrick Boettcher <pb@linuxtv.org>
    Signed-off-by: Johannes Stezenbach <js@linuxtv.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 778241313819e17de3bdf91523c724b4704402c6
Author: Johannes Stezenbach <js@linuxtv.org>
Date:   Mon May 16 21:54:14 2005 -0700

    [PATCH] dvb: flexcop: fix MAC address reading
    
    read MAC address directly into dvb_adapter->proposed_mac
    
    Signed-off-by: Patrick Boettcher <pb@linuxtv.org>
    Signed-off-by: Johannes Stezenbach <js@linuxtv.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 3ed8a31cb387b2ae3e4ca508f973931b61e6f6bd
Author: Johannes Stezenbach <js@linuxtv.org>
Date:   Mon May 16 21:54:13 2005 -0700

    [PATCH] dvb: flexcop: add acknowledgements
    
    add acknowledgements
    
    Signed-off-by: Patrick Boettcher <pb@linuxtv.org>
    Signed-off-by: Johannes Stezenbach <js@linuxtv.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 7635acd2d927578495c692056d0e7dabd06afc89
Author: Johannes Stezenbach <js@linuxtv.org>
Date:   Mon May 16 21:54:12 2005 -0700

    [PATCH] dvb: flexcop: fix USB transfer handling
    
    - driver receives many null TS packets (pid=0x1fff).  They occupy the
      limited USB bandwidth and this leads to loss of video packets.  Enabling the
      null packet filter fixes this.
    
    - packets that flexcop sends to USB have a 2 byte header that has to be
      removed.
    
    - sometimes a TS packet is split between different urbs.  These parts have
      to be combined in a temporary buffer.
    
    Signed-off-by: Vadim Catana <skystar@moldova.cc>
    Signed-off-by: Patrick Boettcher <pb@linuxtv.org>
    Signed-off-by: Johannes Stezenbach <js@linuxtv.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 2add87a95068d6457d4e5824d0417d39007665a4
Author: Johannes Stezenbach <js@linuxtv.org>
Date:   Mon May 16 21:54:10 2005 -0700

    [PATCH] dvb: b2c2/flexcop driver refactoring part 2: add modular Flexcop driver
    
    b2c2/flexcop driver refactoring to support PCI and USB based cards part 2: add
    modular Flexcop driver
    
    Signed-off-by: Patrick Boettcher <pb@linuxtv.org>
    Signed-off-by: Johannes Stezenbach <js@linuxtv.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 1ec359729960f7896db8f642454e603d22519d20
Author: Johannes Stezenbach <js@linuxtv.org>
Date:   Mon May 16 21:54:06 2005 -0700

    [PATCH] dvb: b2c2/flexcop driver refactoring part 1: drop old b2c2-usb stuff
    
    b2c2/flexcop driver refactoring to support PCI and USB based cards, part 1:
    drop abandoned attempt to support USB devices
    
    Signed-off-by: Patrick Boettcher <pb@linuxtv.org>
    Signed-off-by: Johannes Stezenbach <js@linuxtv.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 6262d062a3fc803d1798365e745b39f4faa04b0e
Author: Jody McIntyre <scjody@steamballoon.com>
Date:   Mon May 16 21:54:05 2005 -0700

    [PATCH] ieee1394: fix premature expiry of async packets
    
    Set the initial sendtime to be 10 seconds in the future, to avoid the packet
    timing out while it's still queued to be sent.  This fixes furthur "no tlabel
    match" problems caused by premature expiry.
    
    Signed-off-by: Jody McIntyre <scjody@steamballoon.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 74a01d11c92c06a0ceac88ca306d507a8186e7f6
Author: Jody McIntyre <scjody@steamballoon.com>
Date:   Mon May 16 21:54:05 2005 -0700

    [PATCH] ieee1394: fix cross_bound check for null ISO packets
    
    Fix cross_bound to not return 1 for zero-length regions.  Fixes regression
    when sending null ISO packets.
    
    Signed-off-by: Jody McIntyre <scjody@steamballoon.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 8d98c5cd41d1932bb76a3945b4e8dea889224d87
Author: Jody McIntyre <scjody@steamballoon.com>
Date:   Mon May 16 21:54:04 2005 -0700

    [PATCH] ieee1394: single buffer fixes to video1394
    
    Apply and fixup patch from Markus Tavenrath <speedygoo@speedygoo.de> for
    video1394 to allow only a single buffer on receive and two buffers on
    transmit.  Tested with libdc1394 and dvconnect (libdv).
    
    Signed-off-by: Dan Dennedy <dan@dennedy.org>
    Signed-off-by: Jody McIntyre <scjody@steamballoon.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 2554bd2a68e2c3ca7f2b953fe2860a9e84a5579a
Author: Jody McIntyre <scjody@steamballoon.com>
Date:   Mon May 16 21:54:03 2005 -0700

    [PATCH] ieee1394: drivers/ieee1394/pcilynx.c: Use the DMA_32BIT_MASK constant
    
    Use the DMA_32BIT_MASK constant from dma-mapping.h when calling
    pci_set_dma_mask() or pci_set_consistent_dma_mask() These patches include
    dma-mapping.h explicitly because it caused errors on some architectures
    otherwise.  See http://marc.theaimsgroup.com/?t=108001993000001&r=1&w=2 for
    details
    
    Signed-off-by: Tobias Klauser <tklauser@nuerscht.ch>
    Signed-off-by: Jody McIntyre <scjody@steamballoon.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 616b859fbd0e59707a24612d5b5fec791156c822
Author: Jody McIntyre <scjody@steamballoon.com>
Date:   Mon May 16 21:54:01 2005 -0700

    [PATCH] ieee1394: remove NULL checks for kfree
    
    This patch removes redundant NULL pointer checks before kfree() in all of
    drivers/ieee1394/
    
    Signed-off-by: Jesper Juhl <juhl-lkml@dif.dk>
    Signed-off-by: Jody McIntyre <scjody@steamballoon.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 9ac485dc37b6336c5bf694f9933f43684fd1fd1e
Author: Jody McIntyre <scjody@steamballoon.com>
Date:   Mon May 16 21:54:00 2005 -0700

    [PATCH] ieee1394: drivers/ieee1394/ieee1394_transactions.c: possible cleanups
    
    This patch contains the following possible cleanups:
    
    - #if 0 the following unused global functions:
      - hpsb_lock
      - hpsb_send_gasp
    
    - ieee1394_transactions.h: remove the stale hpsb_lock64 prototype
    
    Signed-off-by: Adrian Bunk <bunk@stusta.de>
    Signed-off-by: Jody McIntyre <scjody@steamballoon.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit f72cd138e6afc6d93a8e0aacb7e3160cf04d840b
Author: Jody McIntyre <scjody@steamballoon.com>
Date:   Mon May 16 21:53:59 2005 -0700

    [PATCH] ieee1394: drivers/ieee1394/pcilynx.c: remove dead options
    
    The options CONFIG_IEEE1394_PCILYNX_LOCALRAM and CONFIG_IEEE1394_PCILYNX_PORTS
    are not available for some time.
    
    Signed-off-by: Adrian Bunk <bunk@stusta.de>
    Signed-off-by: Jody McIntyre <scjody@steamballoon.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit a1446c7fb7610a7b417d8b2fadb6751f86ee833e
Author: Jody McIntyre <scjody@steamballoon.com>
Date:   Mon May 16 21:53:59 2005 -0700

    [PATCH] ieee1394: feature removal notices
    
    drivers/ieee1394 feature removal notices: amdtp, cmp, legacy rawiso
    interface
    
    Signed-off-by: Jody McIntyre <scjody@steamballoon.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit dfaa9c94b13071c9b5f8578d0ae99acc76c60139
Author: William Lee Irwin III <wli@holomorphy.com>
Date:   Mon May 16 21:53:58 2005 -0700

    [PATCH] profile.c: `schedule' parsing fix
    
    profile=schedule parsing is not quite what it should be.  First, str[7] is
    'e', not ',', but then even if it did fall through, prof_on =
    SCHED_PROFILING would be clobbered inside if (get_option(...)) So a small
    amount of rearrangement is done in this patch to correct it.
    
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 5418b6925c353c8286651b67fdb8559dd9e54e46
Author: Christoph Hellwig <hch@lst.de>
Date:   Mon May 16 21:53:57 2005 -0700

    [PATCH] kill <asm/ioctl32.h>
    
    These days <linux/ioctl32.h> handles everything, no need for an asm
    header on just two architectures.
    
    Signed-off-by: Christoph Hellwig <hch@lst.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit afbf510d47c4009f5d67ec3c0e0b45eb0441bca3
Author: Randy Dunlap <rdunlap@xenotime.net>
Date:   Mon May 16 21:53:56 2005 -0700

    [PATCH] pcmcia/ds: handle any error code
    
    register_chrdev() can return errors (negative) other then -EBUSY, so check
    for any negative error code.
    
    Signed-off-by: Randy Dunlap <rdunlap@xenotime.net>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 24d568ed1b97cb93c2a917cd90296655a8b661a6
Author: Nishanth Aravamudan <nacc@us.ibm.com>
Date:   Mon May 16 21:53:55 2005 -0700

    [PATCH] alpha/osf_sys: use helper functions to convert between tv and jiffies
    
    Use helper functions to convert between timeval structure and jiffies
    rather than custom logic.
    
    Signed-off-by: Nishanth Aravamudan <nacc@us.ibm.com>
    Signed-off-by: Domen Puncer <domen@coderock.org>
    Acked-by: Richard Henderson <rth@twiddle.net>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 3407c0fec3456325826c31792e77a80a6dec0e20
Author: Yoichi Yuasa <yuasa@hh.iij4u.or.jp>
Date:   Mon May 16 21:53:53 2005 -0700

    [PATCH] mips: add resource management to pmu
    
    This patch had added resource management to vr41xx's pmu.
    
    Signed-off-by: Yoichi Yuasa <yuasa@hh.iij4u.or.jp>
    Cc: Ralf Baechle <ralf@linux-mips.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 4c443d1b558b21520bd8fd6140b85cee0756becd
Author: Stephen Smalley <sds@epoch.ncsc.mil>
Date:   Mon May 16 21:53:52 2005 -0700

    [PATCH] selinux: fix avc_alloc_node() oom with no policy loaded
    
    This patch should fix the avc_alloc_node() oom condition that Andrew
    reported when no policy is loaded in SELinux.
    
    Prior to this patch, when no policy was loaded, the SELinux "security
    server" (policy engine) was only returning allowed decisions for the
    requested permissions for each access check.  This caused the cache to
    thrash when trying to use SELinux for real work with no policy loaded
    (typically, the no policy loaded state is only for bootstrapping to the
    point where we can load an initial policy).
    
    This patch changes the SELinux security server to return the complete
    allowed access vector at once, and then to reset the cache after the
    initial policy load to flush the initial cache state created during
    bootstrapping.
    
    Signed-off-by: Stephen Smalley <sds@tycho.nsa.gov>
    Signed-off-by: James Morris <jmorris@redhat.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit b81074800b98ac50b64d4c8d34e8abf0fda5e3d1
Author: Kirill Korotaev <dev@sw.ru>
Date:   Mon May 16 21:53:50 2005 -0700

    [PATCH] do_swap_page() can map random data if swap read fails
    
    There is a bug in do_swap_page(): when swap page happens to be unreadable,
    page filled with random data is mapped into user address space.  The fix is
    to check for PageUptodate and send SIGBUS in case of error.
    
    Signed-Off-By: Kirill Korotaev <dev@sw.ru>
    Signed-Off-By: Alexey Kuznetsov <kuznet@ms2.inr.ac.ru>
    Acked-by: Hugh Dickins <hugh@veritas.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit c64610ba585fabb36be78782868277f3d9741a2e
Author: Andrew Morton <akpm@osdl.org>
Date:   Mon May 16 21:53:49 2005 -0700

    [PATCH] block_read_full_page() get_block() error handling fix
    
    If block_read_full_page() detects an error when running get_block() it will
    run SetPageError(), then it will zero out the block in pagecache and will mark
    the buffer_head uptodate.
    
    So at the end of readahead we end up with a non-uptodate pagecache page which
    is marked PageError.  But it has uptodate buffers.
    
    The pagefault code will run ClearPageError, will launch readpage a second time
    and block_read_full_page() will notice the uptodate buffers and will mark the
    page uptodate as well.  We end up with an uptodate, !PageError page full of
    zeros and the error is lost.
    
    (It seems a little odd that filemap_nopage() runs ClearPageError().  I guess
    all of this adds up to meaning that for each attempted access to the page, the
    pagefault handler will retry the I/O.  Which is good and bad.  If the app is
    ignoring SIGBUS for some reason we could get a lot of back-to-back I/O
    errors.)
    
    Fix it by not marking the pagecache buffer_head as uptodate if the attempt to
    map that buffer to a disk block failed.
    
    Credit-to: Qu Fuping <fs@ercist.iscas.ac.cn>
    
      For reporting the bug and identifying its source.
    
    Signed-off-by: Qu Fuping <fs@ercist.iscas.ac.cn>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 3c0547ba8b3bbd8b26ae35e33ac17ff51f67f78c
Author: Matt Mackall <mpm@selenic.com>
Date:   Mon May 16 21:53:47 2005 -0700

    [PATCH] add_preferred_console() build fix
    
    Move add_preferred_console out of CONFIG_PRINTK so serial console does the
    right thing.
    
    Signed-off-by: Matt Mackall <mpm@selenic.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit e8f5bdb02ce06925e7fc5916125bdebc533d4299
Author: Rik van Riel <riel@redhat.com>
Date:   Mon May 16 21:53:46 2005 -0700

    [PATCH] Makefile include path ordering
    
    The arch Makefile may override the include path order, which is used by Xen
    (and UML?) to make sure include/asm-xen is searched before
    include/asm-i386.
    
    The Makefile change to 2.6.12-rc4 made the top Makefile always override the
    value specified by the arch Makefile.  This trivial patch makes the Xen
    kernel compile again.
    
    Signed-off-by: Rik van Riel <riel@redhat.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 631330afdf9d29fe84526653674e8e061389d8f6
Author: Dominik Hackl <dominik@hackl.dhs.org>
Date:   Mon May 16 21:53:45 2005 -0700

    [PATCH] fix Philips SAA7130/7134 TV dependency problem
    
    Solve a dependency-problem related to the SAA7130/7134 TV-card driver.  The
    driver won't compile with CRC32 disabled, so I added it to the select list.
    
    Signed-off-by: Dominik Hackl <dominik@hackl.dhs.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit f1fc3990e2ffa14310cae89678c0b4ed1a3f094b
Author: Petr Vandrovec <vandrove@vc.cvut.cz>
Date:   Mon May 16 21:53:44 2005 -0700

    [PATCH] serial_cs device identification fix
    
    serial_cs's vendor/device identification got broken by Yum Rayan's change
    '[PATCH] serial_cs: Reduce stack usage in serial_event()' - it changed buf
    type from u_short* to char*, breaking device manufacturer & card number
    retrieval.  Due to this my modem stopped from being recognized as special
    case.
    
    Code will work much better if we'll rely on first_tuple's parser instead of
    doing parse ourselves.  Code also looks simpler after change.
    
    Signed-off-by: Petr Vandrovec <vandrove@vc.cvut.cz>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 4f167fb491725ca0be9df0d76b4b2dd862cdfe0b
Author: Zhang, Yanmin <yanmin.zhang@intel.com>
Date:   Mon May 16 21:53:43 2005 -0700

    [PATCH] spurious interrupt fix
    
    On my IA64 machine, after kernel 2.6.12-rc3 boots, an edge-triggered
    interrupt (IRQ 46) keeps triggered over and over again.  There is no IRQ 46
    interrupt action handler.  It has lots of impact on performance.
    
    Kernel 2.6.10 and its prior versions have no the problem.  Basically,
    kernel 2.6.10 will mask the spurious edge interrupt if the interrupt is
    triggered for the second time and its status includes
    IRQ_DISABLE|IRQ_PENDING.
    
    Originally, IA64 kernel has its own specific _irq_desc definitions in file
    arch/ia64/kernel/irq.c.  The definition initiates _irq_desc[irq].status to
    IRQ_DISABLE.  Since kernel 2.6.11, it was moved to architecture independent
    codes, i.e.  kernel/irq/handle.c, but kernel/irq/handle.c initiates
    _irq_desc[irq].status to 0 instead of IRQ_DISABLE.
    
    Signed-off-by: Zhang Yanmin <yanmin.zhang@intel.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 7baeb6a5ccab2d472679a053e64a63ac423c3a42
Author: Peter Osterlund <petero2@telia.com>
Date:   Mon May 16 21:53:42 2005 -0700

    [PATCH] CDRW/DVD packet writing data corruption fix
    
    I found a bug in the packet writing driver that could cause data
    corruption.  The problem arised if the driver got a write request for a
    sector in a "zone" it was already working on.  In that case it was supposed
    to queue the write request until it was done processing earlier requests
    for the same zone, and instead work on some other zone in the mean time.
    However, if there was no other zone to work on, the driver would initiate
    two packet_data objects for the same zone, causing unpredictable things to
    happen.
    
    Signed-off-by: Peter Osterlund <petero2@telia.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit d0856009dbaf8eca2269d4129bb83940c0d95054
Author: Patrick McHardy <kaber@trash.net>
Date:   Mon May 16 21:53:41 2005 -0700

    [PATCH] crypto: fix null encryption/compression
    
    null_encrypt() needs to copy the data in case src and dst are disjunct,
    null_compress() needs to copy the data in any case as far as I can tell.  I
    joined compress/decompress and encrypt/decrypt to avoid duplicating code.
    
    Without this patch ESP null_enc packets look like this:
    
    IP (tos 0x0, ttl  64, id 23130, offset 0, flags [DF], length: 128)
    10.0.0.1 > 10.0.0.2: ESP(spi=0x0f9ca149,seq=0x4)
    	0x0000:  4500 0080 5a5a 4000 4032 cbef 0a00 0001  E...ZZ@.@2......
    	0x0010:  0a00 0002 0f9c a149 0000 0004 0000 0000  .......I........
    	0x0020:  0000 0000 0000 0000 0000 0000 0000 0000  ................
    	0x0030:  0000 0000 0000 0000 0000 0000 0000 0000  ................
    	0x0040:  0000 0000 0000 0000 0000 0000 0000 0000  ................
    	0x0050:  0000                                     ..
    
    IP (tos 0x0, ttl  64, id 256, offset 0, flags [DF], length: 128)
    10.0.0.2 > 10.0.0.1: ESP(spi=0x0e4f7b51,seq=0x2)
    	0x0000:  4500 0080 0100 4000 4032 254a 0a00 0002  E.....@.@2%J....
    	0x0010:  0a00 0001 0e4f 7b51 0000 0002 a8a8 a8a8  .....O{Q........
    	0x0020:  a8a8 a8a8 a8a8 a8a8 a8a8 a8a8 a8a8 a8a8  ................
    	0x0030:  a8a8 a8a8 a8a8 a8a8 a8a8 a8a8 a8a8 a8a8  ................
    	0x0040:  a8a8 a8a8 a8a8 a8a8 a8a8 a8a8 a8a8 a8a8  ................
    	0x0050:  a8a8                                     ..
    
    Signed-off-by: Patrick McHardy <kaber@trash.net>
    Signed-off-by: Herbert Xu <herbert@gondor.apana.org.au>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit ba32311eb73f624a85a5fc2e043cda8e076f86ef
Author: McMullan, Jason <jason.mcmullan@timesys.com>
Date:   Mon May 16 21:53:40 2005 -0700

    [PATCH] swapout oops fix
    
    Fix OOPS when swapping on a device that doesn't have an unplug_io_fn defined
    (eg, ATA Over Ethernet)
    
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 59afda786a58f2e8f74a48f2af90534d76d5338d
Author: Horst Hummel <horst.hummel@de.ibm.com>
Date:   Mon May 16 21:53:39 2005 -0700

    [PATCH] s390: dasd set online failure
    
    dasd driver changes:
     - The feature check in dasd_generic_online returns an error if
       the devmap entry for the device is not yet available. Check
       for the feature after the device has been created.
     - Do symmetric registration/deregistration of cdev->handler.
    
    Signed-off-by: Martin Schwidefsky <schwidefsky@de.ibm.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 53b21689ba567ad437e4d7917dd9da54a8d6fd5c
Author: Adrian Bunk <bunk@stusta.de>
Date:   Mon May 16 21:53:38 2005 -0700

    [PATCH] drivers/input/keyboard/atkbd.c: fix off by one errors
    
    This patch fixes two possible off by one errors found by the Coverity
    checker (look at the period[i] and delay[j] in the two first unchanged
    lines).
    
    Signed-off-by: Adrian Bunk <bunk@stusta.de>
    Cc: Vojtech Pavlik <vojtech@suse.cz>
    Cc: Dmitry Torokhov <dtor_core@ameritech.net>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 7a019225c797a1047470accee950d69cfe7c59c5
Author: Adrian Bunk <bunk@stusta.de>
Date:   Mon May 16 21:53:37 2005 -0700

    [PATCH] mm/nommu.c: try to fix __vmalloc
    
    Linus changed the second argument of __vmalloc from int to unsigned int
    breaking the compilation for CONFIG_MMU=n configurations (since he only
    changed vmalloc.c but not nommu.c).
    
    Signed-off-by: Adrian Bunk <bunk@stusta.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 59db2e6ed080ac385f19b9f4329133d634215bfd
Author: Andi Kleen <ak@suse.de>
Date:   Mon May 16 21:53:36 2005 -0700

    [PATCH] x86_64: Update defconfig
    
    Update defconfig
    
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 18a2b6471277c9ffbaa14a0c87a11a075eb354bd
Author: Andi Kleen <ak@suse.de>
Date:   Mon May 16 21:53:35 2005 -0700

    [PATCH] x86_64: Don't assume BSP has ID 0 in new smp bootup
    
    This patch removes the assumption that LAPIC entries contain the BSP as its
    first entry.  This is a slight improvement to the temporary fix submitted by
    Suresh Siddha.
    
    - Removes assumption that LAPIC entries contain BSP first.
    
    - Builds x86_acpiid_to_apicid[] and bios_cpu_apicid[] properly with BSP as
      first entry.
    
    - Made maxcpus=1 boot on these systems.  Since the parsing earlier in
      arch/x86_64/kernel/mpparse.c stopped after maxcpus entries, other entries
      were not processed, this causes kernel not to boot on these systems.
    
    TBD: x86_acpiid_to_apicid and bios_cpu_apicid[] seem to be exactly the
         same.  This could be removed, but might need more work to cleanup.
    
    Signed-off-by: Ashok Raj <ashok.raj@intel.com>
    Signed-off-by: Andi Kleen <ak@suse.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 751521149a05e308d863d01ced61080ce1a2ec99
Author: Andi Kleen <ak@suse.de>
Date:   Mon May 16 21:53:34 2005 -0700

    [PATCH] x86_64: Collected NMI watchdog fixes.
    
    Collected NMI watchdog fixes.
    
    - Fix call of check_nmi_watchdog
    
    - Remove earlier move of check_nmi_watchdog to later.  It does not fix the
      race it was supposed to fix fully.
    
    - Remove unused P6 definitions
    
    - Add support for performance counter based watchdog on P4 systems.
    
      This allows to run it only once per second, which saves some CPU time.
      Previously it would run at 1000Hz, which was too much.
    
      Code ported from i386
    
      Make this the default on Intel systems.
    
    - Use check_nmi_watchdog with local APIC based nmi
    
    - Fix race in touch_nmi_watchdog
    
    - Fix bug that caused incorrect performance counters to be programmed in a
      few cases on K8.
    
    - Remove useless check for local APIC
    
    - Use local_t and per_cpu variables for per CPU data.
    
    - Keep other CPUs busy during check_nmi_watchdog to make sure they really
      tick when in lapic mode.
    
    - Only check CPUs that are actually online.
    
    - Various other fixes.
    
    - Fix fallback path when MSRs are unimplemented
    
    Signed-off-by: Andi Kleen <ak@suse.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit f3c5f5e7eeaf7c68ecc1d37200cd1ade0b3da7b9
Author: Andi Kleen <ak@suse.de>
Date:   Mon May 16 21:53:33 2005 -0700

    [PATCH] x86_64: Make vsyscall.c compile without CONFIG_SYSCTL
    
    Originally from Matt Tolentino
    
    Signed-off-by: Andi Kleen <ak@suse.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 376ec33fcb246fdd7de1696d33739a0fd36f6537
Author: Suresh Siddha <suresh.b.siddha@intel.com>
Date:   Mon May 16 21:53:32 2005 -0700

    [PATCH] x86_64: Fix OEM hpet check
    
    Use bitmap_zero instead of bitmap_empty to initialise cpu mask This makes it
    actually run reliable instead of relying on stack state.
    
    Signed-off-by: Suresh Siddha <suresh.b.siddha@intel.com>
    Signed-off-by: Andi Kleen <ak@suse.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 3b9ba4d5e23fcab24dd4d2e46dce11f5863869b4
Author: Andi Kleen <ak@suse.de>
Date:   Mon May 16 21:53:31 2005 -0700

    [PATCH] x86_64: When checking vmalloc mappings don't use pte_page
    
    The PTEs can point to ioremap mappings too, and these are often outside
    mem_map.  The NUMA hash page lookup functions cannot handle out of bounds
    accesses properly.
    
    Signed-off-by: Andi Kleen <ak@suse.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit f6b8d4778c04148729cc0b0dcd335a4411c44276
Author: Andi Kleen <ak@suse.de>
Date:   Mon May 16 21:53:30 2005 -0700

    [PATCH] x86_64: Fix canonical checking for segment registers in ptrace
    
    Allowed user programs to set a non canonical segment base, which would cause
    oopses in the kernel later.
    
    Credit-to: Alexander Nyberg <alexn@dsv.su.se>
    
     For identifying and reporting this bug.
    
    Signed-off-by: Andi Kleen <ak@suse.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit d1099e8a18960693c04507bdd7b9403db70bfd97
Author: Andi Kleen <ak@suse.de>
Date:   Mon May 16 21:53:29 2005 -0700

    [PATCH] x86_64: check if ptrace RIP is canonical
    
    This works around an AMD Erratum.
    
    Signed-off-by: Andi Kleen <ak@suse.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 312df5f1a1da780e084b328bcabb02a6dcd044c3
Author: Andi Kleen <ak@suse.de>
Date:   Mon May 16 21:53:28 2005 -0700

    [PATCH] x86_64: Add pmtimer support
    
    There are unfortunately more and more multi processor Opteron systems which
    don't have HPET timer support in the southbridge.  This covers in particular
    Nvidia and VIA chipsets.  They also don't guarantee that the TSCs are
    synchronized between CPUs; and especially with MP powernow the systems are
    nearly unusable because the time gets very inconsistent between CPUs.
    
    The timer code for x86-64 was originally written under the assumption that we
    could fall back to the HPET timer on such systems.  But this doesn't work
    there.
    
    Another alternative is to use the ACPI PM timer as primary time source.  This
    patch does that.  The kernel only uses PM timer when there is no other choice
    because it has some disadvantages.
    
    Ported over from i386.  It should be faster than the i386 version because I
    dropped the "read three times" workaround, but is still considerable slower
    than HPET and also does not work together with vsyscalls which have to be
    disabled.
    
    Cc: <mark.langsdorf@amd.com>
    Signed-off-by: Andi Kleen <ak@suse.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 0af2be0b721997512191e981a051fcb070b87260
Author: Andi Kleen <ak@suse.de>
Date:   Mon May 16 21:53:27 2005 -0700

    [PATCH] x86_64: Remove unique APIC/IO-APIC ID check
    
    It is unnecessary on modern Intel or AMD systems, and that is all we support
    on x86-64
    
    Also causes problems on various systems
    
    Signed-off-by: Andi Kleen <ak@suse.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 622dcaf974668f7dee252fc6a8f9a2710c2070f4
Author: Andi Kleen <ak@suse.de>
Date:   Mon May 16 21:53:26 2005 -0700

    [PATCH] x86_64: Don't print the internal k8c+ flag in /proc/cpuinfo
    
    It is not very useful to the user and more an kernel internal implementation
    detail.  So hide it.
    
    Signed-off-by: Andi Kleen <ak@suse.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 2942283e970b357c146ebdcbbcc0bdf5048615ff
Author: Andi Kleen <ak@suse.de>
Date:   Mon May 16 21:53:26 2005 -0700

    [PATCH] x86_64: Remove x86_apicid field
    
    Remove x86_apicid field
    
    Signed-off-by: Andi Kleen <ak@suse.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit dda50e716dc9451f40eebfb2902c260e4f62cf34
Author: Andi Kleen <ak@suse.de>
Date:   Mon May 16 21:53:25 2005 -0700

    [PATCH] x86_64: Update TSC sync algorithm
    
    The new TSC sync algorithm recently submitted did not work too well.
    
    The result was that some MP machines where the TSC came up of the BIOS very
    unsynchronized and that did not have HPET support were nearly unusable because
    the time would jump forwards and backwards between CPUs.
    
    After a lot of research ;-) and some more prototypes I ended up with just
    using the one from IA64 which looks best.  It has some internal self tuning
    that should adapt to changing interconnect latencies.  It holds up in my tests
    so far.
    
    I believe it was originally written by David Mosberger, I just ported it over
    to x86-64.  See the inline comment for a description.
    
    This cleans up the code because it uses smp_call_function for syncing instead
    of having custom hooks in SMP bootup.
    
    Please note that the cycle numbers it outputs are too optimistic because they
    do not take into account the latency of WRMSR and RDTSC, which can be hundreds
    of cycles.  It seems to be able to sync a dual Opteron to 200-300 cycles,
    which is probably good enough.
    
    There is a timing window during AP bootup where interrupts can see
    inconsistent time before the TSC is synced.  It is hard to avoid unfortunately
    because we can only do the TSC sync after some setup, and we need to enable
    interrupts before that.  I just ignored it for now.
    
    Signed-off-by: Andi Kleen <ak@suse.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 93ef70a217637ade3f335303a112b22a134a1ec2
Author: Andi Kleen <ak@suse.de>
Date:   Mon May 16 21:53:24 2005 -0700

    [PATCH] x86_64: Don't look up struct page pointer of physical address in iounmap
    
    It could be in a memory hole not mapped in mem_map and that causes the hash
    lookup to go off to nirvana.
    
    Signed-off-by: Andi Kleen <ak@suse.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 1f5ee8da005f50d9f46ae5a7edba9a9c2d37b32e
Author: Andi Kleen <ak@suse.de>
Date:   Mon May 16 21:53:22 2005 -0700

    [PATCH] x86_64: Increase number of IO-APICs
    
    Needed by big systems and only costs a few K of memory.
    
    Signed-off-by: Andi Kleen <ak@suse.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit a158608bf4c6260caf26089b00a000851e11357a
Author: Andi Kleen <ak@suse.de>
Date:   Mon May 16 21:53:21 2005 -0700

    [PATCH] x86_64/i386: fix defaults for physical/core id in /proc/cpuinfo
    
    Last round hopefully of cpu_core_id changes hopefully fow now:
    
    - Always initialize cpu_core_id for all CPUs, even when no dual core setup
      is detected.  This prevents funny /proc/cpuinfo output
    
    - Do the same with phys_proc_id[] even when no HyperThreading - dito.
    
    - Use the CPU APIC-ID from CPUID 1 instead of the linux virtual CPU number
      to identify the core for AMD dual core setups.
    
    Patch for i386/x86-64.
    
    Signed-off-by: Andi Kleen <ak@suse.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 637716a3825e186555361574aa1fa3c0ebf8018b
Author: Andi Kleen <ak@suse.de>
Date:   Mon May 16 21:53:20 2005 -0700

    [PATCH] x86_64: Add a guard page at the end of the 47bit address space
    
    This works around a bug in the AMD K8 CPUs.
    
    Signed-off-by: Andi Kleen <ak@suse.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 10ffdbb8d605be88b148f127ec86452f1364d4f0
Author: Andi Kleen <ak@suse.de>
Date:   Mon May 16 21:53:19 2005 -0700

    [PATCH] x86_64: Readd missing tests in entry.S
    
    Cleans up the system exit call slightly and synchronizes with my tree again.
    
    Signed-off-by: Andi Kleen <ak@suse.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit ac6b931c44fd9988eaa821c339d54ba06b212412
Author: Andi Kleen <ak@suse.de>
Date:   Mon May 16 21:53:19 2005 -0700

    [PATCH] x86_64: Reduce NMI watchdog stack usage
    
    NR_CPUs can be quite big these days.  kmalloc the per CPU array instead of
    putting it onto the stack
    
    Signed-off-by: Andi Kleen <ak@suse.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 7179906293ebdc333f14a03d3e58b03604848f3c
Author: Kirill Korotaev <dev@sw.ru>
Date:   Mon May 16 21:53:18 2005 -0700

    [PATCH] mm acct accounting fix
    
    This patch fixes mm->total_vm and mm->locked_vm acctounting in case when
    move_page_tables() fails inside move_vma().
    
    Signed-Off-By: Kirill Korotaev <dev@sw.ru>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 202d182a92c60416680e31baa697faa60b0882f5
Author: Bjorn Steinbrink <B.Steinbrink@gmx.de>
Date:   Mon May 16 21:53:17 2005 -0700

    [PATCH] mm: fix rss counter being incremented when unmapping
    
    This patch fixes a bug introduced by the "mm counter operations through
    macros" patch, which replaced a decrement operation in with an increment
    macro in try_to_unmap_one().
    
    Signed-off-by: Björn Steinbrink <B.Steinbrink@gmx.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 7a5febe9ffeecd1e78c5b505260ccc1ef18021b4
Author: NeilBrown <neilb@cse.unsw.edu.au>
Date:   Mon May 16 21:53:16 2005 -0700

    [PATCH] md: set the unplug_fn and issue_flush_fn for md devices *after* committed to creation
    
    We we set the too early, they may still be in place and possibly get called
    even though the array didn't get set up properly.
    
    Signed-off-by: Neil Brown <neilb@cse.unsw.edu.au>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 29ac8e056f2016a8404edc02749d095019aa1f82
Author: NeilBrown <neilb@cse.unsw.edu.au>
Date:   Mon May 16 21:53:15 2005 -0700

    [PATCH] md: fix splitting of md/linear request that cross a device boundary
    
    When a request crosses a boundary between devices, it needs to be split.
    But where we should calculate the amount of the request before the boundary
    to find the split-point, we care currently calculating the amount that is
    *after* the boundary !!!
    
    Signed-off-by: Neil Brown <neilb@cse.unsw.edu.au>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 8f332287bc3f2801ba43682fd79baf24dc8ac1ce
Author: Paolo 'Blaisorblade' Giarrusso <blaisorblade@yahoo.it>
Date:   Mon May 16 21:53:14 2005 -0700

    [PATCH] uml: change memcpy to memmove
    
    Replace one memcpy() call with overlapping source and dest arguments with
    one call to memmove(), to avoid data corruption.
    
    Signed-off-by: Paolo 'Blaisorblade' Giarrusso <blaisorblade@yahoo.it>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 02048817a70ad04dda5b30ad876c42a232229c99
Author: Paolo 'Blaisorblade' Giarrusso <blaisorblade@yahoo.it>
Date:   Mon May 16 21:53:14 2005 -0700

    [PATCH] uml: remove elf.h
    
    Actually remove elf.h in the tree.  The previous patch, due to a quilt
    bug/misuse, left it in the tree as a 0-length file, preventing the build to
    see it as missing and to generate a symlink in its place.
    
    Signed-off-by: Paolo 'Blaisorblade' Giarrusso <blaisorblade@yahoo.it>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit a123edab03ac39e08c2f9cb4fc1af07e099c68bc
Author: Peter Lundkvist <p.lundkvist@telia.com>
Date:   Mon May 16 21:53:12 2005 -0700

    [PATCH] Intel 6300ESB TCO timer support
    
    Additional i8xx_tco device support.
    
    Cc: David Hardeman <david@2gen.com>
    Cc: <wim@iguana.be>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 643bdc6fc0e1928f39b4a3f486447024216ca50f
Author: Zhang, Yanmin <yanmin.zhang@intel.com>
Date:   Mon May 16 21:53:11 2005 -0700

    [PATCH] ide proc destroy error
    
    Kernel 2.6 has an ide proc destroy error. Run #modprobe ide-core and
    #rmmod ide-core, then kernel will dump stack information like below.
    
    **********Log******************
    Badness in remove_proc_entry at fs/proc/generic.c:693
    
    Call Trace:
     [<a0000001000117e0>] show_stack+0x80/0xa0
                                    sp=3De0000003e05dfbe0 =
    bsp=3De0000003e05d0ea8
     [<a0000001000120b0>] dump_stack+0x30/0x60
                                    sp=3De0000003e05dfdb0 =
    bsp=3De0000003e05d0e90
     [<a000000100183090>] remove_proc_entry+0x530/0x540
                                    sp=3De0000003e05dfdb0 =
    bsp=3De0000003e05d0e20
     [<a000000221cbd280>] proc_ide_destroy+0x120/0x140 [ide_core]
                                    sp=3De0000003e05dfdc0 =
    bsp=3De0000003e05d0df0
     [<a000000221ca65f0>] cleanup_module+0x50/0xa0 [ide_core]
                                    sp=3De0000003e05dfdc0 =
    bsp=3De0000003e05d0dd0
     [<a0000001000a9e10>] sys_delete_module+0x390/0x580
                                    sp=3De0000003e05dfdc0 =
    bsp=3De0000003e05d0d50
     [<a00000010000af40>] ia64_ret_from_syscall+0x0/0x20
                                    sp=3De0000003e05dfe30 =
    bsp=3De0000003e05d0d50
     [<a000000000010640>] _stext+0xffffffff00010640/0x400
                                    sp=3De0000003e05e0000 =
    bsp=3De0000003e05d0d50
    
    Signed-off-by: Zhang Yanmin <yanmin.zhang@intel.com>
    Cc: Bartlomiej Zolnierkiewicz <B.Zolnierkiewicz@elka.pw.edu.pl>
    Cc: Greg KH <greg@kroah.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 64d13c00cf1f7c3d2c1ff449e2a0500ab568d319
Author: Hugh Dickins <hugh@veritas.com>
Date:   Mon May 16 21:53:09 2005 -0700

    [PATCH] fix impossible VmallocChunk
    
    VmallocTotal: 34359738367 kB
    VmallocUsed:    266288 kB
    VmallocChunk: 18014366299193295 kB
    is unsettling - x86_64 and some other architectures keep a separate address
    range for modules in vmalloc's vmlist, which /proc/meminfo should pass over.
    
    Signed-off-by: Hugh Dickins <hugh@veritas.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit baae956100334ffbd101eea5eeea9a5ac9cf3abd
Author: Dmitry Torokhov <dtor_core@ameritech.net>
Date:   Mon May 16 21:53:09 2005 -0700

    [PATCH] serio 'id' attributes
    
    move serio port's id attributes into separate subdirectory:
           ..devices/serioX/id_type  -> ..devices/serioX/id/type
           ..devices/serioX/id_proto -> ..devices/serioX/id/proto
    
    Signed-off-by: Dmitry Torokhov <dtor@mail.ru>
    Cc: Vojtech Pavlik <vojtech@suse.cz>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 1ff2c873ca11f9e6abffb004b908756b27597672
Author: Dmitry Torokhov <dtor_core@ameritech.net>
Date:   Mon May 16 21:53:07 2005 -0700

    [PATCH] serport oops fix
    
    serport - avoid calling serio_interrupt or serio_write_wakeup on unregistered
    port.  Also fix memory leak which could happen if serport was left unused by
    moving serio allocation down to serport_ldisc_read.
    
    Signed-off-by: Dmitry Torokhov <dtor@mail.ru>
    Cc: Vojtech Pavlik <vojtech@suse.cz>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit f3a5c73d5ecb40909db662c4d2ace497b25c5940
Author: Dmitry Torokhov <dtor_core@ameritech.net>
Date:   Mon May 16 21:53:06 2005 -0700

    [PATCH] ALPS resume fix
    
    ALPS needs to be reset for detection to work reliably when reconnecting.
    
    Signed-off-by: Dmitry Torokhov <dtor@mail.ru>
    Cc: Vojtech Pavlik <vojtech@suse.cz>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 64b14d375263019753dd1405e4edd91a1715301d
Author: Andrew Morton <akpm@osdl.org>
Date:   Mon May 16 21:53:06 2005 -0700

    [PATCH] alps printk tidy
    
    Make the alps printk output look consistent.
    
    Cc: Vojtech Pavlik <vojtech@suse.cz>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 0c3f2be423dafb9f914afe85e532e3fffd502fde
Author: Dmitry Torokhov <dtor_core@ameritech.net>
Date:   Mon May 16 21:53:04 2005 -0700

    [PATCH] serio resume fix
    
    serio - do not attempt to immediately disconnect port if resume failed, let
    kseriod take care of it.  Otherwise we may attempt to unregister associated
    input devices which will generate hotplug events which are not handled well
    during swsusp.
    
    Signed-off-by: Dmitry Torokhov <dtor@mail.ru>
    Cc: Vojtech Pavlik <vojtech@suse.cz>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 135255605d089202bec61b4a000ee762e9bc9d9c
Author: Pete Jewell <pete@phraxos.nildram.co.uk>
Date:   Mon May 16 21:53:03 2005 -0700

    [PATCH] Fix for bttv driver (v0.9.15) for Leadtek WinFast VC100 XP capture cards
    
    This is a tiny patch that fixes bttv-cards.c so that Leadtek WinFast VC100
    XP video capture cards work.  I've been advised to post it here after
    having already posted it to the v4l mailing list.
    
    Acked-by: Gerd Knorr <kraxel@bytesex.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 360b52b08972ada8fd4421e9a7bcbe1ea186c20e
Author: Greg KH <gregkh@suse.de>
Date:   Tue May 10 06:45:10 2005 -0700

    [PATCH] USB: add modalias sysfs file for usb devices
    
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 25b6f08e3fa0d84e26a373a205cfdad208b54af7
Author: Lonnie Mendez <lmendez19@austin.rr.com>
Date:   Tue May 10 17:09:52 2005 -0500

    [PATCH] USB: cypress_m8: add support for the DeLorme Earthmate lt-20
    
    This patch adds support for the DeLorme Earthmate lt-20 to the
    cypress_m8 driver.  The device was tested and found to be compatible
    with the cypress_m8 driver.  This is a resend with the complete patch
    which properly compiles.
    
    Adds support for the DeLorme Earthmate lt-20 to the cypress_m8 driver.
    
    Signed-off-by: Lonnie Mendez <lmendez19@austin.rr.com>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 4756ae5b5234e08150ac089f7d989613948f00e5
Author: David Brownell <david-b@pacbell.net>
Date:   Mon May 9 17:23:51 2005 -0700

    [PATCH] USB: ehci suspend must stop timer
    
    Force the EHCI watchdog timer off during suspend, in case for some
    reason it was still running after the root hub suspended.
    
    Signed-off-by: David Brownell <dbrownell@users.sourceforge.net>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 80615f81534109a22a732d0328d63ced4432824e
Author: David Brownell <david-b@pacbell.net>
Date:   Tue May 10 06:45:10 2005 -0700

    [PATCH] USB: usbnet driver fixes
    
    Updates to the usbnet driver:
    
     - Remove a warning when built with Zaurus support but not CDC Ethernet;
       just moves an #ifdef to cover more code
    
     - Two tweaks to the pseudo-MDLM support:
        * correctly handle _either_ of the two GUIDs
        * ignore a padding bit that doesn't seem necessary
    
     - Remove ID for one Motorola phone that uses the MDLM stuff.
    
    It also updates the Kconfig helptext to make it clearer that the "Zaurus"
    configuration option supports an increasing (sigh) family of nonstandard
    peripheral protocols.
    
    Signed-off-by: David Brownell <dbrownell@users.sourceforge.net>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 118326e940bdecef6c459d42ccf05256ba86daa7
Author: Peter Osterlund <petero2@telia.com>
Date:   Sat May 14 00:58:30 2005 -0700

    [PATCH] Fix root hole in pktcdvd
    
    ioctl_by_bdev may only be used INSIDE the kernel.  If the "arg" argument
    refers to memory that is accessed by put_user/get_user in the ioctl
    function, the memory needs to be in the kernel address space (that's the
    set_fs(KERNEL_DS) doing in the ioctl_by_bdev).  This works on i386 because
    even with set_fs(KERNEL_DS) the user space memory is still accessible with
    put_user/get_user.  That is not true for s390.  In short the ioctl
    implementation of the pktcdvd device driver is horribly broken.
    
    Signed-off-by: Peter Osterlund <petero2@telia.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 68f66feb300423bb9ee5daecb1951af394425a38
Author: Stephen Tweedie <sct@redhat.com>
Date:   Fri May 13 23:31:19 2005 -0400

    [PATCH] Fix root hole in raw device
    
    [Patch] Fix raw device ioctl pass-through
    
    Raw character devices are supposed to pass ioctls through to the block
    devices they are bound to.  Unfortunately, they are using the wrong
    function for this: ioctl_by_bdev(), instead of blkdev_ioctl().
    
    ioctl_by_bdev() performs a set_fs(KERNEL_DS) before calling the ioctl,
    redirecting the user-space buffer access to the kernel address space.
    This is, needless to say, a bad thing.
    
    This was noticed first on s390, where raw IO was non-functioning.  The
    s390 driver config does not actually allow raw IO to be enabled, which
    was the first part of the problem.  Secondly, the s390 kernel address
    space is distinct from user, causing legal raw ioctls to fail.  I've
    reproduced this on a kernel built with 4G:4G split on x86, which fails
    in the same way (-EFAULT if the address does not exist kernel-side;
    returns success without actually populating the user buffer if it does.)
    
    The patch below fixes both the config and address-space problems.  It's
    based closely on a patch by Jan Glauber <jang@de.ibm.com>, which has
    been tested on s390 at IBM.  I've tested it on x86 4G:4G (split address
    space) and x86_64 (common address space).
    
    Kernel-address-space access has been assigned CAN-2005-1264.
    
    Signed-off-by: Stephen Tweedie <sct@redhat.com>
    Signed-off-by: Dave Jones <davej@redhat.com>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit a84a505956f5c795a9ab3d60d97b6b91a27aa571
Author: Greg Kroah-Hartman <gregkh@suse.de>
Date:   Wed May 11 00:10:44 2005 -0700

    [PATCH] fix Linux kernel ELF core dump privilege elevation
    
    As reported by Paul Starzetz <ihaquer@isec.pl>
    
    Reference: CAN-2005-1263
    
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit d3f0fcec2d50a18a84c4f3dd7683206ed37ca009
Author: Linus Torvalds <torvalds@ppc970.osdl.org>
Date:   Mon May 16 20:06:47 2005 -0700

    Automatic merge of master.kernel.org:/pub/scm/linux/kernel/git/jgarzik/netdev-2.6.git

commit 8711a1b902e691c9b3bbd0d0624f836abe9641ca
Author: Russell King <rmk@dyn-67.arm.linux.org.uk>
Date:   Mon May 16 23:36:22 2005 +0100

    [PATCH] ARM: Fix build error
    
    Mainline kernels don't have VECTORS_HIGH nor COPYPAGE_MINICACHE yet.
    
    Signed-off-by: Russell King <rmk@arm.linux.org.uk>

commit 768cbfbc5273bad91afe12b81471f563b288118a
Author: Linus Torvalds <torvalds@ppc970.osdl.org>
Date:   Mon May 16 10:34:52 2005 -0700

    Automatic merge of master.kernel.org:/home/rmk/linux-2.6-serial.git

commit 2a4a7e02e27b4f542473772d588f81759c209fb3
Author: Linus Torvalds <torvalds@ppc970.osdl.org>
Date:   Mon May 16 10:27:11 2005 -0700

    Automatic merge of master.kernel.org:/home/rmk/linux-2.6-rmk.git

commit c8920ba041c8934b29370f5d62ab9ea8f147966b
Author: Daniel Andersen <daniel@linux-user.net>
Date:   Thu May 5 15:14:09 2005 -0700

    [PATCH] wireless: 3CRWE154G72 Kconfig help fix
    
    Version 2 of the 3com OfficeConnect 11g Cardbus Card aka 3CRWE154G72 is not
    supported by the prism54 project.  To stop confusion, the kernel
    documentation should state so as 3com made a good job hiding the version.
    
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    
    diff -puN drivers/net/wireless/Kconfig~wireless-3crwe154g72-kconfig-help-fix drivers/net/wireless/Kconfig

commit c4cc26d3310a6614a20e32276228a5d44159fc9b
Author: Jiri Benc <jbenc@suse.cz>
Date:   Wed Apr 27 12:48:56 2005 +0200

    [PATCH] Typo in tulip driver
    
    This patch fixes a typo in tulip driver in 2.6.12-rc3.

commit 562faf469f35bf63c0b021550811280c81bdc52e
Author: James Harper <james.harper@bendigoit.com.au>
Date:   Thu May 5 15:14:18 2005 -0700

    [PATCH] fix PROMISC/bridging in TLAN driver
    
    This has been a problem for me for ages.  When using bridging, the driver
    is switched into promiscuous mode before the link init is complete.  The
    init complete routine then resets the promisc bit on the card so the kernel
    still thinks the card is in promiscuous mode but the card isn't.  doh.
    
    I think this bug only shows up in bridging when the bridge is started at
    boot time (or something else that sets promisc at the same time the card
    was started).  If promisc is enabled later it works.
    
    Here's a trivial (and hopefully correct) patch that works for me. It
    just calls the promisc/multicast setup routine after init.
    
    Cc: Jeff Garzik <jgarzik@pobox.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>

commit 99718699f5746cc365f3a9ab4769568a1da97635
Author: Geoff Levand <geoffrey.levand@am.sony.com>
Date:   Thu Apr 14 11:20:32 2005 -0700

    [PATCH] {PATCH] Fix IBM EMAC driver ioctl bug
    
    Fix IBM EMAC driver ioctl bug.
    
    I found IBM EMAC driver bug.
    So mii-tool command print wrong status.
    
      # mii-tool
      eth0: 10 Mbit, half duplex, no link
      eth1: 10 Mbit, half duplex, no link
    
    I can get correct status on fixed kernel.
    
      # mii-tool
      eth0: negotiated 100baseTx-FD, link okZZ
      eth1: negotiated 100baseTx-FD, link ok
    
    Hiroaki Fuse
    
    Signed-off-by: Geoff Levand <geoffrey.levand@am.sony.com> for CELF

commit c16ef1ceedff27c1b452724ca7f89b729651098f
Author: Benjamin LaHaise <bcrl@kvack.org>
Date:   Wed Apr 6 11:17:59 2005 -0400

    [PATCH] ns83820 update
    
    Changes:
    - improved DAC ifdefs from Andi Kleen
    - removal of dead code from Adrian Bunk
    - fix half duplex collision behaviour

commit f7a3aae1723e7ffc9c4fcdb489365da7a3d81255
Author: Al Viro <viro@www.linux.org.uk>
Date:   Sun Apr 3 09:15:52 2005 +0100

    [PATCH] drivers/net/wireless enabled by wrong option
    
    	NET_WIRELESS is only a subset of the stuff in drivers/net/wireless;
    NET_RADIO is what covers all of them.
    Signed-off-by: Al Viro <viro@parcelfarce.linux.theplanet.co.uk>

commit 4b40033ef110b833986c1a1d958a951b695f9fbc
Author: Domen Puncer <domen@coderock.org>
Date:   Sun May 15 16:01:50 2005 -0700

    [SPARC]: Eliminate local MIN/MAX macros in drivers/sbus/char/aurora.c
    
    From: Christophe Lucas <clucas@rotomalug.org>
    
    min/max macros from kernel.h are safe, a lot of handcrafted MIN/MAX are
    not.
    
    Signed-off-by: Christophe Lucas <clucas@rotomalug.org>
    Signed-off-by: Domen Puncer <domen@coderock.org>

commit cdcca89e1a90fa9112260bd6384f20fcc4280e21
Author: Brett Russ <russb@emc.com>
Date:   Mon Mar 28 15:10:27 2005 -0500

    [PATCH] libata: flush COMRESET set and clear
    
    Updated patch to fix erroneous flush of COMRESET set and missing flush
    of COMRESET clear.  Created a new routine scr_write_flush() to try to
    prevent this in the future.  Also, this patch is based on libata-2.6
    instead of the previous libata-dev-2.6 based patch.
    
    Signed-off-by: Brett Russ <russb@emc.com>
    
    Index: libata-2.6/drivers/scsi/libata-core.c
    ===================================================================

commit 21b1ed74ee3667dcabcba92e486988ea9119a085
Author: Albert Lee <albertcc@tw.ibm.com>
Date:   Fri Apr 29 17:34:59 2005 +0800

    [PATCH] libata: Prevent the interrupt handler from completing a command twice
    
    Problem:
       During the libata CD-ROM stress test, sometimes the "BUG: timeout
    without command" error is seen.
    
    Root cause:
      Unexpected interrupt occurs after the ata_qc_complete() is called,
    but before the SCSI error handler.  The interrupt handler is invoked
    before the SCSI error handler, and it clears the command by calling
    ata_qc_complete() again.  Later when the SCSI error handler is run,
    the ata_queued_cmd is already gone, causing the "BUG: timeout without
    command" error.
    
    Changes:
      - Use the ATA_QCFLAG_ACTIVE flag to prevent the interrupt handler
    from completing the command twice, before the scsi_error_handler.
    
    Signed-off-by: Albert Lee <albertcc@tw.ibm.com>

commit 15efa9bb2d4da7cd9feb1c67fcf3d9e0e1bd00c6
Author: Stephen Hemminger <shemminger@osdl.org>
Date:   Wed May 4 15:33:11 2005 -0700

    [PATCH] tlan: restore deleted module parameters.
    
    The module parameter values got lost in the conversion to the new module_param
    interface. This should fix it.
    
    Signed-off-by: Stephen Hemminger <shemminger@osdl.org>
    
    Index: tlan/drivers/net/tlan.c
    ===================================================================

commit 6da0f685935e13458a2206ac872d0d3c67a52f65
Author: Adrian Bunk <bunk@stusta.de>
Date:   Sat Apr 30 13:52:49 2005 +0200

    [PATCH] SIS900 must select MII
    
    This patch fixes the following compile error caused by bk-netdev:
    
    <--  snip  -->
    
    ...
      LD      .tmp_vmlinux1
    drivers/built-in.o(.text+0x98528): In function `sis900_get_settings':
    : undefined reference to `mii_ethtool_gset'
    drivers/built-in.o(.text+0x98538): In function `sis900_set_settings':
    : undefined reference to `mii_ethtool_sset'
    drivers/built-in.o(.text+0x98517): In function `sis900_get_link':
    : undefined reference to `mii_link_ok'
    drivers/built-in.o(.text+0x98547): In function `sis900_nway_reset':
    : undefined reference to `mii_nway_restart'
    make: *** [.tmp_vmlinux1] Error 1
    
    <--  snip  -->
    
    Signed-off-by: Adrian Bunk <bunk@stusta.de>
    Signed-off-by: Daniele Venzano <venza@brownhat.org>

commit 1bcd315362e215a72b56d1330bbf32f1c74eefb5
Author: Don Fry <brazilnut@us.ibm.com>
Date:   Fri Apr 29 14:51:17 2005 -0700

    [PATCH] pcnet32: fix resource leak with loopback test
    
    When running the loopback test, resources are not properly released on
    completion.  This patch frees all transmit resources after running the
    loopback test.  Tested on ia32 and ppc64 hardware.
    
    Signed-off-by: Don Fry <brazilnut@us.ibm.com>

commit 41480af27a85d6008d9e11db8bc2730407c25e1d
Author: Dan Williams <dcbw@redhat.com>
Date:   Tue May 10 09:45:51 2005 -0400

    [PATCH] wireless/airo: WEXT and quality corrections
    
    This patch brings the airo driver into line with the current
    WEXT specification of signal quality.  It also fixes the values
    used to determine signal quality and level for MPI & PCMCIA 350
    cards.  It turns out that BSSListRid.rssi was actually in dBm
    for 350 series cards, and that we can use the normalized
    signal strength reported by the card as our "quality" value, on
    a scale of 0 - 100.  Since signal level values are in dBm for
    this driver, max_qual->level MUST be 0, as specified in the WEXT
    spec.  This patch also uses the IW_QUAL constants new in WEXT
    version 17.
    
    Signed-off-by: Dan Williams <dcbw@redhat.com>

commit 760f86d78d92f39e2ceb55b40f0885eb755c8c2f
Author: Herbert Xu <herbert@gondor.apana.org.au>
Date:   Sat Apr 16 16:24:16 2005 +1000

    [PATCH] Fw: [Bugme-new] [Bug 4482] New: natsemi: incorrect initialization of IPv6 Neighbor-discovery multicast
    
    On Wed, Apr 13, 2005 at 05:36:42PM +0000, Andrew Morton wrote:
    >            Summary: natsemi: incorrect initialization of IPv6 Neighbor-
    >                     discovery multicast
    
    I've got a pair of FA312 cards and this problem has bothered me
    for ages.  This has finally prompted me to do something about it :)
    
    Turns out that somebody wasn't following the documentation.  We were
    doing 16-bit writes to 32-bit registers which led to some addresses
    working and others not so lucky.
    
    This patch should fix the problem.
    
    Signed-off-by: Herbert Xu <herbert@gondor.apana.org.au>

commit e885b5e83965c320e8eff1ec3ebfbf821b375568
Author: simon@thekelleys.org.uk <simon@thekelleys.org.uk>
Date:   Sat May 7 21:33:31 2005 +0100

    [PATCH] atmel wireless
    
    Below is a one-liner for the atmel wireless driver, just adding
    another card to the table.

commit 22c6d143f33f10721216a8cfa3a83f7edfc2bd4e
Author: Manfred Spraul <manfred@colorfullife.com>
Date:   Tue Apr 19 21:17:09 2005 +0200

    [PATCH] forcedeth: Update error handling
    
    Ayaz wrote an update to the error handling for forcedeth (which I
    modified heavily, thus all bugs are mine):
    The ERROR4 bit is not a fatal error, it just indicates a mismatch
    between the actual packet len and the len according to the 802.3 header.
    The patch adds proper handling.
    The patch also removes the code that drops all packets with RX_ERROR &
    (!RX_FRAMINGERR): ERROR4 errors are also not fatal.

commit b2e0852e1eee7c445b1789bef41204b64f981102
Author: Michael Ellerman <michael@ellerman.id.au>
Date:   Thu May 12 18:09:45 2005 +1000

    [PATCH] iseries_veth: Cleanup skbs to prevent unregister_netdevice() hanging
    
    Hi Andrew, Jeff,
    
    The iseries_veth driver is badly behaved in that it will keep TX packets
    hanging around forever if they're not ACK'ed and the queue never fills up.
    
    This causes the unregister_netdevice code to wait forever when we try to take
    the device down, because there's still skbs around with references to our
    struct net_device.
    
    There's already code to cleanup any un-ACK'ed packets in veth_stop_connection()
    but it's being called after we unregister the net_device, which is too late.
    
    The fix is to rearrange the module exit function so that we cleanup any
    outstanding skbs and then unregister the driver.
    
    Signed-off-by: Michael Ellerman <michael@ellerman.id.au>

commit 41664c03f6c96a1f8a91714309b36f1b5ca85610
Author: Michael Ellerman <michael@ellerman.id.au>
Date:   Thu May 12 17:55:08 2005 +1000

    [PATCH] iseries_veth: Don't leak skbs in RX path
    
    Hi Andrew, Jeff,
    
    Under some strange circumstances the iseries_veth driver can leak skbs.
    
    Fix is simply to call dev_kfree_skb() in the right place.
    Fix up the comment as well.
    
    Signed-off-by: Michael Ellerman <michael@ellerman.id.au>

commit eb235aef724568ae15af831968000cf9a3974b26
Author: Michael Ellerman <michael@ellerman.id.au>
Date:   Thu May 12 17:53:18 2005 +1000

    [PATCH] iseries_veth: Set dev->trans_start so watchdog timer works right
    
    Hi Andrew, Jeff,
    
    The iseries_veth driver doesn't set dev->trans_start in it's TX path. This
    will cause the net device watchdog timer to fire earlier than we want it to,
    which causes the driver to needlessly reset its connections to other LPARs.
    
    Signed-off-by: Michael Ellerman <michael@ellerman.id.au>

commit f27eff1ffd65236b8e421188f76ad1b0b94e06eb
Author: Michael Ellerman <michael@ellerman.id.au>
Date:   Thu May 12 17:47:27 2005 +1000

    [PATCH] iseries_veth: Don't send packets to LPARs which aren't up
    
    Hi Andrew, Jeff,
    
    The iseries_veth driver has a logic bug which means it will erroneously
    send packets to LPARs for which we don't have a connection.
    
    This usually isn't a big problem because the Hypervisor call fails
    gracefully and we return, but if packets are TX'ed during the negotiation
    of the connection bad things might happen.
    
    Regardless, the right thing is to bail early if we know there's no
    connection.
    
    Signed-off-by: Michael Ellerman <michael@ellerman.id.au>

commit 05e08a2a297371564020f76d1bf8b3a931d5e1ed
Author: Frank Pavlic <pavlic@de.ibm.com>
Date:   Thu May 12 20:39:09 2005 +0200

    [PATCH] s390: qeth bug fixes
    
    [patch 10/10] s390: qeth bug fixes.
    
    From: Frank Pavlic <pavlic@de.ibm.com>
    
    qeth network driver related changes:
     - due to OSA hardware changes in TCP Segmentation Offload
       support we are able now to pack TSO packets too.
       This fits perfectly in design of qeth buffer handling and
       sending data respectively.
     - remove skb_realloc_headroom from the sending path since
       hard_header_len value provides enough headroom now.
     - device recovery behaviour improvement
     - bug fixed in Enhanced Device Driver Packing functionality
    
    Signed-off-by: Frank Pavlic <pavlic@de.ibm.com>

commit 9a4558193662e933588ee53e0202c103a68c9366
Author: Frank Pavlic <pavlic@de.ibm.com>
Date:   Thu May 12 20:38:28 2005 +0200

    [PATCH] s390: qeth bug fixes
    
    [patch 9/10] s390: qeth bug fixes.
    
    From: Frank Pavlic <pavlic@de.ibm.com>
    
    qeth network driver changes:
     - Use sizeof(__u16) instead of '2' in qeth_fill_header.
    
    Signed-off-by: Frank Pavlic <pavlic@de.ibm.com>

commit e23dd9cdd676323c95fab47dc55123ba18f7e1ff
Author: Frank Pavlic <pavlic@de.ibm.com>
Date:   Thu May 12 20:38:11 2005 +0200

    [PATCH] s390: fakell for high speed token ring
    
    [patch 8/10] s390: fakell for high speed token ring.
    
    From: Michael Holzheu <holzheu@de.ibm.com>
    
    Implement fake-link-layer for high speed token ring. Without it
    token ring packages get leading ethernet headers, which confuses
    dhcp.
    
    Signed-off-by: Frank Pavlic <pavlic@de.ibm.com>

commit d801145d910cc4a0fb418dda1dee227cec993cbd
Author: Frank Pavlic <pavlic@de.ibm.com>
Date:   Thu May 12 20:37:53 2005 +0200

    [PATCH] s390: qeth bug fixes
    
    [patch 7/10] s390: qeth bug fixes.
    
    From: Frank Pavlic <pavlic@de.ibm.com>
    
    qeth network driver changes:
     - Removed redundant code, use the same qeth_fill_buffer_frag
       for TSO path either
     - Using skb->frags solely is not correct since skb->data still
       points to the beginning of the whole data, even when it is
       a small portion we have to fill the qdio buffer with it.
    
    Signed-off-by: Frank Pavlic <pavlic@de.ibm.com>

commit 5e39f2933f6707fc824b5e419dcac8ced67a57b6
Author: Frank Pavlic <pavlic@de.ibm.com>
Date:   Thu May 12 20:37:00 2005 +0200

    [PATCH] s390: enable iucv_send2way_xxx functions
    
    [patch 6/10] s390: enable iucv_send2way_xxx functions.
    
    From: Ursula Braun-Krahl <braunu@de.ibm.com>
    
    The SSL-Server of z/VM wants to use the iucv_send2way
    and iucv_send2way_array function. Enable them again.
    
    Signed-off-by: Frank Pavlic <pavlic@de.ibm.com>

commit 7394c928c849fe2ea5c20b6d73cbe7f220810d94
Author: Frank Pavlic <pavlic@de.ibm.com>
Date:   Thu May 12 20:36:47 2005 +0200

    [PATCH] s390: ctc code cleanup
    
    [patch 5/10] s390: ctc code cleanup.
    
    From: Peter Tiedemann <ptiedem@de.ibm.com>
    
    ctc network driver changes:
     - Some code cleanup.
    
    Signed-off-by: Martin Schwidefsky <schwidefsky@de.ibm.com>

commit 7f81947b46c3efacc084ac5033f3fed702e46532
Author: Frank Pavlic <pavlic@de.ibm.com>
Date:   Thu May 12 20:36:22 2005 +0200

    [PATCH] s390: schedule_timeout cleanup in ctctty
    
    [patch 4/10] s390: schedule_timeout cleanup in ctctty.
    
    From: Domen Puncer <domen@coderock.org>
    
    Use msleep_interruptible() instead of schedule_timeout()
    to guarantee the task delays as expected.
    
    Signed-off-by: Nishanth Aravamudan <nacc@us.ibm.com>
    Signed-off-by: Maximilian Attems <janitor@sternwelten.at>
    Signed-off-by: Domen Puncer <domen@coderock.org>
    Signed-off-by: Frank Pavlic <pavlic@de.ibm.com>
    Acked-by: Martin Schwidefsky <schwidefsky@de.ibm.com>

commit b5f9d55b64a5c7193f8965c90ba62244ea3180b2
Author: Frank Pavlic <pavlic@de.ibm.com>
Date:   Thu May 12 20:35:57 2005 +0200

    [PATCH] s390: set online race in the lcs driver
    
    [patch 3/10] s390: set online race in the lcs driver.
    
    From: Michael Holzheu <holzheu@de.ibm.com>
    
    There is a race between lcs_stopcard() and lcs_open_device() which
    can lead to the error 'lcs: Error in starting channel, rc=-16'.
    lcs_open_device() is invoked when 'ifconfig up' is called due to a
    hotplug event, which is caused by register_netdev(). In parallel
    lcs_stopcard() is executed. Both functions are sending lcs commands.
    The second invocation fails with -EBUSY (-16) as return value.
    Move invocation of register_netdev() after invocation of lcs_stopcard
    to avoid the race.
    
    Signed-off-by: Frank Pavlic <pavlic@de.ibm.com>

commit 109a260b66bfbab7ba9f985495791af21f910218
Author: Frank Pavlic <pavlic@de.ibm.com>
Date:   Thu May 12 20:19:44 2005 +0200

    [PATCH] s390: multicast address registration in lcs
    
    [patch 2/10] s390: multicast address registration in lcs.
    
    From: Michael Holzheu <holzheu@de.ibm.com>
    
    When setting lcs devices online you can run into an endless loop,
    because the code that registers the multicast addresses uses
    list_for_each_entry instead of list_for_each_entry_safe.
    
    Signed-off-by: Frank Pavlic <pavlic@de.ibm.com>

commit 321de3c8cc12bdff073c23524aa1f6ed47cbeee4
Author: Frank Pavlic <pavlic@de.ibm.com>
Date:   Thu May 12 20:17:46 2005 +0200

    [PATCH] s390: claw driver wiring
    
    [patch 1/10] s390: claw driver wiring.
    
    From: Andy Richter <richtera@us.ibm.com>
    
    claw network driver changes:
     - Add an entry to the drivers/s390/net Makefile to build the claw driver.
     - Add claw channel type to cu3088.
    
    Signed-off-by: Frank Pavlic <pavlic@de.ibm.com>

commit f85bdb9ce9e130ce00f7a91523931fdd8f96f102
Author: John W. Linville <linville@tuxdriver.com>
Date:   Thu May 12 15:49:54 2005 -0400

    [PATCH] libata: stop setting sdev->host->max_sectors for lba48 drives
    
    Avoid changing sdev->host->max_sectors because it can prevent use of
    non-lba48 drives on other ports of the same adapter.
    
    Signed-off-by: Stuart Hayes <stuart_hayes@Dell.com>
    Signed-off-by: John W. Linville <linville@tuxdriver.com>

commit 042e2fb70006f135469d546726451b7d14768980
Author: Malli Chilakala <mallikarjuna.chilakala@intel.com>
Date:   Thu Apr 28 19:20:14 2005 -0700

    [PATCH] e100: Driver version, white space, comments, device id
    
    Driver version, white space, comments.
    Also enabled ICH-7 support
    
    Signed-off-by: Mallikarjuna R Chilakala <mallikarjuna.chilakala@intel.com>
    Signed-off-by: Ganesh Venkatesan <ganesh.venkatesan@intel.com>
    Signed-off-by: John Ronciak <john.ronciak@intel.com>

commit 962082b6df11fe8cabafd2971b07c914cd52ee2a
Author: Malli Chilakala <mallikarjuna.chilakala@intel.com>
Date:   Thu Apr 28 19:19:46 2005 -0700

    [PATCH] e100: Performance optimizations to e100 Tx Path
    
    Performance optimizations to e100 Tx Path
    
    Signed-off-by: Mallikarjuna R Chilakala <mallikarjuna.chilakala@intel.com>
    Signed-off-by: Ganesh Venkatesan <ganesh.venkatesan@intel.com>
    Signed-off-by: John Ronciak <john.ronciak@intel.com>

commit 6bdacb1ad58bb6b772a4fc18f21684437bd5f439
Author: Malli Chilakala <mallikarjuna.chilakala@intel.com>
Date:   Thu Apr 28 19:17:54 2005 -0700

    [PATCH] e100: Fix Wake on lan related issues
    
    Fix Wake on lan related issues
    
    Signed-off-by: Mallikarjuna R Chilakala <mallikarjuna.chilakala@intel.com>
    Signed-off-by: Ganesh Venkatesan <ganesh.venkatesan@intel.com>
    Signed-off-by: John Ronciak <john.ronciak@intel.com>

commit 0236ebb7ae85935b3b96eef7e8a4e203ea9958a0
Author: Malli Chilakala <mallikarjuna.chilakala@intel.com>
Date:   Thu Apr 28 19:17:42 2005 -0700

    [PATCH] e100: Synchronize interface link state with poll routine
    
    Synchronize interface link state with e100 poll routine
    
    Signed-off-by: Mallikarjuna R Chilakala <mallikarjuna.chilakala@intel.com>
    Signed-off-by: Ganesh Venkatesan <ganesh.venkatesan@intel.com>
    Signed-off-by: John Ronciak <john.ronciak@intel.com>

commit 1f53367d5d75ba37f258f6e955d6fc24814051a0
Author: Malli Chilakala <mallikarjuna.chilakala@intel.com>
Date:   Thu Apr 28 19:17:20 2005 -0700

    [PATCH] e100: Render e100 NAPI state machine
    
    Render e100 NAPI state machine to be similar to the non-NAPI one.
    
    Signed-off-by: Mallikarjuna R Chilakala <mallikarjuna.chilakala@intel.com>
    Signed-off-by: Ganesh Venkatesan <ganesh.venkatesan@intel.com>
    Signed-off-by: John Ronciak <john.ronciak@intel.com>

commit 2acdb1e05c1a92e05ee710ed8f226a8f3183d5a0
Author: Malli Chilakala <mallikarjuna.chilakala@intel.com>
Date:   Thu Apr 28 19:16:58 2005 -0700

    [PATCH] e100: Execute tx_timeout task outside interrupt context
    
    Execute tx_timeout task outside the interrupt context
    
    Signed-off-by: Mallikarjuna R Chilakala <mallikarjuna.chilakala@intel.com>
    Signed-off-by: Ganesh Venkatesan <ganesh.venkatesan@intel.com>
    Signed-off-by: John Ronciak <john.ronciak@intel.com>

commit ac79c82e793bc2440c4765e5eb1b834d2c18edf2
Author: Malli Chilakala <mallikarjuna.chilakala@intel.com>
Date:   Thu Apr 28 19:05:32 2005 -0700

    [PATCH] ixgb: Driver version, white space, comments, device id
    
    Driver version, white space, comments, device id & other
    
    Signed-off-by: Mallikarjuna R Chilakala <mallikarjuna.chilakala@intel.com>
    Signed-off-by: Ganesh Venkatesan <ganesh.venkatesan@intel.com>
    Signed-off-by: John Ronciak <john.ronciak@intel.com>
    
    diff -up net-drivers-2.6/drivers/net/ixgb/ixgb_main.c net-drivers-2.6/drivers/net/ixgb.new/ixgb_main.c

commit 37d16f823799918107440cb9e552b0709347f77c
Author: Malli Chilakala <mallikarjuna.chilakala@intel.com>
Date:   Thu Apr 28 19:05:12 2005 -0700

    [PATCH] ixgb: Fixed msec_delay in osdep to use msleep
    
    Fixed msec_delay in osdep to use msleep
    
    Signed-off-by: Mallikarjuna R Chilakala <mallikarjuna.chilakala@intel.com>
    Signed-off-by: Ganesh Venkatesan <ganesh.venkatesan@intel.com>
    Signed-off-by: John Ronciak <john.ronciak@intel.com>
    
    diff -up net-drivers-2.6/drivers/net/ixgb/ixgb_osdep.h net-drivers-2.6/drivers/net/ixgb.new/ixgb_osdep.h

commit f404de1cd407c1f56fa478810c6c48e015d377bd
Author: Malli Chilakala <mallikarjuna.chilakala@intel.com>
Date:   Thu Apr 28 19:04:54 2005 -0700

    [PATCH] ixgb: Code optimization
    
    Code optimization
    
    Signed-off-by: Mallikarjuna R Chilakala <mallikarjuna.chilakala@intel.com>
    Signed-off-by: Ganesh Venkatesan <ganesh.venkatesan@intel.com>
    Signed-off-by: John Ronciak <john.ronciak@intel.com>
    
    diff -up net-drivers-2.6/drivers/net/ixgb/ixgb_main.c net-drivers-2.6/drivers/net/ixgb.new/ixgb_main.c

commit c2eba932b14718e34ac2609e35c6d41e032a2478
Author: Malli Chilakala <mallikarjuna.chilakala@intel.com>
Date:   Thu Apr 28 19:04:32 2005 -0700

    [PATCH] ixgb: Remove hook for suspend, no power management
    
    Remove hook for suspend. No power management in 10GbE Controllers
    
    Signed-off-by: Mallikarjuna R Chilakala <mallikarjuna.chilakala@intel.com>
    Signed-off-by: Ganesh Venkatesan <ganesh.venkatesan@intel.com>
    Signed-off-by: John Ronciak <john.ronciak@intel.com>
    
    diff -up net-drivers-2.6/drivers/net/ixgb/ixgb_main.c net-drivers-2.6/drivers/net/ixgb.new/ixgb_main.c

commit 5e3c30deb21d0eb0da44830fb1c1fc7054e54229
Author: Malli Chilakala <mallikarjuna.chilakala@intel.com>
Date:   Thu Apr 28 19:04:07 2005 -0700

    [PATCH] ixgb: Support for ethtool -d
    
    ixgb support for ethtool -d
    
    Signed-off-by: Mallikarjuna R Chilakala <mallikarjuna.chilakala@intel.com>
    Signed-off-by: Ganesh Venkatesan <ganesh.venkatesan@intel.com>
    Signed-off-by: John Ronciak <john.ronciak@intel.com>
    
    diff -up net-drivers-2.6/drivers/net/ixgb/ixgb_ethtool.c net-drivers-2.6/drivers/net/ixgb.new/ixgb_ethtool.c

commit abf481d6af8670c89f33f354c6fbd9977b23cebc
Author: Malli Chilakala <mallikarjuna.chilakala@intel.com>
Date:   Thu Apr 28 19:03:32 2005 -0700

    [PATCH] ixgb: Fix EEPROM functions to be endian-aware
    
    Fix EEPROM functions to be endian-aware
    
    Signed-off-by: Mallikarjuna R Chilakala <mallikarjuna.chilakala@intel.com>
    Signed-off-by: Ganesh Venkatesan <ganesh.venkatesan@intel.com>
    Signed-off-by: John Ronciak <john.ronciak@intel.com>
    
    diff -up net-drivers-2.6/drivers/net/ixgb/ixgb_ee.c net-drivers-2.6/drivers/net/ixgb.new/ixgb_ee.c

commit 41639fed1b32dde4ea3d94242a89308435d341be
Author: Malli Chilakala <mallikarjuna.chilakala@intel.com>
Date:   Thu Apr 28 18:51:54 2005 -0700

    [PATCH] ixgb: Reset status in the Rx
    
    Reset status in the Rx descriptor prior to handing it to the controller.
    Leave three Rx descriptors unused
    
    Signed-off-by: Mallikarjuna R Chilakala <mallikarjuna.chilakala@intel.com>
    Signed-off-by: Ganesh Venkatesan <ganesh.venkatesan@intel.com>
    Signed-off-by: John Ronciak <john.ronciak@intel.com>
    
    diff -up net-drivers-2.6/drivers/net/ixgb/ixgb_main.c net-drivers-2.6/drivers/net/ixgb.new/ixgb_main.c

commit 6dfbb6dd391139be9f1cd333877c6e2b03da4bba
Author: Malli Chilakala <mallikarjuna.chilakala@intel.com>
Date:   Thu Apr 28 18:56:40 2005 -0700

    [PATCH] ixgb: Mask RXO interrupt
    
    Disable RXO interrupt to decrease recovery time when system is overloaded with data
    
    Signed-off-by: Mallikarjuna R Chilakala <mallikarjuna.chilakala@intel.com>
    Signed-off-by: Ganesh Venkatesan <ganesh.venkatesan@intel.com>
    Signed-off-by: John Ronciak <john.ronciak@intel.com>
    
    diff -up net-drivers-2.6/drivers/net/ixgb/ixgb_main.c net-drivers-2.6/drivers/net/ixgb.new/ixgb_main.c

commit 0c73f58636385a4d3dc68d0d0829d4c39d61b621
Author: Malli Chilakala <mallikarjuna.chilakala@intel.com>
Date:   Thu Apr 28 18:48:06 2005 -0700

    [PATCH] ixgb: Change RDT write bump size to 4
    
    Change RDT write bump size back to 4
    
    Signed-off-by: Mallikarjuna R Chilakala <mallikarjuna.chilakala@intel.com>
    Signed-off-by: Ganesh Venkatesan <ganesh.venkatesan@intel.com>
    Signed-off-by: John Ronciak <john.ronciak@intel.com>
    
    diff -up net-drivers-2.6/drivers/net/ixgb/ixgb.h net-drivers-2.6/drivers/net/ixgb.new/ixgb.h

commit 06c2f9ecb5b53f9d4fc1ef596da16683cc4af5ba
Author: Malli Chilakala <mallikarjuna.chilakala@intel.com>
Date:   Thu Apr 28 18:46:51 2005 -0700

    [PATCH] ixgb: Do not set the RS bit on context descriptors
    
    Don't set the RS bit on context descriptors, causes un-necessary bus activity
    
    Signed-off-by: Mallikarjuna R Chilakala <mallikarjuna.chilakala@intel.com>
    Signed-off-by: Ganesh Venkatesan <ganesh.venkatesan@intel.com>
    Signed-off-by: John Ronciak <john.ronciak@intel.com>
    
    diff -up net-drivers-2.6/drivers/net/ixgb/ixgb_main.c net-drivers-2.6/drivers/net/ixgb.new/ixgb_main.c

commit 5633684d008b777ab169e8efcef39a898482f531
Author: Malli Chilakala <mallikarjuna.chilakala@intel.com>
Date:   Thu Apr 28 18:45:50 2005 -0700

    [PATCH] ixgb: Fix multi-cast packet count in statistics
    
    Fix multi-cast packet count in statistics
    
    Signed-off-by: Mallikarjuna R Chilakala <mallikarjuna.chilakala@intel.com>
    Signed-off-by: Ganesh Venkatesan <ganesh.venkatesan@intel.com>
    Signed-off-by: John Ronciak <john.ronciak@intel.com>
    
    diff -up net-drivers-2.6/drivers/net/ixgb/ixgb_main.c net-drivers-2.6/drivers/net/ixgb.new/ixgb_main.c

commit 2648345fcbadfae8e7113112ff9402e465a184dc
Author: Malli Chilakala <mallikarjuna.chilakala@intel.com>
Date:   Thu Apr 28 19:44:46 2005 -0700

    [PATCH] e1000:Driver version,white space,comments,device id
    
    Driver version, white space, comments, device id & other
    
    Signed-off-by: Mallikarjuna R Chilakala <mallikarjuna.chilakala@intel.com>
    Signed-off-by: Ganesh Venkatesan <ganesh.venkatesan@intel.com>
    Signed-off-by: John Ronciak <john.ronciak@intel.com>
    diff -up net-drivers-2.6/drivers/net/e1000/e1000_ethtool.c net-drivers-2.6/drivers/net/e1000.new/e1000_ethtool.c

commit 1125ecbc0a89db07bb4eb1ba892a23367c3bdeb5
Author: Malli Chilakala <mallikarjuna.chilakala@intel.com>
Date:   Thu Apr 28 19:44:25 2005 -0700

    [PATCH] e1000:Adjust flow control watermarks for Jumbo Frames
    
    Adjust flow control watermarks for Jumbo Frames
    
    Signed-off-by: Mallikarjuna R Chilakala <mallikarjuna.chilakala@intel.com>
    Signed-off-by: Ganesh Venkatesan <ganesh.venkatesan@intel.com>
    Signed-off-by: John Ronciak <john.ronciak@intel.com>
    diff -up net-drivers-2.6/drivers/net/e1000/e1000_main.c net-drivers-2.6/drivers/net/e1000.new/e1000_main.c

commit 0e6ef3e02b6f07e37ba1c1abc059f8bee4e0847f
Author: Malli Chilakala <mallikarjuna.chilakala@intel.com>
Date:   Thu Apr 28 19:44:14 2005 -0700

    [PATCH] e1000:Fix Packet Buffer Allocation logic for 82547_rev_2
    
    Fix Packet Buffer Allocation logic for 82547_rev_2 controller
    
    Signed-off-by: Mallikarjuna R Chilakala <mallikarjuna.chilakala@intel.com>
    Signed-off-by: Ganesh Venkatesan <ganesh.venkatesan@intel.com>
    Signed-off-by: John Ronciak <john.ronciak@intel.com>
    diff -up net-drivers-2.6/drivers/net/e1000/e1000_main.c net-drivers-2.6/drivers/net/e1000.new/e1000_main.c

commit 2d7edb923a823660b081bd4c660300ee19adca8d
Author: Malli Chilakala <mallikarjuna.chilakala@intel.com>
Date:   Thu Apr 28 19:43:52 2005 -0700

    [PATCH] e1000:82573 specific code & packet split code
    
    82573 specific code & packet split code
    
    Signed-off-by: Mallikarjuna R Chilakala <mallikarjuna.chilakala@intel.com>
    Signed-off-by: Ganesh Venkatesan <ganesh.venkatesan@intel.com>
    Signed-off-by: John Ronciak <john.ronciak@intel.com>
    diff -up net-drivers-2.6/drivers/net/e1000/e1000.h net-drivers-2.6/drivers/net/e1000.new/e1000.h

commit f0d11ed0b0650d2f93f56f65167c10a577c16c88
Author: Malli Chilakala <mallikarjuna.chilakala@intel.com>
Date:   Thu Apr 28 19:43:28 2005 -0700

    [PATCH] e1000: Modified e1000_clean: exit poll
    
    Modified e1000_clean:: exit poll if no Tx and work_done == 0
    
    Signed-off-by: Mallikarjuna R Chilakala <mallikarjuna.chilakala@intel.com>
    Signed-off-by: Ganesh Venkatesan <ganesh.venkatesan@intel.com>
    Signed-off-by: John Ronciak <john.ronciak@intel.com>
    diff -up net-drivers-2.6/drivers/net/e1000/e1000_main.c net-drivers-2.6/drivers/net/e1000.new/e1000_main.c

commit f1d2e4905eed4b13c3ba56ac6d30c283be996963
Author: Malli Chilakala <mallikarjuna.chilakala@intel.com>
Date:   Thu Apr 28 19:42:04 2005 -0700

    [PATCH] e1000:Removed redundant statement in e1000_clean_tx_irq
    
    Removed redundant statement in e1000_clean_tx_irq
    
    Signed-off-by: Mallikarjuna R Chilakala <mallikarjuna.chilakala@intel.com>
    Signed-off-by: Ganesh Venkatesan <ganesh.venkatesan@intel.com>
    Signed-off-by: John Ronciak <john.ronciak@intel.com>
    diff -up net-drivers-2.6/drivers/net/e1000/e1000_main.c net-drivers-2.6/drivers/net/e1000.new/e1000_main.c

commit 97338bde27d97347bc83203d6ac5e93be1ebcd03
Author: Malli Chilakala <mallikarjuna.chilakala@intel.com>
Date:   Thu Apr 28 19:41:46 2005 -0700

    [PATCH] e1000: Implement a workaround for 82546 errata 10
    
    Implement 82546 errata 10 --  first Tx descriptor cannot have more than 2015 byte of data in it or it could hang the transmitter.
    
    Signed-off-by: Mallikarjuna R Chilakala <mallikarjuna.chilakala@intel.com>
    Signed-off-by: Ganesh Venkatesan <ganesh.venkatesan@intel.com>
    Signed-off-by: John Ronciak <john.ronciak@intel.com>
    diff -up net-drivers-2.6/drivers/net/e1000/e1000_main.c net-drivers-2.6/drivers/net/e1000.new/e1000_main.c

commit a4cb847dac40577dd751a4deb4085ed080780679
Author: Malli Chilakala <mallikarjuna.chilakala@intel.com>
Date:   Thu Apr 28 19:41:28 2005 -0700

    [PATCH] e1000: e1000 stops working after resume
    
    e1000 stops working after resume, call pci_enable_device after pci_restore_state - Modified Andrew Morton's patch
    
    Signed-off-by: Mallikarjuna R Chilakala <mallikarjuna.chilakala@intel.com>
    Signed-off-by: Ganesh Venkatesan <ganesh.venkatesan@intel.com>
    Signed-off-by: John Ronciak <john.ronciak@intel.com>
    diff -up net-drivers-2.6/drivers/net/e1000/e1000_main.c net-drivers-2.6/drivers/net/e1000.new/e1000_main.c

commit 6d9157577d926d2a83fe8d4914c0cc216deb5842
Author: Malli Chilakala <mallikarjuna.chilakala@intel.com>
Date:   Thu Apr 28 19:41:11 2005 -0700

    [PATCH] e1000:Fix computation of netdev stats from controller stats counters
    
    Fix computation of netdev stats from controller stats counters - from
    sfeldma@pobox.com
    
    Signed-off-by: Mallikarjuna R Chilakala <mallikarjuna.chilakala@intel.com>
    Signed-off-by: Ganesh Venkatesan <ganesh.venkatesan@intel.com>
    Signed-off-by: John Ronciak <john.ronciak@intel.com>
    diff -up net-drivers-2.6/drivers/net/e1000/e1000_main.c net-drivers-2.6/drivers/net/e1000.new/e1000_main.c

commit 70b8f1e16a788eccdd36f39679774b1a08a6ba55
Author: Malli Chilakala <mallikarjuna.chilakala@intel.com>
Date:   Thu Apr 28 19:40:40 2005 -0700

    [PATCH] e1000: Dump information on Tx ring
    
    Dump information on Tx ring when 'NETDEV: Watchdog' condition is reached
    
    Signed-off-by: Mallikarjuna R Chilakala <mallikarjuna.chilakala@intel.com>
    Signed-off-by: Ganesh Venkatesan <ganesh.venkatesan@intel.com>
    Signed-off-by: John Ronciak <john.ronciak@intel.com>
    diff -up net-drivers-2.6/drivers/net/e1000/e1000_main.c net-drivers-2.6/drivers/net/e1000.new/e1000_main.c

commit 2701234fc0372630457e3da14e36cde53c57d12e
Author: Malli Chilakala <mallikarjuna.chilakala@intel.com>
Date:   Thu Apr 28 19:40:28 2005 -0700

    [PATCH] e1000: Delay clean-up of last Tx packet
    
    Delay clean-up of last Tx packet to fix pre-mature writeback issue of Tx descriptors only when TSO is enabled
    
    Signed-off-by: Mallikarjuna R Chilakala <mallikarjuna.chilakala@intel.com>
    Signed-off-by: Ganesh Venkatesan <ganesh.venkatesan@intel.com>
    Signed-off-by: John Ronciak <john.ronciak@intel.com>
    diff -up net-drivers-2.6/drivers/net/e1000/e1000_main.c net-drivers-2.6/drivers/net/e1000.new/e1000_main.c

commit 4e48a2b91d408357cb0747151d8db5368ac8f1d0
Author: Malli Chilakala <mallikarjuna.chilakala@intel.com>
Date:   Thu Apr 28 19:39:53 2005 -0700

    [PATCH] e1000: Fix kernel panic with 82541 LOM
    
    Fix kernel panic with 82541 LOM when using a 100M cable
    
    Signed-off-by: Mallikarjuna R Chilakala <mallikarjuna.chilakala@intel.com>
    Signed-off-by: Ganesh Venkatesan <ganesh.venkatesan@intel.com>
    Signed-off-by: John Ronciak <john.ronciak@intel.com>
    diff -up net-drivers-2.6/drivers/net/e1000/e1000_main.c net-drivers-2.6/drivers/net/e1000.new/e1000_main.c

commit 5de556249fde97493a4c79dbf8979ace0f76789f
Author: Malli Chilakala <mallikarjuna.chilakala@intel.com>
Date:   Thu Apr 28 19:39:30 2005 -0700

    [PATCH] e1000: Enable polling before enabling interrupts
    
    Enable polling before enabling interrupts -- avoids (in NAPI mode) entering the ISR and returning without doing any work because polling is not enabled. [romieu@fr.zoriel.com]
    
    Signed-off-by: Mallikarjuna R Chilakala <mallikarjuna.chilakala@intel.com>
    Signed-off-by: Ganesh Venkatesan <ganesh.venkatesan@intel.com>
    Signed-off-by: John Ronciak <john.ronciak@intel.com>
    diff -up net-drivers-2.6/drivers/net/e1000/e1000_main.c net-drivers-2.6/drivers/net/e1000.new/e1000_main.c

commit fa4f7ef3aaa6cee6b04ebe90266ee893e0b2ce07
Author: Malli Chilakala <mallikarjuna.chilakala@intel.com>
Date:   Thu Apr 28 19:39:13 2005 -0700

    [PATCH] e1000: MSI support for PCI-e adapters
    
    MSI support for PCI-e adapters
    
    Signed-off-by: Mallikarjuna R Chilakala <mallikarjuna.chilakala@intel.com>
    Signed-off-by: Ganesh Venkatesan <ganesh.venkatesan@intel.com>
    Signed-off-by: John Ronciak <john.ronciak@intel.com>
    diff -up net-drivers-2.6/drivers/net/e1000/e1000.h net-drivers-2.6/drivers/net/e1000.new/e1000.h

commit df25e164878836196ee93d1a5757867da6eac30e
Author: Malli Chilakala <mallikarjuna.chilakala@intel.com>
Date:   Thu Apr 28 19:38:43 2005 -0700

    [PATCH] e1000: Fix msec-delay definition to use msleep
    
    Fix msec-delay definition in e1000_osdep.h to use msleep
    
    Signed-off-by: Mallikarjuna R Chilakala <mallikarjuna.chilakala@intel.com>
    Signed-off-by: Ganesh Venkatesan <ganesh.venkatesan@intel.com>
    Signed-off-by: John Ronciak <john.ronciak@intel.com>
    diff -up net-drivers-2.6/drivers/net/e1000/e1000_osdep.h net-drivers-2.6/drivers/net/e1000.new/e1000_osdep.h

commit e4eff7291c977308989b24fdfc7215a501302e6a
Author: Malli Chilakala <mallikarjuna.chilakala@intel.com>
Date:   Thu Apr 28 19:38:30 2005 -0700

    [PATCH] e1000: made loopback test robust
    
    Added enhanced functionality to the loopback diags to wrap the descriptor rings.
    
    Signed-off-by: Mallikarjuna R Chilakala <mallikarjuna.chilakala@intel.com>
    Signed-off-by: Ganesh Venkatesan <ganesh.venkatesan@intel.com>
    Signed-off-by: John Ronciak <john.ronciak@intel.com>
    diff -up net-drivers-2.6/drivers/net/e1000/e1000_ethtool.c net-drivers-2.6/drivers/net/e1000.new/e1000_ethtool.c

commit da369b01d49b34803265096eb92a2d6da61cf0d0
Author: Daniele Venzano <webvenza@libero.it>
Date:   Thu May 12 20:13:14 2005 -0400

      [PATCH] More ethtool support for sis900 and warning fix
      
      Add support to sis900 for the following ethtool ops:
            - get_link
            - get_settings
            - set_settings
            - nway_reset
      
      Signed-off-by: Daniele Venzano <webvenza@libero.it>
      Signed-off-by: Jeff Garzik <jgarzik@pobox.com>
    

commit 126fa4b9ca5d9d7cb7d46f779ad3bd3631ca387c
Author: Francois Romieu <romieu@fr.zoreil.com>
Date:   Thu May 12 20:09:17 2005 -0400

      [PATCH] r8169: incoming frame length check
      
      The size of the incoming frame is not correctly checked.
      
      The RxMaxSize register (0xDA) does not work as expected and incoming
      frames whose size exceeds the MTU actually end spanning multiple
      descriptors. The first Rx descriptor contains the size of the whole
      frame (or some garbage in its place). The driver does not expect
      something above the space allocated to the current skb and crashes
      loudly when it issues a skb_put.
      
      The fix contains two parts:
      - disable hardware Rx size filtering: so far it only proved to be able
        to trigger some new fancy errors;
      - drop multi-descriptors frame: as the driver allocates MTU sized Rx
        buffers, it provides an adequate filtering.
      
      As a bonus, wrong descriptors were not returned to the asic after their
      processing.
      
      Signed-off-by: Francois Romieu <romieu@fr.zoreil.com>
      Signed-off-by: Jeff Garzik <jgarzik@pobox.com>

commit 2918c35d311263bc313b3da272783860ce573189
Author: Michal Schmidt <xschmi00@stud.feec.vutbr.cz>
Date:   Thu May 12 19:42:06 2005 -0400

    [PATCH] forcedeth: netpoll support

commit dfa1b73ffb414b64dc0452260132a090eb25bf52
Author: Liu Tao <liutao1980@gmail.com>
Date:   Thu May 12 19:40:38 2005 -0400

      [PATCH] drivers/net/amd8111e.c: fix NAPI interrupt in poll
      
      This patch makes the netif_rx_complete() and rx_interrupt_enable
      atomic when exiting the poll() method, so to avoid interrupt in poll.
      It also fixes the rx interrupt check logic in interrupt handler.
      
      Signed-off-by: Liu Tao <liutao1980@gmail.com>
      Signed-off-by: Jeff Garzik <jgarzik@pobox.com>

commit bfd4e0709fb977e64e27d9255be6e7aeadf4fcd4
Author: Ben Dooks <ben-linux@org.rmk.(none)>
Date:   Thu May 12 19:27:14 2005 +0100

    [PATCH] ARM: 2678/1: S3C2440 - cpu fixes, hdiv divisors and nand dev name
    
    Patch from Ben Dooks
    
    Fix the setting of hdiv when set to divide-by-2. Thanks to
    Jeonghoon Yoon for pointing this out.
    Change name of the NAND device to "s3c2440-nand" as it
    is not similar enough to the "s3c2410-nand" device.
    
    Signed-off-by: Ben Dooks
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit 4ad3a443c9238c8df68f4519049c3c8d80fe62c2
Author: Ben Dooks <ben-linux@org.rmk.(none)>
Date:   Thu May 12 19:27:13 2005 +0100

    [PATCH] ARM: 2677/1: S3C2440 - UPLL frequency doubled
    
    Patch from Ben Dooks
    
    S3C2440 UPLL is the same as the S3C2410 UPLL, it is only the
    MPLL which has an extra multiplication factor of 2 in the
    multiplier.
    
    Signed-off-by: Ben Dooks
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit 9dabf9da18018b99a51334c2ef168019389ed5bf
Author: Ben Dooks <ben-linux@org.rmk.(none)>
Date:   Thu May 12 19:27:13 2005 +0100

    [PATCH] ARM: 2676/1: S3C2440 - NAND register additions
    
    Patch from Ben Dooks
    
    Add the register definitions for the s3c2440 NAND controller
    to the s3c2410 NAND register definitions
    
    Signed-off-by: Ben Dooks
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit 70489c88d0b7e5820ac37a039a910bb396e2a4e3
Author: Nicolas Pitre <nico@org.rmk.(none)>
Date:   Thu May 12 19:27:12 2005 +0100

    [PATCH] ARM: 2680/1: refine TLS reg availability some more again
    
    Patch from Nicolas Pitre
    
    Not all ARMv6 processors implement the TLS register.
    
    Signed-off-by: Nicolas Pitre
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit 104e50108c862b13da26850d4b469cc13418b66b
Author: Rolf Eike Beer <eike-kernel@sf-tec.de>
Date:   Sun Mar 27 08:50:38 2005 -0500

    [PATCH] typo fix in drivers/scsi/sata_svw.c comment
    
    Add missing brace.

commit 4dbc30fb27ac4e647e6efadb382ff7d38c3d368e
Author: David S. Miller <davem@davemloft.net>
Date:   Wed May 11 11:37:00 2005 -0700

    [SPARC64]: Add timeouts to streaming buffer synchronization.
    
    If some hardware error occurs and the flush flag never updates,
    we will hang forever in these routines.  Add a timeout, and
    print out a diagnostic if it is reached.
    
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit e4fdee8e3b41239242a8f421a28736ef8e08ca55
Author: David S. Miller <davem@davemloft.net>
Date:   Wed May 11 11:34:32 2005 -0700

    [SUNSAB]: Defer register updates until transmitter is idle.
    
    The chip can emit garbage characters if we touch the
    settings while characters are going out.
    
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit bfd68594082d8384781c242aa72a7950b5cf51aa
Author: David Mosberger-Tang <davidm@hpl.hp.com>
Date:   Wed May 4 06:42:00 2005 -0700

    [IA64] Avoid .spillpsp directive in handcoded assembly
    
    Some time ago, GAS was fixed to bring the .spillpsp directive in line
    with the Intel assembler manual (there was some disagreement as to
    whether or not there is a built-in 16-byte offset).  Unfortunately,
    there are two places in the kernel where this directive is used in
    handwritten assembly files and those of course relied on the "buggy"
    behavior.  As a result, when using a "fixed" assembler, the kernel
    picks up the UNaT bits from the wrong place (off by 16) and randomly
    sets NaT bits on the scratch registers.  This can be noticed easily by
    looking at a coredump and finding various scratch registers with
    unexpected NaT values.  The patch below fixes this by using the
    .spillsp directive instead, which works correctly no matter what
    assembler is in use.
    
    Signed-off-by: David Mosberger-Tang <davidm@hpl.hp.com>
    Signed-off-by: Tony Luck <tony.luck@intel.com>

commit d7def6c22dfa9f32b3d9e5546a7a6a90c644ff5f
Author: Sascha Hauer <sascha@de.rmk.(none)>
Date:   Tue May 10 19:01:35 2005 +0100

    [PATCH] ARM: 2666/1: i.MX pwm controller defines
    
    Patch from Sascha Hauer
    
    This patch adds the defines for the i.MX PWM controller
    
    Signed-off-by: Steven Scholz
    Signed-off-by: Sascha Hauer
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit fa4354359f800ef9d68ed644438efd45b559b443
Author: Nicolas Pitre <nico@org.rmk.(none)>
Date:   Tue May 10 17:36:29 2005 +0100

    [PATCH] ARM: 2663/2: I can't type
    
    Patch from Nicolas Pitre
    
    Signed-off-by: Nicolas Pitre
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit 8d802d28c23122a57d7dddf4886b0486ca183d2d
Author: Russell King <rmk@dyn-67.arm.linux.org.uk>
Date:   Tue May 10 17:31:43 2005 +0100

    [PATCH] ARM: Add V6 aliasing cache flush
    
    Add cache flushing support for aliased V6 caches to
    flush_dcache_page.
    
    Signed-off-by: Russell King <rmk@arm.linux.org.uk>

commit 08ee4e4c5fd3fb0857eeb6a5a0ff66881432e8a3
Author: Russell King <rmk@dyn-67.arm.linux.org.uk>
Date:   Tue May 10 17:30:47 2005 +0100

    [PATCH] ARM: Use top_pmd for V6 copy/clear user_page
    
    Remove needless page table walking for v6 page operations.
    
    Signed-off-by: Russell King <rmk@arm.linux.org.uk>

commit d2bab05ac1f9a2f5ddcd2f3256237e5c47fc127f
Author: Russell King <rmk@dyn-67.arm.linux.org.uk>
Date:   Tue May 10 14:23:01 2005 +0100

    [PATCH] ARM: Move copy/clear user_page locking into implementation
    
    Move the locking for copy_user_page() and clear_user_page() into
    the implementations which require locking.  For simple memcpy/
    memset based implementations, the locking is extra overhead which
    is not necessary, and prevents preemption occuring.
    
    Signed-off-by: Russell King <rmk@arm.linux.org.uk>

commit c4e1f6f6bf82af89994a0ee760fc5e036c4d3c1f
Author: Russell King <rmk@dyn-67.arm.linux.org.uk>
Date:   Tue May 10 10:40:19 2005 +0100

    [PATCH] ARM: Add top_pmd, which points at the top-most page table
    
    Signed-off-by: Russell King <rmk@arm.linux.org.uk>

commit a84f5770170232a48e753e02ee5f0f17ee17b791
Author: Tony Luck <tony.luck@intel.com>
Date:   Mon May 9 16:44:53 2005 -0700

    Merge with /home/aegl/GIT/linus
    

commit 05ab3014636ff60a319d37cdf37dca594b015eec
Author: Russell King <rmk@dyn-67.arm.linux.org.uk>
Date:   Mon May 9 23:21:59 2005 +0100

    [PATCH] Serial: Add uart_insert_char()
    
    Add uart_insert_char(), which handles inserting characters into the
    flip buffer.  This helper function handles the correct semantics
    for handling overrun in addition to inserting normal characters.
    
    Signed-off-by: Russell King <rmk@arm.linux.org.uk>

commit 155bb14482cc567761c13b4efc064de400c55e18
Author: Russell King <rmk@dyn-67.arm.linux.org.uk>
Date:   Mon May 9 20:52:51 2005 +0100

    [PATCH] ARM: Add inline functions to find the pmd from virtual address
    
    Add pmd_off() and pmd_off_k() to obtain the pmd pointer for a
    virtual address, and use them throughout the mm initialisation.
    
    Signed-off-by: Russell King <rmk@arm.linux.org.uk>

commit 66302f211a21bb9439a2ae7f7b6a4c386bb10ecd
Author: David Mosberger-Tang <davidm@hpl.hp.com>
Date:   Tue Apr 12 11:04:00 2005 -0700

    [IA64] fix "section mismatch" compile-time-error
    
    I noticed this typo when trying to compile a kernel which had
    CONFIG_HOTPLUG turned off.  In that case, __devinit is no longer a
    no-op and the compiler then detects a section-conflict.  Fix by using
    __devinitdata instead of __devinit.
    
    Same patch also submitted by Darren Williams to fix compilation error
    using sim_defconfig (which has CONFIG_HOTPLUG=n).
    
    Signed-off-by: David Mosberger-Tang <davidm@hpl.hp.com>
    Signed-off-by:  Darren Williams <dsw@gelato.unsw.edu.au>
    Signed-off-by: Tony Luck <tony.luck@intel.com>

commit 85bcc13072c54592596c5b41d40d1c6a18b04e19
Author: Pierre Ossman <drzeus-list@cx.rmk.(none)>
Date:   Sun May 8 19:35:27 2005 +0100

    [PATCH] MMC: wbsd update
    
    Updates to the wbsd driver.
                                                                                    
    * Fix to handle DAT3 card detection.
    * Fixed bug which could cause large writes to stall in FIFO mode.
    * Plug 'n Play support. In most cases you need ACPI PNP for this to work.
    * Uses generic DMA API (ISA dependency removed).

commit 88d7bd8cb9eb8d64bf7997600b0d64f7834047c5
Author: Linus Torvalds <torvalds@ppc970.osdl.org>
Date:   Fri May 6 22:20:31 2005 -0700

    Linux v2.6.12-rc4

commit 2d58cc9a437f3833d242e9d1617ec9b4044e26f3
Author: Jeff Dike <jdike@addtoit.com>
Date:   Fri May 6 21:30:55 2005 -0700

    [PATCH] uml: x86_64 fixes
    
    This fixes some x86_64 bugs -
    
    - maybe_map returns -1 on error instead of 0, which is interpreted as
      physical address 0
    
    - removed an include of ipc.h, which isn't needed
    
    - fixed the calculation of signal frame location
    
    - the signal delivery code is now immune to the stack expansion check
    
    - added a missing include
    
    Signed-off-by: Jeff Dike <jdike@addtoit.com>
    Cc: Paolo 'Blaisorblade' Giarrusso <blaisorblade@yahoo.it>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 0f7e663dea7f0e22f3b2d07156c5e9d2e8656610
Author: Bodo Stroesser <bstroesser@fujitsu-siemens.com>
Date:   Fri May 6 21:30:54 2005 -0700

    [PATCH] uml: Fix process exit race
    
    tt-mode closes switch_pipes in exit_thread_tt and kills processes in
    switch_to_tt, if the exit_state is EXIT_DEAD or EXIT_ZOMBIE.
    
    In very rare cases the exiting process can be scheduled out after having set
    exit_state and closed switch_pipes (from release_task it calls proc_pid_flush,
    which might sleep).  If this process is to be restarted, UML failes in
    switch_to_tt with:
    
       write of switch_pipe failed, err = 9
    
    We fix this by closing switch_pipes not in exit_thread_tt, but later in
    release_thread_tt.  Additionally, we set switch_pipe[0] = 0 after closing.
    switch_to_tt must not kill "from" process depending on its exit_state, but
    must kill it after release_thread was processed only, so it examines
    switch_pipe[0] for its decision.
    
    Signed-off-by: Bodo Stroesser <bstroesser@fujitsu-siemens.com>
    Signed-off-by: Jeff Dike <jdike@addtoit.com>
    Cc: Paolo 'Blaisorblade' Giarrusso <blaisorblade@yahoo.it>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit b8bd0220c1ac6273eda66e25d992654219f846b6
Author: Bodo Stroesser <bstroesser@fujitsu-siemens.com>
Date:   Fri May 6 21:30:53 2005 -0700

    [PATCH] uml: S390 preparation, arch_align_stack
    
    Only x86 and x86_64 use arch_align_stack(), all other subarches have:
    
     #define arch_align_stack(x) (x)
    
    So, if this definition is found, UML's own arch_align_stack() should be
    skipped.
    
    Signed-off-by: Bodo Stroesser <bstroesser@fujitsu-siemens.com>
    Cc: Paolo 'Blaisorblade' Giarrusso <blaisorblade@yahoo.it>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 1f3be588b51e809476cdecd4eaf6fd04670d9c36
Author: Bodo Stroesser <bstroesser@fujitsu-siemens.com>
Date:   Fri May 6 21:30:52 2005 -0700

    [PATCH] uml: Use CONFIG variable for address space size
    
    tt/mem.c still uses hardcoded TOP for i386 instead of CONFIG_TOP_ADDR provided
    by subarch's Kconfig_XXXX, which would be right.
    
    Signed-off-by: Bodo Stroesser <bstroesser@fujitsu-siemens.com>
    Signed-off-by: Jeff Dike <jdike@addtoit.com>
    Cc: Paolo 'Blaisorblade' Giarrusso <blaisorblade@yahoo.it>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 675dffc914412a25d33bbc8baea30681c565c9c1
Author: Jeff Dike <jdike@addtoit.com>
Date:   Fri May 6 21:30:51 2005 -0700

    [PATCH] uml: Turn literal numbers into symbolic constants
    
    So, there I was, looking at my own code, wondering what the magic setjmp
    return values did.  This patch turns the constants that are used to make
    requests of the initial thread into meaningful symbols.
    
    Signed-off-by: Jeff Dike <jdike@addtoit.com>
    Cc: Paolo 'Blaisorblade' Giarrusso <blaisorblade@yahoo.it>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 37f02b63bdc55147a32cedf7831452efd5a72748
Author: Jeff Dike <jdike@addtoit.com>
Date:   Fri May 6 21:30:51 2005 -0700

    [PATCH] uml: Makefile cleanup
    
    This eliminates some stuff from arch/um/kernel/Makefile which refers to a
    file which has long since been deleted.
    
    Signed-off-by: Jeff Dike <jdike@addtoit.com>
    Cc: Paolo 'Blaisorblade' Giarrusso <blaisorblade@yahoo.it>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit ccfcd37cb694fc71ddf16fa7faa9e06811a26e5b
Author: Jeff Dike <jdike@addtoit.com>
Date:   Fri May 6 21:30:50 2005 -0700

    [PATCH] uml: Eliminate unusable function
    
    Eliminate the non-inline version of switch_mm, which can't be used,
    considering the inline version in asm/mmu_context.h
    
    Signed-off-by: Jeff Dike <jdike@addtoit.com>
    Cc: Paolo 'Blaisorblade' Giarrusso <blaisorblade@yahoo.it>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 804c2415c9182b95719cdf85913f6313f7ac042a
Author: Bodo Stroesser <bstroesser@fujitsu-siemens.com>
Date:   Fri May 6 21:30:49 2005 -0700

    [PATCH] uml: S390 preparation, save an extra register
    
    s390 tt-mode needs to save not only syscall number, but an further register
    also.
    
    Signed-off-by: Bodo Stroesser <bstroesser@fujitsu-siemens.com>
    Signed-off-by: Jeff Dike <jdike@addtoit.com>
    Cc: Paolo 'Blaisorblade' Giarrusso <blaisorblade@yahoo.it>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 82c1c11bdd92d94f8fd620a3ea6c894eba37d4ed
Author: Bodo Stroesser <bstroesser@fujitsu-siemens.com>
Date:   Fri May 6 21:30:46 2005 -0700

    [PATCH] uml: S390 preparation, peekusr/pokeusr defined by subarch
    
    s390 needs to change some parts of arch/um/kernel/ptrace.c.  Thus, the code
    regarding PEEKUSER and POKEUSER are shifted to arch/um/sys-<subarch>/ptrace.c.
    
    Also s390 debug registers need to be updated, when singlestepping is switched
    on / off.  Thus, setting/resetting of singlestepping is centralized in the new
    function set_singlestep(), which also inserts the macro
    SUBARCH_SET_SINGLESTEP(mode), if defined.
    
    Finally, s390 has the "ieee_instruction_pointer" in its
    registers, which also is allowed to be read via
    
      ptrace( PTRACE_PEEKUSER, getpid(), PT_IEEE_IP, 0);
    
    To implement this feature, sys_ptrace inserts the macro
    SUBARCH_PTRACE_SPECIAL, if defined.
    
    Signed-off-by: Bodo Stroesser <bstroesser@fujitsu-siemens.com>
    Signed-off-by: Jeff Dike <jdike@addtoit.com>
    Cc: Paolo 'Blaisorblade' Giarrusso <blaisorblade@yahoo.it>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 16c11163019879c0e1e69d3ec7d4574a80e9c77e
Author: Jeff Dike <jdike@addtoit.com>
Date:   Fri May 6 21:30:45 2005 -0700

    [PATCH] uml: command line handling cleanup
    
    Command line handling cleanups - a couple of things made static and an
    unused declaration removed from header.
    
    Signed-off-by: Jeff Dike <jdike@addtoit.com>
    Cc: Paolo 'Blaisorblade' Giarrusso <blaisorblade@yahoo.it>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 8bef3e0a06c00bd44760361f84b08e30cd1bff0e
Author: Jeff Dike <jdike@addtoit.com>
Date:   Fri May 6 21:30:44 2005 -0700

    [PATCH] uml: Remove include/asm-um/elf.h
    
    I accidentally included include/asm-um/elf.h as a real file in a previous
    patch.  This patch eliminates it.
    
    Signed-off-by: Jeff Dike <jdike@addtoit.com>
    Cc: Paolo 'Blaisorblade' Giarrusso <blaisorblade@yahoo.it>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit f2a0f8b9301ca34034c4a2ec09a09ff4677e83dd
Author: Jeff Dike <jdike@addtoit.com>
Date:   Fri May 6 21:30:43 2005 -0700

    [PATCH] uml: __deprecated makes build unnecessarily noisy
    
    Remove the __deprecated from verify_area_skas and verify_area_tt.  Since
    verify_area is itself marked __deprecated, and it is the only caller of
    these, then they don't need to be marked.  Marking them only makes the
    build noisier.
    
    Signed-off-by: Jeff Dike <jdike@addtoit.com>
    Cc: Paolo 'Blaisorblade' Giarrusso <blaisorblade@yahoo.it>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit c184ca3681ee9ae0bb63cb591e1e16f42536415c
Author: Jiri Benc <jbenc@suse.cz>
Date:   Fri May 6 21:30:42 2005 -0700

    [PATCH] video/tuner: add VIDEO_G_FREQUENCY and freq range to VIDIOC_G_TUNER
    
    This patch adds a VIDIOC_G_FREQUENCY command to tuner-core.c and sets
    lowest and highest tunable frequencies in v4l2_tuner structure returned by
    VIDIOC_G_TUNER command.
    
    Signed-off-by: Jiri Benc <jbenc@suse.cz>
    Cc: Gerd Knorr <kraxel@bytesex.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit e99d3438e4db1ef9e4cae5ad3946c76f4ffd268d
Author: Jiri Benc <jbenc@suse.cz>
Date:   Fri May 6 21:30:42 2005 -0700

    [PATCH] video/tuner: fix tuner->freq updating
    
    In VIDIOC_S_FREQUENCY command in tuner-core.c, t->freq is set to a new
    value before calling set_freq().  This is not necessary, as set_freq() sets
    t->freq itself.  Moreover, it causes problems with Philips tuners, as they
    need to take into consideration difference between previous and new
    frequency.
    
    Signed-off-by: Jiri Benc <jbenc@suse.cz>
    Cc: Gerd Knorr <kraxel@bytesex.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit b272125273103458b9727df1868b81bae64f44cb
Author: Kumar Gala <galak@freescale.com>
Date:   Fri May 6 21:30:41 2005 -0700

    [PATCH] ppc32: Fix POWER3/POWER4 compiler error
    
    In separating out support for hardware floating point we missed the fact
    that both POWER3 and POWER4 have HW FP.  Enable CONFIG_PPC_FPU for POWER3
    and POWER4 fixes the issue.
    
    Signed-off-by: Kumar Gala <kumar.gala@freescale.com>
    Acked-by: Paul Mackerras <paulus@samba.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit b7c2b704bd78aa3665fc24100bd2d4f5f8305d7a
Author: Paul Mackerras <paulus@samba.org>
Date:   Fri May 6 17:41:03 2005 -0700

    [PATCH] ppc64: enable CONFIG_RTAS_PROC by default
    
    This patch enables CONFIG_RTAS_PROC by default on pSeries.  This will
    preserve /proc/ppc64/rtas/rmo_buffer, which is needed by librtas.
    
    Signed-off-by: John Rose <johnrose@austin.ibm.com>
    Signed-off-by: Paul Mackerras <paulus@samba.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit b2411dd202e854d1f3be541135af8bb9872ea8b6
Author: Andrew Morton <akpm@osdl.org>
Date:   Fri May 6 17:41:01 2005 -0700

    [PATCH] revert msdos partitioning fix
    
    This change from March 3rd causes the partition parsing code to ignore
    partitions which have a signature byte of zero.  Turns out that more people
    have such partitions than we expected, and their device numbering is coming up
    wrong in post-2.6.11 kernels.
    
    So revert the change while we think about the problem a bit more.
    
    Cc: Andries Brouwer <Andries.Brouwer@cwi.nl>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit cccf25087f1cb24344b2140ca319b4afe4cf79a8
Author: Adrian Bunk <bunk@stusta.de>
Date:   Sat May 7 01:28:45 2005 +0200

    [PATCH] drivers/block/rd.c: rd_size shouldn't be static
    
    I somehow missed that there is external usage of rd_size on some
    architectures.
    
    Signed-off-by: Adrian Bunk <bunk@stusta.de>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 07342d623b8e1ac9501a36a0da55cbce1117aeaf
Author: Linus Torvalds <torvalds@ppc970.osdl.org>
Date:   Fri May 6 16:46:40 2005 -0700

    Automatic merge of rsync://www.parisc-linux.org/~jejb/git/scsi-for-linus-2.6.git

commit d4a1a7322c8c6b9899851f8358eb3842c67de6bc
Author: Linus Torvalds <torvalds@ppc970.osdl.org>
Date:   Fri May 6 15:41:11 2005 -0700

    Merge of master.kernel.org:/home/rmk/linux-2.6-serial.git

commit 22490eb80ceb4ac07ef36fff253904fb4adf57f2
Author: Linus Torvalds <torvalds@ppc970.osdl.org>
Date:   Fri May 6 15:39:23 2005 -0700

    Fix acpi_find_rsdp() - acpi_scan_rsdp takes length, not end
    
    Noticed by Jakub Jermar <jermar@itbs.cz>

commit e4862fedbc37a2c242824b100101f8e6e8488748
Author: James Bottomley <James.Bottomley@steeleye.com>
Date:   Fri May 6 13:14:48 2005 -0500

    [SCSI] correct the sym2 period setting routines
    
    There's a slight bug in the routines in that if the period requires dt,
    then the routine will unconditionally set it.  DT may only be set if
    Wide is also set, so this turns back on the wide bit.
    
    For domain validation to work correctly, we need to observe the wide bit
    absolutely.
    
    Acked by: Matthew Wilcox <willy@debian.org>
    Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

commit 966dc11fcc48866a24d9b3fd16eeebb3f5e05931
Author: David Mosberger-Tang <davidm@hpl.hp.com>
Date:   Fri May 6 05:25:00 2005 -0700

    [IA64] Fix stack placement when INIT hits in kernel mode.
    
    Without this patch, the stack is placed _below_ the current task
    structure, which is risky at best.
    
    Tony, I think this patch needs to go into 2.6.12, since it fixes a
    real bug.  Without it, INIT may case secondary errors, which would be
    most unpleasant.
    
    Signed-off-by: David Mosberger-Tang <davidm@hpl.hp.com>
    Signed-off-by: Tony Luck <tony.luck@intel.com>

commit b3214970abbe983cd89842ae24ea00e21bba79f6
Author: Jens Axboe <axboe@suse.de>
Date:   Fri May 6 08:37:44 2005 +0200

    [PATCH] fix alsa via82xx resume
    
    Trying software suspend on my workstation makes it crash on resume.  The
    problem is that via82xx marks the chip_init function as _devinit, but calls
    it on resume as well.
    
    Cc: <tiwai@suse.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Jens Axboe <axboe@suse.de>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 6c80a21cb1825e576ffff9df2302bf0fa1065ceb
Author: Paul Mackerras <paulus@samba.org>
Date:   Fri May 6 16:28:56 2005 +1000

    [PATCH] ppc64: global interrupt queue cleanup
    
    Move the code to set global interrupt queue membership to xics.c,
    and remove no longer needed extern declarations.  Also call it on
    all cpus (even the boot cpu) to prepare for kexec.
    
    Signed-off-by: Milton Miller <miltonm@bga.com>
    Signed-off-by: R Sharada <sharada@in.ibm.com>
    Signed-off-by: Paul Mackerras <paulus@samba.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit d3870398fafd4911bd84573b78be4b6b762f32b0
Author: Nathan Scott <nathans@sgi.com>
Date:   Fri May 6 06:44:46 2005 -0700

    [XFS] Fix directory inodes ioctl compat code, minor code consistency cleanups
    
    SGI Modid: xfs-linux:xfs-kern:21810a
    
    Signed-off-by: Nathan Scott <nathans@sgi.com>
    Signed-off-by: Christoph Hellwig <hch@sgi.com>

commit 68d1498c3a7e5223b587ad067111fbed12df52a1
Author: Russell Cattelan <cattelan@sgi.com>
Date:   Fri May 6 06:42:22 2005 -0700

    [XFS] Fix a bug in xfs_iomap for extent handling of write cases
    
    This may be the cause of several open PV's of incorrect
    delay flags being set and then tripping asserts.
    Do not return a delay alloc extent when the caller is asking to do a write.
    
    SGI Modid: xfs-linux:xfs-kern:189616a
    
    Signed-off-by: Russell Cattelan <cattelan@sgi.com>
    Signed-off-by: Christoph Hellwig <hch@sgi.com>

commit f1690f37a526d46aa4eb55e832346a531ba850dd
Author: Russell King <rmk@dyn-67.arm.linux.org.uk>
Date:   Fri May 6 10:19:09 2005 +0100

    [PATCH] 8250_pci.c: add comment about enum sorting order
    
    Signed-off-by: Russell King <rmk@arm.linux.org.uk>

commit 2512809255d018744fe6c2f5e996c83769846c07
Author: Paul Mackerras <paulus@samba.org>
Date:   Fri May 6 14:31:31 2005 +1000

    [PATCH] ppc64: remove explicit contig_page_data reference
    
    Trivial patch to remove our last direct reference to contig_page_data.
    This will make it just that much less hard to seperate NUMA and
    DISCONTIG.  Please forward on.  Against 2.6.12-rc1
    
    Signed-off-by: Joel Schopp <jschopp@austin.ibm.com>
    Signed-off-by: Paul Mackerras <paulus@samba.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 8b3447db2e02f01f94b4bcd8584caccdada6fa4a
Author: Paul Mackerras <paulus@samba.org>
Date:   Fri May 6 14:25:55 2005 +1000

    [PATCH] ppc64: remove unused arch/ppc64/boot/start.c
    
    start.c is not referenced in the arch/ppc64/boot/Makefile
    
    compile tested with the defconfig.
    
    Signed-off-by: Olaf Hering <olh@suse.de>
    Signed-off-by: Paul Mackerras <paulus@samba.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit af4d4b34106b6e520e6b13350831b170d8bca117
Author: Paul Mackerras <paulus@samba.org>
Date:   Fri May 6 14:27:17 2005 +1000

    [PATCH] ppc64: remove asm/bootinfo.h include
    
    The defines in bootinfo.h are not used, so the include can be removed.
    According to Ben, birecs are not used on ppc64:
    
      on ppc64, we made the decision of enforcing the presence of an
      OF device-tree and either an OF-like client interface or a kexec
      like flattened tree.
      so if your bootloader want to say things to the kernel,
      it can do so by adding properties to the device-tree
    
    compile-tested with defconfig
    
    Signed-off-by: Olaf Hering <olh@suse.de>
    Signed-off-by: Paul Mackerras <paulus@samba.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 5e2afc1ddd2a22b290bc334c0deffdd6dcdebc80
Author: Paul Mackerras <paulus@samba.org>
Date:   Fri May 6 13:35:04 2005 +1000

    [PATCH] ppc64: fix reloc_offset comment
    
    The code in reloc_offset is actually subtracting the address in the link
    register from the address calculated by the linker.  Perhaps the
    extended mnemonic `sub' replaced an original `subf' and the comment just
    did not get updated.
    
            bl      1f
    1:      mflr    r3
            LOADADDR(r4,1b)
            sub     r3,r4,r3
    
    Signed-off-by: Amos Waterland <apw@us.ibm.com>
    Signed-off-by: Paul Mackerras <paulus@samba.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 3892c5fa9455670466f9f5518b3b7ef12ef3ccd6
Author: Paul Mackerras <paulus@samba.org>
Date:   Fri May 6 13:29:34 2005 +1000

    [PATCH] ppc64: fix prom.c compile warning
    
    The code in unflatten_device_tree knows that get_property is written to
    only return with lenp equal to 1 when also returning a valid pointer.
    The gcc 3.3.3 compiler is not able to prove this to itself, so it warns
    about a possible uninitialized pointer dereference:
    
     .../arch/ppc64/kernel/prom.c: In function `unflatten_device_tree':
     .../arch/ppc64/kernel/prom.c:828:
     warning: `p' might be used uninitialized in this function
    
    Unless it is desired to rework the interaction between the two
    functions, this will keep the existing behavior but quiet the compiler.
    
    Signed-off-by: Amos Waterland <apw@us.ibm.com>
    Signed-off-by: Paul Mackerras <paulus@samba.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 6741f3a7f9922391cd02b3ca1329e669497dc22f
Author: Tobias Klauser <tklauser@nuerscht.ch>
Date:   Fri May 6 12:10:04 2005 +1000

    [PATCH] arch/ppc64: Replace custom MIN macro
    
    Replace a custom MIN() macro with the min() macro from kernel.h
    This patch removes 4 lines of redundant code.
    
    Signed-off-by: Tobias Klauser <tklauser@nuerscht.ch>
    Signed-off-by: Paul Mackerras <paulus@samba.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit b6f0b0d016a254ff583fec26f2c9e21c1ae2fdf3
Author: Adrian Bunk <bunk@stusta.de>
Date:   Thu May 5 16:16:22 2005 -0700

    [PATCH] drivers/scsi/sym53c416.c: fix a wrong check
    
    The Coverity checker found that this for loop was wrong.
    
    This patch changes it to what seems to be intended.
    
    Signed-off-by: Adrian Bunk <bunk@stusta.de>
    Cc: James Bottomley <James.Bottomley@steeleye.com>
    Cc: Matthew Wilcox <willy@debian.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit f59154c53fac0bfee52393247beadf0474770351
Author: Adrian Bunk <bunk@stusta.de>
Date:   Thu May 5 16:16:21 2005 -0700

    [PATCH] fs/udf/udftime.c: fix off by one error
    
    This patch fixes an off by one error found by the Coverity checker.
    
    Signed-off-by: Adrian Bunk <bunk@stusta.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 252795264df50a6c9eee604d29989854d5558139
Author: walter harms <wharms@bfs.de>
Date:   Thu May 5 16:16:20 2005 -0700

    [PATCH] documentation for strncpy()
    
    this clarifies the documentation on the behavier of strncpy().
    
    Signed-off-by: Domen Puncer <domen@coderock.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit ebe8b54134314cc31331f6e26f42276cd947d1df
Author: Domen Puncer <domen@coderock.org>
Date:   Thu May 5 16:16:19 2005 -0700

    [PATCH] correctly name the Shell sort
    
    As per http://www.nist.gov/dads/HTML/shellsort.html, this should be
    referred to as a Shell sort.  Shell-Metzner is a misnomer.
    
    Signed-off-by: Daniel Dickman <didickman@yahoo.com>
    Signed-off-by: Domen Puncer <domen@coderock.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit d28c2bc8d192f606a4eb831978722107b20a9405
Author: Domen Puncer <domen@coderock.org>
Date:   Thu May 5 16:16:19 2005 -0700

    [PATCH] fix lib/sort regression test
    
    The regression test in lib/sort.c is currently worthless because the array
    that is generated for sorting will be all zeros.  This patch fixes things
    so that the array that is generated will contain unsorted integers (that
    are not all identical) as was probably intended.
    
    Signed-off-by Daniel Dickman <didickman@yahoo.com>
    Signed-off-by: Domen Puncer <domen@coderock.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit cad359c68455d6870d053184bbb0ae208e207eef
Author: Adrian Bunk <bunk@stusta.de>
Date:   Thu May 5 16:16:18 2005 -0700

    [PATCH] fix NCR53C9x.c compile warning
    
    drivers/scsi/NCR53C9x.c: In function `esp_do_data':
    drivers/scsi/NCR53C9x.c:1838: warning: unused variable `flags'
    
    Signed-off-by: Adrian Bunk <bunk@fs.tum.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 4713741955736210511a5959bf13e92f8598dacd
Author: Kianusch Sayah Karadji <kianusch@sk-tech.net>
Date:   Thu May 5 16:16:17 2005 -0700

    [PATCH] x86: geode support fixes
    
    - Changed Name/defines from "Geode GX" to "Geode GX1" for clarification
    
    - Dropped "-march=i586" in favor of "-march=i486"
    
    - Dopped X86_OOSTORE support for Geode GX1
    
    Signed-off-by: Kianusch Sayah Karadji <kianusch@sk-tech.net>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 02c30a84e6298b6b20a56f0896ac80b47839e134
Author: Jesper Juhl <juhl-lkml@dif.dk>
Date:   Thu May 5 16:16:16 2005 -0700

    [PATCH] update Ross Biro bouncing email address
    
    Ross moved.  Remove the bad email address so people will find the correct
    one in ./CREDITS.
    
    Signed-off-by: Jesper Juhl <juhl-lkml@dif.dk>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 125947f2ab8c45417feaa4a8800e89529ca4612f
Author: Domen Puncer <domen@coderock.org>
Date:   Thu May 5 16:16:15 2005 -0700

    [PATCH] CodingStyle: trivial whitespace fixups
    
    When I do a "diff -Nur arch/i386 arch/x86_64" to see what is different between these two
    architectures, I see some differences due to whitespace issues only. The attached patch removes
    some of the noise by fixing up the following files:
    - arch/i386/boot/bootsect.S
    - arch/i386/boot/video.S
    - arch/x86_64/boot/bootsect.S
    
    Signed-off-by: Daniel Dickman <didickman@yahoo.com>
    Signed-off-by: Domen Puncer <domen@coderock.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 845d34318f8acb0d92d18ccc72ef6db4c7baeaea
Author: Domen Puncer <domen@coderock.org>
Date:   Thu May 5 16:16:14 2005 -0700

    [PATCH] Spelling cleanups in shrinker code
    
    Just a few small cleanups to make this coherent english.
    
    Signed-Off-By:  Martin Hicks <mort@wildopensource.com>
    Signed-off-by: Domen Puncer <domen@coderock.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit fba478b1719c39ea67f15c6158ff4993933e9d18
Author: Domen Puncer <domen@coderock.org>
Date:   Thu May 5 16:16:13 2005 -0700

    [PATCH] ixj* - compile warning cleanup
    
    compile warning cleanup - suggested by Adrian Bunk; remove unmaintained rcs
    char strings from source and handle the occurrences of their use, make sure
    kernel-userspace issues taken care of; break out into separate patch
    
    Signed-off-by: Stephen Biggs <yrgrknmxpzlk@gawab.com>
    Signed-off-by: Domen Puncer <domen@coderock.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 3d67554895982f04d458e14c81b7b9843429719c
Author: Jesper Juhl <juhl-lkml@dif.dk>
Date:   Thu May 5 16:16:13 2005 -0700

    [PATCH] fix up a comment still refering to verify_area
    
    Signed-off-by: Jesper Juhl <juhl-lkml@dif.dk>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 3677209239ed71d2654e73eecfab1dbec2af11a9
Author: Paolo 'Blaisorblade' Giarrusso <blaisorblade@yahoo.it>
Date:   Thu May 5 16:16:12 2005 -0700

    [PATCH] comments on locking of task->comm
    
    Add some comments about task->comm, to explain what it is near its definition
    and provide some important pointers to its uses.
    
    Signed-off-by: Paolo 'Blaisorblade' Giarrusso <blaisorblade@yahoo.it>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 291c4a75ce7632ee5c565359fb875ba0597f76be
Author: Randy.Dunlap <rddunlap@osdl.org>
Date:   Thu May 5 16:16:11 2005 -0700

    [PATCH] reiserfs: use NULL instead of 0
    
    Use NULL instead of 0 for pointer (sparse warning):
    fs/reiserfs/namei.c:611:50: warning: Using plain integer as NULL pointer
    
    Signed-off-by: Randy Dunlap <rddunlap@osdl.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit a27e951f1e9362411eba81e724fafca20f1b0563
Author: maximilian attems <janitor@sternwelten.at>
Date:   Thu May 5 16:16:10 2005 -0700

    [PATCH] cyrix: eliminate bad section references
    
    Fix cyrix section references:
     convert __initdata to __devinitdata.
    
    Error: ./arch/i386/kernel/cpu/mtrr/cyrix.o .text refers to 00000379
    R_386_32          .init.data
    Error: ./arch/i386/kernel/cpu/mtrr/cyrix.o .text refers to 00000399
    R_386_32          .init.data
    Error: ./arch/i386/kernel/cpu/mtrr/cyrix.o .text refers to 000003b3
    R_386_32          .init.data
    Error: ./arch/i386/kernel/cpu/mtrr/cyrix.o .text refers to 000003b9
    R_386_32          .init.data
    Error: ./arch/i386/kernel/cpu/mtrr/cyrix.o .text refers to 000003bf
    R_386_32          .init.data
    
    Signed-of-by: maximilian attems <janitor@sternwelten.at>
    
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 75c96f85845a6707b0f9916cb263cb3584f7d48f
Author: Adrian Bunk <bunk@stusta.de>
Date:   Thu May 5 16:16:09 2005 -0700

    [PATCH] make some things static
    
    This patch makes some needlessly global identifiers static.
    
    Signed-off-by: Adrian Bunk <bunk@stusta.de>
    Acked-by: Arjan van de Ven <arjanv@infradead.org>
    Acked-by: Trond Myklebust <trond.myklebust@fys.uio.no>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 5e198d94dd0c3ec7f6138229e2e412c2c6268c38
Author: Alasdair G Kergon <agk@redhat.com>
Date:   Thu May 5 16:16:09 2005 -0700

    [PATCH] device-mapper: Some missing statics
    
    This patch makes some needlessly global code static.
    
    Signed-Off-By: Alasdair G Kergon <agk@redhat.com>
    Signed-off-by: Adrian Bunk <bunk@stusta.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit f1daa40b638891a62e1be40f78d752c500265362
Author: Alasdair G Kergon <agk@redhat.com>
Date:   Thu May 5 16:16:08 2005 -0700

    [PATCH] device-mapper dm-emc: Fix a memset
    
    The dm emc hardware handler code memset the hardware handler structure to zero
    AFTER it had initialized the structure's spinlock field.
    
    Signed-Off-By: Alasdair G Kergon <agk@redhat.com>
    From: Dave Olien <dmo@osdl.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit c557308e1f4b6f7d6144a06e8f98c467814f3aed
Author: Alasdair G Kergon <agk@redhat.com>
Date:   Thu May 5 16:16:07 2005 -0700

    [PATCH] device-mapper multipath: Use private workqueue
    
    dm-mpath.c needs to use a private workqueue (like other dm targets already do)
    to avoid interfering with users of the default workqueue.
    
    Signed-Off-By: Alasdair G Kergon <agk@redhat.com>
    Acked-by: Jens Axboe <axboe@suse.de>
    Signed-off-by: Lars Marowsky-Bree <lmb@suse.de>
    Signed-off-by: <mikenc@us.ibm.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit b84b0287a8ba618568a8bc9ac8847ac332abe90d
Author: Alasdair G Kergon <agk@redhat.com>
Date:   Thu May 5 16:16:06 2005 -0700

    [PATCH] device-mapper: tidy dm_suspend
    
    Tidy dm_suspend.
    
    Signed-Off-By: Alasdair G Kergon <agk@redhat.com>
    From: Christoph Hellwig <hch@lst.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 354e007121de546e50b5592c2557575117435522
Author: Alasdair G Kergon <agk@redhat.com>
Date:   Thu May 5 16:16:05 2005 -0700

    [PATCH] device-mapper: handle __lock_fs error
    
    Handle error from __lock_fs()
    
    Signed-Off-By: Alasdair G Kergon <agk@redhat.com>
    From: Christoph Hellwig <hch@lst.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit dfbe03f6d09fcebf85ae2a2cbb4ceee9b0985e67
Author: Alasdair G Kergon <agk@redhat.com>
Date:   Thu May 5 16:16:04 2005 -0700

    [PATCH] device-mapper: let freeze_bdev return error
    
    Allow freeze_bdev() to return an error.
    
    Signed-Off-By: Alasdair G Kergon <agk@redhat.com>
    From: Christoph Hellwig <hch@lst.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 3dcee8064bd36c547b45514dfd33df4c12695428
Author: Alasdair G Kergon <agk@redhat.com>
Date:   Thu May 5 16:16:04 2005 -0700

    [PATCH] device-mapper: __unlock_fs void
    
    Make __unlock_fs() void.
    
    From: Christoph Hellwig <hch@lst.de>
    
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit d1782a3b0a15d9ac497a8f47931c4536bfe8d18e
Author: Alasdair G Kergon <agk@redhat.com>
Date:   Thu May 5 16:16:03 2005 -0700

    [PATCH] device-mapper: store bdev while frozen
    
    Store the struct block_device while device is frozen, saving us one call to
    bdget_disk().
    
    Signed-Off-By: Alasdair G Kergon <agk@redhat.com>
    From: Christoph Hellwig <hch@lst.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit d17d7fa44dbe1f12031773e27eda9e939024a037
Author: Andrew Morton <akpm@osdl.org>
Date:   Thu May 5 16:16:02 2005 -0700

    [PATCH] revert ext3-writepages-support-for-writeback-mode
    
    This had a fatal lock ranking bug: we do journal_start outside
    mpage_writepages()'s lock_page().
    
    Revert the whole thing, think again.
    
    Credit-to: Jan Kara <jack@suse.cz>
    
    For identifying the bug.
    
    Cc: Badari Pulavarty <pbadari@us.ibm.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit ecffdde68ebefa1aa24411a91b12ae649f71f71c
Author: Pavel Roskin <proski@gnu.org>
Date:   Thu May 5 16:16:01 2005 -0700

    [PATCH] orinoco MAINTAINERS update
    
    Add mailing list addresses for Orinoco and update its homepage.
    
    Signed-off-by: Pavel Roskin <proski@gnu.org>
    Cc: David Gibson <hermes@gibson.dropbear.id.au>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit fc9d53af37deeb830252f03c62724078d943686c
Author: Manu Abraham <manu@kromtek.com>
Date:   Thu May 5 16:16:01 2005 -0700

    [PATCH] bttv: fix dst i2c read/write timeout failure.
    
    Attached is a patch to bttv which fixes the following problems.
    
    Affected cards and problems:
    ~~~~~~~~~~~~~~~~~~~~~~~~
    o VP-1020 (200103A) Tuning problems, device detection.
    o VP-1020 (DST-MOT) Errors during tuning, device detection fails in a while.
    o VP-1030 (DST-CI) Tuning sometimes fails after CI commands.
    o VP-2031 (DCT-CI) Tuning problems
    
    The timeout happens before the actual timeout occured in the MCU
    on the board, and hence the problems.
    
    Changes: (bttv-i2c.diff)
    ~~~~~~~~~~~~~~~~~~~~~~~~
    o Changed the custom wait queue to wait_event_interruptible_timeout()
          - Suggestion by Johannes Stezenbach.
    
    o Fixed the wait queue timeout problem
          - This fixes the timeout problem on various cards.
          - This problem was visible as many
              * Cannot tune to channels, when signal levels are very low.
              * app_info does not work in some conditions for CI based cards
          - Smaller values worked good for newer cards, but the older cards
    suffered, settled down to the worst case values that could happen in any
    eventuality.
    
    Signed-off-by: Manu Abraham <manu@kromtek.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 2ef41634def0fcb0def3e3c90220c651ca478cb3
Author: Christoph Hellwig <hch@lst.de>
Date:   Thu May 5 16:15:59 2005 -0700

    [PATCH] remove do_sync parameter from __invalidate_device
    
    The only caller that ever sets it can call fsync_bdev itself easily.  Also
    update some comments.
    
    Signed-off-by: Christoph Hellwig <hch@lst.de>
    Cc: <viro@parcelfarce.linux.theplanet.co.uk>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 91bb52416854dfd581efe6e2a0aca8dc655f043e
Author: Christoph Hellwig <hch@lst.de>
Date:   Thu May 5 16:15:59 2005 -0700

    [PATCH] remove outdated comments from filemap.c
    
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 5b76ffd5d9f12ba850fc988188f55056204ad4e2
Author: Christoph Hellwig <hch@lst.de>
Date:   Thu May 5 16:15:58 2005 -0700

    [PATCH] DAC960: add support for Mylex AcceleRAID 4/5/600
    
    This patch adds support for a new class of DAC960 controllers.  It's based
    on the GPLed idac320 driver from IBM for Linux 2.4.18.  That driver is a
    fork of the 2.4.18 version of DAC960 that adds support for this new type of
    controllers (internally called "GEM Series"), that differ from other DAC960
    V2 firmware controllers only in the register offsets and removes support
    for all others.
    
    This patch instead integrates support for these controllers into the DAC960
    driver.
    
    Thanks to Anders Norrbring for pointing me to the idac320 driver and
    testing this patch.
    
    No Signed-Off: line because all code is either copy & pasted from IBM's
    idac320 driver or support for other controllers in the 2.6 DAC960 driver.
    
    Note: the really odd formating matches the rest of the DAC960 driver.
    
    Cc: Dave Olien <dmo@osdl.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit c835a388968f5437491e3fe6e9b0332bc3c52e0e
Author: Daniel Ritz <daniel.ritz@gmx.ch>
Date:   Thu May 5 16:15:57 2005 -0700

    [PATCH] pcmcia: yenta TI: align irq of func1 to func0 if INTRTIE is set
    
    Make sure that if the INTRTIE bit is set both functions of the cardbus
    bridge use the same IRQ before doing any probing...
    
    [ yes i hate the TI bridges for the fact that they are very flexible
      so that so many BIOS vendors get it wrong. ]
    
    Signed-off-by: Daniel Ritz <daniel.ritz@gmx.ch>
    Signed-off-by: Dominik Brodowski <linux@dominikbrodowski.net>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit c35e66a4216c99fe94868ed3f714bd2708d0032a
Author: Dominik Brodowski <linux@dominikbrodowski.net>
Date:   Thu May 5 16:15:56 2005 -0700

    [PATCH] pcmcia: enable 32-bit memory windows on pd6729
    
    Enable 32-bit memory windows on pd6729 PCI-PCMCIA bridges.
    
    Signed-off-by: Jarkko Raja <jar@pcuf.fi>
    Signed-off-by: Dominik Brodowski <linux@dominikbrodowski.net>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 0a4c9c93c2fb5d09259136531d3e8e70fdcd6027
Author: Frederic CAND <frederic.cand@anevia.com>
Date:   Thu May 5 16:15:52 2005 -0700

    [PATCH] saa6752hs: resolutions handling
    
    This patch handles the VIDIOC_S_FMT and VIDIOC_G_FMT ioctls for the
    saa6752hs.
    
    As only 4 preset video formats are supported (SIF, 1/2D1, 2/3D1, D1), we
    compute to which the asked resolution is the nearest and apply it.
    
    Signed-off-by: Frederic Cand <frederic.cand@anevia.com>
    Acked-by: Gerd Knorr <kraxel@bytesex.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit ac5f34c028a043405de087e43699195ab3974dbf
Author: Matt Porter <mporter@kernel.crashing.org>
Date:   Thu May 5 16:15:52 2005 -0700

    [PATCH] Update dontdiff
    
    Additions to the dontdiff list.
    
    Signed-off-by: Matt Porter <mporter@kernel.crashing.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit dfc1e148542f6f4951fd59e32c14a7368356db9d
Author: Adrian Bunk <bunk@stusta.de>
Date:   Thu May 5 16:15:51 2005 -0700

    [PATCH] remove BK documentation
    
    There's no longer a reason to document the obsolete BK usage.
    
    Signed-off-by: Adrian Bunk <bunk@stusta.de>
    Cc: Jeff Garzik <jgarzik@pobox.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit d769a66970a947613f7c638c362f237583bd141b
Author: Andrew Morton <akpm@osdl.org>
Date:   Thu May 5 16:15:50 2005 -0700

    [PATCH] uninline tty_paranoia_check()
    
    Has lots of callsites.
    
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 2b0c4bed77041bf64e26b502cd2a767e355c3342
Author: Adrian Bunk <bunk@stusta.de>
Date:   Thu May 5 16:15:49 2005 -0700

    [PATCH] drivers/ide/pci/sis5513.c: section fixes
    
    These three functions are referenced from the __devinitdata
    sis5513_chipset.
    
    Signed-off-by: Adrian Bunk <bunk@stusta.de>
    Cc: Bartlomiej Zolnierkiewicz <B.Zolnierkiewicz@elka.pw.edu.pl>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit b7e4e85337060354f8b860cc38066725559313a4
Author: Paulo Marques <pmarques@grupopie.com>
Date:   Thu May 5 16:15:49 2005 -0700

    [PATCH] setitimer timer expires too early
    
    It seems that the code responsible for this is in kernel/itimer.c:126:
    
    	p->signal->real_timer.expires = jiffies + interval;
    	add_timer(&p->signal->real_timer);
    
    If you request an interval of, lets say 900 usecs, the interval given by
    timeval_to_jiffies will be 1.
    
    If you request this when we are half-way between two timer ticks, the
    interval will only give 400 usecs.
    
    If we want to guarantee that we never ever give intervals less than
    requested, the simple solution would be to change that to:
    
    	p->signal->real_timer.expires = jiffies + interval + 1;
    
    This however will produce pathological cases, like having a idle system
    being requested 1 ms timeouts will give systematically 2 ms timeouts,
    whereas currently it simply gives a few usecs less than 1 ms.
    
    The complex (and more computationally expensive) solution would be to
    check the gettimeofday time, and compute the correct number of jiffies.
    This way, if we request a 300 usecs timer 200 usecs inside the timer
    tick, we can wait just one tick, but not if we are 800 usecs inside the
    tick. This would also mean that we would have to lock preemption during
    these computations to avoid races, etc.
    
    I've searched the archives but couldn't find this particular issue being
    discussed before.
    
    Attached is a patch to do the simple solution, in case anybody thinks
    that it should be used.
    
    Signed-Off-By: Paulo Marques <pmarques@grupopie.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit f0fbd5fc09b20f7ba7bc8c80be33e39925bb38e1
Author: Andrew Morton <akpm@osdl.org>
Date:   Thu May 5 16:15:48 2005 -0700

    [PATCH] __block_write_full_page() simplification
    
    The `last_bh' logic probably isn't worth much.  In those situations where only
    the front part of the page is being written out we will save some looping but
    in the vastly more common case of an all-page writeout if just adds more code.
    
    Nick Piggin <nickpiggin@yahoo.com.au>
    
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 05937baae9fc27b64bcd4378da7d2b14edf7931c
Author: Andrew Morton <akpm@osdl.org>
Date:   Thu May 5 16:15:47 2005 -0700

    [PATCH] __block_write_full_page speedup
    
    Remove all those get_bh()'s and put_bh()'s by extending lock_page() to cover
    the troublesome regions.
    
    (get_bh() and put_bh() happen every time whereas contention on a page's lock
    in there happens basically never).
    
    Cc: Nick Piggin <nickpiggin@yahoo.com.au>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit ad576e63e0c8b274a8558b8e05a6d0526e804dc0
Author: Nick Piggin <nickpiggin@yahoo.com.au>
Date:   Thu May 5 16:15:46 2005 -0700

    [PATCH] __block_write_full_page race fix
    
    When running
    	fsstress -v -d $DIR/tmp -n 1000 -p 1000 -l 2
    on an ext2 filesystem with 1024 byte block size, on SMP i386 with 4096 byte
    page size over loopback to an image file on a tmpfs filesystem, I would
    very quickly hit
    	BUG_ON(!buffer_async_write(bh));
    in fs/buffer.c:end_buffer_async_write
    
    It seems that more than one request would be submitted for a given bh
    at a time.
    
    What would happen is the following:
    2 threads doing __mpage_writepages on the same page.
    Thread 1 - lock the page first, and enter __block_write_full_page.
    Thread 1 - (eg.) mark_buffer_async_write on the first 2 buffers.
    Thread 1 - set page writeback, unlock page.
    Thread 2 - lock page, wait on page writeback
    Thread 1 - submit_bh on the first 2 buffers.
    => both requests complete, none of the page buffers are async_write,
       end_page_writeback is called.
    Thread 2 - wakes up. enters __block_write_full_page.
    Thread 2 - mark_buffer_async_write on (eg.) the last buffer
    Thread 1 - finds the last buffer has async_write set, submit_bh on that.
    Thread 2 - submit_bh on the last buffer.
    => oops.
    
    So change __block_write_full_page to explicitly keep track of the last bh
    we need to issue, so we don't touch anything after issuing the last
    request.
    
    Signed-off-by: Nick Piggin <nickpiggin@yahoo.com.au>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit f3ddbdc6267c32223035ea9bb8456a2d86f65ba1
Author: Nick Piggin <nickpiggin@yahoo.com.au>
Date:   Thu May 5 16:15:45 2005 -0700

    [PATCH] fix race in __block_prepare_write
    
    Fix a race where __block_prepare_write can leak out an in-flight read
    against a bh if get_block returns an error.  This can lead to the page
    becoming unlocked while the buffer is locked and the read still in flight.
    __mpage_writepage BUGs on this condition.
    
    BUG sighted on a 2-way Itanium2 system with 16K PAGE_SIZE running
    
    	fsstress -v -d $DIR/tmp -n 1000 -p 1000 -l 2
    
    where $DIR is a new ext2 filesystem with 4K blocks that is quite
    small (causing get_block to fail often with -ENOSPC).
    
    Signed-off-by: Nick Piggin <nickpiggin@yahoo.com.au>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 3c8fad1829cc33e903500b41d989fa50ab196378
Author: Daniel Ritz <daniel.ritz@gmx.ch>
Date:   Thu May 5 16:15:44 2005 -0700

    [PATCH] 3c59x: only put the device into D3 when we're actually using WOL
    
    During a warm boot the device is in D3 and has troubles coming out of it.
    
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 1922163c8dfe717c089bdcc18ade4a65350a09c8
Author: Randy.Dunlap <rddunlap@osdl.org>
Date:   Thu May 5 16:15:43 2005 -0700

    [PATCH] patch-kernel: support non-incremental 2.6.x.y 'stable' patches
    
    Add better support for (non-incremental) 2.6.x.y patches; If an ending
    version number if not specified, the script automatically increments the
    SUBLEVEL (x in 2.6.x.y) until no more patch files are found; however,
    EXTRAVERSION (y in 2.6.x.y) is never automatically incremented but must be
    specified fully.
    
    patch-kernel does not normally support reverse patching, but does so when
    applying EXTRAVERSION (x.y) patches, so that moving from 2.6.11.y to
    2.6.11.z is easy and handled by the script (reverse 2.6.11.y and apply
    2.6.11.z).
    
    Signed-off-by: Randy Dunlap <rddunlap@osdl.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 64f562c6df3cfc5d1b2b4bdbcb7951457df9c237
Author: Ananth N Mavinakayanahalli <amavin@redhat.com>
Date:   Thu May 5 16:15:42 2005 -0700

    [PATCH] kprobes: Allow multiple kprobes at the same address
    
    Allow registration of multiple kprobes at an address in an architecture
    agnostic way.  Corresponding handlers will be invoked in a sequence.  But,
    a kprobe and a jprobe can't (yet) co-exist at the same address.
    
    Signed-off-by: Ananth N Mavinakayanahalli <amavin@redhat.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 04dea5f93231204cc3ca0ab793ce76dbb10c86ba
Author: Prasanna S Panchamukhi <prasanna@in.ibm.com>
Date:   Thu May 5 16:15:41 2005 -0700

    [PATCH] Kprobes: Oops! in unregister_kprobe()
    
    kernel oops!  when unregister_kprobe() is called on a non-registered
    kprobe.  This patch fixes the above problem by checking if the probe exists
    before unregistering.
    
    Signed-off-by: Prasanna S Panchamukhi <prasanna@in.ibm.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 0b9e2cac8a56e197d0a9e06268db4c8652d23dd5
Author: Prasanna S Panchamukhi <prasanna@in.ibm.com>
Date:   Thu May 5 16:15:40 2005 -0700

    [PATCH] Kprobes: Incorrect handling of probes on ret/lret instruction
    
    Kprobes could not handle the insertion of a probe on the ret/lret
    instruction and used to oops after single stepping since kprobes was
    modifying eip/rip incorrectly.  Adjustment of eip/rip is not required after
    single stepping in case of ret/lret instruction, because eip/rip points to
    the correct location after execution of the ret/lret instruction.  This
    patch fixes the above problem.
    
    Signed-off-by: Prasanna S Panchamukhi <prasanna@in.ibm.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 3a0a64e6c917b2ccc311cf978cc9d7eef7b31c47
Author: Bodo Stroesser <bstroesser@fujitsu-siemens.com>
Date:   Thu May 5 16:15:40 2005 -0700

    [PATCH] uml: header and code cleanup
    
    Remove some definitions and declarations from arch/um/include/skas_ptrace.h,
    as they have moved to arch/um/include/sysdep/skas_ptrace.h
    
    Also, remove PTRACE_SIGPENDING support in UML at all.
    
    Signed-off-by: Bodo Stroesser <bstroesser@fujitsu-siemens.com>
    Signed-off-by: Jeff Dike <jdike@addtoit.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 7c5131a501e9e8549f74d807c37fde76008ef95a
Author: Bodo Stroesser <bstroesser@fujitsu-siemens.com>
Date:   Thu May 5 16:15:39 2005 -0700

    [PATCH] uml: remove a dangling symlink
    
    UML: remove no longer needed arch-signal.h
    
    Signed-off-by: Bodo Stroesser <bstroesser@fujitsu-siemens.com>
    Signed-off-by: Jeff Dike <jdike@addtoit.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 51a6b0c59a6170fc6a40221ef9b261b82856d315
Author: Bodo Stroesser <bstroesser@fujitsu-siemens.com>
Date:   Thu May 5 16:15:38 2005 -0700

    [PATCH] uml: s390 preparation, sighandler interface abstraction
    
    s390 passes parameters in registers.  So the only safe way to find out the
    address of signal context, error-address and error-type (trap_no), which are
    passed to signal handlers as parameters, is to declare these parameters.
    
    So I inserted an subarch-specific macro which holds the declaration of
    parameters for signal handlers.
    
    Signed-off-by: Bodo Stroesser <bstroesser@fujitsu-siemens.com>
    Signed-off-by: Jeff Dike <jdike@addtoit.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 5fd861b682785f650114f4df53060d1be7fedecd
Author: Bodo Stroesser <bstroesser@fujitsu-siemens.com>
Date:   Thu May 5 16:15:37 2005 -0700

    [PATCH] uml: s390 preparation, delay moved to arch
    
    s390 has fast read access to realtime clock (nanosecond resolution).  So it
    makes sense to have an arch-specific implementation not only of __delay, but
    __udelay also.
    
    Signed-off-by: Bodo Stroesser <bstroesser@fujitsu-siemens.com>
    Signed-off-by: Jeff Dike <jdike@addtoit.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 7d37c6d52fce13008f20344790a81a6a5a0003b3
Author: Bodo Stroesser <bstroesser@fujitsu-siemens.com>
Date:   Thu May 5 16:15:36 2005 -0700

    [PATCH] uml: s390 preparation, checksumming done in arch code
    
    Checksum handling largely depends on the subarch.
    
    Thus, I renamed i386 arch_csum_partial in arch/um/sys-i386/checksum.S back to
    csum_partial, removed csum_partial from arch/um/kernel/checksum.c and shifted
    EXPORT_SYMBOL(csum_partial) to arch/um/sys-i386/ksyms.c.
    
    Then, csum_partial_copy_to and csum_partial_copy_from were shifted from
    arch/um/kernel/checksum.c to arch/um/include/sysdep-i386/checksum.h and
    inserted in the calling functions csum_partial_copy_from_user() and
    csum_and_copy_to_user().
    
    Now, arch/um/kernel/checksum.c is empty and removed.
    
    Signed-off-by: Bodo Stroesser <bstroesser@fujitsu-siemens.com>
    Signed-off-by: Jeff Dike <jdike@addtoit.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit c52ac046757deebc514483e407dca39a9c774aa3
Author: Bodo Stroesser <bstroesser@fujitsu-siemens.com>
Date:   Thu May 5 16:15:36 2005 -0700

    [PATCH] uml: s390 preparation, linkage.h inherited from host
    
    This patch replaces the contents of include/asm-um/linkage.h
    by
        #include "asm/arch/linkage.h"
    
    Signed-off-by: Bodo Stroesser <bstroesser@fujitsu-siemens.com>
    Signed-off-by: Jeff Dike <jdike@addtoit.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit dbc35cc73f2edd6e39d7e814dbb6eddad6294665
Author: Bodo Stroesser <bstroesser@fujitsu-siemens.com>
Date:   Thu May 5 16:15:35 2005 -0700

    [PATCH] uml: s390 preparation, elf.h
    
    This patch make elh.h a symlink to the new arch-specific include files of the
    form elf-<subarch>.h, as in the same way already is done for some other
    includes.  Also moves Elf-stuff from archparam-<subarch>.h and elf.h to the
    new elf-<subarch>.h files.
    
    Signed-off-by: Bodo Stroesser <bstroesser@fujitsu-siemens.com>
    Signed-off-by: Jeff Dike <jdike@addtoit.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 51a141104a37369be2822f423ed4444aa34d26a2
Author: Jeff Dike <jdike@addtoit.com>
Date:   Thu May 5 16:15:34 2005 -0700

    [PATCH] uml: hostfs failed mount handling
    
    This cleans up the error handling and fixes a crash if a hostfs mount fails.
    
    Signed-off-by: Jeff Dike <jdike@addtoit.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit a0b8d32020681535700e7bd4dac29ecf25d944ae
Author: Jeff Dike <jdike@addtoit.com>
Date:   Thu May 5 16:15:33 2005 -0700

    [PATCH] uml: inclusion cleanup
    
    The completion cleanup got rid of some semaphores, but didn't remove the
    inclusion of asm/semaphore.h from xterm_kern.c.
    
    Signed-off-by: Jeff Dike <jdike@addtoit.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 2ba491759fd74bfadf656c55a3695e98b6074439
Author: Jeff Dike <jdike@addtoit.com>
Date:   Thu May 5 16:15:33 2005 -0700

    [PATCH] uml: tidy Makefile.rules
    
    Just some breaking of some overly-long lines.
    
    Signed-off-by: Jeff Dike <jdike@addtoit.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit cd2ee4a30cc0775d8b54e5b958613361a7cacfec
Author: Jeff Dike <jdike@addtoit.com>
Date:   Thu May 5 16:15:32 2005 -0700

    [PATCH] uml: Fix SIGWINCH relaying
    
    This makes SIGWINCH work again, and fixes a couple of SIGWINCH-associated
    crashes.  First, the sigio thread disables SIGWINCH because all hell breaks
    loose if it ever gets one and tries to call the signal handling code.  Second,
    there was a problem with deferencing tty structs after they were freed.  The
    SIGWINCH support for a tty wasn't being turned off or freed after the tty went
    away.
    
    Signed-off-by: Jeff Dike <jdike@addtoit.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit c578455a3eccf4dd7bd111e77129c301d6d67914
Author: Bodo Stroesser <bstroesser@fujitsu-siemens.com>
Date:   Thu May 5 16:15:31 2005 -0700

    [PATCH] uml: S390 preparation, abstract host page fault data
    
    This patch removes the arch-specific fault/trap-infos from thread and
    skas-regs.
    
    It adds a new struct faultinfo, that is arch-specific defined in
    sysdep/faultinfo.h.
    
    The structure is inserted in thread.arch and thread.regs.skas and
    thread.regs.tt
    
    Now, segv and other trap-handlers can copy the contents from regs.X.faultinfo
    to thread.arch.faultinfo with one simple assignment.
    
    Also, the number of macros necessary is reduced to
    
    FAULT_ADDRESS(struct faultinfo)
        extracts the faulting address from faultinfo
    
    FAULT_WRITE(struct faultinfo)
        extracts the "is_write" flag
    
    SEGV_IS_FIXABLE(struct faultinfo)
        is true for the fixable segvs, i.e. (TRAP == 14)
        on i386
    
    UPT_FAULTINFO(regs)
        result is (struct faultinfo *) to the faultinfo
        in regs->skas.faultinfo
    
    GET_FAULTINFO_FROM_SC(struct faultinfo, struct sigcontext *)
        copies the relevant parts of the sigcontext to
        struct faultinfo.
    
    On SIGSEGV, call user_signal() instead of handle_segv(), if the architecture
    provides the information needed in PTRACE_FAULTINFO, or if PTRACE_FAULTINFO is
    missing, because segv-stub will provide the info.
    
    The benefit of the change is, that in case of a non-fixable SIGSEGV, we can
    give user processes a SIGSEGV, instead of possibly looping on pagefault
    handling.
    
    Since handle_segv() sikked arch_fixup() implicitly by passing ip==0 to segv(),
    I changed segv() to call arch_fixup() only, if !is_user.
    
    Signed-off-by: Bodo Stroesser <bstroesser@fujitsu-siemens.com>
    Signed-off-by: Jeff Dike <jdike@addtoit.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit ea66e8a3b6c4760e8fbf59b1becb6bd8e3dd5376
Author: Jeff Dike <jdike@addtoit.com>
Date:   Thu May 5 16:15:30 2005 -0700

    [PATCH] uml: fix a ptrace call
    
    This fixes write_ldt_entry to treat userspace_pid as an array.
    
    Signed-off-by: Jeff Dike <jdike@addtoit.com>
    Cc: Paolo 'Blaisorblade' Giarrusso <blaisorblade@yahoo.it>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit fd7aab9c1a4705ed45fe01a7ff108ce9823b0830
Author: Al Viro <viro@parcelfarce.linux.theplanet.co.uk>
Date:   Thu May 5 16:15:29 2005 -0700

    [PATCH] uml: finish cross-build support
    
    O=... builds support.  Very easy, actually.
    
    Signed-off-by: Al Viro <viro@parcelfarce.linux.theplanet.co.uk>
    Signed-off-by: Jeff Dike <jdike@addtoit.com>
    Cc: Paolo 'Blaisorblade' Giarrusso <blaisorblade@yahoo.it>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 04fe392378c818fb60bd817495ecb266d2cebe68
Author: Al Viro <viro@parcelfarce.linux.theplanet.co.uk>
Date:   Thu May 5 16:15:28 2005 -0700

    [PATCH] uml: fix missing subdir in x86_64
    
    make distclean et.al.  are missing arch/um/sys-x86_64/utils; fixed the same
    way we have it done for sys-i386 counterpart.
    
    Signed-off-by: Al Viro <viro@parcelfarce.linux.theplanet.co.uk>
    Signed-off-by: Jeff Dike <jdike@addtoit.com>
    Cc: Paolo 'Blaisorblade' Giarrusso <blaisorblade@yahoo.it>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit da998a2aecd3f15eca5385e1122610890039c4df
Author: Al Viro <viro@parcelfarce.linux.theplanet.co.uk>
Date:   Thu May 5 16:15:27 2005 -0700

    [PATCH] uml: cross-build support : mk_task and mk_constants
    
    helpers in arch/um/util (mk_task and mk_constants) converted.  That's it -
    none of the helpers depends on build and target being the same architecture
    anymore.
    
    Signed-off-by: Al Viro <viro@parcelfarce.linux.theplanet.co.uk>
    Signed-off-by: Jeff Dike <jdike@addtoit.com>
    Cc: Paolo 'Blaisorblade' Giarrusso <blaisorblade@yahoo.it>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 2b8b611e9a4725ae558af4fa48cf7d9e2193e7ed
Author: Al Viro <viro@parcelfarce.linux.theplanet.co.uk>
Date:   Thu May 5 16:15:26 2005 -0700

    [PATCH] uml: cross-build support : mk_thread
    
    mk_thread converted
    
    Signed-off-by: Al Viro <viro@parcelfarce.linux.theplanet.co.uk>
    Signed-off-by: Jeff Dike <jdike@addtoit.com>
    Cc: Paolo 'Blaisorblade' Giarrusso <blaisorblade@yahoo.it>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit a31769ed3ee82198fd530cb1d79ee9c7f8eeb1d1
Author: Al Viro <viro@parcelfarce.linux.theplanet.co.uk>
Date:   Thu May 5 16:15:25 2005 -0700

    [PATCH] uml: cross-build support : kernel_offsets
    
    The next group of helpers is a bit trickier - they want the constants similar
    to those in user-offsets.h, but we need target sc.h for it.  So we can't put
    that into user-offsets (sc.h depends on it) and need the second generated
    header for that stuff (kernel-offsets.h.  BFD...
    
    Signed-off-by: Al Viro <viro@parcelfarce.linux.theplanet.co.uk>
    Signed-off-by: Jeff Dike <jdike@addtoit.com>
    Cc: Paolo 'Blaisorblade' Giarrusso <blaisorblade@yahoo.it>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 6bae32d395b532959703462c21248fbeb9894e95
Author: Al Viro <viro@parcelfarce.linux.theplanet.co.uk>
Date:   Thu May 5 16:15:25 2005 -0700

    [PATCH] uml: cross-build support: mk_sc
    
    Ditto for mk_sc
    
    Signed-off-by: Al Viro <viro@parcelfarce.linux.theplanet.co.uk>
    Signed-off-by: Jeff Dike <jdike@addtoit.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 1cd3bc1c810c83fb8955035675165a644e0c9a84
Author: Al Viro <viro@parcelfarce.linux.theplanet.co.uk>
Date:   Thu May 5 16:15:24 2005 -0700

    [PATCH] uml: cross-build support : mk_ptregs
    
    mk_ptregs converted.  Nothing new here, it's the same situation as with
    mk_user_constants.
    
    Signed-off-by: Al Viro <viro@parcelfarce.linux.theplanet.co.uk>
    Signed-off-by: Jeff Dike <jdike@addtoit.com>
    Cc: Paolo 'Blaisorblade' Giarrusso <blaisorblade@yahoo.it>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 8d0b9dc9be3919e9979eac59fd12e8f82b098325
Author: Al Viro <viro@parcelfarce.linux.theplanet.co.uk>
Date:   Thu May 5 16:15:23 2005 -0700

    [PATCH] uml: start cross-build support : mk_user_constants
    
    Beginning of cross-build fixes.  Instead of expecting that mk_user_constants
    (compiled and executed on the build box) will see the sizeof, etc.  for target
    box, we do what every architecture already does for asm-offsets.  Namely, have
    user-offsets.c compiled *for* *target* into user-offsets.s and sed it into the
    header with relevant constants.  We don't need to reinvent any wheels - all
    tools are already there.
    
    This patch deals with mk_user_constants.  It doesn't assume any relationship
    between target and build environment anymore - we pick all defines we need
    from user-offsets.h.  Later patches will deal with the rest of mk_...  helpers
    in the same way.
    
    Signed-off-by: Al Viro <viro@parcelfarce.linux.theplanet.co.uk>
    Signed-off-by: Jeff Dike <jdike@addtoit.com>
    Cc: Paolo 'Blaisorblade' Giarrusso <blaisorblade@yahoo.it>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit fcddd72e3e2565f8b838ae71a3e716a67f616160
Author: Al Viro <viro@parcelfarce.linux.theplanet.co.uk>
Date:   Thu May 5 16:15:22 2005 -0700

    [PATCH] uml: use variables rather than symlinks in dependencies
    
    Use explicit os-...  in make dependencies instead of playing with symlinks
    (symlink in question is still created - it's needed for other things; however,
    there's no reason to complicate ordering here).
    
    Signed-off-by: Al Viro <viro@parcelfarce.linux.theplanet.co.uk>
    Signed-off-by: Jeff Dike <jdike@addtoit.com>
    Cc: Paolo 'Blaisorblade' Giarrusso <blaisorblade@yahoo.it>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 03f81dc50caf6360aa5343264fed8868e22d9058
Author: Al Viro <viro@parcelfarce.linux.theplanet.co.uk>
Date:   Thu May 5 16:15:19 2005 -0700

    [PATCH] uml: include the linker script rather than symlink it
    
    Make vmlinux.lds.S include appopriate script instead of playing games with
    symlinks.
    
    Signed-off-by: Al Viro <viro@parcelfarce.linux.theplanet.co.uk>
    Signed-off-by: Jeff Dike <jdike@addtoit.com>
    Cc: Paolo 'Blaisorblade' Giarrusso <blaisorblade@yahoo.it>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 776cfebb430c7b22c208b1b17add97f354d97cab
Author: Paolo 'Blaisorblade' Giarrusso <blaisorblade@yahoo.it>
Date:   Thu May 5 16:15:18 2005 -0700

    [PATCH] uml kbuild: avoid useless rebuilds
    
    - Fix some problems with usage of $(targets) (sometimes missing, sometimes
      used badly) that trigger partial rebuilds when doing a rebuild.
    
    - At that purpose, also factor out some common code for symlinks creation.
    
    - Fix a x86-64 build warning, caused by -L/usr/lib, which is anyway useless,
      and invalid in the x86-64 case.
    
    Tested on x86_64 and x86.
    
    Signed-off-by: Paolo 'Blaisorblade' Giarrusso <blaisorblade@yahoo.it>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 0c28130b5c9e8f0b153436d3dae39482e5a70af1
Author: Paolo 'Blaisorblade' Giarrusso <blaisorblade@yahoo.it>
Date:   Thu May 5 16:15:17 2005 -0700

    [PATCH] x86_64: make string func definition work as intended
    
    In include/asm-x86_64/string.h there are such comments:
    
    /* Use C out of line version for memcmp */
    #define memcmp __builtin_memcmp
    int memcmp(const void * cs,const void * ct,size_t count);
    
    This would mean that if the compiler does not decide to use __builtin_memcmp,
    it emits a call to memcmp to be satisfied by the C out-of-line version in
    lib/string.c.  What happens is that after preprocessing, in lib/string.i you
    may find the definition of "__builtin_strcmp".
    
    Actually, by accident, in the object you will find the definition of strcmp
    and such (maybe a trick intended to redirect calls to __builtin_memcmp to the
    default memcmp when the definition is not expanded); however, this particular
    case is not a documented feature as far as I can see.
    
    Also, the EXPORT_SYMBOL does not work, so it's duplicated in the arch.
    
    I simply added some #undef to lib/string.c and removed the (now duplicated)
    exports in x86-64 and UML/x86_64 subarchs (the second ones are introduced by
    another patch I just posted for -mm).
    
    Signed-off-by: Paolo 'Blaisorblade' Giarrusso <blaisorblade@yahoo.it>
    CC: Andi Kleen <ak@suse.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 23352fc252495fdc072b3bd29f57c4c6b7a6bd83
Author: Paolo 'Blaisorblade' Giarrusso <blaisorblade@yahoo.it>
Date:   Thu May 5 16:15:16 2005 -0700

    [PATCH] uml: kludgy compilation fixes for x86-64 subarch modules support
    
    These are some trivial fixes for the x86-64 subarch module support.  The only
    potential problem is that I have to modify arch/x86_64/kernel/module.c, to
    avoid copying the whole of it.
    
    I can't use it verbatim because it depends on a special vmalloc-like area for
    modules, which for now (maybe that's to fix, I guess not) UML/x86-64 has not.
    I went the easy way and reused the i386 vmalloc()-based allocator.
    
    Signed-off-by: Paolo 'Blaisorblade' Giarrusso <blaisorblade@yahoo.it>
    Acked-by: Andi Kleen <ak@suse.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit f7fe8781749bf2de2ca03147a1691244a7d93ec7
Author: Paolo 'Blaisorblade' Giarrusso <blaisorblade@yahoo.it>
Date:   Thu May 5 16:15:15 2005 -0700

    [PATCH] uml: obvious compile fixes for x86-64 Subarch and x86 regression fixes
    
    This patch does some totally trivial compilation fixes.  It also restores the
    debugregs manipulation, which was commented out simply because it doesn't
    compile on x86_64 (we haven't yet implemented there debugregs handling).
    
    Signed-off-by: Paolo 'Blaisorblade' Giarrusso <blaisorblade@yahoo.it>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 1f8d419e291f7f7f7f3ffd4f0ba00834621690c8
Author: David Gibson <david@gibson.dropbear.id.au>
Date:   Thu May 5 16:15:13 2005 -0700

    [PATCH] ppc64: pgtable.h and other header cleanups
    
    This patch started as simply removing a few never-used macros from
    asm-ppc64/pgtable.h, then kind of grew.  It now makes a bunch of
    cleanups to the ppc64 low-level header files (with corresponding
    changes to .c files where necessary) such as:
    	- Abolishing never-used macros
    	- Eliminating multiple #defines with the same purpose
    	- Removing pointless macros (cases where just expanding the
    macro everywhere turns out clearer and more sensible)
    	- Removing some cases where macros which could be defined in
    terms of each other weren't
    	- Moving imalloc() related definitions from pgtable.h to their
    own header file (imalloc.h)
    	- Re-arranging headers to group things more logically
    	- Moving all VSID allocation related things to mmu.h, instead
    of being split between mmu.h and mmu_context.h
    	- Removing some reserved space for flags from the PMD - we're
    not using it.
    	- Fix some bugs which broke compile with STRICT_MM_TYPECHECKS.
    
    Signed-off-by: David Gibson <dwg@au1.ibm.com>
    Acked-by: Paul Mackerras <paulus@samba.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit e685752de107201432a055f7c45c396a5b04dc17
Author: Jesper Juhl <juhl-lkml@dif.dk>
Date:   Thu May 5 16:15:12 2005 -0700

    [PATCH] ppc64: add missing Kconfig help text
    
    There's no help text for CONFIG_DEBUG_STACKOVERFLOW - add one.
    
    Signed-off-by: Jesper Juhl <juhl-lkml@dif.dk>
    Signed-off-by: Anton Blanchard <anton@samba.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 7d12e522ba13ce718b7ec32b75803dece8adb072
Author: Anton Blanchard <anton@samba.org>
Date:   Thu May 5 16:15:11 2005 -0700

    [PATCH] ppc64: remove hidden -fno-omit-frame-pointer for schedule.c
    
    While looking at code generated by gcc4.0 I noticed some functions still
    had frame pointers, even after we stopped ppc64 from defining
    CONFIG_FRAME_POINTER.  It turns out kernel/Makefile hardwires
    -fno-omit-frame-pointer on when compiling schedule.c.
    
    Create CONFIG_SCHED_NO_NO_OMIT_FRAME_POINTER and define it on architectures
    that dont require frame pointers in sched.c code.
    
    (akpm: blame me for the name)
    
    Signed-off-by: Anton Blanchard <anton@samba.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 696c2b9f97c2439e9fb299650041ec750df46865
Author: Kumar Gala <galak@freescale.com>
Date:   Thu May 5 16:15:10 2005 -0700

    [PATCH] ppc32: Simplified PPC core revision report
    
    We can identify new Freescale PPC cores by the fact that the MSB of the PVR
    is set.  If we are a new Freescale core the decode of major/minor revision
    numbers is simplified so we dont have to add new case checks for a every
    new Freescale core.
    
    Signed-off-by: Kumar Gala <kumar.gala@freescale.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 075d6eb16d273dab7b7b4b83fcee8bce4ee387ed
Author: David Woodhouse <dwmw2@infradead.org>
Date:   Thu May 5 16:15:09 2005 -0700

    [PATCH] ppc32: platform-specific functions missing from kallsyms.
    
    The PPC32 kernel puts platform-specific functions into separate sections so
    that unneeded parts of it can be freed when we've booted and actually
    worked out what we're running on today.
    
    This makes kallsyms ignore those functions, because they're not between
    _[se]text or _[se]inittext.  Rather than teaching kallsyms about the
    various pmac/chrp/etc sections, this patch adds '_[se]extratext' markers
    for kallsyms.
    
    Signed-off-by: David Woodhouse <dwmw2@infradead.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit becf3aec2608d6807a58d0677661cb23c388d67f
Author: Herbert Xu <herbert@gondor.apana.org.au>
Date:   Thu May 5 16:15:08 2005 -0700

    [PATCH] Add CXT48 to modem black list in ac97
    
    The following patch works around the misdetection of the CXT48 codec as a
    modem by the OSS ac97 driver.
    
    Signed-off-by: Herbert Xu <herbert@gondor.apana.org.au>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 60d300c02fe2e0be9bb02904361e41e0307264b2
Author: Stuart Brady <sdbrady@ntlworld.com>
Date:   Thu May 5 16:15:07 2005 -0700

    [PATCH] include/linux/soundcard.h: endianness fix
    
    Fixes for big-endian systems in soundcard.h and awe_voice.h
    
    This patch fixes the AFMT_S16_NE (include/linux/soundcard.h) and AWE_PATCH
    (awe_voice.h) macros on big-endian systems.
    
    It also moves _PATCHKEY into a new file, patchkey.h, in order to remove a
    duplicate definition of it from awe_voice.h.
    
    Signed-off-by: Stuart Brady <sdbrady@ntlworld.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 42d77c70177b2f7535766bce938d965fd863f0fd
Author: Andrew Morton <akpm@osdl.org>
Date:   Thu May 5 16:15:06 2005 -0700

    [PATCH] interwave needs isa pnp
    
    Fix bug #4509
    
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 3437c5df6f9c00b6a9b7dcb7a30c5e3e1e5de189
Author: Jason Gaston <jason.d.gaston@intel.com>
Date:   Thu May 5 16:15:05 2005 -0700

    [PATCH] intel8x0: fix for Intel AC'97 audio driver
    
    This patch fixes a typo in the Intel AC'97 audio driver intel8x0.c for
    Intel ESB2.
    
    Signed-off-by: Jason Gaston <Jason.d.gaston@intel.com>
    Cc: <tiwai@suse.de>
    Cc: <perex@suse.cz>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit e422fd2c965ad1b0e4eadaabd0adb77e8a93e74e
Author: Andrea Arcangeli <andrea@suse.de>
Date:   Thu May 5 16:15:04 2005 -0700

    [PATCH] avoid -ENOMEM due reclaimable slab caches
    
    This makes sure that reclaimable buffer headers and reclaimable inodes
    are accounted properly during the overcommit checks.
    
    Signed-off-by: Andrea Arcangeli <andrea@suse.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit f48d9663f19afb88ac0e45b825da523180f1f9c0
Author: Alexander Nyberg <alexn@telia.com>
Date:   Thu May 5 16:15:03 2005 -0700

    [PATCH] x86 stack initialisation fix
    
    The recent change fix-crash-in-entrys-restore_all.patch
    
     	childregs->esp = esp;
    
     	p->thread.esp = (unsigned long) childregs;
    -	p->thread.esp0 = (unsigned long) (childregs+1);
    +	p->thread.esp0 = (unsigned long) (childregs+1) - 8;
    
     	p->thread.eip = (unsigned long) ret_from_fork;
    
    introduces an inconsistency between esp and esp0 before the task is run the
    first time.  esp0 is no longer the actual start of the stack, but 8 bytes
    off.
    
    This shows itself clearly in a scenario when a ptracer that is set to also
    ptrace eventual children traces program1 which then clones thread1.  Now
    the ptracer wants to modify the registers of thread1.  The x86 ptrace
    implementation bases it's knowledge about saved user-space registers upon
    p->thread.esp0.  But this will be a few bytes off causing certain writes to
    the kernel stack to overwrite a saved kernel function address making the
    kernel when actually running thread1 jump out into user-space.  Very
    spectacular.
    
    The testcase I've used is:
    /* start with strace -f ./a.out */
    #include <pthread.h>
    #include <stdio.h>
    
    void *do_thread(void *p)
    {
    	for (;;);
    }
    
    int main()
    {
    	pthread_t one;
    	pthread_create(&one, NULL, &do_thread, NULL);
    	for (;;);
    	return 0;
    }
    
    So, my solution is to instead of just adjusting esp0 that creates an
    inconsitent state I adjust where the user-space registers are saved with -8
    bytes.  This gives us the wanted extra bytes on the start of the stack and
    esp0 is now correct.  This solves the issues I saw from the original
    testcase from Mateusz Berezecki and has survived testing here.  I think
    this should go into -mm a round or two first however as there might be some
    cruft around depending on pt_regs lying on the start of the stack.  That
    however would have broken with the first change too!
    
    It's actually a 2-line diff but I had to move the comment of why the -8 bytes
    are there a few lines up. Thanks to Zwane for helping me with this.
    
    Signed-off-by: Alexander Nyberg <alexn@telia.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 47c297529bd23d93d2a088d9620bb220763e9cb1
Author: Linus Torvalds <torvalds@ppc970.osdl.org>
Date:   Thu May 5 16:23:24 2005 -0700

    Automatic merge of rsync://rsync.kernel.org/pub/scm/linux/kernel/git/davem/sparc-2.6.git

commit fd4e5f29f7354c3e3edaa03d37a7bf83b0cbae36
Author: Linus Torvalds <torvalds@ppc970.osdl.org>
Date:   Thu May 5 16:22:23 2005 -0700

    Automatic merge of rsync://rsync.kernel.org/pub/scm/linux/kernel/git/davem/net-2.6.git

commit 4adb18173aba217a7ce7f261427914d1350c4e18
Author: Linus Torvalds <torvalds@ppc970.osdl.org>
Date:   Thu May 5 16:06:47 2005 -0700

    Automatic merge of master.kernel.org:/home/rmk/linux-2.6-rmk.git

commit 41e46d6ab0ca1908bff4e77ad9eeb6bf7afeb5c0
Author: Nicolas Pitre <nico@org.rmk.(none)>
Date:   Thu May 5 23:24:45 2005 +0100

    [PATCH] ARM: 2665/1: kill warnings in entry-armv.S
    
    Patch from Nicolas Pitre
    
    Signed-off-by: Nicolas Pitre
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit 4b0e07a5566a4e3f141e52c1f17e683e4a5bba91
Author: Nicolas Pitre <nico@org.rmk.(none)>
Date:   Thu May 5 23:24:45 2005 +0100

    [PATCH] ARM: 2663/1: straightify TLS register emulation a bit more
    
    Patch from Nicolas Pitre
    
    This better express things, and should cover RMK's weird SMP toys.
    
    Signed-off-by: Nicolas Pitre
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit 3b9fa0931dd86a1fe5507311ee8031650f5d0e8c
Author: Arnaldo Carvalho de Melo <acme@ghostprotocols.net>
Date:   Thu May 5 15:09:46 2005 -0700

    [PATCH] Kconfig i18n support
    
    This patch adds i18n support for make *config, allowing users to have the
    config process in their own language.
    
    No printk was harmed in the process, don't worry, so all the bug reports,
    kernel messages, etc, remain in english, just the user tools to configure
    the kernel are internationalized.
    
    Users not interested in translations can just unset the related LANG,
    LC_ALL, etc env variables and have the config process in plain english,
    something like:
    
    LANG= make menuconfig
    
    is enough for having the whole config process in english. Or just don't
    install any translation file.
    
    Translations for brazilian portuguese are being done by a team of
    volunteers at:
    
    http://www.visionflex.inf.br/kernel_ptbr/pmwiki.php/Principal/Traducoes
    
    To start the translation process:
    
      make update-po-config
    
      This will generate the pot template named scripts/kconfig/linux.pot,
      copy it to, say, ~/es.po, to start the translation for spanish.
    
    To test your translation, as root issue this command:
    
      msgfmt -o /usr/share/locale/es/LC_MESSAGES/linux.mo ~/es.po
    
      Replace "es" with your language code.
    
      Then execute, for instance:
    
      make menuconfig
    
    The current patch doesn't use any optimization to reduce the size of the
    generated .mo file, it is possible to use the config option as a key, but
    this doesn't prevent the current patch from being used or the translations
    done under the current scheme to be in any way lost if we chose to do any
    kind of keying.
    
    Thanks to Fabricio Vaccari for starting the pt_BR (brazilian portuguese)
    translation effort, Thiago Maciera for helping me with the gconf.cc (QT
    frontent) i18n coding and to all the volunteers that are already working on
    the first translation, to pt_BR.
    
    I left the question on whether to ship the translations with the stock kernel
    sources to be discussed here, please share your suggestions.
    
    Signed-off-by: Arnaldo Carvalho de Melo <acme@conectiva.com.br>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org
    Signed-off-by: Andrew Morton <akpm@osdl.org>

commit 7cc1712b8a778c8077048969848857895d242009
Author: Coywolf Qi Hunt <coywolf@lovecn.org>
Date:   Thu May 5 14:53:01 2005 -0700

    [SPARC]: Remove legacy stuff from cpu_idle().
    
    Currently sparc and sparc64's UP cpu_idle() checks current pid. This
    is old time legacy. Now it's paranoia.
    
    Signed-off-by: Coywolf Qi Hunt <coywolf@lovecn.org>
    Acked-by: William Irwin <wli@holomorphy.com>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit b6d31e80f0d6a722bf85b3a7090df473fc545980
Author: David S. Miller <davem@davemloft.net>
Date:   Thu May 5 14:46:21 2005 -0700

    [TG3]: Update driver version and reldate.
    
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit e6de8ad1fae8385eca4bf288e7a6ea2664ce0458
Author: Michael Chan <mchan@broadcom.com>
Date:   Thu May 5 14:42:41 2005 -0700

    [TG3]: Ignore tg3_stop_block() errors.
    
    tg3_stop_block() errors can be safely ignored since tg3_chip_reset()
    always follows tg3_stop_block() calls.
    
    Signed-off-by: Michael Chan <mchan@broadcom.com>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit b3b7d6be54f919556148946adb4ece91820ad210
Author: David S. Miller <davem@davemloft.net>
Date:   Thu May 5 14:40:20 2005 -0700

    [TG3]: Elide tg3_stop_block messages when such events are normal.
    
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 60d530655334369b62f260296a5ed1646a9529f0
Author: Patrick McHardy <kaber@trash.net>
Date:   Thu May 5 14:30:15 2005 -0700

    [IPV4]: multipath_wrandom.c GPF fixes
    
    multipath_wrandom needs to use GFP_ATOMIC.
    
    Signed-off-by: Patrick McHardy <kaber@trash.net>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 8edf72ebce06d52e855438ec18fe20dea7a4cc04
Author: Christoph Hellwig <hch@lst.de>
Date:   Thu May 5 14:27:56 2005 -0700

    [SPARC64]: Kill useless __pte_alloc_one_kernel indirection
    
    warning: untested, but it there's not too much chance for screwups
    
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 3ef4e9a8db6c65de7c7f4bc013d62b0d73f50dce
Author: Christoph Hellwig <hch@lst.de>
Date:   Thu May 5 14:25:59 2005 -0700

    [ATALK]: Add alloc_ltalkdev().
    
    this matches the API used by other link layer like ethernet or token
    ring.
    
    Signed-off-by: Christoph Hellwig <hch@lst.de>
    Acked-by: Arnaldo Carvalho de Melo <acme@ghostprotocols.net>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 949bf797595fc99d4cadf9a294fe6fd32a4474e6
Author: James Bottomley <James.Bottomley@steeleye.com>
Date:   Sun May 1 18:58:15 2005 -0500

    [SCSI] fix command retries in spi_transport class
    
    The premise is that domain validation is likely to trigger errors which
    it wants to know about, so the only time it should be retrying them is
    when it gets a unit attention (likely as the result of a previous bus or
    device reset).  Ironically, the previous coding retried three times in
    all cases except those of unit attention.  The attached fixes this to do
    the right thing.
    
    Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

commit 476e19cfa131e2b6eedc4017b627cdc4ca419ffb
Author: Arnaldo Carvalho de Melo <acme@ghostprotocols.net>
Date:   Thu May 5 13:35:15 2005 -0700

    [IPV6]: Fix OOPS when using IPV6_ADDRFORM
    
    This causes sk->sk_prot to change, which makes the socket
    release free the sock into the wrong SLAB cache.  Fix this
    by introducing sk_prot_creator so that we always remember
    where the sock came from.
    
    Signed-off-by: Arnaldo Carvalho de Melo <acme@ghostprotocols.net>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit f403b7f452e4347f6af14c1f3c47bce758eb6337
Author: Nathan Scott <nathans@sgi.com>
Date:   Thu May 5 13:33:40 2005 -0700

    [XFS] Cleanup use of loff_t vs xfs_off_t in the core code.
    
    SGI Modid: xfs-linux:xfs-kern:22378a
    
    Signed-off-by: Nathan Scott <nathans@sgi.com>
    Signed-off-by: Christoph Hellwig <hch@sgi.com>

commit 24e17b5fb99d4d1b47fe0847a3a801e36d431ff6
Author: Nathan Scott <nathans@sgi.com>
Date:   Thu May 5 13:33:20 2005 -0700

    [XFS] Use the right offset when ensuring a delayed allocate conversion has covered the offset originally requested.  Can cause data corruption when multiple processes are performing writeout on different areas of the same file.  Quite difficult to hit though.
    
    SGI Modid: xfs-linux:xfs-kern:22377a
    
    Signed-off-by: Nathan Scott <nathans@sgi.com>
    Signed-off-by: Christoph Hellwig <hch@sgi.com>
    .

commit 775bf6c99a4ebde13bdb8dfa528ed241483b49ef
Author: Nathan Scott <nathans@sgi.com>
Date:   Thu May 5 13:33:01 2005 -0700

    [XFS] Do not do delalloc conversion on pages beyond EOF ever, not just sometimes
    
    SGI Modid: xfs-linux:xfs-kern:22376a
    
    Signed-off-by: Nathan Scott <nathans@sgi.com>
    Signed-off-by: Christoph Hellwig <hch@sgi.com>

commit 18e0a926ad7c5ab4ef05334230671c6975dac26b
Author: Eric Sandeen <sandeen@sgi.com>
Date:   Thu May 5 13:32:18 2005 -0700

    [XFS] remove noisy printk at vnode trace allocation
    
    SGI Modid: xfs-linux:xfs-kern:191625a
    
    Signed-off-by: Eric Sandeen <sandeen@sgi.com>
    Signed-off-by: Christoph Hellwig <hch@sgi.com>

commit 3ba0815a4b0709ef5e7b481067573d10806bbe2c
Author: Daniel Moore <dxm@sgi.com>
Date:   Thu May 5 13:31:34 2005 -0700

    [XFS] stop background sync from waiting for in-use inodes
    
    SGI Modid: xfs-linux:xfs-kern:191586a
    
    Signed-off-by: Daniel Moore <dxm@sgi.com>
    Signed-off-by: Christoph Hellwig <hch@sgi.com>

commit 3f243766660da3df4a75ea1892c310d6080646c8
Author: Nathan Scott <nathans@sgi.com>
Date:   Thu May 5 13:30:34 2005 -0700

    [XFS] Disable the combination of XFS direct IO and AIO until the IO completion
    handling for unwritten extents can be moved out of interrupt context.
    
    SGI Modid: xfs-linux:xfs-kern:22343a
    
    Signed-off-by: Nathan Scott <nathans@sgi.com>
    Signed-off-by: Christoph Hellwig <hch@sgi.com>

commit abd0cf7aeaaf8a15d9777e65606b6076868b6186
Author: Nathan Scott <nathans@sgi.com>
Date:   Thu May 5 13:30:13 2005 -0700

    [XFS] Resolve an issue with xfsbufd not getting along with swsusp.
    
    SGI Modid: xfs-linux:xfs-kern:22342a
    
    Signed-off-by: Nathan Scott <nathans@sgi.com>
    Signed-off-by: Christoph Hellwig <hch@sgi.com>

commit 764433b7f1cf5d7b5e27ceb4f5546042e1f4acc7
Author: Eric Sandeen <sandeen@sgi.com>
Date:   Thu May 5 13:29:17 2005 -0700

    [XFS] Fix up warnings
    
    SGI Modid: xfs-linux:xfs-kern:191411a
    
    Signed-off-by: Eric Sandeen <sandeen@sgi.com>
    Signed-off-by: Christoph Hellwig <hch@sgi.com>

commit 1f443ad70d3afa6bc74019ade2d664eadd7d505a
Author: Nathan Scott <nathans@sgi.com>
Date:   Thu May 5 13:28:29 2005 -0700

    [XFS] Allow initial XFS delayed allocation size to be increased beyond 64KB.
    
    SGI Modid: xfs-linux:xfs-kern:22261a
    
    Signed-off-by: Nathan Scott <nathans@sgi.com>
    Signed-off-by: Christoph Hellwig <hch@sgi.com>

commit 5fcbab355e1528545671a5221666ef640b8250c8
Author: Dean Roehrich <roehrich@sgi.com>
Date:   Thu May 5 13:27:19 2005 -0700

    [XFS] Add ATTR_NOLOCK for xfs_setattr to indicate that XFS_IOLOCK is held
    
    SGI Modid: xfs-linux:xfs-kern:190711a
    
    Signed-off-by: Dean Roehrich <roehrich@sgi.com>
    Signed-off-by: Christoph Hellwig <hch@sgi.com>
    .

commit 9effd8e62570c6e47b91734770e6122002c33ed5
Author: Eric Sandeen <sandeen@sgi.com>
Date:   Thu May 5 13:26:18 2005 -0700

    [XFS] Enable XFS_VNODE_TRACE
    
    SGI Modid: xfs-linux:xfs-kern:190725a
    
    Signed-off-by: Eric Sandeen <sandeen@sgi.com>
    Signed-off-by: Christoph Hellwig <hch@sgi.com>
    .

commit 31b084aef3f088962f56c100b31bb8479c5dd769
Author: Nathan Scott <nathans@sgi.com>
Date:   Thu May 5 13:25:00 2005 -0700

    [XFS] Fix up uses of nlink_t incorrectly restricting us to 2^16 links for some platforms
    
    SGI Modid: xfs-linux:xfs-kern:22032a
    
    Signed-off-by: Nathan Scott <nathans@sgi.com>
    Signed-off-by: Christoph Hellwig <hch@sgi.com>

commit de20614b351e4d4d23af0a105baa8fd2d7cd4f26
Author: Nathan Scott <nathans@sgi.com>
Date:   Thu May 5 13:24:13 2005 -0700

    [XFS] Block mount attempts for filesystems with version 1 directories.
    
    SGI Modid: xfs-linux:xfs-kern:21937a
    
    Signed-off-by: Nathan Scott <nathans@sgi.com>
    Signed-off-by: Christoph Hellwig <hch@sgi.com>

commit 71bce256bf2e2aaddf54a2f4ac216329c74be3ad
Author: Nathan Scott <nathans@sgi.com>
Date:   Thu May 5 13:23:27 2005 -0700

    [XFS] Move the XFS inode to the front of its hash list on a cache hit
    
    SGI Modid: xfs-linux:xfs-kern:21915a
    
    Signed-off-by: Nathan Scott <nathans@sgi.com>
    Signed-off-by: Christoph Hellwig <hch@sgi.com>

commit 25ae3f59b10dbd5e2b9b192ecc90ea935cc23e68
Author: Rafael J. Wysocki <rjw@sisk.pl>
Date:   Thu May 5 13:13:29 2005 -0700

    [DECNET]: Fix build after C99 netlink initializer change.
    
    Signed-off-by: Rafael J. Wysocki <rjw@sisk.pl>

commit f7e68bbf405a45d6e7c5b8fc384ff1ba20dd7aa4
Author: Russell King <rmk@dyn-67.arm.linux.org.uk>
Date:   Thu May 5 14:49:01 2005 +0100

    [PATCH] ARM: select PCI, ISA and ISA_DMA
    
    Rather than using a long "depends on..." and "default y" lines for
    these options, use select instead.
    
    Signed-off-by: Russell King <rmk@arm.linux.org.uk>

commit 53d7ad1ea3acb4a626edec179aa52e72ea216647
Author: Russell King <rmk@dyn-67.arm.linux.org.uk>
Date:   Thu May 5 14:06:31 2005 +0100

    ARM: Add missed imxfb include file
    
    This file got missed in the commit of patch 2661/1 thanks to a buggy
    script.
    
    Signed-off-by: Russell King <rmk@arm.linux.org.uk>

commit bfd4bda097f8758d28e632ff2035e25577f6b060
Author: David Woodhouse <dwmw2@shinybook.infradead.org>
Date:   Thu May 5 13:59:37 2005 +0100

    Merge with master.kernel.org:/pub/scm/linux/kernel/git/torvalds/linux-2.6.git

commit 4f7a18124c1a44858fb74a1c4234015009952959
Author: Russell King <rmk@dyn-67.arm.linux.org.uk>
Date:   Thu May 5 13:11:00 2005 +0100

    [PATCH] ARM: Fix kernel stack offset calculations
    
    Various places in the ARM kernel implicitly assumed that kernel
    stacks are always 8K due to hard coded constants.  Replace these
    constants with definitions.
    
    Correct the allowable range of kernel stack pointer values within
    the allocation.  Arrange for the entire kernel stack to be zeroed,
    not just the upper 4K if CONFIG_DEBUG_STACK_USAGE is set.
    
    Signed-off-by: Russell King <rmk@arm.linux.org.uk>

commit b2d84f078a8be40f5ae3b4d2ac001e2a7f45fe4f
Author: Roman Kagan <rkagan@mail.ru>
Date:   Wed Apr 13 21:40:17 2005 +0400

    [PATCH] drivers/base/bus.c: fix iteration in driver_detach()
    
    With 2.6.11 and 2.6.12-rc2 (and perhaps a few versions before) usb
    drivers for multi-interface devices, which do
    usb_driver_release_interface() in their disconnect(), make rmmod hang.
    
    It turns out to be due to a bug in drivers/base/bus.c:driver_detach(),
    that iterates over the list of attached devices with
    list_for_each_safe() under an assumption that device_release_driver()
    only releases the current device, while it may also call
    device_release_driver() for other devices on the same list.
    
    The following patch fixes it.  Please consider applying.
    
    Signed-off-by: Roman Kagan <rkagan@mail.ru>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 177a4324944478f2799ce4ede2797cb0f602f274
Author: Alexander Nyberg <alexn@dsv.su.se>
Date:   Sat Feb 26 13:38:51 2005 +0100

    [PATCH] Hotplug: Make dev->bus checking consistent
    
    Earlier in the same function dev->bus is checked before dereferenced,
    make consistent although I honestly don't know if dev->bus could
    ever be NULL
    
    Found by the Coverity tool
    
    Signed-off-by: Alexander Nyberg <alexn@dsv.su.se>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 897f5ab2cd733a77a2279268262919caa8154b9d
Author: Linus Torvalds <torvalds@ppc970.osdl.org>
Date:   Wed May 4 19:52:45 2005 -0700

    Automatic merge of rsync://rsync.kernel.org/pub/scm/linux/kernel/git/aegl/linux-2.6.git

commit 1d42a0ecf478962e8aede355a0be41365c117ff0
Author: Linus Torvalds <torvalds@ppc970.osdl.org>
Date:   Wed May 4 14:23:14 2005 -0700

    Automatic merge of rsync://rsync.kernel.org/pub/scm/linux/kernel/git/shaggy/jfs-2.6.git/

commit b48fc7bb3868abffc89ce70d4baf324574338d8e
Author: Dean Nelson <dcn@sgi.com>
Date:   Wed Mar 23 19:05:00 2005 -0700

    [IA64-SGI] convert some sn SAL_CALLs to ia64_sal_oemcall calls
    
    Convert some sn SAL_CALLs to ia64_sal_oemcall calls so that they can be
    called by kernel modules.
    
    Signed-off-by: Dean Nelson <dcn@sgi.com>
    Signed-off-by: Tony Luck <tony.luck@intel.com>

commit 9b48b46678989b67cd00658ea88964163eaab616
Author: Dean Nelson <dcn@sgi.com>
Date:   Tue Mar 22 16:00:00 2005 -0700

    [IA64-SGI] move nodepda pointer out of pda
    
    Remove the p_nodepda and p_subnodepda pointers from the pda_s structure.
    And then define a new per-cpu pointer to the nodepda and export it so
    that it can be accessed by kernel modules.
    
    Signed-off-by: Dean Nelson <dcn@sgi.com>
    Signed-off-by: Tony Luck <tony.luck@intel.com>

commit 836eeed6cea8ca8138e9deff7571857923541604
Author: Denis Vlasenko <vda@ilport.com.ua>
Date:   Wed May 4 08:07:16 2005 +0300

    [PATCH] i810fb: fix __initdata access
    
    [hv]sync[12] are __initdata, causing mplayer to oops with the previous i810fb fix.
    
    My fault, this fixes it. Sorry.
    
    Signed-off-by: Linux Torvalds <torvalds@osdl.org>

commit 1b75d8ba5ea96e174dc2674e01d87ce0d382ee44
Author: Al Viro <viro@www.linux.org.uk>
Date:   Wed May 4 05:40:22 2005 +0100

    [PATCH] ipmi iomem annotations and fixes
    
    annotated, a bunch of direct dereferencing replaced with readb().
    
    Signed-off-by: Al Viro <viro@parcelfarce.linux.theplanet.co.uk>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit b1ecb4c3a9e33cc8b93ac9cb046b535b72a15f68
Author: Al Viro <viro@www.linux.org.uk>
Date:   Wed May 4 05:40:12 2005 +0100

    [PATCH] asm/signal.h unification
    
    New file - asm-generic/signal.h.  Contains declarations of
    __sighandler_t, __sigrestore_t, SIG_DFL, SIG_IGN, SIG_ERR and default
    definitions of SIG_BLOCK, SIG_UNBLOCK and SIG_SETMASK.
    
    asm-*/signal.h switched to including it.  The only exception is
    asm-parisc/signal.h that wants its own declaration of __sighandler_t;
    that one is left as-is.
    
    asm-ppc64/signal.h required one more thing - unlike everybody else it
    used __sigrestorer_t instead of usual __sigrestore_t.  PPC64 switched to
    common spelling.
    
    Signed-off-by: Al Viro <viro@parcelfarce.linux.theplanet.co.uk>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 0555985d046348b39e44ff1da2719d73409d7981
Author: Al Viro <viro@www.linux.org.uk>
Date:   Wed May 4 05:40:02 2005 +0100

    [PATCH] sonypi trivial user annotations
    
    Signed-off-by: Al Viro <viro@parcelfarce.linux.theplanet.co.uk>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 56c3b7d788c21eecf5641020fcf8e4e15d0c5eb0
Author: Al Viro <viro@www.linux.org.uk>
Date:   Wed May 4 05:39:52 2005 +0100

    [PATCH] ISA DMA Kconfig fixes - part 4 (irda)
    
     * net/irda/irda_device.c::irda_setup_dma() made conditional on
       ISA_DMA_API (it uses helpers in question and irda is usable on
       platforms that don't have them at all - think of USB IRDA, for
       example).
     * irda drivers that depend on ISA DMA marked as dependent on
       ISA_DMA_API
    
    Signed-off-by: Al Viro <viro@parcelfarce.linux.theplanet.co.uk>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit a553260618d88c4790daec7975c88f3db1080b5b
Author: Al Viro <viro@www.linux.org.uk>
Date:   Wed May 4 05:39:42 2005 +0100

    [PATCH] ISA DMA Kconfig fixes - part 3
    
    Drivers that expect ISA DMA API are marked as such in Kconfig.
    
    Signed-off-by: Al Viro <viro@parcelfarce.linux.theplanet.co.uk>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 7fbacd5213a03b262bb17a826b166900e8b168ac
Author: Al Viro <viro@www.linux.org.uk>
Date:   Wed May 4 05:39:32 2005 +0100

    [PATCH] ISA_DMA Kconfig fixes - part 2 (parport_pc)
    
    Part of parport_pc that uses ISA DMA helpers made conditional on
    CONFIG_ISA_DMA_API.  As the result, driver got usable for boxen that do
    not have ISA DMA stuff and have normal PCI parport card stuck into
    them - these never use DMA anyway.
    
    Signed-off-by: Al Viro <viro@parcelfarce.linux.theplanet.co.uk>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 5cae841b13f23ccdf7e38b2400b5cf57deb57ccf
Author: Al Viro <viro@www.linux.org.uk>
Date:   Wed May 4 05:39:22 2005 +0100

    [PATCH] ISA DMA Kconfig fixes - part 1
    
    A bunch of drivers use ISA DMA helpers or their equivalents for
    platforms that have ISA with different DMA controller (a lot of ARM
    boxen).  Currently there is no way to put such dependency in Kconfig -
    CONFIG_ISA is not it (e.g.  it is not set on platforms that have no ISA
    slots, but have on-board devices that pretend to be ISA ones).
    
    New symbol added - ISA_DMA_API.  Set when we have functional
    enable_dma()/set_dma_mode()/etc.  set of helpers.  Next patches in the
    series will add missing dependencies for drivers that need them.
    
    I'm very carefully staying the hell out of the recurring flamefest on
    what exactly CONFIG_ISA would mean in ideal world - added symbol has a
    well-defined meaning and for now I really want to treat it as completely
    independent from the mess around CONFIG_ISA.
    
    Signed-off-by: Al Viro <viro@parcelfarce.linux.theplanet.co.uk>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 9b52523aff51e3b245e6ec8887e3fcf190da4711
Author: Al Viro <viro@www.linux.org.uk>
Date:   Wed May 4 05:39:01 2005 +0100

    [PATCH] mbcs trivial user annotations
    
    Signed-off-by: Al Viro <viro@parcelfarce.linux.theplanet.co.uk>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 3c51f196b658fa1920c84b0752a55ed251d22d52
Author: Al Viro <viro@www.linux.org.uk>
Date:   Wed May 4 05:38:51 2005 +0100

    [PATCH] sparc NULL noise removal
    
    Signed-off-by: Al Viro <viro@parcelfarce.linux.theplanet.co.uk>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 6b6bf51081a27e80334e7ebe2993ae1d046a3222
Author: Dave Kleikamp <shaggy@austin.ibm.com>
Date:   Wed May 4 09:11:49 2005 -0500

    JFS: Endian errors
    
    Thanks sparse!
    
    Signed-off-by: Dave Kleikamp <shaggy@austin.ibm.com>

commit e6600d800fead3e895f16bf9b426578a6301af44
Author: Linus Torvalds <torvalds@ppc970.osdl.org>
Date:   Wed May 4 07:08:43 2005 -0700

    Automatic merge of rsync://rsync.kernel.org/pub/scm/linux/kernel/git/gregkh/usb-2.6.git/

commit a1d4ebdbb3806e9d2c37f32a043ec54f4534977c
Author: Linus Torvalds <torvalds@ppc970.osdl.org>
Date:   Wed May 4 07:08:10 2005 -0700

    Merge of rsync://rsync.kernel.org/pub/scm/linux/kernel/git/gregkh/aoe-2.6.git/

commit 742b0c905d970fd60893cce14a3c68b523504bc4
Author: Linus Torvalds <torvalds@ppc970.osdl.org>
Date:   Wed May 4 07:07:22 2005 -0700

    Merge of rsync://rsync.kernel.org/pub/scm/linux/kernel/git/gregkh/pci-2.6.git/

commit 235bd6140dad7c08261abdc1f8056485c5344a74
Author: Linus Torvalds <torvalds@ppc970.osdl.org>
Date:   Wed May 4 07:06:38 2005 -0700

    Merge of rsync://rsync.kernel.org/pub/scm/linux/kernel/git/davem/net-2.6.git

commit 9171078ab5a0bbb516029cfc61378e0350a7b30d
Author: Adrian Bunk <bunk@stusta.de>
Date:   Sun May 1 15:53:08 2005 +0200

    [PATCH] PCI: drivers/pci/pci.c: remove pci_dac_set_dma_mask
    
    pci_dac_set_dma_mask is currently completely unused.
    
    Signed-off-by: Adrian Bunk <bunk@stusta.de>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit b308240b49ff5a1bddc6e10513c2c83f37a0bc78
Author: Dely Sy <dlsy@snoqualmie.dp.intel.com>
Date:   Thu Apr 28 18:08:53 2005 -0700

    [PATCH] PCI Hotplug: fix pciehp regression
    
    I fogot to remove the code that freed the memory in cleanup_slots().
    Here is the new patch, which I have also taken care of the comment
    by Eike to remove the cast in hotplug_slot->private.
    
    Signed-off-by: Dely Sy <dely.l.sy@intel.com>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit eaae4b3a84a3781543a32bcaf0a33306ae915574
Author: Steven Cole <elenstev@mesatop.com>
Date:   Tue May 3 18:38:30 2005 -0600

    [PATCH] PCI: Spelling fixes for drivers/pci.
    
    Here are some spelling corrections for drivers/pci.
    
    CONTROLER -> CONTROLLER
    Regisetr -> Register
    harware -> hardware
    inital -> initial
    Initilize -> Initialize
    funtion -> function
    funciton -> function
    occured -> occurred
    
    Signed-off-by: Steven Cole <elenstev@mesatop.com>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 3aa8c4febf74b1f23bd9fc329321af6d531fe4dd
Author: R.Marek@sh.cvut.cz <R.Marek@sh.cvut.cz>
Date:   Thu Apr 21 10:49:06 2005 +0000

    [PATCH] PCI: Rapid Hance quirk
    
    This patch just adds Intel's Hance Rapid south bridge IDs to ICH4 region quirk.
    Patch was successfuly tested by Chunhao Huang from Winbond.
    
    Signed-Off-By: Rudolf Marek <r.marek@sh.cvut.cz>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 034ecc724cc6ba662d0b2b5a1e11e7e66a768596
Author: Rolf Eike Beer <eike-hotplug@sf-tec.de>
Date:   Mon Apr 11 15:01:54 2005 +0200

    [PATCH] PCI Hotplug ibmphp_pci.c: Fix masking out needed information too early
    
    here is the patch that fixes the bug introduced by my previous patch which
    already went into 2.6.12-rc2 and is likely to cause trouble is someone hits
    one the else case here by accident.
    
    Using the &= operation before the if statement destroys the information the
    if asks for so we always go into the else branch.
    
    Signed-off-by: Rolf Eike Beer <eike-hotplug@sf-tec.de>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit c8958177224622411b9979eabb5610e30b06034b
Author: Greg KH <gregkh@suse.de>
Date:   Fri Apr 8 14:53:31 2005 +0900

    [PATCH] PCI: Add pci shutdown ability
    
    Now pci drivers can know when the system is going down without having to
    add a reboot notifier event.
    
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 4c0619add8c3a8b28e7fae8b15cc7b62de2f8148
Author: ssant@in.ibm.com <ssant@in.ibm.com>
Date:   Fri Apr 8 14:53:31 2005 +0900

    [PATCH] PCI: fix up word-aligned 16-bit PCI config access through sysfs
    
    This patch adds the possibility to do word-aligned 16-bit atomic PCI
    configuration space accesses via the sysfs PCI interface. As a result, problems
    with Emulex LFPC on IBM PowerPC64 are fixed.
    
    Patch is present in SLES 9 SP1.
    
    Signed-off-by: Vojtech Pavlik <vojtech@suse.cz>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit bc56b9e01190b9f1ad6b7c5c694b61bfe34c7aa5
Author: Greg KH <gregkh@suse.de>
Date:   Fri Apr 8 14:53:31 2005 +0900

    [PATCH] PCI: Clean up a lot of sparse "Should it be static?" warnings.
    
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 92df516e6264f9caff4be49718926d6884fa50ed
Author: Pavel Machek <pavel@ucw.cz>
Date:   Tue Apr 5 23:49:49 2005 +0200

    [PATCH] PCI: fix stale PCI pm docs
    
    This fixes u32 vs. pm_message_t confusion in documentation, and
    removes references to no-longer-existing (*save_state), too. With
    exception of USB (I hope David will fix/apply my patch), this should
    fix last piece of this confusion... famous last words.
    
    Signed-off-by: Pavel Machek <pavel@suse.cz>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit a3ea7fbac12fdb2d70c90bb36f81afa3c66e18f4
Author: Matthew Wilcox <matthew@wil.cx>
Date:   Tue Mar 29 19:08:48 2005 +0100

    [PATCH] PCI: update PCI documentation for pci_get_slot() depreciation
    
    pci_find_slot() doesn't work on multiple-domain boxes so pci_get_slot()
    should be used instead.
    
    Signed-off-by: Matthew Wilcox <matthew@wil.cx>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit ceb43744cd48a20212e2179e0c7ff2f450a3c97e
Author: Kenji Kaneshige <kaneshige.kenji@soft.fujitsu.com>
Date:   Fri Apr 8 14:53:31 2005 +0900

    [PATCH] PCI: 'is_enabled' flag should be set/cleared when the device is actually enabled/disabled
    
    I think 'is_enabled' flag in pci_dev structure should be set/cleared
    when the device actually enabled/disabled. Especially about
    pci_enable_device(), it can be failed. By this change, we will also
    get the possibility of refering 'is_enabled' flag from the functions
    called through pci_enable_device()/pci_disable_device().
    
    Signed-off-by: Kenji Kaneshige <kaneshige.kenji@jp.fujitsu.com>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 0e57c7166675a86293f150d5ef7779edd629fe2a
Author: Ed L Cashin <ecashin@coraid.com>
Date:   Fri Apr 29 10:24:28 2005 -0400

    [PATCH] aoe: update version number to 10
    
    update version number to 10
    
    Signed-off-by: Ed L. Cashin <ecashin@coraid.com>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 4613ed277ab8a41640434181898ef4649cc7301e
Author: Ed L Cashin <ecashin@coraid.com>
Date:   Fri Apr 29 10:24:25 2005 -0400

    [PATCH] aoe: add firmware version to info in sysfs
    
    add firmware version to info in sysfs
    
    Signed-off-by: Ed L. Cashin <ecashin@coraid.com>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 93d489fc56f819d8805d80ae83cbafc5e5719804
Author: Ed L Cashin <ecashin@coraid.com>
Date:   Fri Apr 29 10:24:22 2005 -0400

    [PATCH] aoe: allow multiple aoe devices to have the same mac
    
    allow multiple aoe devices to have the same mac
    
    Signed-off-by: Ed L. Cashin <ecashin@coraid.com>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>
    
    diff -u b/drivers/block/aoe/aoedev.c b/drivers/block/aoe/aoedev.c

commit 67d9f84786cc4fd42cb40c9474c248eadaff15c6
Author: Ed L Cashin <ecashin@coraid.com>
Date:   Fri Apr 29 10:24:18 2005 -0400

    [PATCH] aoe: update the documentation to mention aoetools
    
    update the documentation to mention aoetools
    
    Signed-off-by: Ed L. Cashin <ecashin@coraid.com>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit c59a24dc512952cb434b34a66c3792555159fa36
Author: Ed L Cashin <ecashin@coraid.com>
Date:   Fri Apr 29 10:24:13 2005 -0400

    [PATCH] aoe: aoe-stat should work for built-in as well as module
    
    aoe-stat should work for built-in as well as module
    
    Signed-off-by: Ed L. Cashin <ecashin@coraid.com>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>
    
    diff -uprN a/Documentation/aoe/status.sh b/Documentation/aoe/status.sh

commit 03c41c434775c52092d17a5031ad8ebaaf555bc4
Author: Ed L Cashin <ecashin@coraid.com>
Date:   Fri Apr 29 10:24:03 2005 -0400

    [PATCH] aoe: improve allowed interfaces configuration
    
    improve allowed interfaces configuration
    
    Signed-off-by: Ed L. Cashin <ecashin@coraid.com>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>
    
    diff -uprN a/Documentation/aoe/aoe.txt b/Documentation/aoe/aoe.txt

commit 3cb4a4f739cccdf0642fa7e3a087e0b8425ff67b
Author: Lonnie Mendez <lmendez19@austin.rr.com>
Date:   Tue May 3 17:02:20 2005 -0500

    [PATCH] USB cypress_m8: update kernel driver with current source
    
    Fixed problem where setting or retreiving the serial config would fail
    with EPIPE.  Removed CRTS toggling so the driver behaves more like other
    usbserial adapters.  Issued new interval of 1ms instead of the default
    bInterval.  As a result, transfer speed has been substantially
    increased.  From avg. 850bps to avg. 3300bps.  Also added new module
    parameter 'interval' to tweak the interval in case this change causes
    problems for someone.  Cleaned up code and formatting issues so source
    is more readable.  Replaced the C++ style comments.  Various other code
    cleanups.
    
    Signed-off-by: Lonnie Mendez <lmendez19@austin.rr.com>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 093cf723b2b06d774929ea07982f6a466ff22314
Author: Steven Cole <elenstev@mesatop.com>
Date:   Tue May 3 19:07:24 2005 -0600

    [PATCH] USB: Spelling fixes for drivers/usb.
    
    Here are some spelling corrections for drivers/usb.
    
    cancelation -> cancellation
    succesful -> successful
    cancelation -> cancellation
    decriptor -> descriptor
    Initalize -> Initialize
    wierd -> weird
    Protocoll -> Protocol
    occured -> occurred
    successfull -> successful
    Procesing -> Processing
    devide -> divide
    Isochronuous -> Isochronous
    noticable -> noticeable
    Basicly -> Basically
    transfering -> transferring
    intialize -> initialize
    Incomming -> Incoming
    additionnal -> additional
    asume -> assume
    Unfortunatly -> Unfortunately
    retreive -> retrieve
    tranceiver -> transceiver
    Compatiblity -> Compatibility
    Incorprated -> Incorporated
    existance -> existence
    Ununsual -> Unusual
    
    Signed-off-by: Steven Cole <elenstev@mesatop.com>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 7b1cbebaa7ced7a2029cc5b50eab60c79b24cc10
Author: Phil Dibowitz <phil@ipom.com>
Date:   Mon May 2 23:54:28 2005 -0700

    [PATCH] USB: unusual_devs entry for Minolta Dimage Z10
    
    This patch adds an unusual_devs entry for the Minolta Dimage Z10.
    Originally reported by Vilisas <vilisas@xxx.lt>
    
    Signed-off-by: Phil Dibowitz <phil@ipom.com>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 8af60be9a71d2c636cd800deab63a9fadf3aee96
Author: Vivian Bregier <Vivian.Bregier@imag.fr>
Date:   Tue May 3 02:16:34 2005 +0200

    [PATCH] USB: unusual_devs.h: atmel snd1 storage
    
    Signed-off-by: Phil Dibowitz <phil@ipom.com>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 5e54f91d8d770c5a48da10a5c9c314c1c926536b
Author: Ian Abbott <abbotti@mev.co.uk>
Date:   Fri Apr 29 16:09:44 2005 +0100

    [PATCH] USB: ftdi_sio redundant macro removal
    
    [ftdi_sio] Replaced redundant INTERFACE_A and INTERFACE_B macros with
    the equivalent PIT_SIOA and PIT_SIOB macros.
    
    Signed-off-by: Ian Abbott <abbotti@mev.co.uk>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 6f92872cc8085b9e65a8ec07aed106ce5d24f60b
Author: Ian Abbott <abbotti@mev.co.uk>
Date:   Fri Apr 29 16:06:14 2005 +0100

    [PATCH] USB: VID/PID updates for ftdi_sio driver
    
    Some VID/PID updates for the ftdi_sio driver:
    
    * The "Gude Analog- und Digitalsysteme GmbH" entries were missing from
      the "combined" table.
    * Replaced FTDI_8U232AM_ALT_ALT_PID with 3 PIDs for devices from
      4n-galaxy.de.
    * Removed redundant FTDI_RM_VID and renamed FTDI_RMCANVIEW_PID to
      FTDI_RM_CANVIEW_PID.
    * Added VID/PID for serial converter in Mobility Electronics EasiDock
      USB 200 (mentioned by Gregory Schmitt).
    * Added PID for Active Robots USB comms board (mentioned by John Koch).
    
    Signed-off-by: Ian Abbott <abbotti@mev.co.uk>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>
    
    diff -ur a/drivers/usb/serial/ftdi_sio.c b/drivers/usb/serial/ftdi_sio.c

commit b9ab0746a53b9cd5c64e179a1c13952f0ae80e64
Author: Andrea Arcangeli <andrea@suse.de>
Date:   Mon May 2 22:47:55 2005 +0200

    [PATCH] USB: new usbnet device id
    
    On Thu, Apr 14, 2005 at 11:06:21PM +0400, Sergey Vlasov wrote:
    > http://thread.gmane.org/gmane.linux.usb.devel/32977
    >
    > (see "[PATCH] N/3 cdc acm errors").
    >
    > You also need this driver core fix:
    >
    > http://thread.gmane.org/gmane.linux.usb.devel/33132
    
    I reproduced the same oops while trying to execute at+mode=99, it would
    be nice to get these fix merged since I believe it's still needed to
    connect the laptop over gprs (something I didn't test yet).
    
    This further patch will allow you to connect via usbnet, Greg could you
    apply? Thanks!
    
    Signed-off-by: Andrea Arcangeli <andrea@suse.de>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 3b86b2028c4de998978baae780edfc36995bebc5
Author: Greg KH <gregkh@suse.de>
Date:   Mon Apr 25 21:46:29 2005 -0700

    [PATCH] USB: add a driver for the AirPrime CDMA Wireless PC card.
    
    Easier than trying to use the generic usb-serial driver.
    
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 56c1e26d75008d39f1067f453719857a81109d9f
Author: David Brownell <david-b@pacbell.net>
Date:   Sat Apr 9 09:00:29 2005 -0700

    [PATCH] USB: ehci power fixes
    
    Miscellaneous updates for EHCI.
    
     - Mostly updates the power switching on EHCI controllers.  One routine
       centralizes the "power on/off all ports" logic, and the capability to
       do that is reported more correctly.
    
     - Courtesy Colin Leroy, a patch to always power up ports after resumes
       which didn't keep a USB device suspended.  The reset-everything logic
       powers down those ports (on some hardware) so something needs to turn
       them back on.
    
     - Minor tweaks/bugfixes for the debug port support.
    
    Signed-off-by: David Brownell <dbrownell@users.sourceforge.net>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit e2e66446e08a7a365a59e25bbc8dd320ab3da0a6
Author: Matthew Dharm <mdharm-usb@one-eyed-alien.net>
Date:   Mon Apr 25 21:46:29 2005 -0700

    [PATCH] USB Storage: fix compile error
    
    This patch fixes a compiler error caused by a missing prototype.  It should
    apply directly to Greg KH's usb-2.6.git tree.
    
    Signed-off-by: Matthew Dharm <mdharm-usb@one-eyed-alien.net>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 6a800d456a81a9046634bcd26d868fd537f0c9ae
Author: Patrick McHardy <kaber@trash.net>
Date:   Tue May 3 22:17:18 2005 -0700

    [IPV6]: net/addrconf.h needs to include linux/in6.h earlier
    
    Else the in6_addr layout is not known for struct
    prefix_info.
    
    Signed-off-by: Patrick McHardy <kaber@trash.net>

commit 41832a08feca695158e15a6e58c26b224a7bfae2
Author: David S. Miller <davem@davemloft.net>
Date:   Tue May 3 22:05:43 2005 -0700

    [SPARC64]: Disable IRQ forwarding.
    
    There is some race whereby IRQs get stuck, the IRQ status
    is pending but no processor actually handles the IRQ vector
    and thus the interrupt.
     
    This is a temporary workaround.
    
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit cee2824f85414c98fff4004e335a6bc4072c8809
Author: David S. Miller <davem@davemloft.net>
Date:   Tue May 3 22:04:36 2005 -0700

    [SPARC64]: Fix goal_cpu tracking in retarget_one_irq().
    
    We would never advance the goal_cpu counter like we
    should, so all IRQs would go to a single processor.
    
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 8800cea62025a5209d110c5fa5990429239d6eee
Author: Linus Torvalds <torvalds@ppc970.osdl.org>
Date:   Tue May 3 17:24:08 2005 -0700

    Merge of rsync://rsync.kernel.org/pub/scm/linux/kernel/git/davem/net-2.6.git/

commit 14d50e78f947d340066ee0465dd892ad1d9162c0
Author: J Hadi Salim <hadi@cyberus.ca>
Date:   Tue May 3 16:29:13 2005 -0700

    [PKT_SCHED]: Action repeat
    
    Long standing bug.
    Policy to repeat an action never worked.
    
    Signed-off-by: J Hadi Salim <hadi@cyberus.ca>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit c4b07b7b3693228c7b848c00a9d4bbb49506a45f
Author: Tony Luck <tony.luck@intel.com>
Date:   Tue May 3 16:27:44 2005 -0700

    [IA64] Update arch/ia64/configs/tiger_defconfig
    
    Kristen did most of the checking, bring this up to -rc2.
    
    Signed-off-by: Tony Luck <tony.luck@intel.com>

commit aabc9761b69f1bfa30a78f7005be95cc9cc06175
Author: Herbert Xu <herbert@gondor.apana.org.au>
Date:   Tue May 3 16:27:10 2005 -0700

    [IPSEC]: Store idev entries
    
    I found a bug that stopped IPsec/IPv6 from working.  About
    a month ago IPv6 started using rt6i_idev->dev on the cached socket dst
    entries.  If the cached socket dst entry is IPsec, then rt6i_idev will
    be NULL.
    
    Since we want to look at the rt6i_idev of the original route in this
    case, the easiest fix is to store rt6i_idev in the IPsec dst entry just
    as we do for a number of other IPv6 route attributes.  Unfortunately
    this means that we need some new code to handle the references to
    rt6i_idev.  That's why this patch is bigger than it would otherwise be.
    
    I've also done the same thing for IPv4 since it is conceivable that
    once these idev attributes start getting used for accounting, we
    probably need to dereference them for IPv4 IPsec entries too.
    
    Signed-off-by: Herbert Xu <herbert@gondor.apana.org.au>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit d5d75cd6b10ddad2f375b61092754474ad78aec7
Author: Stephen Hemminger <shemminger@osdl.org>
Date:   Tue May 3 16:24:57 2005 -0700

    [PKT_SCHED]: netetm: adjust parent qlen when duplicating
    
    Fix qlen underrun when doing duplication with netem. If netem is used
    as leaf discipline, then the parent needs to be tweaked when packets
    are duplicated.
    
    Signed-off-by: Stephen Hemminger <shemminger@osdl.org>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 771018e76aaa6474be20a53c20458bcae8b00485
Author: Stephen Hemminger <shemminger@osdl.org>
Date:   Tue May 3 16:24:32 2005 -0700

    [PKT_SCHED]: netetm: make qdisc friendly to outer disciplines
    
    Netem currently dumps packets into the queue when timer expires. This
    patch makes work by self-clocking (more like TBF).  It fixes a bug
    when 0 delay is requested (only doing loss or duplication).
    
    Signed-off-by: Stephen Hemminger <shemminger@osdl.org>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 8cbe1d46d69f9e2c49f284fe0e9aee3387bd2c71
Author: Stephen Hemminger <shemminger@osdl.org>
Date:   Tue May 3 16:24:03 2005 -0700

    [PKT_SCHED]: netetm: trap infinite loop hange on qlen underflow
    
    Due to bugs in netem (fixed by later patches), it is possible to get qdisc
    qlen to go negative. If this happens the CPU ends up spinning forever
    in qdisc_run(). So add a BUG_ON() to trap it.
    
    Signed-off-by: Stephen Hemminger <shemminger@osdl.org>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit a71f62edc935fbdc346c5b16bea19f1480d29635
Author: Tony Luck <tony.luck@intel.com>
Date:   Tue May 3 16:21:45 2005 -0700

    [IA64] Fix two warnings introduced by perfmon patches.
    
    Signed-off-by: Tony Luck <tony.luck@intel.com>

commit bd96535b81ad09d7593cc75093534acb984d3dc9
Author: Patrick McHardy <kaber@trash.net>
Date:   Tue May 3 16:21:37 2005 -0700

    [NETFILTER]: Drop conntrack reference in ip_dev_loopback_xmit()
    
    Signed-off-by: Patrick McHardy <kaber@trash.net>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit e4f8ab00cf3599ecb8110c0a838cd15d013b79e5
Author: Patrick McHardy <kaber@trash.net>
Date:   Tue May 3 16:20:39 2005 -0700

    [NETFILTER]: Fix nf_debug_ip_local_deliver()
    
    Signed-off-by: Patrick McHardy <kaber@trash.net>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit cacaddf57ed4d5ca994e9a7e2bd5558061f5d89d
Author: Tommy S. Christensen <tommy.christensen@tpack.net>
Date:   Tue May 3 16:18:52 2005 -0700

    [NET]: Disable queueing when carrier is lost.
    
    Some network drivers call netif_stop_queue() when detecting loss of
    carrier. This leads to packets being queued up at the qdisc level for
    an unbound period of time. In order to prevent this effect, the core
    networking stack will now cease to queue packets for any device, that
    is operationally down (i.e. the queue is flushed and disabled).
    
    Signed-off-by: Tommy S. Christensen <tommy.christensen@tpack.net>
    Acked-by: Herbert Xu <herbert@gondor.apana.org.au>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 0f4821e7b93fe72e89b8ff393bd8e705bd178aa5
Author: David S. Miller <davem@sunset.davemloft.net>
Date:   Tue May 3 16:15:59 2005 -0700

    [XFRM/RTNETLINK]: Decrement qlen properly in {xfrm_,rt}netlink_rcv().
    
    If we free up a partially processed packet because it's
    skb->len dropped to zero, we need to decrement qlen because
    we are dropping out of the top-level loop so it will do
    the decrement for us.
    
    Spotted by Herbert Xu.
    
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit a5a70b75d93b26e14c0c5e759099d602a480b9e2
Author: stephane eranian <eranian@hpl.hp.com>
Date:   Mon Apr 18 11:42:00 2005 -0700

    [IA64] another perfmon fix (take2)
    
    - pfm_context_load(): change return value from EINVAL to EBUSY
      when context is already loaded.
    
    - pfm_check_task_state(): pass test if context state is MASKED.
      It is safe to give access on PFM_CTX_MASKED because the PMU
      state (PMD) is stable and saved in software state.
      This helps multiplexing programs such as the example given
      in libpfm-3.1.
    
    Signed-off-by: stephane eranian <eranian@hpl.hp.com>
    Signed-off-by: Tony Luck <tony.luck@intel.com>

commit 8df5a500a3e97f7811cdce0f553ca1917ccd4220
Author: Stephane Eranian <eranian@hpl.hp.com>
Date:   Mon Apr 11 13:45:00 2005 -0700

    [IA64] perfmon & PAL_HALT again
    
    The pmu_active test is based on the values of PSR.up. THIS IS THE PROBLEM as
    it does not take into account the lazy restore logic which is as follow (simplified):
    
    context switch out:
    	save PMDs
    	clear psr.up
    	release ownership
    
    context switch in:
    	if (ctx->last_cpu == smp_processor_id() && ctx->cpu_activation == cpu_activation) {
    		set psr.up
    		return
    	}
    	restore PMD
    	restore PMC
    	ctx->last_cpu   = smp_processor_id();
    	ctx->activation = ++cpu_activation;
    	set psr.up
    
    The key here is that on context switch out, we clear psr.up and on context switch in
    we check if nobody else used the PMU on that processor since last time we came. In
    that case, we assume the PMD/PMC are ours and we simply reactivate.
    
    The Caliper problem is that between the moment we context switch out and the moment we
    come back, nobody effectively used the PMU BUT the processor went idle. Normally this
    would have no incidence but PAL_HALT does alter the PMU registers.  In default_idle(),
    the test on psr.up is not strong enough to cover this case and we go into PAL which
    trashed the PMU resgisters. When we come back we falsely assume that this is our state
    yet it is corrupted. Very nasty indeed.
    
    To avoid the problem it is necessary to forbid going to PAL_HALT as soon as perfmon
    installs some valid state in the PMU registers. This happens with an application
    attaches a context to a thread or CPU. It is not enough to check the psr/dcr bits.
    Hence I propose the attached patch. It adds a callback in process.c to modify the
    condition to enter PAL on idle. Basically, now it is conditional to pal_halt=1 AND
    perfmon saying it is okay.
    
    Signed-off-by: Tony Luck <tony.luck@intel.com>

commit 09e14305982efc2f3b509d3c50ef5dcbff64a998
Author: David S. Miller <davem@sunset.davemloft.net>
Date:   Tue May 3 15:30:05 2005 -0700

    [NETLINK]: Fix infinite loops in synchronous netlink changes.
    
    The qlen should continue to decrement, even if we
    pop partially processed SKBs back onto the receive queue.
    
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 84e48b6d64fdc29586bc7d9329f986cdae591a80
Author: Linus Torvalds <torvalds@ppc970.osdl.org>
Date:   Tue May 3 15:27:24 2005 -0700

    Merge of master.kernel.org:/home/rmk/linux-2.6-rmk.git

commit 48af7215405215e81e72aba1ae8031ca2fea840c
Author: Nicolas Pitre <nico@org.rmk.(none)>
Date:   Tue May 3 22:57:56 2005 +0100

    [PATCH] ARM: 2662/1: missing "default y" for CONFIG_HAS_TLS_REG
    
    Patch from Nicolas Pitre
    
    Signed-off-by: Nicolas Pitre
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit a493820df65909d344824499937c939150559ace
Author: Sascha Hauer <sascha@de.rmk.(none)>
Date:   Tue May 3 22:57:56 2005 +0100

    [PATCH] ARM: 2661/1: imxfb include
    
    Patch from Sascha Hauer
    
    This patch adds the missing include files for the i.MX framebuffer
    driver.
    
    Signed-off-by: Sascha Hauer
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit 2a0a6ebee1d68552152ae8d4aeda91d806995dec
Author: Herbert Xu <herbert@gondor.apana.org.au>
Date:   Tue May 3 14:55:09 2005 -0700

    [NETLINK]: Synchronous message processing.
    
    Let's recap the problem.  The current asynchronous netlink kernel
    message processing is vulnerable to these attacks:
    
    1) Hit and run: Attacker sends one or more messages and then exits
    before they're processed.  This may confuse/disable the next netlink
    user that gets the netlink address of the attacker since it may
    receive the responses to the attacker's messages.
    
    Proposed solutions:
    
    a) Synchronous processing.
    b) Stream mode socket.
    c) Restrict/prohibit binding.
    
    2) Starvation: Because various netlink rcv functions were written
    to not return until all messages have been processed on a socket,
    it is possible for these functions to execute for an arbitrarily
    long period of time.  If this is successfully exploited it could
    also be used to hold rtnl forever.
    
    Proposed solutions:
    
    a) Synchronous processing.
    b) Stream mode socket.
    
    Firstly let's cross off solution c).  It only solves the first
    problem and it has user-visible impacts.  In particular, it'll
    break user space applications that expect to bind or communicate
    with specific netlink addresses (pid's).
    
    So we're left with a choice of synchronous processing versus
    SOCK_STREAM for netlink.
    
    For the moment I'm sticking with the synchronous approach as
    suggested by Alexey since it's simpler and I'd rather spend
    my time working on other things.
    
    However, it does have a number of deficiencies compared to the
    stream mode solution:
    
    1) User-space to user-space netlink communication is still vulnerable.
    
    2) Inefficient use of resources.  This is especially true for rtnetlink
    since the lock is shared with other users such as networking drivers.
    The latter could hold the rtnl while communicating with hardware which
    causes the rtnetlink user to wait when it could be doing other things.
    
    3) It is still possible to DoS all netlink users by flooding the kernel
    netlink receive queue.  The attacker simply fills the receive socket
    with a single netlink message that fills up the entire queue.  The
    attacker then continues to call sendmsg with the same message in a loop.
    
    Point 3) can be countered by retransmissions in user-space code, however
    it is pretty messy.
    
    In light of these problems (in particular, point 3), we should implement
    stream mode netlink at some point.  In the mean time, here is a patch
    that implements synchronous processing.  
    
    Signed-off-by: Herbert Xu <herbert@gondor.apana.org.au>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 96c36023434b7b6824b1da72a6b7b1ca61d7310c
Author: Herbert Xu <herbert@gondor.apana.org.au>
Date:   Tue May 3 14:43:27 2005 -0700

    [NETLINK]: cb_lock does not needs ref count on sk
    
    Here is a little optimisation for the cb_lock used by netlink_dump.
    While fixing that race earlier, I noticed that the reference count
    held by cb_lock is completely useless.  The reason is that in order
    to obtain the protection of the reference count, you have to take
    the cb_lock.  But the only way to take the cb_lock is through
    dereferencing the socket.
    
    That is, you must already possess a reference count on the socket
    before you can take advantage of the reference count held by cb_lock.
    As a corollary, we can remve the reference count held by the cb_lock.
    
    Signed-off-by: Herbert Xu <herbert@gondor.apana.org.au>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 9dfa277f88388a94993b121db46b80df66f48d9e
Author: Patrick McHardy <kaber@trash.net>
Date:   Tue May 3 14:41:18 2005 -0700

    [PKT_SCHED]: Fix range in PSCHED_TDIFF_SAFE to 0..bound
    
    Signed-off-by: Patrick McHardy <kaber@trash.net>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 033d899904792d3501b7dd469495ca9138424ec3
Author: Asim Shankar <asimshankar@gmail.com>
Date:   Tue May 3 14:39:33 2005 -0700

    [PKT_SCHED]: HTB: Drop packet when direct queue is full
    
    htb_enqueue(): Free skb and return NET_XMIT_DROP if a packet is
    destined for the direct_queue but the direct_queue is full. (Before
    this: erroneously returned NET_XMIT_SUCCESS even though the packet was
    not enqueued)
    
    Signed-off-by: Asim Shankar <asimshankar@gmail.com>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 96edf83c4e284c08584f97623f7c7f029759459e
Author: Jesper Juhl <juhl-lkml@dif.dk>
Date:   Tue May 3 14:38:09 2005 -0700

    [PPP]: remove redundant NULL pointer checks before kfree & vfree
    
    kfree() and vfree() can both deal with NULL pointers. This patch removes 
    redundant NULL pointer checks from the ppp code in drivers/net/
    
    Signed-off-by: Jesper Juhl <juhl-lkml@dif.dk>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit c3924c70dd3bddc28b99ccd1688bd281bad1a9be
Author: Folkert van Heusden <folkert@vanheusden.com>
Date:   Tue May 3 14:36:45 2005 -0700

    [TCP]: Optimize check in port-allocation code, v6 version.
    
    Signed-off-by: Folkert van Heusden <folkert@vanheusden.com>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 0b2531bdc54e19717de5cb161d57e5ee0a7725ff
Author: Folkert van Heusden <folkert@vanheusden.com>
Date:   Tue May 3 14:36:08 2005 -0700

    [TCP]: Optimize check in port-allocation code.
    
    Signed-off-by: Folkert van Heusden <folkert@vanheusden.com>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 20cc6befa23bb993cf4a4c58becb1dd99e7fc927
Author: Lucas Correia Villa Real <lucasvr@gobolinux.org>
Date:   Tue May 3 14:34:20 2005 -0700

    [PKT_SCHED]: fix typo on Kconfig
    
    This is a trivial fix for a typo on Kconfig, where the Generic Random Early 
    Detection algorithm is abbreviated as RED instead of GRED.
    
    Signed-off-by: Lucas Correia Villa Real <lucasvr@gobolinux.org>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 6a5d362120a61a719095443194cc2d5e9a7027dd
Author: Jesper Juhl <juhl-lkml@dif.dk>
Date:   Tue May 3 14:33:27 2005 -0700

    [WAN]: kfree of NULL pointer is valid
    
    kfree(0) is perfectly valid, checking pointers for NULL before calling 
    kfree() on them is redundant. The patch below cleans away a few such 
    redundant checks (and while I was around some of those bits I couldn't 
    stop myself from making a few tiny whitespace changes as well).
    
    Signed-off-by: Jesper Juhl <juhl-lkml@dif.dk>
    Acked-by: Arnaldo Carvalho de Melo <acme@ghostprotocols.net>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit db46edc6d3b66bf708a8f23a9aa89f63a49ebe33
Author: Thomas Graf <tgraf@suug.ch>
Date:   Tue May 3 14:29:39 2005 -0700

    [RTNETLINK] Cleanup rtnetlink_link tables
    
    Converts remaining rtnetlink_link tables to use c99 designated
    initializers to make greping a little bit easier.
    
    Signed-off-by: Thomas Graf <tgraf@suug.ch>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit f90a0a74b864fdc46737614f03b8868f4f31e3bf
Author: Thomas Graf <tgraf@suug.ch>
Date:   Tue May 3 14:29:00 2005 -0700

    [RTNETLINK] Fix & cleanup rtm_min/rtm_max
    
    Converts rtm_min and rtm_max arrays to use c99 designated
    initializers for easier insertion of new message families.
    RTM_GETMULTICAST and RTM_GETANYCAST did not have the minimal
    message size specified which means that the netlink message
    was parsed for routing attributes starting from the header.
    Adds the proper minimal message sizes for these messages
    (netlink header + common rtnetlink header) to fix this issue.
    
    Signed-off-by: Thomas Graf <tgraf@suug.ch>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit d775fc09f16f4b88cd0373006b112c4772589778
Author: Thomas Graf <tgraf@suug.ch>
Date:   Tue May 3 14:27:35 2005 -0700

    [RTNETLINK] Fix RTM_MAX to represent the maximum valid message type
    
    RTM_MAX is currently set to the maximum reserverd message type plus one
    thus being the cause of two bugs for new types being assigned a) given the
    new family registers only the NEW command in its reserved block the array
    size for per family entries is calculated one entry short and b) given the
    new family registers all commands RTM_MAX would point to the first entry
    of the block following this one and the rtnetlink receive path would accept
    a message type for a nonexisting family.
    
    This patch changes RTM_MAX to point to the maximum valid message type
    by aligning it to the start of the next block and subtracting one.
    
    Signed-off-by: Thomas Graf <tgraf@suug.ch>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 492b558b3191319cbc859a9e025bc354d336c261
Author: Thomas Graf <tgraf@suug.ch>
Date:   Tue May 3 14:26:40 2005 -0700

    [XFRM]: Cleanup xfrm_msg_min and xfrm_dispatch
    
    Converts xfrm_msg_min and xfrm_dispatch to use c99 designated
    initializers to make greping a little bit easier. Also replaces
    two hardcoded message type with meaningful names.
    
    Signed-off-by: Thomas Graf <tgraf@suug.ch>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 526bdb80a23b2e10ed4ccc3fcf309c9118d892d6
Author: Thomas Graf <tgraf@suug.ch>
Date:   Tue May 3 14:26:01 2005 -0700

    [XFRM]: Prevent off-by-one access to xfrm_dispatch
    
    Makes the type > XFRM_MSG_MAX check behave correctly to
    protect access to xfrm_dispatch.
    
    Signed-off-by: Thomas Graf <tgraf@suug.ch>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit e4553eddae592b948c9695c9a0002169b0cab6fc
Author: Herbert Xu <herbert@gondor.apana.org.au>
Date:   Tue May 3 14:25:13 2005 -0700

    [IPV6]: Include ipv6.h for ipv6_addr_set
    
    This patch includes net/ipv6.h from addrconf.h since it needs
    ipv6_addr_set.
    
    Signed-off-by: Herbert Xu <herbert@gondor.apana.org.au>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 679a87382433cf12a28f07a7d5c240f30f0daa08
Author: Herbert Xu <herbert@gondor.apana.org.au>
Date:   Tue May 3 14:24:36 2005 -0700

    [IPV6]: Fix raw socket checksums with IPsec
    
    I made a mistake in my last patch to the raw socket checksum code.
    I used the value of inet->cork.length as the length of the payload.
    While this works with normal packets, it breaks down when IPsec is
    present since the cork length includes the extension header length.
    
    So here is a patch to fix the length calculations.
    
    Signed-off-by: Herbert Xu <herbert@gondor.apana.org.au>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 31da185d8162ae0f30a13ed945f1f4d28d158133
Author: Patrick McHardy <kaber@trash.net>
Date:   Tue May 3 14:23:50 2005 -0700

    [NETFILTER]: Don't checksum CHECKSUM_UNNECESSARY skbs in TCP connection tracking
    
    Signed-off-by: Patrick McHardy <kaber@trash.net>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit b43309578477ff3271945d4efb920f558a309b4a
Author: Patrick McHardy <kaber@trash.net>
Date:   Tue May 3 14:23:13 2005 -0700

    [NETFILTER]: Missing owner-field initialization in iptable_raw
    
    Signed-off-by: Patrick McHardy <kaber@trash.net>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 012914dad25bd5cacf88af4429eecda62a06020d
Author: Russ Anderson <(rja@sgi.com)>
Date:   Sat Apr 23 00:08:00 2005 -0700

    [patch] MCA recovery module undefined symbol fix
    
    The patch "MCA recovery improvements" added do_exit to mca_drv.c.
    That's fine when the mca recovery code is built in the kernel
    (CONFIG_IA64_MCA_RECOVERY=y) but breaks building the mca recovery
    code as a module (CONFIG_IA64_MCA_RECOVERY=m).
    
    Most users are currently building this as a module, as loading
    and unloading the module provides a very convenient way to turn
    on/off error recovery.
    
    This patch exports do_exit, so mca_drv.c can build as a module.
    
    Signed-off-by: Russ Anderson (rja@sgi.com)
    Signed-off-by: Tony Luck <tony.luck@intel.com>

commit 3ea8b477b4b9d3e75b5e9b8aea41259f45031823
Author: Mark Maule <maule@sgi.com>
Date:   Mon Apr 11 21:20:00 2005 -0700

    [IA64] altix: fix TIOCA dmamap list_add
    
    Correct a bug where tioca_dma_mapped() is putting tioca dma map structs
    on the wrong list.
    
    Signed-off-by: Mark Maule <maule@sgi.com>
    Signed-off-by: Tony Luck <tony.luck@intel.com>

commit 32709d8ae67356559839a9a9e4b26f79134e45a6
Author: Keith Owens <kaos@sgi.com>
Date:   Fri Apr 8 14:23:00 2005 -0700

    [IA64] SAL to OS callbacks cannot call sleeping
    
    When SAL calls back into the OS, the OS code is running with preempt
    disabled so it cannot call sleeping functions.
    
    Signed-off-by: Keith Owens <kaos@sgi.com>
    Signed-off-by: Tony Luck <tony.luck@intel.com>

commit b1b901c2029aa0fd8aa4ac5f04f31648ae2358b4
Author: Russ Anderson <rja@sgi.com>
Date:   Wed Apr 6 00:07:00 2005 -0700

    [IA64] MCA recovery improvements
    
    Jack Steiner uncovered some opportunities for improvement in
    the MCA recovery code.
    
      1) Set bsp to save registers on the kernel stack.
      2) Disable interrupts while in the MCA recovery code.
      3) Change the way the user process is killed, to avoid 
         a panic in schedule.
    
    Testing shows that these changes make the recovery code much 
    more reliable with the 2.6.12 kernel.
    
    Signed-off-by: Russ Anderson <rja@sgi.com>
    Signed-off-by: Tony Luck <tony.luck@intel.com>

commit 446b8831f5acf2076fa58a66286789eb84f3df2c
Author: David Woodhouse <dwmw2@infradead.org>
Date:   Tue Apr 5 17:47:00 2005 -0700

    [IA64] fix ia64 syscall auditing
    
    Attached is a patch against David's audit.17 kernel that adds checks
    for the TIF_SYSCALL_AUDIT thread flag to the ia64 system call and
    signal handling code paths.  The patch enables auditing of system
    calls set up via fsys_bubble_down, as well as ensuring that
    audit_syscall_exit() is called on return from sigreturn.
    
    Neglecting to check for TIF_SYSCALL_AUDIT at these points results in
    incorrect information in audit_context, causing frequent system panics
    when system call auditing is enabled on an ia64 system.
    
    I have tested this patch and have seen no problems with it.
    
    [Original patch from Amy Griffis ported to current kernel by David Woodhouse]
    
    From: Amy Griffis <amy.griffis@hp.com>
    From: David Woodhouse <dwmw2@infradead.org>
    Signed-off-by: Chris Wright <chrisw@osdl.org>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>
    Signed-off-by: Tony Luck <tony.luck@intel.com>

commit 7d5f9c0f10255000ca007fb03773c6b825c2b9ce
Author: Zwane Mwaikambo <zwane@arm.linux.org.uk>
Date:   Wed Mar 30 21:40:00 2005 -0700

    [IA64] reduce cacheline bouncing in cpu_idle_wait
    
    Andi noted that during normal runtime cpu_idle_map is bounced around a lot,
    and occassionally at a higher frequency than the timer interrupt wakeup
    which we normally exit pm_idle from.  So switch to a percpu variable.
    
    I didn't move things to the slow path because it would involve adding
    scheduler code to wakeup the idle thread on the cpus we're waiting for.
    
    Signed-off-by: Zwane Mwaikambo <zwane@arm.linux.org.uk>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Tony Luck <tony.luck@intel.com>

commit de7548d0e202263bb6bfd7574a7889e85a691937
Author: Mike Habeck <habeck@sgi.com>
Date:   Fri Mar 25 19:34:00 2005 -0700

    [IA64-SGI] Altix only: Fix for sn_dma_flush
    
    The following patch fixes a bug in the SGI Altix sn_dma_flush code.  
    sn_dma_flush is broken in 2.6.  The code isn't waiting for the DMA 
    data to be flushed out of the PIC ASIC. This patch is based off the 
    linux-ia64-test-2.6.12 tree
    
    Signed-off-by: Mike Habeck <habeck@sgi.com>
    Signed-off-by: Tony Luck <tony.luck@intel.com>

commit bb0fc085457cf6a865b8232b0cefab3a7819df44
Author: Alex Williamson <alex.williamson@hp.com>
Date:   Thu Mar 24 22:58:00 2005 -0700

    [IA64] use common pxm function
    
    This patch simplifies a couple places where we search for _PXM
    values in ACPI namespace.  Thanks,
    
    Signed-off-by: Alex Williamson <alex.williamson@hp.com>
    Signed-off-by: Tony Luck <tony.luck@intel.com>

commit c0b12422e5e1d041026dd27074de17d2d7e32c4e
Author: Colin Ngam <cngam@sgi.com>
Date:   Fri Mar 18 16:38:00 2005 -0700

    [IA64-SGI] Altix only: Register Error Interrupt
    
    The following patch ensures that the correct error interrupt handling 
    routine is initialized.  This patch is based on the 2.6.12 ia64 release tree.
    
    Signed-off-by: Colin Ngam <cngam@sgi.com>
    Signed-off-by: Tony Luck <tony.luck@intel.com>

commit 3a7d555bfc4d4631d9118fb4d0ed7ab62cc2ca1c
Author: Dean Nelson <dcn@sgi.com>
Date:   Mon Apr 4 13:14:00 2005 -0700

    [IA64-SGI] convert AMO address found in XPC's reserved page
    
    This patch detects the existence of an uncached physical AMO address setup
    by EFI's XPBOOT (SGI) and converts it to an uncached virtual AMO address.
    Depends on a patch submitted on 23 March 2005 with the subject of:
        [PATCH 2/3] SGI Altix cross partition functionality (2nd revision)
    
    Signed-off-by: Dean Nelson <dcn@sgi.com>
    Signed-off-by: Tony Luck <tony.luck@intel.com>

commit a2d974da0afe659cff98913184a97c0ee686d02b
Author: Dean Nelson <dcn@sgi.com>
Date:   Wed Mar 23 20:50:00 2005 -0700

    [IA64-SGI] SGI Altix cross partition functionality [3/3]
    
    This patch contains the cross partition pseudo-ethernet driver (XPNET)
    functional support module.
    
    Signed-off-by: Dean Nelson <dcn@sgi.com>
    Signed-off-by: Tony Luck <tony.luck@intel.com>

commit 89eb8eb927e324366c3ac0458998aaf9953fc5cd
Author: Dean Nelson <dcn@sgi.com>
Date:   Wed Mar 23 19:50:00 2005 -0700

    [IA64-SGI] SGI Altix cross partition functionality [2/3]
    
    This patch contains the communication module (XPC) for cross partition
    communication on a partitioned SGI Altix.
    
    Signed-off-by: Dean Nelson <dcn@sgi.com>
    Signed-off-by: Tony Luck <tony.luck@intel.com>

commit 21223a9e78050919499d3d9039170e608eb939cc
Author: Tony Luck <aegl@agluck-lia64.sc.intel.com>
Date:   Tue May 3 12:25:50 2005 -0700

    [IA64] manually apply changes to arch/ia64/sn/kernel/Makefile
    
    cg-patch couldn't apply the patch to Makefile, and my dumb script
    rushed on and ran cg-commit without this change.
    
    Signed-off-by: Tony Luck <tony.luck@intel.com>

commit b0d82bd5df874f7dadbeced1b0163473387da37c
Author: Dean Nelson <dcn@sgi.com>
Date:   Wed Mar 23 19:46:00 2005 -0700

    [IA64-SGI] SGI Altix cross partition functionality (2nd
    This patch contains the shim module (XP) which interfaces between the
    communication module (XPC) and the functional support modules (like XPNET).
    
    Signed-off-by: Dean Nelson <dcn@sgi.com>
    Signed-off-by: Tony Luck <tony.luck@intel.com>

commit 7fbd2a5337b2aa91266abbded97330f909904fd5
Author: Dean Nelson <dcn@sgi.com>
Date:   Wed Mar 23 19:11:00 2005 -0700

    [IA64-SGI] Add some needed externs currently not defined
    
    Add some needed externs currently not defined.
    
    Signed-off-by: Dean Nelson <dcn@sgi.com>
    Signed-off-by: Tony Luck <tony.luck@intel.com>

commit 21e37283909c12e300ab87c20f5addc878cda9f9
Author: Dean Nelson <dcn@sgi.com>
Date:   Wed Mar 23 19:08:00 2005 -0700

    [IA64-SGI] Define some additional SHub1 and Shub2 register symbols
    
    Define some additional SHub1 and SHub2 register symbols.
    
    Signed-off-by: Dean Nelson <dcn@sgi.com>
    Signed-off-by: Tony Luck <tony.luck@intel.com>

commit 7223a93a5321f84337647aef62ef947afd8df41a
Author: Dean Nelson <dcn@sgi.com>
Date:   Wed Mar 23 19:00:00 2005 -0700

    [IA64] Export node_online_map and node_possible_map
    
    Export node_online_map and node_possible_map so that kernel modules can use
    the nodemask macros, like, for_each_node() and for_each_online_node().
    
    Signed-off-by: Dean Nelson <dcn@sgi.com>
    Signed-off-by: Tony Luck <tony.luck@intel.com>

commit 2e34f07ff0c944399a6456e2d91cf0ca1d9a497c
Author: Dean Nelson <dcn@sgi.com>
Date:   Mon Mar 21 19:41:00 2005 -0700

    [PATCH] move cnodeid_to_nasid_table out of pda
    Another step in the effort to eliminate the SN pda structure.
    This patch moves the cnodeid_to_nasid_table field out of the pda,
    making it a standalone per-cpu data item, and exports it so it can
    be accessed by kernel modules.
    
    Signed-off-by: Dean Nelson <dcn@sgi.com>
    Signed-off-by: Tony Luck <tony.luck@intel.com>

commit ce0a3956b32650e229b68964c4400bbdc5ad3ca1
Author: Bruce Losure <blosure@sgi.com>
Date:   Mon Apr 25 19:41:00 2005 -0700

    [IA64-SGI] Altix patch to add bricktype knowledge to tiocx
    
    Here is a patch to enable the SGI tiocx bus driver to distingush between
    FPGA-attached h/w and non-FPGA-attached h/w.
    
    Signed-off-by: Bruce Losure <blosure@sgi.com>
    Signed-off-by: Tony Luck <tony.luck@intel.com>

commit ae40aae9b9b8e336714ebb3f16410da6e69d6ac8
Author: Bruce Losure <blosure@sgi.com>
Date:   Mon Apr 4 13:23:00 2005 -0700

    [IA64-SGI] Altix patch to fix missing Kconfig dependency.
    
    This is a one-liner to make the mbcs driver depend on SGI_TIOCX in the
    drivers/char/Kconfig file.
    
    Signed-off-by: Bruce Losure <blosure@sgi.com>
    Signed-off-by: Tony Luck <tony.luck@intel.com>

commit c2d1d65ad441c8abe624bdb1c2cff2e47c8c1ee1
Author: Bruce Losure <blosure@sgi.com>
Date:   Thu Mar 24 12:28:00 2005 -0700

    [IA64-SGI] Altix only: Remove hubdev SAL call 
    
    Hi Tony,
    
    This patch against ia64-test-2.6.12 fixes a bug where the tiocx code
    was inadvertently un-doing some address modifications done in earlier
    fixup code.    This patch just removes the offending code.
    
    Signed-off-by: Bruce Losure <blosure@sgi.com>
    Signed-off-by: Tony Luck <tony.luck@intel.com>

commit 2074615a13a4f250e0a4e3f6ec8e3733b950a783
Author: David Mosberger-Tang <davidm@hpl.hp.com>
Date:   Fri Feb 18 19:09:00 2005 -0700

    [IA64] use fc.i for fluch_icache_range()
    
    This is a small patch to switch fluch_icache_range() to use fc.i
    instead of fc.  This would save time on processors which can establish
    i-cache coherency without flushing the cache-line out to memory (not
    that any current processors do).  On existing processors, fc.i behaves
    like fc.  The only caveat is that very old assemblers may not know
    about fc.i yet.
    
    Signed-off-by: David Mosberger-Tang <davidm@hpl.hp.com>
    Signed-off-by: Tony Luck <tony.luck@intel.com>

commit 43cc67251882f60c796c8729cefc0e05b550976c
Author: Jes Sorensen <jes@wildopensource.com>
Date:   Thu Feb 17 09:41:00 2005 -0700

    [IA64-SGI] cleanup shubio.h
    
    This patch cleans up include/asm/sn/shubio.h by removing a ton of
    whitespaces and running it through Lindent, reducing it's size by almost
    30KB. No actual content has been changed.
    
    Signed-off-by: Jes Sorensen <jes@wildopensource.com>
    Signed-off-by: Tony Luck <tony.luck@intel.com>

commit 6adc4cc0eead0c1897d7f1416d749c8e7c91e0bc
Author: Jesse Barnes <jbarnes@sgi.com>
Date:   Wed Feb 16 16:38:00 2005 -0700

    [IA64-SGI] remove unused sn header files
    
    This patch makes Jes' patch (which also contains the removal of fetchop.h) a 
    bit smaller, and removes two other unused files at the same time, sndrv.h and 
    sn_fru.h.
    
    Signed-off-by: Jesse Barnes <jbarnes@sgi.com>
    Signed-off-by: Tony Luck <tony.luck@intel.com>

commit 9df6f705c0934a49d0f0a3468a5b5044c8aec4f1
Author: David Mosberger-Tang <davidm@hpl.hp.com>
Date:   Fri Mar 25 00:16:00 2005 -0700

    [IA64] fix typos caught by new assembler
    
    Patch below fixes 3 trivial typos which are caught by the new
    assembler (v2.169.90).  Please apply.
    
    [Note: fix to memcpy that was also part of this patch was separately
     applied from patches by H.J. and Andreas ... so the delta here only
     has the other two fixes. -Tony]
    
    Signed-off-by: David Mosberger-Tang <davidm@hpl.hp.com>
    Signed-off-by: Tony Luck <tony.luck@intel.com>

commit 512f64295f2f0049515dcc4e97c1f1ae0df9629c
Author: Andreas Schwab <schwab@suse.de>
Date:   Tue Apr 26 23:00:00 2005 -0700

    [IA64] Fix memcpy_mck.S for current binutils
    
    The current ia64 assembler complains about mismatching .proc/.endp pairs.
    (Same patch also sent by H.J. Lu)
    
    Signed-off-by: Andreas Schwab <schwab@suse.de>
    Signed-off-by: Tony Luck <tony.luck@intel.com>

commit 7a9bdd8842d0847f3b15068550a3632a2d259057
Author: Suresh Siddha <suresh.b.siddha@intel.com>
Date:   Tue Apr 5 18:05:00 2005 -0700

    [IA64] Add config SCHED_SMT
    
    Now that we have MC/MT detection patches in, appended patch allows us to
    configure MT scheduler optimizations. For now, we will this option off
    by default.
    
    There is some discussion going on lkml about setting up sched-domains 
    which are absolutely needed (like for example, we shouldn't setup SMT domain
    for non MT processors). Once that patch goes in, we can enable this option by
    default.
    
    Signed-off-by: Suresh Siddha <suresh.b.siddha@intel.com>
    Signed-off-by: Tony Luck <tony.luck@intel.com>

commit 52292c9b8c16aa9024a65aaeeca434bb8fec7d24
Author: Benjamin Herrenschmidt <benh@kernel.crashing.org>
Date:   Tue May 3 15:34:58 2005 +1000

    [PATCH] ppc64: fix gcc 4.0 vs CONFIG_ALTIVEC
    
    gcc-4.0 generates altivec code implicitly when -mcpu indicates an
    altivec capable CPU which is not suitable for the kernel.  However, we
    used to set -mcpu=970 when CONFIG_ALTIVEC was set because a gcc-3.x bug
    prevented from using -maltivec along with -mcpu=power4, thus prevented
    building the RAID6 altivec code.
    
    This patch fixes all of this by testing for the gcc version.  If 4.0 or
    later, just normally use -mcpu=power4 and let the RAID6 code add
    -maltivec to the few files it needs to be compiled with altivec support.
    For 3.x, we still use -mcpu=970 to work around the above problem, which
    is fine as 3.x will never implicitly generate altivec code.
    
    The Makefile hackery may not be the most lovely, I welcome anybody more
    skilled than me to improve it.
    
    Signed-off-by: Benjamin Herrenschmidt <benh@kernel.crashing.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 488f2eaca1b0831a5a5e6a66e33bad2cdeff7238
Author: David Woodhouse <dwmw2@shinybook.infradead.org>
Date:   Tue May 3 14:11:02 2005 +0100

    [AUDIT] Log correct syscall args for i386 processes on x86_64
    
    The i386 syscall ABI uses different registers. Log those instead of the
    x86_64 ones.
    
    Signed-off-by: David Woodhouse <dwmw2@infradead.org>

commit 0dd8e06bdaa0a97e706ee1a489a1f6176c4ddc64
Author: Chris Wright <chrisw@osdl.org>
Date:   Tue May 3 14:01:15 2005 +0100

    [PATCH] add new audit data to last skb
    
    When adding more formatted audit data to an skb for delivery to userspace,
    the kernel will attempt to reuse an skb that has spare room.  However, if
    the audit message has already been fragmented to multiple skb's, the search
    for spare room in the skb uses the head of the list.  This will corrupt the
    audit message with trailing bytes being placed midway through the stream.
    Fix is to look at the end of the list.
    
    Signed-off-by: Chris Wright <chrisw@osdl.org>
    Signed-off-by: David Woodhouse <dwmw2@infradead.org>

commit eca02b0c1dc1da374216128157747d8ed994e5ef
Author: Russell King <rmk@dyn-67.arm.linux.org.uk>
Date:   Tue May 3 12:23:56 2005 +0100

    [PATCH] ARM: Cleanup kmalloc in cyber2000fb
    
    We use one kmalloc to allocate two structures needlessly.
    Combine these two structures into one.
    
    Signed-off-by: Russell King <rmk@arm.linux.org.uk>

commit 1f9c381fa3e0b9b9042e310c69df87eaf9b46ea4
Author: Russell King <rmk@dyn-67.arm.linux.org.uk>
Date:   Tue May 3 12:22:19 2005 +0100

    [PATCH] ARM: Clean up commenting/spacing for Integrator
    
    Signed-off-by: Russell King <rmk@arm.linux.org.uk>

commit 5c3073e691b56dabbdec60dda4258b4e50d64872
Author: Russell King <rmk@dyn-67.arm.linux.org.uk>
Date:   Tue May 3 12:20:29 2005 +0100

    [PATCH] ARM: cleanup vmalloc start/offset macros
    
    VMALLOC_START and VMALLOC_OFFSET are common between all ARM
    machine classes.  Move them into include/asm-arm/pgtable.h,
    but allow a machine class to override them if required.
    
    Signed-off-by: Russell King <rmk@arm.linux.org.uk>

commit 5cd0c3442021fbf39c7152b341a952aa24054be9
Author: Russell King <rmk@dyn-67.arm.linux.org.uk>
Date:   Tue May 3 12:18:46 2005 +0100

    [PATCH] ARM: decompressor: use platform debug macros
    
    Rather than duplicate the assembly for debug macros in the
    decompressor head.S, use asm/arch/debug-macros.S instead.
    
    Signed-off-by: Russell King <rmk@arm.linux.org.uk>

commit 27b030d58c8e72fc7a95187a791bd9406e350f02
Author: David Woodhouse <dwmw2@shinybook.infradead.org>
Date:   Tue May 3 08:14:09 2005 +0100

    Merge with master.kernel.org:/pub/scm/linux/kernel/git/torvalds/linux-2.6.git
    

commit 79d20b14a0d651f15b0ef9a22b6cf12d284a6d38
Author: Jeff Dike <jdike@addtoit.com>
Date:   Tue May 3 07:54:51 2005 +0100

    [AUDIT] Update UML audit-syscall-{entry,exit} calls to new prototypes
    
    This patch is for -mm only.  It should probably be included in git-audit,
    and should be forwarded to Linus iff git-audit is.
    
    It updates the audit-syscall-{entry,exit} calls to current -mm.
    
    Signed-off-by: Jeff Dike <jdike@addtoit.com>
    Cc: David Woodhouse <dwmw2@infradead.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: David Woodhouse <dwmw2@infradead.org>

commit 6628465e33ca694bd8fd5c3cf4eb7ff9177bc694
Author: Dave Kleikamp <shaggy@austin.ibm.com>
Date:   Mon May 2 12:25:13 2005 -0600

    [PATCH] JFS: Don't allocate extents that overlap existing extents
    
    Modify xtSearch so that it returns the next allocated block when the
    requested block is unmapped.  This can be used to make sure we don't
    create a new extent that overlaps the next one.
    
    Signed-off-by: Dave Kleikamp <shaggy@austin.ibm.com>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 1c6278295d6482edaaaef5faa64b18f17b3319b7
Author: Dave Kleikamp <shaggy@austin.ibm.com>
Date:   Mon May 2 12:25:08 2005 -0600

    [PATCH] JFS: Write journal sync points more often
    
    This patch adds jfs_syncpt, which calls lmLogSync to write sync points
    to the journal both in jfs_sync_fs and when sync barrier processing
    completes.
    
    lmLogSync accomplishes two things:  1) it pushes logged-but-dirty
    metadata pages to disk, and 2) it writes a sync record to the journal
    so that jfs_fsck doesn't need to replay more transactions than is
    necessary.
    
    Signed-off-by: Dave Kleikamp <shaggy@austin.ibm.com>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 7fab479bebb96b1b4888bdae9b42e1fa9c5d3f38
Author: Dave Kleikamp <shaggy@austin.ibm.com>
Date:   Mon May 2 12:25:02 2005 -0600

    [PATCH] JFS: Support page sizes greater than 4K
    
    jfs has never worked on architecutures where the page size was not 4K.
    
    Signed-off-by: Dave Kleikamp <shaggy@austin.ibm.com>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit dc5798d9a7b656550533a5c0177dba17d4ef4990
Author: Dave Kleikamp <shaggy@austin.ibm.com>
Date:   Mon May 2 12:24:57 2005 -0600

    [PATCH] JFS: Changes for larger page size
    
    JFS code has always assumed a page size of 4K.  This patch fixes the
    non-pagecache uses of pages to deal with larger pages.
    
    Signed-off-by: Dave Kleikamp <shaggy@austin.ibm.com>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit d2e83707edbe6a2520591141421d26a87414a1b9
Author: Dave Kleikamp <shaggy@austin.ibm.com>
Date:   Mon May 2 12:24:51 2005 -0600

    [PATCH] JFS: Simplify creation of new iag
    
    JFS was creating a new IAG (inode aggregate group) in one address
    space, and afterwards, accessing it from another.  This could lead to
    complications when cache pages contain more than one page of jfs
    metadata.  This patch causes the IAG to be initialized in the same
    address space that it is subsequently accessed with.
    
    This also elimitates an I/O, but IAG's aren't created too often.
    
    Signed-off-by: Dave Kleikamp <shaggy@austin.ibm.com>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 66f3131f547ef3cc864810974e0757617e60a837
Author: Dave Kleikamp <shaggy@austin.ibm.com>
Date:   Mon May 2 12:24:46 2005 -0600

    [PATCH] JFS: reduce number of synchronous transactions
    
    Use an inline pxd list rather than an xad list in the xadlock.
    When the number of extents being modified can fit with the xadlock,
    a transaction can be committed asynchronously.  Using a list of
    pxd's instead of xad's allows us to fit 4 extents, rather than 2.
    
    Signed-off-by: Dave Kleikamp <shaggy@austin.ibm.com>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit ac09f698f1cda91e890fb75f4cb38253d60ff017
Author: Benjamin Herrenschmidt <benh@kernel.crashing.org>
Date:   Mon May 2 16:25:10 2005 +1000

    [PATCH] cpufreq annoying warning fix
    
    The cpufreq core patch I sent earlier got only half-applied.  I added a
    flag to let the low level driver disable an annoying warning on
    suspend/resume that is normal on ppc, but the "resume" part of it wasn't
    applied.
    
    This just adds back that missing bit.  The original patch also reworked
    the resume() function to avoid nesting too many if () statements along
    the way I did the suspend() one, but I didn't include that in the patch
    below.
    
    Signed-off-by: Benjamin Herrenschmidt <benh@kernel.crashing.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit e521dca64e0f82d844928c5ee88d82fdced50cbe
Author: Benjamin Herrenschmidt <benh@kernel.crashing.org>
Date:   Mon May 2 16:12:00 2005 +1000

    [PATCH] ppc32: Fix might_sleep() warning with clock spreading
    
    The clock spreading disable/enable code was called to late/early during
    the suspend/resume code on some laptops and would trigger a
    might_sleep() warning due to the down() call in the low level i2c code.
    
    This fixes it by calling those functions earlier/later when interrupts
    are still enabled.
    
    Signed-off-by: Benjamin Herrenschmidt <benh@kernel.crashing.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 6995f17a5ab3c3fd4df2e5b107d08cff1db3fa41
Author: Benjamin Herrenschmidt <benh@kernel.crashing.org>
Date:   Mon May 2 14:45:12 2005 +1000

    [PATCH] ppc32: More fixlet for pmac sound
    
    As Al Viro noticed, my previous fix missed one instance of "device" in
    the driver local debug code. Harmless unless you tweak the #define's in
    there but still work fixing.
    
    Signed-off-by: Benjamin Herrenschmidt <benh@kernel.crashing.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit f0f539755b8df3db81715d9c7fb67ba375f0330f
Author: Benjamin Herrenschmidt <benh@kernel.crashing.org>
Date:   Sun May 1 19:43:54 2005 -0700

    [PATCH] ppc32: Fix sleep on old 101 PowerBook
    
    A typo in the machine table incorrectly mark the 101 PowerBook as
    needing explicit callback from the video driver to enable sleep mode. I
    did not implement that mecanism for chipsest older than r128, so we need
    to mark this machine as always beeing able to sleep for now.
    
    Signed-off-by: Benjamin Herrenschmidt <benh@kernel.crashing.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 7eb8073ecc8251530ebbd9be29cc33e54d37bdc2
Author: Benjamin Herrenschmidt <benh@kernel.crashing.org>
Date:   Sun May 1 18:54:23 2005 -0700

    [PATCH] ppc32: Small build fix for alsa powermac
    
    My newer iMac mini driver doesn't build with verbose debug enabled.
    
    This fixes it, and removes an erroneous error printk (since it's normal
    on some machine to not find some gpios on the "first try").
    
    Signed-off-by: Benjamin Herrenschmidt <benh@kernel.crashing.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 15fd56867b6b94dc829d880bc078428eb41859c8
Author: Benjamin Herrenschmidt <benh@kernel.crashing.org>
Date:   Sun May 1 18:22:34 2005 -0700

    [PATCH] ppc32: Workaround a cache flush issue on sleep
    
    We are experiencing a problem when flushing the CPU caches before sleep
    on some laptop models using the 750FX CPU rev 1.X. While I haven't been
    able to figure out a proper explanation for what's going on, I do have a
    workaround that seem to work reliably and allows those machine to sleep
    and wakeup properly again.
    
    I'll re-update that code if/when I ever find exactly what is happening
    with those CPU revisions.
    
    Signed-off-by: Benjamin Herrenschmidt <benh@kernel.crashing.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 69b528936b702d4c13ffa0d14215a029dc754e50
Author: Mike Christie <michaelc@cs.wisc.edu>
Date:   Sun May 1 14:47:15 2005 -0500

    [SCSI] call correct scsi_done function in scsi_dispatch_cmd
    
    scsi_dispatch_cmd currently calls scsi_done when the device is in the
    SDEV_DEL state, but at this point the command has not had a timer added 
    to it (this is done a couple lines down) so scsi_done just returns and 
    the command is lost. The attached patch made against 2.6.12-rc3 calls 
    __scsi_done in this case so the comamnd will be returned upwards.
    
    Signed-off-by: Mike Christie <michaelc@cs.wisc.edu>
    Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

commit 7da21a02b3587157bd43910ea6d4c76661228ebb
Author: Jens Axboe <axboe@suse.de>
Date:   Sun May 1 12:12:52 2005 -0700

    [PATCH] Avoid unnecessary ide-cd cache flushes
    
    Only issue a cdrom cache flush if we've done write to the drive.  The
    ->media_written() flag keeps track of that.
    
    Signed-off-by: Jens Axboe <axboe@suse.de>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 76530da1a9e8ce05963b1f49a098eddc6ec6c534
Author: Adrian Bunk <bunk@stusta.de>
Date:   Sun May 1 08:59:30 2005 -0700

    [PATCH] sound/oss/sonicvibes.c: fix an array overflow
    
    This patch fixes an array overflow found by the Coverity checker.
    
    Signed-off-by: Adrian Bunk <bunk@stusta.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 6c207e769297946a0adec45225c6999f1299dde3
Author: Adrian Bunk <bunk@stusta.de>
Date:   Sun May 1 08:59:30 2005 -0700

    [PATCH] drivers/input/joystick/spaceorb.c: fix an array overflow
    
    This patch fixes an array overflow found by the Coverity checker.
    
    Signed-off-by: Adrian Bunk <bunk@stusta.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 0dec63bab860cc60cc444faa0ac459f1b53545ff
Author: Adrian Bunk <bunk@stusta.de>
Date:   Sun May 1 08:59:30 2005 -0700

    [PATCH] drivers/pnp/pnpacpi/rsparser.c: fix an array overflow
    
    This patch fixes an array overflow found by the Coverity checker.
    
    Signed-off-by: Adrian Bunk <bunk@stusta.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 390725c36d220f5ca0c13b8927ac9c758ae1e4ad
Author: Adrian Bunk <bunk@stusta.de>
Date:   Sun May 1 08:59:30 2005 -0700

    [PATCH] drivers/video/radeonfb.c: fix an array overflow
    
    This patch fixes an array overflow found by the Coverity checker.
    
    Signed-off-by: Adrian Bunk <bunk@stusta.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 6e3e98d1dcf944b999757b769d910f2b506ca5b9
Author: Adrian Bunk <bunk@stusta.de>
Date:   Sun May 1 08:59:29 2005 -0700

    [PATCH] drivers/pnp/pnpbios/rsparser.c: fix an array overflow
    
    This patch fixes an array overflow found by the Coverity checker.
    
    Signed-off-by: Adrian Bunk <bunk@stusta.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 408b664a7d394a5e4315fbd14aca49b042cb2b08
Author: Adrian Bunk <bunk@stusta.de>
Date:   Sun May 1 08:59:29 2005 -0700

    [PATCH] make lots of things static
    
    Another large rollup of various patches from Adrian which make things static
    where they were needlessly exported.
    
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit c31403a1f5a761599df38bcc2d6ba94f24320c33
Author: Cosmin Nicolaescu <can29@bandersnatch.cs.drexel.edu>
Date:   Sun May 1 08:59:28 2005 -0700

    [PATCH] Documentation: remove super-{nr, max} to reflect fs/super.c
    
    The patch updates the documentation for /proc.  super-nr and super-max have
    been dropped from the kernel since 2.4.9 due to minor numbering issues.
    This change was not documented in the documentation.
    
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit fd4a3244941ed74fffc24b64857977270e6f64e2
Author: Sam Ravnborg <sam@ravnborg.org>
Date:   Sun May 1 08:59:28 2005 -0700

    [PATCH] docbook: Tell users to install xmlto, not stylesheets
    
    We have at least two users which were confused by these messages, myself
    included.
    
    Signed-off-by: Alexey Dobriyan <adobriyan@mail.ru>
    Signed-off-by: Sam Ravnborg <sam@ravnborg.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 4fa35166c540073a2c6e450683c776f68e8b5569
Author: Martin Waitz <tali@admingilde.org>
Date:   Sun May 1 08:59:28 2005 -0700

    [PATCH] DocBook: fix html link
    
    The start page for each book has changed from book1.html to index.html.
    Update our generated links acocrdingly.
    
    Signed-off-by: Martin Waitz <tali@admingilde.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 2948e57d94bd2d2fb6d4e89d89f0bd0ddaee0513
Author: Martin Waitz <tali@admingilde.org>
Date:   Sun May 1 08:59:27 2005 -0700

    [PATCH] Docbook: use custom stylesheet
    
    With the custom stylesheet, functions are rendered using ANSI-C syntax and
    xmlto is a bit quieter.
    
    Signed-off-by: Martin Waitz <tali@admingilde.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 8b0c2d989cc60db1767481386ca912e99807eddb
Author: Martin Waitz <tali@admingilde.org>
Date:   Sun May 1 08:59:27 2005 -0700

    [PATCH] DocBook: Use xmlto to process the DocBook files.
    
    xmlto uses standared XSLT templates to generate manpages, (x)html pages, and
    XML FO files which can be processed with passivetex.  This is much faster than
    using jadetex for everything.  This patch also reduces the number of
    kernel-specific scripts that are needed to generate documentation.
    
    Signed-off-by: Martin Waitz <tali@admingilde.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit ac9296f95228f50d112e6caec3b461fd816de084
Author: Jeff Garzik <jgarzik@pobox.com>
Date:   Sun May 1 08:59:27 2005 -0700

    [PATCH] DocBook: remove obsolete templates
    
    As the author of tulip-user and via-audio docbooks, I can say that they are
    out of date and should be deleted.
    
    Signed-off-by: Martin Waitz <tali@admingilde.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit c73894c1e1160296552d8713e88bc76eac43beba
Author: Rich Walker <rw@shadow.org.uk>
Date:   Sun May 1 08:59:26 2005 -0700

    [PATCH] DocBook: use <informalexample> for examples
    
    Signed-off-by: Martin Waitz <tali@admingilde.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 67be2dd1bace0ec7ce2dbc1bba3f8df3d7be597e
Author: Martin Waitz <tali@admingilde.org>
Date:   Sun May 1 08:59:26 2005 -0700

    [PATCH] DocBook: fix some descriptions
    
    Some KernelDoc descriptions are updated to match the current code.
    No code changes.
    
    Signed-off-by: Martin Waitz <tali@admingilde.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 6013d5445f9a6d0b28090027868f455c5012d1cc
Author: Martin Waitz <tali@admingilde.org>
Date:   Sun May 1 08:59:25 2005 -0700

    [PATCH] DocBook: fix <void/> xml tag
    
    This fix is needed to create valid XML.
    
    Signed-off-by: Martin Waitz <tali@admingilde.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 4dc3b16ba18c0f967ad100c52fa65b01a4f76ff0
Author: Pavel Pisa <pisa@cmp.felk.cvut.cz>
Date:   Sun May 1 08:59:25 2005 -0700

    [PATCH] DocBook: changes and extensions to the kernel documentation
    
    I have recompiled Linux kernel 2.6.11.5 documentation for me and our
    university students again.  The documentation could be extended for more
    sources which are equipped by structured comments for recent 2.6 kernels.  I
    have tried to proceed with that task.  I have done that more times from 2.6.0
    time and it gets boring to do same changes again and again.  Linux kernel
    compiles after changes for i386 and ARM targets.  I have added references to
    some more files into kernel-api book, I have added some section names as well.
     So please, check that changes do not break something and that categories are
    not too much skewed.
    
    I have changed kernel-doc to accept "fastcall" and "asmlinkage" words reserved
    by kernel convention.  Most of the other changes are modifications in the
    comments to make kernel-doc happy, accept some parameters description and do
    not bail out on errors.  Changed <pid> to @pid in the description, moved some
    #ifdef before comments to correct function to comments bindings, etc.
    
    You can see result of the modified documentation build at
      http://cmp.felk.cvut.cz/~pisa/linux/lkdb-2.6.11.tar.gz
    
    Some more sources are ready to be included into kernel-doc generated
    documentation.  Sources has been added into kernel-api for now.  Some more
    section names added and probably some more chaos introduced as result of quick
    cleanup work.
    
    Signed-off-by: Pavel Pisa <pisa@cmp.felk.cvut.cz>
    Signed-off-by: Martin Waitz <tali@admingilde.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 333f981720d619e2038b980a55ad01b10580eb9f
Author: Richard Drummond <evilrich@rcdrummond.net>
Date:   Sun May 1 08:59:25 2005 -0700

    [PATCH] Clean-up and bug fix for tdfxfb framebuffer size detection
    
    Attached is a patch against 2.6.11.7 which tidies up the tdfxfb framebuffer
    size detection code a little and fixes the broken support for Voodoo4/5
    cards.  (I haven't tested this on a Voodoo5, however, because I don't have
    the hardware).
    
    Signed-off-by: Richard Drummond <evilrich@rcdrummond.net>
    Cc: <linux-fbdev-devel@lists.sourceforge.net>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 0fbe9cafff72799700713e6a9d5a4ec7191e8d19
Author: Richard Drummond <evilrich@rcdrummond.net>
Date:   Sun May 1 08:59:24 2005 -0700

    [PATCH] Better PLL frequency matching for tdfxfb driver
    
    Improve the PLL frequency matching in the tdfxfb driver.  Instead of
    requiring 64260 iterations to obtain the closest supported PLL frequency,
    this code does it with the same degree of accuracy in at most 768
    iterations.
    
    Signed-off-by: Richard Drummond <evilrich@rcdrummond.net>
    Cc: <linux-fbdev-devel@lists.sourceforge.net>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 7c2f891cb64b0b9c8d389da97c221ee4288f1307
Author: Sascha Hauer <s.hauer@pengutronix.de>
Date:   Sun May 1 08:59:24 2005 -0700

    [PATCH] imxfb: Add Freescale i.MX framebuffer driver
    
    This patch adds support for the framebuffer on the freescale i.MX SOC
    architecture.  The driver has been tested on the mx1ads board, the pimx1 board
    and another custom board with different displays.
    
    Signed-off-by: Sascha Hauer <s.hauer@pengutronix.de>
    Signed-off-by: Antonino Daplas <adaplas@pol.net>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit db9f1d9daa2f775a0f7d1a0d2ca4722c1da50158
Author: Denis Vlasenko <vda@ilport.com.ua>
Date:   Sun May 1 08:59:24 2005 -0700

    [PATCH] i810fb: Fix default monitor sync timings
    
    - Increase error message verbosity with respect to monitor timings.
    
    - Fix default sync timings
    
    Signed-off-by: Antonino Daplas <adaplas@pol.net>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 14c6f52f607edd79e2969548c69ec311defdc17d
Author: Adrian Bunk <bunk@stusta.de>
Date:   Sun May 1 08:59:23 2005 -0700

    [PATCH] intelfb: Remove intelfbdrv.h
    
    Ingo Oeser noticed that all that intelfbdrv.h contains are prototypes for
    static functions - and such prototypes don't belong into header files.
    
    This patch therefore removes drivers/video/intelfb/intelfbdrv.h and moves the
    prototypes to intelfbdrv.c .
    
    Signed-off-by: Adrian Bunk <bunk@stusta.de>
    Signed-off-by: Antonino Daplas <adaplas@pol.net>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 306958e8e8d150b3e8bf13f66f3a6e9be7ee75ff
Author: Adrian Bunk <bunk@fs.tum.de>
Date:   Sun May 1 08:59:23 2005 -0700

    [PATCH] fbcon: Fix check after use
    
    This patch fixes a check after use found by the Coverity checker.
    
    Signed-off-by: Adrian Bunk <bunk@fs.tum.de>
    Signed-off-by: Antonino Daplas <adaplas@pol.net>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 5f76be80d96f60adfc91f2acf22b146ce0e3072f
Author: Adrian Bunk <bunk@stusta.de>
Date:   Sun May 1 08:59:23 2005 -0700

    [PATCH] fbdev: edid.h cleanups
    
    This patch removes some completely unused code.
    
    Signed-off-by: Adrian Bunk <bunk@stusta.de>
    Signed-off-by: Antonino Daplas <adaplas@pol.net>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 917bb0771aa077f62a3de75028a45f243d3954a8
Author: Antonino A. Daplas <adaplas@hotpop.com>
Date:   Sun May 1 08:59:22 2005 -0700

    [PATCH] nvidiafb: ioremap and i2c fixes
    
    - Add 'vram' option to specify amount of video RAM to remap
    - Limit remap size to 64 MIB
    - Use info->screen_size for remapped RAM
    - Fix misplaced label in failure path
    
    Signed-off-by: Antonino Daplas <adaplas@pol.net>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 7149437669f79b497830e643a2b13d26a017b038
Author: Benjamin Herrenschmidt <benh@kernel.crashing.org>
Date:   Sun May 1 08:59:22 2005 -0700

    [PATCH] fbdev: Batch cmap changes at driver level
    
    This patch adds to the fbdev interface a set_cmap callback that allow the
    driver to "batch" palette changes.  This is useful for drivers like
    radeonfb which might require lenghtly workarounds on palette accesses, thus
    allowing to factor out those workarounds efficiently.
    
    Signed-off-by: Benjamin Herrenschmidt <benh@kernel.crashing.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 5b052d8bb3ad9108489e7475868e14372774ca08
Author: Patrick Gefre <pfg@sgi.com>
Date:   Sun May 1 08:59:22 2005 -0700

    [PATCH] Altix ioc4 serial - Arm the read timeout timer before the first read
    
    Arm the read timeout timer before the first read.
    
    Signed-off-by: Patrick Gefre <pfg@sgi.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 68985e486b708671a7c7d0b4de6d94a1547d1351
Author: Patrick Gefre <pfg@sgi.com>
Date:   Sun May 1 08:59:21 2005 -0700

    [PATCH] Altix ioc4 serial - small uart setup mods
    
    Small mods for setting up the uart - parity, flow control
    
    Signed-off-by: Patrick Gefre <pfg@sgi.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 6cb2875f8d7e392982229094ad3b6d2f213f48da
Author: Patrick Gefre <pfg@sgi.com>
Date:   Sun May 1 08:59:21 2005 -0700

    [PATCH] Altix ioc4 serial - set a better timeout/threshold
    
    Set the timeout and threshold to better values.
    
    Signed-off-by: Patrick Gefre <pfg@sgi.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 149733d4e274ce1add3399cabdb243116ebfdf79
Author: Patrick Gefre <pfg@sgi.com>
Date:   Sun May 1 08:59:21 2005 -0700

    [PATCH] Altix ioc4 serial - set hfc from ioctl
    
    Allow hardware flow control to be set from an ioctl.
    
    Signed-off-by: Patrick Gefre <pfg@sgi.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 10e92060295ded7b8feac1ee57bb2135ea9ac207
Author: Peter Missel <peter.missel@onlinehome.de>
Date:   Sun May 1 08:59:21 2005 -0700

    [PATCH] saa7134: Add OEM version of already supported card
    
    Add device table support for the LR214WF card.
    
    The driver will say it's a FlyTV, simply because the name strings are
    stored with the card design data, not the device ID data.
    
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit fe55c452368af263a9beec38ed29f6be85280524
Author: Mingming Cao <cmm@us.ibm.com>
Date:   Sun May 1 08:59:20 2005 -0700

    [PATCH] ext3: remove unnecessary race then retry in ext3_get_block
    
    The extra race-with-truncate-then-retry logic around
    ext3_get_block_handle(), which was inherited from ext2, becomes unecessary
    for ext3, since we have already obtained the ei->truncate_sem in
    ext3_get_block_handle() before calling ext3_alloc_branch().  The
    ei->truncate_sem is already there to block concurrent truncate and block
    allocation on the same inode.  So the inode's indirect addressing tree
    won't be changed after we grab that semaphore.
    
    We could, after get the semaphore, re-verify the branch is up-to-date or
    not.  If it has been changed, then get the updated branch.  If we still
    need block allocation, we will have a safe version of the branch to work
    with in the ext3_find_goal()/ext3_splice_branch().
    
    The code becomes more readable after remove those retry logic.  The patch
    also clean up some gotos in ext3_get_block_handle() to make it more
    readable.
    
    Signed-off-by: Mingming Cao <cmm@us.ibm.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit faf8b24968ce6392ea68d9afc7de1ffbc38c1f6c
Author: Gerd Knorr <kraxel@bytesex.org>
Date:   Sun May 1 08:59:20 2005 -0700

    [PATCH] v4l: msp3400 update
    
    msp3400 update: Fix and enable "simpler" mode, some other minor fixes.
    
    Signed-off-by: Gerd Knorr <kraxel@bytesex.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 9990d744bea7d28e83c420e2c9d524c7a8a2d136
Author: Gerd Knorr <kraxel@bytesex.org>
Date:   Sun May 1 08:59:20 2005 -0700

    [PATCH] dvb: cx22702 frontend driver update
    
    update cx22702 fe driver, add support for using the dvb pll lib, enable
    cx22702 support in cx88-dvb.
    
    Signed-off-by: Gerd Knorr <kraxel@bytesex.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 1622c3fcf4c1c6c8267938f366ecd2a348d67d93
Author: Gerd Knorr <kraxel@bytesex.org>
Date:   Sun May 1 08:59:19 2005 -0700

    [PATCH] cx88-dvb oops fix
    
    Fixup error path, without that one the driver kills the machine by oopsing
    in the IRQ handler in case the frontend initialization fails.
    
    Signed-off-by: Gerd Knorr <kraxel@bytesex.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit f8e08a8466c4ac5f61b4bdb6338fd97eedb9c9e8
Author: Al Viro <viro@www.linux.org.uk>
Date:   Sun May 1 08:59:19 2005 -0700

    [PATCH] reiserfs endianness: sanitize reiserfs_key union
    
    Since we only access reiserfs_key ->u.k_offset_v2 guts in four helper
    functions, we are free to sanitize those, as long as
    
    - layout of the structure is unchanged (it's on-disk object)
    
    - behaviour of these helpers is same as before.
    
    Patch kills the mess with endianness-dependent bitfields and replaces them
    with a single __le64.  Helpers are switched to straightforward shift/and/or.
    
    Benefits:
    
    - exact same definitions for little- and big-endian architectures; no ifdefs
      in sight.
    
    - generate the same code on little-endian and improved on big-endian.
    
    - doesn't rely on lousy bitfields handling in gcc codegenerator.
    
    - happens to be standard C (unsigned long long is not a valid type for a
      bitfield; it's a gccism and not well-implemented one, at that).
    
    Signed-off-by: Al Viro <viro@parcelfarce.linux.theplanet.co.uk>
    Cc: <reiserfs-dev@namesys.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 6b9f5829e6e3af44f20c681e26524c637d4f82ff
Author: Al Viro <viro@www.linux.org.uk>
Date:   Sun May 1 08:59:19 2005 -0700

    [PATCH] reiserfs endianness: comp_short_keys() cleanup
    
    comp_short_keys() massaged into sane form, which kills the last place where
    pointer to in_core_key (or any object containing such) would be cast to or
    from something else.  At that point we are free to change layout of
    in_core_key - nothing depends on it anymore.
    
    So we drop the mess with union in there and simply use (unconditional) __u64
    k_offset and __u8 k_type instead; places using in_core_key switched to those.
    That gives _far_ better code than current mess - on all platforms.
    
    Signed-off-by: Al Viro <viro@parcelfarce.linux.theplanet.co.uk>
    Cc: <reiserfs-dev@namesys.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit b8cc936f6295bba23513a49d858ea82f64982faf
Author: Al Viro <viro@www.linux.org.uk>
Date:   Sun May 1 08:59:18 2005 -0700

    [PATCH] reiserfs endianness: fix endianness bugs
    
    fixes for a couple of bugs exposed by the above: le32_to_cpu() used on 16bit
    value and missing conversion in comparison of host- and little-endian values.
    
    Signed-off-by: Al Viro <viro@parcelfarce.linux.theplanet.co.uk>
    Cc: <reiserfs-dev@namesys.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 3e8962be915bacc1d70e4849a075041838d60a3f
Author: Al Viro <viro@www.linux.org.uk>
Date:   Sun May 1 08:59:18 2005 -0700

    [PATCH] reiserfs endianness: annotate little-endian objects
    
    little-endian objects annotated as such; again, obviously no changes of
    resulting code, we only replace __u16 with __le16, etc.  in relevant places.
    
    Signed-off-by: Al Viro <viro@parcelfarce.linux.theplanet.co.uk>
    Cc: <reiserfs-dev@namesys.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 6a3a16f2ef6f335286e2b2bf8284b0ab4ff38ec0
Author: Al Viro <viro@www.linux.org.uk>
Date:   Sun May 1 08:59:17 2005 -0700

    [PATCH] reiserfs endianness: clone struct reiserfs_key
    
    struct reiserfs_key cloned; (currently) identical struct in_core_key added.
    Places that expect host-endian data in reiserfs_key switched to in_core_key.
    Basically, we get annotation of reiserfs_key users and keep the resulting tree
    obviously equivalent to original.
    
    Signed-off-by: Al Viro <viro@parcelfarce.linux.theplanet.co.uk>
    Cc: <reiserfs-dev@namesys.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit d46aa455dd5457fdbebad17db4ff4df655cbfbae
Author: Ian Kent <raven@themaw.net>
Date:   Sun May 1 08:59:17 2005 -0700

    [PATCH] autofs4: bump version number
    
    Bump autofs4 version so we know what's going on.
    
    Signed-off-by: Ian Kent <raven@themaw.net>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 3a9720ce73c9247e5262922d65e90444ea75eb50
Author: Ian Kent <raven@themaw.net>
Date:   Sun May 1 08:59:17 2005 -0700

    [PATCH] autofs4: tree race fix
    
    For tree mount maps, a call to chdir or chroot, to a directory above the
    moint point directories at a certain time during the expire results in the
    expire incorrectly thinking the tree is not busy.  This patch adds a check
    to see if the filesystem above the tree mount points is busy and also locks
    the filesystem during the tree mount expire to prevent the race.
    
    Signed-off-by: Ian Kent <raven@themaw.net>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 4dcd00b18118d174c4b8d838c11f437f0af3c20c
Author: Ian Kent <raven@themaw.net>
Date:   Sun May 1 08:59:16 2005 -0700

    [PATCH] autofs4: wait order fix
    
    It's possible for an event wait request to arive before the event
    requestor.  If this happens the daemon never gets notified and autofs
    hangs.
    
    Signed-off-by: Ian Kent <raven@themaw.net>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 945b092011c6af71a0107be96e119c8c08776f3f
Author: Colin Leroy <colin@colino.net>
Date:   Sun May 1 08:59:16 2005 -0700

    [PATCH] hfs, hfsplus: don't leak s_fs_info and fix an oops
    
    This patch fixes the leak of sb->s_fs_info in both the HFS and HFS+
    modules.  In addition to this, it fixes an oops happening when trying to
    mount a non-hfsplus filesystem using hfsplus.  This patch is from Roman
    Zippel, based off patches sent by myself.
    
    Signed-off-by: Colin Leroy <colin@colino.net>
    Signed-off-by: Roman Zippel <zippel@linux-m68k.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 954d3e95369cf73b4bc1e570729f68264a0e6fe0
Author: Ken Chen <kenneth.w.chen@intel.com>
Date:   Sun May 1 08:59:16 2005 -0700

    [PATCH] aio: optimize io_submit_one()
    
    This patch optimizes io_submit_one to call aio_run_iocb() directly if
    ctx->run_list is empty.  When the list is empty, the operation of adding to
    the list, then call to __aio_run_iocbs() is unnecessary because these
    operations are done in one atomic step.  ctx->run_list always has only one
    element in this case.  This optimization speeds up industry standard db
    transaction processing benchmark by 0.2%.
    
    Signed-off-by: Ken Chen <kenneth.w.chen@intel.com>
    Cc: Benjamin LaHaise <bcrl@kvack.org>
    Cc: Suparna Bhattacharya <suparna@in.ibm.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 644d3a088a3b862ed0b57c286cf58a6bd338ce08
Author: Ken Chen <kenneth.w.chen@intel.com>
Date:   Sun May 1 08:59:15 2005 -0700

    [PATCH] aio: clean up debug code
    
    Clean up code that was previously used for debug purpose.  Remove aio_run,
    aio_wakeups, iocb->ki_queued and iocb->ki_kicked.  Also clean up unused
    variable count in __aio_run_iocbs() and debug code in read_events().
    
    Signed-off-by: Ken Chen <kenneth.w.chen@intel.com>
    Cc: Benjamin LaHaise <bcrl@kvack.org>
    Cc: Suparna Bhattacharya <suparna@in.ibm.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 4bf69b2a06090c01c27f25ea5cd1440f7bf9256f
Author: Ken Chen <kenneth.w.chen@intel.com>
Date:   Sun May 1 08:59:15 2005 -0700

    [PATCH] aio: ring wrapping simplification
    
    Since the tail pointer in aio_ring structure never wrap ring size more than
    once, so a simple compare is sufficient to wrap the index around.  This avoid
    a more expensive mod operation.
    
    Signed-off-by: Ken Chen <kenneth.w.chen@intel.com>
    Cc: Benjamin LaHaise <bcrl@kvack.org>
    Cc: Suparna Bhattacharya <suparna@in.ibm.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 212079cf4ee99e492a57b817e796825d423a30bb
Author: Ken Chen <kenneth.w.chen@intel.com>
Date:   Sun May 1 08:59:15 2005 -0700

    [PATCH] aio: remove superfluous kiocb member initialization
    
    This patch removes superfluous kiocb member initialization in the AIO
    allocation and deallocation path.  For example, in really_put_req(),
    right before kiocb is returned to slab, 5 variables are reset to NULL.
    The same variables will be initialized at the kiocb allocation time,
    so why bother reset them knowing that they will be set to valid data
    at alloc time?  Another example: ki_retry is initialized in __aio_get_req,
    but is initialized again in io_submit_one.
    
    Signed-off-by: Ken Chen <kenneth.w.chen@intel.com>
    Cc: Benjamin LaHaise <bcrl@kvack.org>
    Cc: Suparna Bhattacharya <suparna@in.ibm.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit efcd5e3ab089496865571d22443dd3f514dae60c
Author: Emanuele Giaquinta <emanuele.giaquinta@gmail.com>
Date:   Sun May 1 08:59:15 2005 -0700

    [PATCH] Makefile: fix for compatibility with *emacs ctags
    
    I've noticed that, starting from linux-2.6.12-rc1, in the top Makefile the
    "cmd_tags" variable has been changed in a way incompatible with *emacs
    ctags.  Since the "--extra" option exists only in "exuberant ctags", it
    should be included in the CTAGSF shell variable.
    
    Cc: Sam Ravnborg <sam@ravnborg.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 16f31113a614a35acc2da64f4ae39ab0ed7e194f
Author: Yum Rayan <yum.rayan@gmail.com>
Date:   Sun May 1 08:59:14 2005 -0700

    [PATCH] serial_cs: Reduce stack usage in serial_event()
    
    This patch reduces the stack usage of the function serial_event() in
    serial_cs from 2212 to 228.  I used a patched version of gcc 3.4.3 on i386
    with -fno-unit-at-a-time disabled.
    
    This patch is only compile tested.
    
    Acked-by: Randy Dunlap <rddunlap@osdl.org>
    Signed-off-by: Yum Rayan <yum.rayan@gmail.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit dbcf31ba68c92b23ac3f874c4d516bacd5d7518a
Author: Roland Dreier <roland@topspin.com>
Date:   Sun May 1 08:59:14 2005 -0700

    [PATCH] fix include order in mthca_memfree.c
    
    Fix order of #include lines in mthca_memfree.c
    
    Signed-off-by: Roland Dreier <roland@topspin.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 7ed20e1ad521b5f5df61bf6559ae60738e393741
Author: Jesper Juhl <juhl-lkml@dif.dk>
Date:   Sun May 1 08:59:14 2005 -0700

    [PATCH] convert that currently tests _NSIG directly to use valid_signal()
    
    Convert most of the current code that uses _NSIG directly to instead use
    valid_signal().  This avoids gcc -W warnings and off-by-one errors.
    
    Signed-off-by: Jesper Juhl <juhl-lkml@dif.dk>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit e5bdd883a189243541e7a132385580703b049102
Author: Jesper Juhl <juhl-lkml@dif.dk>
Date:   Sun May 1 08:59:13 2005 -0700

    [PATCH] new valid_signal() function
    
    This patch adds a new function valid_signal() that tests if its argument is
    a valid signal number.
    
    The reasons for adding this new function are:
    
    - some code currently testing _NSIG directly has off-by-one errors.
      Using this function instead avoids such errors.
    
    - some code currently tests unsigned signal numbers for <0 which is
      pointless and generates warnings when building with gcc -W.  Using this
      function instead avoids such warnings.
    
    I considered various places to add this function but eventually settled on
    include/linux/signal.h as the most logical place for it.  If there's some
    reason this is a bad choice then please let me know (hints as to a better
    location are then welcome of course).
    
    Signed-off-by: Jesper Juhl <juhl-lkml@dif.dk>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 1c72d46d98e4eb16f1a1b38eba94cc3aa8022cfa
Author: Kylene Hall <kjhall@us.ibm.com>
Date:   Sun May 1 08:59:13 2005 -0700

    [PATCH] Fix Tpm driver -- Maintainers entry
    
    This patch adds the maintainers entry.
    
    Signed-off-by: Kylene Hall <kjhall@us.ibm.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 7d87e14c236d6c4cab66d87cf0bc1e0f0375d308
Author: Stephen Rothwell <sfr@canb.auug.org.au>
Date:   Sun May 1 08:59:12 2005 -0700

    [PATCH] consolidate sys_shmat
    
    Signed-off-by: Stephen Rothwell <sfr@canb.auug.org.au>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 434498d5323445b59167fd7aa5633b74ebbce901
Author: Andreas Schwab <schwab@suse.de>
Date:   Sun May 1 08:59:12 2005 -0700

    [PATCH] sn_console: make sal_console_uart static again
    
    Signed-off-by: Andreas Schwab <schwab@suse.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 882fe011a92fa4fc31ca6cc95b279f7e4e52935c
Author: Corey Minyard <minyard@acm.org>
Date:   Sun May 1 08:59:12 2005 -0700

    [PATCH] ipmi: fix a deadlock
    
    Correct an issue with the IPMI message layer taking a lock and calling
    lower layer driver.  If an error occrues at the lower layer the lock can be
    taken again causing a deadlock.  The lock is released before calling the
    lower layer.
    
    Signed-off-by: David Griego <dgriego@mvista.com>
    Signed-off-by: Corey Minyard <minyard@acm.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 9dbf68f97d585265eaadd15aea308efd9ae39d34
Author: Corey Minyard <minyard@acm.org>
Date:   Sun May 1 08:59:11 2005 -0700

    [PATCH] ipmi: enable interrupts on the BT driver
    
    Enable interrupts for a BT interface.  There is a specific register that
    needs to be set up to enable interrupts that also must be modified to clear
    the irq.
    
    Also, don't reset the BMC on a BT interface.  That's probably not a good
    idea as the BMC may be performing other important functions and a reset
    should only be a last resort.  Also, that register is also used to
    enable/disable interrupts to the BT; modifying it may screw up the
    interrupts.
    
    Signed-off-by: Corey Minyard <minyard@acm.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit ec26d79f4f5822283e0bffa44a542fd13c5146e4
Author: Corey Minyard <minyard@acm.org>
Date:   Sun May 1 08:59:11 2005 -0700

    [PATCH] ipmi: fix watchdog so the device can be reopened on an unexpected close
    
    If there is an unexpected close, still allow the watchdog interface to be
    re-opened on the IPMI watchdog.
    
    Signed-off-by: Corey Minyard <minyard@acm.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 35bc37a0e0979a091bcf5d9161ffe935b3aa998c
Author: Corey Minyard <minyard@acm.org>
Date:   Sun May 1 08:59:10 2005 -0700

    [PATCH] IPMI: fix for handling bad ACPI data
    
    If the ACPI register bit width is zero (an invalid value) assume it is the
    default spacing.  This avoids some coredumps on invalid data and makes some
    systems work that have broken ACPI data.
    
    Signed-off-by: Corey Minyard <minyard@acm.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 9206880198589670dfc33feb9d2e903c3492701f
Author: Corey Minyard <minyard@acm.org>
Date:   Sun May 1 08:59:10 2005 -0700

    [PATCH] IPMI: fix for handling bad IPMI DMI data
    
    Ignore the bottom bit of the base address from the DMI data.  It is
    supposed to be set to 1 if it is I/O space.  Few systems do this, but this
    enables the ones that do set it to work properly.
    
    Signed-off-by: Corey Minyard <minyard@acm.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 5717ffbe16815db229a66fee824c2190cb306734
Author: aquynh@gmail.com <aquynh@gmail.com>
Date:   Sun May 1 08:59:10 2005 -0700

    [PATCH] dontdiff file sorted in alphabet order
    
    Documentation/dontdiff is a little messy.  Here is a patch to sort the
    content of that file in alphabetical
    
    Signed-off-by: Nguyen Anh Quynh <aquynh@gmail.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 74f9f974a64dc3de554aa1977bf108334436e47b
Author: Edward Shishkin <edward@namesys.com>
Date:   Sun May 1 08:59:09 2005 -0700

    [PATCH] reiserfs: journal_init fix
    
    This fixes segmentation fault when specifying bad journal device via
    a mount option.
    
    Don't pass a zero pointer to bdevname() if filp_open() returns error.
    
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 439bd3708792e31057db424d1165473122d531a3
Author: Nicolas Boichat <nicolas@boichat.ch>
Date:   Sun May 1 08:59:09 2005 -0700

    [PATCH] Leadtek Winfast remote controls
    
    Add missing button codes for the Leadtek Winfast remote controls.
    
    Signed-off-by: Nicolas Boichat <nicolas@boichat.ch>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit f78fc874f42f63a460bcebc2aeb98db526280d1c
Author: Vinay K Nallamothu <vinay.nallamothu@gsecone.com>
Date:   Sun May 1 08:59:09 2005 -0700

    [PATCH] __attribute__ placement fixes
    
    The variable attributes "packed" and "align" when used with struct, should
    have the following order:
    
    struct ... {...} __attribute__((packed)) var;
    
    This patch fixes few instances where the variable and attributes are placed
    the other way around and had no effect.
    
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit e49332bd12e92da2df6d002f857ec62675ba2648
Author: Jesper Juhl <juhl-lkml@dif.dk>
Date:   Sun May 1 08:59:08 2005 -0700

    [PATCH] misc verify_area cleanups
    
    There were still a few comments left refering to verify_area, and two
    functions, verify_area_skas & verify_area_tt that just wrap corresponding
    access_ok_skas & access_ok_tt functions, just like verify_area does for
    access_ok - deprecate those.
    
    There was also a few places that still used verify_area in commented-out
    code, fix those up to use access_ok.
    
    After applying this one there should not be anything left but finally
    removing verify_area completely, which will happen after a kernel release
    or two.
    
    Signed-off-by: Jesper Juhl <juhl-lkml@dif.dk>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit a71c1ab50a2a0f4dd9834bf5a917a2f064535c6b
Author: Stephen Rothwell <sfr@canb.auug.org.au>
Date:   Sun May 1 08:59:08 2005 -0700

    [PATCH] consolidate SIGEV_PAD_SIZE
    
    Discussing with Matthew Wilcox some of his outstanding patches lead me to
    this patch (among others).
    
    The preamble in struct sigevent can be expressed independently of the
    architecture.
    
    Also use __ARCH_SI_PREAMBLE_SIZE on ia64.
    
    Signed-off-by: Stephen Rothwell <sfr@canb.auug.org.au>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 696f9486d0207d499391004f5bc9bd7c0e6ae82f
Author: Joel Becker <Joel.Becker@oracle.com>
Date:   Sun May 1 08:59:08 2005 -0700

    [PATCH] hangcheck-timer: Update to 0.9.0.
    
    I recently realized that the in-kernel copy of hangcheck-timer was quite
    stale.  Here's the latest.  It adds support for s390, ppc64, and ia64 too.
    
    Signed-off-by: Joel Becker <joel.becker@oracle.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit a40920b42ae232fac514cc4a1eb92996114af340
Author: Bill Nottingham <notting@redhat.com>
Date:   Sun May 1 08:59:07 2005 -0700

    [PATCH] vgacon: set vc_hi_font_mask correctly
    
    When allocating a new VC with vgacon_init(), the font is shared across all
    the VGA consoles.  However, the font mask was always set to the default
    value of zero in visual_init(), even if we were using 512 character fonts
    at the time.
    
    Moreover, code in vgacon.c:vga_do_font_op() didn't reset the mask if the
    console driver thinks it's already in 512 character mode.  This means that
    to *fix* it, you'd actually have to take the console out of 512 character
    mode and then set it back.
    
    The attached sets vc_hi_font_mask in vgacon_init() for any new consoles
    opened if the vgacon driver is already in 512 character mode, solving this.
    
    This bug goes back to 2.4.18 at least, probably earlier.
    
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 127144df4ce817ad648af15a3983c8d52aacf670
Author: Jan Kara <jack@suse.cz>
Date:   Sun May 1 08:59:07 2005 -0700

    [PATCH] Fix rewriting on a full reiserfs filesystem
    
    Allow rewriting of a file and extending a file upto the end of the
    allocated block on a full filesystem.
    
    From: Chris Mason <mason@suse.com>
    Signed-off-by: Jan Kara <jack@suse.cz>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 40be0c28b33ff0821594a3fa7126354dfe6eccd1
Author: Lars Marowsky-Bree <lmb@suse.de>
Date:   Sun May 1 08:59:07 2005 -0700

    [PATCH] nbd: Don't create all MAX_NBD devices by default all the time
    
    This patches adds the "nbds_max" parameter to the nbd kernel module, which
    limits the number of nbds allocated.  Previously, always all 128 entries
    were allocated unconditionally, which used to waste resources and
    needlessly flood the hotplug system with events.  (Defaults to 16 now.)
    
    Signed-off-by: Lars Marowsky-Bree <lmb@suse.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 4750e2c0c59e0c84c6c036b3d96ebd88365ae7ee
Author: Joe Korty <joe.korty@ccur.com>
Date:   Sun May 1 08:59:06 2005 -0700

    [PATCH] add EOWNERDEAD and ENOTRECOVERABLE version 2
    
    Add EOWNERDEAD and ENOTRECOVERABLE to all architectures.  This is to
    support the upcoming patches for robust mutexes.
    
    We normally don't reserve parts of the name/number space for external
    patches, but robust mutexes are sufficiently popular and important to
    justify it in this case.
    
    Signed-off-by: Joe Korty <joe.korty@ccur.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 1181c1f923c349acaa01bca40fe600584f265132
Author: Jens Axboe <axboe@suse.de>
Date:   Sun May 1 08:59:06 2005 -0700

    [PATCH] noop-iosched: kill O(N) merge scan
    
    Profiling hit rates on merging shows that the last merge hint works
    extremely well for most work loads.  So lets kill the linear merge scan in
    noop-iosched, so it provides O(1) run time for any operation.
    
    Testing credits go to Ken Chen from Intel.
    
    Signed-off-by: Jens Axboe <axboe@suse.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 41f11a4fa378201e902892130b11d78cf7cf8e10
Author: Yoshinori Sato <ysato@users.sourceforge.jp>
Date:   Sun May 1 08:59:06 2005 -0700

    [PATCH] kallsyms C_SYMBOL_PREFIX support
    
    kallsyms does not consider SYMBOL_PREFIX of C.  Consequently it does not
    work on architectures using that prefix character (h8300, v850).
    
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 6c9e7376bed151d1655c12d2d5f5cc96bfb83dbd
Author: Peter Missel <peter.missel@onlinehome.de>
Date:   Sun May 1 08:59:05 2005 -0700

    [PATCH] LifeView FlyTV Platinum FM: GPIO usage
    
    This is take two of a patch that should have appeared two days ago, before
    yesterday's "remote control" patch for the same card.
    
    This patch sets unconnected GPIO to Output to keep them from floating (just
    good driver writing practice, being nice to the chip), and uses GPIO16 to
    switch TV vs.  FM - this pin switches inputs onto the tuner, as well as the
    audio output from the tuner into the 7135 SIF input.  Consequently, FM
    radio support is being un-commented because it's now working (sort of, see
    below).
    
    These two patches get the card almost fully operational; there appears to
    be a bug in tda8290.c remaining that puts an offset onto the tuned
    frequency in FM radio mode.  We're investigating.
    
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 0c8b971ebb21dc33271c38d17fd58b8072009dc5
Author: Peter Missel <peter.missel@onlinehome.de>
Date:   Sun May 1 08:59:05 2005 -0700

    [PATCH] LifeView FlyTV Platinum FM: Remote Control support
    
    Subject says it ...  this card's IR microcontroller design and attachment
    are compatible to the company's previous designs, so the patch was as
    simple as it gets.
    DESC
    LifeView FlyTV Platinum FM: GPIO usage
    EDESC
    From: Peter Missel <peter.missel@onlinehome.de>
    
    This is take two of a patch that should have appeared two days ago, before
    yesterday's "remote control" patch for the same card.
    
    This patch sets unconnected GPIO to Output to keep them from floating (just
    good driver writing practice, being nice to the chip), and uses GPIO16 to
    switch TV vs.  FM - this pin switches inputs onto the tuner, as well as the
    audio output from the tuner into the 7135 SIF input.  Consequently, FM
    radio support is being un-commented because it's now working (sort of, see
    below).
    
    These two patches get the card almost fully operational; there appears to
    be a bug in tda8290.c remaining that puts an offset onto the tuned
    frequency in FM radio mode.  We're investigating.
    
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 9a3bb3017383fbb6fe56431d17f60bd0d50f0717
Author: Paolo 'Blaisorblade' Giarrusso <blaisorblade@yahoo.it>
Date:   Sun May 1 08:59:05 2005 -0700

    [PATCH] reiserfs: make resize option auto-get new device size
    
    It's trivial for the resize option to auto-get the underlying device size,
    while it's harder for the user.  I've copied the code from jfs.
    
    Since of the different reiserfs option parser (which does not use the
    superior match_token used by almost every other filesystem), I've had to
    use the "resize=auto" and not "resize" option to specify this behaviour.
    Changing the option parser to the kernel one wouldn't be bad but I've no
    time to do this cleanup in this moment.
    
    Btw, the mount(8) man page should be updated to include this option.  Cc
    the relevant people, please (I hope I cc'ed the right people).
    
    Cc: <reiserfs-dev@namesys.com>
    Cc: <reiserfs-list@namesys.com>
    Cc: <mtk-manpages@gmx.net>
    Cc: Alex Zarochentsev <zam@namesys.com>
    Signed-off-by: Paolo 'Blaisorblade' Giarrusso <blaisorblade@yahoo.it>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit a83f1fe27f7252a2b73b4f22066e92bf99bd595b
Author: Paul E. McKenney <paulmck@us.ibm.com>
Date:   Sun May 1 08:59:05 2005 -0700

    [PATCH] Update RCU documentation
    
    Update the RCU documentation to allow for the new synchronize_rcu() and
    synchronize_sched() primitives.  Fix a few other nits as well.
    
    Signed-off-by: Paul E. McKenney <paulmck@us.ibm.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit fbd568a3e61a7decb8a754ad952aaa5b5c82e9e5
Author: Paul E. McKenney <paulmck@us.ibm.com>
Date:   Sun May 1 08:59:04 2005 -0700

    [PATCH] Change synchronize_kernel to _rcu and _sched
    
    This patch changes calls to synchronize_kernel(), deprecated in the earlier
    "Deprecate synchronize_kernel, GPL replacement" patch to instead call the new
    synchronize_rcu() and synchronize_sched() APIs.
    
    Signed-off-by: Paul E. McKenney <paulmck@us.ibm.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 9b06e818985d139fd9e82c28297f7744e1b484e1
Author: Paul E. McKenney <paulmck@us.ibm.com>
Date:   Sun May 1 08:59:04 2005 -0700

    [PATCH] Deprecate synchronize_kernel, GPL replacement
    
    The synchronize_kernel() primitive is used for quite a few different purposes:
    waiting for RCU readers, waiting for NMIs, waiting for interrupts, and so on.
    This makes RCU code harder to read, since synchronize_kernel() might or might
    not have matching rcu_read_lock()s.  This patch creates a new
    synchronize_rcu() that is to be used for RCU readers and a new
    synchronize_sched() that is used for the rest.  These two new primitives
    currently have the same implementation, but this is might well change with
    additional real-time support.  Both new primitives are GPL-only, the old
    primitive is deprecated.
    
    Signed-off-by: Paul E. McKenney <paulmck@us.ibm.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 512345be2549308b8ae8e85a3ff7f6d56a38e5f6
Author: Paul E. McKenney <paulmck@us.ibm.com>
Date:   Sun May 1 08:59:03 2005 -0700

    [PATCH] Add deprecated_for_modules
    
    Add a deprecated_for_modules macro that allows symbols to be deprecated only
    when used by modules, as suggested by Andrew Morton some months back.
    
    Signed-off-by: Paul E. McKenney <paulmck@us.ibm.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 66cf8f1443301a1d5bc9c21709e4264e6919a3e1
Author: Paul E. McKenney <paulmck@us.ibm.com>
Date:   Sun May 1 08:59:03 2005 -0700

    [PATCH] kernel/rcupdate.c: make the exports EXPORT_SYMBOL_GPL
    
    The gpl exports need to be put back.  Moving them to GPL -- but in a
    measured manner, as I proposed on this list some months ago -- is fine.
    Changing these particular exports precipitously is most definitely -not-
    fine.  Here is my earlier proposal:
    
    	http://marc.theaimsgroup.com/?l=linux-kernel&m=110520930301813&w=2
    
    See below for a patch that puts the exports back, along with an updated
    version of my earlier patch that starts the process of moving them to GPL.
    I will also be following this message with RFC patches that introduce two
    (EXPORT_SYMBOL_GPL) interfaces to replace synchronize_kernel(), which then
    becomes deprecated.
    
    Signed-off-by: <paulmck@us.ibm.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit f246315e1ab96c40978777d1e159820ecca45aa8
Author: Daniel Drake <dsd@gentoo.org>
Date:   Sun May 1 08:59:03 2005 -0700

    [PATCH] procfs: Fix hardlink counts for /proc/<PID>/task
    
    The current logic assumes that a /proc/<PID>/task directory should have a
    hardlink count of 3, probably counting ".", "..", and a directory for a
    single child task.
    
    It's fairly obvious that this doesn't work out correctly when a PID has
    more than one child task, which is quite often the case.
    
    Signed-off-by: Daniel Drake <dsd@gentoo.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit bcf88e1163623e8e8ef2ba7feface9c826a890c9
Author: Daniel Drake <dsd@gentoo.org>
Date:   Sun May 1 08:59:03 2005 -0700

    [PATCH] procfs: Fix hardlink counts
    
    The pid directories in /proc/ currently return the wrong hardlink count - 3,
    when there are actually 4 : ".", "..", "fd", and "task".
    
    This is easy to notice using find(1):
    	cd /proc/<pid>
    	find
    
    In the output, you'll see a message similar to:
    
    find: WARNING: Hard link count is wrong for .: this may be a bug in your
    filesystem driver.  Automatically turning on find's -noleaf option.
    Earlier results may have failed to include directories that should have
    been searched.
    
    http://bugs.gentoo.org/show_bug.cgi?id=86031
    
    I also noticed that CONFIG_SECURITY can add a 5th: attr, and performed a
    similar fix on the task directories too.
    
    Signed-off-by: Daniel Drake <dsd@gentoo.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 7f261b5f0dccd53ed3a9a95b55c36e24a698a92a
Author: Stas Sergeev <stsp@aknet.ru>
Date:   Sun May 1 08:59:02 2005 -0700

    [PATCH] move SA_xxx defines to linux/signal.h
    
    The attached patch moves the IRQ-related SA_xxx flags (namely, SA_PROBE,
    SA_SAMPLE_RANDOM and SA_SHIRQ) from all the arch-specific headers to
    linux/signal.h.  This looks like a left-over after the irq-handling code
    was consolidated.  The code was moved to kernel/irq/*, but the flags are
    still left per-arch.
    
    Right now, adding a new IRQ flag to the arch-specific header, like this
    patch does:
    http://cvs.sourceforge.net/viewcvs.py/*checkout*/alsa/alsa-driver/utils/patches/pcsp-kernel-2.6.10-03.diff?rev=1.1
    no longer works, it breaks the compilation for all other arches, unless you
    add that flag to all the other arch-specific headers too.  So I think such
    a clean-up makes sense.
    
    Signed-off-by: Stas Sergeev <stsp@aknet.ru>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit d59745ce3e7aa13856bca16d3bcbb95041775ff6
Author: Matt Mackall <mpm@selenic.com>
Date:   Sun May 1 08:59:02 2005 -0700

    [PATCH] clean up kernel messages
    
    Arrange for all kernel printks to be no-ops.  Only available if
    CONFIG_EMBEDDED.
    
    This patch saves about 375k on my laptop config and nearly 100k on minimal
    configs.
    
    Signed-off-by: Matt Mackall <mpm@selenic.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit cd7619d6bf36564cf54ff7218ef54e558a741913
Author: Matt Mackall <mpm@selenic.com>
Date:   Sun May 1 08:59:01 2005 -0700

    [PATCH] Exterminate PAGE_BUG
    
    Remove PAGE_BUG - repalce it with BUG and BUG_ON.
    
    Signed-off-by: Matt Mackall <mpm@selenic.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit c8538a7aa5527d02c7191ac5da124efadf6a2827
Author: Matt Mackall <mpm@selenic.com>
Date:   Sun May 1 08:59:01 2005 -0700

    [PATCH] remove all kernel BUGs
    
    This patch eliminates all kernel BUGs, trims about 35k off the typical
    kernel, and makes the system slightly faster.
    
    Signed-off-by: Matt Mackall <mpm@selenic.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit e43379f10b42194b8a6e1de342cfb44463c0f6da
Author: Matt Mackall <mpm@selenic.com>
Date:   Sun May 1 08:59:00 2005 -0700

    [PATCH] nice and rt-prio rlimits
    
    Add a pair of rlimits for allowing non-root tasks to raise nice and rt
    priorities. Defaults to traditional behavior. Originally written by
    Chris Wright.
    
    The patch implements a simple rlimit ceiling for the RT (and nice) priorities
    a task can set.  The rlimit defaults to 0, meaning no change in behavior by
    default.  A value of 50 means RT priority levels 1-50 are allowed.  A value of
    100 means all 99 privilege levels from 1 to 99 are allowed.  CAP_SYS_NICE is
    blanket permission.
    
    (akpm: see http://www.uwsg.iu.edu/hypermail/linux/kernel/0503.1/1921.html for
    tips on integrating this with PAM).
    
    Signed-off-by: Matt Mackall <mpm@selenic.com>
    Acked-by: Ingo Molnar <mingo@elte.hu>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 9fc1427a01a9df3605e219c6de0c59c4639209a1
Author: Cornelia Huck <cohuck@de.ibm.com>
Date:   Sun May 1 08:59:00 2005 -0700

    [PATCH] s390: cio documentation
    
    Synchronize documentation with current interface.
    
    Signed-off-by: Martin Schwidefsky <schwidefsky@de.ibm.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit af6c8eed14a0c14791e2fbb4c7726755c1a637ca
Author: Cornelia Huck <cohuck@de.ibm.com>
Date:   Sun May 1 08:59:00 2005 -0700

    [PATCH] s390: remove ioctl32 from crypto driver
    
    The ioctl32_conversion routines will be deprecated: Remove them from the
    crypto driver.
    
    Signed-off-by: Martin Schwidefsky <schwidefsky@de.ibm.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 4beb37097b20b61054b15c56848e4ffcef093819
Author: Cornelia Huck <cohuck@de.ibm.com>
Date:   Sun May 1 08:58:59 2005 -0700

    [PATCH] s390: remove ioctl32 from dasdcmb
    
    The ioctl32_conversion routines will be deprecated: Remove them from dasd_cmb
    and handle the three cmb ioctls like all other dasd ioctls.
    
    Signed-off-by: Martin Schwidefsky <schwidefsky@de.ibm.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit ec5883abebb2e249ea8d318cb58fb4b2c269cf10
Author: Horst Hummel <horst.hummel@de.ibm.com>
Date:   Sun May 1 08:58:59 2005 -0700

    [PATCH] s390: don't pad cdl blocks for write requests
    
    The first blocks on a cdl formatted dasd device are smaller than the blocksize
    of the device.  Read requests are padded with a 'e5' pattern.  Write requests
    should not pad the (user) buffer with 'e5' because a write request is not
    allowed to modify the buffer.
    
    Signed-off-by: Martin Schwidefsky <schwidefsky@de.ibm.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 6ed93c827eea181d87ce078cd1d671128c030b5a
Author: Stefan Weinhuber <wein@de.ibm.com>
Date:   Sun May 1 08:58:59 2005 -0700

    [PATCH] s390: enable write barriers in the dasd driver
    
    The DASD device driver never reorders the I/O requests and relies on the
    hardware to write all data to nonvolatile storage before signaling a
    successful write.  Hence, the only thing we have to do to support write
    barriers is to set the queue ordered flag.
    
    Signed-off-by: Martin Schwidefsky <schwidefsky@de.ibm.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit f24acd4503270ed4c842c8fef0b71105285e0a06
Author: Horst Hummel <horst.hummel@de.ibm.com>
Date:   Sun May 1 08:58:59 2005 -0700

    [PATCH] s390: dasd readonly attribute
    
    The independent read-only flags in devmap, dasd_device and gendisk are not
    kept in sync.  Use one bit per feature in the dasd driver and keep that bit in
    sync with the gendisk bit.
    
    Signed-off-by: Martin Schwidefsky <schwidefsky@de.ibm.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit e8f0641ef74eaa71ed9aa9d19c4b741c2143d752
Author: Michael Holzheu <holzheu@de.ibm.com>
Date:   Sun May 1 08:58:58 2005 -0700

    [PATCH] s390: allow longer debug feature names
    
    The current limitation of 16 characters of the debug feature names turned out
    to be insufficient.  Increase it to 64 characters.
    
    Signed-off-by: Martin Schwidefsky <schwidefsky@de.ibm.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 15439d74f621ff8252b53136d259781148e6e768
Author: Martin Schwidefsky <schwidefsky@de.ibm.com>
Date:   Sun May 1 08:58:58 2005 -0700

    [PATCH] s390: cmm guest sender id
    
    An arbitrary guest must not be allowed to trigger cmm actions.  Only one
    specific guest namely the one that serves as the resource monitor may send cmm
    messages.  Add a parameter that allows to specify the guest that may send
    messages.  z/VMs resource manager has the name 'VMRMSVM' which is the default.
    
    Signed-off-by: Martin Schwidefsky <schwidefsky@de.ibm.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 0b642ede47969d4180b0922d982777fe64379228
Author: Peter Oberparleiter <peter.oberparleiter@de.ibm.com>
Date:   Sun May 1 08:58:58 2005 -0700

    [PATCH] s390: default storage key
    
    Provide an easy way to define a non-zero storage key at compile time.  This is
    useful for debugging purposes.
    
    Signed-off-by: Martin Schwidefsky <schwidefsky@de.ibm.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit c9e3735359ac2d74ee61c6f1e5724f4a6db570bf
Author: Heiko Carstens <heiko.carstens@de.ibm.com>
Date:   Sun May 1 08:58:57 2005 -0700

    [PATCH] s390: fix memory holes and cleanup setup_arch
    
    The memory setup didn't take care of memory holes and this makes the memory
    management think there would be more memory available than there is in
    reality.  That causes the OOM killer to kill processes even if there is enough
    memory left that can be written to the swap space.
    
    The patch fixes this by using free_area_init_node with an array of memory
    holes instead of free_area_init.  Further the patch cleans up the code in
    setup.c by splitting setup_arch into smaller pieces.
    
    Signed-off-by: Martin Schwidefsky <schwidefsky@de.ibm.com>
    
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 4b7e0706620e3947dc1685dfdbc1413404afb545
Author: Martin Schwidefsky <schwidefsky@de.ibm.com>
Date:   Sun May 1 08:58:57 2005 -0700

    [PATCH] s390: idle timer setup
    
    Fix overflow in calculation of the new tod value in stop_hz_timer and fix
    wrong virtual timer list idle time in case the virtual timer is already
    expired in stop_cpu_timer.
    
    Signed-off-by: Martin Schwidefsky <schwidefsky@de.ibm.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit b2c6678c858c5e54d95b996754adfb319cf65735
Author: Martin Schwidefsky <schwidefsky@de.ibm.com>
Date:   Sun May 1 08:58:57 2005 -0700

    [PATCH] s390: regenerate defconfig
    
    Regenerate the default configuration for s390.
    
    Signed-off-by: Martin Schwidefsky <schwidefsky@de.ibm.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 2c49be99ede1e3685a9817a564b4b1678d48e1b9
Author: Paolo 'Blaisorblade' Giarrusso <blaisorblade@yahoo.it>
Date:   Sun May 1 08:58:57 2005 -0700

    [PATCH] uml ubd: handle readonly status
    
    Use the set_disk_ro() API when the backing file is read-only, to mark the disk
    read-only, during the ->open().  The current hack does not work when doing a
    mount -o remount.
    
    Also, mark explicitly the code paths which should no more be triggerable (I've
    removed the WARN_ON(1) things).  They should actually become BUG()s probably
    but I'll avoid that since I'm not so sure the change works so well.  I gave it
    only some limited testing.
    
    Signed-off-by: Paolo 'Blaisorblade' Giarrusso <blaisorblade@yahoo.it>
    CC: Jens Axboe <axboe@suse.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit acef2e55d2a1b59bb5610cacc546c1d1b5de2dc9
Author: Paolo 'Blaisorblade' Giarrusso <blaisorblade@yahoo.it>
Date:   Sun May 1 08:58:56 2005 -0700

    [PATCH] uml: commentary about forking flag
    
    Add some commentary about UML internals, for a strange trick.
    
    Signed-off-by: Paolo 'Blaisorblade' Giarrusso <blaisorblade@yahoo.it>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit ffa0aea681a5f3c8aecbb86f1cfd3486043805de
Author: Paolo 'Blaisorblade' Giarrusso <blaisorblade@yahoo.it>
Date:   Sun May 1 08:58:56 2005 -0700

    [PATCH] uml - hostfs: avoid buffers
    
    Use this:
    	.set_page_dirty = __set_page_dirty_nobuffers,
    
    We already dropped the inclusion of <linux/buffer_head.h>, and we don't have a
    backing block device for this FS.
    
    "Without having looked at it, I'm sure that hostfs does not use buffer_heads.
    So setting your ->set_page_dirty a_op to point at __set_page_dirty_nobuffers()
    is a reasonable thing to do - it'll provide a slight speedup."
    
    This speedup is one less spinlock held and one less conditional branch, which
    isn't bad.
    
    Signed-off-by: Paolo 'Blaisorblade' Giarrusso <blaisorblade@yahoo.it>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit b97b77cca627b2e3e6d0015e2e14b1d1c12de0c8
Author: Paolo 'Blaisorblade' Giarrusso <blaisorblade@yahoo.it>
Date:   Sun May 1 08:58:56 2005 -0700

    [PATCH] uml: redo console locking
    
    Fix some console locking problems (including scheduling in atomic) and various
    reorderings and cleanup in that code.  Not yet ready for 2.6.12 probably.
    
    Signed-off-by: Paolo 'Blaisorblade' Giarrusso <blaisorblade@yahoo.it>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 80f9507886076de0cadfdf2b87701e68156829c2
Author: Paolo 'Blaisorblade' Giarrusso <blaisorblade@yahoo.it>
Date:   Sun May 1 08:58:55 2005 -0700

    [PATCH] uml: fix syscall table by including $(SUBARCH)'s one, for x86-64
    
    Reuse asm-x86-64/unistd.h to build our syscall table, like x86-64 already
    does.
    
    Like for i386, we must add some #defines for all the (right!) changes UML does
    to x86-64 syscall table.
    
    Note: I noted a bogus:
    	[ __NR_sched_yield ] = (syscall_handler_t *) yield,
    
    while doing this patch (which could only be a workaround for some strange bug,
    but I would ignore this possibility).  I'm changing this without notice.
    
    Signed-off-by: Paolo 'Blaisorblade' Giarrusso <blaisorblade@yahoo.it>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit ddcd6b175793839e51fdd55debb670a9f512c448
Author: Paolo 'Blaisorblade' Giarrusso <blaisorblade@yahoo.it>
Date:   Sun May 1 08:58:55 2005 -0700

    [PATCH] uml: quick fix syscall table for x86_64
    
    Fix the moved syscall table for the x86_64 SUBARCH:
    
    - redirect __NR_chown and such to versions aware of 32-bit UIDs,
    
    - avoid the useless hack for sys_nfsservctl,
    
    - use sys_sendfile64 in the table rather than sys_sendfile.
    
    - __NR_uselib is sys_ni_syscall on x86_64 (which does not support A.OUT).
    
    - __NR_getrlimit is sys_getrlimit, not sys_old_getrlimit
    
    Signed-off-by: Paolo 'Blaisorblade' Giarrusso <blaisorblade@yahoo.it>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 5e7b83ffc67e15791d9bf8b2a18e4f5fd0eb69b8
Author: Paolo 'Blaisorblade' Giarrusso <blaisorblade@yahoo.it>
Date:   Sun May 1 08:58:55 2005 -0700

    [PATCH] uml: fix syscall table by including $(SUBARCH)'s one, for i386
    
    Split the i386 entry.S files into entry.S and syscall_table.S which is
    included in the previous one (so actually there is no difference between them)
    and use the syscall_table.S in the UML build, instead of tracking by hand the
    syscall table changes (which is inherently error-prone).
    
    We must only insert the right #defines to inject the changes we need from the
    i386 syscall table (for instance some different function names); also, we
    don't implement some i386 syscalls, as ioperm(), nor some TLS-related ones
    (yet to provide).
    
    Signed-off-by: Paolo 'Blaisorblade' Giarrusso <blaisorblade@yahoo.it>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit e9c527163d31da9f616e989a90429729525c5233
Author: Paolo 'Blaisorblade' Giarrusso <blaisorblade@yahoo.it>
Date:   Sun May 1 08:58:54 2005 -0700

    [PATCH] uml: move va_copy conditional def
    
    GCC 2.95 uses __va_copy instead of va_copy.  Handle it inside compiler.h
    instead of in a casual file, and avoid the risk that this breaks with a newer
    compiler (which it could do).
    
    Signed-off-by: Paolo 'Blaisorblade' Giarrusso <blaisorblade@yahoo.it>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit c16993d9009b4311f0e6088af38844eabc8b5e5b
Author: Paolo 'Blaisorblade' Giarrusso <blaisorblade@yahoo.it>
Date:   Sun May 1 08:58:54 2005 -0700

    [PATCH] uml: inline empty proc
    
    Cleanup: make an inline of this empty proc.
    
    Signed-off-by: Paolo 'Blaisorblade' Giarrusso <blaisorblade@yahoo.it>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit c45166be3cc666ce88fe623ad79276c943e74eff
Author: Paolo 'Blaisorblade' Giarrusso <blaisorblade@yahoo.it>
Date:   Sun May 1 08:58:54 2005 -0700

    [PATCH] uml: support AES i586 crypto driver
    
    We want to make possible, for the user, to enable the i586 AES implementation.
    This requires a restructure.
    
    - Add a CONFIG_UML_X86 to notify that we are building a UML for i386.
    
    - Rename CONFIG_64_BIT to CONFIG_64BIT as is used for all other archs
    
    - Tell crypto/Kconfig that UML_X86 is as good as X86
    
    - Tell it that it must exclude not X86_64 but 64BIT, which will give the
      same results.
    
    - Tell kbuild to descend down into arch/i386/crypto/ to build what's needed.
    
    Signed-off-by: Paolo 'Blaisorblade' Giarrusso <blaisorblade@yahoo.it>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit b05d85a87d9711f5f5f2eb05c79038d5d5ff1f44
Author: Rob Landley <rob@landley.net>
Date:   Sun May 1 08:58:54 2005 -0700

    [PATCH] uml: workaround old problematic sed behaviour
    
    Old versions of sed from 1998 (predating the first release of gcc 2.95, but
    still in use by debian stable) don't understand the single-line version of the
    sed append command.  Since newer versions of sed still understand the...
    ahem, "vintage" form of the command, change our code to use that.
    
    Signed-off-by: Rob Landley <rob@landley.net>
    Acked-by: Ian McDonald <imcdnzl@gmail.com>
    Signed-off-by: Paolo 'Blaisorblade' Giarrusso <blaisorblade@yahoo.it>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 6aec3072833283a5e2ecf07318bd383a67321657
Author: Andree Leidenfrost <aleidenf@bigpond.net.au>
Date:   Sun May 1 08:58:53 2005 -0700

    [PATCH] uml: fix handling of no fpx_regs
    
          Paolo 'Blaisorblade' Giarrusso <blaisorblade@yahoo.it>
    
    Fix the error path, which is triggered when the processor misses the fpx
    regs (i.e.  the "fxsr" cpuinfo feature).  For instance by VIA C3 Samuel2.
    
    Signed-off-by: Paolo 'Blaisorblade' Giarrusso <blaisorblade@yahoo.it>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 8e7a4f69e4ed328aa09ce48601073052557fa85d
Author: blaisorblade@yahoo.it <blaisorblade@yahoo.it>
Date:   Sun May 1 08:58:53 2005 -0700

    [PATCH] uml: add nfsd syscall when nfsd is modular
    
    This trick is useless, because sys_ni.c will handle this problem by itself,
    like it does even on UML for other syscalls.
    
    Also, it does not provide the NFSD syscall when NFSD is compiled as a
    module, which is a big problem.
    
    Signed-off-by: Paolo 'Blaisorblade' Giarrusso <blaisorblade@yahoo.it>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 92eac95287d75f220a8bbef6646f51a6497c4b4c
Author: Jeff Dike <jdike@addtoit.com>
Date:   Sun May 1 08:58:53 2005 -0700

    [PATCH] uml: fix oops related to exception table
    
          Paolo 'Blaisorblade' Giarrusso <blaisorblade@yahoo.it>
    
    Prevent the kernel from oopsing during the extable sorting, as it can do
    now, because the extable is in the readonly section of the binary.
    
    Jeff says: The exception table turned RO in 2.6.11-rc3-mm1 for some reason.
    Moving it causes it to land in the writable data section of the binary.
    
    Paolo says: This patch fixes a oops on startup, which can be easily
    triggered by compiling with CONFIG_MODE_TT disabled, and STATIC_LINK either
    disabled or enabled.  The resulting kernel will always Oops on startup,
    after printing this simple output:
    
    I've verified, by binary search on the BitKeeper repository (synced up as
    of 2.6.12-rc2), starting from the range 2.6.11-2.6.12-rc1, that this bug
    shows up on BitKeeper revisions in the range [@1.1994.11.168,+inf), i.e.
    starting from this:
    
    [PATCH] lib/sort: Replace insertion sort in exception tables
    
    Since UML does not use the exception table, it's likely that insertion sort
    didn't happen to write anything on the table.
    
    Signed-off-by: Paolo 'Blaisorblade' Giarrusso <blaisorblade@yahoo.it>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 31df7b7fc6182b6c4e5c3b77084d0c026b3ac613
Author: Pavel Machek <pavel@ucw.cz>
Date:   Sun May 1 08:58:52 2005 -0700

    [PATCH] hp100: fix card names
    
    Those cards really need A in their names. Otherwise it is pretty hard
    to find anything about them on the net.
    
    Signed-off-by: Pavel Machek <pavel@suse.cz>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 429e9c5eeb66fc272c15568849ad0b23689a4a06
Author: Alexander Nyberg <alexn@telia.com>
Date:   Sun May 1 08:58:52 2005 -0700

    [PATCH] x86_64: saved_command_line overflow fix
    
    This strcpy can run off the end of saved_command_line, and we don't need it any more anyway.
    
    Signed-off-by: Alexander Nyberg <alexn@telia.com>
    Cc: Andi Kleen <ak@muc.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 8059b2a292d59b6d94f9e3af93bf711f161c9476
Author: Venkatesh Pallipadi <venkatesh.pallipadi@intel.com>
Date:   Sun May 1 08:58:52 2005 -0700

    [PATCH] x86-64: Handle empty E820 regions correctly
    
    Brings sanitize_e820_map() in x86-64 in sync with that of i386.
    
    x86_64 version was missing the changes from this patch.
    http://linux.bkbits.net:8080/linux-2.6/cset@3e5e4083Y3HevldZl5KCy94V4DcZww?nav=index.html|src/|src/arch|src/arch/i386|src/arch/i386/kernel|related/arch/i386/kernel/setup.c
    
    Signed-off-by: Venkatesh Pallipadi <venkatesh.pallipadi@intel.com>
    Acked-by: Andi Kleen <ak@muc.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit ad6714230f2269d5d7db2cd1900fe7bfc7aa76dc
Author: Pavel Pisa <pisa@cmp.felk.cvut.cz>
Date:   Sun May 1 08:58:52 2005 -0700

    [PATCH] Linux 2.6.x VM86 interrupt emulation fixes
    
    Patch solves VM86 interrupt emulation deadlock on SMP systems.  The VM86
    interrupt emulation has been heavily tested and works well on UP systems
    after last update, but it seems to deadlock when we have used it on SMP/HT
    boxes now.
    
    It seems, that disable_irq() cannot be called from interrupts, because it
    waits until disabled interrupt handler finishes
    (/kernel/irq/manage.c:synchronize_irq():while(IRQ_INPROGRESS);).  This
    blocks one CPU after another.  Solved by use disable_irq_nosync.
    
    There is the second problem.  If IRQ source is fast, it is possible, that
    interrupt is sometimes processed and re-enabled by the second CPU, before
    it is disabled by the first one, but negative IRQ disable depths are not
    allowed.  The spinlocking and disabling IRQs over call to
    disable_irq_nosync/enable_irq is the only solution found reliable till now.
    
    Signed-off-by: Michal Sojka <sojkam1@control.felk.cvut.cz>
    Signed-off-by: Pavel Pisa <pisa@cmp.felk.cvut.cz>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit f9ba70535dc12d9eb57d466a2ecd749e16eca866
Author: Venkatesh Pallipadi <venkatesh.pallipadi@intel.com>
Date:   Sun May 1 08:58:51 2005 -0700

    [PATCH] Increase number of e820 entries hard limit from 32 to 128
    
    The specifications that talk about E820 map doesn't have an upper limit on
    the number of e820 entries.  But, today's kernel has a hard limit of 32.
    With increase in memory size, we are seeing the number of E820 entries
    reaching close to 32.  Patch below bumps the number upto 128.
    
    The patch changes the location of EDDBUF in zero-page (as it comes after E820).
    As, EDDBUF is not used by boot loaders, this patch should not have any effect
    on bootloader-setup code interface.
    
    Patch covers both i386 and x86-64.
    
    Tested on:
    * grub booting bzImage
    * lilo booting bzImage with EDID info enabled
    * pxeboot of bzImage
    
    Side-effect:
    bss increases by ~ 2K and init.data increases by ~7.5K
    on all systems, due to increase in size of static arrays.
    
    Signed-off-by: Venkatesh Pallipadi <venkatesh.pallipadi@intel.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit be9e68703c53fece406bc2e40976a5cfe2a8e77f
Author: Andi Kleen <ak@suse.de>
Date:   Sun May 1 08:58:51 2005 -0700

    [PATCH] x86_64: interrupt handling fix
    
    - Initialize workmask correctly on interrupt signal handling
    
    - Readd missing cli's in the interrupt return path.
    
    Signed-off-by: Andi Kleen <ak@suse.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 3c3b73b6f50a47601b1897deb9c6b4b5ecadf591
Author: Zwane Mwaikambo <zwane@arm.linux.org.uk>
Date:   Sun May 1 08:58:51 2005 -0700

    [PATCH] cpuid x87 bit on AMD falsely marked as PNI
    
    http://bugme.osdl.org/show_bug.cgi?id=4426
    
    vendor_id       : AuthenticAMD
    cpu family      : 6
    model           : 10
    model name      : AMD Athlon(tm) XP
    stepping        : 0
    cpu MHz         : 2204.807
    <snipped>
    cpuid level     : 1
    wp              : yes
    flags           : fpu vme de pse tsc msr pae mce cx8 apic sep mtrr pge mca cmov
    pat pse36 mmx fxsr sse pni syscall mmxext 3dnowext 3dnow
    bogomips        : 4358.14
    
    We're marking bit 0 of extended function 0x80000001 cpuid as PNI support on
    AMD processors, when it actually denotes x87 FPU present.  Patch for i386
    and x86_64 below.
    
    Signed-off-by: Zwane Mwaikambo <zwane@arm.linux.org.uk>
    Cc: Andi Kleen <ak@suse.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 2f1b381825411fd3d5c8323dd1be77438e19e192
Author: Jason Gaston <jason.d.gaston@intel.com>
Date:   Sun May 1 08:58:50 2005 -0700

    [PATCH] hda_intel: Intel ESB2 support
    
    This adds the Intel ESB2 HD Audio DID to the hda_intel.c audio driver.
    
    Signed-off-by:  Jason Gaston <Jason.d.gaston@intel.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 4d24a439a6b2280357d62fb30a73350cf253bdb7
Author: Jason Gaston <jason.d.gaston@intel.com>
Date:   Sun May 1 08:58:50 2005 -0700

    [PATCH] irq and pci_ids for Intel ICH7DH & ICH7-M DH
    
    This patch adds the Intel ICH7DH and ICH7-M DH DID's to the irq.c and
    pci_ids.h files.
    
    Signed-off-by:  Jason Gaston <Jason.d.gaston@intel.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 35492df5ae0f36f717448b2aea908d3a8891d1c4
Author: john stultz <johnstul@us.ibm.com>
Date:   Sun May 1 08:58:50 2005 -0700

    [PATCH] i386: fix hpet for systems that don't support legacy replacement
    
    Currently the i386 HPET code assumes the entire HPET implementation from
    the spec is present.  This breaks on boxes that do not implement the
    optional legacy timer replacement functionality portion of the spec.
    
    This patch, which is very similar to my x86-64 patch for the same issue,
    fixes the problem allowing i386 systems that cannot use the HPET for the
    timer interrupt and RTC to still use the HPET as a time source.  I've
    tested this patch on a system systems without HPET, with HPET but without
    legacy timer replacement, as well as HPET with legacy timer replacement.
    
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 5b7abc6fdcaf103f15e06c518ef0aec02a9c00e7
Author: H. Peter Anvin <hpa@zytor.com>
Date:   Sun May 1 08:58:49 2005 -0700

    [PATCH] CPUID bug and inconsistency fix
    
    The recent support for K8 multicore was misported from x86-64 to i386, due
    to an unnecessary inconsistency between the CPUID code.  Sure, there is are
    no x86-64 VIA chips yet, but it should happen eventually.
    
    This patch fixes the i386 bug as well as makes x86-64 match i386 in the
    handing of the CPUID array.
    
    Signed-off-by: H. Peter Anvin <hpa@zytor.com>
    Cc: Andi Kleen <ak@suse.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit a6954ba2e8d344a07e066737827116eb7bc0fdcd
Author: Lee Revell <rlrevell@joe-job.com>
Date:   Sun May 1 08:58:49 2005 -0700

    [PATCH] Enable write combining for server works LE rev > 6
    
    Enable write combining for server works LE rev > 6 per
    http://www.ussg.iu.edu/hypermail/linux/kernel/0104.3/1007.html
    
    Signed-Off-By: Lee Revell <rlrevell@joe-job.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 48c88211a65bc30f030fe228bda30fda870deb90
Author: Stas Sergeev <stsp@aknet.ru>
Date:   Sun May 1 08:58:49 2005 -0700

    [PATCH] x86: entry.S trap return fixes
    
    do_debug() and do_int3() return void.
    
    This patch fixes the CONFIG_KPROBES variant of do_int3() to return void too
    and adjusts entry.S accordingly.
    
    Signed-off-by: Stas Sergeev <stsp@aknet.ru>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit a2f7c354159b87dfbd9900f597d48d18755a9d16
Author: Jaya Kumar <jayalk@intworks.biz>
Date:   Sun May 1 08:58:49 2005 -0700

    [PATCH] x86 reboot: Add reboot fixup for gx1/cs5530a
    
    This patch by Jaya Kumar introduces a generic infrastructure to deal with
    x86 chipsets with nonstandard reset sequences, and adds support for the
    Geode gx1/cs5530a chipset.
    
    Signed-off-by: Jaya Kumar <jayalk@intworks.biz>
    Signed-off-by: H. Peter Anvin <hpa@zytor.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 67701ae9767534534d3710664037dfde2cc04935
Author: Jack F Vogel <jfv@bluesong.net>
Date:   Sun May 1 08:58:48 2005 -0700

    [PATCH] check nmi watchdog is broken
    
    A bug against an xSeries system showed up recently noting that the
    check_nmi_watchdog() test was failing.
    
    I have been investigating it and discovered in both i386 and x86_64 the
    recent change to the routine to use the cpu_callin_map has uncovered a
    problem.  Prior to that change, on an SMP box, the test was trivally
    passing because all cpu's were found to not yet be online, but now with the
    callin_map they are discovered, it goes on to test the counter and they
    have not yet begun to increment, so it announces a CPU is stuck and bails
    out.
    
    On all the systems I have access to test, the announcement of failure is
    also bougs...  by the time you can login and check /proc/interrupts, the
    NMI count is happily incrementing on all CPUs.  Its just that the test is
    being done too early.
    
    I have tried moving the call to the test around a bit, and it was always
    too early.  I finally hit on this proposed solution, it delays the routine
    via a late_initcall(), seems like the right solution to me.
    
    Signed-off-by: Adrian Bunk <bunk@stusta.de>
    Cc: Andi Kleen <ak@muc.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit fd51f666fa591294bd7462447512666e61c56ea0
Author: H. J. Lu <hjl@lucon.org>
Date:   Sun May 1 08:58:48 2005 -0700

    [PATCH] i386/x86_64 segment register access update
    
    The new i386/x86_64 assemblers no longer accept instructions for moving
    between a segment register and a 32bit memory location, i.e.,
    
            movl (%eax),%ds
            movl %ds,(%eax)
    
    To generate instructions for moving between a segment register and a
    16bit memory location without the 16bit operand size prefix, 0x66,
    
            mov (%eax),%ds
            mov %ds,(%eax)
    
    should be used. It will work with both new and old assemblers. The
    assembler starting from 2.16.90.0.1 will also support
    
            movw (%eax),%ds
            movw %ds,(%eax)
    
    without the 0x66 prefix. I am enclosing patches for 2.4 and 2.6 kernels
    here. The resulting kernel binaries should be unchanged as before, with
    old and new assemblers, if gcc never generates memory access for
    
                   unsigned gsindex;
                   asm volatile("movl %%gs,%0" : "=g" (gsindex));
    
    If gcc does generate memory access for the code above, the upper bits
    in gsindex are undefined and the new assembler doesn't allow it.
    
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit d5b63d78f1e75f6c6f04862dfb2f2a4aeffafd4c
Author: Denis Vlasenko <vda@port.imtp.ilyichevsk.odessa.ua>
Date:   Sun May 1 08:58:48 2005 -0700

    [PATCH] fix i386 memcpy
    
    This patch shortens non-constant memcpy() by two bytes and fixes spurious
    out-of-line constant memcpy().
    
    # size vmlinux.org vmlinux
       text    data     bss     dec     hex filename
    3954591 1553426  236544 5744561  57a7b1 vmlinux.org
    3952615 1553426  236544 5742585  579ff9 vmlinux
    
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit d637413f3f05b41f678f8004225b33b62274183f
Author: Jake Moilanen <moilanen@austin.ibm.com>
Date:   Sun May 1 08:58:47 2005 -0700

    [PATCH] ppc64: reverse prediction on spinlock busy loop code
    
    On our raw spinlocks, we currently have an attempt at the lock, and if we do
    not get it we enter a spin loop.  This spinloop will likely continue for
    awhile, and we pridict likely.
    
    Shouldn't we predict that we will get out of the loop so our next instructions
    are already prefetched.  Even when we miss because the lock is still held, it
    won't matter since we are waiting anyways.
    
    I did a couple quick benchmarks, but the results are inconclusive.
    
    	16-way 690 running specjbb with original code
    	# ./specjbb 3000 16 1 1 19 30 120
    	    ...
    	Valid run, Score is 59282
    
    	16-way 690 running specjbb with unlikely code
    	# ./specjbb 3000 16 1 1 19 30 120
    	    ...
    	Valid run, Score is 59541
    
    I saw a smaller increase on a JS20 (~1.6%)
    
    	JS20 specjbb w/ original code
    	# ./specjbb 400 2 1 1 19 30 120
    	   ...
    	Valid run, Score is 20460
    
    	JS20 specjbb w/ unlikely code
    	# ./specjbb 400 2 1 1 19 30 120
    	   ...
    	Valid run, Score is 20803
    
    Anton said:
    
    Mispredicting the spinlock busy loop also means we slow down the rate at which
    we do the loads which can be good for heavily contended locks.
    
    Note: There are some gcc issues with our default build and branch prediction,
    but a CONFIG_POWER4_ONLY build should emit them correctly.  I'm working with
    Alan Modra on it now.
    
    Signed-off-by: Jake Moilanen <moilanen@austin.ibm.com>
    Signed-off-by: Anton Blanchard <anton@samba.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit d59dd4620fb8d6422555a9e2b82a707718e68327
Author: akpm@osdl.org <akpm@osdl.org>
Date:   Sun May 1 08:58:47 2005 -0700

    [PATCH] use smp_mb/wmb/rmb where possible
    
    Replace a number of memory barriers with smp_ variants.  This means we won't
    take the unnecessary hit on UP machines.
    
    Signed-off-by: Anton Blanchard <anton@samba.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 0d8d4d42f2d00eb65262b49f4edd4cf7ef4eb6fc
Author: Anton Blanchard <anton@samba.org>
Date:   Sun May 1 08:58:47 2005 -0700

    [PATCH] ppc64: use smp_mb and smp_wmb
    
    Use smp_mb and smp_wmb. In particular smp_wmb is lighter weight than wmb.
    
    Signed-off-by: Anton Blanchard <anton@samba.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit eeb24de431ac8c80fd13a2c479cd0eb51b70484e
Author: Anton Blanchard <anton@samba.org>
Date:   Sun May 1 08:58:46 2005 -0700

    [PATCH] ppc64: enforce medium thread priority in hypervisor calls
    
    Calls into the hypervisor do not raise the thread priority.  Ensure we are
    running at medium priority upon entry to the hypervisor.
    
    Signed-off-by: Anton Blanchard <anton@samba.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit c4005e4f661a9ec8d91720a6b570865d060afcaf
Author: Anton Blanchard <anton@samba.org>
Date:   Sun May 1 08:58:46 2005 -0700

    [PATCH] ppc64: firmware workaround
    
    Recent gcc 4.0 testing uncovered a firmware issue.  Some properties are larger
    than 31 bytes and due to gcc 4.0s better stack allocation this overflow ran
    over non volatile register storage.
    
    Signed-off-by: Anton Blanchard <anton@samba.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 4b88e927e8c38f4053680a3098325142017a37f0
Author: Anton Blanchard <anton@samba.org>
Date:   Sun May 1 08:58:46 2005 -0700

    [PATCH] ppc64: remove unnecessary include
    
    We no longer use any ppcdebug stuff in a.out.h, so remove the define.
    
    Signed-off-by: Anton Blanchard <anton@samba.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit a2f95a5ae99eb8209ad8d9faeaada00600bd8027
Author: Anton Blanchard <anton@samba.org>
Date:   Sun May 1 08:58:45 2005 -0700

    [PATCH] ppc64: noexec fixes
    
    There were a few issues with the ppc64 noexec support:
    
    The 64bit ABI has a non executable stack by default.  At the moment 64bit apps
    require a PT_GNU_STACK section in order to have a non executable stack.
    
    Disable the read implies exec workaround on the 64bit ABI.  The 64bit
    toolchain has never had problems with incorrect mmap permissions (the 32bit
    has, thats why we need to retain the workaround).
    
    With these fixes as well as a gcc fix from Alan Modra (that was recently
    committed) 64bit apps work as expected.
    
    Signed-off-by: Anton Blanchard <anton@samba.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit d03853d566fb32c6bb8cab4bf2ecf53e692f001c
Author: Olof Johansson <olof@lixom.net>
Date:   Sun May 1 08:58:45 2005 -0700

    [PATCH] PPC64: Remove hot busy-wait loop in __hash_page
    
    It turns out that our current __hash_page code will do a very hot busy-wait
    loop waiting on _PAGE_BUSY to be cleared.  It even does ldarx/stdcx in the
    loop, which will bounce reservations around like crazy if there's more than
    one CPU spinning on the same PTE (or even another PTE in the same
    reservation granule).  The end result is that each fault takes longer when
    there's contention, which in turn increases the chance of another thread
    hitting the same fault and also piling up.  Not pretty.
    
    There's two options here:
    1. Do an out-of-line busy loop a'la spinlocks with just loads (no
       reserves)
    2. Just bail and refault if needed.
    
    (2) makes sense here: If the PTE is busy, chances are it's in flux anyway
    and the other code path making a change might just be ready to hash it.
    
    This fixes a stampede seen on a large-ish system where a multithreaded
    HPC app faults in the same text pages on several cpus at the same time.
    
    Signed-off-by: Olof Johansson <olof@lixom.net>
    Cc: Paul Mackerras <paulus@samba.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 66faf9845a05905d75da380767e93455f3e6d620
Author: Paul Mackerras <paulus@samba.org>
Date:   Sun May 1 08:58:45 2005 -0700

    [PATCH] ppc64: tell firmware about kernel capabilities
    
    On pSeries systems, according to the platform architecture specs, we are
    supposed to be supplying a structure to firmware that tells firmware about
    our capabilities, such as which version of the data structures that
    describe available memory we are expecting to see.  The way we end up
    having to supply this data structure is a bit gross, since it was designed
    for AIX and doesn't suit us very well.  This patch adds the code to supply
    this data structure to the firmware.
    
    Signed-off-by: Paul Mackerras <paulus@samba.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 58366af5861eee1479426380e3c91ecb334c301d
Author: Benjamin Herrenschmidt <benh@kernel.crashing.org>
Date:   Sun May 1 08:58:44 2005 -0700

    [PATCH] ppc64: update to use the new 4L headers
    
    This patch converts ppc64 to use the generic pgtable-nopud.h instead of the
    "fixup" header.
    
    Signed-off-by: Benjamin Herrenschmidt <benh@kernel.crashing.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 0339ad77c4a06fa8529db17c91f790058e18b65b
Author: akpm@osdl.org <akpm@osdl.org>
Date:   Sun May 1 08:58:44 2005 -0700

    [PATCH] ppc64: nvram cleanups
    
    - Fix
    
      arch/ppc64/kernel/nvram.c:342: warning: `part' might be used uninitialized in this function
    
    - Various codingstyle tweaks.
    
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit dc3ec7503e693e05c01d85b664482d0f694429ab
Author: Paul Mackerras <paulus@samba.org>
Date:   Sun May 1 08:58:44 2005 -0700

    [PATCH] ppc64: Fix irq parsing on powermac
    
    When I tried Ben's patches to the powermac sound driver on my G5, I found
    that it was taking enormous numbers of sound DMA transmit interrupts.  This
    turned out to be because it was incorrectly configured as level-sensitive
    instead of edge-sensitive, which in turn was because the code that parses
    the interrupt tree that Open Firmware gives us was incorrectly assigning
    another device the same irq number as the sound DMA transmit interrupt
    (i.e.  1).
    
    This patch fixes the problem, in a somewhat quick and dirty way for now,
    but one which will work for all the machines we currently run on.
    Ultimately Ben and I want to do something more general and robust, but this
    should go in for 2.6.12.
    
    Signed-off-by: Paul Mackerras <paulus@samba.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit bb78cb72201985ae9269b723c82ea0f892048b9e
Author: Olof Johansson <olof@austin.ibm.com>
Date:   Sun May 1 08:58:44 2005 -0700

    [PATCH] ppc64: remove unused argument to create_slbe
    
    Remove vsid argument to create_slbe, since it's no longer used.
    
    Spotted by R Sharada.
    
    Signed-off-by: Olof Johansson <olof@austin.ibm.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 1b29f9d13e3cf0fe86bf7f82a3399c9e3caf58e5
Author: Benjamin Herrenschmidt <benh@kernel.crashing.org>
Date:   Sun May 1 08:58:43 2005 -0700

    [PATCH] ppc64: add PT_NOTE section to vDSO
    
    This patch from Roland adds a PT_NOTE section to both 32 and 64 bits vDSOs
    to expose the kernel version to glibc, thus avoiding a uname syscall on
    every launch.  This is equivalent to the patches Roland posted already for
    x86 and x86-64.
    
    Note: the 64 bits .note is actually using the 32 bits format.  This is
    normal.  The ELF spec specifies a different format for 64 bits .note, but
    for some reason, this was never properly implemented, the core dumps for
    example are all using 32 bits format .note, and binutils cannot even read a
    64 bits format .note.  Talking to our toolchain folks, they think we'd
    rather stick to 32 bits format .note everywhere and get the spec fixed some
    day ...
    
    Signed-off-by: Roland McGrath <roland@redhat.com>
    Signed-off-by: Benjamin Herrenschmidt <benh@kernel.crashing.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 085e6fc96bcf239cab8adc600aab2452d75590b1
Author: Colin Leroy <colin@colino.net>
Date:   Sun May 1 08:58:43 2005 -0700

    [PATCH] pmac: save master volume on sleep
    
    Ben's patch that shutdowns master switch and restores it after resume
    ("pmac: Improve sleep code of tumbler driver") isn't enough here on an
    iBook (snapper chip).
    
    The master switch is correctly saved and restored, but somehow
    tumbler_put_master_volume() gets called just after
    tumbler_set_master_volume() and sets mix->master_vol[*] to 0.  So, on
    resuming, the master switch is reenabled, but the volume is set to 0.
    
    Here's a patch that also saves and restores master_vol.
    
    Signed-off-by: Colin Leroy <colin@colino.net>
    Cc: Benjamin Herrenschmidt <benh@kernel.crashing.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 1f7b49d042abfbda71f41b8aff6e1bf7685c1f00
Author: Benjamin Herrenschmidt <benh@kernel.crashing.org>
Date:   Sun May 1 08:58:43 2005 -0700

    [PATCH] ppc32: add sound support for Mac Mini
    
    This patch applies on top of my previous g5 related sound patches and adds
    support for the Mac Mini to the PowerMac Alsa driver.
    
    However, I haven't found any kind of HW support for volume control on this
    machine.  If it exist, it's well hidden.  That means that you probably want
    to make sure you use software with the ability to do soft volume control,
    or use Alsa 0.9 pre-release with the softvol plugin.
    
    Signed-off-by: Benjamin Herrenschmidt <benh@kernel.crashing.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 4be8dc7ff69182610b40a078b9815bcdf27e0c49
Author: Benjamin Herrenschmidt <benh@kernel.crashing.org>
Date:   Sun May 1 08:58:43 2005 -0700

    [PATCH] ppc64: improve g5 sound headphone mute
    
    This patch fixes a couple more issues with the management of the GPIOs
    dealing with headphone and line out mute on the G5.  It should fix the
    remaining problems of people not getting any sound out of the headphone
    jack.
    
    Signed-off-by: Benjamin Herrenschmidt <benh@kernel.crashing.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 1bdacf88ebd7969fecbbf4c5b388cc094871222e
Author: Dan Malek <dan@embeddededge.com>
Date:   Sun May 1 08:58:42 2005 -0700

    [PATCH] ppc32: workaround for spurious IRQs on PQ2
    
    There is a problem with large amounts of spurious IRQs on PowerPC 82xx
    systems.
    
    The problem is corrected by adding sync at the end of cpm2_mask_and_ack.
    This may be needed on 8xx as well but has not yet been confirmed.
    
    Signed-off-by: Eugene Surovegin <ebs@ebshome.net>
    Signed-off-by: Dan Malek <dan@embeddedalley.com>
    Cc: Benjamin Herrenschmidt <benh@kernel.crashing.org>
    Cc: Paul Mackerras <paulus@samba.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit d5812a77e5803468a5033be91af978be0f7a17d9
Author: Paul Mackerras <paulus@samba.org>
Date:   Sun May 1 08:58:42 2005 -0700

    [PATCH] ppc32: Fix address checking on lmw/stmw align exception
    
    The handling of misaligned load/store multiple instructions did not check
    to see if the address was ok to access before using __{get,put}_user().
    
    Signed-off-by: Kumar Gala <kumar.gala@freescale.com>
    Signed-off-by: Paul Mackerras <paulus@samba.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit b20cc8aff258eea5a2339107605ebea949fa6ecf
Author: Benjamin Herrenschmidt <benh@kernel.crashing.org>
Date:   Sun May 1 08:58:42 2005 -0700

    [PATCH] ppc32: Fix a sleep issues on some laptops
    
    Some earlier models of aluminium powerbooks and ibook G4s have a clock chip
    that requires some tweaking before and after sleep.  It seems that without
    that magic incantation to disable and re-enable clock spreading, RAM isn't
    properly refreshed during sleep.  This fixes it.
    
    Signed-off-by: Benjamin Herrenschmidt <benh@kernel.crashing.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 146a4b3bdfb5641bfbf975e29680b482b8b343ba
Author: Andreas Jaggi <andreas.jaggi@waterwave.ch>
Date:   Sun May 1 08:58:41 2005 -0700

    [PATCH] macintosh/adbhid.c: adb buttons support for aluminium PowerBook G4
    
    This patch adds support for the special adb buttons of the aluminium
    PowerBook G4.
    
    Signed-off-by: Andreas Jaggi <andreas.jaggi@waterwave.ch>
    Cc: Benjamin Herrenschmidt <benh@kernel.crashing.org>
    Cc: Paul Mackerras <paulus@samba.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 616299afcebfb2228f45a95aac7e63704c3733fc
Author: Benjamin Herrenschmidt <benh@kernel.crashing.org>
Date:   Sun May 1 08:58:41 2005 -0700

    [PATCH] ppc32: Fix IDE related crash on wakeup
    
    I noticed an occasional crash on wakeup from sleep on my powerbook
    (strangly never happened before, probably timing related) that appears to
    be due to a dangling interrupt while the chip is put to sleep and beeing
    reset on wakeup.
    
    This patch fixes is by disabling the irq in the ide pmac driver while
    asleep and only re-enable it after the chip has been fully reset.  This is
    safe to do so as the interrupt of these apple IDE cells is never shared.
    
    Signed-off-by: Benjamin Herrenschmidt <benh@kernel.crashing.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit a497aa20e5ea54fdee474192d6dc138b4832fc9e
Author: Chris Elston <chris.elston@radstone.co.uk>
Date:   Sun May 1 08:58:41 2005 -0700

    [PATCH] ppc32: add rtc hooks in PPC7D platform file
    
    This patch adds the hooks into the PPC7D platforms file to support the DS1337
    RTC device as the clock device for the PPC7D board.
    
    Signed-off-by: Chris Elston <chris.elston@radstone.co.uk>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 630710e3f72b6a324a525f6e5db3f7985d0fc4a2
Author: Chris Elston <chris.elston@radstone.co.uk>
Date:   Sun May 1 08:58:40 2005 -0700

    [PATCH] ppc32: fix for misreported SDRAM size on Radstone PPC7D platform
    
    This patch fixes the SDRAM output from /proc/cpuinfo.  The previous code
    assumed that there was only one bank of SDRAM, and that the size in the memory
    configuration register was the total size.
    
    Signed-off-by: Chris Elston <chris.elston@radstone.co.uk>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 443a848cd30eb5bb5c1038e6371d83404775dcfc
Author: Paul Mackerras <paulus@samba.org>
Date:   Sun May 1 08:58:40 2005 -0700

    [PATCH] ppc32: refactor FPU exception handling
    
    Moved common FPU exception handling code out of head.S so it can be used by
    several of the sub-architectures that might of a full PowerPC FPU.
    
    Also, uses new CONFIG_PPC_FPU define to fix alignment exception handling
    for floating point load/store instructions to only occur if we have a
    hardware FPU.
    
    Signed-off-by: Jason McMullan <jason.mcmullan@timesys.com>
    Signed-off-by: Kumar Gala <kumar.gala@freescale.com>
    Signed-off-by: Paul Mackerras <paulus@samba.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit f1c55dea0bb2df94aa2b01b0871cb02f2e206676
Author: Benjamin Herrenschmidt <benh@kernel.crashing.org>
Date:   Sun May 1 08:58:40 2005 -0700

    [PATCH] ppc32: Fix errata for some G3 CPUs
    
    Some G3 CPUs can crash in funny way if a store from an FPU register
    instruction is executed on a register that has never been initialized since
    power on.  This patch fixes it by making sure all FP registers have been
    properly initialized at kernel boot and when waking from sleep.  It also makes
    the code that decides wether HID0_BTIC and HID0_DPM are allowed on a given CPU
    smarter (it can actually _clear_ them now if they are not allowed instead of
    just setting them when they are allowed in case the firmware got them wrong)
    
    Signed-off-by: Benjamin Herrenschmidt <benh@kernel.crashing.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit b207a290ea7dc83dba02e40b81cc8a29415a9c60
Author: James Morris <jmorris@redhat.com>
Date:   Sun May 1 08:58:40 2005 -0700

    [PATCH] SELinux: add finer grained permissions to Netlink audit processing
    
    This patch provides finer grained permissions for the audit family of
    Netlink sockets under SELinux.
    
    1.  We need a way to differentiate between privileged and unprivileged
       reads of kernel data maintained by the audit subsystem.  The AUDIT_GET
       operation is unprivileged: it returns the current status of the audit
       subsystem (e.g.  whether it's enabled etc.).  The AUDIT_LIST operation
       however returns a list of the current audit ruleset, which is considered
       privileged by the audit folk.  To deal with this, a new SELinux
       permission has been implemented and applied to the operation:
       nlmsg_readpriv, which can be allocated to appropriately privileged
       domains.  Unprivileged domains would only be allocated nlmsg_read.
    
    2.  There is a requirement for certain domains to generate audit events
       from userspace.  These events need to be collected by the kernel,
       collated and transmitted sequentially back to the audit daemon.  An
       example is user level login, an auditable event under CAPP, where
       login-related domains generate AUDIT_USER messages via PAM which are
       relayed back to auditd via the kernel.  To prevent handing out
       nlmsg_write permissions to such domains, a new permission has been
       added, nlmsg_relay, which is intended for this type of purpose: data is
       passed via the kernel back to userspace but no privileged information is
       written to the kernel.
    
    Also, AUDIT_LOGIN messages are now valid only for kernel->user messaging,
    so this value has been removed from the SELinux nlmsgtab (which is only
    used to check user->kernel messages).
    
    Signed-off-by: James Morris <jmorris@redhat.com>
    Signed-off-by: Stephen Smalley <sds@tycho.nsa.gov>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 6af963f1d6789ef20abca5696cd52a758b396e52
Author: Stephen Smalley <sds@tycho.nsa.gov>
Date:   Sun May 1 08:58:39 2005 -0700

    [PATCH] SELinux: cleanup ipc_has_perm
    
    This patch removes the sclass argument from ipc_has_perm in the SELinux
    module, as it can be obtained from the ipc security structure.  The use of
    a separate argument was a legacy of the older precondition function
    handling in SELinux and is obsolete.  Please apply.
    
    Signed-off-by: Stephen Smalley <sds@tycho.nsa.gov>
    Signed-off-by: James Morris <jmorris@redhat.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit de7d5a3b6c9ff8429bf046c36b56d3192b75c3da
Author: akpm@osdl.org <akpm@osdl.org>
Date:   Sun May 1 08:58:39 2005 -0700

    [PATCH] drop_buffers() oops fix
    
    In rare situations, drop_buffers() can be called for a page which has buffers,
    but no ->mapping (it was truncated, but the buffers were left behind because
    ext3 was still fiddling with them).
    
    But if there was an I/O error in a buffer_head, drop_buffers() will try to get
    at the address_space and will oops.
    
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 552fca4cbe552520d85b21e839f289c880fa48d2
Author: Nikita Danilov <nikita@clusterfs.com>
Date:   Sun May 1 08:58:39 2005 -0700

    [PATCH] mpage_writepages() page locking fix
    
    When ->writepage() returns WRITEPAGE_ACTIVATE, the page is still locked.
    Explicitly unlock the page in mpage_writepages().
    
    Signed-off-by: Nikita Danilov <nikita@clusterfs.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 97e2bde47f886a317909c8a8f9bd2fcd8ce2f0b0
Author: Manfred Spraul <manfred@dbl.q-ag.de>
Date:   Sun May 1 08:58:38 2005 -0700

    [PATCH] add kmalloc_node, inline cleanup
    
    The patch makes the following function calls available to allocate memory
    on a specific node without changing the basic operation of the slab
    allocator:
    
     kmem_cache_alloc_node(kmem_cache_t *cachep, unsigned int flags, int node);
     kmalloc_node(size_t size, unsigned int flags, int node);
    
    in a similar way to the existing node-blind functions:
    
     kmem_cache_alloc(kmem_cache_t *cachep, unsigned int flags);
     kmalloc(size, flags);
    
    kmem_cache_alloc_node was changed to pass flags and the node information
    through the existing layers of the slab allocator (which lead to some minor
    rearrangements).  The functions at the lowest layer (kmem_getpages,
    cache_grow) are already node aware.  Also __alloc_percpu can call
    kmalloc_node now.
    
    Performance measurements (using the pageset localization patch) yields:
    
    w/o patches:
    Tasks    jobs/min  jti  jobs/min/task      real       cpu
        1      484.27  100       484.2736     12.02      1.97   Wed Mar 30 20:50:43 2005
      100    25170.83   91       251.7083     23.12    150.10   Wed Mar 30 20:51:06 2005
      200    34601.66   84       173.0083     33.64    294.14   Wed Mar 30 20:51:40 2005
      300    37154.47   86       123.8482     46.99    436.56   Wed Mar 30 20:52:28 2005
      400    39839.82   80        99.5995     58.43    580.46   Wed Mar 30 20:53:27 2005
      500    40036.32   79        80.0726     72.68    728.60   Wed Mar 30 20:54:40 2005
      600    44074.21   79        73.4570     79.23    872.10   Wed Mar 30 20:55:59 2005
      700    44016.60   78        62.8809     92.56   1015.84   Wed Mar 30 20:57:32 2005
      800    40411.05   80        50.5138    115.22   1161.13   Wed Mar 30 20:59:28 2005
      900    42298.56   79        46.9984    123.83   1303.42   Wed Mar 30 21:01:33 2005
     1000    40955.05   80        40.9551    142.11   1441.92   Wed Mar 30 21:03:55 2005
    
    with pageset localization and slab API patches:
    Tasks    jobs/min  jti  jobs/min/task      real       cpu
        1      484.19  100       484.1930     12.02      1.98   Wed Mar 30 21:10:18 2005
      100    27428.25   92       274.2825     21.22    149.79   Wed Mar 30 21:10:40 2005
      200    37228.94   86       186.1447     31.27    293.49   Wed Mar 30 21:11:12 2005
      300    41725.42   85       139.0847     41.84    434.10   Wed Mar 30 21:11:54 2005
      400    43032.22   82       107.5805     54.10    582.06   Wed Mar 30 21:12:48 2005
      500    42211.23   83        84.4225     68.94    722.61   Wed Mar 30 21:13:58 2005
      600    40084.49   82        66.8075     87.12    873.11   Wed Mar 30 21:15:25 2005
      700    44169.30   79        63.0990     92.24   1008.77   Wed Mar 30 21:16:58 2005
      800    43097.94   79        53.8724    108.03   1155.88   Wed Mar 30 21:18:47 2005
      900    41846.75   79        46.4964    125.17   1303.38   Wed Mar 30 21:20:52 2005
     1000    40247.85   79        40.2478    144.60   1442.21   Wed Mar 30 21:23:17 2005
    
    Signed-off-by: Christoph Lameter <christoph@lameter.com>
    Signed-off-by: Manfred Spraul <manfred@colorfullife.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit dd1d5afca8d3bda7ff9db773fc08e648d2503dc6
Author: William Lee Irwin III <wli@holomorphy.com>
Date:   Sun May 1 08:58:38 2005 -0700

    [PATCH] sync_page() smp_mb() comment
    
    The smp_mb() is becaus sync_page() doesn't have PG_locked while it accesses
    page_mapping(page).  The comments in the patch (the entire patch is the
    addition of this comment) try to explain further how and why smp_mb() is
    used.
    
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 93ea1d0a12623dc1a693642b5758261f35f9bf96
Author: Chris Wright <chrisw@osdl.org>
Date:   Sun May 1 08:58:38 2005 -0700

    [PATCH] RLIMIT_MEMLOCK checking fix
    
    Always use page counts when doing RLIMIT_MEMLOCK checking to avoid possible
    overflow.
    
    Signed-off-by: Chris Wright <chrisw@osdl.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit edfbe2b0038723e5699ab22695ccd62b5542a5c1
Author: KAMEZAWA Hiroyuki <kamezawa.hiroyu@jp.fujitsu.com>
Date:   Sun May 1 08:58:37 2005 -0700

    [PATCH] count bounce buffer pages in vmstat
    
    This is a patch for counting the number of pages for bounce buffers.  It's
    shown in /proc/vmstat.
    
    Currently, the number of bounce pages are not counted anywhere.  So, if
    there are many bounce pages, it seems that there are leaked pages.  And
    it's difficult for a user to imagine the usage of bounce pages.  So, it's
    meaningful to show # of bouce pages.
    
    Signed-off-by: KAMEZAWA Hiroyuki <kamezawa.hiroyu@jp.fujitsu.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 2054606ad6dd6fee559fe790f190b15ed9355237
Author: Nikita Danilov <nikita@clusterfs.com>
Date:   Sun May 1 08:58:37 2005 -0700

    [PATCH] doc: Locking update
    
    Make the Locking document truer.
    
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit bd53b714d32a29bdf33009f812e295667e92b930
Author: Nick Piggin <nickpiggin@yahoo.com.au>
Date:   Sun May 1 08:58:37 2005 -0700

    [PATCH] mm: use __GFP_NOMEMALLOC
    
    Use the new __GFP_NOMEMALLOC to simplify the previous handling of
    PF_MEMALLOC.
    
    Signed-off-by: Nick Piggin <nickpiggin@yahoo.com.au>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 20a77776c24800d1e40a73f520cfcb32239568a9
Author: Nick Piggin <nickpiggin@yahoo.com.au>
Date:   Sun May 1 08:58:37 2005 -0700

    [PATCH] mempool: simplify alloc
    
    Mempool is pretty clever.  Looks too clever for its own good :) It
    shouldn't really know so much about page reclaim internals.
    
    - don't guess about what effective page reclaim might involve.
    
    - don't randomly flush out all dirty data if some unlikely thing
      happens (alloc returns NULL). page reclaim can (sort of :P) handle
      it.
    
    I think the main motivation is trying to avoid pool->lock at all costs.
    However the first allocation is attempted with __GFP_WAIT cleared, so it
    will be 'can_try_harder' if it hits the page allocator.  So if allocation
    still fails, then we can probably afford to hit the pool->lock - and what's
    the alternative?  Try page reclaim and hit zone->lru_lock?
    
    A nice upshot is that we don't need to do any fancy memory barriers or do
    (intentionally) racy access to pool-> fields outside the lock.
    
    Signed-off-by: Nick Piggin <nickpiggin@yahoo.com.au>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit b84a35be0285229b0a8a5e2e04d79360c5b75562
Author: Nick Piggin <nickpiggin@yahoo.com.au>
Date:   Sun May 1 08:58:36 2005 -0700

    [PATCH] mempool: NOMEMALLOC and NORETRY
    
    Mempools have 2 problems.
    
    The first is that mempool_alloc can possibly get stuck in __alloc_pages
    when they should opt to fail, and take an element from their reserved pool.
    
    The second is that it will happily eat emergency PF_MEMALLOC reserves
    instead of going to their reserved pools.
    
    Fix the first by passing __GFP_NORETRY in the allocation calls in
    mempool_alloc.  Fix the second by introducing a __GFP_MEMPOOL flag which
    directs the page allocator not to allocate from the reserve pool.
    
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 8e30f272a93ec9c1d5c305c5040dfaebc880499d
Author: Nick Piggin <nickpiggin@yahoo.com.au>
Date:   Sun May 1 08:58:36 2005 -0700

    [PATCH] mm: pcp use non powers of 2 for batch size
    
    Jack Steiner reported this to have fixed his problem (bad colouring):
    "The patches fix both problems that I found - bad
     coloring & excessive pages in pagesets."
    
    In most workloads this is not likely to be such a pronounced problem,
    however it should help corner cases.  And avoiding powers of 2 in these
    types of memory operations is always a good idea.
    
    Signed-off-by: Nick Piggin <nickpiggin@yahoo.com.au>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 81b4082dc7666e2bc5ec229d8e837f3bafb96883
Author: Nikita Danilov <nikita@clusterfs.com>
Date:   Sun May 1 08:58:36 2005 -0700

    [PATCH] mm: rmap.c cleanup
    
    mm/rmap.c:page_referenced_one() and mm/rmap.c:try_to_unmap_one() contain
    identical code that
    
     - takes mm->page_table_lock;
    
     - drills through page tables;
    
     - checks that correct pte is reached.
    
    Coalesce this into page_check_address()
    
    Signed-off-by: Nikita Danilov <nikita@clusterfs.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 119f657c72fc07d6fd28c61de59cfba1566970a9
Author: akpm@osdl.org <akpm@osdl.org>
Date:   Sun May 1 08:58:35 2005 -0700

    [PATCH] RLIMIT_AS checking fix
    
    Address bug #4508: there's potential for wraparound in the various places
    where we perform RLIMIT_AS checking.
    
    (I'm a bit worried about acct_stack_growth().  Are we sure that vma->vm_mm is
    always equal to current->mm?  If not, then we're comparing some other
    process's total_vm with the calling process's rlimits).
    
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit f021e9210185b46e41ec3a0e78ec1621e168eacb
Author: akpm@osdl.org <akpm@osdl.org>
Date:   Sun May 1 08:58:35 2005 -0700

    [PATCH] generic_file_buffered_write fixes
    
    Anton Altaparmakov <aia21@cam.ac.uk> points out:
    
    - It calls fault_in_pages_readable() which is completely bogus if @nr_segs >
      1.  It needs to be replaced by a to be written
      "fault_in_pages_readable_iovec()".
    
    - It increments @buf even in the iovec case thus @buf can point to random
      memory really quickly (in the iovec case) and then it calls
      fault_in_pages_readable() on this random memory.
    
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 69aa3f71580990f39e387d96ed1001d2f5fb04b1
Author: akpm@osdl.org <akpm@osdl.org>
Date:   Sun May 1 08:58:35 2005 -0700

    [PATCH] ultrastor build fix
    
    Fix a typo.
    
    James Bottomley <James.Bottomley@steeleye.com>
    
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit e8e6993178344eb348f60f05b16d9dc30db3b9cf
Author: Sam Ravnborg <sam@ravnborg.org>
Date:   Sat Apr 30 16:51:42 2005 -0700

    [PATCH] kbuild: Set NOSTDINC_FLAGS late to speed up compile (a little)
    
    Move definition of NOSTDINC_FLAGS below inclusion of arch Makefile, so
    any arch specific settings to $(CC) takes effect before looking up the
    compiler include directory.
    
    The previous solution that replaced ':=' with '=' caused gcc to be
    invoked one additional time for each directory visited.
    
    This decreases kernel compile time with 0.1 second (3.6 -> 3.5 seconds) when
    running make on a fully built kernel
    
    Signed-off-by: Sam Ravnborg <sam@ravnborg.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit b3d9ae4b98f6d28481d4d4b768d860a2cfb5805d
Author: Sam Ravnborg <sam@ravnborg.org>
Date:   Sat Apr 30 16:51:42 2005 -0700

    [PATCH] kbuild/ppc: tell when uimage was not built
    
    Tom Rini said:
      Note that there is still a trivial'ish change to make.  When mkimage
      doesn't exist on the host we should say "uImage not made" or
      something similar.
    
    So I did like Tom asked.
    
    Signed-off-by: Sam Ravnborg <sam@ravnborg.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 2cacb3da620a4a93f3a77e1d2c8c06bb3c74bcb0
Author: Sam Ravnborg <sam@ravnborg.org>
Date:   Sat Apr 30 16:51:42 2005 -0700

    [PATCH] kbuild/i386: re-introduce dependency on vmlinux for install target, and add kernel_install
    
    Removing the dependency on vmlinux for the install target raised a few
    complaints, so instead a new target i added: kernel_install.
    
    kernel_install will install the kernel just like the ordinary install target.
    The only difference is that install has a dependency on vmlinux,
    kernel_install does not. Therefore kernel_install is the best choice
    when accessing the kernel over a NFS mount or as another user.
    
    kernel_install is similar to modules_install in the fact that neither does
    a full kernel compile before performing the install.
    In this way they are good for root use. Also added back the
    dependency on vmlinux for the install target so peoples scripts are no
    longer broken.
    
    Signed-off-by: Sam Ravnborg <sam@ravnborg.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 1d651f3332340c232ff66b7f5bab66cb8903859f
Author: Linus Torvalds <torvalds@ppc970.osdl.org>
Date:   Sat Apr 30 15:42:33 2005 -0700

    Merge of master.kernel.org:/home/rmk/linux-2.6-rmk.git

commit 4774e2260cf25c54f2188dd0407676e3af6f1f23
Author: Russell King <rmk@dyn-67.arm.linux.org.uk>
Date:   Sat Apr 30 23:32:38 2005 +0100

    [PATCH] ARM: IntegratorCP: Fix CLCD MUX selection values
    
    The documentation on these values seems to be rather wrong.
    These values have been determined by mere trial and error.
    
    Signed-off-by: Russell King <rmk@arm.linux.org.uk>

commit ed562ab12733ab75437b3390427d41fce9da83c3
Author: Russell King <rmk@dyn-67.arm.linux.org.uk>
Date:   Sat Apr 30 23:28:47 2005 +0100

    [PATCH] ARM: IntegratorCP: 16bpp is RGB565 not RGB555
    
    Signed-off-by: Russell King <rmk@arm.linux.org.uk>

commit 1ddb8a16aa0e60e7fdc48b1f532cf43e692f8fae
Author: Russell King <rmk@dyn-67.arm.linux.org.uk>
Date:   Sat Apr 30 22:39:51 2005 +0100

    [PATCH] ARM: AMBA CLCD: program palette for pseudocolor visuals
    
    Signed-off-by: Russell King <rmk@arm.linux.org.uk>

commit 49e7dc54cd4cbdb439ecc4e06214b0ca1a1a72b4
Author: Linus Torvalds <torvalds@ppc970.osdl.org>
Date:   Sat Apr 30 13:34:21 2005 -0700

    Merge of master.kernel.org:/home/rmk/linux-2.6-rmk.git

commit 9ea1f8f505f6f770bd593e689960ac4f893509b2
Author: Steve French <smfrench@austin.rr.com>
Date:   Sat Apr 30 11:10:58 2005 -0700

    [PATCH] cifs: Update cifs todo list
    
    Signed-off-by: Steve French (sfrench@us.ibm.com)
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 68575476718ed1c6d6ddafeec8310b109e7a7a7f
Author: Steve French <smfrench@austin.rr.com>
Date:   Sat Apr 30 11:10:57 2005 -0700

    [PATCH] cifs: append \* properly on ASCII servers
    
    For older servers which do not support Unicode
    
    Signed-off-by: Steve French (sfrench@us.ibm.com)
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 9747dd6fa98f2983f4dd09cd6dad1fa3d2a4c5f2
Author: Paul Mackerras <paulus@samba.org>
Date:   Sat Apr 30 10:01:40 2005 -0700

    [PATCH] ppc64: fix 32-bit signal frame back link
    
    When the kernel creates a signal frame on the user stack, it puts the
    old stack pointer value at the beginning so that the signal frame is
    linked into the chain of stack frames like any other frame.
    Unfortunately, for 32-bit processes we are writing the old stack
    pointer as a 64-bit value rather than a 32-bit value, and the process
    sees that as a null pointer, since it only looks at the first 32 bits,
    which are zero since ppc is bigendian and the stack pointer is below
    4GB.  This bug is in SLES9 and RHEL4 too, hence the ccs.
    
    This patch fixes the bug by making the signal code write the old stack
    pointer as a u32 instead of an unsigned long.
    
    Signed-off-by: Paul Mackerras <paulus@samba.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit bb9bffcbef6166cf03385fbcde97c27bc1a5e689
Author: Russell King <rmk@dyn-67.arm.linux.org.uk>
Date:   Sat Apr 30 13:26:06 2005 +0100

    [PATCH] ARM: PXA I2C: add platform device
    
    Add the PXA I2C platform device.
    
    Signed-off-by: Russell King <rmk@arm.linux.org.uk>

commit d5aa207e46ff7ee838683a7d95ecf46fe42a9a56
Author: Russell King <rmk@dyn-67.arm.linux.org.uk>
Date:   Sat Apr 30 12:19:28 2005 +0100

    [PATCH] ARM: RTC: allow driver methods to return error
    
    Allow RTC drivers to return error codes from their read_time
    or read_alarm methods.
    
    Signed-off-by: Russell King <rmk@arm.linux.org.uk>

commit 54e0f520e7d94b865e0f5465db976dcc5ffe7190
Author: Andrew Morton <akpm@osdl.org>
Date:   Sat Apr 30 07:07:04 2005 +0100

    netlink audit warning fix
    
    scumbags!
    
    net/netlink/af_netlink.c: In function `netlink_sendmsg':
    net/netlink/af_netlink.c:908: warning: implicit declaration of function `audit_get_loginuid'
    
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: David Woodhouse <dwmw2@infradead.org>

commit a6ad57fb4b5e9d68553f4440377b99f75588fa88
Author: Linus Torvalds <torvalds@ppc970.osdl.org>
Date:   Fri Apr 29 15:08:34 2005 -0700

    Merge of master.kernel.org:/home/rmk/linux-2.6-serial.git

commit dd96a8e056e7b3e480197ff2cdf106b46455d779
Author: Linus Torvalds <torvalds@ppc970.osdl.org>
Date:   Fri Apr 29 15:06:00 2005 -0700

    Merge of master.kernel.org:/home/rmk/linux-2.6-rmk.git

commit 587897f51fac04988de497a553215fdf41e6d5f6
Author: Sascha Hauer <sascha@de.rmk.(none)>
Date:   Fri Apr 29 22:46:40 2005 +0100

    [PATCH] ARM: 2654/1: i.MX UART initialization sets and honors UFCR value
    
    Patch from Sascha Hauer
    
    This patch adds UCFR_RFDIV setting into i.MX serial driver.
    This is required, if loader does not fully agree with Linux kernel
    about UART setup manner. Linux only blindly expected some values until
    now. This should enable to use even serial ports not recognized by
    boot-loader as for example third UART found in the bluethoot module.
    Patch also enables to detect original setup baudrate in more cases.
    
    Signed-off-by: Pavel Pisa
    Signed-off-by: Sascha Hauer
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit 53e173f62c318e65e6ae13524b04c5cf38c1bc3c
Author: Lennert Buytenhek <buytenh@org.rmk.(none)>
Date:   Fri Apr 29 22:13:57 2005 +0100

    [PATCH] ARM: 2660/2: fix ixdp2800 boot and pci init
    
    Patch from Lennert Buytenhek
    
    The IXDP2800 is an evalution platform for the IXP2800 processor that
    has two IXP2800s connected to the same PCI bus.  This is problematic
    as both CPUs will try to configure the PCI bus as they boot linux.
    Contrary to on the other IXP2000 platforms, the boot loader on the
    IXDP2800 doesn't configure the PCI bus properly, so we do want the
    linux instance on one of the CPUs to do that.
    Making one of the CPUs ignore the PCI bus (and thus act like a pure
    PCI slave device) is not an option because there is a 82559 NIC on
    the PCI bus for each of the CPUs.
    The chosen solution is to have the master CPU configure the PCI bus
    while the slave is kept in a quiescent state, and then to have the
    slave CPU scan the PCI bus (without assigning resources) while the
    master is kept in a quiescent state.  After this ritual, the master
    deletes the slave NIC from its PCI device list, the slave deletes
    the master NIC from its device list, and (almost) all is well.
    There's still one little problem: each of the CPUs has a 1G SDRAM
    BAR, but the IXP2000 only has 512M of outbound PCI memory window.
    We solve this by hand-assigning the master and slave SDRAM BARs to
    a location outside each of the IXP's outbound PCI windows, and by
    having the rest of the BARs autoconfigured in the outbound PCI
    windows, in the range [e0000000..ffffffff], so that there is a 1:1
    pci:phys mapping between them.
    Even with this patch, a number of issues still remain -- just imagine
    what happens if one of the CPUs is rebooted, by watchdog or by hand,
    but the other one isn't.  But those issues are not easily fixable
    given the strange PCI layout of this board and the behavior of the
    boot loader shipped with the platform.
    
    Signed-off-by: Lennert Buytenhek
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit ca315159dfa80a2bfc7d917a717a7ee8d771bdf9
Author: George G. Davis <davis_g@com.rmk.(none)>
Date:   Fri Apr 29 22:08:35 2005 +0100

    [PATCH] ARM: 2656/1: Access permission bits are wrong for kernel XIP sections on ARMv6
    
    Patch from George G. Davis
    
    This patch is required for kernel XIP support on ARMv6 machines.  It ensures that the access permission bits for kernel XIP section descriptors are APX=1 and AP[1:0]=01, which is Kernel read-only/User no access permissions.  Prior to this change, kernel XIP section descriptor access permissions were set to Kernel no access/User no access on ARMv6 machines and the kernel would therefore hang upon entry to userspace when set_fs(USER_DS) was executed.
    
    Signed-off-by: Steve Longerbeam
    Signed-off-by: George G. Davis
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit 05f9869bf20e11bcb9b64b9ebd6a9cf89d6b71ba
Author: Olav Kongas <ok@ee.rmk.(none)>
Date:   Fri Apr 29 22:08:34 2005 +0100

    [PATCH] ARM: 2649/1: Fix 'sparse -Wbitwise' warnings from MMIO macros
    
    Patch from Olav Kongas
    
    On ARM, the outX() and writeX() families of macros take the
    result of cpu_to_leYY(), which is of restricted type __leYY,
    and feed it to __raw_writeX(), which expect an argument of
    unrestricted type. This results in 'sparse -Wbitwise'
    warnings about incorrect types in assignments. Analogous
    type mismatch warnings are issued for inX() and readX()
    counterparts. The below patch resolves these warnings by
    adding forced typecasts.
    
    Signed-off-by: Olav Kongas
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit 2d2669b62984b8d76b05a6a045390a3250317d21
Author: Nicolas Pitre <nico@org.rmk.(none)>
Date:   Fri Apr 29 22:08:33 2005 +0100

    [PATCH] ARM: 2651/3: kernel helpers for NPTL support
    
    Patch from Nicolas Pitre
    
    This patch entirely reworks the kernel assistance for NPTL on ARM.
    In particular this provides an efficient way to retrieve the TLS
    value and perform atomic operations without any instruction emulation
    nor special system call.  This even allows for pre ARMv6 binaries to
    be forward compatible with SMP systems without any penalty.
    The problematic and performance critical operations are performed
    through segment of kernel provided user code reachable from user space
    at a fixed address in kernel memory.  Those fixed entry points are
    within the vector page so we basically get it for free as no extra
    memory page is required and nothing else may be mapped at that
    location anyway.
    This is different from (but doesn't preclude) a full blown VDSO
    implementation, however a VDSO would prevent some assembly tricks with
    constants that allows for efficient branching to those code segments.
    And since those code segments only use a few cycles before returning to
    user code, the overhead of a VDSO far call would add a significant
    overhead to such minimalistic operations.
    The ARM_NR_set_tls syscall also changed number.  This is done for two
    reasons:
    1) this patch changes the way the TLS value was previously meant to be
       retrieved, therefore we ensure whatever library using the old way
       gets fixed (they only exist in private tree at the moment since the
       NPTL work is still progressing).
    2) the previous number was allocated in a range causing an undefined
       instruction trap on kernels not supporting that syscall and it was
       determined that allocating it in a range returning -ENOSYS would be
       much nicer for libraries trying to determine if the feature is
       present or not.
    
    Signed-off-by: Nicolas Pitre
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit 3a1e501511a1e2c665c566939047794dcf86466b
Author: George G. Davis <davis_g@com.rmk.(none)>
Date:   Fri Apr 29 22:08:33 2005 +0100

    [PATCH] ARM: 2655/1: ARM1136 SWP instruction abort handler fix
    
    Patch from George G. Davis
    
    As noted in http://www.arm.com/linux/patch-2.6.9-arm1.gz, the "Faulty SWP instruction on 1136 doesn't set bit 11 in DFSR." So the v6_early_abort handler does not report the correct rd/wr direction for the SWP instruction which may result in SEGVS or hangs. In order to work around this problem, this patch merely updates the fix contained in the ARM Ltd. patch to use the macroised abort handler fixups.
    
    Signed-off-by: George G. Davis
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit 458a83fa43e83505f9401783ce9ed41b5a8b5591
Author: Lennert Buytenhek <buytenh@org.rmk.(none)>
Date:   Fri Apr 29 21:58:16 2005 +0100

    [PATCH] ARM: 2659/1: do not assign PCI I/O address zero on IXP2000
    
    Patch from Lennert Buytenhek
    
    Assigning the address zero to a PCI device BAR causes some part of the
    PCI subsystem to believe that resource allocation for that BAR failed
    due to resource conflicts, which will make attempts to enable the
    device fail.  Work around this by assigning I/O addresses starting
    from 00010000.
    While we're at it, make the PCI I/O resource end at 0001ffff, since we
    only have 64k of outbound I/O window on the IXP2000, and we don't do
    bank switching.
    
    Signed-off-by: Lennert Buytenhek
    Signed-off-by: Deepak Saxena
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit ae36bf5861e1091dd337f0b475e043ab07d4a937
Author: Lennert Buytenhek <buytenh@org.rmk.(none)>
Date:   Fri Apr 29 21:58:15 2005 +0100

    [PATCH] ARM: 2658/1: start ixp2000 pci memory resource at 0xe0000000
    
    Patch from Lennert Buytenhek
    
    On the IXDP2800, the bootloader does an awful job of configuring
    the PCI bus, so we make linux reconfigure everything.  Having a 1:1
    pci:phys address mapping generally simplifies everything, so try to
    allocate PCI addresses from the [e0000000..ffffffff] range, which is
    the physical address range of the outbound PCI window on the IXP2000.
    This does not affect any of the other IXP2000 platforms since they
    all use their bootloader's PCI resource assignment.
    
    Signed-off-by: Lennert Buytenhek
    Signed-off-by: Deepak Saxena
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit 8443b165f13d21214e5d5495eee7c3bf7f2456bf
Author: Lennert Buytenhek <buytenh@org.rmk.(none)>
Date:   Fri Apr 29 21:58:15 2005 +0100

    [PATCH] ARM: 2657/1: export ixp2000_pci_config_addr
    
    Patch from Lennert Buytenhek
    
    Export ixp2000_pci_config_addr, to be used by the IXDP2800 platform
    setup code to coordinate booting the master and slave NPU.
    
    Signed-off-by: Lennert Buytenhek
    Signed-off-by: Deepak Saxena
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit a879cbbb34cbecfa9707fbb6e5a00c503ac1ecb9
Author: Linus Torvalds <torvalds@ppc970.osdl.org>
Date:   Fri Apr 29 09:38:44 2005 -0700

    x86: make traps on 'iret' be debuggable in user space
    
    This makes a trap on the 'iret' that returns us to user space
    cause a nice clean SIGSEGV, instead of just a hard (and silent)
    exit.
    
    That way a debugger can actually try to see what happened, and
    we also properly notify everybody who might be interested about
    us being gone.
    
    This loses the error code, but tells the debugger what happened
    with ILL_BADSTK in the siginfo.

commit c06fec5022ebe014af876da2df4a0eee836e97c8
Author: Linus Torvalds <torvalds@ppc970.osdl.org>
Date:   Fri Apr 29 09:37:07 2005 -0700

    Remove bogus BUG() in kernel/exit.c
    
    It's old sanity checking that may have been useful for debugging, but
    is just bogus these days.
    
    Noticed by Mattia Belletti.

commit 456be6cd90dbbb9b0ea01d56932d56d110d51cf7
Author: Steve Grubb <sgrubb@redhat.com>
Date:   Fri Apr 29 17:30:07 2005 +0100

    [AUDIT] LOGIN message credentials
    
    Attached is a new patch that solves the issue of getting valid credentials 
    into the LOGIN message. The current code was assuming that the audit context 
    had already been copied. This is not always the case for LOGIN messages.
    
    To solve the problem, the patch passes the task struct to the function that 
    emits the message where it can get valid credentials.
    
    Signed-off-by: Steve Grubb <sgrubb@redhat.com>
    Signed-off-by: David Woodhouse <dwmw2@infradead.org>

commit 37509e749dc2072e667db806ef24b9e897f61b8a
Author: Chris Wright <chrisw@osdl.org>
Date:   Fri Apr 29 17:19:14 2005 +0100

    [AUDIT] Requeue messages at head of queue, up to audit_backlog
    
    If netlink_unicast() fails, requeue the skb back at the head of the queue
    it just came from, instead of the tail. And do so unless we've exceeded
    the audit_backlog limit; not according to some other arbitrary limit.
    
    From: Chris Wright <chrisw@osdl.org>
    Signed-off-by: David Woodhouse <dwmw2@infradead.org>

commit c94c257c88c517f251da273a15c654224c7b6e21
Author: Serge Hallyn <serue@us.ibm.com>
Date:   Fri Apr 29 16:27:17 2005 +0100

    Add audit uid to netlink credentials
    
    Most audit control messages are sent over netlink.In order to properly
    log the identity of the sender of audit control messages, we would like
    to add the loginuid to the netlink_creds structure, as per the attached
    patch.
    
    Signed-off-by: Serge Hallyn <serue@us.ibm.com>
    Signed-off-by: David Woodhouse <dwmw2@infradead.org>

commit 85c8721ff3bc96b702427a440616079e8daf8a2f
Author:  <dwmw2@shinybook.infradead.org>
Date:   Fri Apr 29 16:23:29 2005 +0100

    audit: update pointer to userspace tools, remove emacs mode tags

commit 67eb81e1686f44bcf8f005b296213fd2c21b4719
Author: Yoichi Yuasa <yuasa@hh.iij4u.or.jp>
Date:   Fri Apr 29 16:13:35 2005 +0100

    mips: warning fix audit_arch()
    
    arch/mips/kernel/ptrace.c:305: warning: function declaration isn't a prototype
    Signed-off-by: Yoichi Yuasa <yuasa@hh.iij4u.or.jp>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: David Woodhouse <dwmw2@infradead.org>

commit 3ac3ed555bec5b1f92bb22cb94823a0e99d0f320
Author: Amy Griffis <amy.griffis@hp.com>
Date:   Fri Apr 29 16:12:55 2005 +0100

    [PATCH] fix ia64 syscall auditing
    
    Attached is a patch against David's audit.17 kernel that adds checks
    for the TIF_SYSCALL_AUDIT thread flag to the ia64 system call and
    signal handling code paths.The patch enables auditing of system
    calls set up via fsys_bubble_down, as well as ensuring that
    audit_syscall_exit() is called on return from sigreturn.
    
    Neglecting to check for TIF_SYSCALL_AUDIT at these points results in
    incorrect information in audit_context, causing frequent system panics
    when system call auditing is enabled on an ia64 system.
    
    Signed-off-by: Amy Griffis <amy.griffis@hp.com>
    Signed-off-by: David Woodhouse <dwmw2@infradead.org>

commit c7fcb0ee74ef4cfdea02befacb55945c93641e44
Author: Peter Martuccelli <peterm@redhat.com>
Date:   Fri Apr 29 16:10:24 2005 +0100

    [AUDIT] Avoid using %*.*s format strings.
    
    They don't seem to work correctly (investigation ongoing), but we don't
    actually need to do it anyway.
    
    Patch from Peter Martuccelli <peterm@redhat.com>
    Signed-off-by: David Woodhouse <dwmw2@infradead.org>

commit d812ddbb89e323d054a7d073466225966c8350c8
Author: Steve Grubb <sgrubb@redhat.com>
Date:   Fri Apr 29 16:09:52 2005 +0100

    [AUDIT] Fix signedness of 'serial' in various routines.
    
    Attached is a patch that corrects a signed/unsigned warning. I also noticed
    that we needlessly init serial to 0. That only needs to occur if the kernel
    was compiled without the audit system.
    
    -Steve Grubb
    
    Signed-off-by: David Woodhouse <dwmw2@infradead.org>

commit 2fd6f58ba6efc82ea2c9c2630f7ff5ed9eeaf34a
Author:  <dwmw2@shinybook.infradead.org>
Date:   Fri Apr 29 16:08:28 2005 +0100

    [AUDIT] Don't allow ptrace to fool auditing, log arch of audited syscalls.
    
    We were calling ptrace_notify() after auditing the syscall and arguments,
    but the debugger could have _changed_ them before the syscall was actually
    invoked. Reorder the calls to fix that.
    
    While we're touching ever call to audit_syscall_entry(), we also make it
    take an extra argument: the architecture of the syscall which was made,
    because some architectures allow more than one type of syscall.
    
    Also add an explicit success/failure flag to audit_syscall_exit(), for
    the benefit of architectures which return that in a condition register
    rather than only returning a single register.
    
    Change type of syscall return value to 'long' not 'int'.
    
    Signed-off-by: David Woodhouse <dwmw2@infradead.org>

commit ea3834d9fb348fb1144ad3affea22df933eaf62e
Author: Prasanna Meda <pmeda@akamai.com>
Date:   Fri Apr 29 16:00:17 2005 +0100

    namei: add audit_inode to all branches in path_lookup
    
    Main change is in path_lookup: added a goto to do audit_inode
    instead of return statement, when emul_lookup_dentry for root
    is successful.The existing code does audit_inode only when
    lookup is done in normal root or cwd.
    
    Other changes: Some lookup routines are returning zero on success,
    and some are returning zero on failure. I documented the related
    function signatures in this code path, so that one can glance over
    abstract functions without understanding the entire code.
    
    Signed-off-by: Prasanna Meda <pmeda@akamai.com>
    Signed-off-by: David Woodhouse <dwmw2@infradead.org>

commit 81b7854d52d35ed2353dd47033ae630d18322a2d
Author: Andrew Morton <akpm@osdl.org>
Date:   Fri Apr 29 15:59:11 2005 +0100

    audit_log_untrustedstring() warning fix
    
    kernel/audit.c: In function `audit_log_untrustedstring':
    kernel/audit.c:736: warning: comparison is always false due to limited range of data type
    
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: David Woodhouse <dwmw2@infradead.org>

commit 83c7d09173fdb6b06b109e65895392db3e49ac9c
Author:  <dwmw2@shinybook.infradead.org>
Date:   Fri Apr 29 15:54:44 2005 +0100

    AUDIT: Avoid log pollution by untrusted strings.
    
    We log strings from userspace, such as arguments to open(). These could
    be formatted to contain \n followed by fake audit log entries. Provide
    a function for logging such strings, which gives a hex dump when the
    string contains anything but basic printable ASCII characters. Use it
    for logging filenames.
    
    Signed-off-by: David Woodhouse <dwmw2@infradead.org>

commit 42d4dc3f4e1ec1396371aac89d0dccfdd977191b
Author: Benjamin Herrenschmidt <benh@kernel.crashing.org>
Date:   Fri Apr 29 07:40:12 2005 -0700

    [PATCH] Add suspend method to cpufreq core
    
    In order to properly fix some issues with cpufreq vs. sleep on
    PowerBooks, I had to add a suspend callback to the pmac_cpufreq driver.
    I must force a switch to full speed before sleep and I switch back to
    previous speed on resume.
    
    I also added a driver flag to disable the warnings in suspend/resume
    since it is expected in this case to have different speed (and I want it
    to fixup the jiffies properly).
    
    Signed-off-by: Benjamin Herrenschmidt <benh@kernel.crashing.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit c60c390620e0abb60d4ae8c43583714bda27763f
Author: Roland McGrath <roland@redhat.com>
Date:   Thu Apr 28 22:47:29 2005 -0700

    [PATCH] x86_64: fix PT_NOTE addition to IA32 vDSO
    
    The addition of the PT_NOTE didn't take in the x86_64 version of the i386
    vDSO, because I forgot the linker script bit in that copy.
    
    Signed-off-by: Roland McGrath <roland@redhat.com>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 0cb766ae629c70d53040f85de73db0583eadb233
Author: Steve French <smfrench@austin.rr.com>
Date:   Thu Apr 28 22:41:11 2005 -0700

    [PATCH] cifs: Do not sleep interruptible after socket connect failure
    
    .. since it can be due to pending kill.
    
    Update readme information to better describe cifs umount
    
    Signed-off-by: Steve French (sfrench@us.ibm.com)
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 31ca3bc3c569f9fe02aae6974ac3a9126f14902f
Author: Steve French <smfrench@austin.rr.com>
Date:   Thu Apr 28 22:41:11 2005 -0700

    [PATCH] cifs: Do not init smb requests or block when sending requests
    
    if cifsd thread is no longer running to demultixplex responses.
    
    Do not send FindClose request when FindFirst failed without reaching end
    of search. 
    
    Signed-off-by: Steve French (sfrench@us.ibm.com)
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 57337e42f1393941d59d5154eed27a63988ff2be
Author: Steve French <smfrench@austin.rr.com>
Date:   Thu Apr 28 22:41:10 2005 -0700

    [PATCH] cifs: handle termination of cifs oplockd kernel thread
    
    Signed-off-by: Steve French (sfrench@us.ibm.com)
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 11aa0149d0e49ee1791735ec4ae3079b27b9a68e
Author: Steve French <smfrench@austin.rr.com>
Date:   Thu Apr 28 22:41:10 2005 -0700

    [PATCH] cifs: Fix mapping of EMLINK case
    
    Signed-off-by: Steve French (sfrench@us.ibm.com)
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit cd63499cbe37e53e6cc084c8a35d911a4613c797
Author: Steve French <smfrench@austin.rr.com>
Date:   Thu Apr 28 22:41:10 2005 -0700

    [PATCH] cifs: Handle case of multiple trans2 responses for one SMB request (part 2 of 2)
    
    Signed-off-by: Steve French (sfrench@us.ibm.com)
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 275cde1a1f3880601509c851d72c82bb8d3ee67c
Author: Steve French <smfrench@austin.rr.com>
Date:   Thu Apr 28 22:41:10 2005 -0700

    [PATCH] cifs: cleanup various long lines
    
    Signed-off-by: Steve French (sfrench@us.ibm.com)
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit e4eb295d38b57f4d4b956942a48887eb252d97c6
Author: Steve French <smfrench@austin.rr.com>
Date:   Thu Apr 28 22:41:09 2005 -0700

    [PATCH] cifs: Handle multiple response transact2 part 1 of 2
    
    Signed-off-by: Steve French (sfrench@us.ibm.com)
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 46810cbf3d951c1ce8ce3311639996ad43ca4ed1
Author: Steve French <smfrench@austin.rr.com>
Date:   Thu Apr 28 22:41:09 2005 -0700

    [PATCH] cifs: Ease memory pressure, do not use large buffers in byte range lock requests.
    
    Signed-off-by: Steve French (sfrench@us.ibm.com)
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 79944bf71352f33f984ac3973b159b5c2cee139d
Author: Steve French <smfrench@austin.rr.com>
Date:   Thu Apr 28 22:41:09 2005 -0700

    [PATCH] cifs: missing semicolon from previous fix
    
    Signed-off-by: Steve French (sfrench@us.ibm.com)
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 67010fbc6ff889aaf86592bc148d705c5b9e1a27
Author: Steve French <smfrench@austin.rr.com>
Date:   Thu Apr 28 22:41:09 2005 -0700

    [PATCH] cifs: Better handle errors on second socket recv message call
    
    Signed-off-by: Steve French (sfrench@us.ibm.com)
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 09d1db5c6131232f764046160c29118cd4e5e646
Author: Steve French <smfrench@austin.rr.com>
Date:   Thu Apr 28 22:41:08 2005 -0700

    [PATCH] cifs: improve check for search entry going beyond end of SMB transact
    
    Signed-off-by: Steve French (sfrench@us.ibm.com)
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 966ca9234754ece58870075972ef103e354de075
Author: Steve French <smfrench@austin.rr.com>
Date:   Thu Apr 28 22:41:08 2005 -0700

    [PATCH] cifs: Fix caching problem
    
    pointed out by Dave Stahl and Vince Negri in which cifs can update the
    last modify time on a server modified file without invalidating the
    local cached data due to an intervening readdir. 
    
    Signed-off-by: Steve French (sfrench@us.ibm.com)
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 433dc24f24b409fb130f638aa85470a0eb666206
Author: Steve French <smfrench@austin.rr.com>
Date:   Thu Apr 28 22:41:08 2005 -0700

    [PATCH] cifs: remove cifs_kcalloc and check for NULL return on kcalloc in session initialization
    
    Suggested by: Adrian Bunk and Dave Miller
    
    Signed-off-by: Steve French (sfrench@us.ibm.com)
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 099a58f681ed951434574ec39bdfe87055bafe73
Author: Steve French <smfrench@austin.rr.com>
Date:   Thu Apr 28 22:41:07 2005 -0700

    [PATCH] cifs: Missing initialization for largeBuf flag left out of previous changeset
    
    Signed-off-by: Steve French (sfrench@us.ibm.com)
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit b8643e1b5253a6a51da5574a55a2f9148e255cfd
Author: Steve French <smfrench@austin.rr.com>
Date:   Thu Apr 28 22:41:07 2005 -0700

    [PATCH] cifs: Do not use large smb buffers in response path
    
    unless response is larger than 256 bytes.  This cuts more than 1/3 of
    the large memory allocations that cifs does and should be a huge help to
    memory pressure under stress. 
    
    Signed-off-by: Steve French (sfrench@us.ibm.com)
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit c81156dd217818c143a09b6a744e797a04571e99
Author: Steve French <smfrench@austin.rr.com>
Date:   Thu Apr 28 22:41:07 2005 -0700

    [PATCH] cifs: cleanup of ifdefs usage so it is more consistent
    
    And fix to not needlessly send new POSIX QFSInfo when server does not
    explicitly claim support for the new protocol extensions. 
    
    Signed-off-by: Steve French (sfrench@us.ibm.com)
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit f28ac91b0541a49d5bc7bfb9f0efd5289a7dd181
Author: Steve French <smfrench@austin.rr.com>
Date:   Thu Apr 28 22:41:07 2005 -0700

    [PATCH] cifs: CIFS ioctl needed by umount.cifs utility
    
    Signed-off-by: Steve French (sfrench@us.ibm.com)
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 848f3fce45d2ba93e10b5e9d65bcae0d9269ad0d
Author: Steve French <smfrench@austin.rr.com>
Date:   Thu Apr 28 22:41:07 2005 -0700

    [PATCH] cifs: Do not interpret oplock break responses as responses to an unrelated command
    
    .. even if the multiplex ids match.
    
    Signed-off-by: Steve French (sfrench@us.ibm.com)
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit d0724714fd49aeec1383b94807174de7e96021bf
Author: Steve French <smfrench@austin.rr.com>
Date:   Thu Apr 28 22:41:06 2005 -0700

    [PATCH] cifs: Fix PPC64 compile error
    
    .. and do not double endian convert the special characters whem mounted
    with mapchars mount parm. 
    
    Signed-off-by: Steve French (sfrench@us.ibm.com)
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 737b758c965a9b223ac1243ab38d9e507ac86c64
Author: Steve French <smfrench@austin.rr.com>
Date:   Thu Apr 28 22:41:06 2005 -0700

    [PATCH] cifs: character mapping of special characters (part 3 of 3)
    
    Signed-off-by: Steve French (sfrench@us.ibm.com)
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 6c91d362f1e1ebbd4513adb68fc79d552c11e2c0
Author: Steve French <smfrench@austin.rr.com>
Date:   Thu Apr 28 22:41:06 2005 -0700

    [PATCH] cifs: finish up of special character mapping capable unicode conversion routine part 2 of 3
    
    Signed-off-by: Steve French (sfrench@us.ibm.com)
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit d14537f103bf746ca766f739f9f5a5bf7a8b4806
Author: Steve French <smfrench@austin.rr.com>
Date:   Thu Apr 28 22:41:05 2005 -0700

    [PATCH] cifs: remove a few redundant null pointer checks, and cleanup misc source formatting
    
    Mostly suggested by Jesper Juhl
    
    Signed-off-by: Steve French (sfrench@us.ibm.com)
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 6a0b48245a135cd132e747815854e3999967f8a7
Author: Steve French <smfrench@austin.rr.com>
Date:   Thu Apr 28 22:41:05 2005 -0700

    [PATCH] cifs: Add new mount parm mapchars
    
    For handling seven special characters that shells use for filenames.
    
    This first parts implements conversions from Unicode. 
    
    Signed-off-by: Steve French
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit cbe0476fa6a76b01b79e7c117963d45ed0a28758
Author: Steve French <smfrench@austin.rr.com>
Date:   Thu Apr 28 22:41:05 2005 -0700

    [PATCH] cifs: fix rare oops in cifs_close
    
    Protect access to cifs file list in cifs_close path
    
    Signed-off-by: Steve French (sfrench@us.ibm.com)
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit ad009ac96509e005d9978d0ae9e9ec4d63ad2990
Author: Steve French <smfrench@austin.rr.com>
Date:   Thu Apr 28 22:41:05 2005 -0700

    [PATCH] cifs: Fix multiuser packet signing to use the right sequence number and mac session key
    
    Signed-off-by: Steve French (sfrench@us.ibm.com)
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit c67593a03129967eae8939c4899767182eb6d6cd
Author: Steve French <smfrench@austin.rr.com>
Date:   Thu Apr 28 22:41:04 2005 -0700

    [PATCH] cifs: Enable ioctl support in POSIX extensions to handle lsattr
    
    remove sparse warnings, unnecessary pad in QueryFileInfo and redundant
    function define.
    
    Signed-off-by: Steve French (sfrench@us.ibm.com)
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 75cf6bdc52d86ca815f1129529e43f0d904b18d5
Author: Steve French <smfrench@austin.rr.com>
Date:   Thu Apr 28 22:41:04 2005 -0700

    [PATCH] cifs: Gracefully turn off serverino (when serverino is enabled on mount)
    
    Old servers such as NT4 do not support this level of FindFirst (and
    retry with a lower infolevel)
    
    Signed-off-by: Steve French (sfrench@us.ibm.com)
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit f654bac2227adc5c6956405290eeb4f81f09e9ff
Author: Steve French <smfrench@austin.rr.com>
Date:   Thu Apr 28 22:41:04 2005 -0700

    [PATCH] cifs: add support for chattr/lsattr in new CIFS POSIX extensions
    
    Signed-off-by: Steve French (sfrench@us.ibm.com)
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 1da0c78b32abe122a959d2a57ba3d41563d8e39f
Author: Steve French <smfrench@austin.rr.com>
Date:   Thu Apr 28 22:41:04 2005 -0700

    [PATCH] cifs: Only send POSIX ACL calls to server if server claims to support that capability bit
    
    Signed-off-by: Steve French (sfrench@us.ibm.com)
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 2604f6da1afb56fae5930b58349e43a2b0345933
Author: Linus Torvalds <torvalds@ppc970.osdl.org>
Date:   Thu Apr 28 16:09:57 2005 -0700

    Automatic merge of master.kernel.org:/home/rmk/linux-2.6-rmk.git

commit 18c8baff8fe151ea02e00047afc369ee31939e9b
Author: Roland McGrath <roland@redhat.com>
Date:   Thu Apr 28 15:17:19 2005 -0700

    [PATCH] Fix error recovery path for arch_setup_additional_pages
    
    If arch_setup_additional_pages fails, the error path will do some double-frees.
    This fixes it.
    
    Signed-off-by: Roland McGrath <roland@redhat.com>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 5bec0039f4ac8d707d7afe7739cc2e7004447e38
Author: Olaf Rempel <razzor@kopf-tisch.de>
Date:   Thu Apr 28 12:16:08 2005 -0700

    [NET]: /proc/net/stat/* header cleanup
    
    Signed-off-by: Olaf Rempel <razzor@kopf-tisch.de>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 7b3c63ac7cb5e2e6680727045aa35c2e5f1bace7
Author: Nicolas Dichtel <nicolas.dichtel@6wind.com>
Date:   Thu Apr 28 12:14:37 2005 -0700

    [PKT_SCHED]: Fix range in psched_tod_diff() to 0..bound
    
    Signed-off-by: Nicolas Dichtel <nicolas.dichtel@6wind.com>
    Signed-off-by: Thomas Graf <tgraf@suug.ch>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 89c8b3a11086a2a43ac4240116da77b707f37fbf
Author: Dave Jones <davej@redhat.com>
Date:   Thu Apr 28 12:11:49 2005 -0700

    [IPV6]: Incorrect permissions on route flush sysctl
    
    On Mon, Apr 25, 2005 at 12:01:13PM -0400, Dave Jones wrote:
     > This has been brought up before.. http://lkml.org/lkml/2000/1/21/116
     > but didnt seem to get resolved.  This morning I got someone
     > file a bugzilla about it breaking sysctl(8).
    
    And here's its ipv6 counterpart.
    
    Signed-off-by: Dave Jones <davej@redhat.com>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 7e3e0360b711568fb8ba5973accf51d51e746abc
Author: Dave Jones <davej@redhat.com>
Date:   Thu Apr 28 12:11:03 2005 -0700

    [IPV4]: Incorrect permissions on route flush sysctl
    
    This has been brought up before.. http://lkml.org/lkml/2000/1/21/116
    but didnt seem to get resolved.  This morning I got someone
    file a bugzilla about it breaking sysctl(8).
    
    Signed-off-by: Dave Jones <davej@redhat.com>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 4eb701dfc618491c9b97377df6e61de36dfc39ce
Author: Neil Horman <nhorman@redhat.com>
Date:   Thu Apr 28 12:02:04 2005 -0700

    [SCTP] Fix SCTP sendbuffer accouting.
    
    - Include chunk and skb sizes in sendbuffer accounting.
    - 2 policies are supported. 0: per socket accouting, 1: per association
      accounting
    
    DaveM: I've made the default per-socket.
    
    Signed-off-by: Neil Horman <nhorman@redhat.com>
    Signed-off-by: Sridhar Samudrala <sri@us.ibm.com>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 594ccc14dfe4d61b476491758425a1c2ca4ec71b
Author: Sridhar Samudrala <sri@us.ibm.com>
Date:   Thu Apr 28 12:00:23 2005 -0700

    [SCTP] Replace incorrect use of dev_alloc_skb with alloc_skb in sctp_packet_transmit().
    
    Signed-off-by: Sridhar Samudrala <sri@us.ibm.com>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 5e6bc34f86e450ff14c4817902d66aa9c786bc06
Author: Neil Horman <nhorman@redhat.com>
Date:   Thu Apr 28 11:59:49 2005 -0700

    [SCTP] Fix bug in sctp_init() error handling code.
    
    Signed-off-by: Neil Horman <nhorman@redhat.com>
    Signed-off-by: Sridhar Samudrala <sri@us.ibm.com>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit b9b9e10f180fa63b55b93412edf0ab9648675646
Author: Brian Haley <Brian.Haley@hp.com>
Date:   Thu Apr 28 11:59:16 2005 -0700

    [SCTP] Use ipv6_addr_any() rather than ipv6_addr_type() in sctp_v6_is_any().
    
    Signed-off-by: Brian Haley <Brian.Haley@hp.com>
    Signed-off-by: Sridhar Samudrala <sri@us.ibm.com>
    Signed-off-by: David S. Miller <davem@davemloft.net>
    

commit 047a2428a14216a83980ed26b6a59b3ca40a1fb0
Author: Jerome Forissier <jerome.forissier@hp.com>
Date:   Thu Apr 28 11:58:43 2005 -0700

    [SCTP] Implement Sec 2.41 of SCTP Implementers guide.
    
    - Fixed sctp_vtag_verify_either() to comply with impguide 2.41 B) and C).
    - Make sure vtag is reflected when T-bit is set in SHUTDOWN-COMPLETE sent
      due to an OOTB SHUTDOWN-ACK and in ABORT sent due to an OOTB packet.
    - Do not set T-Bit in ABORT chunk in response to INIT.
    - Fixed some comments to reflect the new meaning of the T-Bit.
    
    Signed-off-by: Jerome Forissier <jerome.forissier@hp.com>
    Signed-off-by: Sridhar Samudrala <sri@us.ibm.com>
    Signed-off-by: David S. Miller <davem@davemloft.net>
    

commit 173372162ddbd414cc471c1a3a52ad7ea279aaf4
Author: Vladislav Yasevich <vladislav.yasevich@hp.com>
Date:   Thu Apr 28 11:57:54 2005 -0700

    [SCTP] Fix SCTP_ASSOCINFO getsockopt for 1-1 style
    
    Signed-off-by: Vladislav Yasevich <vladislav.yasevich@hp.com>
    Signed-off-by: Sridhar Samudrala <sri@us.ibm.com>
    Signed-off-by: David S. Miller <davem@davemloft.net>
    

commit f4d0ee983ec01e59a77e157ab702246f397b2a2b
Author: David S. Miller <davem@sunset.davemloft.net>
Date:   Thu Apr 28 11:33:20 2005 -0700

    [TG3]: Set SA_SAMPLE_RANDOM in request_irq() calls.
    
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 9acf6597c533f3d5c991f730c6a1be296679018e
Author: Christoph Lameter <clameter@engr.sgi.com>
Date:   Thu Apr 28 08:13:58 2005 -0700

    [PATCH] time interpolator: Fix settimeofday inaccuracy
    
    settimeofday will set the time a little bit too early on systems using
    time interpolation since it subtracts the current interpolator offset
    from the time. This used to be necessary with the code in 2.6.9 and earlier
    but the new code resets the time interpolator after setting the time.
    Thus the time is set too early and gettimeofday will return a time slightly
    before the time specified with settimeofday if invoked immeditely after
    settimeofday.
    
    This removes the obsolete subtraction of the time interpolator offset
    and makes settimeofday set the time accurately. 
    
    Signed-off-by: Christoph Lameter <clameter@sgi.com>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 0f7ad450394560a6b6c72115e04bf7afd6230e70
Author: Russell King <rmk@dyn-67.arm.linux.org.uk>
Date:   Thu Apr 28 10:46:15 2005 +0100

    [PATCH] ARM: AMBA CLCD: X resolutions must be multiples of 16
    
    We ignore the bottom 4 bits of the X resolution, so we should
    round X resolutions up to the nearest multiple of 16.
    
    Signed-off-by: Russell King <rmk@arm.linux.org.uk>

commit 82235e9170f19fa327361ee82a76618e60f2db47
Author: Russell King <rmk@dyn-67.arm.linux.org.uk>
Date:   Thu Apr 28 10:43:52 2005 +0100

    [PATCH] ARM: Fix AMBA CLCD fb driver for 32bpp
    
    We were supporting 24bpp.  However, the pixel organisation in
    memory was 0RGB, so it was 24bpp in 32bit words.  This means
    we're actually supporting 32bpp and not 24bpp.
    
    Also, add a check to ensure that we don't exceed the available
    framebuffer when changing display resolutions.
    
    Signed-off-by: Russell King <rmk@arm.linux.org.uk>

commit c4d12b98ead8bb2437f656c17e7ef065fa160e13
Author: Russell King <rmk@dyn-67.arm.linux.org.uk>
Date:   Thu Apr 28 10:38:19 2005 +0100

    [PATCH] ARM: Fix AMBA CLCD fb driver for 1bpp/STN mono panels
    
    Fix the AMBA CLCD framebuffer driver for 1bpp modes and STN
    monochrome LCD panels.
    
    Signed-off-by: Russell King <rmk@arm.linux.org.uk>

commit bdceb6a0162274934386f19f3ea5a9d44feb0b20
Author: Benjamin Herrenschmidt <benh@kernel.crashing.org>
Date:   Wed Apr 27 18:04:45 2005 -0700

    [PATCH] ppc64: Fix return value of some vDSO calls
    
    The ppc vDSO would not properly clear the return value for some calls,
    which will be a problem when interfacing those calls with glibc. This
    should be fixed before 2.6.12 is released (as it is the first kernel
    with the ppc vDSO) so that we don't have to play with symbol versioning
    and ugly workarounds.
    
    Signed-off-by: Benjamin Herrenschmidt <benh@kernel.crashing.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 5fc3e624ad7278604628c598e92aa77c67064166
Author: David Howells <dhowells@redhat.com>
Date:   Wed Apr 27 15:39:03 2005 -0700

    [PATCH] NFS4: Don't use __user with compat_uptr_t
    
    The attached patch removes __user from compat_uptr_t types in the NFS4 mount
    32-bit->64-bit compatibility structures.
    
    Signed-Off-By: David Howells <dhowells@redhat.com>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit ea3f4eaca09de1bcc80e922e56a6dabba5882f56
Author: Russell King <rmk@dyn-67.arm.linux.org.uk>
Date:   Wed Apr 27 18:19:55 2005 +0100

    [PATCH] ARM: Add further explaination for clk_get()
    
    clk_get() comments can be confusing.  Add extra explaination of
    the dev and id parameters to ensure correct usage.
    
    Signed-off-by: Russell King <rmk@arm.linux.org.uk>

commit fc67b16ecaf6ebde04096030c268adddade023f1
Author: Linus Torvalds <torvalds@ppc970.osdl.org>
Date:   Wed Apr 27 10:05:42 2005 -0700

    Automatic merge of rsync://rsync.kernel.org/pub/scm/linux/kernel/git/aegl/linux-2.6.git

commit 036d618434516103adb4d36db28a57968d2f2e7b
Author: Mark Haverkamp <markh@osdl.org>
Date:   Tue Apr 26 22:54:58 2005 -0700

    [SCSI] aacraid: Fix adapter open error
    
    This fixes an error on the device open code that allows a non-existent
    device to be opened causing later panic problems.
    
    Signed-off-by: Mark Haverkamp <markh@osdl.org>
    Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

commit e8108c98dd6d65613fa0ec9d2300f89c48d554bf
Author: Marcelo Tosatti <marcelo.tosatti@cyclades.com>
Date:   Tue Apr 26 13:09:35 2005 -0700

    [PATCH] PC300 pci_enable_device fix
    
    Call pci_enable_device() before looking at IRQ and resources,
    and pci_disable_device() when shutting the interface down.
    
    The driver requires this fix or the "pci=routeirq" workaround
    on 2.6.10 and later kernels.
    
    Reported and tested by Artur Lipowski. 
    
    From: Bjorn Helgaas <bjorn.helgaas@hp.com>
    Signed-off-by: Marcelo Tosatti <marcelo.tosatti@cyclades.com>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>
    

commit efa545791ff439d778f79d02255d59ff1f7ea0fc
Author: Al Viro <viro@parcelfarce.linux.theplanet.co.uk>
Date:   Tue Apr 26 11:26:53 2005 -0700

    [PATCH] ppc64: trivial user annotations
    
    Signed-off-by: Al Viro <viro@parcelfarce.linux.theplanet.co.uk>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 5330e9273e2b3e372b01bb1cb75be4364f02db78
Author: Al Viro <viro@parcelfarce.linux.theplanet.co.uk>
Date:   Tue Apr 26 11:26:53 2005 -0700

    [PATCH] size_t portability fixes - drivers/usb
    
    size_t is zu, ssize_t is zd...
    
    Signed-off-by: Al Viro <viro@parcelfarce.linux.theplanet.co.uk>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 2d29306b231a1a0e7a70166c10e4c0f917b21334
Author: Martin Hicks <mort@sgi.com>
Date:   Tue Apr 26 09:04:31 2005 -0700

    [IA64] re-enable preempt before page allocation for pgtable quicklist
    
    This is a fix to the pgtable_quicklist code.  There is a GFP_KERNEL
    allocation in pgtable_quicklist_alloc(), which spews the usual warnings
    if the kernel is under heavy VM pressure and the reclaim code is
    invoked.  re-enable preempt before we allocate the new page.
    
    This patch is against 2.6.12-rc2-mm2
    
    Signed-off-by:  Martin Hicks <mort@sgi.com>
    Signed-off-by:  Tony Luck <tony.luckintel.com>

commit 97af11286d68e359f61579214ca7a7b4433fe458
Author: Linus Torvalds <torvalds@ppc970.osdl.org>
Date:   Tue Apr 26 09:02:40 2005 -0700

    Automatic merge of kernel.org:/home/rmk/linux-2.6-serial.git

commit 1e14c33fe2e3409d9f34041859af52be6e4723af
Author: Linus Torvalds <torvalds@ppc970.osdl.org>
Date:   Tue Apr 26 08:58:22 2005 -0700

    Automatic merge of kernel.org:/home/rmk/linux-2.6-rmk.git

commit 766f2fa170e65948053b06c6106c8dc8526c3e14
Author: Al Viro <viro@www.linux.org.uk>
Date:   Tue Apr 26 07:43:43 2005 -0700

    [PATCH] qla trivial iomem annotation
    
    Signed-off-by: Al Viro <viro@parcelfarce.linux.theplanet.co.uk>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 9be80c0f0f61e8c0572d7c9d73b3ef839754a953
Author: Al Viro <viro@www.linux.org.uk>
Date:   Tue Apr 26 07:43:42 2005 -0700

    [PATCH] oprofile trivial user annotations
    
    Signed-off-by: Al Viro <viro@parcelfarce.linux.theplanet.co.uk>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 993fb38b1c0cd1a56d15aa99b337c780a538baa8
Author: Al Viro <viro@www.linux.org.uk>
Date:   Tue Apr 26 07:43:42 2005 -0700

    [PATCH] amd64 rt_sigframe user annotation
    
    ->pretcode in struct rt_sigframe is a userland pointer (and already
    treated as such by code using that field). 
    
    Signed-off-by: Al Viro <viro@parcelfarce.linux.theplanet.co.uk>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 0f73832fd8fc42dd7cc73487147f5d5b8f8d2cf0
Author: Al Viro <viro@www.linux.org.uk>
Date:   Tue Apr 26 07:43:42 2005 -0700

    [PATCH] drivers/scsi NULL noise removal
    
    NULL noise in sbus scsi drivers got missed
    
    Signed-off-by: Al Viro <viro@parcelfarce.linux.theplanet.co.uk>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit f815e8182b94f8fb5913b66454b40b484a2f70cc
Author: Al Viro <viro@www.linux.org.uk>
Date:   Tue Apr 26 07:43:42 2005 -0700

    [PATCH] imsttfb missing iomem annotations
    
    write_reg_le32() and read_reg_le32() expect iomem pointers...
    
    Signed-off-by: Al Viro <viro@parcelfarce.linux.theplanet.co.uk>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 66768eb26c471091dc4ea1ed59b4bab7edc3d7bd
Author: Al Viro <viro@www.linux.org.uk>
Date:   Tue Apr 26 07:43:41 2005 -0700

    [PATCH] ppc-opc NULL noise removal
    
    Signed-off-by: Al Viro <viro@parcelfarce.linux.theplanet.co.uk>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 0d3e8fe662c31d614f809d0131e134e2692d6a68
Author: Al Viro <viro@www.linux.org.uk>
Date:   Tue Apr 26 07:43:41 2005 -0700

    [PATCH] savagefb iomem annotations
    
    trivial iomem annotations + memset() replaced with memset_io() in a
    place that deals with ioremapped area. 
    
    Signed-off-by: Al Viro <viro@parcelfarce.linux.theplanet.co.uk>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 9727d04aa6d58e131128b4178e742c423480d476
Author: Al Viro <viro@www.linux.org.uk>
Date:   Tue Apr 26 07:43:41 2005 -0700

    [PATCH] pegasus NULL noise removal
    
    Signed-off-by: Al Viro <viro@parcelfarce.linux.theplanet.co.uk>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit b76be681f8b296c00f707220b9891934d5d74778
Author: Al Viro <viro@www.linux.org.uk>
Date:   Tue Apr 26 07:43:41 2005 -0700

    [PATCH] tpm 64bit fixes (size_t)
    
    Signed-off-by: Al Viro <viro@parcelfarce.linux.theplanet.co.uk>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 8cf381ca3c4a2410cea9615e205bc41bd4275e1e
Author: Al Viro <viro@www.linux.org.uk>
Date:   Tue Apr 26 07:43:40 2005 -0700

    [PATCH] fix SND_POWERMAC dependencies
    
    This beast is pmac-only; moreover, it won't build on other
    subarchitectures. 
    
    Signed-off-by: Al Viro <viro@parcelfarce.linux.theplanet.co.uk>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 2b49abac5855aff9b42cf2cdb5376ac805bebd86
Author: Russell King <rmk@dyn-67.arm.linux.org.uk>
Date:   Tue Apr 26 15:37:45 2005 +0100

    [PATCH] Serial: Convert 8250_hp300 to use serial8250_{un,}register_port
    
    Convert 8250_hp300 to use serial8250_register_port() and
    serial8250_unregister_port().
    
    Tested by Kars de Jong, 4/4/2005.
    
    Signed-off-by: Russell King <rmk@arm.linux.org.uk>

commit 2a9604b863c854e5bee409157aabb35b6ce8ecd3
Author: Russell King <rmk@dyn-67.arm.linux.org.uk>
Date:   Tue Apr 26 15:32:00 2005 +0100

    [PATCH] Serial: Move error path processing inline
    
    With unlikely() there's no need for the error path to
    use gotos.
    
    Signed-off-by: Russell King <rmk@arm.linux.org.uk>

commit 45849282bfd7543253761cbf7db96151b05e5ed1
Author: Russell King <rmk@dyn-67.arm.linux.org.uk>
Date:   Tue Apr 26 15:29:44 2005 +0100

    [PATCH] Serial: Ensure error paths are marked with unlikely()
    
    Ensure ARM serial driver error paths are marked with the
    unlikely() compiler hint.
    
    Signed-off-by: Russell King <rmk@arm.linux.org.uk>

commit 99805f47dd0ede2e96f2c62c588a0d906811ed6d
Author: Linus Torvalds <torvalds@ppc970.osdl.org>
Date:   Tue Apr 26 07:22:55 2005 -0700

    Automatic merge of rsync://rsync.kernel.org/pub/scm/linux/kernel/git/gregkh/usb-2.6.git/

commit bce495d865829d7a1d8102a834d3e3af32616567
Author: Russell King <rmk@dyn-67.arm.linux.org.uk>
Date:   Tue Apr 26 15:21:02 2005 +0100

    [PATCH] ARM: make entry*.S includes more logical
    
    Move common includes to entry-header, and file specific includes
    to the relevant file.
    
    Signed-off-by: Russell King <rmk@arm.linux.org.uk>

commit f4dc9a4cf26278f5b608d6e4bd16e7b27ddcf1a5
Author: Russell King <rmk@dyn-67.arm.linux.org.uk>
Date:   Tue Apr 26 15:20:34 2005 +0100

    [PATCH] ARM: Remove single-use user save/restore macros
    
    Assembly macros are pointless if they're only used once.  Move
    them inline.
    
    Signed-off-by: Russell King <rmk@arm.linux.org.uk>

commit cf88b417f9b1365c5aeeffa5c41208be68adfd76
Author: Russell King <rmk@dyn-67.arm.linux.org.uk>
Date:   Tue Apr 26 15:20:12 2005 +0100

    [PATCH] ARM: remove PT_TRACESYS
    
    PT_TRACESYS is unused, remove it.
    
    Signed-off-by: Russell King <rmk@arm.linux.org.uk>

commit acaca3c91536491119e97d428c1da935f411cc9a
Author: Russell King <rmk@dyn-67.arm.linux.org.uk>
Date:   Tue Apr 26 15:19:48 2005 +0100

    [PATCH] ARM: Remove SVC_MODE definition
    
    SVC_MODE reflects the MODE_SVC definition in asm/ptrace.h.  Use
    the asm/ptrace.h definition instead, and remove SVC_MODE.
    
    Signed-off-by: Russell King <rmk@arm.linux.org.uk>

commit e0f9f4a622cec66d09a5d9339f048877c665cec3
Author: Russell King <rmk@dyn-67.arm.linux.org.uk>
Date:   Tue Apr 26 15:19:24 2005 +0100

    [PATCH] ARM: Use __NR_SYSCALL_BASE and __ARM_NR_BASE in asm code
    
    Don't define our own local constants, but use those already defined
    in asm/unistd.h instead.
    
    Signed-off-by: Russell King <rmk@arm.linux.org.uk>

commit a1342206e192709a405485dbe2e647d5c4005d20
Author: Linus Torvalds <torvalds@ppc970.osdl.org>
Date:   Tue Apr 26 07:19:05 2005 -0700

    Automatic merge of rsync://rsync.kernel.org/pub/scm/linux/kernel/git/davem/net-2.6.git

commit 925c8a1a8cb9d7a33a8e39516d7fb679030553fc
Author: Russell King <rmk@dyn-67.arm.linux.org.uk>
Date:   Tue Apr 26 15:18:59 2005 +0100

    [PATCH] ARM: pt_regs offsets
    
    Generate pt_regs S_xx offsets from the structure itself instead
    of #defining them.
    
    Signed-off-by: Russell King <rmk@arm.linux.org.uk>

commit 1ec42c0c97186fadc48810ccaf2dc573cd957ea1
Author: Russell King <rmk@dyn-67.arm.linux.org.uk>
Date:   Tue Apr 26 15:18:26 2005 +0100

    [PATCH] ARM: Remove argument for disable_irq/enable_irq
    
    Since we do not require a register for these operations, we can
    remove this unnecessary argument.
    
    Signed-off-by: Russell King <rmk@arm.linux.org.uk>

commit 7933523dc75823342dbd70a27760a82a5302baf4
Author: Russell King <rmk@dyn-67.arm.linux.org.uk>
Date:   Tue Apr 26 15:17:42 2005 +0100

    [PATCH] ARM: remove some entry initialisation asm code
    
    Convert the trivial vector entry initialisation code to C code.
    
    Signed-off-by: Russell King <rmk@arm.linux.org.uk>

commit 5523662c4cd585b892811d7bb3e25d9a787e19b3
Author: Al Viro <viro@parcelfarce.linux.theplanet.co.uk>
Date:   Mon Apr 25 21:40:39 2005 -0700

    [NET]: kill gratitious includes of major.h
    
    	A lot of places in there are including major.h for no reason
    whatsoever.  Removed.  And yes, it still builds.
    
    	The history of that stuff is often amusing.  E.g. for net/core/sock.c
    the story looks so, as far as I've been able to reconstruct it: we used to
    need major.h in net/socket.c circa 1.1.early.  In 1.1.13 that need had
    disappeared, along with register_chrdev(SOCKET_MAJOR, "socket", &net_fops)
    in sock_init().  Include had not.  When 1.2 -> 1.3 reorg of net/* had moved
    a lot of stuff from net/socket.c to net/core/sock.c, this crap had followed...
    
    Signed-off-by: Al Viro <viro@parcelfarce.linux.theplanet.co.uk>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 088dd3a45fdb8fb726cd50575856562c4f6f1c3e
Author: James Morris <jmorris@redhat.com>
Date:   Mon Apr 25 21:39:29 2005 -0700

    [TCP]: Trivial tcp_data_queue() cleanup
    
    This patch removes a superfluous intialization from tcp_data_queue().
    
    Signed-off-by: James Morris <jmorris@redhat.com>
    Signed-off-by: David S. Miller <davem@davemloft.net>
    

commit b453257f057b834fdf9f4a6ad6133598b79bd982
Author: Al Viro <viro@www.linux.org.uk>
Date:   Mon Apr 25 18:32:13 2005 -0700

    [PATCH] kill gratitious includes of major.h under net/*
    
    A lot of places in there are including major.h for no reason whatsoever.
    Removed.  And yes, it still builds. 
    
    The history of that stuff is often amusing.  E.g.  for net/core/sock.c
    the story looks so, as far as I've been able to reconstruct it: we used
    to need major.h in net/socket.c circa 1.1.early.  In 1.1.13 that need
    had disappeared, along with register_chrdev(SOCKET_MAJOR, "socket",
    &net_fops) in sock_init().  Include had not.  When 1.2 -> 1.3 reorg of
    net/* had moved a lot of stuff from net/socket.c to net/core/sock.c,
    this crap had followed... 
    
    Signed-off-by: Al Viro <viro@parcelfarce.linux.theplanet.co.uk>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 94f2f715771d0aa5554451d1e2a920f11b8be3fe
Author: Al Viro <viro@www.linux.org.uk>
Date:   Mon Apr 25 18:32:12 2005 -0700

    [PATCH] isofs includes sanitized
    
    fs/isofs includes trimmed down to something resembling sanity.
    
    Kernel-only parts of linux/iso_fs.h and entire linux/iso_fs_{sb,i}.h
    moved to fs/isofs/isofs.h.
    
    A lot of useless #include in fs/isofs/*.c killed. 
    
    Signed-off-by: Al Viro <viro@parcelfarce.linux.theplanet.co.uk>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 7366d36cb967d7a3ac324c789a8b718e61d01b31
Author: Al Viro <viro@www.linux.org.uk>
Date:   Mon Apr 25 18:32:12 2005 -0700

    [PATCH] ppc annotations: i2c-mpc
    
    Usual iomem annotations and NULL noise removal.
    
    Signed-off-by: Al Viro <viro@parcelfarce.linux.theplanet.co.uk>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 2c6e75999000ebc942526466dbd0de37bfac73a4
Author: Al Viro <viro@www.linux.org.uk>
Date:   Mon Apr 25 18:32:12 2005 -0700

    [PATCH] ppc annotations: mpsc
    
    Usual iomem annotations + NULL noise removal.
    
    Signed-off-by: Al Viro <viro@parcelfarce.linux.theplanet.co.uk>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit ab2fd30b668b1687a9ca9e9ea0b60145deeafe84
Author: Linus Torvalds <torvalds@ppc970.osdl.org>
Date:   Mon Apr 25 16:19:32 2005 -0700

    Automated merge of kernel.org:/home/rmk/linux-2.6-rmk.git

commit 2fac6f3fec2303649e9cd572255776cb93d3f888
Author: Deepak Saxena <dsaxena@net.rmk.(none)>
Date:   Mon Apr 25 23:40:05 2005 +0100

    [PATCH] ARM: 2653/1: Fix memset and memzero macro double-reference of parameters
    
    Patch from Deepak Saxena
    
    The current memset() and memzero() macros on ARM reference the
    incoming parameters more than once and this can cause uninted
    side-effects. The issue was found while debugging SCTP protocol
    and with the specific usage of memzero(skb_put(skb,size),size).
    This call would call skb_put(skb,size) twice leading to badness.
    The fixed version copies the incoming parameters into local
    variables and uses those instead.
    
    Signed-off-by: Deepak Saxena

commit 41130d37a449dbff3593c8585a102d5e9173eea7
Author: Jeff Lackey <jlackey@net.rmk.(none)>
Date:   Mon Apr 25 23:38:55 2005 +0100

    [PATCH] ARM: 2650/1: PXA27x sleep - workaround Errata 39 & 50 (Patch 2667)
    
    Patch from Jeff Lackey
    
    This patch updates arch/arm/mach-pxa/sleep.S to support
    the PXA270 CPU.  It works around Errata 39 & 50 from the
    Intel(R) PXA27x Processor Family Specification Update.
    
    Signed-off-by: Jeff Lackey

commit 04237dddd14375fce1df4bfb1be92a35aa1c247f
Author: Michael Chan <mchan@broadcom.com>
Date:   Mon Apr 25 15:17:17 2005 -0700

    [TG3]: Fix tg3_restart_ints()
    
    tg3_restart_ints() is called to re-enable interrupts after tg3_poll()
    has finished all the work. It calls tg3_cond_int() to force an interrupt
    if the status block updated bit is set. The updated bit will be set if
    there is a new status block update sometime during tg3_poll() and it can
    be very often. The worst part is that even if all the work has been
    processed, the updated bit remains set and an interrupt will be forced
    unnecessarily.
    
    The fix is to call tg3_has_work() instead to determine if new work is
    posted before forcing an interrupt. The way to force an interrupt is
    also changed to use "coalesce_now" instead of "SETINT". The former is
    generally a safer way to force the interrupt.
    
    Also deleted the first parameter to tg3_has_work() which is unused.
    
    Signed-off-by: Michael Chan <mchan@broadcom.com>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 52f6d697dc0f2c039e8413e780b0f45ddf8161fc
Author: Michael Chan <mchan@broadcom.com>
Date:   Mon Apr 25 15:14:32 2005 -0700

    [TG3]: Refresh hw index in tg3_rx()
    
    This patch refreshes the hw rx producer in tg3_rx() so that additional
    work posted by the hardware can be processed.
    
    Signed-off-by: Michael Chan <mchan@broadcom.com>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 483ba50bd41d14d5325d6cd9935de86a982d08a2
Author: Michael Chan <mchan@broadcom.com>
Date:   Mon Apr 25 15:14:03 2005 -0700

    [TG3]: Fix bug in tg3_rx()
    
    This patch fixes a bug that causes tg3_has_work() to always return 1.
    
    rx work is determined by comparing tp->rx_rcb_ptr with the current hw
    producer index. The hw producer index is modulo the ring size, but tp-
    >rx_rcb_ptr is a free running counter that goes up beyond the ring size.
    After the ring wraps around once, tg3_has_work() will always return 1.
    
    The fix is to always do modulo arithmetic on tp->rx_rcb_ptr.
    
    Signed-off-by: Michael Chan <mchan@broadcom.com>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit eec99e345e0568767009341ac35fb5a499301499
Author: Lucas Correia Villa Real <lucasvr@org.rmk.(none)>
Date:   Mon Apr 25 23:13:15 2005 +0100

    [PATCH] ARM: 2645/1: Adds IIS definitions for the S3C2400
    
    Patch from Lucas Correia Villa Real
    
    Adds IISFCON definitions for the S3C2400 at
    include/asm-arm/arch-s3c2400/regs-iis.h.
    
    Signed-off-by: Lucas Correia Villa Real
    Signed-off-by: Ben Dooks

commit bd7b170201149fd82bc3212cb570a7a7386463a4
Author: Lucas Correia Villa Real <lucasvr@org.rmk.(none)>
Date:   Mon Apr 25 23:12:50 2005 +0100

    [PATCH] ARM: 2644/1: Adds S3C2400 support to uncompress.h
    
    Patch from Lucas Correia Villa Real
    
    The S3C2400 doesn't have a cpuid information stored anywhere. This patch adds
    support to the S3C2400 at include/asm-arm/arch-s3c2400/uncompress.h by
    initializing the cpuid variable to the S3C2410, as they share the same
    routine. The GSTATUS1 pin is then used only if not compiling for the S3C2400.
    
    Signed-off-by: Lucas Correia Villa Real
    Signed-off-by: Ben Dooks

commit 605036cf8443b9172b24954dc1fd218e2049f91b
Author: Jesse Barnes <jbarnes@sgi.com>
Date:   Mon Apr 25 13:31:04 2005 -0700

    From: jbarnes@sgi.com
    
    [IA64] fix ia64 Kconfig to allow CONFIG_PM on sn2
    
    This probably should have been fixed when I fixed up the generic build for
    discontig+numa machines, but oh well.
    
    CONFIG_PM is allowable for generic builds but not for sn2 builds, which
    doesn't make much sense, and in fact breaks the build if recent ACPI bits are
    added to the tree.  It looks like the only arch that needs to prevent
    CONFIG_PM stuff is the ski simulator (though those options could probably use
    some cleanup as well), so remove the big conditional and replace it with a
    simple test for IA64_HP_SIM instead.
    
    Signed-off-by: Jesse Barnes <jbarnes@sgi.com>
    Signed-off-by: Tony Luck <tony.luck@intel.com>

commit fc626b278a05a0fe3eb9abd1733120f2f400cbcd
Author: Greg Howard <ghoward@sgi.com>
Date:   Mon Apr 25 13:29:46 2005 -0700

    [IA64-SGI] snsc_event.c new file
    
    Forgot the "bk new" to add this file. Part of the patch
    from Greg Howard
    
    Signed-off-by: Tony Luck <tony.luck@intel.com>

commit 67639deb099c6085acc447c1b7d6a17792dedad0
Author: Greg Howard <ghoward@sgi.com>
Date:   Mon Apr 25 13:28:52 2005 -0700

    [IA64] Altix system controller event handling
    
    The following is an update of the patch I sent yesterday
    (3/9/05) incorporating suggestions from Christoph Hellwig and
    Andreas Schwab.  It allows Altix and Altix-like systems to
    handle environmental events generated by the system controllers,
    and should apply on top of Jack Steiner's patch of 3/1/05 ("New
    chipset support for SN platform") and Mark Goodwin's patch of
    3/8/05 ("Altix SN topology support for new chipsets and pci
    topology").
    
    Signed-off-by: Greg Howard <ghoward@sgi.com>
    Signed-off-by: Tony Luck <tony.luck@intel.com>

commit b9e41d7fb62ae26adee84c18048037214ce5d866
Author: Kenji Kaneshige <kaneshige.kenji@jp.fujitsu.com>
Date:   Mon Apr 25 13:27:48 2005 -0700

    [IA64] iosapic.c: typo ... s/spin_unlock_irq/spin_unlock/
    
    vector sharing patch had a typo ... mismatched spin_lock() with
    a spin_unlock_irq().  Fix from Kenji Kaneshige.
    
    Signed-off-by: Tony Luck <tony.luck@intel.com>

commit e1ed81ab7a34fc0f92f2e200825bdb6d86d6c8ef
Author: Tony Luck <tony.luck@intel.com>
Date:   Mon Apr 25 13:27:12 2005 -0700

    [IA64] print "siblings" before {physical,core,thread} id
    
    Rohit and Suresh changed their mind about the order to print things
    in /proc/cpuinfo, but didn't include the change in the version of
    the patch they sent to me.
    
    Signed-off-by: Tony Luck <tony.luck@intel.com>

commit 24eeb568aeeaee771b9f0a6fd6f5d01040a887da
Author: Kenji Kaneshige <kaneshige.kenji@jp.fujitsu.com>
Date:   Mon Apr 25 13:26:23 2005 -0700

    [IA64] vector sharing (Large I/O system support)
    
    Current ia64 linux cannot handle greater than 184 interrupt sources
    because of the lack of vectors. The following patch enables ia64 linux
    to handle greater than 184 interrupt sources by allowing the same
    vector number to be shared by multiple IOSAPIC's RTEs. The design of
    this patch is besed on "Intel(R) Itanium(R) Processor Family Interrupt
    Architecture Guide".
    
    Even if you don't have a large I/O system, you can see the behavior of
    vector sharing by changing IOSAPIC_LAST_DEVICE_VECTOR to fewer value.
    
    Signed-off-by: Kenji Kaneshige <kaneshige.kenji@jp.fujitsu.com>
    Signed-off-by: Tony Luck <tony.luck@intel.com>

commit e927ecb05e1ce4bbb1e10f57008c94994e2160f5
Author: Suresh Siddha <suresh.b.siddha@intel.com>
Date:   Mon Apr 25 13:25:06 2005 -0700

    [IA64] multi-core/multi-thread identification
    
    Version 3 - rediffed to apply on top of Ashok's hotplug cpu
    patch.  /proc/cpuinfo output in step with x86.
    
    This is an updated MC/MT identification patch based on the 
    previous discussions on list. 
    
    Add the Multi-core and Multi-threading detection for IPF.
      - Add new core and threading related fields in /proc/cpuinfo.
    		Physical id
    		Core id
    		Thread id
    		Siblings
      - setup the cpu_core_map and cpu_sibling_map appropriately
      - Handles Hot plug CPU
     
    Signed-off-by: Suresh Siddha <suresh.b.siddha@intel.com>
    Signed-off-by: Gordon Jin <gordon.jin@intel.com>
    Signed-off-by: Rohit Seth <rohit.seth@intel.com>
    Signed-off-by: Tony Luck <tony.luck@intel.com>

commit 6118ec847e8e35393efc0f88394c2f5dd48c3313
Author: Keith Owens <kaos@sgi.com>
Date:   Mon Apr 25 13:23:47 2005 -0700

    [IA64] __copy_user breaks on unaligned src
    
    memcpy_mck.S::__copy_user breaks in the prefetch code under these conditions :-
    
    * src is unaligned and
    * dst is near the end of a page and
    * the page after dst is unmapped.
    
    Signed-off-by: Keith Owens <kaos@sgi.com>
    Signed-off-by: Tony Luck <tony.luck@intel.com>

commit f0a8d3c9ec1f82d2a41faa6c46b8db7bd5b1eb8d
Author: Tony Luck <tony.luck@intel.com>
Date:   Mon Apr 25 13:22:44 2005 -0700

    [IA64] Need to handle lfetch in "no_context" case.
    
    Thanks to Mark for tracking down this one.  Users of __copy_from_user_inatomic()
    will be sad if we don't handle lfetch faults for the "no_context" case.
    
    Signed-off-by: Tony Luck <tony.luck@intel.com>

commit 0985ea8f2db87d32b0b750229889e55fed7458ef
Author: Mark Goodwin <markgw@sgi.com>
Date:   Mon Apr 25 13:21:54 2005 -0700

    [IA64-SGI] Altix SN add support for slots in geoid_t locator
    
    This patch against ia64-test-2.6.12 is needed for forthcoming
    Altix chipsets. It renames geoid_any_t to geoid_common_t and
    splits the 8bit 'slab' field into two 4bit fields for 'slab'
    and 'slot'. Similar changes in the Altix SAL will retain backward
    compatibility for old kernels.
    
    Signed-off-by: Mark Goodwin <markgw@sgi.com>
    Signed-off-by: Tony Luck <tony.luck@intel.com>

commit a37d98f6a98254c05315e0bbf45c4602942d14b1
Author: David Mosberger-Tang <davidm@hpl.hp.com>
Date:   Mon Apr 25 13:20:38 2005 -0700

    [IA64] fix syscall-optimization goof
    
    Sadly, I goofed in this syscall-tuning patch:
    
    ChangeSet 1.1966.1.40 2005/01/22 13:31:05 davidm@hpl.hp.com
      [IA64] Improve ia64_leave_syscall() for McKinley-type cores.
    
      Optimize ia64_leave_syscall() a bit better for McKinley-type cores.
      The patch looks big, but that's mostly due to renaming r16/r17 to r2/r3.
      Good for a 13 cycle improvement.
    
    The problem is that the size of the physical stacked registers was
    loaded into the wrong register (r3 instead of r17).  Since r17 by
    coincidence always had the value 1, this had the effect of turning
    rse_clear_invalid into a no-op.  That poses the risk of leaking kernel
    state back to user-land and is hence not acceptable.
    
    The fix below is simple, but unfortunately it costs us about 28 cycles
    in syscall overhead. ;-(
    
    Unfortunately, there isn't much we can do about that since those
    registers have to be cleared one way or another.
    
    	--david
    
    Signed-off-by: Tony Luck <tony.luck@intel.com>

commit 93a07d0a0e7b013ee73fb39d4edb07b47288912e
Author: Russ Anderson <rja@sgi.com>
Date:   Mon Apr 25 13:19:52 2005 -0700

    [IA64-SGI] Shub2 BTE support - BTE recovery code
    
    patch 2:
    	Shub2 BTE recovery code will be implemented in SAL.  
    	Define the SAL interface.
    	Modify bte_error to call SAL for shub2.
    
    Signed-off-by: Russ Anderson <rja@sgi.com>
    Signed-off-by: Tony Luck <tony.luck@intel.com>

commit 95ff439a517835aa2bdf725fafbb025a63984289
Author: Russ Anderson <rja@sgi.com>
Date:   Mon Apr 25 13:19:11 2005 -0700

    [IA64-SGI] Add new MMR definitions/Modify BTE initialiation&copy.
    
    patch 1:
    	Add new MMR definitions.
    	Modify BTE initialiation.
    	Modify BTE copy.
    
    Signed-off-by: Russ Anderson <rja@sgi.com>
    Signed-off-by: Tony Luck <tony.luck@intel.com>

commit 4628d7cada7a19166ba8fe57f5ef0f0009694e1e
Author: Mark Maule <maule@sgi.com>
Date:   Mon Apr 25 13:18:02 2005 -0700

    [IA64-SGI] disable TIOCA GART TLB prefetching
    
    Patch to disable SGI TIOCA GART TLB prefetching due to hw bug.
    
    Signed-off-by: Mark Maule <maule@sgi.com>
    Signed-off-by: Tony Luck <tony.luck@intel.com>

commit e96c9b4779e651a7469bea677be3a08f70be399e
Author: Tony Luck <tony.luck@intel.com>
Date:   Mon Apr 25 13:16:59 2005 -0700

    [IA64] MAX_PGT_FREES_PER_PASS must be 'L' to avoid warning
    
    'min' is very picky about types of arguments, make it happy
    
    Signed-off-by: Tony Luck <tony.luck@intel.com>

commit c411cb56586915350e4cdb6f228e9da2adba3285
Author: Tony Luck <tony.luck@intel.com>
Date:   Mon Apr 25 13:16:16 2005 -0700

    [IA64] fix: warning: `ql_size' might be used uninitialized
    
    Oops.  Should have caught this before I checked it in.
    
    Signed-off-by: Tony Luck <tony.luck@intel.com>

commit 5f6602a101993592b437b801c401443bec65d0cf
Author: Alex Williamson <alex.williamson@hp.com>
Date:   Mon Apr 25 13:14:36 2005 -0700

    [IA64] sba_iommu bug fixes
    
       This fixes a couple of bugs in the zx1/sx1000 sba_iommu.  These are
    all pretty low likelihood of hitting.  The first problem is a simple off
    by one, deep in the sba_alloc_range() error path.  Surrounding that was
    a lock ordering problem that could have potentially deadlocked with the
    order the locks are grabbed in sba_unmap_single().  I moved the resource
    locking into sba_search_bitmap() to prevent this.  Finally, there's a
    potential race between unmapping pdir entries and marking incoming DMA
    pages clean.  If you see any oddities, please let me know, but I've
    tested it pretty thoroughly here.  Tony, please apply.  Thanks,
    
    BTW, many of the options in this driver not on by default are becoming
    more and more broken.  I'll be working on some patches to clean them
    out, but I wanted to get this bug fix out first.
    
    Signed-off-by: Alex Williamson <alex.williamson@hp.com>
    Signed-off-by: Tony Luck <tony.luck@intel.com>

commit fde740e4dd4a05ca8957490d468fa9b2770f5bd6
Author: Robin Holt <holt@sgi.com>
Date:   Mon Apr 25 13:13:16 2005 -0700

    [IA64] Percpu quicklist for combined allocator for pgd/pmd/pte.
    
    This patch introduces using the quicklists for pgd, pmd, and pte levels
    by combining the alloc and free functions into a common set of routines.
    This greatly simplifies the reading of this header file.
    
    This patch is simple but necessary for large numa configurations.
    It simply ensures that only pages from the local node are added to a
    cpus quicklist.  This prevents the trapping of pages on a remote nodes
    quicklist by starting a process, touching a large number of pages to
    fill pmd and pte entries, migrating to another node, and then unmapping
    or exiting.  With those conditions, the pages get trapped and if the
    machine has more than 100 nodes of the same size, the calculation of
    the pgtable high water mark will be larger than any single node so page
    table cache flushing will never occur.
    
    I ran lmbench lat_proc fork and lat_proc exec on a zx1 with and without
    this patch and did not notice any change.
    
    On an sn2 machine, there was a slight improvement which is possibly
    due to pages from other nodes trapped on the test node before starting
    the run.  I did not investigate further.
    
    This patch shrinks the quicklist based upon free memory on the node
    instead of the high/low water marks.  I have written it to enable
    preemption periodically and recalculate the amount to shrink every time
    we have freed enough pages that the quicklist size should have grown.
    I rescan the nodes zones each pass because other processess may be
    draining node memory at the same time as we are adding.
    
    Signed-off-by: Robin Holt <holt@sgi.com>
    Signed-off-by: Tony Luck <tony.luck@intel.com>

commit ff3eb55ed97db3f12964beeffe3d34602d295367
Author: Bruce Losure <blosure@sgi.com>
Date:   Mon Apr 25 13:12:02 2005 -0700

    [IA64-SGI]
    
    Missed the "bk new" for this file in the last commit.
    
    Signed-off-by: Bruce Losure <blosure@sgi.com>
    Signed-off-by: Tony Luck <tony.luck@intel.com>

commit c1298c5c7e5763a3b2fd4a9535d474ff6e54cd53
Author: Aaron J Young <ayoung@sgi.com>
Date:   Mon Apr 25 13:11:14 2005 -0700

    [IA64-SGI] Altix: enable poweroff
    
    This patch adds the necessary "hook" to allow SGI/SN
    machines to perform a system power off upon a 
    'init 0', 'halt -p', 'poweroff' or 'shutdown -h'.
    
    The "hook" is to set the pm_power_off callback
    to ia64_sn_power_down(). pm_power_off is checked
    in machine_power_off()/do_poweroff() and, if set, is executed. 
    ia64_sn_power_down() is a function already present (but not 
    used currently) in the sn kernel.
    ia64_sn_power_down() makes a SAL call to execute the
    power off.
    
    Signed-off-by: Aaron J Young <ayoung@sgi.com>
    Signed-off-by: Tony Luck <tony.luck@intel.com>

commit e1e19747ecce9117610b8f3b57a3e95734230319
Author: Bruce Losure <blosure@sgi.com>
Date:   Mon Apr 25 13:09:41 2005 -0700

    [IA64-SGI] Bus driver for the CX port of SGI's TIO chip.
    
    This patch is to provide CX port infrastructure for SGI TIO-based
    h/w.   Also a 'core services' driver for SGI FPGA-based h/w.
                                                                                    
    Signed-off-by: Bruce Losure <blosure@sgi.com>
    Signed-off-by: Tony Luck <tony.luck@intel.com>

commit 4944930ab748942e41ea4dc313fcb0946aee3f17
Author: Stephane Eranian <eranian@hpl.hp.com>
Date:   Mon Apr 25 13:08:30 2005 -0700

    [IA64] perfmon: make pfm_sysctl a global, and other cleanup
    
    - make pfm_sysctl a global such that it is possible
      to enable/disable debug printk in sampling formats
      using PFM_DEBUG.
    
    - remove unused pfm_debug_var variable
    
    - fix a bug in pfm_handle_work where an BUG_ON() could
      be triggered. There is a path where pfm_handle_work()
      can be called with interrupts enabled, i.e., when
      TIF_NEED_RESCHED is set. The fix correct the masking
      and unmasking of interrupts in pfm_handle_work() such
      that we restore the interrupt mask as it was upon entry.
    
    signed-off-by: stephane eranian <eranian@hpl.hp.com>
    Signed-off-by: Tony Luck <tony.luck@intel.com>

commit 658b32cad9ae087bd34f35a925fd75b76d663d4e
Author: Colin Ngam <cngam@sgi.com>
Date:   Mon Apr 25 13:07:00 2005 -0700

    [IA64-SGI] support variable length nasids in shub2
    
    This patch enables our TIO IO chipset to support variable length nasids in 
    Shub2 chipset.
    
    Signed-off-by: Colin Ngam <cngam@sgi.com>
    Signed-off-by: Tony Luck <tony.luck@intel.com>

commit be539c73b54dcc9f54fb2c2b70e204c93b616c9b
Author: Colin Ngam <cngam@sgi.com>
Date:   Mon Apr 25 13:06:28 2005 -0700

    [IA64-SGI] Shub2 provides an addition of 2 External Interrupt events.
    
    Signed-off-by: Colin Ngam <cngam@sgi.com>
    Signed-off-by: Tony Luck <tony.luck@intel.com>

commit f1e2a1c8a1fe16db5f4a7c0c1551d6e1b97dcbb2
Author: Mark Goodwin <markgw@sgi.com>
Date:   Mon Apr 25 13:05:08 2005 -0700

    [IA64-SGI] Altix SN topology fix potential infinite loop
    
    Fix infinite loop if sn_hwperf_location_to_bpos() fails.
    
    Signed-off-by: Mark Goodwin <markgw@sgi.com>
    Signed-off-by: Tony Luck <tony.luck@intel.com>

commit 4a5c13c7eb0d55bfd2cf3100c55f1e3d8df37576
Author: Mark Goodwin <markgw@sgi.com>
Date:   Mon Apr 25 13:04:22 2005 -0700

    [IA64-SGI] Altix SN topology support for new chipsets and pci topology
    
    please accept this patch to the Altix SN platform topology export
    interface to support new chipsets and to export PCI topology.
    
    This follows on top of Jack Steiner's patch dated March 1st
    ("New chipset support for SN platform").
    
    Signed-off-by: Mark Goodwin <markgw@sgi.com>
    Signed-off-by: Tony Luck <tony.luck@intel.com>

commit 30325d17715302a60c9afdaacaafaeb056b7e880
Author: David Mosberger-Tang <davidm@hpl.hp.com>
Date:   Mon Apr 25 13:03:16 2005 -0700

    [IA64] speed up syscall path a bit more
    
    Recently I noticed that clearing ar.ssd/ar.csd right before srlz.d is
    causing significant stalling in the syscall path.  The patch below
    fixes that by moving the register-writes after srlz.d.  On a Madison,
    this drops break-based getpid() from 241 to 226 cycles (-15 cycles).
    
    Signed-off-by: David Mosberger-Tang <davidm@hpl.hp.com>
    Signed-off-by: Tony Luck <tony.luck@intel.com>

commit cbdbf00aaf0addd391259f94aaa8e7dc1bfc9081
Author: David S. Miller <davem@sunset.davemloft.net>
Date:   Mon Apr 25 12:15:01 2005 -0700

    [PKT_SCHED]: Eliminate unnecessary includes in simple.c
    
    Noted by Al Viro.
    
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit b31e5b1bb53b99dfd5e890aa07e943aff114ae1c
Author: Patrick McHardy <kaber@trash.net>
Date:   Mon Apr 25 12:01:07 2005 -0700

    [NETFILTER]: Drop conntrack reference when packet leaves IP
    
    In the event a raw socket is created for sending purposes only, the creator
    never bothers to check the socket's receive queue.  But we continue to
    add skbs to its queue until it fills up.
    
    Unfortunately, if ip_conntrack is loaded on the box, each skb we add to the
    queue potentially holds a reference to a conntrack.  If the user attempts
    to unload ip_conntrack, we will spin around forever since the queued skbs
    are pinned.
    
    Signed-off-by: Patrick McHardy <kaber@trash.net>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit f649a3bfd1b0ad8872312ed1c223d69b74406e1f
Author: Yasuyuki KOZAKAI <yasuyuki.kozkaai@toshiba.co.jp>
Date:   Mon Apr 25 12:00:04 2005 -0700

    [NETFILTER]: Fix truncated sequence numbers in FTP helper
    
    Signed-off-by: Yasuyuki KOZAKAI <yasuyuki.kozkaai@toshiba.co.jp>
    Signed-off-by: Patrick McHardy <kaber@trash.net>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit e8d1cb2f280aa53e1c75c8b5fcbf80b3481d0caa
Author: Keith Owens <kaos@sgi.com>
Date:   Mon Apr 25 11:45:26 2005 -0700

    [IA64] Tighten up unw_unwind_to_user check
    
    Detect user space by the unwind frame with predicate PRED_USER_STACK
    set, instead of a user space IP.  Tighten up the last ditch check for
    running off the top of the kernel stack.
    
    Based on a suggestion by David Mosberger, reworked to fit the current
    tree.  This survives my stress test which used to break 2.6.9 kernels.
    Unlike 2.6.11, the stress test now unwinds to the correct point, so
    gdb can get the user space registers.
    
    Signed-off-by: Keith Owens <kaos@sgi.com>
    Signed-off-by: Tony Luck <tony.luck@intel.com>

commit 8297511530b0d2a281c796e738683951a59a020c
Author: David Mosberger-Tang <davidm@hpl.hp.com>
Date:   Mon Apr 25 11:44:02 2005 -0700

    [IA64] add missing cpu_relax() in ITC syncing code
    
    Call cpu_relax() in busy-waiting loops of the ITC-syncing code.
    
    Signed-off-by: David Mosberger-Tang <davidm@hpl.hp.com>
    Signed-off-by: Tony Luck <tony.luck@intel.com>

commit bf1cf98fa941fea5e630e341db4a294d531aaa3e
Author: Jack Steiner <steiner@sgi.com>
Date:   Mon Apr 25 11:42:39 2005 -0700

    [IA64-SGI] Change SAL call request code for SN systems
    
    Change the value of the SAL call number for a new SAL request. The
    initial implementation in the PROM did not match what the OS expected. 
    Since the OS can run on PROMs that do not implement the new call, 
    changing the call number avoids the issue. New PROMs will implement
    the new call number. (This avoids problems with the 4.05 PROM).
    
    Signed-off-by: Jack Steiner <steiner@sgi.com>
    Signed-off-by: Tony Luck <tony.luck@intel.com>

commit 9c90bdde77f7b7a42f7ebb900275d459ce2bac05
Author: Mark Maule <maule@sgi.com>
Date:   Mon Apr 25 11:35:54 2005 -0700

    [IA64-SGI] altix: tioca chip driver (agp)
    
    Provide a driver for the altix TIOCA AGP chipset.  An agpgart backend will
    be provided as a separate patch.
    
    Signed-off-by: Mark Maule <maule@sgi.com>
    Signed-off-by: Tony Luck <tony.luck@intel.com>

commit 9b08ebd167a3f3812131a54512f92c3c6738ad03
Author: Mark Maule <maule@sgi.com>
Date:   Mon Apr 25 11:32:16 2005 -0700

    [IA64-SGI] sn2-move-pci-headers.patch
    
    Move a couple of headers out of arch/ia64/sn/include/pci and into
    include/asm-ia64/sn.
    
    Signed-off-by: Mark Maule <maule@sgi.com>
    Signed-off-by: Tony Luck <tony.luck@intel.com>

commit e955d82543fea76b02aa243b182e782f71bda82c
Author: Mark Maule <maule@sgi.com>
Date:   Mon Apr 25 11:26:03 2005 -0700

    [IA64-SGI] sn2-pci-dma-abstraction.patch
    
    Provide an abstraction of the altix pci dma runtime layer so that multiple
    pci-based bridges can be supported.
    
    Signed-off-by: Mark Maule <maule@sgi.com>
    Signed-off-by: Tony Luck <tony.luck@intel.com>

commit b7ebcc108a1754a1d044b49c0acf977a7e86ae71
Author: Lucas Correia Villa Real <lucasvr@org.rmk.(none)>
Date:   Mon Apr 25 18:40:31 2005 +0100

    [PATCH] ARM: 2641/1: Adds S3C2400_SPPIN_nCS to arch-s3c2410/regs-spi.h
    
    Patch from Lucas Correia Villa Real
    
    Adds a define to the SPI Card Select bit on the S3C2400 into
    include/asm-arm/arch-s3c2410/regs-spi.h
    
    Signed-off-by: Lucas Correia Villa Real

commit a3342421363642d03b2ae3ecd27e3041de043e99
Author: Lucas Correia Villa Real <lucasvr@org.rmk.(none)>
Date:   Mon Apr 25 18:36:50 2005 +0100

    [PATCH] ARM: 2640/1: Adds DRAM/BANKSIZE_MASK definitions for S3C2400
    
    Patch from Lucas Correia Villa Real
    
    Adds DRAM refresh definitions and sets the BANKSIZE_MASK for the S3C2400 on
    include/asm-arm/arch-s3c2400/regs-mem.h
    
    Signed-off-by: Lucas Correia Villa Real
    Signed-off-by: Ben Dooks

commit 25ee7e3832951cf5896b194f6cd929a44863f419
Author: Adrian Bunk <bunk@stusta.de>
Date:   Mon Apr 25 08:18:14 2005 -0700

    [PATCH] fs/aio.c: make some code static
    
    This patch makes some needlessly global code static.
    
    Signed-off-by: Adrian Bunk <bunk@stusta.de>
    Acked-by: Benjamin LaHaise <bcrl@kvack.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 056de2fa12febe02597f971eb6ea8f2cc9c9b06e
Author: Al Viro <viro@www.linux.org.uk>
Date:   Mon Apr 25 07:55:59 2005 -0700

    [PATCH] ppc user annotations: debug_setconetext(2)
    
    3rd argument of sys_debug_setcontext() is also a userland pointer.
    
    Signed-off-by: Al Viro <viro@parcelfarce.linux.theplanet.co.uk>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit dc074a8a32bc12e19436b087f01f4a4700e9b9c0
Author: Al Viro <viro@www.linux.org.uk>
Date:   Mon Apr 25 07:55:58 2005 -0700

    [PATCH] ppc iomem annotations: mv643xx_eth
    
    void * __iomem replaced with intended void __iomem *.
    
    Signed-off-by: Al Viro <viro@parcelfarce.linux.theplanet.co.uk>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 91de1fff2d431fec1162333a1e4fad9a53cd5b9e
Author: Al Viro <viro@www.linux.org.uk>
Date:   Mon Apr 25 07:55:58 2005 -0700

    [PATCH] ppc sparse annotations: emulate_string_inst()
    
    replaced declaration of EA from u32 to unsigned long - this beast is
    used only to cast it to (userland) pointer and proper integer type for
    that is unsigned long. 
    
    Signed-off-by: Al Viro <viro@parcelfarce.linux.theplanet.co.uk>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit d01daf72f0a238c5ccfba7bf82999e384927412e
Author: Al Viro <viro@www.linux.org.uk>
Date:   Mon Apr 25 07:55:58 2005 -0700

    [PATCH] ppc iomem annotations: pmac_low_i2c
    
    Signed-off-by: Al Viro <viro@parcelfarce.linux.theplanet.co.uk>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit ba724a373a7184dce869e8adb79a0a03d91fbdd8
Author: Al Viro <viro@www.linux.org.uk>
Date:   Mon Apr 25 07:55:58 2005 -0700

    [PATCH] ppc iomem annotations: ebony_setup_pcix()
    
    Signed-off-by: Al Viro <viro@parcelfarce.linux.theplanet.co.uk>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 92a11f9e7cb876e6cf9080e4a1642142cb9221b2
Author: Al Viro <viro@www.linux.org.uk>
Date:   Mon Apr 25 07:55:57 2005 -0700

    [PATCH] ppc iomem annotations: ->io_base_virt
    
    * ->io_base_virt in struct pci_controller is iomem pointer.  Marked as such.
      Most of the places that used it are already annotated to expect iomem.
    * places that did gratitious (and wrong) casts a-la
    	isa_io_base = (unsigned long)ioremap(...);
    	hose->io_base_virt = (void *)isa_io_base;
      turned into
    	hose->io_base_virt = ioremap(...);
    	isa_io_base = (unsigned long)hose->io_base_virt;
    * pci_bus_io_base() annotated as returning iomem pointer.
    
    Signed-off-by: Al Viro <viro@parcelfarce.linux.theplanet.co.uk>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 9090e001f28de4bccae232f1b78e78fad5132ecb
Author: Al Viro <viro@www.linux.org.uk>
Date:   Mon Apr 25 07:55:57 2005 -0700

    [PATCH] ppc user annotations: sigcontext
    
    sigcontext.regs is a userland pointer
    
    Signed-off-by: Al Viro <viro@parcelfarce.linux.theplanet.co.uk>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit cf025109e879294f4c6aecf94de1e7b592a9fb07
Author: Linus Torvalds <torvalds@ppc970.osdl.org>
Date:   Mon Apr 25 07:42:22 2005 -0700

    Automatic merge of rsync://rsync.kernel.org/pub/scm/linux/kernel/git/davem/sparc-2.6.git

commit 9a59c1860d01b3dea9ab01d5cefb9d5c52042e6d
Author: David S. Miller <davem@sunset.davemloft.net>
Date:   Sun Apr 24 21:04:02 2005 -0700

    [SPARC64]: Fix SMP build.
    
    Kill build failures in the SMP+!PREEMPT case introduced
    by Al Viro's spinlock.h changes.
    
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 24dc6ead53f8fcae4b1908c4ea3fea75ee844a6d
Author: Tom 'spot' Callaway <tcallawa@redhat.com>
Date:   Sun Apr 24 20:46:49 2005 -0700

    [SPARC]: dump_stack for sparc
    
    Bob Breuer wrote a patch to add dump_stack for sparc. Supposedly, this
    was applied, but it doesn't exist in 2.6.11.
    
    This is the same patch, rediffed against 2.6.11.
    
    Signed-off-by: Tom 'spot' Callaway <tcallawa@redhat.com>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 205a7edad99d68d57dfcbf9bdda1a6fb7c33169e
Author: Tom 'spot' Callaway <tcallawa@redhat.com>
Date:   Sun Apr 24 20:46:00 2005 -0700

    [SPARC]: Fix mxcc warning
    
    Peter Jones uncovered this one while we were debugging the framebuffer
    issues. There are some references to -1 in the mxcc asm code, which
    should be 0xffffffff.
    
    This patch gets rid of the -1s.
    
    Signed-off-by: Tom 'spot' Callaway <tcallawa@redhat.com>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 962bd5604bf8a4d31d9204e7daf260ea93084bc0
Author: Tom 'spot' Callaway <tcallawa@redhat.com>
Date:   Sun Apr 24 20:45:06 2005 -0700

    [SPARC]: More sparc32 ksyms cleanups
    
    The sparc32 ksyms is missing a few more symbols, these are primarily
    related to SMP, and will be needed as SMP gets beaten back into
    functionality.
    
    Specifically, add __cpu_data (PER_CPU), cpu_online_map, and
    phys_cpu_present_map.
    
    This patch assumes that the earlier "linux-2.6.11-sparc-fixksyms.patch"
    is applied, otherwise, it will apply with fuzz.
    
    Signed-off-by: Tom 'spot' Callaway <tcallawa@redhat.com>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit f1dee7ea250bfef433fc46fd69a52b73349b24de
Author: Bob Breuer <breuerr@mc.net>
Date:   Sun Apr 24 20:42:45 2005 -0700

    [SPARC]: Enable sun logo on sparc32
    
    This enables the sun linux logo to be selected on sparc32.
    
    Signed-off-by: Bob Breuer <breuerr@mc.net>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 77a6a22f697bbc59cd434ff999dc34162e240f16
Author: Tom 'spot' Callaway <tcallawa@redhat.com>
Date:   Sun Apr 24 20:41:45 2005 -0700

    [SPARC]: Missing sparc32 ksyms
    
    This patch adds some missing sparc32 ksyms that are needed.
    Specifically, ___rw_read_enter, ___rw_read_exit, ___rw_write_enter, and
    sys_close.
    
    Signed-off-by: Tom 'spot' Callaway <tcallawa@redhat.com>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 6ee7c15294985e4e722959fd4482df60cefd2cc8
Author: Tom 'spot' Callaway <tcallawa@redhat.com>
Date:   Sun Apr 24 20:39:15 2005 -0700

    [SPARC]: TCX Framebuffer fixes
    
    Using the same logic as the other framebuffer fixes committed in 2.6.11,
    this is a set of fixes to make TCX functional on the console again. Adds
    the tcx_pan_display function, sets the
    all->info.var.{red,green,blue}.length values to 8, and runs fb_set_cmap.
    Also looks for the correct SUNW,tcx prom value.
    
    This patch just slipped through the cracks.
    
    Originally by: Georg Chini <georg.chini@triaton-webhosting.com>
    
    Signed-off-by: Tom 'spot' Callaway <tcallawa@redhat.com>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit a271c241a6036d4d583d0f47a02ba5f18b8b92b5
Author: Tom 'spot' Callaway <tcallawa@redhat.com>
Date:   Sun Apr 24 20:38:02 2005 -0700

    [SPARC]: Stop-A printk cleanup
    
    This patch is incredibly trivial, but it does resolve some of the user
    confusion as to what "L1-A" actually is.
    
    Clarify printk message to refer to Stop-A (L1-A).
    
    Gentoo has a virtually identical patch in their kernel sources.
    
    Signed-off-by: Tom 'spot' Callaway <tcallawa@redhat.com>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 10158286e7b5347dce2285895c95419b9f6f8b63
Author: Tom 'spot' Callaway <tcallawa@redhat.com>
Date:   Sun Apr 24 20:35:20 2005 -0700

    [SPARC]: module version cleanups
    
    Minor cleanups for sparc specific drivers (sunbmac, sunqe, sunlance,
    sunhme, esp) so that they have a full module version definition that is
    consistent with other upstream drivers.
    
    Signed-off-by: Tom 'spot' Callaway <tcallawa@redhat.com>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit edec231a8a652384cb6d61e648338aa5155f2b72
Author: Arnaldo Carvalho de Melo <acme@ghostprotocols.net>
Date:   Sun Apr 24 20:22:28 2005 -0700

    [IPV6]: export inet6_sock_nr
    
    Please apply, SCTP/DCCP needs this when INET_REFCNT_DEBUG
    is set.
    
    Signed-off-by: Arnaldo Carvalho de Melo <acme@ghostprotocols.net>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit c5c13fafd6548fe36b8fe9285c1912fcf96379f4
Author: Thomas Graf <tgraf@suug.ch>
Date:   Sun Apr 24 20:19:54 2005 -0700

    [PKT_SCHED]: improve hashing performance of cls_fw
    
    Calculate hashtable size to fit into a page instead of a hardcoded
    256 buckets hash table. Results in a 1024 buckets hashtable on
    most systems.
    
    Replace old naive extract-8-lsb-bits algorithm with a better
    algorithm xor'ing 3 or 4 bit fields at the size of the hashtable
    array index in order to improve distribution if the majority of
    the lower bits are unused while keeping zero collision behaviour
    for the most common use case.
    
    Thanks to Wang Jian <lark@linux.net.cn> for bringing this issue
    to attention and to Eran Mann <emann@mrv.com> for the initial
    idea for this new algorithm.
    
    Signed-off-by: Thomas Graf <tgraf@suug.ch>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 0d3d077cd4f1154e63a9858e47fe3fb1ad0c03e5
Author: Herbert Xu <herbert@gondor.apana.org.au>
Date:   Sun Apr 24 20:16:19 2005 -0700

    [SELINUX]: Fix ipv6_skip_exthdr() invocation causing OOPS.
    
    The SELinux hooks invoke ipv6_skip_exthdr() with an incorrect
    length final argument.  However, the length argument turns out
    to be superfluous.
    
    I was just reading ipv6_skip_exthdr and it occured to me that we can
    get rid of len altogether.  The only place where len is used is to
    check whether the skb has two bytes for ipv6_opt_hdr.  This check
    is done by skb_header_pointer/skb_copy_bits anyway.
    
    Now it might appear that we've made the code slower by deferring
    the check to skb_copy_bits.  However, this check should not trigger
    in the common case so this is OK.
    
    Signed-off-by: Herbert Xu <herbert@gondor.apana.org.au>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit aa77d26961fa4ecb11fe4209578dcd62ad15819d
Author: Ben Greear <greearb@candelatech.com>
Date:   Sun Apr 24 20:13:19 2005 -0700

    [NET]: Document ->hard_start_xmit() locking in netdevices.txt
    
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit af191367a752625b9f05a25a9a76c727b9b17cab
Author: Ben Greear <greearb@candelatech.com>
Date:   Sun Apr 24 20:12:36 2005 -0700

    [NET]: Document ->hard_start_xmit() locking in comments.
    
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit db7530797992bb2be703f9f3cc69b1a578f812f8
Author: Jamal Hadi Salim <hadi@cyberus.ca>
Date:   Sun Apr 24 20:10:16 2005 -0700

    [PKT_SCHED]: Introduce simple actions.
    
    And provide an example simply action in order to
    demonstrate usage.
    
    Signed-off-by: Jamal Hadi Salim <hadi@cyberus.ca>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit ac6910e189471e6b46ecea59e7620b083329ad4f
Author: David S. Miller <davem@davemloft.net>
Date:   Sun Apr 24 20:06:16 2005 -0700

    [TG3]: Update driver version and release date.
    
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 758d11bf096ada9d38fc690c2efe5e4661685bfc
Author: Andrew Morton <akpm@osdl.org>
Date:   Sun Apr 24 19:14:36 2005 -0700

    [ATM]: ENI155P error handling fix
    
    From: Panagiotis Issaris <takis@lumumba.luc.ac.be>
    
    In the ENI155P device driver in six possible failure cases the requested
    irq is not being released.
    
    In three of the above possible failure cases additionally there seems to
    be a memory leak.
    
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit d5ac99a648b8c61d0c7f1c32a8ab7f1dca0123d2
Author: David S. Miller <davem@sunset.davemloft.net>
Date:   Sun Apr 24 19:12:33 2005 -0700

    [TCP]: skb pcount with MTU discovery
    
    The problem is that when doing MTU discovery, the too-large segments in
    the write queue will be calculated as having a pcount of >1.  When
    tcp_write_xmit() is trying to send, tcp_snd_test() fails the cwnd test
    when pcount > cwnd.
    
    The segments are eventually transmitted one at a time by keepalive, but
    this can take a long time.
    
    This patch checks if TSO is enabled when setting pcount.
    
    Signed-off-by: John Heffner <jheffner@psc.edu>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 158a0e45b69254a9ee4d7795e3b98d8c959fb799
Author: Jesper Juhl <juhl-lkml@dif.dk>
Date:   Sun Apr 24 18:59:30 2005 -0700

    [SLIP]: Remove redundant NULL pointer checks prior to kfree
    
    Signed-off-by: Jesper Juhl <juhl-lkml@dif.dk>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 18900829f32443658ca4d4793c01621c75d551c1
Author: chas williams <chas@cmf.nrl.navy.mil>
Date:   Sun Apr 24 18:58:15 2005 -0700

    [ATM]: [fore200e] pci doesn't use global board list; use pci_register_driver()
    
    Signed-off-by: Chas Williams <chas@cmf.nrl.navy.mil>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit e5695f0800f8450d9a48efb1424918d18093b00b
Author: chas williams <chas@cmf.nrl.navy.mil>
Date:   Sun Apr 24 18:55:35 2005 -0700

    [ATM]: [he] Use the DMA_32BIT_MASK constant from dma-mapping.h
    
    Signed-off-by: Tobias Klauser <tklauser@nuerscht.ch>
    Signed-off-by: Domen Puncer <domen@coderock.org>
    Signed-off-by: Chas Williams <chas@cmf.nrl.navy.mil>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 56cb515628e6a831bb76783f282a71f7285dad33
Author: Arnaldo Carvalho de Melo <acme@ghostprotocols.net>
Date:   Sun Apr 24 18:53:06 2005 -0700

    [AX25] Introduce ax25_type_trans
    
    Replacing the open coded equivalents and making ax25 look more like
    a linux network protocol, i.e. more similar to inet.
    
    Signed-off-by: Arnaldo Carvalho de Melo <acme@ghostprotocols.net>
    Signed-off-by: Ralf Baechle <ralf@linux-mips.org>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 3b2d59d1fc86cc7217f165100a939907802dc67c
Author: Patrick McHardy <kaber@trash.net>
Date:   Sun Apr 24 18:42:39 2005 -0700

    [NETFILTER]: Ignore PSH on SYN/ACK in TCP connection tracking
    
    Signed-off-by: Patrick McHardy <kaber@trash.net>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit e281e3ac2b6c294d672034909883e7bb9e649ac7
Author: Patrick McHardy <kaber@trash.net>
Date:   Sun Apr 24 18:41:38 2005 -0700

    [NETFILTER]: Fix NAT sequence number adjustment
    
    The NAT changes in 2.6.11 changed the position where helpers
    are called and perform packet mangling. Before 2.6.11, a NAT
    helper was called before the packet was NATed and had its
    sequence number adjusted. Since 2.6.11, the helpers get packets
    with already adjusted sequence numbers.
    
    This breaks sequence number adjustment, adjust_tcp_sequence()
    needs the original sequence number to determine whether
    a packet was a retransmission and to store it for further
    corrections. It can't be reconstructed without more information
    than available, so this patch restores the old order by
    calling helpers from a new conntrack hook two priorities
    below ip_conntrack_confirm() and adjusting the sequence number
    from a new NAT hook one priority below ip_conntrack_confirm().
    
    Tracked down by Phil Oester <kernel@linuxace.com>
    
    Signed-off-by: Patrick McHardy <kaber@trash.net>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 8e293ada7d6aaee43dd56a8077b83577dd108667
Author: Al Viro <viro@www.linux.org.uk>
Date:   Sun Apr 24 14:58:08 2005 -0700

    [PATCH] ppc trivial iomem annotations: pmac_smp.c
    
    Signed-off-by: Al Viro <viro@parcelfarce.linux.theplanet.co.uk>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit e2178f199b341cc3e3ac86be50a54b0d8d8a132f
Author: Al Viro <viro@www.linux.org.uk>
Date:   Sun Apr 24 14:58:08 2005 -0700

    [PATCH] ppc trivial iomem annotations: chrp
    
    Signed-off-by: Al Viro <viro@parcelfarce.linux.theplanet.co.uk>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 28a6815979b4eff29956549d62f72582a81f041e
Author: Al Viro <viro@www.linux.org.uk>
Date:   Sun Apr 24 14:58:08 2005 -0700

    [PATCH] ppc trivial iomem annotations: pmac_time.c
    
    Signed-off-by: Al Viro <viro@parcelfarce.linux.theplanet.co.uk>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit ef0299bf8e868c09bff13e6f3c4fc9b835f60471
Author: Al Viro <viro@parcelfarce.linux.theplanet.co.uk>
Date:   Sun Apr 24 12:28:36 2005 -0700

    [PATCH] mostek bogus sparse annotations fixed
    
    void * __iomem foo is not a pointer to iomem - it's an iomem variable
    containing void *.  A pile of such guys in arch/sparc64/kernel/time.c,
    drivers/sbus/char/rtc.c and include/asm-sparc64/mostek.h turned into
    intended void __iomem *. 
    
    Signed-off-by: Al Viro <viro@parcelfarce.linux.theplanet.co.uk>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit fdca124a1bcc7e624f6b887c6f26153f40ee43ee
Author: Al Viro <viro@www.linux.org.uk>
Date:   Sun Apr 24 12:28:36 2005 -0700

    [PATCH] missing include in mthca
    
    Missing include - usual portability problems...
    
    Signed-off-by: Al Viro <viro@parcelfarce.linux.theplanet.co.uk>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 461790f79028ee9bfc3dd9d9afccc7e264aff9c7
Author: Al Viro <viro@www.linux.org.uk>
Date:   Sun Apr 24 12:28:35 2005 -0700

    [PATCH] broken dependency for floppy on ARM
    
    (!ARCH_S390 && !M68K && !IA64 && !UML) is obviously always true on ARM.
    
    Intended behaviour for ARM is "absent unless we are on RiscPC or
    EBSA285".  So what we want is added && !ARM in the first term - without
    it the last part (|| ARCH_RPC || ARCH_EBSA285, that is) doesn't do
    anything. 
    
    Signed-off-by: Al Viro <viro@parcelfarce.linux.theplanet.co.uk>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit a62e7cef1aef9f98bddd92b8f9f8f3c2fb25037b
Author: Al Viro <viro@www.linux.org.uk>
Date:   Sun Apr 24 12:28:35 2005 -0700

    [PATCH] missing include in hisax
    
    Missing include, breaks at least on arm.
    
    Signed-off-by: Al Viro <viro@parcelfarce.linux.theplanet.co.uk>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 3106dbcd914d8dac4b89f52d8d51ec93526cbb95
Author: Al Viro <viro@www.linux.org.uk>
Date:   Sun Apr 24 12:28:35 2005 -0700

    [PATCH] __get_unaligned() turned into macro
    
    Turns __get_unaligned() and __put_unaligned into macros.  That is
    definitely safe; leaving them as inlines breaks on e.g.  alpha [try to
    build ncpfs there and you'll get unresolved symbols since we end up
    getting __get_unaligned() not inlined]. 
    
    Signed-off-by: Al Viro <viro@parcelfarce.linux.theplanet.co.uk>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit b5a48daddc88fa0467a6ba371fcff0710781bf11
Author: Al Viro <viro@www.linux.org.uk>
Date:   Sun Apr 24 12:28:35 2005 -0700

    [PATCH] broken dependency for I2C_MPC
    
    All boards dealt with by I2C_MPC are 32bit.  Moreover, driver simply
    won't build on ppc64 - it uses ppc32-only types all over the place. 
    Dependency fixed - it's PPC32, not PPC. 
    
    Signed-off-by: Al Viro <viro@parcelfarce.linux.theplanet.co.uk>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit e3b9ab1a6da339312bb23747693805fa63e2ffd0
Author: Al Viro <viro@www.linux.org.uk>
Date:   Sun Apr 24 12:28:35 2005 -0700

    [PATCH] missing dependency on sparc64
    
    CONFIG_HW_CONSOLE selects vt.c; without the stuff pulled by CONFIG_VT it
    will not build.  Normally we get both in drivers/char/Kconfig and there
    HW_CONSOLE depends on VT.  sparc64 does not pull drivers/char/Kconfig
    and has that sutff in arch/sparc64/Kconfig instead.  However, it forgets
    to add the same dependency.  As the result, turning VT off [which is
    possible] will end up with broken build.  For no good reason... 
    
    Signed-off-by: Al Viro <viro@parcelfarce.linux.theplanet.co.uk>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit fa732f556896836e88cd662ee7a664c4db6d080d
Author: Al Viro <viro@www.linux.org.uk>
Date:   Sun Apr 24 12:28:34 2005 -0700

    [PATCH] msnd_pinnacle GFP fix
    
    Dumb typo - __get_free_page() takes gfp mask (in this case -
    GFP_KERNEL), not the page size... 
    
    Signed-off-by: Al Viro <viro@parcelfarce.linux.theplanet.co.uk>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 01424961e621737c638e489b6a0b5e6602b02612
Author: Al Viro <viro@www.linux.org.uk>
Date:   Sun Apr 24 12:28:34 2005 -0700

    [PATCH] mempolicy.c GFP fix
    
    zonelist_policy() forgot to mask non-zone bits from gfp when comparing
    zone number with policy_zone. 
    
    ACKed-by: Andi Kleen <ak@suse.de>
    Signed-off-by: Al Viro <viro@parcelfarce.linux.theplanet.co.uk>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit bc86120a85ebf553180946e8854d1993f074e9f5
Author: Al Viro <viro@www.linux.org.uk>
Date:   Sun Apr 24 12:28:34 2005 -0700

    [PATCH] SCSI GFP fixes
    
    Somebody forgot that | has higher priority than ?:.  As the result,
    allocation is done with bogus flags - instead of GFP_ATOMIC + possibly
    GFP_DMA we always get GFP_DMA and no GFP_ATOMIC. 
    
    Signed-off-by: Al Viro <viro@parcelfarce.linux.theplanet.co.uk>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 9719b0c298bd6a4a608843dc989a5f94cd0a7c13
Author: Patrick Boettcher <patrick.boettcher@desy.de>
Date:   Sat Apr 23 13:16:15 2005 -0700

    [PATCH] USB: Fix for ati_remote
    
    when stealing code from ati_remote for a GPL-driver of my usbradio (because of
    its neat usb int transfers) I found out, that the inbuf is freed twice.
    
    I don't have the ati-remote, so I don't know it is a problem at all, but it
    looks strange to me anyway. Also I don't know if it has been fixed already in
    newer kernel versions.
    
    
    From: Patrick Boettcher <patrick.boettcher@desy.de>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>
    

commit f3fae6ed6aafe71826e03876ad3d4e1d3f238ec8
Author: David Brownell <david-b@pacbell.net>
Date:   Fri Apr 22 15:07:02 2005 -0700

    [PATCH] USB: better usbnet zaurus/mdlm/... fix
    
    This is a somewhat more comprehensive fix for the problem of devices
    like the newer Zaurii ... or in this case some Motorola cell phones.
    
    To recap, the problem's root cause is that these devices aren't using
    standard USB class specifications for their network links, and so far
    we've had to add lots of device-specific driver entries.  The vendor
    fix abuses the CDC MDLM descriptors (they _could_ have conformed to
    the spec, but didn't) and defines a "Belcarra firmware" pseudo-class.
    
    This patch recognizes that pseudo-class by the GUIDs in those descriptors,
    and handles the devices that just use the Zaurus framing.
    
    Signed-off-by: David Brownell <dbrownell@users.sourceforge.net>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>
    

commit 7ea13c9c0e40d24c5f45a3a6bee8a2a39bfb1df4
Author: David Hollis <dhollis@davehollis.com>
Date:   Fri Apr 22 15:07:02 2005 -0700

    [PATCH] usbnet: Convert ASIX code to use new status infrastructure
    
    Modify the ASIX USB Ethernet code to make use of the new status
    infrastructure in usbnet.
    
    Additionally, add a link_reset() handler to the struct usbnet
    structure to provide a generic means for a driver to perform link
    reset tasks such as a determining link speed and setting
    device flags accordingly.
    
    
    Signed-off-by: David Hollis <dhollis@davehollis.com>
    Acked-by: David Brownell <dbrownell@users.sourceforge.net>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>
    
    

commit fb3b4ebc0be618dbcc2326482a83c920d51af7de
Author: Roman Kagan <rkagan@mail.ru>
Date:   Fri Apr 22 15:07:01 2005 -0700

    [PATCH] USB: MODALIAS change for bcdDevice
    
    The patch below adjusts the MODALIAS generated by the usb hotplug
    function to match the proposed change to scripts/mod/file2alias.c.
    
    Signed-off-by: Roman Kagan <rkagan@mail.ru>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>
    
    

commit b19dcd9341a81ff6e04fcec396f77eeb91570584
Author: Roman Kagan <rkagan@mail.ru>
Date:   Fri Apr 22 15:07:01 2005 -0700

    [PATCH] USB: scripts/mod/file2alias.c: handle numeric ranges for USB bcdDevice
    
    Another attempt at that...
    
    The attached patch fixes the longstanding problem with USB bcdDevice
    numeric ranges incorrectly converted into patterns for MODULE_ALIAS
    generation.  Previously it put both the lower and the upper limits into
    the pattern, dlXdhY, making it impossible to fnmatch against except for
    a few special cases, like dl*dh* or dlXdhX.
    
    The patch makes it generate multiple MODULE_ALIAS lines covering the
    whole range with fnmatch-able patterns.  E.g. for a range between 0x0001
    and 0x8345 it gives the following patterns:
    
    000[1-9]
    00[1-9]*
    0[1-9]*
    [1-7]*
    8[0-2]*
    83[0-3]*
    834[0-5]
    
    Since bcdDevice is 2 bytes wide = 4 digits in hex representation, the
    max no. of patters is 2 * 4 - 1 = 7.
    
    The values are BCD (binary-coded decimals) and not hex, so patterns
    using a dash seem to be safe regardless of locale collation order.
    
    The patch changes bcdDevice part of the alias from dlXdhY to dZ, but
    this shouldn't have big compatibility issues because fnmatch()-based
    modprobing hasn't yet been widely used.  Besides, the most common (and
    almost the only working) case of dl*dh* becomes d* and thus continues to
    work.
    
    The patch is against 2.6.12-rc2, applies to -mm3 with an offset.  The
    matching patch to fix the MODALIAS environment variable now generated by
    the usb hotplug function follows.
    
    Signed-off-by: Roman Kagan <rkagan@mail.ru>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>
    
    

commit 2e0a6b8cd27375089f8356e7f1ce2319059696eb
Author: Adrian Bunk <bunk@stusta.de>
Date:   Fri Apr 22 15:07:01 2005 -0700

    [PATCH] USB: drivers/usb/net/zd1201.c: make some code static
    
    This patch makes some needlessly global code static.
    
    Signed-off-by: Adrian Bunk <bunk@stusta.de>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>
    
    

commit 2c47e7f37830cc83e7c77f0d5b7d4ac15105475b
Author: Adrian Bunk <bunk@stusta.de>
Date:   Fri Apr 22 15:07:00 2005 -0700

    [PATCH] USB: drivers/usb/media/pwc/: make code static
    
    This patch makes needlessly global code static.
    
    Signed-off-by: Adrian Bunk <bunk@stusta.de>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>
    
    

commit 7107627b04b46bce8212e6a6811add5eb8bcb476
Author: Adrian Bunk <bunk@stusta.de>
Date:   Fri Apr 22 15:07:00 2005 -0700

    [PATCH] USB: drivers/usb/media/sn9c102_core.c: make 2 functions static
    
    This patch makes two needlessly global functions static.
    
    Signed-off-by: Adrian Bunk <bunk@stusta.de>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>
    
    

commit be5e3383a95446e933be198d3025df10a072794b
Author: Adrian Bunk <bunk@stusta.de>
Date:   Fri Apr 22 15:07:00 2005 -0700

    [PATCH] USB: drivers/usb/input/usbkbd.c: make a function static
    
    This patch makes a needlessly global function static.
    
    Signed-off-by: Adrian Bunk <bunk@stusta.de>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>
    

commit cef11127ea59cc5ac8fb956c355727999c6796dc
Author: Thomas Winischhofer <thomas@winischhofer.net>
Date:   Fri Apr 22 15:06:59 2005 -0700

    [PATCH] USB: new SiS device id
    
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>
    

commit 35ecc486a3f1811b85b7b22196b8b7422d713b51
Author: Greg KH <gregkh@suse.de>
Date:   Fri Apr 22 15:06:59 2005 -0700

    [PATCH] USB: fix up the HP49G+ Calculator USB Serial driver
    
    Fix compiler warnings, and remove unneeded #includes
    
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>
    

commit 36045fb77cb8b4043063ea54067907a1afd317b4
Author: Arthur Huillet <arthur.huillet@agoctrl.org>
Date:   Fri Apr 22 15:06:59 2005 -0700

    [PATCH] USB: add HP49G+ Calculator USB Serial support
    
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>
    

commit 35f4a0c4416b4fd789f94328dc5940e79e1507b0
Author: Sven Anderson <sven@anderson.de>
Date:   Fri Apr 22 15:06:58 2005 -0700

    [PATCH] USB: clean up all iPod models in unusual_devs.h
    
    Phil Dibowitz wrote:
    > 1. You're adding product IDs 1202, 1203, 1204, and 1205. 1203 was
    > already there, but you remove it, OK, but 1205 is already there, so
    > you'll need to fix that.
    
    I was not removing 1203, it's just the extension of the bcd range. You are 
    right about 1205, as I wrote, it was a patch against 2.6.11.7. Attached is 
    a patch against 2.6.12-rc2.
    
    > 2. I'm OK with the full bcd range if Apple is changing it on firmware
    > revs... fine, but it's bcd, not hex... 0x9999 =)
    
    I just copied from other entries. There're a lot 0xffffs in unusual_dev.h, 
    so I assumed it is correct. I changed it to 0x9999.
    
    > 3. It's rather obnoxious to take the original submitter's credit away.
    
    I didn't remove it, I changed it to "based on...". Because I changed 
    something (the range) in his entry, I thought it is the best to take the 
    responsibility but keep the origin. Anyway, in the new patch I did it in a 
    different way.
    
    > 4. Your /proc/bus/usb/devices shows 1204, but I see no evidence 1202 is
    > really an iPod.
    
    I don't have an old iPod mini, but you find a lot of evidence here:
    
    http://www.google.com/search?q=0x1202+ipod
    
    Especially this one:
    
    http://www.qbik.ch/usb/devices/showdescr.php?id=2737
    
    > It also looks like 1205's entry is getting mangled, but I haven't
    > attempted to apply the patch, so I'm not sure.
    
    No, the patch was ok, but I agree it looks strange. It's not very 
    readable, because I cannot tell diff to work blockwise instead of 
    linewise. Because of the similarity of the entries, diff splits and merges 
    them. Anyway, the new patch "looks" better. ;-)
    
    Signed-off-by: Sven Anderson <sven-linux@anderson.de>
    Signed-off-by: Phil Dibowitz <phil@ipom.com>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>
    
    
    

commit 275cfdf412aee2367883b6cd764e06c07bd37a79
Author: Hideaki YOSHIFUJI <yoshfuji@linux-ipv6.org>
Date:   Fri Apr 22 15:06:58 2005 -0700

    [PATCH] USB: compilation failure on usb/image/microtek.c
    
    maybe typo?
    
    Signed-off-by: Hideaki YOSHIFUJI <yoshfuji@linux-ipv6.org>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>
    

commit df6c6804ce1d383c878ab071bce8125125d96abc
Author: Ashok Raj <ashok.raj@intel.com>
Date:   Fri Apr 22 14:46:24 2005 -0700

    [IA64] Fix build errors for !HOTPLUG case.
    
    Signed-off-by: Ashok Raj <ashok.raj@intel.com>
    Signed-off-by: Tony Luck <tony.luck@intel.com>

commit b8d8b883e6f029e99c35c88f853501740e322131
Author: Ashok Raj <ashok.raj@intel.com>
Date:   Fri Apr 22 14:44:40 2005 -0700

    [IA64] cpu hotplug: return offlined cpus to SAL
    
    This patch is required to support cpu removal for IPF systems. Existing code
    just fakes the real offline by keeping it run the idle thread, and polling
    for the bit to re-appear in the cpu_state to get out of the idle loop.
    
    For the cpu-offline to work correctly, we need to pass control of this CPU 
    back to SAL so it can continue in the boot-rendez mode. This gives the
    SAL control to not pick this cpu as the monarch processor for global MCA
    events, and addition does not wait for this cpu to checkin with SAL
    for global MCA events as well. The handoff is implemented as documented in 
    SAL specification section 3.2.5.1 "OS_BOOT_RENDEZ to SAL return State"
    
    Signed-off-by: Ashok Raj <ashok.raj@intel.com>
    Signed-off-by: Tony Luck <tony.luck@intel.com>

commit 7130667107cd3ab9d6802b69bab63c7d22f20bd4
Author: Arun Sharma <arun.sharma@intel.com>
Date:   Fri Apr 22 13:06:47 2005 -0700

    [IA64] ia32_signal.c: erroneous use of memset/memcpy
    
    Found by Alexander Nyberg, improved by Bjorn Helgaas.
    
    - Fix the incorrect argument to sizeof()
    - looks like memcpy() code pass was dervived from code that used
      copy_from_user().  But in this case we are doing to kernel space
      to kernel space copy, so memcpy is the right routine, but it
      doesn't return an error code.
     
    Signed-off-by: Arun Sharma <arun.sharma@intel.com>
    Signed-off-by: Tony Luck <tony.luck@intel.com>

commit efab7739d99eae948971140b2aa3dddf7f72c900
Author: Alexander Nyberg <alexn@telia.com>
Date:   Fri Apr 22 10:22:07 2005 -0700

    [PATCH] x86_64: fix new out of line put_user()
    
    The labels after the last put_user patch were misplaced so
    exceptions on the real mov instructions would not be handled.
    
    Noted by Brian Gerst <bgerst@didntduck.org>
    

commit 21b7ef0c6c62a14bc8e1c8c0af4e1f0ba3a56d66
Author: Linus Torvalds <torvalds@ppc970.osdl.org>
Date:   Fri Apr 22 10:18:06 2005 -0700

    Merge rsync://rsync.kernel.org/pub/scm/linux/kernel/git/davem/sparc-2.6.git

commit b179fb8ca57590eeb0a5d6c8dc99f91773f09c73
Author: David S. Miller <davem@davemloft.net>
Date:   Thu Apr 21 22:18:03 2005 -0700

    [SPARC64]: In sunsab driver, make sure to set the uart timeout.
    
    This breaks serial consoles badly.  Thanks to Eric Brower
    for tracking down the problem.
    
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 623f41eb923d7f34888cbd9e4f50a7b1a79d0ae5
Author: David S. Miller <davem@davemloft.net>
Date:   Thu Apr 21 22:06:13 2005 -0700

    [SPARC64]: In sunsu driver, make sure to fully init chip for kbd/ms
    
    We were forgetting to call sunsu_change_speed().  The reason
    that replugging in the mouse cable "fixes things" is that
    causes a BREAK interrupt which in turn caused a call to
    sunsu_change_speed() which would get the chip setup properly.
    
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit b4bca26c0160f48b4eb04f21d31a229832732013
Author: David S. Miller <davem@sunset.davemloft.net>
Date:   Thu Apr 21 21:42:34 2005 -0700

    [SPARC]: Provide generic ioctls in Sparc RTC driver.
    
    Provide support for drivers/char/rtc.c ioctls in the
    Mostek rtc driver as well as the Sparc specific RTCGET
    and RTCSET.
    
    This allows userspace to be much less messy.  Currently
    util-linux and other spots jump through hoops trying
    various ioctl variants until it hits the right one whatever
    driver actually being used supports.
    
    Eventually all of this should move over to the genrtc.c
    driver, but not today...
    
    While we are here, fix up the register types for sparse.
    
    Thanks to Frans Pop for helping point out this issue.
    
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit d7be828e03969ea7f922f299acb8daa0d8ce7006
Author: David S. Miller <davem@davemloft.net>
Date:   Thu Apr 21 21:41:33 2005 -0700

    [SPARC64]: Provide a pgprot_noncached() implementation.
    
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 5c5d281a93e9816966b6131ccec19519dab0e103
Author: Patrick McHardy <kaber@trash.net>
Date:   Thu Apr 21 20:12:32 2005 -0700

    [XFRM]: Fix existence lookup in xfrm_state_find
    
    Use 'daddr' instead of &tmpl->id.daddr, since the latter
    might be zero.  Also, only perform the lookup when
    tmpl->id.spi is non-zero.
    
    Signed-off-by: Patrick McHardy <kaber@trash.net>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 7938109fff944e0117976a39946d99d2b0b0250d
Author: Michael Chan <mchan@broadcom.com>
Date:   Thu Apr 21 17:13:59 2005 -0700

    [TG3]: Add msi test
    
    Add MSI test for chips that support MSI. If MSI test fails, it will
    switch back to INTx mode and will print a message asking the user to
    report the failure.
    
    Signed-off-by: Michael Chan <mchan@broadcom.com>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 88b06bc26b87cf0490b0e3faea7fefc7549dd75d
Author: Michael Chan <mchan@broadcom.com>
Date:   Thu Apr 21 17:13:25 2005 -0700

    [TG3]: Add msi support
    
    Add MSI support for 5751 C0 and 5752.
    
    Signed-off-by: Michael Chan <mchan@broadcom.com>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 1c8594b48b00a98d12477355e944e165a5f64cd5
Author: Michael Chan <mchan@broadcom.com>
Date:   Thu Apr 21 17:12:46 2005 -0700

    [TG3]: Fix bug in tg3_set_eeprom()
    
    Fix a bug in tg3_set_eeprom() when the length is less than 4 and the
    offset is not 4-byte aligned.
    
    Signed-off-by: Michael Chan <mchan@broadcom.com>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit e6af301be3c129adbc8a7c8ffb76e62533ad9575
Author: Michael Chan <mchan@broadcom.com>
Date:   Thu Apr 21 17:12:05 2005 -0700

    [TG3]: Add nvram lock-out support for 5752 TPM
    
    Add support for the NVRAM lock-out feature for TPM in 5752. If lock-out
    is enabled, certain NVRAM registers cannot be written to.
    
    Signed-off-by: Michael Chan <mchan@broadcom.com>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 361b4ac29bc651c7612d4bf21434ae6fe06b78e4
Author: Michael Chan <mchan@broadcom.com>
Date:   Thu Apr 21 17:11:21 2005 -0700

    [TG3]: Add nvram detection for 5752
    
    Signed-off-by: Michael Chan <mchan@broadcom.com>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 3e7d83bc96d59013792e5546e7832668d3adbce7
Author: Michael Chan <mchan@broadcom.com>
Date:   Thu Apr 21 17:10:36 2005 -0700

    [TG3]: Add GPIO3 for 5752
    
    Add bit definitions for the new GPIO3 in 5752. GPIO3 must be driven as
    output when it is unused.
    
    Signed-off-by: Michael Chan <mchan@broadcom.com>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit ff645bec523819fa4d28d7e0de7d998e3edb0c57
Author: Michael Chan <mchan@broadcom.com>
Date:   Thu Apr 21 17:09:53 2005 -0700

    [TG3]: Workaround 5752 A0 chip ID
    
    The 5752 A0 chip ID is wrong in hardware. The simplest way to workaround
    it is to change it to the correct value in tp->pci_chip_rev_id. This
    way, it is easier to check for the ASIC_REV_5752 in the rest of the
    driver.
    
    Signed-off-by: Michael Chan <mchan@broadcom.com>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 8c6bda1a89c148f3a28edc09a76dac9bff57d8ee
Author: Michael Chan <mchan@broadcom.com>
Date:   Thu Apr 21 17:09:08 2005 -0700

    [TG3]: Fix tg3_set_power_state()
    
    Fix tg3_set_power_state to drive GPIOs properly based on the
    TG3_FLAG_EEPROM_WRITE_PROTECT flag. Some delays are also added after D0
    and D3 power state changes.
    
    Signed-off-by: Michael Chan <mchan@broadcom.com>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 314fba348e1f64a30b53d3cff5d96872424e8498
Author: Michael Chan <mchan@broadcom.com>
Date:   Thu Apr 21 17:07:04 2005 -0700

    [TG3]: Setup proper GPIO settings
    
    Setup proper GPIO settings in tp->grc_local_ctrl before calling
    tg3_set_power() state in tg3_get_invariants() and after chip reset.
    
    Signed-off-by: Michael Chan <mchan@broadcom.com>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 7d0c41ef89dad9008edf1c3c0022721ebad39999
Author: Michael Chan <mchan@broadcom.com>
Date:   Thu Apr 21 17:06:20 2005 -0700

    [TG3]: Split tg3_phy_probe into 2 functions
    
    Split the 1st half of tg3_phy_probe() into tg3_get_eeprom_hw_cfg() so
    that the TG3_FLAG_EEPROM_WRITE_PROT can be determined before calling
    tg3_set_power_state() in tg3_get_invariants(). This will allow
    tg3_set_power_state() to drive the GPIOs correctly based on the config.
    information in eeprom.
    
    On the 5752, there are no pull-up resistors on the GPIO pins and it is
    necessary to drive the unused GPIOs as output.
    
    Signed-off-by: Michael Chan <mchan@broadcom.com>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 85e94cedc44d1c2c1663b5b18f703ca5e7316e59
Author: Michael Chan <mchan@broadcom.com>
Date:   Thu Apr 21 17:05:28 2005 -0700

    [TG3]: Minor 5752 fixes
    
    Some minor 5752 fixes mostly for correctness and add 5752 PHY ID.
    
    Signed-off-by: Michael Chan <mchan@broadcom.com>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 053d78000be4906fac6446ad517ca3897dc6cd84
Author: John W. Linville <linville@tuxdriver.com>
Date:   Thu Apr 21 17:03:52 2005 -0700

    [TG3]: add support for bcm5752 rev a1
    
    Replace existing ASIC_REV_5752 definition with ASIC_REV_5752_A0,
    and add definition for ASIC_REV_5752_A1. Then, add ASIC_REV_5752_A1
    to check for setting TG3_FLG2_5750_PLUS in tg3_get_invariants.
    
    Signed-off-by: John W. Linville <linville@tuxdriver.com>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 1b440c568e28186956ef765c69ab124401088663
Author: John W. Linville <linville@tuxdriver.com>
Date:   Thu Apr 21 17:03:18 2005 -0700

    [TG3]: check TG3_FLG2_5750_PLUS flag to set TG3_FLG2_5705_PLUS flag
    
    Use check of TG3_FLG2_5750_PLUS in tg3_get_invariants to set
    TG3_FLG2_5705_PLUS flag.
    
    Signed-off-by: John W. Linville <linville@tuxdriver.com>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit bb7064dc09ff90015ddc7d818dd8fefb8ca5b936
Author: John W. Linville <linville@tuxdriver.com>
Date:   Thu Apr 21 17:02:41 2005 -0700

    [TG3]: use TG3_FLG2_57{05,50}_PLUS flags in tg3_get_invariants
    
    Rewrite checks in tg3_get_invariants to use TG3_FLG2_5705_PLUS and
    TG3_FLG2_5750_PLUS flags.
    
    Signed-off-by: John W. Linville <linville@tuxdriver.com>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 863925f59e5425e4af6996b9c50857c766940176
Author: John W. Linville <linville@tuxdriver.com>
Date:   Thu Apr 21 17:02:04 2005 -0700

    [TG3]: more use of TG3_FLG2_5705_PLUS flag
    
    Rewrite of a couple of troublesome multi-way if statements to use
    TG3_FLG2_5705_PLUS flag.
    
    Signed-off-by: John W. Linville <linville@tuxdriver.com>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit cbf46853c8db75f98bd005dc545aca0703063d4b
Author: John W. Linville <linville@tuxdriver.com>
Date:   Thu Apr 21 17:01:29 2005 -0700

    [TG3]: use new TG3_FLG2_5750_PLUS flag
    
    Replace a number of two-way if statements checking for 5750, and/or
    5752 to reference the newly-defined TG3_FLG2_5750_PLUS flag instead.
    
    Signed-off-by: John W. Linville <linville@tuxdriver.com>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 6708e5cc103ba045fca035b4d8df236ca31fb8bc
Author: John W. Linville <linville@tuxdriver.com>
Date:   Thu Apr 21 17:00:52 2005 -0700

    [TG3]: define TG3_FLG2_5750_PLUS flag
    
    Define TG3_FLG2_5750_PLUS flag and set it in tg3_get_invariants for
    ASIC_REV_5750 or ASIC_REV_5752.
    
    Signed-off-by: John W. Linville <linville@tuxdriver.com>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit fcf026936c613fc6ca4685677a461100d87eec81
Author: John W. Linville <linville@tuxdriver.com>
Date:   Thu Apr 21 17:00:02 2005 -0700

    [TG3]: use TG3_FLG2_5705_PLUS instead of multi-way if's
    
    Replace a number of three-way if statements checking for 5705, 5750,
    and 5752 to reference the equivalent TG3_FLG2_5705_PLUS flag instead.
    
    Signed-off-by: John W. Linville <linville@tuxdriver.com>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 6e9017a7d9b949aea638eeba67d34affaa145f14
Author: John W. Linville <linville@tuxdriver.com>
Date:   Thu Apr 21 16:58:56 2005 -0700

    [TG3]: add bcm5752 entry to pci_ids.h
    
    Add proper entry for bcm5752 PCI ID to pci_ids.h, and use it in tg3.
    I did this separately in case patches like this (i.e. new PCI IDs)
    need to come from more "official" sources.
    
    Signed-off-by: John W. Linville <linville@tuxdriver.com>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit af2bcd97b570f39da94103f80f67433dab515049
Author: John W. Linville <linville@tuxdriver.com>
Date:   Thu Apr 21 16:57:50 2005 -0700

    [TG3]: add bcm5752 to tg3_pci_tbl
    
    Add hard-coded definition of bcm5752 PCI ID to tg3_pci_tbl.
    Next patch will change entry to use pci_ids.h-based definition.
    
    Signed-off-by: John W. Linville <linville@tuxdriver.com>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 2052da946096590035438626afbc7f329d2549d8
Author: John W. Linville <linville@tuxdriver.com>
Date:   Thu Apr 21 16:56:08 2005 -0700

    [TG3]: add basic bcm5752 support
    
    Add ASIC_REV_5752 definition.
    
    Track-down all references to ASIC_REV_5750 and mirror them with
    references to the newly defined ASIC_REV_5752.
    
    Signed-off-by: John W. Linville <linville@tuxdriver.com>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit ebc37b611616ad46dce7d590b15ad655aa50213a
Author: Adrian Bunk <bunk@stusta.de>
Date:   Thu Apr 21 16:48:26 2005 -0700

    [ATM]: net/atm/resources.c: remove __free_atm_dev
    
    Signed-off-by: Adrian Bunk <bunk@stusta.de>
    Signed-off-by: Chas Williams <chas@cmf.nrl.navy.mil>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 29c4be51e3fd52205d848248d38924941f22ca0e
Author: Arnaldo Carvalho de Melo <acme@ghostprotocols.net>
Date:   Thu Apr 21 16:46:56 2005 -0700

    [AX25]: make ax25_queue_xmit a net_device parameter
    
    I.e. not using skb->dev as a way to pass the parameter used to fill...
    skb->dev :-)
    
    Also to get the _type_trans open coded sequence grouped, next changesets
    will introduce ax25_type_trans.
    
    Signed-off-by: Ralf Baechle <ralf@linux-mips.org>
    Signed-off-by: Arnaldo Carvalho de Melo <acme@ghostprotocols.net>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 208a6dfbd651f3a16c635678a731b419d3d9646f
Author: Chas Williams <chas@cmf.nrl.navy.mil>
Date:   Thu Apr 21 16:44:57 2005 -0700

    [ATM]: sk_atm() conversion missed subtle change of vcc
    
    Signed-off-by: Chas Williams <chas@cmf.nrl.navy.mil>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 26095455ac2943edb0852aba1ff8f8026aabe07b
Author: Patrick McHardy <kaber@trash.net>
Date:   Thu Apr 21 16:43:02 2005 -0700

    [NET]: Add missing newline for skb_*_panic
    
    While we're at it, lets also replace KERN_INFO by KERN_EMERG to
    make sure the user gets to see it.
    
    Signed-off-by: Patrick McHardy <kaber@trash.net>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 1cff94c6fecdc54d6f022ae5a22888f8272804a1
Author: James Bottomley <James.Bottomley@SteelEye.com>
Date:   Thu Apr 21 16:20:35 2005 -0700

    [PATCH] fix subarch breakage in amd dual core updates
    
    The patch to arch/i386/kernel/cpu/amd.c relies on the variable
    cpu_core_id which is defined in i386/kernel/smpboot.c.  This means it is
    only present if CONFIG_X86_SMP is defined, not CONFIG_SMP (alternative
    SMP harnesses won't have it, which is why it breaks voyager).
    
    Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 62b56faa43a7e672e659d14f38f553ed8b40ea70
Author: Adrian Bunk <bunk@stusta.de>
Date:   Thu Apr 21 14:09:42 2005 -0700

    [PATCH] Fix tgafb.c compile failure
    
    The untested patch below should fix this compile error.
    
    Signed-off-by: Adrian Bunk <bunk@stusta.de>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit e4ec0f23c878f761cf33f3cbb66c66d6c05931ba
Author: Jody McIntyre <scjody@steamballoon.com>
Date:   Thu Apr 21 14:09:42 2005 -0700

    [PATCH] Fix non-legacy ISO receive regression
    
    Fix non-legacy multichannel ISO receive, broken by Parag Wardukar's
    allocation fix.  Multichannel ISO receive still sucks; it should be possible
    to use both legacy and non-legacy modes at the same time, but with this
    patch, things are no worse than they were in 2.6.11 and allocation is
    still done at the correct time.
    
    Signed-off-by: Jody McIntyre <scjody@steamballoon.com>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit dfe547ab872951949a1a2fcc5cedbedad27a2fe5
Author: Jody McIntyre <scjody@steamballoon.com>
Date:   Thu Apr 21 14:09:42 2005 -0700

    [PATCH] ohci1394: tlabels misprinted in DBGMSG
    
    - Print the correct value in the DBGMSG in dma_rcv_tasklet().
      See OHCI 1.1 section 8.7, page 103 ff.
    - Print tlabels as %d everywhere.
    
    Signed-off-by: Stefan Richter <stefanr@s5r6.in-berlin.de>
    Signed-off-by: Jody McIntyre <scjody@steamballoon.com>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 8d134db051134c38ae6bf36034403c7da7f0e3da
Author: Linus Torvalds <torvalds@ppc970.osdl.org>
Date:   Thu Apr 21 14:02:34 2005 -0700

    Merge rsync://rsync.kernel.org/pub/scm/linux/kernel/git/aegl/linux-2.6.git

commit bd6ae2f6d61da0f90c6b66e9a4ab6c53ef8c159a
Author: Andreas Herrmann <aherrman@de.ibm.com>
Date:   Thu Apr 21 16:14:31 2005 -0400

    [SCSI] zfcp: fix compile error
    
    Signed-off-by: Andreas Herrmann <aherrman@de.ibm.com>
    Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

commit 3a73e8c7715cdf53c24b602bfca15ec54d7c989b
Author: Nate Dailey <nhdailey@verizon.net>
Date:   Thu Apr 21 16:14:05 2005 -0400

    [SCSI] drivers/scsi/sr_ioctl.c: check for failed allocation
    
    I noticed a case in sr_ioctl.c's sr_get_mcn where a buffer is
    allocated, but the pointer isn't checked for null.
    
    Signed-off-by: Nate Dailey <nate.dailey@stratus.com>
    Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

commit 0bdcd78ea2342ad1a9c79cac99eefcfd0b3f1c2b
Author: Christoph Hellwig <hch@lst.de>
Date:   Thu Apr 21 16:13:39 2005 -0400

    [SCSI] aic7xxx: remove inquiry sniffing leftovers
    
    Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

commit 1c97a12a29b49ad4432927eac076fd5e3dedece6
Author: Andrew Vasquez <andrew.vasquez@qlogic.com>
Date:   Thu Apr 21 16:13:36 2005 -0400

    [SCSI] qla2xxx: remove a transport #include
    
    Make transport-functions structure non-static.  Replace #include of
    scsi_transport.h with a forward declaration.
    
    Signed-off-by: Andrew Vasquez <andrew.vasquez@qlogic.com>
    Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

commit 40b7bc062cdacb3883bb0f94eb122b8336af5b36
Author: Richard Henderson <rth@twiddle.net>
Date:   Thu Apr 21 11:28:26 2005 -0700

    [PATCH] alpha: key management syscalls
    
    Allocate syscall numbers for add_key, request_key, keyctl.
    

commit 821376bf15e692941f9235f13a14987009fd0b10
Author: David Mosberger-Tang <davidm@hpl.hp.com>
Date:   Thu Apr 21 11:07:59 2005 -0700

    [IA64] fix fls()
    
    The ia64-version of fls() never worked as intended (the bitnumbering
    was off by 1 and fls(0) was undefined).  This patch fixes the problem
    by using a popcnt-based fls(), which on McKinley-derived cores is
    slightly faster than both ia64_fls() and generic_fls().  The resulting
    code, however, is bigger (7-8 bundles instead of about 3 bundles).
    Also switch ia64_popcnt() to __builtin_popcountl() for GCC v3.4 or
    newer since the compiler can predicate that and schedule it better.
    
    Thanks to Simon Derr and Matt Mackall for tracking down this bug.
    
    Signed-off-by: David Mosberger-Tang <davidm@hpl.hp.com>
    Signed-off-by: Tony Luck <tony.luck@intel.com>

commit d8470b7c13e11c18cf14a7e3180f0b00e715e4f0
Author: Karsten Keil <kkeil@suse.de>
Date:   Thu Apr 21 08:30:30 2005 -0700

    [PATCH] fix for ISDN ippp filtering
    
    We do not longer use DLT_LINUX_SLL for activ/pass filters but
    DLT_PPP_WITHDIRECTION witch need 1 as outbound flag. 
    
    Signed-off-by: Karsten Keil <kkeil@suse.de>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>
    

commit 3a6fd752a50af92765853879f4a11cc0cfcd0320
Author: Alexander Nyberg <alexn@telia.com>
Date:   Thu Apr 21 07:59:51 2005 -0700

    [PATCH] x86_64: Bug in new out of line put_user()
    
    The new out of line put_user() assembly on x86_64 changes %rcx without
    telling GCC about it causing things like:
    
    http://bugme.osdl.org/show_bug.cgi?id=4515 
    
    See to it that %rcx is not changed (made it consistent with get_user()).
    
    Signed-off-by: Alexander Nyberg <alexn@telia.com>
    Signed-off-by: ak@suse.de
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>
    

commit 6d9c5d94d39a09d9b112613f0bfdb9af0e6dc253
Author: Linus Torvalds <torvalds@ppc970.osdl.org>
Date:   Thu Apr 21 07:36:42 2005 -0700

    Merge rsync://rsync.kernel.org/pub/linux/kernel/people/davem/sparc-2.6.git

commit 858eaca169ed5e7b1b14eebb889323e75a02af0e
Author: James Bottomley <James.Bottomley@SteelEye.com>
Date:   Thu Apr 21 07:35:45 2005 -0700

    [PATCH] Fix aic7xxx_osm.c compile with older gcc's
    
    My version of gcc doesn't warn about this error (declaration in the
    middle of a set of statements).
    
    The fix is simple (this also corrects return code; for init functions it
    should be zero or error). 
    

commit 489ec5f5d59b306e4ccc505eac417526adedb438
Author: Al Viro <viro@parcelfarce.linux.theplanet.co.uk>
Date:   Wed Apr 20 17:12:41 2005 -0700

    [SPARC64]: sparc64 preempt + smp
    
    PREEMPT+SMP support - see if it looks sane...
    
    Signed-off-by: Al Viro <viro@parcelfarce.linux.theplanet.co.uk>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit a2755a80f40e5794ddc20e00f781af9d6320fafb
Author: Linus Torvalds <torvalds@ppc970.osdl.org>
Date:   Wed Apr 20 16:24:21 2005 -0700

    Linux v2.6.12-rc3
    
    Releasing this will also make "git" the official source control
    thing. Here's to hoping for the best.

commit 4d78b6c78ae6d87e4c1c8072f42efa716f04afb9
Author: Herbert Xu <herbert@gondor.apana.org.au>
Date:   Tue Apr 19 22:48:59 2005 -0700

    [IPSEC]: COW skb header in UDP decap
    
    The following patch just makes the header part of the skb writeable.
    This is needed since we modify the IP headers just a few lines below.
    
    Signed-off-by: Herbert Xu <herbert@gondor.apana.org.au>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit c7f905f0f6d49ed8c1aa4566c31f0383a0ba0c9d
Author: Herbert Xu <herbert@gondor.apana.org.au>
Date:   Tue Apr 19 22:44:17 2005 -0700

    [ATALK]: Add missing dev_hold() to atrtr_create().
    
    Signed-off-by: Herbert Xu <herbert@gondor.apana.org.au>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 88a66858253c57334a519a77187234867bc8605c
Author: Arnaldo Carvalho de Melo <acme@ghostprotocols.net>
Date:   Tue Apr 19 22:41:54 2005 -0700

    [SOCK]: on failure free the sock from the right place
    
    Signed-off-by: Arnaldo Carvalho de Melo <acme@ghostprotocols.net>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 9c2b3328f74800bb370d08bb3a4255d5fe833e94
Author: Stephen Hemminger <shemminger@osdl.org>
Date:   Tue Apr 19 22:39:42 2005 -0700

    [NET]: skbuff: remove old NET_CALLER macro
    
    Here is a revised alternative that uses BUG_ON/WARN_ON
    (as suggested by Herbert Xu) to eliminate NET_CALLER.
    
    Signed-off-by: Stephen Hemminger <shemminger@osdl.org>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 98f245e797a01611d6734c7d192240f1361439d3
Author: David S. Miller <davem@davemloft.net>
Date:   Tue Apr 19 22:37:04 2005 -0700

    [RTNETLINK]: Add comma to final entry in link_rtnetlink_table
    
    Noticed by Herbert Xu.
    
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 240eed95eb55b43a3daadbf0cd7298f44eaa737c
Author: Thomas Graf <tgraf@suug.ch>
Date:   Tue Apr 19 22:35:07 2005 -0700

    [RTNETLINK]: Protocol family wildcard dumping for routing rules
    
    Be kind to userspace and don't force them to hardcode protocol
    families just to have it changed again once we support routing
    rules for more than one protocol family.
    
    Signed-off-by: Thomas Graf <tgraf@suug.ch>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 3320da8906d8a7277ef54fd1b3646f85354cb66a
Author: Herbert Xu <herbert@gondor.apana.org.au>
Date:   Tue Apr 19 22:32:22 2005 -0700

    [IPV6]: Replace bogus instances of inet->recverr
    
    While looking at this problem I noticed that IPv6 was sometimes
    looking at inet->recverr which is bogus.  Here is a patch to
    correct that and use np->recverr.
     
    Signed-off-by: Herbert Xu <herbert@gondor.apana.org.au>
    Acked-by: Hideaki YOSHIFUJI <yoshfuji@linux-ipv6.org>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 357b40a18b04c699da1d45608436e9b76b50e251
Author: Herbert Xu <herbert@gondor.apana.org.au>
Date:   Tue Apr 19 22:30:14 2005 -0700

    [IPV6]: IPV6_CHECKSUM socket option can corrupt kernel memory
    
    So here is a patch that introduces skb_store_bits -- the opposite of
    skb_copy_bits, and uses them to read/write the csum field in rawv6.
    
    Signed-off-by: Herbert Xu <herbert@gondor.apana.org.au>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit fd92833a52b972aafacced959f4a3f7541936a9b
Author: YOSHIFUJI Hideaki <yoshfuji@linux-ipv6.org>
Date:   Tue Apr 19 22:27:09 2005 -0700

    [IPV6]: Fix a branch prediction
    
    From: Tushar Gohad <tgohad@mvista.com>
    
    Signed-off-by: Hideaki YOSHIFUJI <yoshfuji@linux-ipv6.org>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit c4d541106bc5d0a2134aaf9e8735eee3c70b0db2
Author: Herbert Xu <herbert@gondor.apana.org.au>
Date:   Tue Apr 19 20:46:37 2005 -0700

    [NET]: Shave sizeof(ptr) bytes off dst_entry
    
    Signed-off-by: Herbert Xu <herbert@gondor.apana.org.au>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 561bbe3235da614562fb26bb14042af684971a2d
Author: Hugh Dickins <hugh@veritas.com>
Date:   Tue Apr 19 13:29:23 2005 -0700

    [PATCH] freepgt: remove FIRST_USER_ADDRESS hack
    
    Once all the MMU architectures define FIRST_USER_ADDRESS, remove hack from
    mmap.c which derived it from FIRST_USER_PGD_NR.
    
    Signed-off-by: Hugh Dickins <hugh@veritas.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit d455a3696c72283923e6870e9e4fe1daa861d7cd
Author: Hugh Dickins <hugh@veritas.com>
Date:   Tue Apr 19 13:29:23 2005 -0700

    [PATCH] freepgt: arch FIRST_USER_ADDRESS 0
    
    Replace misleading definition of FIRST_USER_PGD_NR 0 by definition of
    FIRST_USER_ADDRESS 0 in all the MMU architectures beyond arm and arm26.
    
    Signed-off-by: Hugh Dickins <hugh@veritas.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit cdfb82fff33cf3b1a367a427e5d89a012dc568b1
Author: Hugh Dickins <hugh@veritas.com>
Date:   Tue Apr 19 13:29:22 2005 -0700

    [PATCH] freepgt: arm26 FIRST_USER_ADDRESS PAGE_SIZE
    
    ARM26 define FIRST_USER_ADDRESS as PAGE_SIZE (beyond the machine vectors when
    they are mapped low), and use that definition in place of locally defined
    MIN_MAP_ADDR.  Previously, ARM26 permitted user mappings at 0 if the machine
    vectors were mapped high; but that's inconsistent with ARM, and
    FIRST_USER_ADDRESS would then have to be determined at runtime.  Let's fix it
    at PAGE_SIZE throughout the architecture.
    
    Signed-off-by: Hugh Dickins <hugh@veritas.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 6119be0bba10e7e7b1e5650a87812fa2fd8d3a60
Author: Hugh Dickins <hugh@veritas.com>
Date:   Tue Apr 19 13:29:21 2005 -0700

    [PATCH] freepgt: arm FIRST_USER_ADDRESS PAGE_SIZE
    
    ARM define FIRST_USER_ADDRESS as PAGE_SIZE (beyond the machine vectors when
    they are mapped low), and use that definition in place of locally defined
    MIN_MAP_ADDR.
    
    Signed-off-by: Hugh Dickins <hugh@veritas.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 8462e201756dd3bbe7e542106fc6fd6fe059cee2
Author: Hugh Dickins <hugh@veritas.com>
Date:   Tue Apr 19 13:29:20 2005 -0700

    [PATCH] freepgt: sys_mincore ignore FIRST_USER_PGD_NR
    
    Remove use of FIRST_USER_PGD_NR from sys_mincore: it's inconsistent (no other
    syscall refers to it), unnecessary (sys_mincore loops over vmas further down)
    and incorrect (misses user addresses in ARM's first pgd).
    
    Signed-off-by: Hugh Dickins <hugh@veritas.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit e2cdef8c847b480529b7e26991926aab4be008e6
Author: Hugh Dickins <hugh@veritas.com>
Date:   Tue Apr 19 13:29:19 2005 -0700

    [PATCH] freepgt: free_pgtables from FIRST_USER_ADDRESS
    
    The patches to free_pgtables by vma left problems on any architectures which
    leave some user address page table entries unencapsulated by vma.  Andi has
    fixed the 32-bit vDSO on x86_64 to use a vma.  Now fix arm (and arm26), whose
    first PAGE_SIZE is reserved (perhaps) for machine vectors.
    
    Our calls to free_pgtables must not touch that area, and exit_mmap's
    BUG_ON(nr_ptes) must allow that arm's get_pgd_slow may (or may not) have
    allocated an extra page table, which its free_pgd_slow would free later.
    
    FIRST_USER_PGD_NR has misled me and others: until all the arches define
    FIRST_USER_ADDRESS instead, a hack in mmap.c to derive one from t'other.  This
    patch fixes the bugs, the remaining patches just clean it up.
    
    Signed-off-by: Hugh Dickins <hugh@veritas.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 021740dc30d184e3b0fa7679936e65a56090c425
Author: Hugh Dickins <hugh@veritas.com>
Date:   Tue Apr 19 13:29:18 2005 -0700

    [PATCH] freepgt: hugetlb area is clean
    
    Once we're strict about clearing away page tables, hugetlb_prefault can assume
    there are no page tables left within its range.  Since the other arches
    continue if !pte_none here, let i386 do the same.
    
    Signed-off-by: Hugh Dickins <hugh@veritas.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 146425a316fb937fbdcac018b34a23c67d12214b
Author: Hugh Dickins <hugh@veritas.com>
Date:   Tue Apr 19 13:29:18 2005 -0700

    [PATCH] freepgt: mpnt to vma cleanup
    
    While dabbling here in mmap.c, clean up mysterious "mpnt"s to "vma"s.
    
    Signed-off-by: Hugh Dickins <hugh@veritas.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 8f6c99c11ae63ce887686f3e51c412cc4d8d8a7d
Author: Hugh Dickins <hugh@veritas.com>
Date:   Tue Apr 19 13:29:17 2005 -0700

    [PATCH] freepgt: remove arch pgd_addr_end
    
    ia64 and sparc64 hurriedly had to introduce their own variants of
    pgd_addr_end, to leapfrog over the holes in their virtual address spaces which
    the final clear_page_range suddenly presented when converted from pgd_index to
    pgd_addr_end.  But now that free_pgtables respects the vma list, those holes
    are never presented, and the arch variants can go.
    
    Signed-off-by: Hugh Dickins <hugh@veritas.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 3bf5ee95648c694bac4d13529563c230cd4fe5f2
Author: Hugh Dickins <hugh@veritas.com>
Date:   Tue Apr 19 13:29:16 2005 -0700

    [PATCH] freepgt: hugetlb_free_pgd_range
    
    ia64 and ppc64 had hugetlb_free_pgtables functions which were no longer being
    called, and it wasn't obvious what to do about them.
    
    The ppc64 case turns out to be easy: the associated tables are noted elsewhere
    and freed later, safe to either skip its hugetlb areas or go through the
    motions of freeing nothing.  Since ia64 does need a special case, restore to
    ppc64 the special case of skipping them.
    
    The ia64 hugetlb case has been broken since pgd_addr_end went in, though it
    probably appeared to work okay if you just had one such area; in fact it's
    been broken much longer if you consider a long munmap spanning from another
    region into the hugetlb region.
    
    In the ia64 hugetlb region, more virtual address bits are available than in
    the other regions, yet the page tables are structured the same way: the page
    at the bottom is larger.  Here we need to scale down each addr before passing
    it to the standard free_pgd_range.  Was about to write a hugely_scaled_down
    macro, but found htlbpage_to_page already exists for just this purpose.  Fixed
    off-by-one in ia64 is_hugepage_only_range.
    
    Uninline free_pgd_range to make it available to ia64.  Make sure the
    vma-gathering loop in free_pgtables cannot join a hugepage_only_range to any
    other (safe to join huges?  probably but don't bother).
    
    Signed-off-by: Hugh Dickins <hugh@veritas.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit ee39b37b23da0b6ec53a8ebe90ff41c016f8ae27
Author: Hugh Dickins <hugh@veritas.com>
Date:   Tue Apr 19 13:29:15 2005 -0700

    [PATCH] freepgt: remove MM_VM_SIZE(mm)
    
    There's only one usage of MM_VM_SIZE(mm) left, and it's a troublesome macro
    because mm doesn't contain the (32-bit emulation?) info needed.  But it too is
    only needed because we ignore the end from the vma list.
    
    We could make flush_pgtables return that end, or unmap_vmas.  Choose the
    latter, since it's a natural fit with unmap_mapping_range_vma needing to know
    its restart addr.  This does make more than minimal change, but if unmap_vmas
    had returned the end before, this is how we'd have done it, rather than
    storing the break_addr in zap_details.
    
    unmap_vmas used to return count of vmas scanned, but that's just debug which
    hasn't been useful in a while; and if we want the map_count 0 on exit check
    back, it can easily come from the final remove_vm_struct loop.
    
    Signed-off-by: Hugh Dickins <hugh@veritas.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit e0da382c92626ad1d7f4b7527d19b80104d67a83
Author: Hugh Dickins <hugh@veritas.com>
Date:   Tue Apr 19 13:29:15 2005 -0700

    [PATCH] freepgt: free_pgtables use vma list
    
    Recent woes with some arches needing their own pgd_addr_end macro; and 4-level
    clear_page_range regression since 2.6.10's clear_page_tables; and its
    long-standing well-known inefficiency in searching throughout the higher-level
    page tables for those few entries to clear and free: all can be blamed on
    ignoring the list of vmas when we free page tables.
    
    Replace exit_mmap's clear_page_range of the total user address space by
    free_pgtables operating on the mm's vma list; unmap_region use it in the same
    way, giving floor and ceiling beyond which it may not free tables.  This
    brings lmbench fork/exec/sh numbers back to 2.6.10 (unless preempt is enabled,
    in which case latency fixes spoil unmap_vmas throughput).
    
    Beware: the do_mmap_pgoff driver failure case must now use unmap_region
    instead of zap_page_range, since a page table might have been allocated, and
    can only be freed while it is touched by some vma.
    
    Move free_pgtables from mmap.c to memory.c, where its lower levels are adapted
    from the clear_page_range levels.  (Most of free_pgtables' old code was
    actually for a non-existent case, prev not properly set up, dating from before
    hch gave us split_vma.) Pass mmu_gather** in the public interfaces, since we
    might want to add latency lockdrops later; but no attempt to do so yet, going
    by vma should itself reduce latency.
    
    But what if is_hugepage_only_range?  Those ia64 and ppc64 cases need careful
    examination: put that off until a later patch of the series.
    
    What of x86_64's 32bit vdso page __map_syscall32 maps outside any vma?
    
    And the range to sparc64's flush_tlb_pgtables?  It's less clear to me now that
    we need to do more than is done here - every PMD_SIZE ever occupied will be
    flushed, do we really have to flush every PGDIR_SIZE ever partially occupied? 
    A shame to complicate it unnecessarily.
    
    Special thanks to David Miller for time spent repairing my ceilings.
    
    Signed-off-by: Hugh Dickins <hugh@veritas.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 9f6c6fc505560465be0964eb4da1b6ca97bd3951
Author: Linus Torvalds <torvalds@ppc970.osdl.org.(none)>
Date:   Tue Apr 19 13:14:28 2005 -0700

    Merge with kernel.org:/pub/scm/linux/kernel/git/gregkh/driver-2.6.git/
    
    for 13 driver core, sysfs, and debugfs fixes.

commit c3c661932cd53582c5b03692b99649300977248a
Author: Linus Torvalds <torvalds@ppc970.osdl.org.(none)>
Date:   Tue Apr 19 13:12:03 2005 -0700

    Merge with kernel.org:/pub/scm/linux/kernel/git/gregkh/aoe-2.6.git/
    
    for 11 aoe bugfix patches.

commit c79bea07ec4d3ef087962699fe8b2f6dc5ca7754
Author: Linus Torvalds <torvalds@ppc970.osdl.org.(none)>
Date:   Tue Apr 19 07:31:40 2005 -0700

    Merge master.kernel.org:/pub/scm/linux/kernel/git/gregkh/i2c-2.6.git/

commit a9e4820c4c170b3df0d2185f7b4130b0b2daed2c
Author: Linus Torvalds <torvalds@ppc970.osdl.org.(none)>
Date:   Tue Apr 19 07:28:57 2005 -0700

    Merge with Greg's USB tree at kernel.org:/pub/scm/linux/kernel/git/gregkh/usb-2.6.git/
    
    Yah, it does work to merge. Knock wood.

commit a4b38364093bf2094ff858ad45f490521bb87984
Author: ecashin@coraid.com <ecashin@coraid.com>
Date:   Mon Apr 18 22:00:22 2005 -0700

    [PATCH] aoe 12/12: send outgoing packets in order
    
    I can't use list.h, since sk_buff doesn't have a list_head but instead
    has two struct sk_buff pointers, and I want to avoid any extra memory
    allocation.
    
    send outgoing packets in order
    
    Signed-off-by: Ed L. Cashin <ecashin@coraid.com>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>
    
    

commit 0c6f0e7920f39b28bdbe5f134f3e592542332d87
Author: ecashin@coraid.com <ecashin@coraid.com>
Date:   Mon Apr 18 22:00:22 2005 -0700

    [PATCH] aoe 11/12: add support for disk statistics
    
    add support for disk statistics
    
    Signed-off-by: Ed L. Cashin <ecashin@coraid.com>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>
    
    

commit e3b7df65e089f143b9228472b80fb96c495fb634
Author: ecashin@coraid.com <ecashin@coraid.com>
Date:   Mon Apr 18 22:00:21 2005 -0700

    [PATCH] aoe 9/12: add note about the need for deadlock-free sk_buff allocation
    
    add note about the need for deadlock-free sk_buff allocation
    
    Signed-off-by: Ed L. Cashin <ecashin@coraid.com>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>
    
    

commit d098840e37468fdd0143d8bcfe86bc53627bf96e
Author: ecashin@coraid.com <ecashin@coraid.com>
Date:   Mon Apr 18 22:00:20 2005 -0700

    [PATCH] aoe 8/12: document env var for specifying number
    
    document env var for specifying number of partitions per dev
    
    Signed-off-by: Ed L. Cashin <ecashin@coraid.com>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>
    
    

commit 63e9cc5d6fbe8b58ea1ee96439d356cbf726fbc0
Author: ecashin@coraid.com <ecashin@coraid.com>
Date:   Mon Apr 18 22:00:20 2005 -0700

    [PATCH] aoe 6/12: Alexey Dobriyan sparse cleanup
    
    Alexey Dobriyan sparse cleanup
    
    Signed-off-by: Alexey Dobriyan <adobriyan@mail.ru>
    Signed-off-by: Ed L. Cashin <ecashin@coraid.com>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>
    
    

commit 03347936afcba990525736ae39daa13f643eac5f
Author: ecashin@coraid.com <ecashin@coraid.com>
Date:   Mon Apr 18 22:00:19 2005 -0700

    [PATCH] aoe 5/12: don't try to free null bufpool
    
    don't try to free null bufpool
    
    Signed-off-by: Ed L. Cashin <ecashin@coraid.com>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>
    
    

commit fa83c2ddd4293bd8bcaeeaf14bfdbf2fbe810420
Author: ecashin@coraid.com <ecashin@coraid.com>
Date:   Mon Apr 18 22:00:19 2005 -0700

    [PATCH] aoe 4/12: handle distros that have a udev rules
    
    handle distros that have a udev rules file instead of dir
    
    Signed-off-by: Ed L. Cashin <ecashin@coraid.com>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>
    
    

commit b68650fd3f31d47426a2b1c6cfad904880258423
Author: ecashin@coraid.com <ecashin@coraid.com>
Date:   Mon Apr 18 22:00:18 2005 -0700

    [PATCH] aoe 3/12: update driver version to 6
    
    update driver version to 6
    
    Signed-off-by: Ed L. Cashin <ecashin@coraid.com>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>
    
    

commit 32465c650670c7499548d70fdeed57fab44ee679
Author: ecashin@coraid.com <ecashin@coraid.com>
Date:   Mon Apr 18 22:00:18 2005 -0700

    [PATCH] aoe 2/12: allow multiple aoe devices with same MAC
    
    allow multiple aoe devices with same MAC addr
    
    Signed-off-by: Ed L. Cashin <ecashin@coraid.com>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>
    
    

commit fc458dcda27c6d26cb11ef9ee9c1c3599711be94
Author: ecashin@coraid.com <ecashin@coraid.com>
Date:   Mon Apr 18 22:00:17 2005 -0700

    [PATCH] aoe 1/12: remove too-low cap on minor number
    
    remove too-low cap on minor number
    
    Signed-off-by: Ed L. Cashin <ecashin@coraid.com>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>
    
    

commit f0e035f4b6940aae6836500b642029c289ed4535
Author: kay.sievers@vrfy.org <kay.sievers@vrfy.org>
Date:   Mon Apr 18 21:57:37 2005 -0700

    [PATCH] kobject/hotplug split - net bridge
    
    kobject_add() and kobject_del() don't emit hotplug events anymore.
    We need to do it ourselves now.
    
    Signed-off-by: Kay Sievers <kay.sievers@vrfy.org>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>
    
    

commit 089d42b013675b028a499c61bac59954067dc668
Author: kay.sievers@vrfy.org <kay.sievers@vrfy.org>
Date:   Mon Apr 18 21:57:37 2005 -0700

    [PATCH] kobject/hotplug split - usb cris
    
    kobject_add() and kobject_del() don't emit hotplug events anymore.
    We need to do it ourselves now.
    
    Signed-off-by: Kay Sievers <kay.sievers@vrfy.org>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>
    
    

commit e57cd73e2e844a3da25cc6b420674c81bbe1b387
Author: kay.sievers@vrfy.org <kay.sievers@vrfy.org>
Date:   Mon Apr 18 21:57:36 2005 -0700

    [PATCH] kobject/hotplug split - devices core
    
    kobject_add() and kobject_del() don't emit hotplug events anymore. Do it
    ourselves if we are finished populating the device directory.
    
    Signed-off-by: Kay Sievers <kay.sievers@vrfy.org>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>
    
    

commit b41148c0d8d2fa0c36cebd9ba3ee4cfc0dc7cb9a
Author: kay.sievers@vrfy.org <kay.sievers@vrfy.org>
Date:   Mon Apr 18 21:57:36 2005 -0700

    [PATCH] kobject/hotplug split - block core
    
    kobject_add() and kobject_del() don't emit hotplug events anymore. Do it
    ourselves if we are finished populating the device directory.
    
    Signed-off-by: Kay Sievers <kay.sievers@vrfy.org>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>
    
    

commit 0700f56bbca56bc930aab717bc5086336991441f
Author: kay.sievers@vrfy.org <kay.sievers@vrfy.org>
Date:   Mon Apr 18 21:57:35 2005 -0700

    [PATCH] kobject/hotplug split - class core
    
    kobject_add() and kobject_del() don't emit hotplug events anymore. Do it
    ourselves if we are finished populating the device directory.
    
    Signed-off-by: Kay Sievers <kay.sievers@vrfy.org>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>
    
    

commit 18c3d5271b472c096adfc856e107c79f6fd30d7d
Author: kay.sievers@vrfy.org <kay.sievers@vrfy.org>
Date:   Mon Apr 18 21:57:34 2005 -0700

    [PATCH] kobject/hotplug split - kobject add/remove
    
    kobject_add() and kobject_del() don't emit hotplug events anymore.
    The user should do it itself if it has finished populating the device
    directory.
    
    Signed-off-by: Kay Sievers <kay.sievers@vrfy.org>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>
    
    

commit 7b558637b0efc6ab3f3ca08f0b9cc0191665e9db
Author: Michal Ostrowski <mostrows@speakeasy.net>
Date:   Mon Apr 18 21:57:34 2005 -0700

    [PATCH] debugfs: fix !debugfs prototypes
    
    - Fix prototypes for debugfs functions (in configurations where
      debugfs is disabled).
    
    Signed-off-by: Michal Ostrowski <mostrows@speakeasy.net>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>
    
    

commit a7a76cefc4b12bb6508afa4c77f11c2752cc365d
Author: Roland Dreier <roland@topspin.com>
Date:   Mon Apr 18 21:57:33 2005 -0700

    [PATCH] debugfs: Reduce <linux/debugfs.h> dependencies
    
    The current <linux/debugfs.h> include file is a little fragile in that
    it is not self-contained and hence may cause compile warnings or
    errors depending on the files included before it, the kernel config
    and the architecture.  This patch makes things a little more robust by:
    
     - including <linux/types.h> to get definitions of u32, mode_t, and so on.
     - forward declaring struct file_operations.
     - including <linux/err.h> when CONFIG_DEBUG_FS is not set
    
    The last change is particularly useful, as a kernel developer is
    likely to build with debugfs always enabled and never see the build
    breakage cased if debugfs is disabled.
    
    Signed-off-by: Roland Dreier <roland@topspin.com>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>
    

commit 1694145854a309bebd12a5cce63c9b398304e3bb
Author: Steven Cole <elenstev@mesatop.com>
Date:   Mon Apr 18 21:57:33 2005 -0700

    [PATCH] 2.6.12-rc1-mm3 Fix ver_linux script for no udev utils.
    
    Without the attached patch, the ver_linux script gives
    the following if udev utils are not present.
    
    ./scripts/ver_linux: line 90: udevinfo: command not found
    
    The patch causes ver_linux to be silent in the case of
    no udevinfo command.
    
    Signed-off-by: Steven Cole <elenstev@mesatop.com>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>
    

commit 46ea0d6c26de431a39c744f7ad63b30bfc800c1e
Author: Robert Schwebel <r.schwebel@pengutronix.de>
Date:   Mon Apr 18 21:57:32 2005 -0700

    [PATCH] export platform_add_devices
    
    platform_add_devices can be used from within modules, so it should be
    exported.  This can for example happen if you have hotpluggable firmware in
    an FPGA on a system on chip processor; in our case the FPGA is probed for
    devices and the FPGA base code registers the devices it has found with the
    kernel.  
    
    (akpm: I think this is reasonable from a licensing POV: it's unlikely that
    anyone would be interested in merging such specialised modules into mainline,
    and it's a GPL export).
    
    Signed-off-by: Robert Schwebel <r.schwebel@pengutronix.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>
    

commit 31e5abe9a6dab1ed3a5c30352bdb001353146318
Author: Kay Sievers <kay.sievers@vrfy.org>
Date:   Mon Apr 18 21:57:32 2005 -0700

    [PATCH] sysfs: add sysfs_chmod_file()
    
    sysfs: allow changing the permissions for already created attributes
    
    Signed-off-by: Kay Sievers <kay.sievers@vrfy.org>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>
    

commit 6897089c5f7989603ccb9c696050470ba1dbd262
Author: kay.sievers@vrfy.org <kay.sievers@vrfy.org>
Date:   Mon Apr 18 21:57:31 2005 -0700

    [PATCH] add TIMEOUT to firmware_class hotplug event
    
    On Tue, 2005-03-15 at 09:25 +0100, Hannes Reinecke wrote:
    > The current implementation of the firmware class breaks a fundamental
    > assumption in udevd: that the physical device can be initialised fully
    > prior to executing the next event for that device.
    
    Here we add a TIMEOUT value to the hotplug environment of the firmware
    requesting event. I will adapt udevd not to wait for anything else, if
    it finds a TIMEOUT key.
    
    Signed-off-by: Kay Sievers <kay.sievers@vrfy.org>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>
    
    

commit 6f31e42221c7deae4527136ce0dd73990d8bc1d1
Author: gregkh@suse.de <gregkh@suse.de>
Date:   Mon Apr 18 21:57:30 2005 -0700

    [PATCH] kref: add link to original documentation to the kref documentation.
    
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>
    
    

commit 5c11c52046eb0f7252574bad161db53d0345ea50
Author: minyard@acm.org <minyard@acm.org>
Date:   Mon Apr 18 21:57:30 2005 -0700

    [PATCH] kref: add documentation
    
    Add some documentation for krefs.
    
    Signed-off-by: Corey Minyard <minyard@acm.org>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>
    
    

commit 1d66c64c3cee10a465cd3f8bd9191bbeb718f650
Author: Jean Delvare <khali@linux-fr.org>
Date:   Mon Apr 18 21:16:59 2005 -0700

    [PATCH] I2C: Fix incorrect sysfs file permissions in it87 and via686a drivers
    
    The it87 and via686a hardware monitoring drivers each create a sysfs
    file named "alarms" in R/W mode, while they should really create it in
    read-only mode. Since we don't provide a store function for these files,
    write attempts to these files will do something undefined (I guess) and
    bad (I am sure). My own try resulted in a locked terminal (where I
    attempted the write) and a 100% CPU load until next reboot.
    
    As a side note, wouldn't it make sense to check, when creating sysfs
    files, that readable files have a non-NULL show method, and writable
    files have a non-NULL store method? I know drivers are not supposed to
    do stupid things, but there is already a BUG_ON for several conditions
    in sysfs_create_file, so maybe we could add two more?
    
    Signed-off-by: Jean Delvare <khali@linux-fr.org>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>
    

commit 86b5ac878d4a63c772d03c5017b72cc799a8f2f2
Author: Jean Delvare <khali@linux-fr.org>
Date:   Mon Apr 18 21:16:58 2005 -0700

    [PATCH] I2C: via686a cleanups
    
    Here comes a small cleanup patch for the via686a driver. I noticed the
    following two non-fatal problems:
    
    1* The device parent is explicitely set, but it's not needed because the
    i2c core will do as the client is registered.
    
    2* snprintf is used where strlcpy would suffice.
    
    Fixing them brings the via686a driver in line with what other similar
    drivers do.
    
    Signed-off-by: Jean Delvare <khali@linux-fr.org>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>
    

commit 05985715756b8667cb35a3e05e1668bb8afe3298
Author: johnpol@2ka.mipt.ru <johnpol@2ka.mipt.ru>
Date:   Mon Apr 18 21:16:57 2005 -0700

    [PATCH] w1_smem: w1 ID is only 8 bytes long.
    
    w1 ID is only 8 bytes long.
    
    Signed-off-by: Evgeniy Polyakov <johnpol@2ka.mipt.ru>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>
    
    

commit 8523ff45672a5c9209ab7459142e37e7cd393e6c
Author: johnpol@2ka.mipt.ru <johnpol@2ka.mipt.ru>
Date:   Mon Apr 18 21:16:57 2005 -0700

    [PATCH] w1: real fix for big endian machines.
    
    Real fix for big endian machines - crc must be calculated
    using little endian byte order.
    
    Signed-off-by: Evgeniy Polyakov <johnpol@2ka.mipt.ru>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>
    
    

commit c0698f2f6e4839ce9463ce731c892993215ea067
Author: James Bottomley <jejb@titanic>
Date:   Mon Apr 18 20:55:09 2005 -0500

    fully merge up to scsi-misc-2.6

commit e838a0d4d5260bce452c96914a6e86b217c53c55
Author: Viktor A. Danilov <__die@mail.ru>
Date:   Mon Apr 18 17:39:35 2005 -0700

    [PATCH] USB: fix AIPTEK input doesn`t register `device` & `driver` section in sysfs (/sys/class/input/event#)
    
    PROBLEM: aiptek input doesn`t register `device` & `driver` section in sysfs (/sys/class/input/event#)
    REASON: `dev` - field not filled...
    SOLUTION: in linux/drivers/usb/input/aiptek.c write
    	aiptek->inputdev.dev = &intf->dev;
    before calling
    	input_register_device(&aiptek->inputdev);
    
    From: "Viktor A. Danilov" <__die@mail.ru>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>
    
    Index: gregkh-2.6/drivers/usb/input/aiptek.c
    ===================================================================

commit 6cdee106e7571751ecc0e9f96606322f88b64a8d
Author: David Brownell <david-b@pacbell.net>
Date:   Mon Apr 18 17:39:34 2005 -0700

    [PATCH] usb gadget: ethernet/rndis updates
    
    Updates to the Ethernet/RNDIS gadget driver (mostly for RNDIS):
    
      - Fix brown-paper bag goof with RNDIS packet TX ... the wrong length
        field got set, so Windows would ignore data packets it received.
    
      - More consistent handling of CDC output filters (but not yet hooking
        things up so RNDIS uses the mechanism).
    
      - Zerocopy RX for RNDIS packets too (saving CPU cycles).
    
      - Use the pre-allocated interrupt/status request and buffer, rather
        than allocating and freeing one of each every few seconds (which
        could fail).
    
      - Some more "sparse" tweaks, making both dual-speed and single-speed
        configurations happier.
    
      - RNDIS speeds are reported in units of 100bps, not bps.
    
    Plus two minor cleanups (whitespace, messaging).
    
    Signed-off-by: David Brownell <dbrownell@users.sourceforge.net>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>
    

commit 1bc3c9e1e44c2059fe2ffa6ff70ad0a925d7b05f
Author: Jesper Juhl <juhl-lkml@dif.dk>
Date:   Mon Apr 18 17:39:34 2005 -0700

    [PATCH] USB: kfree cleanup for drivers/usb/* - no need to check for NULL
    
    Get rid of a bunch of redundant NULL pointer checks in drivers/usb/*,
    there's no need to check a pointer for NULL before calling kfree() on it.
    
    Signed-off-by: Jesper Juhl <juhl-lkml@dif.dk>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>
    
    
    Index: gregkh-2.6/drivers/usb/class/audio.c
    ===================================================================

commit 6fd19f4b55f7fd1c9d8650bd7f8df2c81b69c5ca
Author: Jesper Juhl <juhl-lkml@dif.dk>
Date:   Mon Apr 18 17:39:33 2005 -0700

    [PATCH] usb: kfree() cleanups in drivers/usb/core/devio.c
    
    Checking for NULL before calling kfree() is redundant. This patch removes
    these redundant checks and also makes a few tiny whitespace changes.
    
    Signed-off-by: Jesper Juhl <juhl-lkml@dif.dk>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>
    

commit acbb36f116243bed515357264ecbb6ff9c6d2a5b
Author: Peter Favrholdt <pfavr@mip.sdu.dk>
Date:   Mon Apr 18 17:39:32 2005 -0700

    [PATCH] USB: pl2303 new vendor/model ids
    
    Please accept the attached patch which adds the vendorid 0x0745 and
    modelid 0x0001 (ID 0745:0001) "Syntech Information Co., Ltd."
    
    The device is an USB IR cradle for a barcode scanner (CPT-8001C) from
    Cipherlab.
    
    
    From: Peter Favrholdt <pfavr@mip.sdu.dk>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>
    
    diff -u kernel-source-2.6.11/drivers/usb/serial/pl2303.c ../kernel-source-2.6.11/drivers/usb/serial/pl2303.c

commit 97bb13ec5bc156352cca8af90080597e04299a73
Author: Flavio Leitner <fbl@conectiva.com.br>
Date:   Mon Apr 18 17:39:31 2005 -0700

    [PATCH] pl2303 - status line
    
    I'm attaching a patch to fix status when using Siemens X65
    mobile. This mobile use first byte instead of normal UART_STATE
    byte.
    
    
    From: Flavio Leitner <fbl@conectiva.com.br>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>
    
    
    Index: gregkh-2.6/drivers/usb/serial/pl2303.c
    ===================================================================

commit 6fdd8e8e33730a2abc886113bd0b6c4343f63cc9
Author: Flavio Leitner <fbl@conectiva.com.br>
Date:   Mon Apr 18 17:39:31 2005 -0700

    [PATCH] pl2303 - unplug device.
    
    It's possible to unplug usb device and do tiocmset() and tiocmget() without
    valid interface in pl2303 module.
    
    The patch below check this and return -ENODEV if interface was removed.
    
    From: Flavio Leitner <fbl@conectiva.com.br>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>
    
    diff -purN linux-05-04-11/drivers/usb/serial/pl2303.c linux-05-04-11.usb/drivers/usb/serial/pl2303.c

commit 8835f6657316162a8937d3f26ccd8f5886ba3845
Author: Alan Stern <stern@rowland.harvard.edu>
Date:   Mon Apr 18 17:39:30 2005 -0700

    [PATCH] USB: USB API documentation modification
    
    In response to complaints about excessive latency in the uhci-hcd driver
    I'm planning to convert it to a top-half/bottom-half design.  It turns out
    that to do this, the USB API has to be modified slightly since the driver
    will not be able to meet one of the guarantees in the current API.  This
    patch changes some kerneldoc, specifying the weaker guarantee.
    
    Signed-off-by: Alan Stern <stern@rowland.harvard.edu>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>
    

commit 0e4987639a774d08b69c1c58774f3430f6083d4f
Author: David Brownell <david-b@pacbell.net>
Date:   Mon Apr 18 17:39:30 2005 -0700

    [PATCH] USB: OHCI on Compaq Aramada 7400
    
    This adds a quirk to the OHCI driver that lets it work with an old
    Compaq implementation.  It also removes some needless strings from
    the non-debug version of the driver.
    
    Signed-off-by: Chris Clayton <chris_clayton@f1internet.com>
    Signed-off-by: David Brownell <dbrownell@users.sourceforge.net>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>
    

commit a2fe20129e2d87dc5c4e5c850b41b5b0b47cfd08
Author: David Brownell <david-b@pacbell.net>
Date:   Mon Apr 18 17:39:29 2005 -0700

    [PATCH] USB: usbnet and zaurus zl-5600
    
    Hmm, another case of a Zaurus ROM not telling the expected conformance lie;
    this patch handles the lies told by the SL5600.
    
    From: bender647@gmail.com
    Signed-off-by: David Brownell <dbrownell@users.sourceforge.net>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>
    

commit 7ab7c34c90797b9df52720720ab5d5e9edd05114
Author: Thomas Winischhofer <thomas@winischhofer.net>
Date:   Mon Apr 18 17:39:28 2005 -0700

    [PATCH] USB: new SIS device id
    
    the attached patch adds another USB device ID to the list. Seems the
    device is known under multiple IDs.
    
    Signed-off-by: Thomas Winischhofer <thomas@winischhofer.net>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>
    
    

commit d6427cf7ea5dc75be26074a573b25d5906c992bd
Author: felix@derklecks.de <felix@derklecks.de>
Date:   Mon Apr 18 17:39:28 2005 -0700

    [PATCH] USB Storage unusual_dev.h 07c4:a10b Datafab Systems, Inc.
    
    Signed-off-by: Phil Dibowitz <phil@ipom.com>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>
    
    Index: gregkh-2.6/drivers/usb/storage/unusual_devs.h
    ===================================================================

commit e4334fa4c5cb62f26d7e9a0a581126bcbe0dedcf
Author: Phil Dibowitz <phil@ipom.com>
Date:   Mon Apr 18 17:39:27 2005 -0700

    [PATCH] Fix GO_SLOW delay
    
    This patch changes the delay for the US_FL_GO_SLOW patch from 110us to 125.
    Some delays need this extra delay includign Jan De Luyck's drive which spawned
    the original increase from 110 to 110us. 125 is a microframe, so this delay
    seems to make sense more than just be a random delay (thanks to David Brownell
    for pointing that out after my original patch).
    
    Signed-off-by: Phil Dibowitz <phil@ipom.com>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>
    
    
    Index: gregkh-2.6/drivers/usb/storage/transport.c
    ===================================================================

commit 403a98176a5866217eb12ca6bb283e635ced2dd0
Author: akpm@osdl.org <akpm@osdl.org>
Date:   Mon Apr 18 17:39:27 2005 -0700

    [PATCH] USB: usbnet printk warning fix
    
    On ppc64:
    
    drivers/usb/net/usbnet.c: In function `skb_return':
    drivers/usb/net/usbnet.c:429: warning: int format, different type arg (arg 3)
    drivers/usb/net/usbnet.c:429: warning: int format, different type arg (arg 3)
    
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>
    
    diff -puN drivers/usb/net/usbnet.c~usbnet-printk-warning-fix drivers/usb/net/usbnet.c

commit 668a9541a56af5ebb3ad0babdc2cd73511c9e1e9
Author: Christopher Li <chrisl@vmware.com>
Date:   Mon Apr 18 17:39:26 2005 -0700

    [PATCH] USB: bug fix in usbdevfs
    
    I am sorry that the last patch about 32 bit compat ioctl on
    64 bit kernel actually breaks the usbdevfs. That is on the current
    BK tree. I am retarded. 
    
    Here is the patch to fix it. Tested with USB hard disk and webcam
    in both 32bit compatible mode and native 64bit mode.
    
    Again, sorry about that.
    
    
    From: Christopher Li <chrisl@vmware.com>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>
    

commit a81e7ecca369afee0b07b4758d8c32542ffc587a
Author: David Brownell <david-b@pacbell.net>
Date:   Mon Apr 18 17:39:25 2005 -0700

    [PATCH] USB: revert "fix" to usb_set_interface()
    
    This reverts a recent change to usb_set_interface().  The change worked
    around a quirk in certain devices, but doing this in usbcore creates
    needless regressions for other devices.  More appropriate fixes won't
    put such handling in usbcore.
    
    Basically it's tricky to do a full software reset of USB device state, since
    the devices don't all act the same.  This adds a note to the kerneldoc for
    the usb_reset_configuration() call to highlight the quirk this was working
    around:  endpoint data toggles not being reset.
    
    Signed-off-by: David Brownell <dbrownell@users.sourceforge.net>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>
    

commit 45f23f189ca66d98b1f8b7f3d30a194d3188039d
Author: Nishanth Aravamudan <nacc@us.ibm.com>
Date:   Mon Apr 18 17:39:25 2005 -0700

    [PATCH] USB: usb/digi_acceleport: correct wait-queue state
    
    First patch incorrectly changed state of the wait-queue usage to
    TASK_UNINTERRUPTIBLE. Reverted to TASK_INTERRUPTIBLE.
    
    Signed-off-by: Nishanth Aravamudan <nacc@us.ibm.com>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>
    

commit 6d5e8254bf488a40b7ae2faafbffa232ab19d541
Author: Greg KH <gregkh@suse.de>
Date:   Mon Apr 18 17:39:24 2005 -0700

    [PATCH] USB: fix up some sparse warnings about static functions that aren't static.
    
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>
    
    
    Index: gregkh-2.6/drivers/usb/core/usb.h
    ===================================================================

commit ba9d35fb01852e195f2a4ca975fdcd6578b52c78
Author: Pavel Machek <pavel@suse.cz>
Date:   Mon Apr 18 17:39:24 2005 -0700

    [PATCH] USB: fix up remaining pm_message_t usages
    
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>
    

commit 9a5d3e98dd31abcecbf4533b81866d440cc0f106
Author: David Brownell <david-b@pacbell.net>
Date:   Mon Apr 18 17:39:23 2005 -0700

    [PATCH] USB: hcd suspend uses pm_message_t
    
    This patch includes minor "sparse -Wbitwise" updates for the PCI based
    HCDs.  Almost all of them involve just changing the second parameter of the
    suspend() method to a pm_message_t ...  the others relate to how the EHCI
    code walks in-memory data structures.  (There's a minor bug fixed there too
    ...  affecting the big-endian sysfs async schedule dump.)
    
    Signed-off-by: David Brownell <dbrownell@users.sourceforge.net>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>
    
    
    Index: gregkh-2.6/drivers/usb/core/hcd.h
    ===================================================================

commit 27d72e8572336d9f4e17a12ac924cb5223a5758d
Author: David Brownell <david-b@pacbell.net>
Date:   Mon Apr 18 17:39:22 2005 -0700

    [PATCH] usb suspend updates (interface suspend)
    
    This is the first of a few installments of PM API updates to match the
    recent switch to "pm_message_t".  This installment primarily affects
    USB device drivers (for USB interfaces), and it changes the handful of
    drivers which currently implement suspend methods:
    
        - <linux/usb.h> and usbcore, signature change
    
        - Some drivers only changed the signature, net effect this just
          shuts up "sparse -Wbitwise":
    	* hid-core
    	* stir4200
    
        - Two network drivers did that, and also grew slightly more
          featureful suspend code ... they now properly shut down
          their activities.  (As should stir4200...)
    	* pegasus
    	* usbnet
    
    Note that the Wake-On-Lan (WOL) support in pegasus doesn't yet work; looks
    to me like it's missing a request to turn it on, vs just configuring it.
    The ASIX code in usbnet also has WOL hooks that are ready to use; untested.
    
    Signed-off-by: David Brownell <dbrownell@users.sourceforge.net>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>
    
    Index: gregkh-2.6/drivers/net/irda/stir4200.c
    ===================================================================

commit c6053ecffb895f6c0e0ec9c1d298e35cffc1f7a6
Author: David Brownell <david-b@pacbell.net>
Date:   Mon Apr 18 17:39:22 2005 -0700

    [PATCH] usb resume fixes
    
    This has a variety of updates to the shared suspend/resume code for
    PCI based USB host controllers.
    
        - Cope with pm_message_t replacing the target system state.
          This is actually a loss of functionality; PCI D1 and D2
          states will no longer be used, and it's no longer knowable
          that D3cold is on the way so power will be lost.
    
        - Most importantly, some of the resume paths are reworked and
          cleaned up.  They're now an exact mirror of suspend paths,
          and more care is taken to ensure the hardware is reactivated
          before the hardware re-enables interrupts.
    
    Plus comment and diagnostic cleanups; there are some nasty cases here 
    especially combined with swsusp, now they're somewhat commented.
    
    Signed-off-by: David Brownell <dbrownell@users.sourceforge.net>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>
    
    diff -puN drivers/usb/core/hcd-pci.c~usb-resume-fixes drivers/usb/core/hcd-pci.c

commit 84d79cb8db2811140c911df7ce3e3354cfa018c4
Author: akpm@osdl.org <akpm@osdl.org>
Date:   Mon Apr 18 17:39:21 2005 -0700

    [PATCH] USB: usb_cdc build fix
    
    With older gcc's:
    
    In file included from drivers/usb/class/cdc-acm.c:63:
    include/linux/usb_cdc.h:117: field `bDetailData' has incomplete type
    
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>
    
    diff -puN include/linux/usb_cdc.h~usb_cdc-build-fix include/linux/usb_cdc.h

commit 115c1ce524869309e4bddcfc3dd112ac76b92def
Author: Larry Battraw <lbattraw@insightbb.com>
Date:   Mon Apr 18 17:39:20 2005 -0700

    [PATCH] USB: visor Tapwave Zodiac support patch
    
    Here's a tiny patch to add support for the Tapwave Zodiac (for
    2.6.11.6).  I've been meaning to send it in for a while but kept
    upgrading my kernel and losing the changes :-)  I own the device and it
    works fine with the latest pilot-link beta.
    
    From: Larry Battraw <lbattraw@insightbb.com>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>
    
    

commit ac21e9ff08db3d6fac41d356c77fcb531c2e03e1
Author: gregkh@suse.de <gregkh@suse.de>
Date:   Mon Apr 18 17:39:20 2005 -0700

    [PATCH] USB: add new visor id for Treo 650
    
    Thanks to Jamieson Becker <jamie@jamiebecker.com> for the info
    
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>
    
    diff -Naur -X dontdiff-osdl tmp/linux-2.6.12-rc2/drivers/usb/serial/visor.h linux-2.6/drivers/usb/serial/visor.h

commit 7f907d7486f2519c2ff1493bfbcdc36dcacd85b7
Author: Linus Torvalds <torvalds@ppc970.osdl.org>
Date:   Mon Apr 18 16:25:10 2005 -0700

    Merge with master.kernel.org:/home/rmk/linux-2.6-rmk.git
    
    This adds the missing arch/arm/lib/bitops.h file.

commit 0ba4da03cc84f54b2574e1abcdaa18ef8456a9fb
Author: David S. Miller <davem@davemloft.net>
Date:   Mon Apr 18 15:13:15 2005 -0700

    [PATCH] sparc64: Fix stat
    
    Like Alpha, sparc64's struct stat was defined before we had the
    nanosecond et al.  fields added.  So like Alpha I have to cons up a
    struct stat64 to get this stuff.  I'll work on the glibc bits soon. 
    
    Also, we were forgetting to fill in the nanosecond fields in the sparc
    compat stat64 syscalls. 
    
    Signed-off-by: David S. Miller <davem@davemloft.net>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>
    

commit 7a55fd0bb31eb369149b89fdf9e0c7bc73486ee1
Author: Russell King <rmk@dyn-67.arm.linux.org.uk>
Date:   Mon Apr 18 22:50:01 2005 +0100

    [PATCH] ARM: Add missing new file for bitops patch
    
    Signed-off-by: Russell King <rmk@arm.linux.org.uk>

commit 0b2cad2f30d0353f2576b1a2207c0792ba713157
Author: Linus Torvalds <torvalds@ppc970.osdl.org>
Date:   Mon Apr 18 14:25:40 2005 -0700

    Merge SCSI tree from James Bottomley.
    
    Done with "git-pull-script rsync://www.parisc-linux.org/~jejb/scsi-rc-fixes-2.6.git"
    together with an automated content merge.

commit cb624029cab62e5415287d15b2ec907b8f322ff5
Author:  <jejb@titanic.il.steeleye.com>
Date:   Sun Apr 17 18:03:20 2005 -0500

    aic7xxx: convert to SPI transport class Domain Validation
    
    Now that we export all the parameters, this is easy to do.
    It also means that we can dump about 2000 lines of code that
    were dedicated to doing this internally.
    
    Additionally, this removes all the aic7xxx driver abuse
    of SCSI timers which were embedded in the DV routines.
    
    Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

commit 92d161c373b45be158b73a162bedebb5293a73d3
Author:  <jejb@titanic.il.steeleye.com>
Date:   Sun Apr 17 16:59:33 2005 -0500

    aic7xxx: add support for the SPI transport class
    
    This is just a simplistic patch to export all of the
    aic7xxx internal transport parameters via the SPI
    transport class.  It doesn't actually alter the way the
    driver works at all.
    
    Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

commit 7aaef27bafdfa10351726a1d383bdde33422072c
Author:  <jejb@titanic.il.steeleye.com>
Date:   Sun Apr 17 16:32:42 2005 -0500

    qla2xxx: fix compiler warning in qla_attr.c
    
      CC [M]  drivers/scsi/qla2xxx/qla_attr.o
    drivers/scsi/qla2xxx/qla_attr.c: In function `qla2x00_sysfs_write_fw_dump':
    drivers/scsi/qla2xxx/qla_attr.c:65: warning: implicit declaration of function `vfree'
    drivers/scsi/qla2xxx/qla_attr.c:83: warning: implicit declaration of function `vmalloc'
    drivers/scsi/qla2xxx/qla_attr.c:83: warning: cast to pointer from integer of different size
     
    Also remove spurious inclusion of linux/version.h
    
    Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

commit dea3101e0a5c897d2c9351a7444e139db9f40247
Author:  <jejb@titanic.il.steeleye.com>
Date:   Sun Apr 17 16:05:31 2005 -0500

    lpfc: add Emulex FC driver version 8.0.28
    
    From: 	James.Smart@Emulex.Com
    
    Modified for kernel import and
    Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

commit 8e8790415e91964096f862a58cacb55d2bc9a817
Author:  <bunk@stusta.de>
Date:   Sun Apr 17 15:28:39 2005 -0500

    [PATCH] drivers/scsi/gdth.c: cleanups
    
    This patch contains the following cleanups:
    - make some needlessly global functions static
    - remove one more kernel 2.2 #ifdef
    
    Signed-off-by: Adrian Bunk <bunk@stusta.de>
    Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

commit be7db055dd7261522557046370f49160728e3847
Author:  <hch@lst.de>
Date:   Sun Apr 17 15:26:13 2005 -0500

    [PATCH] remove old scsi data direction macros
    
    these have been wrappers for the generic dma direction bits since 2.5.x.
    This patch converts the few remaining drivers and removes the macros.
    
    Arjan noticed there's some hunk in here that shouldn't.  Updated patch
    below:
    
    Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

commit 80e2ca3dcb1043420ac4b06de8eed3d6fedaddda
Author:  <andrew.vasquez@qlogic.com>
Date:   Sun Apr 17 15:16:47 2005 -0500

    [PATCH] qla2xxx: update version to 8.00.02b5-k
    
    Signed-off-by: Andrew Vasquez <andrew.vasquez@qlogic.com>
    Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

commit d6e957bf866537f0d842eb83997ea4db1b09168f
Author:  <andrew.vasquez@qlogic.com>
Date:   Sun Apr 17 15:14:51 2005 -0500

    [PATCH] qla2xxx: remove sale revision notes file
    
    Signed-off-by: Andrew Vasquez <andrew.vasquez@qlogic.com>
    Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

commit 6721d2c809f4537ae01757a2297f2ced338826c1
Author:  <andrew.vasquez@qlogic.com>
Date:   Sun Apr 17 15:13:01 2005 -0500

    [PATCH] qla2xxx: remove /proc interface
    
    Remove /proc support.
    
    Signed-off-by: Andrew Vasquez <andrew.vasquez@qlogic.com>
    Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

commit 83021920e733aa706926046b6ab61912c0d63943
Author:  <andrew.vasquez@qlogic.com>
Date:   Sun Apr 17 15:10:41 2005 -0500

    [PATCH] qla2xxx: cleanup DMA mappings...
    
      Don't use cmd->request->nr_hw_segments as it may not be initialized
      (SG_IO in particular bypasses anything that initializes this and just
      uses scsi_do_req to insert a scsi_request directly on the head of the
      queue) and a bogus value here can trip up the checks to make sure that
      the number of segments will fit in the queue ring buffer, resulting in
      commands that are never completed.
    
      Fix up several issues with PCI DMA mapping and failure to check return
      values on the mappings.
    
      Make the check for space in the ring buffer happen after the DMA mapping
      is done since any checks done before the mapping has taken place are
      bogus.
    
      Doug Ledford <dledford@redhat.com>.
    
    Signed-off-by: Andrew Vasquez <andrew.vasquez@qlogic.com>
    Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

commit bdf796210e01145fd77bbb3ae644d04f982b6c3b
Author:  <andrew.vasquez@qlogic.com>
Date:   Sun Apr 17 15:06:53 2005 -0500

    [PATCH] qla2xxx: remove lun discovery codes...
    
    Remove internal lun discovery routines and support
    structures.
    
    Signed-off-by: Andrew Vasquez <andrew.vasquez@qlogic.com>
    Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

commit 8482e118afa0cb4321ab3d30b1100d27d63130c0
Author:  <andrew.vasquez@qlogic.com>
Date:   Sun Apr 17 15:04:54 2005 -0500

    [PATCH] qla2xxx: add remote port codes...
    
    Add initial support for FC remote port infrastructure.
    
         o Use fc_remote_port...() registration and block/unlock
           functions.
         o Consolidate 'attribute' (fc-remote/sysfs) helpers into
           new qla_attr.c file.
    
    Signed-off-by: Andrew Vasquez <andrew.vasquez@qlogic.com>
    Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

commit f4f051ebb40e74ad0ba02d2cb3a6c16b0393472b
Author:  <andrew.vasquez@qlogic.com>
Date:   Sun Apr 17 15:02:26 2005 -0500

    [PATCH] qla2xxx: remove internal queuing...
    
    Remove internal command queuing from the driver.  As is, this
    driver cannot tolerate cable-pulls as I/Os will begin to fail
    by the upper layers.
    
         o Should be used in conjuction with the
           11-fc_rport_adds_2.diff patch.
         o Removes qla_listops.h file -- no longer needed.
    
    Signed-off-by: Andrew Vasquez <andrew.vasquez@qlogic.com>
    Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

commit c46f2ffb9e7fce7208c2639790e1ade42e00b146
Author: James Bottomley <jejb@titanic>
Date:   Mon Apr 18 13:45:00 2005 -0500

    merge by hand (scsi_device.h)

commit 238628edb6cd427454fb54994e2605e191bfc26a
Author: Ingo Molnar <mingo@elte.hu>
Date:   Mon Apr 18 10:58:36 2005 -0700

    [PATCH] sched: fix signed comparisons of long long
    
    Signed-off-by: Jesper Juhl <juhl-lkml@dif.dk>
    Signed-off-by: Ingo Molnar <mingo@elte.hu>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>
    

commit 9a9947bf7a3a14d2107cb9a27279fc8f463370a9
Author: David Howells <dhowells@redhat.com>
Date:   Mon Apr 18 10:54:51 2005 -0700

    [PATCH] Add 32-bit compatibility for NFSv4 mount
    
    This adds 32-bit compatibility for mounting an NFSv4 mount on a 64-bit
    kernel (such as happens with PPC64). 
    
    The problem is that the mount data for the NFS4 mount process includes
    auxilliary data pointers, probably because the NFS4 mount data may
    conceivably exceed PAGE_SIZE in size - thus breaking against the hard
    limit imposed by sys_mount(). 
    
    Signed-Off-By: David Howells <dhowells@redhat.com>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 219f0817038cabc722968e914490adf6b686499e
Author: Stephen Smalley <sds@tycho.nsa.gov>
Date:   Mon Apr 18 10:47:35 2005 -0700

    [PATCH] SELinux: fix deadlock on dcache lock
    
    This fixes a deadlock on the dcache lock detected during testing at IBM
    by moving the logging of the current executable information from the
    SELinux avc_audit function to audit_log_exit (via an audit_log_task_info
    helper) for processing upon syscall exit. 
    
    For consistency, the patch also removes the logging of other
    task-related information from avc_audit, deferring handling to
    audit_log_exit instead. 
    
    This allows simplification of the avc_audit code, allows the exe
    information to be obtained more reliably, always includes the comm
    information (useful for scripts), and avoids including bogus task
    information for checks performed from irq or softirq. 
    
    Signed-off-by:  Stephen Smalley <sds@tycho.nsa.gov>
    Signed-off-by:  James Morris <jmorris@redhat.com>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 865108d13801d39ec038bdc82b5bec5e1eaffa9d
Author: Geert Uytterhoeven <geert@linux-m68k.org>
Date:   Mon Apr 18 10:47:34 2005 -0700

    [PATCH] M68k: Update defconfigs for 2.6.12-rc2
    
    Signed-off-by: Geert Uytterhoeven <geert@linux-m68k.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>
    

commit 4575ceb1d31d9fabc2314410f1645748284c95a9
Author: Geert Uytterhoeven <geert@linux-m68k.org>
Date:   Mon Apr 18 10:47:33 2005 -0700

    [PATCH] M68k: Update defconfigs for 2.6.11
    
    Signed-off-by: Geert Uytterhoeven <geert@linux-m68k.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>
    

commit f59114b7b5dc677bbd7cc7e26a5fcb3572a3445c
Author:  <htejun@gmail.com>
Date:   Sun Apr 17 15:00:23 2005 -0500

    [PATCH] scsi: scsi_send_eh_cmnd() cleanup
    
    This patch makes scsi_send_eh_cmnd() use sdev and shost instead of
    referencing them through scmd-> everytime.
    
    Signed-off-by: Tejun Heo <htejun@gmail.com>
    Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

commit 06f81ea8ca09b880cadf101d7e23b500e9c164bc
Author:  <htejun@gmail.com>
Date:   Sun Apr 17 14:57:29 2005 -0500

    [PATCH] scsi: remove volatile from scsi data
    
    This patch removes volatile qualifier from scsi_device->device_busy,
    Scsi_Host->host_busy and ->host_failed as the volatile qualifiers
    don't serve any purpose now.  While at it, convert those fields from
    unsigned short to unsigned int as suggested by Christoph.
    
    
    Signed-off-by: Tejun Heo <htejun@gmail.com>
    Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

commit bf341919dbc1fbcbb565fb3224c840760ebd9f85
Author:  <jejb@titanic.il.steeleye.com>
Date:   Tue Apr 12 17:49:09 2005 -0500

    scsi: add DID_REQUEUE to the error handling
    
    We have a DID_IMM_RETRY to require a retry at once, but we could do with
    a DID_REQUEUE to instruct the mid-layer to treat this command in the
    same manner as QUEUE_FULL or BUSY (i.e. halt the submission until
    another command returns ... or the queue pressure builds if there are no
    outstanding commands).
    
    Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

commit 6f71d9bc025b02a8cbc2be83b0226a7043a507a5
Author:  <jejb@titanic.il.steeleye.com>
Date:   Sun Apr 10 23:04:28 2005 -0500

    zfcp: add point-2-point support
    
    From: Andreas Herrmann <aherrman@de.ibm.com>
    
    This patch mainly introduces support for point-2-point
    topology.
    
    From: Heiko Carstens <heiko.carstens@de.ibm.com>
    From: Maxim Shchetynin <maxim@de.ibm.com>
    From: Andreas Herrmann <aherrman@de.ibm.com>
    Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

commit f4c2c15b930b23edaa633b09fe3f4c01b4ecce9f
Author:  <jejb@titanic.il.steeleye.com>
Date:   Sun Apr 10 22:29:42 2005 -0500

    [PATCH] Convert i2o to compat_ioctl
    
    Also broken design in its compat handlers - CONFIG_COMPAT doesn't 
    mean that there should be no native ioctls.
    
    Signed-off-by: Andi Kleen <ak@muc.de>
    
    Reworked with comments from Markus Lidel by:
    Christoph Hellwig <hch@infradead.org>
    
    Rejections fixed and
    Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

commit 2bc474c3646efba67bdc83b7fc7d8ee7562e0106
Author:  <hch@lst.de>
Date:   Sun Apr 10 22:19:25 2005 -0500

    [PATCH] kill old EH constants
    
    Fix up two drivers that incorrectly were using the old return values for
    their new-style EH methods and kill off scsi_obsolete.h that defined the
    constants.  The initio driver has all these constansts defined locally
    and uses them internally, I'll fix that up some time later.
    
    Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

commit c6295cdf656de63d6d1123def71daba6cd91939c
Author:  <htejun@gmail.com>
Date:   Sun Apr 3 14:59:11 2005 -0500

    [PATCH] scsi: remove meaningless scsi_cmnd->serial_number_at_timeout field
    
    scsi_cmnd->serial_number_at_timeout doesn't serve any purpose
    anymore.  All serial_number == serial_number_at_timeout tests
    are always true in abort callbacks.  Kill the field.  Also, as
    ->pid always equals ->serial_number and ->serial_number
    doesn't have any special meaning anymore, update comments
    above ->serial_number accordingly.  Once we remove all uses of
    this field from all lldd's, this field should go.
    
    Signed-off-by: Tejun Heo <htejun@gmail.com>
    Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

commit d3a933dc9851e74581f9f4c8e703e77901ae8d01
Author:  <htejun@gmail.com>
Date:   Sun Apr 3 14:55:06 2005 -0500

    [PATCH] scsi: remove unused scsi_cmnd->internal_timeout field
    
    scsi_cmnd->internal_timeout field doesn't have any meaning
    anymore.  Kill the field.
    
    Signed-off-by: Tejun Heo <htejun@gmail.com>
    Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

commit db9dff366ba78085d0323364fadbf09bec0e77ee
Author:  <hch@lst.de>
Date:   Sun Apr 3 14:53:59 2005 -0500

    [PATCH] remove outdated print_* functions
    
    We have the scsi_print_* functions in the proper namespace for a long
    time now and there weren't a lot users left.
    
    Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

commit b6651129cc27d56a9cbefcb5f713cea7706fd6b7
Author:  <hch@lst.de>
Date:   Sun Apr 3 14:52:44 2005 -0500

    [PATCH] consolidate timeout defintions in scsi.h
    
    Adapted from a patch in SuSE's kernel SRPM.
    
    Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

commit 15e8869943060780b79b242851b0692286fc7d18
Author: Chris Wedgwood <cw@f00f.org>
Date:   Mon Apr 18 08:01:30 2005 -0700

    [PATCH] x86: fix acpi compile without CONFIG_ACPI_BUS
    
    The recent acpi boot patch breaks for me: acpi_fadt needs CONFIG_ACPI_BUS.
    
    Signed-off-By: Chris Wedgwood <cw@f00f.org>
    Acked-by: Andi Kleen <ak@suse.de>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>
    

commit 9c7d3b3a6b6aaeded9d9e5c5111dbcc65b0b0f91
Author: Jurij Smakov <jurij@wooyd.org>
Date:   Sun Apr 17 18:03:12 2005 -0700

    [PATCH] sparc64: Fix copy_sigingo_to_user32()
    
    The compat routine to copy over this data structure was not
    handling SI_POLL correctly, breaking various fcntl() variants
    in compat tasks.
    
    Signed-off-by: David S. Miller <davem@davemloft.net>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit dadeafdfc8da8c27e5a68e0706b9856eaac89391
Author: David S. Miller <davem@davemloft.net>
Date:   Sun Apr 17 18:03:11 2005 -0700

    [PATCH] sparc64: Reduce ptrace cache flushing
    
    We were flushing the D-cache excessively for ptrace() processing
    and this makes debugging threads so slow as to be totally unusable.
    
    All process page accesses via ptrace() go via access_process_vm().
    This routine, for each process page, uses get_user_pages().  That
    in turn does a flush_dcache_page() on the child pages before we
    copy in/out the ptrace request data.
    
    Therefore, all we need to do after the data movement is:
    
    1) Flush the D-cache pages if the kernel maps the page to a different
       color than userspace does.
    2) If we wrote to the page, we need to flush the I-cache on older cpus.
    
    Previously we just flushed the entire cache at the end of a ptrace()
    request, and that was beyond stupid.
    
    Signed-off-by: David S. Miller <davem@davemloft.net>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit fb65b9619b756793d824df7501c895a2c2871f40
Author: David S. Miller <davem@davemloft.net>
Date:   Sun Apr 17 18:03:11 2005 -0700

    [PATCH] sparc: Fix PTRACE_CONT bogosity
    
    SunOS aparently had this weird PTRACE_CONT semantic which
    we copied.  If the addr argument is something other than
    1, it sets the process program counter to whatever that
    value is.
    
    This is different from every other Linux architecture, which
    don't do anything with the addr and data args.
    
    This difference in particular breaks the Linux native GDB support
    for fork and vfork tracing on sparc and sparc64.
    
    There is no interest in running SunOS binaries using this weird
    PTRACE_CONT behavior, so just delete it so we behave like other
    platforms do.
    
    Signed-off-by: David S. Miller <davem@davemloft.net>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 961f8bc9fc91c39a3fe169f3b6d3df1b096769d3
Author: David S. Miller <davem@davemloft.net>
Date:   Sun Apr 17 18:03:10 2005 -0700

    [PATCH] sparc64: use message queue compat syscalls
    
    A couple message queue system call entries for compat tasks
    were not using the necessary compat_sys_*() functions, causing
    some glibc test cases to fail.
    
    Signed-off-by: David S. Miller <davem@davemloft.net>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit a9546f59e90d6ec1b65952c547302e0678e3a5ac
Author: David S. Miller <davem@davemloft.net>
Date:   Sun Apr 17 18:03:09 2005 -0700

    [PATCH] sparc64: Do not flush dcache for ZERO_PAGE.
    
    This case actually can get exercised a lot during an ELF
    coredump of a process which contains a lot of non-COW'd
    anonymous pages.  GDB has this test case which in partiaular
    creates near terabyte process full of ZERO_PAGEes.  It takes
    forever to just walk through the page tables because of
    all of these spurious cache flushes on sparc64.
    
    With this change it takes only a second or so.
    
    Signed-off-by: David S. Miller <davem@davemloft.net>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit a4e884a311893b476893739901bed382cd62b4fe
Author: Linus Torvalds <torvalds@ppc970.osdl.org>
Date:   Sun Apr 17 14:47:24 2005 -0700

    Merge with master.kernel.org:/home/rmk/linux-2.6-rmk.git - ARM changes
    
    First ever true git merge. Let's see if it actually works.

commit ce1dc02f76432a46db149241e015a4f782974623
Author: Linus Torvalds <torvalds@ppc970.osdl.org>
Date:   Sun Apr 17 13:30:46 2005 -0700

    Fix up some file mode differences due to the new git world order.

commit 1d4d5b325315f064e8cd4efaefbe50cdda0357c7
Author: David Brownell <david-b@pacbell.net>
Date:   Sun Apr 17 10:57:20 2005 -0700

    [PATCH] revert fs/char_dev.c CONFIG_BASE_FULL change
    
    This reverts a fs/char_dev.c patch that was merged into BK on March 3.
    
    The problem is that it breaks things ... __register_chrdev_region() has
    a block of code, commented "temporary" for over two years now, which
    fails rudely during PCMCIA initialization or other register_chrdev()
    calls, because it doesn't "degrade to linked list".  This keeps whole
    subsystems from working.
    
    A real fix to that "temporary" code should be possible, using some better
    scheme to allocate major numbers, but it's not something I want to spend
    time on just now.
    
    Signed-off-by: David Brownell <dbrownell@users.sourceforge.net>
    Acked-by: Matt Mackall <mpm@selenic.com>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>
    

commit cc56449f53ba45646c6f0a2edf77c4acb342caed
Author: Russell King <rmk@dyn-67.arm.linux.org.uk>
Date:   Sun Apr 17 16:28:31 2005 +0100

    [PATCH] ARM: fix debug macros
    
    Fix debug EBSA285 and RiscPC debugging macros to detect whether the
    MMU is enabled.
    
    Signed-off-by: Russell King <rmk@arm.linux.org.uk>

commit 684f970e2fd2dc0eb8292500903f54f1ebda0e75
Author: Russell King <rmk@dyn-67.arm.linux.org.uk>
Date:   Sun Apr 17 15:51:02 2005 +0100

    [PATCH] ARM: bitops
    
    Convert ARM bitop assembly to a macro.  All bitops follow the same
    format, so it's silly duplicating the code when only one or two
    instructions are different.
    
    Signed-off-by: Russell King <rmk@arm.linux.org.uk>

commit 652a12ef98d16ccd1ee5cdf2c832ce5411ed3262
Author: Russell King <rmk@dyn-67.arm.linux.org.uk>
Date:   Sun Apr 17 15:50:36 2005 +0100

    [PATCH] ARM: showregs
    
    Fix show_regs() to provide a backtrace.  Provide a new __show_regs()
    function which implements the common subset of show_regs() and die().
    Add prototypes to asm-arm/system.h
    
    Signed-off-by: Russell King <rmk@arm.linux.org.uk>

commit 58c02ec4701c94c671a41e1e5d50c582e859851f
Author: Russell King <rmk@dyn-67.arm.linux.org.uk>
Date:   Sun Apr 17 15:40:46 2005 +0100

    [PATCH] ARM: h3600_irda_set_speed arguments
    
    h3600_irda_set_speed() had the wrong type for the "speed" argument.
    Fix this.
    
    Signed-off-by: Russell King <rmk@arm.linux.org.uk>

commit 336eb02b9171d132a9abe575317fee4cca965af4
Author: Russell King <rmk@dyn-67.arm.linux.org.uk>
Date:   Sun Apr 17 15:36:55 2005 +0100

    [PATCH] ARM: footbridge rtc init
    
    The footbridge ISA RTC was being initialised before we had setup the
    kernel timer.  This caused a divide by zero error when the current
    time of day is set.  Resolve this by initialising the RTC after
    the kernel timer has been initialised.
    
    Signed-off-by: Russell King <rmk@arm.linux.org.uk>

commit 686579d95d48c713bdb7008cc76af8398219e687
Author:  <jejb@titanic.il.steeleye.com>
Date:   Tue Apr 12 17:49:09 2005 -0500

    scsi: add DID_REQUEUE to the error handling
    
    We have a DID_IMM_RETRY to require a retry at once, but we could do with
    a DID_REQUEUE to instruct the mid-layer to treat this command in the
    same manner as QUEUE_FULL or BUSY (i.e. halt the submission until
    another command returns ... or the queue pressure builds if there are no
    outstanding commands).
    
    Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

commit 91bbfbda8d41f834c70c47d6f8c95245c90019e5
Author:  <jejb@titanic.il.steeleye.com>
Date:   Sun Apr 10 23:04:28 2005 -0500

    zfcp: add point-2-point support
    
    From: Andreas Herrmann <aherrman@de.ibm.com>
    
    This patch mainly introduces support for point-2-point
    topology.
    
    From: Heiko Carstens <heiko.carstens@de.ibm.com>
    From: Maxim Shchetynin <maxim@de.ibm.com>
    From: Andreas Herrmann <aherrman@de.ibm.com>
    Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

commit 83363ea074504f9005e28cd6209923637bb74de5
Author:  <jejb@titanic.il.steeleye.com>
Date:   Sun Apr 10 22:29:42 2005 -0500

    [PATCH] Convert i2o to compat_ioctl
    
    Also broken design in its compat handlers - CONFIG_COMPAT doesn't 
    mean that there should be no native ioctls.
    
    Signed-off-by: Andi Kleen <ak@muc.de>
    
    Reworked with comments from Markus Lidel by:
    Christoph Hellwig <hch@infradead.org>
    
    Rejections fixed and
    Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

commit 0db7157ca47e21c7623a59e710b807ad06fce161
Author:  <hch@lst.de>
Date:   Sun Apr 10 22:19:25 2005 -0500

    [PATCH] kill old EH constants
    
    Fix up two drivers that incorrectly were using the old return values for
    their new-style EH methods and kill off scsi_obsolete.h that defined the
    constants.  The initio driver has all these constansts defined locally
    and uses them internally, I'll fix that up some time later.
    
    Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

commit 84011ae88da62a20b3ae7b48e2ae3b1ef0fc810a
Author:  <htejun@gmail.com>
Date:   Sun Apr 3 14:59:11 2005 -0500

    [PATCH] scsi: remove meaningless scsi_cmnd->serial_number_at_timeout field
    
    scsi_cmnd->serial_number_at_timeout doesn't serve any purpose
    anymore.  All serial_number == serial_number_at_timeout tests
    are always true in abort callbacks.  Kill the field.  Also, as
    ->pid always equals ->serial_number and ->serial_number
    doesn't have any special meaning anymore, update comments
    above ->serial_number accordingly.  Once we remove all uses of
    this field from all lldd's, this field should go.
    
    Signed-off-by: Tejun Heo <htejun@gmail.com>
    Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

commit 97665e9c22991401dc56968619c6b8b9c09f3268
Author:  <htejun@gmail.com>
Date:   Sun Apr 3 14:55:06 2005 -0500

    [PATCH] scsi: remove unused scsi_cmnd->internal_timeout field
    
    scsi_cmnd->internal_timeout field doesn't have any meaning
    anymore.  Kill the field.
    
    Signed-off-by: Tejun Heo <htejun@gmail.com>
    Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

commit 1409277c4aad2e87ad27b2b8a6901ce78eaf8081
Author:  <hch@lst.de>
Date:   Sun Apr 3 14:53:59 2005 -0500

    [PATCH] remove outdated print_* functions
    
    We have the scsi_print_* functions in the proper namespace for a long
    time now and there weren't a lot users left.
    
    Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

commit 0890d74f295be849032fd4390ee00422dfda83b1
Author:  <hch@lst.de>
Date:   Sun Apr 3 14:52:44 2005 -0500

    [PATCH] consolidate timeout defintions in scsi.h
    
    Adapted from a patch in SuSE's kernel SRPM.
    
    Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

commit c2a9331c62216e222a08de8dd58559367fef0af6
Author:  <jejb@titanic.il.steeleye.com>
Date:   Tue Apr 12 16:38:09 2005 -0500

    updates for CFQ oops fix
    
    - add a comment to the device structure that the device_busy field
      is now protected by the request_queue->queue_lock
    - null out sdev->request_queue after the queue is released to trap
      any (and there shouldn't be any) use after the queue is freed.
    
    Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

commit 152587deb8903c0edf483a5b889f975bc6bea7e0
Author:  <axboe@suse.de>
Date:   Tue Apr 12 16:22:06 2005 -0500

    [PATCH] fix NMI lockup with CFQ scheduler
    
    The current problem seen is that the queue lock is actually in the
    SCSI device structure, so when that structure is freed on device
    release, we go boom if the queue tries to access the lock again.
    
    The fix here is to move the lock from the scsi_device to the queue.
    
    Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

commit 56fece20086ebe32bce2c0d74ceadd516b56baae
Author:  <jejb@mulgrave.(none)>
Date:   Sun Apr 3 03:57:48 2005 -0600

    [PATCH] finally fix 53c700 to use the generic iomem infrastructure
    
    This driver has had it's own different infrastructure for doing this for
    ages, but it's time it used the common one.
    
    Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

commit e183b06bf0be6c525867476df186d20f8f1efe54
Author:  <aherrman@de.ibm.com>
Date:   Sat Apr 2 13:57:17 2005 -0600

    [PATCH] zfcp: convert to compat_ioctl
    
    Signed-off-by: Andreas Herrmann <aherrman@de.ibm.com>
    Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

commit cb59e840838193957a84ad22f7e1465a06a7c10c
Author:  <dougg@torque.net>
Date:   Sat Apr 2 13:51:23 2005 -0600

    [PATCH] sg.c: update
    
    The attachment combines the most recent patch from
    Yum Rayan <yum.rayan@gmail.com> (to reduce sg stack
    usage), Adrian Bunk <bunk@stusta.de> (to fix check
    after use) and me (fix elapsed time calculation
    (duration) on ia64 machines).
    
    I have modified the patch from Yum Rayan so kmalloc()
    in sg_read() is only called for the (rare) code paths
    that need them.
    
    Changelog:
       - reduce stack usage in sg_ioctl() and sg_read()
       - fix check after use in sg_mmap()
       - hold duration internally in milliseconds and
         check current time later than held time
    
    Signed-off-by: Douglas Gilbert <dougg@torque.net>
    Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

commit a757e64cfa400391041ed7953f0290c34a820c93
Author: NeilBrown <neilb@cse.unsw.edu.au>
Date:   Sat Apr 16 15:26:42 2005 -0700

    [PATCH] md: remove a number of misleading calls to MD_BUG
    
    The conditions that cause these calls to MD_BUG are not kernel bugs, just
    oddities in what userspace is asking for.
    
    Also convert analyze_sbs to return void, and the value it returned was
    always 0.
    
    Signed-off-by: Neil Brown <neilb@cse.unsw.edu.au>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit d28446fe2d87ea344c14741c39962dcc7aee5c78
Author: NeilBrown <neilb@cse.unsw.edu.au>
Date:   Sat Apr 16 15:26:41 2005 -0700

    [PATCH] md: close a small race in md thread deregistration
    
    There is a tiny race when de-registering an MD thread, in that the thread
    could disappear before it is set a SIGKILL, causing send_sig to have
    problems.  
    
    This is most easily closed by holding tasklist_lock between enabling the
    thread to exit (setting ->run to NULL) and telling it to exit.
    
    (akpm: ick.  Needs to use kthread API and stop using signals)
    
    Signed-off-by: Neil Brown <neilb@cse.unsw.edu.au>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 187a27845a9dc1c3da3995e24625ccf2e7a346aa
Author: Benjamin Herrenschmidt <benh@kernel.crashing.org>
Date:   Sat Apr 16 15:26:40 2005 -0700

    [PATCH] fbdev MAINTAINERS update
    
    This patch does the long overdue updates to MAINTAINERS file for aty128fb
    and radeonfb.
    
    Signed-off-by: Benjamin Herrenschmidt <benh@kernel.crashing.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 23907eb8c22e39bcf3d7e7a35a2db1e416157adb
Author: Russell King <rmk+lkml@arm.linux.org.uk>
Date:   Sat Apr 16 15:26:39 2005 -0700

    [PATCH] serial: fix comments in 8250.c
    
    Fix the formatting of some comments in 8250.c, and add a note that the
    register_serial / unregister_serial shouldn't be used in new code.
    
    We do this here in preference to adding to linux/serial.h, since that is used
    by a number of non-8250 drivers which pretend to be 8250.  It is not known
    whether it would be appropriate to do so.
    
    Signed-off-by: Russell King <rmk@arm.linux.org.uk>
    
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit c907132d534c10b4f34a60383c8384403cb424a4
Author: NeilBrown <neilb@cse.unsw.edu.au>
Date:   Sat Apr 16 15:26:38 2005 -0700

    [PATCH] nfsd4: fix struct file leak
    
    We were failing to close on an error path, resulting in a leak of struct files
    which could take a v4 server down fairly quickly....  So call
    nfs4_close_delegation instead of just open-coding parts of it.
    
    Simplify the cleanup on delegation failure while we're at it.
    
    Signed-off-by: J. Bruce Fields <bfields@citi.umich.edu>
    Signed-off-by: Neil Brown <neilb@cse.unsw.edu.au>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit f1ee4f22f21d74bc3ca63b95ca5b63d3a8620527
Author: NeilBrown <neilb@cse.unsw.edu.au>
Date:   Sat Apr 16 15:26:38 2005 -0700

    [PATCH] nfsd4: callback create rpc client returns
    
    rpc_create_clnt and friends return errors, not NULL, on failure.
    
    Signed-off-by: J. Bruce Fields <bfields@citi.umich.edu>
    Signed-off-by: Neil Brown <neilb@cse.unsw.edu.au>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 9e416052f1462801ca857c7536288bac0621615e
Author: NeilBrown <neilb@cse.unsw.edu.au>
Date:   Sat Apr 16 15:26:37 2005 -0700

    [PATCH] nfsd: clear signals before exiting the nfsd() thread
    
    Fixes the error "RPC: failed to contact portmap (errno -512)." when the server
    later tries to unregister from the portmapper.
    
    Signed-off-by: Trond Myklebust <Trond.Myklebust@netapp.com>
    Signed-off-by: J. Bruce Fields <bfields@citi.umich.edu>
    Signed-off-by: Neil Brown <neilb@cse.unsw.edu.au>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit d13df84ff7f3f3e26a9643c1d3cbf94cef9b5b59
Author: akpm@osdl.org <akpm@osdl.org>
Date:   Sat Apr 16 15:26:36 2005 -0700

    [PATCH] jbd dirty buffer leak fix
    
    This fixes the lots-of-fsx-linux-instances-cause-a-slow-leak bug.
    
    It's been there since 2.6.6, caused by:
    
    ftp://ftp.kernel.org/pub/linux/kernel/people/akpm/patches/2.6/2.6.5/2.6.5-mm4/broken-out/jbd-move-locked-buffers.patch
    
    That patch moves under-writeout ordered-data buffers onto a separate journal
    list during commit.  It took out the old code which was based on a single
    list.
    
    The old code (necessarily) had logic which would restart I/O against buffers
    which had been redirtied while they were on the committing transaction's
    t_sync_datalist list.  The new code only writes buffers once, ignoring
    redirtyings by a later transaction, which is good.
    
    But over on the truncate side of things, in journal_unmap_buffer(), we're
    treating buffers on the t_locked_list as inviolable things which belong to the
    committing transaction, and we just leave them alone during concurrent
    truncate-vs-commit.
    
    The net effect is that when truncate tries to invalidate a page whose buffers
    are on t_locked_list and have been redirtied, journal_unmap_buffer() just
    leaves those buffers alone.  truncate will remove the page from its mapping
    and we end up with an anonymous clean page with dirty buffers, which is an
    illegal state for a page.  The JBD commit will not clean those buffers as they
    are removed from t_locked_list.  The VM (try_to_free_buffers) cannot reclaim
    these pages.
    
    The patch teaches journal_unmap_buffer() about buffers which are on the
    committing transaction's t_locked_list.  These buffers have been written and
    I/O has completed.  We can take them off the transaction and undirty them
    within the context of journal_invalidatepage()->journal_unmap_buffer().
    
    Acked-by: "Stephen C. Tweedie" <sct@redhat.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 19272d4385126c2ac369c9f6137a27a08aee50d1
Author: Roland Dreier <roland@topspin.com>
Date:   Sat Apr 16 15:26:35 2005 -0700

    [PATCH] drivers/infiniband/hw/mthca/mthca_main.c: remove an unused label
    
    Correct unwinding in error path of mthca_init_icm().
    
    Signed-off-by: Roland Dreier <roland@topspin.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 68a3c21203b73696769dfdceb68d2d7f5d3c20a0
Author: Roland Dreier <roland@topspin.com>
Date:   Sat Apr 16 15:26:34 2005 -0700

    [PATCH] IB/mthca: add support for new MT25204 HCA
    
    Decouple table of HCA features from exact HCA device type.  Add a current FW
    version field so we can warn when someone is using old FW.  Add support for
    new MT25204 HCA.
    
    Remove the warning about mem-free support, since it should be pretty solid at
    this point.
    
    Signed-off-by: Roland Dreier <roland@topspin.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 08aeb14e5f6c28878266b01c87cc5ce31101afa8
Author: Roland Dreier <roland@topspin.com>
Date:   Sat Apr 16 15:26:34 2005 -0700

    [PATCH] IB/mthca: map context for RDMA responder in mem-free mode
    
    Fix RDMA in mem-free mode: we need to make sure that the RDMA context memory
    is mapped for the HCA.
    
    Signed-off-by: Roland Dreier <roland@topspin.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit ddf841f052fa218547c86169d1074968eca8c503
Author: Roland Dreier <roland@topspin.com>
Date:   Sat Apr 16 15:26:33 2005 -0700

    [PATCH] IB/mthca: update receive queue initialization for new HCAs
    
    Update initialization of receive queue to match new documentation.  This
    change is required to support new MT25204 HCA.
    
    Signed-off-by: Roland Dreier <roland@topspin.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit d10ddbf6d7f6699c386d1f41bf542189de32b6be
Author: Roland Dreier <roland@topspin.com>
Date:   Sat Apr 16 15:26:32 2005 -0700

    [PATCH] IB/mthca: encapsulate mem-free check into mthca_is_memfree()
    
    Clean up mem-free mode support by introducing mthca_is_memfree() function,
    which encapsulates the logic of deciding if a device is mem-free.
    
    Signed-off-by: Roland Dreier <roland@topspin.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 6bd6228eed52ef188ebe46865ccff72da936c968
Author: Roland Dreier <roland@topspin.com>
Date:   Sat Apr 16 15:26:31 2005 -0700

    [PATCH] IB/mthca: tweaks to mthca_cmd.c
    
    Minor tweaks to firmware command handling: kill off an unused get of a value,
    and add a little more info to debug output.
    
    Signed-off-by: Roland Dreier <roland@topspin.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit e0f5fdca1ca9d1659b920827e5cf6dbad20e5391
Author: Michael S. Tsirkin <mst@mellanox.co.il>
Date:   Sat Apr 16 15:26:30 2005 -0700

    [PATCH] IB/mthca: add fast memory region implementation
    
    Implement fast memory regions (FMRs), where the driver writes directly into
    the HCA's translation tables rather than requiring a firmware command.  For
    Tavor, MTTs for FMR are separate from regular MTTs, and are reserved at driver
    initialization.  This is done to limit the amount of virtual memory needed to
    map the MTTs.  For Arbel, there's no such limitation, and all MTTs and MPTs
    may be used for FMR or for regular MR.
    
    Signed-off-by: Michael S. Tsirkin <mst@mellanox.co.il>
    Signed-off-by: Roland Dreier <roland@topspin.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit d0a9d25cdcd511dd523357bc902979220dc72a2e
Author: Michael S. Tsirkin <mst@mellanox.co.il>
Date:   Sat Apr 16 15:26:30 2005 -0700

    [PATCH] IB/mthca: split MR key munging routines
    
    Split Tavor and Arbel/mem-free index<->hw key munging routines, so that FMR
    implementation can call correct implementation without testing HCA type (which
    it already knows).
    
    Signed-off-by: Michael S. Tsirkin <mst@mellanox.co.il>
    Signed-off-by: Roland Dreier <roland@topspin.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 0fabd9fb7bdc935f121e6950a2c4eff971dd4c75
Author: Michael S. Tsirkin <mst@mellanox.co.il>
Date:   Sat Apr 16 15:26:29 2005 -0700

    [PATCH] IB/mthca: add mthca_table_find() function
    
    Add mthca_table_find() function, which returns the lowmem address of an entry
    in a mem-free HCA's context tables.  This will be used by the FMR
    implementation.
    
    Signed-off-by: Michael S. Tsirkin <mst@mellanox.co.il>
    Signed-off-by: Roland Dreier <roland@topspin.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit b8ca06f674ab5d7853d7de892c09bdc4c1bfb069
Author: Michael S. Tsirkin <mst@mellanox.co.il>
Date:   Sat Apr 16 15:26:28 2005 -0700

    [PATCH] IB/mthca: add SYNC_TPT firmware command
    
    Add code for SYNC_TPT firmware command, which will be used by FMR
    implementation.
    
    Signed-off-by: Michael S. Tsirkin <mst@mellanox.co.il>
    Signed-off-by: Roland Dreier <roland@topspin.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit ef416a33acbd2d68a58ea1ffdc13c674e53bc78f
Author: Michael S. Tsirkin <mst@mellanox.co.il>
Date:   Sat Apr 16 15:26:27 2005 -0700

    [PATCH] IB/mthca: add mthca_write64_raw() for writing to MTT table directly
    
    Add mthca_write64_raw() function, which will be used to write FMR entries that
    are in ioremapped PCI memory.
    
    Signed-off-by: Michael S. Tsirkin <mst@mellanox.co.il>
    Signed-off-by: Roland Dreier <roland@topspin.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 9095e208d84c349193fa19245cd5a8bc1a9774b8
Author: Michael S. Tsirkin <mst@mellanox.co.il>
Date:   Sat Apr 16 15:26:26 2005 -0700

    [PATCH] IB/mthca: encapsulate MTT buddy allocator
    
    Encapsulate the buddy allocator used for MTT segments.  This cleans up the
    code and also gets us ready to add FMR support.
    
    Signed-off-by: Michael S. Tsirkin <mst@mellanox.co.il>
    Signed-off-by: Roland Dreier <roland@topspin.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 8df8a34de60f8e51c87e5c145679f1a896133199
Author: Roland Dreier <roland@topspin.com>
Date:   Sat Apr 16 15:26:26 2005 -0700

    [PATCH] IB/mthca: allow address handle creation in interrupt context
    
    Make address handle verbs usable from interrupt context.
    
    Signed-off-by: Roland Dreier <roland@topspin.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 2a4443a699347cb5ac442491421ce7cd7a12e3e2
Author: Michael S. Tsirkin <mst@mellanox.co.il>
Date:   Sat Apr 16 15:26:25 2005 -0700

    [PATCH] IB/mthca: fill in opcode field for send completions
    
    Fill in missing fields in send completions.
    
    Signed-off-by: Itamar Rabenstein <itamar@mellanox.co.il>
    Signed-off-by: Michael S. Tsirkin <mst@mellanox.co.il>
    Signed-off-by: Roland Dreier <roland@topspin.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 44ea66879d5638cfed5b5ecf628badfd8ec26f36
Author: Roland Dreier <roland@topspin.com>
Date:   Sat Apr 16 15:26:24 2005 -0700

    [PATCH] IB/mthca: fix MTT allocation in mem-free mode
    
    Fix bug in MTT allocation in mem-free mode.
    
    I misunderstood the MTT size value returned by the firmware -- it is really
    the size of a single MTT entry, since mem-free mode does not segment the MTT
    as the original firmware did.  This meant that our MTT addresses ended up
    being off by a factor of 8.  This meant that our MTT allocations might
    overlap, and so we could overwrite and corrupt earlier memory regions when
    writing new MTT entries.
    
    We fix this by always using our 64-byte MTT segment size.  This allows some
    simplification of the code as well, since there's no reason to put the MTT
    segment size in a variable -- we can always use our enum value directly.
    
    Signed-off-by: Roland Dreier <roland@topspin.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit ddb934e0eead2feadc7467b1f7bf9c81aa241232
Author: Roland Dreier <roland@topspin.com>
Date:   Sat Apr 16 15:26:23 2005 -0700

    [PATCH] IB/mthca: implement RDMA/atomic operations for mem-free mode
    
    Add code to support RDMA and atomic send work requests in mem-free mode.
    
    Signed-off-by: Roland Dreier <roland@topspin.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit b87dcfbacee9c57b39738f43f32834f02ec302d5
Author: Roland Dreier <roland@topspin.com>
Date:   Sat Apr 16 15:26:22 2005 -0700

    [PATCH] IB/mthca: fix format of CQ number for CQ events
    
    CQ numbers are only 24 bits, so only print 6 hex digits and mask off reserved
    part when reporting a CQ event.
    
    Signed-off-by: Roland Dreier <roland@topspin.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit b635fa215192a02e58e8e30d5d927435aa108192
Author: Roland Dreier <roland@topspin.com>
Date:   Sat Apr 16 15:26:21 2005 -0700

    [PATCH] IB/mthca: only free doorbell records in mem-free mode
    
    On error path, only free doorbell records if we're in mem-free mode.
    
    Signed-off-by: Roland Dreier <roland@topspin.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 4ad81174edfc22528b845a27620db7542c1ce9a6
Author: Roland Dreier <roland@topspin.com>
Date:   Sat Apr 16 15:26:21 2005 -0700

    [PATCH] IB/mthca: print assigned IRQ when interrupt test fails
    
    Print IRQ number when NOP command interrupt test fails to help debugging.
    
    Signed-off-by: Roland Dreier <roland@topspin.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 2714eb5a4fb2b461b452fb8a2f65c8caacdd12d5
Author: Roland Dreier <roland@topspin.com>
Date:   Sat Apr 16 15:26:20 2005 -0700

    [PATCH] IB/mthca: release mutex on doorbell alloc error path
    
    Release mutex on error return path from mthca_alloc_db().
    
    Signed-off-by: Roland Dreier <roland@topspin.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 55645e9b0ae202f9bd58e68eb141d7594163935f
Author: Michael S. Tsirkin <mst@mellanox.co.il>
Date:   Sat Apr 16 15:26:19 2005 -0700

    [PATCH] IB/mthca: fix MR allocation error path
    
    Fix error handling in MR allocation for mem-free mode: mthca_free must get an
    MR index, not a key.
    
    Signed-off-by: Michael S. Tsirkin <mst@mellanox.co.il>
    Signed-off-by: Roland Dreier <roland@topspin.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 85665c9816a2b38866e03c019bf5c2e47eb9fb04
Author: Roland Dreier <roland@topspin.com>
Date:   Sat Apr 16 15:26:18 2005 -0700

    [PATCH] IB/mthca: allocate correct number of doorbell pages
    
    Doorbell record pages are allocated in HCA page size chunks (always 4096
    bytes), so we need to divide by 4096 and not PAGE_SIZE when figuring out how
    many pages we'll need space for.
    
    Signed-off-by: Roland Dreier <roland@topspin.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit e464b2a6c2c297702205ab725fd82489550a7893
Author: Roland Dreier <roland@topspin.com>
Date:   Sat Apr 16 15:26:17 2005 -0700

    [PATCH] IB/mthca: clean up mthca_dereg_mr()
    
    It's cleaner to kfree mthca_mr, and not rely on the fact that ib_mr is the
    first field in mthca_mr.
    
    Signed-off-by: Michael S. Tsirkin <mst@mellanox.co.il>
    Signed-off-by: Roland Dreier <roland@topspin.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 72c30290bea3a24e2ab56c7a51af47012f7465a4
Author: Michael S. Tsirkin <mst@mellanox.co.il>
Date:   Sat Apr 16 15:26:16 2005 -0700

    [PATCH] IB/mthca: allow unaligned memory regions
    
    The first buffer of a memory region is not required to be page-aligned, so
    don't return an error if it's not.
    
    Signed-off-by: Michael S. Tsirkin <mst@mellanox.co.il>
    Signed-off-by: Roland Dreier <roland@topspin.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 3fba231754eef768f6ca83900b726ecf4bc9dc5f
Author: Roland Dreier <roland@topspin.com>
Date:   Sat Apr 16 15:26:16 2005 -0700

    [PATCH] IB/mthca: fix posting sends with immediate data
    
    When posting a work request with immediate data, put the immediate data in the
    immediate data field of the hardware's work request (rather than overwriting
    the flags field).
    
    Signed-off-by: Roland Dreier <roland@topspin.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 17ead2f5cc81c4658e7b495014c2c6856a6f6b88
Author: Roland Dreier <roland@topspin.com>
Date:   Sat Apr 16 15:26:15 2005 -0700

    [PATCH] IB/mthca: fix calculation of RDB shift
    
    Fix calculation of rdb_shift by using original number of QPs, not
    their slot in profile[] (which will be rearranged when we sort it).
    
    Signed-off-by: Roland Dreier <roland@topspin.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 8cf2daf3feae982db9804df3d4b8ec20fa7d6d41
Author: Roland Dreier <roland@topspin.com>
Date:   Sat Apr 16 15:26:14 2005 -0700

    [PATCH] IB/mthca: fill in more device query fields
    
    Implement more of the device_query method in mthca.
    
    Signed-off-by: Roland Dreier <roland@topspin.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 86562a139182bb19c984347f9625b61f3e6f7815
Author: Roland Dreier <roland@topspin.com>
Date:   Sat Apr 16 15:26:13 2005 -0700

    [PATCH] IB/mthca: map MPT/MTT context in mem-free mode
    
    In mem-free mode, when allocating memory regions, make sure that the HCA has
    context memory mapped to cover the virtual space used for the MPT and MTTs
    being used.
    
    Signed-off-by: Roland Dreier <roland@topspin.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 79b61dceafce696d72661d23a02393566b1899ab
Author: Hal Rosenstock <halr@voltaire.com>
Date:   Sat Apr 16 15:26:12 2005 -0700

    [PATCH] IB: Remove incorrect comments
    
    Eliminate unneeded and misleading comments
    
    Signed-off-by: Hal Rosenstock <halr@voltaire.com>
    Signed-off-by: Roland Dreier <roland@topspin.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 0df3bb131f789f5929f7a239869e9945e4a5a734
Author: Roland Dreier <roland@topspin.com>
Date:   Sat Apr 16 15:26:11 2005 -0700

    [PATCH] IB: Fix user MAD registrations with class 0
    
    Fix handling of MAD agent registrations with mgmt_class == 0.  In this case
    ib_umad should pass a NULL registration request to the MAD core rather than a
    request with mgmt_class set to 0.
    
    Signed-off-by: Roland Dreier <roland@topspin.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 20aa65699c4112733770100b7f0cce4ad046405e
Author: Libor Michalek <libor@topspin.com>
Date:   Sat Apr 16 15:26:11 2005 -0700

    [PATCH] IB: Trivial FMR printk cleanup
    
    Add missing newline in printk.
    
    Signed-off-by: Libor Michalek <libor@topspin.com>
    Signed-off-by: Roland Dreier <roland@topspin.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit de0d9641c4f164009b62ecc342f9776d44e78b6a
Author: Roland Dreier <roland@topspin.com>
Date:   Sat Apr 16 15:26:10 2005 -0700

    [PATCH] IB: Fix FMR pool crash
    
    Mask bits correctly from jhash result in ib_fmr_hash() so that the
    computed bucket index is within our hash table.  This fixes an SDP
    crash.
    
    Signed-off-by: Roland Dreier <roland@topspin.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit dfe7cc7e816224b002f6887b2a82cba677f27344
Author: Hal Rosenstock <halr@voltaire.com>
Date:   Sat Apr 16 15:26:09 2005 -0700

    [PATCH] IB: remove unneeded includes
    
    Eliminate no longer needed include files
    
    Signed-off-by: Hal Rosenstock <halr@voltaire.com>
    Signed-off-by: Roland Dreier <roland@topspin.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 24239aff4e25cba2d068b2c6b8e739257351c15d
Author: Sean Hefty <sean.hefty@intel.com>
Date:   Sat Apr 16 15:26:08 2005 -0700

    [PATCH] IB: Keep MAD work completion valid
    
    Replace the *wc field in ib_mad_recv_wc from pointing to a structure on the
    stack to one allocated with the received MAD buffer.  This allows a client to
    access the *wc field after their receive completion handler has returned.
    
    Signed-off-by: Sean Hefty <sean.hefty@intel.com>
    Signed-off-by: Roland Dreier <roland@topspin.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit b1ed8dab9486ecc109b74d3941051155cb07a05a
Author: Roland Dreier <roland@topspin.com>
Date:   Sat Apr 16 15:26:07 2005 -0700

    [PATCH] IPoIB: document conversion to debugfs
    
    Update IPoIB documentation now that multicast debugging files have moved from
    ipoibdebugfs to debugfs.
    
    Signed-off-by: Roland Dreier <roland@topspin.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 9adec1a808603698bd7ff47f3883bd7cd1383f90
Author: Roland Dreier <roland@topspin.com>
Date:   Sat Apr 16 15:26:07 2005 -0700

    [PATCH] IPoIB: convert to debugfs
    
    Convert IPoIB to use debugfs instead of its own custom debugging filesystem.
    
    Signed-off-by: Roland Dreier <roland@topspin.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit e6ded99cbbbfef2cef537d717ad61d2f77f4dfd6
Author: Roland Dreier <roland@topspin.com>
Date:   Sat Apr 16 15:26:06 2005 -0700

    [PATCH] IPoIB: fix static rate calculation
    
    Correct and simplify calculation of static rate.  We need to round up the
    quotient of (local_rate - path_rate) / path_rate.  To round up we add
    (path_rate - 1) to the numerator, so the quotient simplifies to (local_rate -
    1) / path_rate.
    
    No idea how I came up with the old formula.
    
    Signed-off-by: Roland Dreier <roland@topspin.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 62241eb497721be7640e5d9330e60f4a88a4db46
Author: Hal Rosenstock <halr@voltaire.com>
Date:   Sat Apr 16 15:26:05 2005 -0700

    [PATCH] IPoIB: set skb->mac.raw on receive
    
    Set skb->mac.raw on receive.  This fixes crashes when this is
    dereferenced, for example by netfilter or when PF_PACKET is used.
    
    Signed-off-by: Hal Rosenstock <halr@voltaire.com>
    Signed-off-by: Roland Dreier <roland@topspin.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 48a5346b315183ce482df0909234faf97fa41611
Author: Horms <horms@verge.net.au>
Date:   Sat Apr 16 15:26:03 2005 -0700

    [PATCH] Maintainers list update: linux-net -> netdev
    
    Use netdev as the mailing list contact instead of the mostly dead linux-net
    list.
    
    Signed-off-by: Horms <horms@verge.net.au>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 5960f3a63394c091b17682aed3bd8fdd994a1b93
Author: Russell King <rmk+lkml@arm.linux.org.uk>
Date:   Sat Apr 16 15:26:02 2005 -0700

    [PATCH] arm: fix floppy disk dependencies
    
    Both the RiscPC and (optionally) EBSA285 have floppy disk support.  Allow this
    option to be selected on these ARM platforms again.
    
    Signed-off-by: Russell King <rmk@arm.linux.org.uk>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 6c46ada700568897165409e618ed584683838b49
Author: Coywolf Qi Hunt <coywolf@lovecn.org>
Date:   Sat Apr 16 15:26:01 2005 -0700

    [PATCH] reparent_to_init cleanup
    
    This patch hides reparent_to_init().  reparent_to_init() should only be
    called by daemonize().
    
    Signed-off-by: Coywolf Qi Hunt <coywolf@lovecn.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 2f4cfacecd522849dac254f87273525eeca33d1d
Author: Adrian Bunk <bunk@stusta.de>
Date:   Sat Apr 16 15:26:00 2005 -0700

    [PATCH] MAINTAINERS: remove obsolete ACP/MWAVE MODEM entry
    
    Both maintainer email addresses are bouncing and the web address is no
    longer valid.
    
    Seems to be a good time to remove the entry.
    
    Signed-off-by: Adrian Bunk <bunk@stusta.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 5b45c3bb1247ba84e4123c46abe64adf84e03aaf
Author: Adrian Bunk <bunk@stusta.de>
Date:   Sat Apr 16 15:25:59 2005 -0700

    [PATCH] let SOUND_AD1889 depend on PCI
    
    Compiling SOUND_AD1889 with PCI=n results in the following compile
    error:
    
    sound/built-in.o(.text+0x24f0c): In function `ad1889_remove':
    : undefined reference to `pci_release_region'
    
    This patch adds the missing dependency on PCI.
    
    Signed-off-by: Adrian Bunk <bunk@stusta.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 9a8488965dc4c42a4a1f84cab907c7d6c5cf1563
Author: Benoit Boissinot <benoit.boissinot@ens-lyon.org>
Date:   Sat Apr 16 15:25:59 2005 -0700

    [PATCH] cpuset: remove function attribute const
    
    gcc-4 warns with
    include/linux/cpuset.h:21: warning: type qualifiers ignored on function
    return type
    
    cpuset_cpus_allowed is declared with const
    extern const cpumask_t cpuset_cpus_allowed(const struct task_struct *p);
    
    First const should be __attribute__((const)), but the gcc manual
    explains that:
    
    "Note that a function that has pointer arguments and examines the data
    pointed to must not be declared const. Likewise, a function that calls a
    non-const function usually must not be const. It does not make sense for
    a const function to return void."
    
    The following patch remove const from the function declaration.
    
    Signed-off-by: Benoit Boissinot <benoit.boissinot@ens-lyon.org>
    Acked-by: Paul Jackson <pj@sgi.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit b52402c783d8c16b11f146a244bb21086a94bf84
Author: Lennert Buytenhek <buytenh@wantstofly.org>
Date:   Sat Apr 16 15:25:58 2005 -0700

    [PATCH] pci enumeration on ixp2000: overflow in kernel/resource.c
    
    IXP2000 (ARM-based) platforms use a separate 'struct resource' for PCI MEM
    space.  Resource allocation for PCI BARs always fails because the 'root'
    resource (the IXP2000 PCI MEM resource) always has the entire address space
    (00000000-ffffffff) free, and find_resource() calculates the size of that
    range as ffffffff-00000000+1=0, so all allocations fail because it thinks
    there is no space.
    
    (akpm: pls. double-check)
    
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit fe4b334f8bcdf5359771666d5002b293212e4d3f
Author: Colin Leroy <colin@colino.net>
Date:   Sat Apr 16 15:25:57 2005 -0700

    [PATCH] CREDITS update
    
    Update Colin's credits entry.
    
    Signed-off-by: Colin Leroy <colin@colino.net>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 1cfb7161cd0d0eb467f87e4afe29c94d693948c7
Author: Randy.Dunlap <rddunlap@osdl.org>
Date:   Sat Apr 16 15:25:56 2005 -0700

    [PATCH] Add dontdiff file
    
    Add a current 'dontdiff' file for use with 'diff -X dontdiff'.
    
    Signed-off-by: Randy Dunlap <rddunlap@osdl.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 9e95ce279fa611226a1ab0dff1c237c080b51b60
Author: Matt Mackall <mpm@selenic.com>
Date:   Sat Apr 16 15:25:56 2005 -0700

    [PATCH] update maintainer for /dev/random
    
    Ted has agreed to let me take over as maintainer of /dev/random and
    friends.  I've gone ahead and added a line to his entry in CREDITS.
    
    Signed-off-by: Matt Mackall <mpm@selenic.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit d390493b11e1fc790e3840ed191a0f88e3a54ba7
Author: Magnus Damm <damm@opensource.se>
Date:   Sat Apr 16 15:25:55 2005 -0700

    [PATCH] opl3sa2: MODULE_PARM_DESC
    
    opl3sa2: Fix "irq"-parameter name typo for parameter description.
    
    Signed-off-by: Magnus Damm <damm@opensource.se>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit dae409a27788774adb810f7cdb771ba7cce7af8a
Author: James Bottomley <James.Bottomley@SteelEye.com>
Date:   Sat Apr 16 15:25:54 2005 -0700

    [PATCH] add Big Endian variants of ioread/iowrite
    
    In the new io infrastructure, all of our operators are expecting the
    underlying device to be little endian (because the PCI bus, their main
    consumer, is LE).
    
    However, there are a fair few devices and busses in the world that are
    actually Big Endian.  There's even evidence that some of these BE bus and
    chip types are attached to LE systems.  Thus, there's a need for a BE
    equivalent of our io{read,write}{16,32} operations.
    
    The attached patch adds this as io{read,write}{16,32}be.  When it's in,
    I'll add the first consume (the 53c700 SCSI chip driver).
    
    Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit c41f5eb3b8feb8772561f0e34cfee4de1fa433ec
Author: maximilian attems <janitor@sternwelten.at>
Date:   Sat Apr 16 15:25:53 2005 -0700

    [PATCH] efi: eliminate bad section references
    
    Randy please double check especially this one.
    there may be a better solution.
    
    Fix efi section references:
     remove __initdata for struct efi efi_phys 
     and struct efi_memory_map memmap
    
    Error: ./arch/i386/kernel/efi.o .text refers to 000000d3 R_386_32
    .init.data
    Error: ./arch/i386/kernel/efi.o .text refers to 000000ff R_386_32
    .init.data
    
    efi_memmap_walk (which is not __init nor static) 
    accesses both efi_phys and memmap.
    
    Signed-off-by: maximilian attems <janitor@sternwelten.at>
    Acked-by: Randy Dunlap <rddunlap@osdl.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit fca44804508d544b0b9d9d85279e5eea778e4e32
Author: maximilian attems <janitor@sternwelten.at>
Date:   Sat Apr 16 15:25:52 2005 -0700

    [PATCH] hd: eliminate bad section references
    
    Fix hd section references:
    make parse_hd_setup() __init
    
    Error: ./drivers/ide/legacy/hd.o .text refers to 00000943 R_386_PC32
    .init.text
    
    Signed-off-by: maximilian attems <janitor@sternwelten.at>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit ffbe5523a8e7f808681007aaea282da9a316a699
Author: maximilian attems <janitor@sternwelten.at>
Date:   Sat Apr 16 15:25:51 2005 -0700

    [PATCH] pnpbios: eliminate bad section references
    
    one of the last buildcheck errors on i386, thanks Randy again for double
    checking.
    
    Fix pnpbios section references:
    make dmi_system_id pnpbios_dmi_table __initdata
    
    Error: ./drivers/pnp/pnpbios/core.o .data refers to 00000100 R_386_32
    .init.text
    Error: ./drivers/pnp/pnpbios/core.o .data refers to 0000012c R_386_32
    .init.text
    
    Signed-off-by: maximilian attems <janitor@sternwelten.at>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit e1ba0dab261c1941fdf0db28868eaf459aaea089
Author: Paul E. McKenney <paulmck@us.ibm.com>
Date:   Sat Apr 16 15:25:51 2005 -0700

    [PATCH] Fix comment in list.h that refers to nonexistent API
    
    The hlist_for_each_entry_rcu() comment block refers to a nonexistent
    hlist_add_rcu() API, needs to change to hlist_add_head_rcu().
    
    Signed-off-by: Paul E. McKenney <paulmck@us.ibm.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 29504ff3be784372c4e2f7e31681a3e0292c4d9a
Author: Daniel McNeil <daniel@osdl.org>
Date:   Sat Apr 16 15:25:50 2005 -0700

    [PATCH] Direct IO async short read fix
    
    The direct I/O code is mapping the read request to the file system block.  If
    the file size was not on a block boundary, the result would show the the read
    reading past EOF.  This was only happening for the AIO case.  The non-AIO case
    truncates the result to match file size (in direct_io_worker).  This patch
    does the same thing for the AIO case, it truncates the result to match the
    file size if the read reads past EOF.
    
    When I/O completes the result can be truncated to match the file size
    without using i_size_read(), thus the aio result now matches the number of
    bytes read to the end of file.
    
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 1f08ad02379530e1c970d3d104343b9907b4d1b4
Author: Dave Hansen <haveblue@us.ibm.com>
Date:   Sat Apr 16 15:25:49 2005 -0700

    [PATCH] undo do_readv_writev() behavior change
    
    Bugme bug 4326: http://bugme.osdl.org/show_bug.cgi?id=4326 reports:
    
    executing the systemcall readv with Bad argument
    ->len == -1) it gives out error EFAULT instead of EINVAL 
    
    
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 22a685d09bb98810670ac0fb02c2138bdbf038cc
Author: Christoph Hellwig <hch@lst.de>
Date:   Sat Apr 16 15:25:48 2005 -0700

    [PATCH] officially deprecate register_ioctl32_conversion
    
    These have been deprecated since ->compat_ioctl when in, thus only a short
    deprecation period.  There's four users left: i2o_config, s390/z90crypy,
    s390/dasd and s390/zfcp and for the first two patches are about to be
    submitted to get rid of it.
    
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 6cae60feb6709dea4cb94da93d4d2ea039aee59d
Author: Christoph Hellwig <hch@lst.de>
Date:   Sat Apr 16 15:25:47 2005 -0700

    [PATCH] kill #ifndef HAVE_ARCH_GET_SIGNAL_TO_DELIVER in signal.c
    
    Now that no architectures defines HAVE_ARCH_GET_SIGNAL_TO_DELIVER anymore
    this can go away.  It was a transitional hack only.
    
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit e821d94d34af23a31a16ead78e8b685b750c8c3d
Author: Niu YaWei <niu@clusterfs.com>
Date:   Sat Apr 16 15:25:47 2005 -0700

    [PATCH] quota: possible bug in quota format v2 support
    
    Don't put root block of quota tree to the free list (when quota file is
    completely empty).  That should not actually happen anyway (somebody should
    get accounted for the filesystem root and so quota file should never be
    empty) but better prevent it here than solve magical quota file
    corruption.
    
    Signed-off-by: Jan Kara <jack@suse.cz>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 31e7ad6ac919761f0486f7781b02ff3ab54b6ef1
Author: Jan Kara <jack@suse.cz>
Date:   Sat Apr 16 15:25:46 2005 -0700

    [PATCH] quota: fix possible oops on quotaoff
    
    Remove dquot structures from quota file on quotaon - quota code does not
    expect them to be there.
    
    Signed-off-by: Jan Kara <jack@suse.cz>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit e072c6f2af57fb8ad9e0f29bfff3f79edf7bdd55
Author: Bernard Blackham <bernard@blackham.com.au>
Date:   Sat Apr 16 15:25:45 2005 -0700

    [PATCH] ext2 corruption - regression between 2.6.9 and 2.6.10
    
    Whilst trying to stress test a Promise SX8 card, we stumbled across
    some nasty filesystem corruption in ext2. Our tests involved
    creating an ext2 partition, mounting, running several concurrent
    fsx's over it, umounting, and fsck'ing, all scripted[1]. The fsck
    would always return with errors.
    
    This regression was traced back to a change between 2.6.9 and
    2.6.10, which moves the functionality of ext2_put_inode into
    ext2_clear_inode.  The attached patch reverses this change, and
    eliminated the source of corruption.
    
    Mingming Cao <cmm@us.ibm.com> said:
    
    I think his patch for ext2 is correct.  The corruption on ext3 is not the same
    issue he saw on ext2.  I believe that's the race between discard reservation
    and reservation in-use that we already fixed it in 2.6.12- rc1.
    
    For the problem related to ext2, at the time when we design reservation for
    ext3, we decide we only need to discard the reservation at the last file
    close, so we have ext3_discard_reservation on iput_final- >ext3_clear_inode.
    
    The ext2 handle discard preallocation differently at that time, it discard the
    preallocation at each iput(), not in input_final(), so we think it's
    unnecessary to thrash it so frequently, and the right thing to do, as we did
    for ext3 reservation, discard preallocation on last iput().  So we moved the
    ext2_discard_preallocation from ext2_put_inode(0 to ext2_clear_inode.
    
    Since ext2 preallocation is doing pre-allocation on disk, so it is possible
    that at the unmount time, someone is still hold the reference of the inode, so
    the preallocation for a file is not discard yet, so we still mark those blocks
    allocated on disk, while they are not actually in the inode's block map, so
    fsck will catch/fix that error later.
    
    This is not a issue for ext3, as ext3 reservation(pre-allocation) is done in
    memory.
    
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 614a7d6a76b7fb37bb399047eb3ccf86cafbf60d
Author: Christoph Hellwig <hch@lst.de>
Date:   Sat Apr 16 15:25:44 2005 -0700

    [PATCH] fix up newly added jsm driver
    
     - plug various leaks and use after frees in the remove and
       initialization failure path (some still left)
     - remove useless global list of boards and use pci_set_drvdata instead
     - unobsfucate init path by merging functions together
     - kill various totally useless state variables
     - .. probably more I forgot
    
    Note that the tty part still generates lots of sparse warnings and there's
    still a totally useless layer of function pointer indirections, but maybe
    someone else will fix that bit up.
    
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit a299738283a654544c75167d190d9e87b77e5fb7
Author: Ken Chen <kenneth.w.chen@intel.com>
Date:   Sat Apr 16 15:25:43 2005 -0700

    [PATCH] use cheaper elv_queue_empty when unplug a device
    
    In function __generic_unplug_device(), kernel can use a cheaper function
    elv_queue_empty() instead of more expensive elv_next_request to find
    whether the queue is empty or not.  blk_run_queue can also made conditional
    on whether queue's emptiness before calling request_fn().
    
    Signed-off-by: Jens Axboe <axboe@suse.de>
    Signed-off-by: Ken Chen <kenneth.w.chen@intel.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 975e046cc06005bafe0c5ce81d55a1b1eb84f5a1
Author: Bert Wesarg <wesarg@informatik.uni-halle.de>
Date:   Sat Apr 16 15:25:43 2005 -0700

    [PATCH] fix module_param_string() calls
    
    This patch fix 3 calls to module_param_string() in
    driver/media/video/tuner-core.c and drivers/media/video/tda9887.c.  In all
    three places, the len and the perm parameter was switched.
    
    Signed-off-by: Bert Wesarg <wesarg@informatik.uni-halle.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 31143a12044caa3521edafd736e3bc18c098d2fd
Author: Bert Wesarg <wesarg@informatik.uni-halle.de>
Date:   Sat Apr 16 15:25:42 2005 -0700

    [PATCH] kernel/param.c: don't use .max when .num is NULL in param_array_set()
    
    there seems to be a bug, at least for me, in kernel/param.c for arrays with
    .num == NULL.  If .num == NULL, the function param_array_set() uses &.max
    for the call to param_array(), wich alters the .max value to the number of
    arguments.  The result is, you can't set more array arguments as the last
    time you set the parameter.
    
    example:
    
    # a module 'example' with
    # static int array[10] = { 0, };
    # module_param_array(array, int, NULL, 0644);
    
    $ insmod example.ko array=1,2,3
    $ cat /sys/module/example/parameters/array
    1,2,3
    $ echo "4,3,2,1" > /sys/module/example/parameters/array
    $ dmesg | tail -n 1
    kernel: array: can take only 3 arguments
    
    Signed-off-by: Bert Wesarg <wesarg@informatik.uni-halle.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit fc9c9ab22d5650977c417ef2032d02f455011b23
Author: Bharath Ramesh <bramesh@vt.edu>
Date:   Sat Apr 16 15:25:41 2005 -0700

    [PATCH] AYSNC IO using singals other than SIGIO
    
    A question on sigwaitinfo based IO mechanism in multithreaded applications.
    
    I am trying to use RT signals to notify me of IO events using RT signals
    instead of SIGIO in a multithreaded applications.  I noticed that there was
    some discussion on lkml during november 1999 with the subject of the
    discussion as "Signal driven IO".  In the thread I noticed that RT signals
    were being delivered to the worker thread.  I am running 2.6.10 kernel and
    I am trying to use the very same mechanism and I find that only SIGIO being
    propogated to the worker threads and RT signals only being propogated to
    the main thread and not the worker threads where I actually want them to be
    propogated too.  On further inspection I found that the following patch
    which I have attached solves the problem.
    
    I am not sure if this is a bug or feature in the kernel.
    
    
    Roland McGrath <roland@redhat.com> said:
    
    This relates only to fcntl F_SETSIG, which is a Linux extension.  So there is
    no POSIX issue.  When changing various things like the normal SIGIO signalling
    to do group signals, I was concerned strictly with the POSIX semantics and
    generally avoided touching things in the domain of Linux inventions.  That's
    why I didn't change this when I changed the call right next to it.  There is
    no reason I can see that F_SETSIG-requested signals shouldn't use a group
    signal like normal SIGIO does.  I'm happy to ACK this patch, there is nothing
    wrong with its change to the semantics in my book.  But neither POSIX nor I
    care a whit what F_SETSIG does.
    
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 4a534f93b371e8e6e87ae302757365f0f583e06b
Author: Jens Axboe <axboe@suse.de>
Date:   Sat Apr 16 15:25:40 2005 -0700

    [PATCH] possible use-after-free of bio
    
    There is a possibility that a bio will be accessed after it has been freed
    on SCSI.  It happens if you submit a bio with BIO_SYNC marked and the
    auto-unplugging kicks the request_fn, SCSI re-enables interrupts in-between
    so if the request completes between the add_request() in __make_request()
    and the bio_sync() call, we could be looking at a dead bio.  It's a slim
    race, but it has been triggered in the Real World.
    
    So assign bio_sync() to a local variable instead.
    
    Signed-off-by: Jens Axboe <axboe@suse.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 9c340d80f66faaea3522812d0d8c91d6a1b48a22
Author: Paolo 'Blaisorblade' Giarrusso <blaisorblade@yahoo.it>
Date:   Sat Apr 16 15:25:39 2005 -0700

    [PATCH] uml: fix compilation for __CHOOSE_MODE addition
    
    I had added the __CHOOSE_MODE syntax to fix some warnings with newer GCC's
    in the uml-fix-cond-expr-as-lvalues-warning patch.
    
    Here is the update from the version I sent to make it work also when only
    one mode (TT or SKAS) is enabled.
    
    Signed-off-by: Paolo 'Blaisorblade' Giarrusso <blaisorblade@yahoo.it>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 43117a08280e40be43e181c51cce296ef4b4c7e5
Author: Alexander Nyberg <alexn@dsv.su.se>
Date:   Sat Apr 16 15:25:39 2005 -0700

    [PATCH] swsusp: SMP fix
    
    Fix some smp_processor_id-in-preemptible warnings
    
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit bf2049f983eb47f9463d3dd54abd82e3e58846f9
Author: Pavel Machek <pavel@ucw.cz>
Date:   Sat Apr 16 15:25:38 2005 -0700

    [PATCH] fix few remaining u32 vs. pm_message_t problems
    
    This fixes remaining u32 vs.  pm_message_t confusions in -rc2-mm3.  [There
    are usb changes, too; they went to Greg on his request.]
    
    Signed-off-by: Pavel Machek <pavel@suse.cz>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 3bfffd97ef913045080861d1898286ac8975c22a
Author: Pavel Machek <pavel@ucw.cz>
Date:   Sat Apr 16 15:25:37 2005 -0700

    [PATCH] fix u32 vs. pm_message_t in rest of the tree
    
    This fixes u32 vs.  pm_message_t confusion in remaining places.  Fortunately
    there's few of them.
    
    Signed-off-by: Pavel Machek <pavel@suse.cz>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 9bfd354b1b9c2f4faee121892bdfbc1490b51ab5
Author: Pavel Machek <pavel@ucw.cz>
Date:   Sat Apr 16 15:25:36 2005 -0700

    [PATCH] fix u32 vs. pm_message_t in driver/video
    
    This fixes u32 vs.  pm_message_t confusion in drivers/video.  Should change no
    code.
    
    Signed-off-by: Pavel Machek <pavel@suse.cz>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 0370affeec3e751412e917aab931d8ba52680578
Author: Pavel Machek <pavel@ucw.cz>
Date:   Sat Apr 16 15:25:35 2005 -0700

    [PATCH] fix u32 vs. pm_message_t in drivers/
    
    -rc2-mm1 still contains few places where u32 and pm_message_t.  This fixes
    drivers/serial [should change no code].
    
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit a4ffad5b77f17bd8ad2a220d6eb0278bc07a5a17
Author: Pavel Machek <pavel@ucw.cz>
Date:   Sat Apr 16 15:25:34 2005 -0700

    [PATCH] power/video.txt: update documentation with more systems
    
    This updates video.txt documentation with information about few more
    systems.
    
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit b1c42851b006398dda77a068275e8741e33761f1
Author: Pavel Machek <pavel@ucw.cz>
Date:   Sat Apr 16 15:25:34 2005 -0700

    [PATCH] u32 vs. pm_message_t in ppc and radeon
    
    This fixes pm_message_t vs.  u32 confusion in ppc and aty (I *hope* that's
    basically radeon code...).  I was not able to test most of these, but I'm
    not really changing anything, so it should be okay.
    
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 7f4927c1b505eb4e679ab506bf7626af6258e6b6
Author: Pavel Machek <pavel@ucw.cz>
Date:   Sat Apr 16 15:25:33 2005 -0700

    [PATCH] fix u32 vs. pm_message_t in PCI, PCIE
    
    This fixes drivers/pci (mostly pcie stuff).
    
    Signed-off-by: Pavel Machek <pavel@suse.cz>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit f45139044db870835b53a0fea41da2e04c3958d0
Author: Pavel Machek <pavel@ucw.cz>
Date:   Sat Apr 16 15:25:32 2005 -0700

    [PATCH] fix u32 vs. pm_message_t in drivers/macintosh
    
    I thought I'm done with fixing u32 vs.  pm_message_t ...  unfortunately that
    turned out not to be the case as Russel King pointed out.  Here are fixes for
    drivers/macintosh.
    
    Signed-off-by: Pavel Machek <pavel@suse.cz>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 0b9c33a7d6b9f1a72b2dc63bb6b8f055203d9bcb
Author: Pavel Machek <pavel@suse.cz>
Date:   Sat Apr 16 15:25:31 2005 -0700

    [PATCH] Fix u32 vs. pm_message_t in x86-64
    
    I thought I'm done with fixing u32 vs.  pm_message_t ...  unfortunately that
    turned out not to be the case...  Here are fixes x86-64.
    
    Signed-off-by: Pavel Machek <pavel@suse.cz>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit e2d53566a757c8d12246d8daf8c5a2f21a0c4293
Author: Pavel Machek <pavel@suse.cz>
Date:   Sat Apr 16 15:25:30 2005 -0700

    [PATCH] fix pm_message_t vs. u32 in alsa
    
    I thought I'm done with fixing u32 vs.  pm_message_t ...  unfortunately that
    turned out not to be the case as Russel King pointed out.  This fixes last few
    bits in alsa.
    
    Signed-off-by: Pavel Machek <pavel@suse.cz>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit e5378ca8c0ab684bd9339dc6827dd5a042f9e6fc
Author: Pavel Machek <pavel@ucw.cz>
Date:   Sat Apr 16 15:25:29 2005 -0700

    [PATCH] fix u32 vs. pm_message_t in drivers/mmc,mtd,scsi
    
    This fixes u32 vs.  pm_message_t in drivers/mmc, drivers/mtd and
    drivers/scsi.
    
    Signed-off-by: Pavel Machek <pavel@suse.cz>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 8d189f729829369edb2e797e9a6ebc2b01b359d0
Author: Pavel Machek <pavel@ucw.cz>
Date:   Sat Apr 16 15:25:28 2005 -0700

    [PATCH] fix u32 vs. pm_message_t in drivers/message
    
    This fixes u32 vs. pm_message_t in drivers/message.
    
    Signed-off-by: Pavel Machek <pavel@suse.cz>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit a291068991c4d0cc4c2bd533094422bf417c86dd
Author: Pavel Machek <pavel@ucw.cz>
Date:   Sat Apr 16 15:25:27 2005 -0700

    [PATCH] fix u32 vs. pm_message_t in drivers/media
    
    Here are fixes for drivers/media.
    
    Signed-off-by: Pavel Machek <pavel@suse.cz>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 8bf28030f3683f69669d08cb5b32bc46db3d22ae
Author: Pavel Machek <pavel@ucw.cz>
Date:   Sat Apr 16 15:25:26 2005 -0700

    [PATCH] fix u32 vs. pm_message_t in pcmcia
    
    This fixes u32 vs. pm_message_t in pcmcia.
    
    Signed-off-by: Pavel Machek <pavel@suse.cz>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 05adc3b7458e97a1d0180828000207a403083389
Author: Pavel Machek <pavel@ucw.cz>
Date:   Sat Apr 16 15:25:25 2005 -0700

    [PATCH] u32 vs. pm_message_t fixes for drivers/net
    
    This fixes remaining u32s in drivers/ net.
    
    Signed-off-by: Pavel Machek <pavel@suse.cz>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 4fd416c14c583ee6ff1e2b17ab05e7e02e170e4c
Author: Pavel Machek <pavel@ucw.cz>
Date:   Sat Apr 16 15:25:24 2005 -0700

    [PATCH] Fix u32 vs. pm_message_t in drivers/char
    
    Here are fixes for drivers/char.
    
    Signed-off-by: Pavel Machek <pavel@suse.cz>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 438510f6f079e94df294936b5bd8a7fd679cd1c9
Author: Pavel Machek <pavel@ucw.cz>
Date:   Sat Apr 16 15:25:24 2005 -0700

    [PATCH] pm_message_t: more fixes in common and i386
    
    I thought I'm done with fixing u32 vs.  pm_message_t ...  unfortunately
    that turned out not to be the case as Russel King pointed out.  Here are
    fixes for Documentation and common code (mainly system devices).
    
    Signed-off-by: Pavel Machek <pavel@suse.cz>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 74ad74c1581c9a27582945ca01ffdb88fc774171
Author: Yoshinori Sato <ysato@users.sourceforge.jp>
Date:   Sat Apr 16 15:25:21 2005 -0700

    [PATCH] h8300 header update
    
    - page.h: fix build error
    - unistd.h: _syscall macro cleanup.
    
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit d31ddaa1722793228b364e87b6c589023b348798
Author: Siddha, Suresh B <suresh.b.siddha@intel.com>
Date:   Sat Apr 16 15:25:20 2005 -0700

    [PATCH] x86, x86_64: dual core proc-cpuinfo and sibling-map fix
    
    - broken sibling_map setup in x86_64
    
    - grouping all the core and HT related cpuinfo fields.
      We are reasonably sure that adding new cpuinfo fields after "siblings" field,
      will not cause any app failure. Thats because today's /proc/cpuinfo
      format is completely different on x86, x86_64 and we haven't heard of any
      x86 app breakage because of this issue. Grouping these fields will 
      result in more or less common format on all architectures (ia64, x86 and 
      x86_64) and will cause less confusion.
    
    Signed-off-by: Suresh Siddha <suresh.b.siddha@intel.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit a8ab26fe5bfeef43bdcde5182ca051ae0647607e
Author: Andi Kleen <ak@suse.de>
Date:   Sat Apr 16 15:25:19 2005 -0700

    [PATCH] x86_64: Switch SMP bootup over to new CPU hotplug state machine
    
    This will allow hotplug CPU in the future and in general cleans up a lot of
    crufty code.  It also should plug some races that the old hackish way
    introduces.  Remove one old race workaround in NMI watchdog setup that is not
    needed anymore.
    
    I removed the old total sum of bogomips reporting code.  The brag value of
    BogoMips has been greatly devalued in the last years on the open market.
    
    Real CPU hotplug will need some more work, but the infrastructure for it is
    there now.
    
    One drawback: the new TSC sync algorithm is less accurate than before.  The
    old way of zeroing TSCs is too intrusive to do later.  Instead the TSC of the
    BP is duplicated now, which is less accurate.
    
    akpm:
    
    - sync_tsc_bp_init seems to have the sense of `init' inverted.
    
    - SPIN_LOCK_UNLOCKED is deprecated - use DEFINE_SPINLOCK.
    
    Cc: <rusty@rustcorp.com.au>
    Cc: <mingo@elte.hu>
    Signed-off-by: Andi Kleen <ak@suse.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit ebfcaa96fccc01301a577c5c56a5f00543cf167e
Author: Andi Kleen <ak@suse.de>
Date:   Sat Apr 16 15:25:18 2005 -0700

    [PATCH] x86_64: Rename the extended cpuid level field
    
    It was confusingly named.
    
    Signed-off-by: Andi Kleen <ak@suse.de>
    DESC
    x86_64: Switch SMP bootup over to new CPU hotplug state machine
    EDESC
    From: "Andi Kleen" <ak@suse.de>
    
    This will allow hotplug CPU in the future and in general cleans up a lot of
    crufty code.  It also should plug some races that the old hackish way
    introduces.  Remove one old race workaround in NMI watchdog setup that is not
    needed anymore.
    
    I removed the old total sum of bogomips reporting code.  The brag value of
    BogoMips has been greatly devalued in the last years on the open market.
    
    Real CPU hotplug will need some more work, but the infrastructure for it is
    there now.
    
    One drawback: the new TSC sync algorithm is less accurate than before.  The
    old way of zeroing TSCs is too intrusive to do later.  Instead the TSC of the
    BP is duplicated now, which is less accurate.
    
    Cc: <rusty@rustcorp.com.au>
    Cc: <mingo@elte.hu>
    Signed-off-by: Andi Kleen <ak@suse.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 229992446b12fbc755825b6a9f38fc6a273e1f19
Author: Andi Kleen <ak@suse.de>
Date:   Sat Apr 16 15:25:17 2005 -0700

    [PATCH] x86_64: Add acpi_skip_timer_override option
    
    Add acpi_skip_timer_override option.  It was missing previously.
    
    Signed-off-by: Andi Kleen <ak@suse.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 0a65800243742480b4b594b619b759749a3cfef4
Author: Andi Kleen <ak@suse.de>
Date:   Sat Apr 16 15:25:17 2005 -0700

    [PATCH] x86_64: Rewrite exception stack backtracing
    
    Exceptions and hardware interrupts can, to a certain degree, nest, so when
    attempting to follow the sequence of stacks used in order to dump their
    contents this has to be accounted for.  Also, IST stacks have their tops
    stored in the TSS, so there's no need to add the stack size to get to their
    ends.
    
    Minor changes from AK.
    
    Signed-off-by: Jan Beulich <jbeulich@novell.com>
    Signed-off-by: Andi Kleen <ak@suse.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 635186447d0e6f3b35895fda993a266a1315d2a7
Author: Andi Kleen <ak@suse.de>
Date:   Sat Apr 16 15:25:16 2005 -0700

    [PATCH] x86_64: Final support for AMD dual core
    
    Clean up the code greatly.  Now uses the infrastructure from the Intel dual
    core patch Should fix a final bug noticed by Tyan of not detecting the nodes
    correctly in some corner cases.
    
    Patch for x86-64 and i386
    
    Signed-off-by: Andi Kleen <ak@suse.de>
    Signed-off-by: Rafael J. Wysocki <rjw@sisk.pl>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 3dd9d514846cdca1dcef2e4fce666d85e199e844
Author: Andi Kleen <ak@suse.de>
Date:   Sat Apr 16 15:25:15 2005 -0700

    [PATCH] x86_64: add support for Intel dual-core detection and displaying
    
    Appended patch adds the support for Intel dual-core detection and displaying
    the core related information in /proc/cpuinfo.  
    
    It adds two new fields "core id" and "cpu cores" to x86 /proc/cpuinfo and the
    "core id" field for x86_64("cpu cores" field is already present in x86_64).
    
    Number of processor cores in a die is detected using cpuid(4) and this is
    documented in IA-32 Intel Architecture Software Developer's Manual (vol 2a)
    (http://developer.intel.com/design/pentium4/manuals/index_new.htm#sdm_vol2a)
    
    This patch also adds cpu_core_map similar to cpu_sibling_map.
    
    Slightly hacked by AK.
    
    Signed-off-by: Suresh Siddha <suresh.b.siddha@intel.com>
    Signed-off-by: Andi Kleen <ak@suse.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit f2ea2750fbe56867bc8e0eb595115b14195a3e5e
Author: Andi Kleen <ak@suse.de>
Date:   Sat Apr 16 15:25:14 2005 -0700

    [PATCH] x86_64: Remove duplicated syscall entry.
    
    Signed-off-by: Paolo 'Blaisorblade' Giarrusso <blaisorblade@yahoo.it>
    Signed-off-by: Andi Kleen <ak@suse.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit daeeafecf029a05a304fa299706b3ecc90e16175
Author: Andi Kleen <ak@suse.de>
Date:   Sat Apr 16 15:25:13 2005 -0700

    [PATCH] x86_64: Keep only a single debug notifier chain
    
    Calling a notifier three times in the debug handler does not make much sense,
    because a debugger can figure out the various conditions by itself.  Remove
    the additional calls to DIE_DEBUG and DIE_DEBUGSTEP completely.
    
    This matches what i386 does now.
    
    This also makes sure interrupts are always still disabled when calling a
    debugger, which prevents:
    
    BUG: using smp_processor_id() in preemptible [00000001] code: tpopf/1470
    caller is post_kprobe_handler+0x9/0x70
    
    Call Trace:<ffffffff8024f10f>{smp_processor_id+191} <ffffffff80120e69>{post_kpro
    be_handler+9} 
    <ffffffff80120f7a>{kprobe_exceptions_notify+58} 
    <ffffffff80144fc0>{notifier_call_chain+32} <ffffffff80110daf>{do_debug+335} 
    <ffffffff8010f513>{debug+127}  <EOE> 
    
    on preemptible debug kernels with kprobes when single stepping in user space.
    
    This was probably a bug even on non preempt kernels, this function was
    supposed to be running with interrupts off according to a comment there.
    
    Note to third part debugger maintainers: please double check your debugger can
    still single step.
    
    Cc: <prasanna@in.ibm.com>
    Cc: <jbeulich@novell.com>
    Cc: <kaos@sgi.com>
    Cc: <jim.houston@ccur.com>
    Cc: <jfv@bluesong.net>
    Signed-off-by: Andi Kleen <ak@suse.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit ece90303ec7e2e8d8610eb03ee7648755dd8efe7
Author: Andi Kleen <ak@suse.de>
Date:   Sat Apr 16 15:25:13 2005 -0700

    [PATCH] x86_64: Use the e820 hole to map the IOMMU/AGP aperture
    
    This might save memory on some Opteron systems without AGP bridge.
    
    Signed-off-by: Andi Kleen <ak@suse.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit a1e9778203b15b86bc2219e87478d3be9acce735
Author: Andi Kleen <ak@suse.de>
Date:   Sat Apr 16 15:25:12 2005 -0700

    [PATCH] x86_64: Port over e820 gap detection from i386
    
    Look for gaps in the e820 memory map to put PCI resources in.
    
    This hopefully fixes problems with the PCI code assigning 32bit BARs MMIO
    resources which are >32bit.
    
    Signed-off-by: Andi Kleen <ak@suse.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit cf94b62f7005805be0a3ba02c624cb8cd3595bac
Author: Siddha, Suresh B <suresh.b.siddha@intel.com>
Date:   Sat Apr 16 15:25:11 2005 -0700

    [PATCH] x86_64-always-use-cpuid-80000008-to-figure-out-mtrr fix
    
    We need to use the size_and_mask in set_mtrr_var_ranges(which is called
    while programming MTRR's for AP's
    
    Signed-off-by: Suresh Siddha <suresh.b.siddha@intel.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 1f2c958ad51fed18b23558e2047b98dfa752e689
Author: Andi Kleen <ak@suse.de>
Date:   Sat Apr 16 15:25:10 2005 -0700

    [PATCH] x86_64: Always use CPUID 80000008 to figure out MTRR address space size
    
    It doesn't make sense to only do this only for AMD K8.
    
    This would support future CPUs with extended address spaces properly.
    
    For i386 and x86-64
    
    Cc: <davej@redhat.com>
    Signed-off-by: Andi Kleen <ak@suse.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit f0de53bbc2118c754ee923516122d91add288582
Author: Andi Kleen <ak@suse.de>
Date:   Sat Apr 16 15:25:10 2005 -0700

    [PATCH] x86_64: Remove excessive stack allocation in MCE code with large NR_CPUS
    
    Remove excessive stack allocation in MCE code with large NR_CPUS
    
    Signed-off-by: Andi Kleen <ak@suse.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 94ad84740fb3fe6c2112e60bc71a256c2815479d
Author: Andi Kleen <ak@suse.de>
Date:   Sat Apr 16 15:25:09 2005 -0700

    [PATCH] x86_64: Use the extended RIP MSR for machine check reporting if available.
    
    They are rumoured to be much more reliable than the RIP in the stack frame on
    P4s.
    
    This is a borderline case because the code is very simple.  Please note there
    are no plans to add support for all the MCE register MSRs.
    
    Cc: <venkatesh.pallipadi@intel.com>
    Cc: <racing.guo@intel.com>
    Signed-off-by: Andi Kleen <ak@suse.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 1c1734090ebcd31e479798b3af4c260ae09bf3a4
Author: Andi Kleen <ak@suse.de>
Date:   Sat Apr 16 15:25:08 2005 -0700

    [PATCH] x86_64: Correct wrong comment in local.h
    
    local_t is actually a win over atomic_t because it does not need lock
    prefixes.
    
    Signed-off-by: Andi Kleen <ak@suse.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 72e76be2fedb4db320a4855d870f731c1242a9d3
Author: Andi Kleen <ak@suse.de>
Date:   Sat Apr 16 15:25:07 2005 -0700

    [PATCH] x86_64: Don't assume future AMD CPUs have K8 compatible performance counters
    
    The NMI watchdog code did this incorrectly
    
    Signed-off-by: Andi Kleen <ak@suse.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 3a848f632f86f1602094e6172cdc05c048042d7a
Author: Andi Kleen <ak@suse.de>
Date:   Sat Apr 16 15:25:06 2005 -0700

    [PATCH] x86_64: Make kernel math errors a die() now
    
    There were no reports about the previous warning for FPU exceptions in the
    kernel, so make it a die() now.
    
    Also improve the error messages slightly.
    
    Signed-off-by: Andi Kleen <ak@suse.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit c29601e9c1e7893d1755364e350c9188bd56d69f
Author: Andi Kleen <ak@suse.de>
Date:   Sat Apr 16 15:25:05 2005 -0700

    [PATCH] x86_64: Support constantly ticking TSCs
    
    On Intel Noconas the TSC ticks with a constant frequency.  Don't scale the
    factor used by udelay when cpufreq changes the frequency.
    
    This generalizes an earlier patch by Intel for this. 
    
    Cc: <venkatesh.pallipadi@intel.com>
    Signed-off-by: Andi Kleen <ak@suse.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit dc37db4d8cb376bb67c6357c50d707ced3d71c39
Author: Andi Kleen <ak@suse.de>
Date:   Sat Apr 16 15:25:05 2005 -0700

    [PATCH] x86_64: Remove unused macro in preempt support
    
    Remove unused macro in preempt support
    
    Signed-off-by: Andi Kleen <ak@suse.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit cdd219cd1f9e657aead247dfa1ecfdeb37efdf70
Author: Andi Kleen <ak@suse.de>
Date:   Sat Apr 16 15:25:04 2005 -0700

    [PATCH] x86_64: Fix a small missing schedule race
    
    Could lead to a lost reschedule event when the process already rescheduled on
    exception exit, and needs it again while still being in the kernel.  Unlikely
    case though.
    
    Also remove one redundant cli in another entry.S path.
    
    Signed-off-by: Andi Kleen <ak@suse.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 6fefb0d17599d63e9d30c23bcbe2d4e06477cd55
Author: Andi Kleen <ak@suse.de>
Date:   Sat Apr 16 15:25:03 2005 -0700

    [PATCH] x86_64: Regularize exception stack handling
    
    This fixes various issues in the return path for "paranoid"
    handlers (= running on a private exception stack that act like NMIs).
    
    Generalize previous hack to switch back to process stack for
    scheduling/signal handling purposes.
    
    Signed-off-by: Andi Kleen <ak@suse.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 11b854b2f10f398f9a18c65e202853f929dd3185
Author: Andi Kleen <ak@suse.de>
Date:   Sat Apr 16 15:25:02 2005 -0700

    [PATCH] x86_64: Call do_notify_resume unconditionally in entry.S
    
    This removes some unnecessary code in the assembly files.
    
    Matches i386 behaviour.
    
    In addition don't clear the work check mask after work has been done.
    This fixes some theoretical signal/other event losses.
    
    Signed-off-by: Andi Kleen <ak@suse.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 36c1104e309fe93375e67cdbdb2a980f23965f3b
Author: Andi Kleen <ak@suse.de>
Date:   Sat Apr 16 15:25:01 2005 -0700

    [PATCH] x86_64: Minor microoptimization in syscall entry slow path
    
    Minor microoptimization in syscall entry slow path
    
    Signed-off-by: Andi Kleen <ak@suse.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit d61915da63e2ef03d9034e3b2ec7d8cca55d7584
Author: Andi Kleen <ak@suse.de>
Date:   Sat Apr 16 15:25:00 2005 -0700

    [PATCH] x86_64: Fix interaction of single stepping with debuggers
    
    Ported from i386/Linus
    
    Fix another TF corner case.  Need to do the special TF handling for all
    signals to make debuggers happy
    
    Signed-off-by: Andi Kleen <ak@suse.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit b957591fee753101f289615abab1c54ff7b1d29d
Author: Andi Kleen <ak@suse.de>
Date:   Sat Apr 16 15:25:00 2005 -0700

    [PATCH] x86_64: Dump stack and prevent recursion on early fault
    
    Signed-off-by: Andi Kleen <ak@suse.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit f1290ec93e5da4a748ca4758a00b580283e06596
Author: Andi Kleen <ak@suse.de>
Date:   Sat Apr 16 15:24:59 2005 -0700

    [PATCH] x86_64: Use a common function to find code segment bases
    
    To avoid some code duplication.
    
    Signed-off-by: Andi Kleen <ak@suse.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit e502cdd63de666832b3b65017bb607c22d2868de
Author: Andi Kleen <ak@suse.de>
Date:   Sat Apr 16 15:24:58 2005 -0700

    [PATCH] x86_64: Handle programs that set TF in user space using popf while single stepping
    
    Ported from i386/Linus
    
    Still won't handle other TF changing instructions like IRET or LAHF.
    
    Prefix handling must be double checked...
    
    Signed-off-by: Andi Kleen <ak@suse.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit be61bff789fe44bfb6d9282d8f7eccc860bdcfb6
Author: Andi Kleen <ak@suse.de>
Date:   Sat Apr 16 15:24:57 2005 -0700

    [PATCH] x86_64: Some fixes for single step handling
    
    Ported from i386/Linus
    
    Be more careful with TF handling to fix some copy protection codes in Wine
    
    Signed-off-by: Andi Kleen <ak@suse.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit aa85b9af5bdae1f8b84d80367324e4410c3f0674
Author: Andi Kleen <ak@suse.de>
Date:   Sat Apr 16 15:24:56 2005 -0700

    [PATCH] x86_64: clean up ptrace single-stepping
    
    Ported from i386 (originally from Linus)
    
    clean up ptrace single-stepping, make PT_DTRACE exact.
      
      (This makes the naming of "DTRACE" purely historical, since
      on x86 it now means "single step in progress").
    
    Signed-off-by: Andi Kleen <ak@suse.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit b6d9a5d81c6159ad651b5c6bb9223d14e33d8033
Author: Andi Kleen <ak@suse.de>
Date:   Sat Apr 16 15:24:56 2005 -0700

    [PATCH] x86_64: Make IRDA devices are not really ISA devices not depend on CONFIG_ISA
    
    This allows to use them on x86-64
    
    Signed-off-by: Andi Kleen <ak@suse.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 1e01441051dda3bb01c455b6e20bce6d00563d82
Author: Andi Kleen <ak@muc.de>
Date:   Sat Apr 16 15:24:55 2005 -0700

    [PATCH] x86_64: Use a VMA for the 32bit vsyscall
    
    Use a real VMA to map the 32bit vsyscall page
    
    This interacts better with Hugh's upcomming VMA walk optimization
    Also removes some ugly special cases.
    
    Code roughly modelled after the ppc64 vdso version from Ben Herrenschmidt.
    
    Signed-off-by: Andi Kleen <ak@suse.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 35faa71484287fc150b8498cd5acae59ad17a356
Author: akpm@osdl.org <akpm@osdl.org>
Date:   Sat Apr 16 15:24:54 2005 -0700

    [PATCH] x86_64 show_stack(): call touch_nmi_watchdog
    
    I had strange NMI watchdog timeouts running sysrq-T across 9600-baud serial.
    
    
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 90660ec3c3e3f463a3cc7005213345b6c9ecfab9
Author: Jason Davis <jason@rightthere.net>
Date:   Sat Apr 16 15:24:53 2005 -0700

    [PATCH] x86_64 genapic update
    
    x86_64 genapic mechanism should be aware of machines that use physical APIC
    mode regardless of how many clusters/processors are detected.
    
    ACPI 3.0 FADT makes this determination very simple by providing a feature
    flag "force_apic_physical_destination_mode" to state whether the machine
    unconditionally uses physical APIC mode.
    
    Unisys' next generation x86_64 ES7000 will need to utilize this FADT
    feature flag in order to boot the x86_64 kernel in the correct APIC mode. 
    This patch has been tested on both x86_64 commodity and ES7000 boxes.
    
    Signed-off-by: Jason Davis <jason.davis@unisys.com>
    Acked-by: Andi Kleen <ak@suse.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 107ce721abddbd876aa6203ac982821e405400e9
Author: Andi Kleen <ak@suse.de>
Date:   Sat Apr 16 15:24:52 2005 -0700

    [PATCH] x86_64: disable interrupts during SMP bogomips checking
    
    Port over a i386 kludge from rusty to x86-64
    
    I don't think it is a full solution, but the upcomming smp bootup rewrite
    will solve it.
    
    This fixes BUGs at bootup on bigger x86-64 systems.
    
    Signed-off-by: Andi Kleen <ak@suse.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit f18de453eb52dae49bc512ccfa638d9a0f153771
Author: Andi Kleen <ak@suse.de>
Date:   Sat Apr 16 15:24:51 2005 -0700

    [PATCH] x86-64: Fix BUG()
    
    Use the correct file name in BUG()
    
    Signed-off-by: Andi Kleen <ak@suse.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit db4686812835a497d6f5de1e6cf6e8010a3fc0c7
Author: Andi Kleen <ak@suse.de>
Date:   Sat Apr 16 15:24:51 2005 -0700

    [PATCH] x86-64/i386: Revert cpuinfo siblings behaviour back to 2.6.10
    
    Only display physical id/siblings when there are siblings or dual core.
    
    In 2.6.11 I accidentially broke it and it was always displaying these
    fields But for compatibility to all these /proc parsers around it is better
    to do it in the old way again.  
    
    Noticed by Suresh Siddha
    
    Cc: <Suresh.b.siddha@intel.com>
    Signed-off-by: Andi Kleen <ak@suse.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit e09b8c0b2006f5e6b543f7458b684d6ebd99e271
Author: Roland McGrath <roland@redhat.com>
Date:   Sat Apr 16 15:24:50 2005 -0700

    [PATCH] x86-64: i386 vDSO: add PT_NOTE segment
    
    Use the i386 PT_NOTE segment in x86_64 as well.
    
    Signed-off-by: Roland McGrath <roland@redhat.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit c97db4a0a7d4d5be8c64a8d649a4425ee195b05c
Author: Roland McGrath <roland@redhat.com>
Date:   Sat Apr 16 15:24:48 2005 -0700

    [PATCH] i386 vDSO: add PT_NOTE segment
    
    This patch adds an ELF note to the vDSO giving the LINUX_VERSION_CODE
    value.  Having this in the vDSO lets the dynamic linker avoid the `uname'
    syscall it now always does at startup to ascertain the kernel ABI
    available.
    
    Signed-off-by: Roland McGrath <roland@redhat.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit ecd02dddd1d5bfc2141cbd0e205a53fb9d849c9e
Author: Roland McGrath <roland@redhat.com>
Date:   Sat Apr 16 15:24:46 2005 -0700

    [PATCH] i386: Use loaddebug macro consistently
    
    This moves the macro loaddebug from asm-i386/suspend.h to
    asm-i386/processor.h, which is the place that makes sense for it to be
    defined, removes the extra copy of the same macro in
    arch/i386/kernel/process.c, and makes arch/i386/kernel/signal.c use the
    macro in place of its expansion.
    
    This is a purely cosmetic cleanup for the normal i386 kernel.  However, it
    is handy for Xen to be able to just redefine the loaddebug macro once
    instead of also changing the signal.c code.
    
    Signed-off-by: Roland McGrath <roland@redhat.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit b0a70b57f909647d79e0cc30772a0664fbf9830a
Author: Jason Gaston <jason.d.gaston@intel.com>
Date:   Sat Apr 16 15:24:45 2005 -0700

    [PATCH] i2c-i801: I2C patch for Intel ESB2
    
    This patch adds the Intel ESB2 DID's to the i2c-i801.c and Kconfig files for
    I2C support.
    
    Signed-off-by:  Jason Gaston <Jason.d.gaston@intel.com>
    Cc: Greg KH <greg@kroah.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 680d32357a0235fbadfba8e52dd40e80f55b6b05
Author: Jason Gaston <jason.d.gaston@intel.com>
Date:   Sat Apr 16 15:24:45 2005 -0700

    [PATCH] ahci: AHCI mode SATA patch for Intel ESB2
    
    This patch adds the Intel ESB2 DID's to the ahci.c file for AHCI mode SATA
    support.
    
    Signed-off-by: Jason Gaston <Jason.d.gaston@intel.com>
    Cc: <linux-scsi@vger.kernel.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit c368ca4ef471aa8e82ee1de7086cb7ef5053cb95
Author: Jason Gaston <jason.d.gaston@intel.com>
Date:   Sat Apr 16 15:24:44 2005 -0700

    [PATCH] ata_piix: IDE mode SATA patch for Intel ESB2
    
    This patch adds the Intel ESB2 DID's to the ata_piix.c and quirks.c file for
    IDE mode SATA support.
    
    Signed-off-by: Jason Gaston <Jason.d.gaston@intel.com>
    Cc: Jeff Garzik <jgarzik@pobox.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit c4c8ea948aa21527d502e87227b2f1d951bc506d
Author: Jason Gaston <jason.d.gaston@intel.com>
Date:   Sat Apr 16 15:24:43 2005 -0700

    [PATCH] intel8x0: AC'97 audio patch for Intel ESB2
    
    This patch adds the Intel ESB2 DID's to the intel8x0.c file for AC'97 audio
    support.
    
    Signed-off-by:  Jason Gaston <Jason.d.gaston@intel.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit d69332b875efb52ea5276d5638ce572fcd7375f2
Author: Jason Gaston <jason.d.gaston@intel.com>
Date:   Sat Apr 16 15:24:42 2005 -0700

    [PATCH] piix: IDE PATA patch for Intel ESB2
    
    This patch adds the Intel ESB2 DID's to the piix.c file for IDE PATA support.
    
    Signed-off-by: Jason Gaston <Jason.d.gaston@intel.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit e285f8091b4ae9972f812400dc8b4b40ee779010
Author: Jason Gaston <jason.d.gaston@intel.com>
Date:   Sat Apr 16 15:24:41 2005 -0700

    [PATCH] irq and pci_ids: patch for Intel ESB2
    
    This patch adds the Intel ESB2 DID's to the irq.c and pci_ids.h files.
    
    Signed-off-by: Jason Gaston <Jason.d.gaston@intel.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 48bb35831bb0344abc9aecb39467fd006b2f5d7d
Author: Yoichi Yuasa <yuasa@hh.iij4u.or.jp>
Date:   Sat Apr 16 15:24:41 2005 -0700

    [PATCH] mips: remove #include <linux/audit.h> two times
    
    This patch removes #include <linux/audit.h>.  Because it includes it two
    times.
    
    Signed-off-by: Yoichi Yuasa <yuasa@hh.iij4u.or.jp>
    Cc: Ralf Baechle <ralf@linux-mips.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 5dfa9c1b4f5d399a2800d8486ca188988900db87
Author: Yoichi Yuasa <yuasa@hh.iij4u.or.jp>
Date:   Sat Apr 16 15:24:40 2005 -0700

    [PATCH] mips: update VR41xx CPU-PCI bridge support
    
    This patch updates NEC VR4100 series CPU-PCI bridge support.
    
    Signed-off-by: Yoichi Yuasa <yuasa@hh.iij4u.or.jp>
    Cc: Ralf Baechle <ralf@linux-mips.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 4bfa437cf137fc653b286c110d849ff1ad2aee2b
Author: Yoichi Yuasa <yuasa@hh.iij4u.or.jp>
Date:   Sat Apr 16 15:24:39 2005 -0700

    [PATCH] mips: remove obsolete VR41xx RTC function from vr41xx.h
    
    This patch had removed obsolete VR41xx RTC function from vr41xx.h .  I
    forgot to put this change in "update VR41xx RTC support".
    
    Signed-off-by: Yoichi Yuasa <yuasa@hh.iij4u.or.jp>
    Cc: Ralf Baechle <ralf@linux-mips.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit e63f8f439de010b6227c0c9c6f56e2c44dbe5dae
Author: Olof Johansson <olof@austin.ibm.com>
Date:   Sat Apr 16 15:24:38 2005 -0700

    [PATCH] ppc64: no prefetch for NULL pointers
    
    For prefetches of NULL (as when walking a short linked list), PPC64 will in
    some cases take a performance hit.  The hardware needs to do the TLB walk,
    and said walk will always miss, which means (up to) two L2 misses as
    penalty.  This seems to hurt overall performance, so for NULL pointers skip
    the prefetch alltogether.
    
    Signed-off-by: Olof Johansson <olof@austin.ibm.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 89e09f5ebba4bcde9852e4be4af536d5b691f20a
Author: Anton Blanchard <anton@samba.org>
Date:   Sat Apr 16 15:24:37 2005 -0700

    [PATCH] ppc64: remove -fno-omit-frame-pointer
    
    During some code inspection using gcc 4.0 I noticed a stack frame was being
    created for a number of functions that didnt require it.  For example:
    
    c0000000000df944 <._spin_unlock>:
    c0000000000df944:       fb e1 ff f0     std     r31,-16(r1)
    c0000000000df948:       f8 21 ff c1     stdu    r1,-64(r1)
    c0000000000df94c:       7c 3f 0b 78     mr      r31,r1
    c0000000000df950:       7c 20 04 ac     lwsync
    c0000000000df954:       e8 21 00 00     ld      r1,0(r1)
    c0000000000df958:       38 00 00 00     li      r0,0
    c0000000000df95c:       90 03 00 00     stw     r0,0(r3)
    c0000000000df960:       eb e1 ff f0     ld      r31,-16(r1)
    c0000000000df964:       4e 80 00 20     blr
    
    It turns out we are adding -fno-omit-frame-pointer to ppc64 which is
    causing the above behaviour.  Removing that flag results in much better
    code:
    
    c0000000000d5b30 <._spin_unlock>:
    c0000000000d5b30:       7c 20 04 ac     lwsync
    c0000000000d5b34:       38 00 00 00     li      r0,0
    c0000000000d5b38:       90 03 00 00     stw     r0,0(r3)
    c0000000000d5b3c:       4e 80 00 20     blr
    
    We dont require a frame pointer to debug on ppc64, so remove it.
    
    Signed-off-by: Anton Blanchard <anton@samba.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 50bfb2e0329d45dd46fdc34f70cdaabe2d8a1dc7
Author: Benjamin Herrenschmidt <benh@kernel.crashing.org>
Date:   Sat Apr 16 15:24:37 2005 -0700

    [PATCH] ppc64: remove bogus f50 hack in prom.c
    
    The code that parses the OF device tree contains an old bogus hack which
    was killed a long time ago on ppc32, but survived in ppc64.  It was
    supposed to help with a problem on the f50 which is ...  a 32 bits machine
    :) Additionally, that hack is causing problems, so let's just get rid of
    it.
    
    Signed-off-by: Benjamin Herrenschmidt <benh@kernel.crashing.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 187335a4ec72c9bc7f3f168d6858a41fcfb63302
Author: Benjamin Herrenschmidt <benh@kernel.crashing.org>
Date:   Sat Apr 16 15:24:36 2005 -0700

    [PATCH] ppc64: Detect altivec via firmware on unknown CPUs
    
    This patch adds detection of the Altivec capability of the CPU via the
    firmware in addition to the cpu table.  This allows newer CPUs that aren't
    in the table to still have working altivec support in the kernel.
    
    It also fixes a problem where if a CPU isn't recognized as having altivec
    features, and takes an altivec unavailable exception due to userland
    issuing altivec instructions, the kernel would happily enable it and
    context switch the registers ...  but not all of them (it would basically
    forget vrsave).  With this patch, the kernel will refuse to enable altivec
    when the feature isn't detected for the CPU (SIGILL).
    
    Signed-off-by: Benjamin Herrenschmidt <benh@kernel.crashing.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 547ee84cea37696d25c93306e909378a87db2f66
Author: Benjamin Herrenschmidt <benh@kernel.crashing.org>
Date:   Sat Apr 16 15:24:35 2005 -0700

    [PATCH] ppc64: Improve mapping of vDSO
    
    This patch reworks the way the ppc64 is mapped in user memory by the kernel
    to make it more robust against possible collisions with executable
    segments.  Instead of just whacking a VMA at 1Mb, I now use
    get_unmapped_area() with a hint, and I moved the mapping of the vDSO to
    after the mapping of the various ELF segments and of the interpreter, so
    that conflicts get caught properly (it still has to be before
    create_elf_tables since the later will fill the AT_SYSINFO_EHDR with the
    proper address).
    
    While I was at it, I also changed the 32 and 64 bits vDSO's to link at
    their "natural" address of 1Mb instead of 0.  This is the address where
    they are normally mapped in absence of conflict.  By doing so, it should be
    possible to properly prelink one it's been verified to work on glibc.
    
    Signed-off-by: Benjamin Herrenschmidt <benh@kernel.crashing.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit fa89c5092eddcbcb425a1416f85906e3cc519793
Author: Paul Mackerras <paulus@samba.org>
Date:   Sat Apr 16 15:24:34 2005 -0700

    [PATCH] ppc64: fix export of wrong symbol
    
    In arch/ppc64/kernel/ppc_ksyms.c, we are still exporting
    flush_icache_range, but that has been changed to be an inline in
    include/asm-ppc64/cacheflush.h which calls __flush_icache_range (defined in
    arch/ppc64/kernel/misc.S).
    
    This patch changes the export to __flush_icache_range, thus allowing
    modules to use the inline flush_icache_range.
    
    Signed-off-by: Paul Mackerras <paulus@samba.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit dfbacdc1a0b568dfa69fb2c1b39b608074001083
Author: Benjamin Herrenschmidt <benh@kernel.crashing.org>
Date:   Sat Apr 16 15:24:33 2005 -0700

    [PATCH] ppc64: Fix semantics of __ioremap
    
    This patch fixes ppc64 __ioremap() so that it stops adding implicitely
    _PAGE_GUARDED when the cache is not writeback, and instead, let the callers
    provide the flag they want here.  This allows things like framebuffers to
    explicitely request a non-cacheable and non-guarded mapping which is more
    efficient for that type of memory without side effects.  The patch also
    fixes all current callers to add _PAGE_GUARDED except btext, which is fine
    without it.
    
    Signed-off-by: Benjamin Herrenschmidt <benh@kernel.crashing.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 7bbd827750e630003896c96d0212962276ee5d91
Author: Benjamin Herrenschmidt <benh@kernel.crashing.org>
Date:   Sat Apr 16 15:24:32 2005 -0700

    [PATCH] ppc64: very basic desktop g5 sound support
    
    This patch hacks the current PowerMac Alsa driver to add some basic support
    of analog sound output to some desktop G5s.  It has severe limitations
    though:
    
     - Only 44100Khz 16 bits
     - Only work on G5 models using a TAS3004 analog code, that is early
       single CPU desktops and all dual CPU desktops at this date, but none
       of the more recent ones like iMac G5.
     - It does analog only, no digital/SPDIF support at all, no native
       AC3 support
    
    Better support would require a complete rewrite of the driver (which I am
    working on, but don't hold your breath), to properly support the diversity
    of apple sound HW setup, including dual codecs, several i2s busses, all the
    new codecs used in the new machines, proper clock switching with digital,
    etc etc etc...
    
    This patch applies on top of the other PowerMac sound patches I posted in
    the past couple of days (new powerbook support and sleep fixes).  
    
    Note: This is a FAQ entry for PowerMac sound support with TI codecs: They
    have a feature called "DRC" which is automatically enabled for the internal
    speaker (at least when auto mute control is enabled) which will cause your
    sound to fade out to nothing after half a second of playback if you don't
    set a proper "DRC Range" in the mixer.  So if you have a problem like that,
    check alsamixer and raise your DRC Range to something reasonable.
    
    Note2: This patch will also add auto-mute of the speaker when line-out jack
    is used on some earlier desktop G4s (and on the G5) in addition to the
    headphone jack.  If that behaviour isn't what you want, just disable
    auto-muting and use the manual mute controls in alsamixer.
    
    Signed-off-by: Benjamin Herrenschmidt <benh@kernel.crashing.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit b20af5f59797796d28b701f5d337e47c8a142eb2
Author: Benjamin Herrenschmidt <benh@kernel.crashing.org>
Date:   Sat Apr 16 15:24:32 2005 -0700

    [PATCH] pmac: Improve sleep code of tumbler driver
    
    This patch improves the behaviour of the "tumbler/snapper" driver used on
    newer PowerMacs during sleep.  It properly set the HW mutes to shut down
    amplifiers and does an analog shutdown of the codec.  That might improve
    power consumption during sleep on a number of machines.
    
    Signed-off-by: Benjamin Herrenschmidt <benh@kernel.crashing.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit b75550e1bc6b3b2c80b628e68628fca015634071
Author: Benjamin Herrenschmidt <benh@kernel.crashing.org>
Date:   Sat Apr 16 15:24:31 2005 -0700

    [PATCH] pmac: sound support for latest laptops
    
    This patch hacks the current Alsa snd-powermac driver to add support for
    recent machine models with the tas3004 chip, that is basically new laptop
    models.  The Mac Mini is _NOT_ yet supported by this patch (soon soon ...).
     The G5s (iMac or Desktop) will need the rewritten sound driver on which
    I'm working on (I _might_ get a hack for analog only on some G5s on the
    current driver, but no promise).
    
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 16b817579fb61050f1abcc0e81089974328a9c27
Author: Benjamin Herrenschmidt <benh@kernel.crashing.org>
Date:   Sat Apr 16 15:24:30 2005 -0700

    [PATCH] ppc32: MV643XX ethernet is an option for Pegasos
    
    This patch allows Kconfig to build the MV643xx ethernet driver on Pegasos
    (CONFIG_PPC_MULTIPLATFORM) and adds what I think is a missing fix from
    Dale's batch, that is remove SA_INTERRUPT and add SA_SHIRQ in there as the
    interrupt is shared if I understand things correctly.
    
    Signed-off-by: Benjamin Herrenschmidt <benh@kernel.crashing.org>
    Signed-off-by: Fabio Massimo Di Nitto <fabbione@ubuntu.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit d8f6098d5b0e9755c79d05e30b185a6e964fd3fa
Author: Benoit Boissinot <benoit.boissinot@ens-lyon.org>
Date:   Sat Apr 16 15:24:29 2005 -0700

    [PATCH] ppc32: fix compilation error in arch/ppc/syslib/open_pic_defs.h
    
    make defconfig give the following error on ppc (gcc-4):
    
    arch/ppc/syslib/open_pic.c:36: error: static declaration of âOpenPICâ follows non-static declaration
    arch/ppc/syslib/open_pic_defs.h:175: error: previous declaration of âOpenPICâ was here
    
    Signed-Off-By: Benoit Boissinot <benoit.boissinot@ens-lyon.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit cd2c169e6a2d15dce3f526b1e2f97e843f8f5787
Author: Benoit Boissinot <benoit.boissinot@ens-lyon.org>
Date:   Sat Apr 16 15:24:28 2005 -0700

    [PATCH] ppc32: fix compilation error in include/asm/prom.h
    
    make defconfig give the following error on ppc (gcc-4):
    
    arch/ppc/syslib/prom_init.c:120: error: static declaration of âprom_display_pathsâ follows non-static declaration
    include/asm/prom.h:17: error: previous declaration of âprom_display_pathsâ was here
    arch/ppc/syslib/prom_init.c:122: error: static declaration of âprom_num_displaysâ follows non-static declaration
    include/asm/prom.h:18: error: previous declaration of âprom_num_displaysâ was here
    
    Signed-Off-By: Benoit Boissinot <benoit.boissinot@ens-lyon.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 51e6606491a0f5deaba52fb00c0374b9cb612f98
Author: Benoit Boissinot <benoit.boissinot@ens-lyon.org>
Date:   Sat Apr 16 15:24:28 2005 -0700

    [PATCH] ppc32: fix compilation error in arch/ppc/kernel/time.c
    
    make defconfig give the following error on ppc (gcc-4):
    
    arch/ppc/kernel/time.c:92: error: static declaration of âtime_offsetâ
    follows non-static declaration
    include/linux/timex.h:236: error: previous declaration of âtime_offsetâ
    was here
    
    The following patch solves it (time_offset is declared in timer.c).
    
    Signed-Off-By: Benoit Boissinot <benoit.boissinot@ens-lyon.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 9ce3a719bc5772bc84ab6f50ef505da6992778ff
Author: Benoit Boissinot <benoit.boissinot@ens-lyon.org>
Date:   Sat Apr 16 15:24:27 2005 -0700

    [PATCH] ppc32: fix compilation error in include/asm-m68k/setup.h
    
    make defconfig give the following error on ppc (gcc-4):
    
    include/asm-m68k/setup.h:365: error: array type has incomplete element
    type
    
    Signed-Off-By: Benoit Boissinot <benoit.boissinot@ens-lyon.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit b625a2b85221821b6831a387ee23ff7d93ffb7d1
Author: Leigh Brown <leigh@solinno.co.uk>
Date:   Sat Apr 16 15:24:26 2005 -0700

    [PATCH] ppc32: Make the Powerstack II Pro4000 boot again
    
    This patch restores the original behaviour of prep_pcibios_fixup() to only
    call prep_pib_init() on machines with an openpic.  This allows the
    Powerstack II Pro4000 to boot again.
    
    Signed-off-by: Leigh Brown <leigh@solinno.co.uk>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit ef2f3253f061cbb86da25411a6e6e6a69a84b6ac
Author: Tom Rini <trini@kernel.crashing.org>
Date:   Sat Apr 16 15:24:25 2005 -0700

    [PATCH] ppc32: Fix building 32bit kernel for 64bit machines
    
    When building a ppc32 MULTIPLATFORM kernel for a 64bit pmac, we try and
    build certain files or use certain functions that make no sense in that
    context.  This catches the last of these.
    
    Signed-off-by: Tom Rini <trini@kernel.crashing.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 54095a6ec7b11a008c07c5016b025206a051f560
Author: Giovambattista Pulcini <gpulcini@swintel.it>
Date:   Sat Apr 16 15:24:24 2005 -0700

    [PATCH] ppc32: Fix a problem with NTP on !(chrp||gemini)
    
    The following problem was found by Giovambattista Pulcini
    <gpulcini@swintel.it>, who also provided a partial patch, and this has been
    verified by our time guru Gabriel Paubert <paubert@iram.es>.
    
    The problem is that in do_settimeofday() we always set time_state to
    TIME_ERROR and except on two platforms, never re-set it.  This meant that
    ntp_gettime() and ntp_adjtime() always returned TIME_ERROR, incorrectly. 
    Based on Gabriel's analysis, time_state is used for leap-second processing,
    and ppc shouldn't be mucking with it.
    
    Signed-off-by: Tom Rini <trini@kernel.crashing.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit fd16230a05751af5a221a1f1c988bb519fd66679
Author: Tom Rini <trini@kernel.crashing.org>
Date:   Sat Apr 16 15:24:23 2005 -0700

    [PATCH] ppc32: Fix mpc8xx watchdog
    
    The CONFIG_8xx_WDT option got broken in the generic hardirq update as ppc32
    had its own different request_irq that worked when other arches used
    setup_irq.  This is the trivial fix for the problem.
    
    From: Carsten Juttner <carjay@gmx.net>
    Signed-off-by: Tom Rini <trini@kernel.crashing.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit f50b153b1966230e78034d5ab1641ca4bb5db56d
Author: Kumar Gala <galak@freescale.com>
Date:   Sat Apr 16 15:24:22 2005 -0700

    [PATCH] ppc32: Support 36-bit physical addressing on e500
    
    To add support for 36-bit physical addressing on e500 the following changes
    have been made.  The changes are generalized to support any physical address
    size larger than 32-bits:
    
    * Allow FSL Book-E parts to use a 64-bit PTE, it is 44-bits of pfn, 20-bits
      of flags.
    
    * Introduced new CPU feature (CPU_FTR_BIG_PHYS) to allow runtime handling of
      updating hardware register (SPRN_MAS7) which holds the upper 32-bits of
      physical address that will be written into the TLB.  This is useful since
      not all e500 cores support 36-bit physical addressing.
    
    * Currently have a pass through implementation of fixup_bigphys_addr
    
    * Moved _PAGE_DIRTY in the 64-bit PTE case to free room for three additional
      storage attributes that may exist in future FSL Book-E cores and updated
      fault handler to copy these bits into the hardware TLBs.
    
    Signed-off-by: Kumar Gala <kumar.gala@freescale.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit b464fce5edc08a825907e9d48a2d2f1af0393fef
Author: Kumar Gala <galak@freescale.com>
Date:   Sat Apr 16 15:24:21 2005 -0700

    [PATCH] ppc32: Allow adjust of pfn offset in pte
    
    Allow the pfn to be offset by more than just PAGE_SHIFT in the pte.  Today,
    PAGE_SHIFT tends to allow us to have 12-bits of flags in the pte.  In the
    future if we have a larger pte we can allocate more bits for flags by
    offsetting the pfn even further.
    
    Signed-off-by: Kumar Gala <kumar.gala@freescale.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit a85f6d4aca822acdb49d27c44519cd6514b06a1d
Author: Kumar Gala <galak@freescale.com>
Date:   Sat Apr 16 15:24:21 2005 -0700

    [PATCH] ppc32: make usage of CONFIG_PTE_64BIT & CONFIG_PHYS_64BIT consistent
    
    CONFIG_PTE_64BIT & CONFIG_PHYS_64BIT are not currently consistently used in
    the code base.  Fixed up the usage such that CONFIG_PTE_64BIT is used when we
    have a 64-bit PTE regardless of physical address width.  CONFIG_PHYS_64BIT is
    used if the physical address width is larger than 32-bits, regardless of PTE
    size.
    
    These changes required a few sub-arch specific ifdef's to be fixed and the
    introduction of a physical address format string.
    
    Signed-off-by: Kumar Gala <kumar.gala@freescale.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 7a1e335085ead05da08f791340f58b493126894d
Author: Kumar Gala <galak@freescale.com>
Date:   Sat Apr 16 15:24:20 2005 -0700

    [PATCH] ppc32: Fix pte_update for 64-bit PTEs
    
    While the existing pte_update code handled atomically modifying a 64-bit PTE,
    it did not return all 64-bits of the PTE before it was modified.  This causes
    problems in some places that expect the full PTE to be returned, like
    ptep_get_and_clear().
    
    Created a new pte_update function that is conditional on CONFIG_PTE_64BIT.  It
    atomically reads the low PTE word which all PTE flags are required to be in
    and returns a premodified full 64-bit PTE.
    
    Since we now have an explicit 64-bit PTE version of pte_update we can also
    remove the hack that existed to get the low PTE word regardless of size.
    
    Signed-off-by: Kumar Gala <kumar.gala@freescale.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 0c541b4406a68e74d94ddb667c69d9e03bce8681
Author: Benjamin Herrenschmidt <benh@kernel.crashing.org>
Date:   Sat Apr 16 15:24:19 2005 -0700

    [PATCH] ppc32: Fix AGP and sleep again
    
    My previous patch that added sleep support for uninorth-agp and some AGP
    "off" stuff in radeonfb and aty128fb is breaking some configs.  More
    specifically, it has problems with rage128 setups since the DRI code for
    these in X doesn't properly re-enable AGP on wakeup or console switch
    (unlike the radeon DRM).
    
    This patch fixes the problem for pmac once for all by using a different
    approach.  The AGP driver "registers" special suspend/resume callbacks with
    some arch code that the fbdev's can later on call to suspend and resume
    AGP, making sure it's resumed back in the same state it was when suspended.
     This is platform specific for now.  It would be too complicated to try to
    do a generic implementation of this at this point due to all sort of weird
    things going on with AGP on other architectures.  We'll re-work that whole
    problem cleanly once we finally merge fbdev's and DRI.
    
    In the meantime, please apply this patch which brings back some r128 based
    laptops into working condition as far as system sleep is concerned.
    
    Signed-off-by: Benjamin Herrenschmidt <benh@kernel.crashing.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 7a648b9ec09f32606fe0f27fb9d095311cf968ca
Author: Benjamin Herrenschmidt <benh@kernel.crashing.org>
Date:   Sat Apr 16 15:24:18 2005 -0700

    [PATCH] ppc32: Fix cpufreq problems
    
    This patch updates the PowerMac cpufreq driver.  It depends on the addition
    of the suspend() method (my previous patch) and on the new flag I defined
    to silence some warnings that are normal for us.
    
    It fixes various issues related to cpufreq on pmac, including some crashes
    on some models when sleeping the machine while in low speed, proper voltage
    control on some newer machines, and adds voltage control on 750FX based G3
    laptops.
    
    Signed-off-by: Benjamin Herrenschmidt <benh@kernel.crashing.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 6c26e03b2db4b66d79bfb774628c1fc9b458b943
Author: Paul Mackerras <paulus@samba.org>
Date:   Sat Apr 16 15:24:17 2005 -0700

    [PATCH] ppc32: fix single-stepping of emulated instructions
    
    On ppc, we emulate instructions that cause alignment exceptions.  If we are
    single-stepping an instruction and it causes an alignment exception, we
    will currently do the next instruction as well before taking the
    single-step exception.  This patch fixes that, so we take the single-step
    exception after emulating the instruction.
    
    Signed-off-by: Paul Mackerras <paulus@samba.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit e378cc16b0d3c1610857c4444345907020e03ece
Author: Paul Mackerras <paulus@samba.org>
Date:   Sat Apr 16 15:24:17 2005 -0700

    [PATCH] ppc32: oops on kernel altivec assist exceptions
    
    If we should happen to get an altivec assist exception while executing in
    the kernel, we will currently try to handle it and fail, and end up oopsing
    with (apparently) a segfault.  (An altivec assist exception occurs for
    floating-point altivec instructions with denormalized inputs or outputs if
    the altivec unit is in java mode.)
    
    This patch checks explicitly if we are in user mode and prints a useful
    message if not.
    
    Signed-off-by: Paul Mackerras <paulus@samba.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 6460b4cceba0181308042c8d8794eb679bfa22e5
Author: Paul Mackerras <paulus@samba.org>
Date:   Sat Apr 16 15:24:16 2005 -0700

    [PATCH] ppc32: improve timebase sync for SMP
    
    Currently the procedure in the ppc32 kernel that synchronizes the timebase
    registers across an SMP powermac system does so by setting both timebases
    to zero.  That is OK at boot but causes problems if done later.  So that we
    can do hotplug CPU on these machines, this patch changes the code so it
    reads the timebase from one CPU and transfers the value to the other CPU. 
    (Hotplug CPU is needed for sleep (aka suspend to RAM) to work.)
    
    Signed-off-by: Paul Mackerras <paulus@samba.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 35b535d9cc8dce79c3b72f47c4417c3159d7a8c9
Author: Eugene Surovegin <ebs@ebshome.net>
Date:   Sat Apr 16 15:24:15 2005 -0700

    [PATCH] ppc32: ppc4xx_pic - add acknowledge when enabling level-sensitive IRQ
    
    This patch adds interrupt acknowledge to the PPC4xx PIC enable_irq
    implementation for level-sensitive IRQ sources.  This helps in cases when
    enable/disable_irq is used in interrupt handlers for hardware, which
    requires IRQ acknowledge to be issued from non-interrupt context (e.g. 
    when actual ACK in device needs an I2C transaction).  For such strange
    hardware, interrupt handler disables IRQ and defers actual ACK to some
    other context.  When this happens, IRQ is enabled again.  For
    level-sensitive sources we get spurious triggering right after IRQ is
    enabled.  This patch fixes this.
    
    Suggested by Tolunay Orkun <listmember@orkun.us>.
    
    Signed-off-by: Eugene Surovegin <ebs@ebshome.net>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 16acbc624e2b7b750570cb672341d05a816051f4
Author: Paul Mackerras <paulus@samba.org>
Date:   Sat Apr 16 15:24:14 2005 -0700

    [PATCH] ppc32: fix bogosity in process-freezing code
    
    The code that went into arch/ppc/kernel/signal.c recently to handle process
    freezing seems to contain a dubious assumption: that a process that calls
    do_signal when PF_FREEZE is set will have entered the kernel because of a
    system call.  This patch removes that assumption.
    
    Signed-off-by: Paul Mackerras <paulus@samba.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 0c9b79429c83a404a04908be65baa9d97836bbb6
Author: James Morris <jmorris@redhat.com>
Date:   Sat Apr 16 15:24:13 2005 -0700

    [PATCH] SELinux: add support for NETLINK_KOBJECT_UEVENT
    
    This patch adds SELinux support for the KOBJECT_UEVENT Netlink family, so
    that SELinux can apply finer grained controls to it.  For example, security
    policy for hald can be locked down to the KOBJECT_UEVENT Netlink family
    only.  Currently, this family simply defaults to the default Netlink socket
    class.
    
    Note that some new permission definitions are added to sync with changes in
    the core userspace policy package, which auto-generates header files.
    
    Signed-off-by: James Morris <jmorris@redhat.com>
    Signed-off-by: Stephen Smalley <sds@tycho.nsa.gov>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 7e5c6bc0a600c49e5922591ad41ff41987f54eb4
Author: Jean Tourrilhes <jt@hpl.hp.com>
Date:   Sat Apr 16 15:24:11 2005 -0700

    [PATCH] irda_device() oops fix
    
    Acked-by: "David S. Miller" <davem@davemloft.net>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 6775cab98b89b2caa10dce4b07e2c81999e45517
Author: Herbert Xu <herbert@gondor.apana.org.au>
Date:   Sat Apr 16 15:24:10 2005 -0700

    [PATCH] Fix dst_destroy() race
    
    When we are not the real parent of the dst (e.g., when we're xfrm_dst and
    the child is an rtentry), it may already be on the GC list.
    
    In fact the current code is buggy to, we need to check dst->flags before
    the dec as dst may no longer be valid afterwards.
    
    Signed-off-by: Herbert Xu <herbert@gondor.apana.org.au>
    Signed-off-by: David S. Miller <davem@davemloft.net>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 2a27805127aee1e7e62854bcf9ca8c355c23b73e
Author: Arnaldo Carvalho de Melo <acme@conectiva.com.br>
Date:   Sat Apr 16 15:24:09 2005 -0700

    [PATCH] net: don't call kmem_cache_create with a spinlock held
    
    This fixes the warning reported by Marcel Holtmann (Thanks!).
      
    Signed-off-by: Arnaldo Carvalho de Melo <acme@conectiva.com.br>
    Signed-off-by: David S. Miller <davem@davemloft.net>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 9f3786dc8b1d6229dbe76e364323f0d787e7a0ea
Author: David S. Miller <davem@davemloft.net>
Date:   Sat Apr 16 15:24:09 2005 -0700

    [PATCH] Fix linux/atalk.h header
    
    This recently got changed to include a lot of kernel internal stuff in the
    non-__KERNEL__ area of the header, which isn't so kosher and breaks libc
    builds.
    
    The fix is pretty simple.
    
    Signed-off-by: David S. Miller <davem@davemloft.net>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 4c4c402d6caba5d938ffbbb49961659ecac709d4
Author: Martin Hicks <mort@sgi.com>
Date:   Sat Apr 16 15:24:08 2005 -0700

    [PATCH] meminfo: add Cached underflow check
    
    Working on some code lately I've been getting huge values for "Cached".
    The cause is that get_page_cache_size() is an approximate value, and for a
    sufficiently small returned value of get_page_cache_size() the value
    underflows.
    
    Signed-off-by:  Martin Hicks <mort@sgi.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 76c3073a888ae7f4790a146784bb5c34fc24b9d2
Author: akpm@osdl.org <akpm@osdl.org>
Date:   Sat Apr 16 15:24:07 2005 -0700

    [PATCH] end_buffer_write_sync() avoid pointless assignments
    
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 323aca6c0bda611d0f31b3234d9fe291d31a9207
Author: akpm@osdl.org <akpm@osdl.org>
Date:   Sat Apr 16 15:24:06 2005 -0700

    [PATCH] vmscan: pageout(): remove unneeded test
    
    )
    
    
    
    We only call pageout() for dirty pages, so this test is redundant.
    
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 79befd0c08c4766f8fa27e37ac2a70e40840a56a
Author: Andrea Arcangeli <andrea@suse.de>
Date:   Sat Apr 16 15:24:05 2005 -0700

    [PATCH] oom-killer disable for iscsi/lvm2/multipath userland critical sections
    
    iscsi/lvm2/multipath needs guaranteed protection from the oom-killer, so
    make the magical value of -17 in /proc/<pid>/oom_adj defeat the oom-killer
    altogether.
    
    (akpm: we still need to document oom_adj and friends in
    Documentation/filesystems/proc.txt!)
    
    Signed-off-by: Andrea Arcangeli <andrea@suse.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit d345734267dbec642f4e34a9d392d2fd85b5fa9b
Author: Jeff Moyer <jmoyer@redhat.com>
Date:   Sat Apr 16 15:24:05 2005 -0700

    [PATCH] filemap_getpage can block when MAP_NONBLOCK specified
    
    We will return NULL from filemap_getpage when a page does not exist in the
    page cache and MAP_NONBLOCK is specified, here:
    
    	page = find_get_page(mapping, pgoff);
    	if (!page) {
    		if (nonblock)
    			return NULL;
    		goto no_cached_page;
    	}
    
    But we forget to do so when the page in the cache is not uptodate.  The
    following could result in a blocking call:
    
    	/*
    	 * Ok, found a page in the page cache, now we need to check
    	 * that it's up-to-date.
    	 */
    	if (!PageUptodate(page))
    		goto page_not_uptodate;
    
    
    
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 41aac24f8fb5a21ff3d0f6f56f85fad3cf0e88a9
Author: Dave Airlie <airlied@linux.ie>
Date:   Sat Apr 16 15:24:04 2005 -0700

    [PATCH] r128_state.c: break missing in switch statement
    
    drm: fix r128_state.c switch statements..  in drivers/char/drm/r128_state.c
    (linux-2.6.12-rc2), some breaks are missing in the switch statement.  See
    trivial fix below.
    
    Signed-off-by: Hansjoerg Lipp <hjlipp@web.de>
    Signed-off-by: Dave Airlie <airlied@linux.ie>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 388c69789a2a2e50965e805e3e641418082b352c
Author: James Morris <jmorris@redhat.com>
Date:   Sat Apr 16 15:24:03 2005 -0700

    [PATCH] SELinux: fix bug in Netlink message type detection
    
    This patch fixes a bug in the SELinux Netlink message type detection code,
    where the wrong constant was being used in a case statement.  The incorrect
    value is not valid for this class of object so it would not have been
    reached, and fallen through to a default handler for all Netlink messages.
    
    Signed-off-by: James Morris <jmorris@redhat.com>
    Signed-off-by: Stephen Smalley <sds@tycho.nsa.gov>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 1db7fc75a410d9a15cbc58a9b073a688669c6d42
Author: akpm@osdl.org <akpm@osdl.org>
Date:   Sat Apr 16 15:24:02 2005 -0700

    [PATCH] fix Bug 4395: modprobe bttv freezes the computer
    
    )
    
    
    From: Johannes Stezenbach <js@linuxtv.org>
    
    Fix http://bugme.osdl.org/show_bug.cgi?id=4395.
    
    Patch by Manu Abraham and Gerd Knorr:
    
    Remove redundant bttv_reset_audio() which caused the computer to freeze
    with some bt8xx based DVB cards when loading the bttv driver.
    
    Signed-off-by: Johannes Stezenbach <js@linuxtv.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 51410d3c53d85da0f24277f9580cbec1260ffc8f
Author: David S. Miller <davem@davemloft.net>
Date:   Sat Apr 16 15:24:01 2005 -0700

    [PATCH] Fix get_compat_sigevent()
    
    I have no idea how a bug like this lasted so long.  Anyways, obvious
    memset()'ing of incorrect pointer.
    
    Signed-off-by: David S. Miller <davem@davemloft.net>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 5df240826c90afdc7956f55a004ea6b702df9203
Author: Stas Sergeev <stsp@aknet.ru>
Date:   Sat Apr 16 15:24:01 2005 -0700

    [PATCH] fix crash in entry.S restore_all
    
    Fix the access-above-bottom-of-stack crash.
    
    1. Allows to preserve the valueable optimization
    
    2. Works for NMIs
    
    3.  Doesn't care whether or not there are more of the like instances
       where the stack is left empty.
    
    4. Seems to work for me without the crashes:) 
    
    (akpm: this is still under discussion, although I _think_ it's OK.  You might
    want to hold off)
    
    Signed-off-by: Stas Sergeev <stsp@aknet.ru> 
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit e493073d8d053429fbb42331b57a95dd0d61cadb
Author: akpm@osdl.org <akpm@osdl.org>
Date:   Sat Apr 16 15:24:00 2005 -0700

    [PATCH] Fix acl Oops
    
    )
    
    
    From: Andreas Gruenbacher <agruen@suse.de>
    
    ext[23]_get_acl will return an error when reading the attribute fails or
    out-of-memory occurs.  Catch this case.
    
    Signed-off-by: Andreas Gruenbacher <agruen@suse.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 81ddef77bb774e771db8588b937665cd38f40cee
Author: James Bottomley <James.Bottomley@SteelEye.com>
Date:   Sat Apr 16 15:23:59 2005 -0700

    [PATCH] re-export cancel_rearming_delayed_workqueue
    
    This was unexported by Arjan because we have no current users.
    
    However, during a conversion from tasklets to workqueues of the parisc led
    functions, we ran across a case where this was needed.  In particular, the
    open coded equivalent of cancel_rearming_delayed_workqueue was implemented
    incorrectly, which is, I think, all the evidence necessary that this is a
    useful API.
    
    Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 9ffb7146f0aa9c0070cda3d8701b0a89e34913d1
Author: Artem B. Bityuckiy <dedekind@infradead.org>
Date:   Sat Apr 16 15:23:58 2005 -0700

    [PATCH] crypto: call zlib end functions on deflate exit path
    
    In the deflate_[compress|uncompress|pcompress] functions we call the
    zlib_[in|de]flateReset function at the beginning.  This is OK.  But when we
    unload the deflate module we don't call zlib_[in|de]flateEnd to free all
    the zlib internal data.  It looks like a bug for me.  Please, consider the
    attached patch.
    
    Signed-off-by: Artem B. Bityuckiy <dedekind@infradead.org>
    Signed-off-by: Herbert Xu <herbert@gondor.apana.org.au>
    Cc: "David S. Miller" <davem@davemloft.net>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit d42ce812b8a32adddeee3a692005f82f95ff15a3
Author: akpm@osdl.org <akpm@osdl.org>
Date:   Sat Apr 16 15:23:57 2005 -0700

    [PATCH] arm: add comment about max_low_pfn/max_pfn
    
    )
    
    
    From: Russell King <rmk+lkml@arm.linux.org.uk>
    
    Oddly, max_low_pfn/max_pfn end up being the number of pages in the system,
    rather than the maximum PFN on ARM.  This doesn't seem to cause any problems,
    so just add a note about it.
    
    Signed-off-by: Russell King <rmk@arm.linux.org.uk>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 7a228aaa879c119c9fb9b9d7e062ac13cb1a9079
Author: akpm@osdl.org <akpm@osdl.org>
Date:   Sat Apr 16 15:23:57 2005 -0700

    [PATCH] arm: add comment about dma_supported()
    
    )
    
    
    From: Russell King <rmk+lkml@arm.linux.org.uk>
    
    The ARM dma_supported() is rather basic, and I don't think it takes into
    account everything that it should do (eg, whether the mask agrees with what
    we'd return for GFP_DMA allocations).  Note this.
    
    Signed-off-by: Russell King <rmk@arm.linux.org.uk>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 7aa52f5128b06d1df9b2ee65c06d401af27da0a4
Author: akpm@osdl.org <akpm@osdl.org>
Date:   Sat Apr 16 15:23:56 2005 -0700

    [PATCH] arm: fix help text for ixdp465
    
    )
    
    
    From: Russell King <rmk+lkml@arm.linux.org.uk>
    
    For some reason, this help text was missed when the file was last audited
    by the documentation referencing folk.  Fix this incorrect documentation
    reference.
    
    Signed-off-by: Russell King <rmk@arm.linux.org.uk>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 2d137c24e9f433e37ffd10b3d5f418157589a8d2
Author: akpm@osdl.org <akpm@osdl.org>
Date:   Sat Apr 16 15:23:55 2005 -0700

    [PATCH] arm: fix SIGBUS handling
    
    )
    
    
    From: Russell King <rmk+lkml@arm.linux.org.uk>
    
    ARM wasn't raising a SIGBUS with a siginfo structure.  Fix
    __do_user_fault() to allow us to use it for SIGBUS conditions, and arrange
    for the sigbus path to use this.
    
    We need to prevent the siginfo code being called if we do not have a user
    space context to call it, so consolidate the "user_mode()" tests.
    
    Thanks to Ian Campbell who spotted this oversight.
    
    Signed-off-by: Russell King <rmk@arm.linux.org.uk>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit baaa2c512dc1c47e3afeb9d558c5323c9240bd21
Author: Neil Brown <neilb@cse.unsw.edu.au>
Date:   Sat Apr 16 15:23:54 2005 -0700

    [PATCH] Avoid deadlock in sync_page_io by using GFP_NOIO
    
    ..as sync_page_io can be called on the write-out path.
    
    Signed-off-by: Neil Brown <neilb@cse.unsw.edu.au>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 8d38eadb7a97f265f7b3a9e8a30df358c3a546c8
Author: Christoph Lameter <clameter@engr.sgi.com>
Date:   Sat Apr 16 15:23:53 2005 -0700

    [PATCH] mmtimer build fix
    
    Signed-off-by: Christoph Lameter <clameter@sgi.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 1da177e4c3f41524e886b7f1b8a0c1fc7321cac2
Author: Linus Torvalds <torvalds@ppc970.osdl.org>
Date:   Sat Apr 16 15:20:36 2005 -0700

    Linux-2.6.12-rc2
    
    Initial git repository build. I'm not bothering with the full history,
    even though we have it. We can create a separate "historical" git
    archive of that later if we want to, and in the meantime it's about
    3.2GB when imported into git - space that would just make the early
    git days unnecessarily complicated, when we don't have a lot of good
    infrastructure for it.
    
    Let it rip!

