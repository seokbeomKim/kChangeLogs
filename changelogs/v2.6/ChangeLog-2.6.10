
Summary of changes from v2.6.9 to v2.6.10
============================================

<akpm@osdl.org>
	[PATCH] wireless-extension-v17-for-linus.patch
	
	From: Jean Tourrilhes <jt@bougret.hpl.hp.com>
	
		This is the patch to migrate Wireless Extension from WE-16 to
	WE-17 for kernel 2.6.X. I would like you to queue that patch and
	submit it to Linus as soon as 2.6.8 is released (so it can be fully
	tested during 2.6.9). If you want, I can resend that as soon as 2.6.8
	is released.
	
		The patch is basically unchanged compared to the version
	posted to the netdev list and my web page one month ago, I just
	re-diff to the latest kernel (2.6.8-rc2-bk12). The patch already
	included feedback from various driver maintainers, and nobody else
	complained, so I guess it's ready.
		The patch for some drivers inside the kernel will follow
	(airo.c, wavelan.c, wavelan_cs). Patch for various other drivers
	(orinoco, hostap, prism54) have been sent already to their maintainers
	(one month ago) and basically waiting for this patch.
	
		Changelog :
	 *	- Add flags to frequency -> auto/fixed
	 *	- Document (struct iw_quality *)->updated, add new flags (INVALID)
	 *	- Wireless Event capability in struct iw_range
	 *	- Add support for relative TxPower (yick !)
	 *	- Change the way we get to spy_data method for added safety and hostap
	 *	- Remove spy #ifdef, they are always on -> cleaner code
	 *	- Allow any size GET request if user specifies length > max
	 *	- Start migrating get_wireless_stats to struct iw_handler_def
	 * Based on patch from Pavel Roskin <proski@gnu.org> :
	 *	- Fix kernel data leak to user space in private handler handling
	
		I also added on my page a version of Wireless Tools that use
	RtNetlink instead of ioctls. This is not as clean as I would like, but
	is fully functional (if you have WE-19). I know that you were
	interested, so feel free to send feedback on that...
	
	
	Signed-off-by: Andrew Morton <akpm@osdl.org>

<akpm@osdl.org>
	[PATCH] wireless-drivers-update-for-we-17.patch
	
	From: Jean Tourrilhes <jt@bougret.hpl.hp.com>
	
		This patch complement the main WE-17 patch I just sent you. It
	updates a few driver to take advantage of WE-17. You should queue it
	along with the other patch.
	
		o Aironet driver :
			o iwspy data can be shared between eth0 and wifi0 if needed
			o allow arbitrarily large scan results (no longer limited)
			o export wireless event capabilities
		o Wavelan drivers :
			o export wireless event capabilities
	
	
	
	Signed-off-by: Andrew Morton <akpm@osdl.org>

<akpm@osdl.org>
	[PATCH] defxx trivial updates
	
	From: "Maciej W. Rozycki" <macro@linux-mips.org>
	
	Here are a few obvious clean-ups I did to the driver.
	
	Signed-off-by: Maciej W. Rozycki <macro@linux-mips.org>
	Signed-off-by: Andrew Morton <akpm@osdl.org>

<akpm@osdl.org>
	[PATCH] defxx device name fixes
	
	From: "Maciej W. Rozycki" <macro@linux-mips.org>
	
	This is a fix for the "fddi%d" device name reported literally due to the
	switch from init_fddidev() to alloc_fddidev().  Plus related updates to
	module information.  Applies on top of the 2.4.27-defxx-sync2681 or
	2.6.8.1-defxx-misc patches, respectively.  Please apply.
	
	Signed-off-by: Maciej W. Rozycki <macro@linux-mips.org>
	Signed-off-by: Andrew Morton <akpm@osdl.org>

<akpm@osdl.org>
	[PATCH] sparse: fix warnings in net/irda/*
	
	From: "Mika Kukkonen" <mika@osdl.org>
	
	  CHECK   net/irda/irlan/irlan_client.c
	net/irda/irlan/irlan_client.c:237:14: warning: assignment expression in
	conditional
	
	Signed-off-by: Andrew Morton <akpm@osdl.org>

<akpm@osdl.org>
	[PATCH] de4x5 warning fix
	
	Ugh.
	
	drivers/net/tulip/de4x5.c: In function `mii_get_phy':
	drivers/net/tulip/de4x5.c:5092: warning: operation on `i' may be undefined
	
	Signed-off-by: Andrew Morton <akpm@osdl.org>

<olh@suse.de>
	[PATCH] remove old version check from mac8390
	
	This 'netdevice' define will end up in the 'tags' file.
	Its not used, so just remove it.

<jgarzik@pobox.com>
	[netdev] Remove no-op in-driver implementations of ->set_config()

<viro@www.linux.org.uk>
	[netdrvr eth1394] use netdev_priv

<viro@www.linux.org.uk>
	[netdrvr usb] use netdev_priv
	
	Update catc, pegasus, rtl8150, and gadget/ether to use netdev_priv()

<viro@www.linux.org.uk>
	[netdrvr] netdev_priv for ewrk3, xircom_tulip_cb, wavelan_cs

<viro@www.linux.org.uk>
	[netdrvr] netdev_priv for sundance, typhoon, yellowfin

<viro@www.linux.org.uk>
	[netdrvr] use netdev_priv in dl2k, hamachi

<viro@www.linux.org.uk>
	[netdrvr starfire] fix unregister_netdev call site

<viro@www.linux.org.uk>
	[netdrvr starfire] use netdev_priv

<viro@www.linux.org.uk>
	[PATCH] (1/27) eth1394 ethtool conversion

<viro@www.linux.org.uk>
	[PATCH] (2/27) cris ethtool conversion

<viro@www.linux.org.uk>
	[PATCH] (3/27) ixgb ethtool conversion

<viro@www.linux.org.uk>
	[PATCH] (4/27) 3c509 ethtool conversion

<viro@www.linux.org.uk>
	[PATCH] (5/27) smc91c92_cs ethtool conversion

<viro@www.linux.org.uk>
	[PATCH] (6/27) tulip ethtool conversion

<viro@www.linux.org.uk>
	[PATCH] (7/27) xircom ethtool conversion

<viro@www.linux.org.uk>
	[PATCH] (8/27) wavelan ethtool conversion

<viro@www.linux.org.uk>
	[PATCH] (9/27) wl3501_cs ethtool conversion

<viro@www.linux.org.uk>
	[PATCH] (10/27) yellowfin ethtool conversion

<viro@www.linux.org.uk>
	[PATCH] (11/27) typhoon ethtool conversion

<viro@www.linux.org.uk>
	[PATCH] (12/27) sundance ethtool conversion

<viro@www.linux.org.uk>
	[PATCH] (13/27) starfire ethtool conversion

<viro@www.linux.org.uk>
	[PATCH] (14/27) ns83820 ethtool conversion

<viro@www.linux.org.uk>
	[PATCH] (15/27) natsemi ethtool conversion

<viro@www.linux.org.uk>
	[PATCH] (16/27) veth ethtool conversion

<viro@www.linux.org.uk>
	[PATCH] (17/27) hamachi ethtool conversion

<viro@www.linux.org.uk>
	[PATCH] (18/27) forcedeth ethtool conversion

<viro@www.linux.org.uk>
	[PATCH] (19/27) ewrk3 ethtool conversion

<viro@www.linux.org.uk>
	[PATCH] (20/27) eepro100 ethtool conversion

<viro@www.linux.org.uk>
	[PATCH] (21/27) dl2k ethtool conversion

<viro@www.linux.org.uk>
	[PATCH] (22/27) amd8111e ethtool conversion

<viro@www.linux.org.uk>
	[PATCH] (23/27) gadget ethtool conversion

<viro@www.linux.org.uk>
	[PATCH] (24/27) rtl8150 ethtool conversion

<viro@www.linux.org.uk>
	[PATCH] (25/27) pegasus ethtool conversion

<viro@www.linux.org.uk>
	[PATCH] (26/27) kaweth ethtool conversion

<viro@www.linux.org.uk>
	[PATCH] (27/27) catc ethtool conversion

<shaggy@austin.ibm.com>
	JFS: Fix extent overflow bugs
	
	The code which handled adding a new extent when it is unable to grow an extent
	past the maximum size made an invalid assumption about when the root page
	would split.
	
	Signed-off-by: Dave Kleikamp <shaggy@austin.ibm.com>

<oliver@neukum.org>
	[PATCH] USB: update of help text for hpusbscsi
	
	Signed-Off-By: Oliver Neukum <oliver@neukum.name>
	Signed-off-by: Greg Kroah-Hartman <greg@kroah.com>

<oliver@neukum.org>
	[PATCH] USB: switching microtek to usb_kill_urb
	
	this reworks the microtek driver's disconnect method, now that
	usb_kill_urb is available.
	
	Signed-Off-By: Oliver Neukum <oliver@neukum.name>
	Signed-off-by: Greg Kroah-Hartman <greg@kroah.com>

<zaitcev@redhat.com>
	[PATCH] USB: Fixes for ub in 2.4.9-rc1 from Oliver and Pat
	
	- Set the allocation size in REQUEST SENSE (Pat LaVarre)
	- Move add_timer invocations to safer places (Oliver Neukum)
	
	
	Signed-off-by: Greg Kroah-Hartman <greg@kroah.com>

<stern@rowland.harvard.edu>
	[PATCH] USB: Make usbcore use usb_kill_urb()
	
	This patch changes the only places in usbcore where usb_unlink_urb() is
	still used for synchronous unlinking; now they will use usb_kill_urb().
	As it turns out, there were only a couple of changes needed.
	
	This still leaves all the drivers to audit!
	
	Signed-off-by: Alan Stern <stern@rowland.harvard.edu>
	Signed-off-by: Greg Kroah-Hartman <greg@kroah.com>

<stern@rowland.harvard.edu>
	[PATCH] USB: Suspend/resume/wakeup support for UHCI root hub ports
	
	This patch adds support for suspending, resuming, and remote wakeup
	detection on root hub ports to the UHCI driver.  It doesn't add support
	for suspending or resuming the root hub itself (beyond what's already
	there) -- that will require considerably more work.  But at least devices
	plugged directly into the computer will interact nicely with power
	management.
	
	Of lesser importance, the patch also simplifies some constant expressions.
	
	
	Signed-off-by: Alan Stern <stern@rowland.harvard.edu>
	Signed-off-by: Greg Kroah-Hartman <greg@kroah.com>

<oliver@neukum.org>
	[PATCH] USB: correct interrupt interval for kaweth
	
	  - overriding the media check interrupt interval
	
	Signed-Off-By: Oliver Neukum <oliver@neukum.name>
	Signed-off-by: Greg Kroah-Hartman <greg@kroah.com>

<wouter-kernel@fort-knox.rave.org>
	[PATCH] USB: usb audio is for oss only
	
	Doh. Fixed.

<petkan@nucleusys.com>
	[PATCH] USB: small rtl8150 patch
	
	this one make rtl8150 auto-load its register values at reset.  Not doing
	so is known to cause improper setup when the device is being reseted
	frequently.
	
	
	Signed-off-by: Greg Kroah-Hartman <greg@kroah.com>

<oliver@neukum.org>
	[PATCH] USB: switching microtek to usb_kill_urb
	
	Am Dienstag, 31. August 2004 17:41 schrieb Alan Stern:
	> On Tue, 31 Aug 2004, Oliver Neukum wrote:
	>
	> Alan Stern
	>
	>
	>
	>
	> > @@ -822,9 +822,8 @@
	> >
	> >  	usb_set_intfdata(intf, NULL);
	> >
	> > +	usb_kill_urb(desc->urb);
	> >  	scsi_remove_host(desc->host);
	> > -	usb_unlink_urb(desc->urb);
	> > -	scsi_host_put(desc->host);
	> >
	> >  	usb_free_urb(desc->urb);
	> >  	kfree(desc);
	>
	> I think you still need the scsi_host_put(), to account for the fact that
	> scsi_host_alloc() sets the refcount to 1 initially.
	
	Right you are. Greg, please also apply this one.
	
	Signed-Off-By: Oliver Neukum <oliver@neukum.name>
	Signed-off-by: Greg Kroah-Hartman <greg@kroah.com>

<alborchers@steinerpoint.com>
	[PATCH] USB: corrected digi_acceleport 2.6.9-rc1 fix for hang on disconnect
	
	- Fixed hang on disconnect in digi_acceleport USB serial driver.
	  See http://bugme.osdl.org/show_bug.cgi?id=2459.  Close after
	  disconnect no longer tries to communicate with the device.
	
	Signed-off-by: Al Borchers <alborchers@steinerpoint.com>
	Signed-off-by: Greg Kroah-Hartman <greg@kroah.com>

<david-b@pacbell.net>
	[PATCH] USB: OHCI init cleanups
	
	This ought to fix the NS9750 init issue, and make the AMD756 case
	at least somewhat better.  It makes the init go "by the book" in more
	ways, and formalizes one quirk.
	
	Various OHCI init/reset cleanups for different silicion environments:
	
	 - Reset a bit more "by the book".
	
	    * Define a new quirk flag for the SiS and OPTi problem seen earlier.
	      Since 2.4 we've always worked around that quirk, even though we've
	      not seen that on other chips; but it's "wrong" and doesn't work on
	      some chips (notably NetSilicon NS9750).
	
	      The quirk still seems to be needed for SiS, but either this test
	      machine is too fast for the OPTi problem to show up, or the frame
	      timing setup problem there came from a now-fixed bug.
	
	    * Look at the HC state before resetting it; depending on whether
	      it was previously owned by BIOS, SMM, an OS, or nobody, different
	      USB signaling (and timings) might be needed.
	
	    * Re-init the frame timings right after soft reset, rather than
	      later (potentially too much later).
	
	    * Restore a reset in the PCI startup code, so this logic more closely
	      resembles the non-PCI paths (future code sharing).  It also makes it
	      easier to guarantee a 1-millisecond ceiling between reset and "go".
	
	      An earlier reset is being done to help workaround BIOS-related
	      problems on some boards, but we may need an even earlier one
	      (as a PCI quirk, before IRQs get reconfigured).
	
	 - Add an explicit #define to disable the BIOS/SMM handoff; it's
	   not just HPPA, many embedded chips don't expect BIOS either.
	
	 - There are reports of AMD 756 machines disliking the OHCI suspend
	   patch of a few months back.  Erratum #10 partly explains that, so
	   now root hubs won't autosuspend on those Slot-A era chips.
	
	 - Other minor fixes
	
	    * We've got lots of non-PCI OHCI now too, so comments shouldn't
	      be assuming all-is-pci!
	
	    * Hey, it's unsafe to call hc_reset() in IRQ (after unrecoverable
	      error); so just force a soft reset, don't do the whole thing.
	
	Tested on half a dozen different OHCI versions, but maybe some other
	versions of OHCI will be sensitive to one of these changes.
	
	Signed-off-by: David Brownell <dbrownell@users.sourceforge.net>
	Signed-off-by: Greg Kroah-Hartman <greg@kroah.com>

<abbotti@mev.co.uk>
	[PATCH] USB: Add B&B Electronics VID/PIDs to ftdi_sio
	
	This patch adds VID/PIDs for a few FTDI-based USB serial devices
	from B&B Electronics to the ftdi_sio driver.
	
	
	Signed-off-by: Ian Abbott <abbotti@mev.co.uk>
	Signed-off-by: Greg Kroah-Hartman <greg@kroah.com>

<akpm@osdl.org>
	[PATCH] USB: "Lost sync on frames" error in konicawc module
	
	From: <fgalea@prism.uvsq.fr>
	
	http://bugme.osdl.org/show_bug.cgi?id=3286
	
	The kernel keeps printing "Lost sync on frames" error messages as soon as a
	program tries to access the webcam.  No video data can be retrieved from
	the webcam.
	
	The following patch seems enough to solve the problem.  (just inverting the
	order at which the old and new data blocks are sent to the user).
	
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Greg Kroah-Hartman <greg@kroah.com>

<stern@rowland.harvard.edu>
	[PATCH] USB: Remove inappropriate unusual_devs.h entry
	
	A couple of months ago you applied a patch from Torsten Scherer to create
	a new unusual_devs.h entry.  In further discussions with him I learned
	that the entry wasn't needed to access the device; the only reason for it
	was as a workaround for some old, buggy hotplug program on his system.
	
	Now Evan Fletcher reports that the entry actively prevents him from using
	his device.  For me that's the last straw, so here's a patch to remove the
	entry.  Torsten should be okay if he simply upgrades his hotplug package
	or removes the buggy program.
	
	On Mon, 30 Aug 2004, Evan Fletcher wrote:
	> Hi list,
	>
	> I have a Bytecc 5.25" External Enclosure, model ME-320U2F, that has
	> both USB 2.0 and Firewire connections
	> (http://www.byteccusa.com/product/enclosure/ME-320.htm).  It used to
	> work fine on earlier Linux 2.6 kernels, but stopped working a few
	> revisions ago.
	>
	> I tracked the problem down to an entry in unusual_devs.h:
	>
	> /* <torsten.scherer@uni-bielefeld.de>: I don't know the name of the bridge
	>  * manufacturer, but I've got an external USB drive by the Revoltec company
	>  * that needs this. otherwise the drive is recognized as /dev/sda, but any
	>  * access to it blocks indefinitely.
	>  */
	> UNUSUAL_DEV(  0x0402, 0x5621, 0x0103, 0x0103,
	>                 "Revoltec",
	>                 "USB/IDE Bridge (ATA/ATAPI)",
	>                 US_SC_DEVICE, US_PR_DEVICE, NULL, US_FL_FIX_INQUIRY),
	
	<...>
	> So, is there some way that this entry can be modified so that my DVD+R
	> works properly, and Mr. Scherer can still use his Revoltec external
	> disk?
	>
	> Thank you,
	> Evan Fletcher
	
	
	
	Signed-off-by: Alan Stern <stern@rowland.harvard.edu>
	Signed-off-by: Greg Kroah-Hartman <greg@kroah.com>

<bjorn.helgaas@hp.com>
	[PATCH] HCD PCI probe: print actual, not ioremapped, address
	
	I think the USB HCD should print the actual PCI memory address, not the
	ioremapped address.  AFAIK, there's no reason the ioremapped address has
	to have any fixed relationship to the actual address.  Also, this makes
	it match what's in /proc/iomem.  I also added a leading "0x".  Example
	from ia64:
	
	    - ehci_hcd 0000:00:01.2: irq 52, pci mem c000000080021000
	    + ehci_hcd 0000:00:01.2: irq 52, pci mem 0x80021000
	
	
	
	USB HCD: print actual PCI mem address, not the ioremapped value.
	
	Signed-off-by: Bjorn Helgaas <bjorn.helgaas@hp.com>
	Signed-off-by: Greg Kroah-Hartman <greg@kroah.com>

<janitor@sternwelten.at>
	[PATCH] usb/tiglusb: insert set_current_state() before schedule_timeout()
	
	Insert set_current_state() so schedule_timeout() functions as expected.
	
	Signed-off-by: Nishanth Aravamudan <nacc@us.ibm.com>
	Signed-off-by: Maximilian Attems <janitor@sternwelten.at>
	Signed-off-by: Greg Kroah-Hartman <greg@kroah.com>

<janitor@sternwelten.at>
	[PATCH] usb/dabusb: insert set_current_state() before schedule_timeout()
	
	After discussing this patch with Mark Hollomon, I think it is much safer
	/ better to leave the conditional check within the while loop. This way
	the mutex state is as expected and maintainability is not compromised.
	The previous patch should not be applied.
	
	
	Description: Inserts appropriate set_current_state() call so that
	schedule_timeout() functions as expected.
	
	Signed-off-by: Nishanth Aravamudan <nacc@us.ibm.com>
	Signed-off-by: Maximilian Attems <janitor@sternwelten.at>
	Signed-off-by: Greg Kroah-Hartman <greg@kroah.com>

<stern@rowland.harvard.edu>
	[PATCH] USB: Nag message for usb_kill_urb
	
	This patch is only for nuisance value.  It puts a nag message in the
	system log every time usb_unlink_urb() is called for synchronous
	unlinking.  My hope is this will speed the process of converting drivers
	to use usb_kill_urb().
	
	Don't apply this if it generates too much noise, but otherwise go ahead.
	A little prodding never hurt anyone.
	
	Signed-off-by: Alan Stern <stern@rowland.harvard.edu>
	Signed-off-by: Greg Kroah-Hartman <greg@kroah.com>

<alborchers@steinerpoint.com>
	[PATCH] USB: circular buffer for pl2303
	
	Here is the patch adding a circular buffer to pl2303
	updated to 2.6.9-rc1.  Phil and I both tested this.
	(Phil tested a slightly different earlier version.)
	
	This fixes the carriage return newline problem Olaf
	Hering reported and helps Phil with hotsyncing his
	phone.  This patch also fixes a problem that would
	sometimes leave a pl2303 port unable to send data,
	reporting "already writing", after closing the port
	while writing was in progress.  This happened about
	1/3 of the time in my tests with the stock 2.6.9-rc1
	pl2303 driver.
	
	
	- Added a circular write buffer, protected by the
	  existing spin lock.
	
	- Write_room and chars_in_buffer now report room and
	  chars in the circular buffer.
	
	- Added a "bounce buffer" when transfering data from
	  user space to the circular buffer--needed for locking.
	
	- Replaced (urb->status != -EINPROGRESS) with a private
	  write_urb_in_use flag protected by the existing spin
	  lock.  Clear this flag when the urb is unlinked.
	
	- Free memory on failed startup.
	
	- These changes make ONLCR mapping work and fix a bug
	  that would sometimes leave the port unable to write,
	  reporting "already writing", after closing the port
	  while writing was in progress.
	
	Signed-off-by: Al Borchers <alborchers@steinerpoint.com>
	Signed-off-by: Greg Kroah-Hartman <greg@kroah.com>

<alborchers@steinerpoint.com>
	[PATCH] USB: close waits for drain in pl2303
	
	Here is an additional patch for pl2303 in 2.6.9-rc1,
	to be applied after my previous circular buffer patch.
	This patch waits for the buffer to drain on close and
	then clears the buffer.  In addition to the obvious
	features, this also fixes a bug where closing a port
	with a full buffer would accidentally disable writes
	when the port was re-opened.
	
	The original pl2303 could lose data that was still going
	out the port on close, and even this patch only solves
	the problem completely for data rates of 1200 bps and
	above.
	
	Waiting for data to drain from the circular buffer is
	easy, but the problem is waiting for data to drain from
	the 256 byte hardware buffer on the device.  I don't know
	how much data is in the hardware buffer, so I just wait
	long enough for a potentially full hardware buffer to
	drain, but I don't want to wait that long for low data
	rates if the buffer isn't full.  There is probably some
	way to query the pl2303 to find out how much data is in
	its hardware buffer, maybe snooping would reveal that.
	
	- Added a wait for data to drain from the driver
	  write buffer when closing.
	
	- Added a wait for the data to drain from the
	  device hardware buffer when closing.
	
	- Cleared the driver write buffer when closing.
	
	Signed-off-by: Al Borchers <alborchers@steinerpoint.com>
	Signed-off-by: Greg Kroah-Hartman <greg@kroah.com>

<davej@redhat.com>
	[CPUFREQ] speedstep-smi: only allow it to run on mobile Intel Pentium III
	
	speedstep-smi only makes sense on Intel mobile Pentium III systems.
	So, unify the distributed checks for speedstep_processor there,
	and disallow P4s.
	
	Signed-off-by: Dominik Brodowski <linux@brodo.de>
	Signed-off-by: Dave Jones <davej@redhat.com>

<kay.sievers@vrfy.org>
	[PATCH] export of SEQNUM to userspace (creates /sys/kernel)
	
	o /sys/kernel/hotplug_seqnum exports the current number
	o lib/kobject.c's  sequence_num is renamed to hotplug_seqnum and
	  exported by include/linux/kobject.h
	o the source file ksysfs.c in kernel/ creates on init the
	  sybsystem "/sys/kernel/" in sysfs
	
	
	Signed-off-by: Greg Kroah-Hartman <greg@kroah.com>

<greg@kroah.com>
	kobject: adjust hotplug_seqnum increment to keep userspace and kernel agreeing.

<greg@kroah.com>
	ksysfs: don't build ksysfs if CONFIG_SYSFS is not enabled.
	
	Thanks to Kay Sievers for pointing this out.
	  
	Signed-off-by: Greg Kroah-Hartman <greg@kroah.com>

<greg@kroah.com>
	kobject: fix build error if CONFIG_HOTPLUG is not enabled.
	
	Thanks to Kay Sievers for pointing this out.
	
	Signed-off-by: Greg Kroah-Hartman <greg@kroah.com>

<greg@kroah.com>
	USB: remove usbdevfs filesystem name, usbfs is the proper one to use.
	
	This has been publicised for years now, and the usvfs name will work just
	fine with a 2.4 kernel, so we are not breaking backwards compatibility.
	
	Signed-off-by: Greg Kroah-Hartman <greg@kroah.com>

<janitor@sternwelten.at>
	[PATCH] list_for_each_entry: drivers-usb-core-devices.c
	
	Make code more readable with list_for_each_entry.
	Compile tested.
	
	Patch incremental on the list_for_each() change.
	
	Signed-off-by: Domen Puncer <domen@coderock.org>
	Signed-off-by: Maximilian Attems <janitor@sternwelten.at>
	Signed-off-by: Greg Kroah-Hartman <greg@kroah.com>

<janitor@sternwelten.at>
	[PATCH] list_for_each_entry: drivers-usb-serial-ipaq.c
	
	Use list_for_each_entry_safe to make code more readable.
	Compile tested.
	
	Signed-off-by: Domen Puncer <domen@coderock.org>
	Signed-off-by: Maximilian Attems <janitor@sternwelten.at>
	Signed-off-by: Greg Kroah-Hartman <greg@kroah.com>

<janitor@sternwelten.at>
	[PATCH] list_for_each_entry: drivers-usb-host-hc_sl811.c
	
	Make code more readable with list_for_each_entry_safe.
	(Is this a non i386? I can't compile it.)
	
	Signed-off-by: Domen Puncer <domen@coderock.org>
	Signed-off-by: Maximilian Attems <janitor@sternwelten.at>
	Signed-off-by: Greg Kroah-Hartman <greg@kroah.com>

<janitor@sternwelten.at>
	[PATCH] list_for_each_entry: drivers-usb-media-dabusb.c
	
	Use list_for_each_entry to make code more readable.
	Compile tested.
	
	Signed-off-by: Domen Puncer <domen@coderock.org>
	Signed-off-by: Maximilian Attems <janitor@sternwelten.at>
	Signed-off-by: Greg Kroah-Hartman <greg@kroah.com>

<janitor@sternwelten.at>
	[PATCH] list_for_each_entry: drivers-usb-class-usb-midi.c
	
	Make code more readable with list_for_each_entry.
	Compile tested.
	
	
	Signed-off-by: Domen Puncer <domen@coderock.org>
	Signed-off-by: Maximilian Attems <janitor@sternwelten.at>
	Signed-off-by: Greg Kroah-Hartman <greg@kroah.com>

<janitor@sternwelten.at>
	[PATCH] list_for_each_entry: drivers-usb-class-audio.c
	
	Make code more readable with list_for_each_entry.
	Compile tested.
	
	
	Signed-off-by: Domen Puncer <domen@coderock.org>
	Signed-off-by: Maximilian Attems <janitor@sternwelten.at>
	Signed-off-by: Greg Kroah-Hartman <greg@kroah.com>

<stern@rowland.harvard.edu>
	[PATCH] USB: Centralize logical disconnects in the hub driver
	
	This patch takes some code that was only used in one place in the hub
	driver, and packages it up into a subroutine which is now called from
	several places.  The routine does a logical disconnect -- for example,
	after issuing a port reset, if the device descriptors have changed
	(because of a firmware update perhaps) we logically disconnect the old
	device structure and create a new one.  Or if a resume fails for any
	reason we can do the same thing.
	
	This touches some of David Brownell's suspend/resume code, obviously.
	(It also fixes a couple of small errors in there.)  He has said it looks
	okay.
	
	
	
	Signed-off-by: Alan Stern <stern@rowland.harvard.edu>
	Signed-off-by: Greg Kroah-Hartman <greg@kroah.com>

<margitsw@t-online.de>
	[PATCH] prism54 Code cleanup
	
	(Patches submitted by Denis Vlasenko)
	There are neither functionality changes nor bug fixes.
	
	* 2004-08-14 Denis Vlasenko <vda@port.imtp.ilyichevsk.odessa.ua>
	* Move assignment out of if()
	* Remove trailing space from printk
	* Eliminate not needed local 'u32 reg'
	* Add a comment about undoc bits
	* Add #define VEC_SIZE, use it as appropriate
	* Add some printks to reset error code path (our
	* current area of trouble)
	* Make printk text less confusing
	* Some not needed NULL assignments removed
	* mgt_commit_list(): tell which oid has failed

<margitsw@t-online.de>
	[PATCH] prism54 remove module params
	
	* Remove unneeded module params.

<margitsw@t-online.de>
	[PATCH] prism54 add WE17 support
	
	* Add support for WE17 from Jean Tourrilhes

<margitsw@t-online.de>
	[PATCH] prism54 initial WPA support
	
	* Work based on initial patches from Jouni Malinen <jkmaline@cc.hut.fi>
	* Initial wpa_supplicant support work:
	* isl_ioctl.c (prism54_process_trap_helper): Start to use mlmeex,
	* start doing what's right for
	* DOT11_OID_AUTHENTICATEEX,
	* DOT11_OID_ASSOCIATEEX,
	* DOT11_OID_ASSOCIATEEX, and
	* DOT11_OID_REASSOCIATEEX
	
	* isl_ioctl.c: add temporary structure for wpa_supplicant requests,
	
	* isl_ioctl.c: add prism2_ioctl_set_encryption which can probably be removed
	later
	
	* isl_ioctl.c: add prism2_ioctl_set_generic_element (well tested)
	
	* isl_ioctl.c: add prism2_ioctl_mlme which should be unnecessary since
	* WE scan should be used by wpa_supplicant
	
	* isl_ioctl.c: add prism54_hostapd - this parses wpa_supplicant
	* requests and does the right job for each
	
	* isl_ioctl.c (prism54_set_wpa): changed to not use mgt_set/mgt_commit
	* as commit is unecessary. Added proper OID sets to enable/disable WPA.
	* This is called by wpa_supplicant at startup. This should eventually
	* be part of WE18.
	
	* isl_ioctl.c (prism54_ioctl): Links wpa_supplicant to prism54
	
	* isl_ioctl.h: defined prism54_set_wpa to allow prism54_hostapd to use
	
	* isl_oid.h: add struct obj_attachment for OID OID_TYPE_ATTACH
	
	* oid_mgt.c: map OID DOT11_OID_ATTACHMENT to struct obj_attachment
	
	* oid_mgt.c (mgt_le_to_cpu, mgt_cpu_to_le): handle endianness for
	* obj_attachment
	
	* oid_mgt.c: add mgt_set_varlen, needed for mlmeex as it has a
	* variable size field.
	
	* oid_mgt.c: add mgt_unlatch_all, this can be used to force a commit
	* on OIDs:
	* MEDIUMLIMIT, BEACONPERIOD, DTIMPERIOD, ATIMWINDOW,
	* LISTENINTERVAL, FREQUENCY, EXTENDEDRATES
	* These OIDs are "latched". TODO: config mode handling.
	* oid_mgt.c (mgt_response_to_str): learn to parse OID_TYPE_ATTACH
	* oid_mgt.h: add mgt_set_varlen, and mgt_unlatch_all

<margitsw@t-online.de>
	[PATCH] prism54 fix wpa_supplicant frequency parsing
	
	* This work fixes wpa_supplicant frequency parsing. iwlist eth0
	* scan will now show channel and frequency.

<perex@suse.cz>
	ALSA CVS update
	ENS1370/1+ driver
	Fixed AC3-passthru on ens1371/1373 boards.
	
	SRC is bypassed when the sample rate is 48k, so that the non-audio
	signal won't be broken.  The other sample rates still need SRC.
	
	Signed-off-by: Takashi Iwai <tiwai@suse.de>

<perex@suse.cz>
	ALSA CVS update
	ICE1712 driver
	Allow the private EEPROM image for evaluation boards
	
	The driver may have a private EEPROM image instead of reading
	from the board (as well as ice1724 does).  It'll be helpful for
	test boards.
	
	Signed-off-by: Takashi Iwai <tiwai@suse.de>

<perex@suse.cz>
	ALSA CVS update
	ES18xx driver
	Fixed a bug in setting the filter register.
	
	A fix from the kernel OSS driver.  The original report/patch is from
	http://bugs.debian.org/cgi-bin/bugreport.cgi?bug=204147
	
	Signed-off-by: Takashi Iwai <tiwai@suse.de>

<perex@suse.cz>
	[ALSA]  Added __GFP_NORETRY to avoid OOM-killer
	
	Memalloc module
	__GFP_NORETRY is added to the DMA buffer allocator to avoid triggering
	OOM-killer.
	
	Signed-off-by: Takashi Iwai <tiwai@suse.de>

<perex@suse.cz>
	[ALSA]  Enable __GFP_NOWARN as default for buffer allocation
	
	Memalloc module
	__GFP_NOWARN is enabled for DMA buffer allocation regardless of
	its size.  The DMA buffer allocation is not a critical task.
	
	Signed-off-by: Takashi Iwai <tiwai@suse.de>

<perex@suse.cz>
	[ALSA]  Korg1212 misc fixes
	
	KORG1212 driver
	The DSP firmware download timeout has been increased;
	Some concurrent device settings has been fixed (I have shameless copied
	some code from RME9652); and
	One debug message was fixed.
	
	Signed-off-by: Haroldo Gamal <gamal@alternex.com.br>
	Signed-off-by: Takashi Iwai <tiwai@suse.de>

<perex@suse.cz>
	[ALSA]  AC97 96 kHz sample rate support
	
	Documentation,AC97 Codec Core,Intel8x0 driver
	
	
	Signed-off-by: Clemens Ladisch <clemens@ladisch.de>

<perex@suse.cz>
	[ALSA]  add missing ifdef for disabling MIDI
	
	Intel8x0 driver
	
	
	Signed-off-by: <castet.matthieu@free.fr>
	Signed-off-by: Clemens Ladisch <clemens@ladisch.de>

<perex@suse.cz>
	[ALSA]  suppress auto-loading of modules in module_init().
	
	ALSA sequencer
	The auto-loading of sequencer modules is suppressed in module_init().
	The recent module-init-tools may cause blocking.
	
	Signed-off-by: Takashi Iwai <tiwai@suse.de>

<perex@suse.cz>
	[ALSA]  Fix latency in ens1371 driver
	
	ENS1370/1+ driver
	The high latency in prepare callback of ens1371 driver is fixed.
	The *_rate_set() functions are moved outside of spinlock, and
	cond_resched() is inserted in the busy probing loop.
	
	Signed-off-by: Takashi Iwai <tiwai@suse.de>

<perex@suse.cz>
	[ALSA]  add AC97 quirk for Fujitsu-Siemens E4010
	
	Intel8x0 driver
	
	
	Signed-off-by: <castet.matthieu@free.fr>
	Signed-off-by: Clemens Ladisch <clemens@ladisch.de>

<perex@suse.cz>
	[ALSA]  remove gameport/MIDI support
	
	Documentation,PCI drivers,Intel8x0 driver
	snd-intel8x0's gameport/MIDI code has quite a few problems:  the port
	addresses cannot be detected reliably (or not at all with newer LPC
	bridge devices), joystick port address 0x208 isn't supported, the MIDI
	interrupt isn't detected, PnP isn't supported, changing the port
	addresses in the LPC bridge configuration doesn't affect the devices
	in the Super-I/O chip connected to the LPC bus, and registering this
	driver for the LPC bridge PCI device prevents other drivers using the
	LPC's PCI id from loading later.
	
	All these problems can be cured by removing the offending code and
	using the proper modules for these devices (ns558/snd-mpu401) instead.
	
	Signed-off-by: Clemens Ladisch <clemens@ladisch.de>

<perex@suse.cz>
	[ALSA]  add mixer quirk for LineX FM Transmitter
	
	USB generic driver
	The LineX FM Transmitter needs a mixer quirk entry
	to ignore control errors.
	
	Signed-off-by: Lonnie Mendez <dignome@gmail.com>
	Signed-off-by: Clemens Ladisch <clemens@ladisch.de>

<perex@suse.cz>
	[ALSA]  [ac97] Added VIA shared type.
	
	AC97 Codec Core,VIA82xx driver
	Added a new shared type AC97_SHARED_TYPE_VIA for via82xx southbridge
	to share codecs between audio and modem drivers.
	
	Signed-off-by: Sasha Khapyorsky <sashak@smlink.com>
	Signed-off-by: Takashi Iwai <tiwai@suse.de>

<perex@suse.cz>
	[ALSA]  [ac97] Check ac97 codec id in quirk table
	
	AC97 Codec Core
	Added codec_id field to ac97_quirk struct so that the devices with
	the same PCI subsystem IDs but with different AC97 chips can be
	distinguished properly.
	
	Signed-off-by: Takashi Iwai <tiwai@suse.de>

<perex@suse.cz>
	[ALSA]  ac97 quirk entry for Soltek SL-75DRV5
	
	VIA82xx driver
	Added an ac97 quirk entry for Soltek SL-75DRV5.
	Since the PCI subsystem id is identical with ASRock K7VT2, codec_id is
	used additionally to tell between them.
	
	Signed-off-by: Takashi Iwai <tiwai@suse.de>

<perex@suse.cz>
	[ALSA]  inverted EAPD support
	
	Documentation,AC97 Codec Core,Intel8x0 driver,CS46xx driver
	Since there are more than one (broken) implementation of EAPD bit
	on ac97 chips, the new scaps bit is added for the inverted EAPD.
	Also, AC97_TUNE_INV_EAPD is used to tune this behavior later by
	snd_ac97_tune_hardware().
	
	The ac97 quirk entry for Sony S1XP is added to turn this on.
	
	Signed-off-by: Takashi Iwai <tiwai@suse.de>

<perex@suse.cz>
	[ALSA]  detect errors reported by the hardware
	
	BT87x driver
	stop the PCM if the hardware reports FIFO/PCI errors
	
	Signed-off-by: Clemens Ladisch <clemens@ladisch.de>

<perex@suse.cz>
	[ALSA]  Added Compaq Evo W4000 quirk
	
	Intel8x0 driver
	Added an AC97 quirk entry for Compaq Evo W4000.
	
	Signed-off-by: Takashi Iwai <tiwai@suse.de>

<perex@suse.cz>
	[ALSA]  [emu10k1] Audigy DSP support
	
	EMU10K1/EMU10K2 driver
	This patch will add better support for Audigy DSP.  More gpr,
	instruction and tram.  It will break binary compatibility for app
	which use emu10k1 hwdep.
	
	Signed-off-by: Peter Zubaj <pzad@pobox.sk>
	Signed-off-by: Takashi Iwai <tiwai@suse.de>

<ben@fluff.org>
	Add S3C2410 (Samsung ARM9 Mobile SoC) watchdog driver

<stern@rowland.harvard.edu>
	[PATCH] USB: Internal port numbers start at 0
	
	This patch changes a couple of new routines in the suspend/resume code.
	Internally they use port numbers starting from 1, unlike every other
	routine in the hub driver.  This changes the port numbers to origin-0, for
	consistency's sake.  Of course, messages sent to the system log will
	continue to start counting from 1.
	
	Signed-off-by: Alan Stern <stern@rowland.harvard.edu>
	Signed-off-by: Greg Kroah-Hartman <greg@kroah.com>

<luca.risolia@studio.unibo.it>
	[PATCH] USB: SN9C10x driver update
	
	Changes:
	
	- Add support for SN9C103 based devices. The audio capability is already
	  supported but not released in this version. I will release
	  it once someone donates two SN9C103 based devices.
	- Implement VIDIOC_G_CTRL for TAS5110C1B and TAS51130D1B
	- Replace "SN9C10[12]" strings with "SN9C10x"
	- Add red, green, blue gain controls to the SN9C103
	- Memory offsets are now page-aligned
	- Fix typos in the documentation
	- Documentation updates
	- Setting bounds are checked by the core module
	- Add exposure control for TAS51130D1B
	
	Signed-off-by: Luca Risolia <luca.risolia@studio.unibo.it>
	Signed-off-by: Greg Kroah-Hartman <greg@kroah.com>

<david-b@pacbell.net>
	[PATCH] USB: EHCI SMP fix
	
	This addresses an SMP-only issue with the EHCI driver, where only one CPU
	should scan the schedule at a time (scanning is not re-entrant) but either
	the IRQ handler or a watchdog timer could end up starting it.  Many thanks
	to Olaf Hering for isolating the failure mode, and testing this fix!
	
	Once once CPU starts scanning, any other might as well finish right
	away.  This fix just adds a flag to detect that case.
	
	Signed-off-by: David Brownell <dbrownell@users.sourceforge.net>
	Signed-off-by: Greg Kroah-Hartman <greg@kroah.com>

<akpm@osdl.org>
	[PATCH] USB: Codemercs IO-Warrior support
	
	From: Steffen Zieger <lkml@steffenspage.de>
	
	Here is a patch to get the kernel module from Codemerces to work.  The module
	is available in source for the 2.4 and 2.6 series except the needed changes in
	hid-core.c.  Codemercs distribute the needed changes as a complete file
	(version 2.6.4).  This isn't working with 2.6.8.1.
	
	http://www.codemercs.com
	
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Greg Kroah-Hartman <greg@kroah.com>

<util@deuroconsult.ro>
	[PATCH] USB Serial: Correct a use of out of range variable
	
	Bug found by Coverity:
	http://linuxbugs.coverity.com/external/editbugparent.php?viewbugid=2137&checkers%5B%5D=all&status%5B%5D=BUG&status%5B%5D=UNINSPECTED&status%5B%5D=UNKNOWN&status%5B%5D=DON%27T%20CARE&status%5B%5D=PENDING&product%5B%5D=all&component%5B%5D=all&file=&fn=&sortby=reverse_rank&before=&after=&curpage=2&bugid=-1&comment=&reason=
	
	Signed-off-by: Greg Kroah-Hartman <greg@kroah.com>

<mdharm-usb@one-eyed-alien.net>
	[PATCH] USB Storage: change how INQUIRY is fixed up
	
	The usb-storage driver 'fixes up' the INQUIRY data returned by a device so
	that it reads SCSI rev 2 by intercepting the data in-flight.  This was done
	to make various SCSI drivers (sd, sr, etc.) work with the device.
	
	However, this technique also has the unfortunate side-effect that nobody
	can see the real rev. -- not even sg users.
	
	This patch changes that.  Now, the SCSI revision is changed in the
	slave_configure() function.  Thus, the 'real' data is available to anyone
	who wants to issue an INQUIRY directly via any means.
	
	This also simplifies the code somewhat.
	
	
	Signed-off-by: Matthew Dharm <mdharm-usb@one-eyed-alien.net>
	Signed-off-by: Greg Kroah-Hartman <greg@kroah.com>

<nacc@us.ibm.com>
	[PATCH] i2c-algo-ite: remove iic_sleep()
	
	Removes unused function iic_sleep().
	
	Signed-off-by: Nishanth Aravamudan <nacc@us.ibm.com>
	Signed-off-by: Greg Kroah-Hartman <greg@kroah.com>

<castet.matthieu@free.fr>
	[PATCH] use of MODULE_DEVICE_TABLE in i2c busses driver
	
	hello,
	since you say your are interested of using MODULE_DEVICE_TABLE in
	http://bugzilla.kernel.org/show_bug.cgi?id=3091 I did a patch (attach).
	
	Also I notice that some pci_device_id are marked __devinitdata that seem a bug
	if I read Linux 2.6.0-test3 changelog.
	To find them do a "grep pci_device_id  /usr/src/linux/drivers/i2c/busses/* |
	grep __devinitdata"
	
	
	Signed-off-by: Greg Kroah-Hartman <greg@kroah.com>

<mhoffman@lightlink.com>
	[PATCH] I2C/SMBus stub for driver testing
	
	* Greg KH <greg@kroah.com> [2004-08-24 16:44:32 -0700]:
	> > > Why not?  It looks useful to me.  Care to send me a patch adding
	> > > this to the main kernel tree?
	
	* Mark M. Hoffman <mhoffman@lightlink.com> [2004-08-25 10:25:02 -0400]:
	> Later today, sure.
	
	Well here it is, one day later because I really didn't want to do this
	with printk.  I spent some time looking around and relayfs seems like
	a good fit.  Do you think relayfs will ever get merged?  Meanwhile...
	
	* * * * *
	
	This patch, applied to 2.6.9-rc1, adds an I2C/SMBus test stub that is useful
	for developing sensors drivers.
	
	Signed-off-by: Mark M. Hoffman <mhoffman@lightlink.com>
	Signed-off-by: Greg Kroah-Hartman <greg@kroah.com>

<margitsw@t-online.de>
	[PATCH] I2C: minor lm85 fix
	
	Jean scribeth :
	> Except lm85, but this should be fixed
	
	Indeed, patch attached.
	
	
	Signed-off-by: Greg Kroah-Hartman <greg@kroah.com>

<khali@linux-fr.org>
	[PATCH] I2C: Do not init global variables to 0
	
	This trivial patch enforces the rule that global variables should not be
	explicitely initialized to 0 for all i2c chip drivers.
	
	Signed-off-by: Jean Delvare <khali@linux-fr.org>
	Signed-off-by: Greg Kroah-Hartman <greg@kroah.com>

<khali@linux-fr.org>
	[PATCH] I2C: Fix macro calls in chip drivers
	
	I noticed that some I2C chip drivers (all written or reviewed by me, I
	feel ashamed to say) misuse macros. Passing function calls
	(simple_strtol in this case) to macros evaluating their argument up to 4
	times is certainly not wise and obviously performs poorly. It is not
	critical in that it happens only when writing to the chips (setting
	limits), which doesn't happen that often. However I'd say it's worth
	fixing.
	
	Thus, the patch below fixes that, by moving the function calls outside
	of the macro calls.
	
	
	Signed-off-by: Jean Delvare <khali@linux-fr.org>
	Signed-off-by: Greg Kroah-Hartman <greg@kroah.com>

<johnpol@2ka.mipt.ru>
	[PATCH] w1: Added slave->ttl - time to live for the registered slave.
	
	Added slave->ttl - time to live for the registered slave.
	When slave was not found we will not remove it immediately but wait until ->ttl attempts were done.
	It prevents various debouncing effects(problems with pull-up, power).
	
	Signed-off-by: Evgeniy Polyakov <johnpol@2ka.mipt.ru>
	Signed-off-by: Greg Kroah-Hartman <greg@kroah.com>

<greg@kroah.com>
	[PATCH] kobject: hotplug_seqnum is not 64 bits on all platforms, so fix it.
	
	Thanks to Kay Sievers for pointing this out.
	
	Signed-off-by: Greg Kroah-Hartman <greg@kroah.com>

<greg@kroah.com>
	[PATCH] ksyms: don't implement /sys/kernel/hotplug_seqnum if CONFIG_HOTPLUG is not enabled.
	
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Greg Kroah-Hartman <greg@kroah.com>

<greg@kroah.com>
	USB: make usb_unlink_urb() message only show up if CONFIG_DEBUG_KERNEL is enabled.
	
	Signed-off-by: Greg Kroah-Hartman <greg@kroah.com>

<johnpol@2ka.mipt.ru>
	[PATCH] W1: let W1 select NET.
	
	On Wed, 2004-08-25 at 23:41, Greg KH wrote:
	> On Wed, Aug 25, 2004 at 11:21:29PM +0400, Evgeniy Polyakov wrote:
	> > On Wed, 25 Aug 2004 10:49:12 -0700
	> > Greg KH <greg@kroah.com> wrote:
	> >
	> > > On Fri, Aug 13, 2004 at 02:35:40PM +0400, Evgeniy Polyakov wrote:
	> > > > The patch below fixes this issue by letting W1 select NET.
	> > > >
	> > > > Patch was created by Adrian Bunk <bunk@fs.tum.de>.
	> > >
	> > > Nah, I'm going to hold off on this, it's not really needed (who
	> > > doesn't build with NET enabled...)
	> >
	> > Hmmm, but someone really may want to build it without NET support.
	> > I have an idea(I thought it out exactly for the case when you do not
	> > apply it) to disable networking(netlink) support in compilation time if
	> > CONFIG_NET is not defined.
	> > And add some warning like:
	> >
	> > #ifndef CONFIG_NET
	> > #warning Netlink support is disabled.
	> > #endif
	>
	> That sounds like a good fix.
	
	
	
	Signed-off-by: Greg Kroah-Hartman <greg@kroah.com>

<stern@rowland.harvard.edu>
	[PATCH] USB: Add OTG support to g_file_storage
	
	This patch adds minimal USB On-The-Go support (mainly just an extra
	descriptor) to the File-Storage Gadget.  The changes were based on the
	additions made to the Gadget Zero driver.
	
	
	Signed-off-by: Alan Stern <stern@rowland.harvard.edu>
	Signed-off-by: Greg Kroah-Hartman <greg@kroah.com>

<stern@rowland.harvard.edu>
	[PATCH] USB: New submission procedure for unusual_devs.h
	
	As you requested, this patch updates the documented procedure for
	submitting new unusual_devs.h entries.
	
	
	Signed-off-by: Alan Stern <stern@rowland.harvard.edu>
	Signed-off-by: Greg Kroah-Hartman <greg@kroah.com>

<petkov@uni-muenster.de>
	[PATCH] USB: fix up usblp usb_unlink_urb() warning
	
	On Thursday 09 September 2004 08:38, Greg KH wrote:
	> On Thu, Sep 09, 2004 at 01:07:05AM -0400, Gene Heskett wrote:
	> > Greetings;
	> >
	> > I just had to reboot back to -mm2 after playing with some printer configs
	> > in cups, although the test pages worked, so I'm not sure what this all
	> > about, from var log/messages:
	> >
	> > Sep  8 23:13:42 coyote cups: cupsd -HUP succeeded
	> > Sep  8 23:13:43 coyote kernel: usb_unlink_urb() is deprecated for
	> > synchronous unlinks.  Use usb_kill_urb() Sep  8 23:13:43 coyote kernel:
	> > Badness in usb_unlink_urb at drivers/usb/core/urb.c:456 Sep  8 23:13:44
	> > coyote kernel:  [<c01048ce>] dump_stack+0x1e/0x20 Sep  8 23:13:44 coyote
	> > kernel:  [<c0295f35>] usb_unlink_urb+0x85/0xa0 Sep  8 23:13:44 coyote
	> > kernel:  [<c02a7447>] usblp_unlink_urbs+0x17/0x40 Sep  8 23:13:44 coyote
	> > kernel:  [<c02a74a8>] usblp_release+0x38/0x60 Sep  8 23:13:44 coyote
	> > kernel:  [<c01501ea>] __fput+0x12a/0x140
	> > Sep  8 23:13:44 coyote kernel:  [<c014e8e7>] filp_close+0x57/0x80
	> > Sep  8 23:13:44 coyote kernel:  [<c014e971>] sys_close+0x61/0x90
	> > Sep  8 23:13:44 coyote kernel:  [<c010425d>] sysenter_past_esp+0x52/0x71
	
	
	
	Signed-off-by: Greg Kroah-Hartman <greg@kroah.com>

<stern@rowland.harvard.edu>
	[PATCH] USB: Unusual_devs entry for Panasonic cameras
	
	Thanks to Tom Hughes for jogging my memory about this patch, which has
	been sitting here waiting for Greg's return.  It adds an unusual_devs.h
	entry for the Panasonic DMC-LCx line of cameras, which incorrectly report
	the total number of blocks in response to READ CAPACITY rather than the
	highest available block number.
	
	
	Signed-off-by: Alan Stern <stern@rowland.harvard.edu>
	Signed-off-by: Greg Kroah-Hartman <greg@kroah.com>

<greg@kroah.com>
	USB: fix usb_unlink_urb() usage in pl2303 driver
	
	Signed-off-by: Greg Kroah-Hartman <greg@kroah.com>

<greg@kroah.com>
	USB: fix usb_unlink_urb() usage in usb-serial core
	  
	Signed-off-by: Greg Kroah-Hartman <greg@kroah.com>

<greg@kroah.com>
	USB: fix usb_unlink_urb() usage in belkin_sa driver
	    
	Signed-off-by: Greg Kroah-Hartman <greg@kroah.com>

<greg@kroah.com>
	USB: fix usb_unlink_urb() usage in cyberjack driver
	
	Signed-off-by: Greg Kroah-Hartman <greg@kroah.com>

<greg@kroah.com>
	USB: fix usb_unlink_urb() usage in whiteheat driver
	
	Signed-off-by: Greg Kroah-Hartman <greg@kroah.com>

<greg@kroah.com>
	USB: fix usb_unlink_urb() usage in io_edgeport driver
	
	Signed-off-by: Greg Kroah-Hartman <greg@kroah.com>

<greg@kroah.com>
	USB: fix usb_unlink_urb() usage in ir-usb driver
	
	Signed-off-by: Greg Kroah-Hartman <greg@kroah.com>

<greg@kroah.com>
	USB: fix usb_unlink_urb() usage in ipaq driver
	
	Signed-off-by: Greg Kroah-Hartman <greg@kroah.com>

<greg@kroah.com>
	USB: fix usb_unlink_urb() usage in digi_acceleport driver
	
	Signed-off-by: Greg Kroah-Hartman <greg@kroah.com>

<greg@kroah.com>
	USB: fix usb_unlink_urb() usage in empeg driver
	
	Signed-off-by: Greg Kroah-Hartman <greg@kroah.com>

<greg@kroah.com>
	USB: fix usb_unlink_urb() usage in mct_u232 driver
	
	Signed-off-by: Greg Kroah-Hartman <greg@kroah.com>

<greg@kroah.com>
	USB: fix usb_unlink_urb() usage in omninet driver
	
	Signed-off-by: Greg Kroah-Hartman <greg@kroah.com>

<greg@kroah.com>
	USB: fix usb_unlink_urb() usage in visor driver
	
	Signed-off-by: Greg Kroah-Hartman <greg@kroah.com>

<greg@kroah.com>
	USB: fix usb_unlink_urb() usage in kl5kusb105 driver
	
	Signed-off-by: Greg Kroah-Hartman <greg@kroah.com>

<greg@kroah.com>
	USB: fix usb_unlink_urb() usage in kobil_sct driver
	
	Signed-off-by: Greg Kroah-Hartman <greg@kroah.com>

<greg@kroah.com>
	USB: fix usb_unlink_urb() usage in io_ti driver
	
	Signed-off-by: Greg Kroah-Hartman <greg@kroah.com>

<greg@kroah.com>
	USB: fix usb_unlink_urb() usage in ftdi_sio driver
	
	Signed-off-by: Greg Kroah-Hartman <greg@kroah.com>

<greg@kroah.com>
	USB: fix usb_unlink_urb() usage in keyspan_pda driver
	
	Signed-off-by: Greg Kroah-Hartman <greg@kroah.com>

<greg@kroah.com>
	USB: fix usb_unlink_urb() usage in generic usb-serial driver
	
	Signed-off-by: Greg Kroah-Hartman <greg@kroah.com>

<david-b@pacbell.net>
	[PATCH] export usb_set_device_state(), use in ohci
	
	This patch is mostly cleanup, but it all helps make PM_SUSPEND_DISK
	start to behave better.
	
	
	This exports the new usb_set_device_state() routine for the virtual root
	hubs, and uses it in OHCI during resume after power-off to replace some
	HC-private code doing almost the same thing.
	
	Note that all HCDs will likely need the same kind of suspend-to-disk
	support (though it's different when BIOS kicks in).  Some systems
	even power-off during suspend-to-ram (to save extra power), which is
	why OHCI already has this logic!
	
	Related updates:
	
	 - Use usb_set_device_state() immediately when an HC dies, making khubd
	   handle disconnect processing instead of a workqueue.  So now drivers
	   won't self-deadlock in this should-be-rare path, when disconnect()
	   calls flush_scheduled_work().
	
	 - Don't warn about "Unlink after no-IRQ" for the the root hub's status
	   URB ... like when suspending an HCD that never enumerated a device.
	
	 - Minor IRQ handler cleanup, including more accurate tracking of whether
	   this driver ever returned IRQ_HANDLED (shared IRQs don't count).
	
	Signed-off-by: David Brownell <dbrownell@users.sourceforge.net>
	Signed-off-by: Greg Kroah-Hartman <greg@kroah.com>

<david-b@pacbell.net>
	[PATCH] USB: gadget_is_n9604
	
	This adds recognition of one more UDC driver.
	(Driver is available separately.)
	
	
	Tell gadget drivers about the National 9603/9604 UDC.
	
	Signed-off-by: David Brownell <dbrownell@users.sourceforge.net>
	Signed-off-by: Greg Kroah-Hartman <greg@kroah.com>

<david-b@pacbell.net>
	[PATCH] USB: ohci updates
	
	Small bugfixes, at least one of which gets rid of  some
	rather random behavior from certain board init
	behaviors.
	
	
	OHCI updates:
	
	 - Bugfix the code taking frame clock adjustments from the boot loader.
	   A recent change had a bug which caused inconsistent failures on some
	   OHCI configs, including amd756.  Thanks to <pacman@manson.clss.net>
	   for tracking down the specifics.
	
	 - From Lothar Wassmann <lk@karo-electronics.de> two fixes:
	     (a) don't let tick clock sign-extend, that can make unlinks
	         take excessively long (could happen easily enough);
	     (b) when re-activating schedules after suspend, use the right
	         bitmask (rare/exotic)
	
	 - When suspending the root hub, mark it as USB_STATE_SUSPENDED
	
	Signed-off-by: David Brownell <dbrownell@users.sourceforge.net>
	Signed-off-by: Greg Kroah-Hartman <greg@kroah.com>

<david-b@pacbell.net>
	[PATCH] USB: khubd looks at ports after probe
	
	Fix the hub probe logic so that when khubd wakes up, it will actually
	look at all ports on the new hub.  This resolved a root hub enumeration
	issue, and I expect the "boot from USB disk" folk will like this too.
	
	The fix includes cleanup: centralizing the logic to make khubd look
	at a given hub, instead of cloning it three times (or in the case of
	hub probing, frankensteining it).
	
	This also adds a FIXME to the new routine centralizing disconnect
	processing:  we also want "power down port but don't wake khubd"
	(for PM_SUSPEND_DISK as well as SRP).
	
	Signed-off-by: David Brownell <dbrownell@users.sourceforge.net>
	Signed-off-by: Greg Kroah-Hartman <greg@kroah.com>

<jejb@raven.il.steeleye.com>
	Add scsi_target abstraction and place it in sysfs
	
	For some of the transport class attributes, we need to hang them off the
	SCSI target rather than the LUN (represented by scsi_device).  To do this
	efficiently, we need to make the target visible in the sysfs hierarchy.
	
	The net effect of this change is to make an extra target component appear
	in all the SCSI sysfs paths:
	
	jejb@raven> ls -l /sys/class/scsi_device/0\:0\:5\:0/device
	lrwxrwxrwx  1 root root 0 Sep  7 12:10 /sys/class/scsi_device/0:0:5:0/device -> ../../../devices/parisc8/parisc8:0/pci0000:00/0000:00:13.0/host0/target0:0:5/0:0:5:0/
	
	Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

<jejb@raven.il.steeleye.com>
	Add host and target transport class abstractions
	
	This patch makes a transport class be composed of up to three individual
	device classes representing potential interfaces on the scsi_device,
	scsi_target and Scsi_Host.  A class only has to implement at least one
	of these, but may optionally implement more.
	
	Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

<jejb@raven.il.steeleye.com>
	Make the SPI transport parameters operate at the target level
	
	Technically, the transfer agreement governs the I_T nexus (the
	target) not the I_T_L nexus (the device), so make it operate
	of the scsi_target structure.
	
	Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

<david-b@pacbell.net>
	[PATCH] USB: omap_udc supports 5910/1510 chips
	
	This removes the "don't run on OMAP 1510" constraint from the
	driver and teaches it how not to use registers only available on
	newer chips.  It's effectively just a compile fix, though ... hasn't
	got any board support yet.
	
	
	Basic build fixes for the OMAP 1510/5910.  This first generation chip
	doesn't include an OTG controller.  The patch makes the driver stop
	using OTG registers, and adds some #defines that will be needed to
	support boards using those chips.
	
	Signed-off-by: David Brownell <dbrownell@users.sourceforge.net>
	Signed-off-by: Greg Kroah-Hartman <greg@kroah.com>

<dave@thedillows.org>
	PCI cleanups and convert to ethtool_ops
	*) Reorder MWI initialization
	*) Perform proper cleanup on probe failure
	*) Remove cruft, and avoid locking up NIC on reset
	
	Signed-off-by: David A. Dillow <dave@thedillows.org>

<jejb@raven.il.steeleye.com>
	Add bus signalling host attribute to spi transport class
	
	This is just a simple illustration of host parameters:
	it adds a bus signalling type for LVD/SE/HVD
	
	Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

<davej@redhat.com>
	[CPUFREQ] Work around AMD64 2nd identical PST errata
	
	AMD recently errata'd the definition of the PSB/PST for recent Athlon 64 and Opteron parts.  The errata
	allows for a second, identical PST for those parts.
	The current powernow-k8 driver will not work in PST/PSB mode on those parts because it requires 
	there be 1 and only 1 PST.
	
	From: Mark Langsdorf
	Signed-off-by: Dave Jones <davej@redhat.com>

<arjanv@redhat.com>
	[PATCH] aic79xx hostraid support
	
	Patch ported to 2.6.8 by John A. Hull (john_hull@dell.com) to add
	support for the aic79xx hostraid family support.
	
	Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>
	
	since AHD_HOSTRAID_BOARD wasn't actually used... a more minimal patch:

<stern@rowland.harvard.edu>
	[PATCH] Add BLIST_INQUIRY_36 to all USB blacklist entries
	
	This patch adds the BLIST_INQUIRY_36 flag to all the SCSI blacklist
	entries for USB devices.  While it may not be strictly necessary for all
	of them, it doesn't hurt: Since the usb-storage driver doesn't use any of
	the INQUIRY data after the first 36 bytes, there's no reason to try
	reading any more of it.  And some devices crash when we try to read more,
	even though they advertise that more bytes are available.  The usb-storage
	driver does try to set the flag automatically, but the blacklist entries
	override that setting.
	
	Signed-off-by: Alan Stern <stern@rowland.harvard.edu>
	Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

<hch@lst.de>
	[PATCH] update NCR5380 comments
	
	Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

<oliver@neukum.org>
	[PATCH] USB: maintainership of acm cdc
	
	I've discussed this with Vojtech. If I brake the probe method,
	I can also break the rest ;-)
	
	
	Signed-Off-By: Oliver Neukum <oliver@neukum.name>
	Signed-off-by: Greg Kroah-Hartman <greg@kroah.com>
	
	
	  - new cdc acm maintainer

<dougg@torque.net>
	[PATCH] scsi_debug version 1.74
	
	To check descriptor format sense data handling we need a source.
	Clean up some other problems and improve support for st.
	
	Changes:
	   - add 'dsense' option to generate descriptor sense data
	     format (default still fixed format)
	   - correct unit attention generation (only INQUIRY, REQUEST_SENSE
	     and REPORT_LUNS ignore it)
	   - better information sent to log in "noisy" mode (i.e. opts=1)
	   - correct and expand standard INQUIRY response, include version
	     descriptors
	   - filter MODE_SENSE command so that subpage!=0 generates error
	   - add REWIND (SSC) command support (NOP)
	
	Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

<hch@lst.de>
	[PATCH] update dmx3191d to modern pci/scsi probing
	
	thanks to  Mark Morschh\"auser for testing.
	
	Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

<hch@lst.de>
	[PATCH] first steps at BusLogic cleanup
	
	 - switch to a normal lists.h list for all hbas
	 - merge BusLogic_DetectHostAdapter and BusLogic_init
	 - move scsi_remove_host into BusLogic_ReleaseHostAdapter instead
	   of a second iteration over all hosts
	
	Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

<jeremy@sgi.com>
	[PATCH] sg.c to warn about ambiguous data direction
	
	On Sat, Aug 28, 2004 at 02:39:45AM -0700, Jeremy Higdon wrote:
	> > Jeremy,
	> > You could use a (block scope) static and only print out
	> > the warning the first time it is detected.
	> >
	> > Doug Gilbert
	>
	> Yes, that's a good idea -- I'll add a rate limiter and also print
	> out the process name like James does in his recent deprecated
	> ioctl warning patch.  I'll send a new patch out later this weekend.
	> Sorry for the churn.
	>
	> thanks
	>
	> jeremy
	
	Okay, I'm pretty happy with this.  I get this kind of output:
	
	sg_write: data in/out 512/512 bytes for SCSI command 0x8--guessing data in;
	   program java not setting count and/or reply_len properly
	printk: 11 messages suppressed.
	sg_write: data in/out 512/512 bytes for SCSI command 0x8--guessing data in;
	   program java not setting count and/or reply_len properly
	printk: 4 messages suppressed.
	
	
	signed-off-by: jeremy@sgi.com
	Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

<akpm@osdl.org>
	[PATCH] qla2xxx gcc-3.5 fixes
	
	From: Adrian Bunk <bunk@fs.tum.de>
	
	  CC      drivers/scsi/qla2xxx/qla_os.o
	drivers/scsi/qla2xxx/qla_os.c: In function `qla2x00_queuecommand':
	drivers/scsi/qla2xxx/qla_os.c:315: sorry, unimplemented: inlining failed
	in call to 'qla2x00_callback': function not considered for inlining
	drivers/scsi/qla2xxx/qla_os.c:269: sorry, unimplemented: called from here
	drivers/scsi/qla2xxx/qla_os.c:315: sorry, unimplemented: inlining failed
	in call to 'qla2x00_callback': function not considered for inlining
	drivers/scsi/qla2xxx/qla_os.c:269: sorry, unimplemented: called from here
	make[3]: *** [drivers/scsi/qla2xxx/qla_os.o] Error 1
	...
	  CC      drivers/scsi/qla2xxx/qla_rscn.o
	drivers/scsi/qla2xxx/qla_rscn.c: In function `qla2x00_cancel_io_descriptors':
	drivers/scsi/qla2xxx/qla_rscn.c:320: sorry, unimplemented: inlining
	failed in call to 'qla2x00_remove_iodesc_timer': function not considered for inlining
	drivers/scsi/qla2xxx/qla_rscn.c:257: sorry, unimplemented: called from here
	make[3]: *** [drivers/scsi/qla2xxx/qla_rscn.o] Error 1
	
	Signed-off-by: Adrian Bunk <bunk@fs.tum.de>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

<akpm@osdl.org>
	[PATCH] Disambiguate esp.c clones
	
	From: Joshua Kwan <joshk@triplehelix.org>
	
	Debian's initial ramdisk creation scripts rely on the content of /proc/scsi
	to determine which module is needed for the ramdisk.  Unfortunately, bad
	things happen when a bazillion different drivers use the _exact same name_
	for /proc, namely the esp family.
	
	Give them all unique names.
	
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

<janitor@sternwelten.at>
	[PATCH] scsi/mesh: replace schedule_timeout() 	with msleep()
	
	Description: Use msleep() instead of schedule_timeout() to
	guarantee the task delays for the desired time.
	
	Signed-off-by: Nishanth Aravamudan <nacc@us.ibm.com>
	Signed-off-by: Maximilian Attems <janitor@sternwelten.at>
	Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

<janitor@sternwelten.at>
	[PATCH] scsi/osst: replace schedule_timeout() 	with msleep()
	
	Replace schedule_timeout() with msleep() to guarantee the task
	delays as desired.
	
	Signed-off-by: Nishanth Aravamudan <nacc@us.ibm.com>
	Signed-off-by: Maximilian Attems <janitor@sternwelten.at>
	Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

<janitor@sternwelten.at>
	[PATCH] scsi/wd7000: replace schedule_timeout() 	with msleep()
	
	Use msleep() instead of schedule_timeout() to
	guarantee the task delays for the desired time.
	
	Signed-off-by: Nishanth Aravamudan <nacc@us.ibm.com>
	Signed-off-by: Maximilian Attems <janitor@sternwelten.at>
	Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

<janitor@sternwelten.at>
	[PATCH] scsi/sd: replace schedule_timeout() with 	msleep()
	
	Use msleep() instead of schedule_timeout() to
	guarantee the task delays for the desired time.
	
	Signed-off-by: Nishanth Aravamudan <nacc@us.ibm.com>
	Signed-off-by: Maximilian Attems <janitor@sternwelten.at>
	Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

<janitor@sternwelten.at>
	[PATCH] scsi/qla_init: replace 	schedule_timeout() with
	
	Replaces schedule_timeout() with msleep() to guarantee task
	delays as desired.
	
	Signed-off-by: Nishanth Aravamudan <nacc@us.ibm.com>
	Signed-off-by: Maximilian Attems <janitor@sternwelten.at>
	Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

<janitor@sternwelten.at>
	[PATCH] scsi/qla_os: replace schedule_timeout() 	with msleep()
	
	Use msleep() instead of schedule_timeout() to
	guarantee the task delays for the desired time.
	
	Signed-off-by: Nishanth Aravamudan <nacc@us.ibm.com>
	
	incremental patch adds missing include.
	
	Signed-off-by: Domen Puncer <domen@coderock.org>
	Signed-off-by: Max Attems <janitor@sternwelten.at>
	Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

<janitor@sternwelten.at>
	[PATCH] scsi/sata_sx4: replace schedule_timeout() 	with
	
	Use msleep() instead of schedule_timeout() to
	guarantee the task delays for the desired time.
	
	Signed-off-by: Nishanth Aravamudan <nacc@us.ibm.com>
	Signed-off-by: Maximilian Attems <janitor@sternwelten.at>
	Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

<davej@redhat.com>
	[PATCH] Remove redundant freeing code from aic7770
	
	ahc_alloc already frees the 'name' if ahc=NULL
	
	Spotted with the source checker from Coverity.com.
	
	Signed-off-by: Dave Jones <davej@redhat.com>
	Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

<davej@redhat.com>
	[PATCH] plug leaks in aic79xx
	
	Spotted with the source checker from Coverity.com.
	
	Signed-off-by: Dave Jones <davej@redhat.com>
	Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

<davej@redhat.com>
	[PATCH] Remove possible reuse of stale pointer in aic7xxx
	
	Spotted with the source checker from Coverity.com.
	
	Signed-off-by: Dave Jones <davej@redhat.com>
	Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

<davej@redhat.com>
	[PATCH] plug leaks in aic7xxx_osm
	
	Spotted with the source checker from Coverity.com.
	
	Signed-off-by: Dave Jones <davej@redhat.com>
	Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

<hch@lst.de>
	[PATCH] refactor tmscsim inititalization code
	
	this one I still had in my pipe.  This greatly streamlines the setup
	code.
	
	Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

<hch@lst.de>
	[PATCH] update notcq blacklist
	
	This patch adds the two devices from the private blacklist in tmscsim to
	the generic one.
	
	Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

<hch@lst.de>
	[PATCH] don't include "scsi.h" in scsi_module.c
	
	we only need <scsi/scsi_host.h> here
	
	Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

<hch@lst.de>
	[PATCH] avoid obsolete APIs in ide-scsi
	
	Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

<hch@lst.de>
	[PATCH] avoid obsolete APIs in eata
	
	Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

<hch@lst.de>
	[PATCH] allow non-modular mptctl
	
	There's no reason to keep people from building it into their
	kernels statically.
	
	Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

<olh@suse.de>
	[PATCH] mesh is ppc32-only
	
	 On Wed, Aug 25, Christoph Hellwig wrote:
	> mesh is only present on older 32bit pmac boards and doesn't compile
	> on ppc64.
	
	This applies also to the other pmac-only scsi driver:
	
	Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

<hch@lst.de>
	[PATCH] fix aic79xx module_init return value when no hardware
	
	So much rearranging to just propagate the pci_module_init return value..
	
	Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

<andrew.vasquez@qlogic.com>
	[PATCH] PATCH [1/8]  qla2xxx: PCI posting fixes
	
	Signed-off-by: Andrew Vasquez <andrew.vasquez@qlogic.com>
	Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

<andrew.vasquez@qlogic.com>
	[PATCH] PATCH [2/8]  qla2xxx: Dynamic resize of request-q
	
	Dynamically resize request-queue during initialization based
	on the amount of memory available to the ISP.
	
	Signed-off-by: Andrew Vasquez <andrew.vasquez@qlogic.com>
	Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

<jejb@mulgrave.(none)>
	qla2xxx: DMA pool/api usage
	
	From: Andrew Vasquez <andrew.vasquez@qlogic.com>
	
	Rework driver DMA allocations to use the DMA pool APIs
	to minimize potential run-time allocation failures.
	
	Signed-off-by: Andrew Vasquez <andrew.vasquez@qlogic.com>
	
	Fixed up rejections and replaced the
	schedule_timeout's in the patch with msleep
	
	Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

<andrew.vasquez@qlogic.com>
	[PATCH] PATCH [4/8]  qla2xxx: Small fixes
	
	o Always set an TCQ modifier for each command submitted.
	o Always (re)-initialize NVRAM during execution.
	o Add pci_disable_device() calls to proper locations during
	  pci-probe failure and pci-remove.
	o Do not begin processing until the DPC has been marked
	  'active'.
	o Fix off-by-one error while copying sense-data.
	o Fix bus-reset issue during back-door execution.
	
	Signed-off-by: Andrew Vasquez <andrew.vasquez@qlogic.com>
	Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

<andrew.vasquez@qlogic.com>
	[PATCH] PATCH [5/8]  qla2xxx: Rework ISR registration
	
	Rework interrupt-handler registration in anticipation of future
	chip types.
	
	Signed-off-by: Andrew Vasquez <andrew.vasquez@qlogic.com>
	Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

<jejb@mulgrave.(none)>
	qla2xxx: 23xx/63xx firmware updates
	
	From: Andrew Vasquez <andrew.vasquez@qlogic.com>
	
	Resync with latest released firmware -- 3.03.02
	
	Signed-off-by: Andrew Vasquez <andrew.vasquez@qlogic.com>
	Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

<andrew.vasquez@qlogic.com>
	[PATCH] PATCH [8/8]  qla2xxx: Update version
	
	Update version number to 8.00.00b21-k.
	
	Signed-off-by: Andrew Vasquez <andrew.vasquez@qlogic.com>
	Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

<aradford@amcc.com>
	[PATCH] 3ware 5/6/7/8000 driver v1.26.02.000
	
	- Remove deprecated SCSI_IOCTL_SEND_COMMAND interface.
	- Remove deprecated /proc/scsi/3w-xxxx interface.
	- Convert entire driver to pci_driver format.
	- Remove all mdelays, replace w/msleep to fix possible watchdog
	  timer issues.
	- Make all register accesses macros.
	- Remove all prototypes from header file, reorder functions to
	  eliminate all prototypes but one.
	- Add sysfs 'queue_depth' setting attribute.
	- Add sysfs 'stats' attribute.
	- Fix spinlocks everywhere, remove tw_lock spinlock.
	- Remove all bitfields, add bitmask access macros.
	- Remove un-needed scsi_eh_abort entrypoint.  Controller does not
	  support aborting invididual IO's, scsi_eh_reset sufficient.
	
	Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

<James.Bottomley@steeleye.com>
	[PATCH] Fix up scsi_test_unit_ready() to work correctly with CD-ROMs
	
	Olaf Hering noticed that SG_IO was no-longer working correctly on some
	CD-ROMS.  The reason is a change in behaviour induced by switching to
	the new scsi_test_unit_ready() API.
	
	Apparently the CD-ROM special case needs to ignore both UNIT_ATTENTION
	and NOT_READY for removable media.
	
	Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

<dougg@torque.net>
	[PATCH] sg jiffy library calls [was: sg kill local jiffies
	
	Douglas Gilbert wrote:
	> It has been reported that the change to sg.c in lk 2.6.9-rc1-bk5
	> to use library jiffy functions breaks sg (albeit under vmware).
	> Evidentally sg devices are no longer recognised after that change.
	> 
	> Reverting that changeset removes the problem. Strange, it is not
	> obvious why.
	> 
	> At some stage I must have detected negative time spans (yeh yeh it
	> never happens) and my versions returned 0 in this case; otherwise
	> the implementations look very similar.
	
	The following patch fixes the problem. It is
	against lk 2.6.9-rc1-bk7 (i.e. after "standard"
	jiffy_to_millisecs macros replaced sg versions).
	
	Change:
	    - make sure a (large) user supplied timeout value does
	      not result in a negative timeout passed to the midlevel
	
	Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

<johnstul@us.ibm.com>
	[PATCH] USB: early usb handoff for 2.6
	
	        Apparently there is an issue w/ the IBM x440/x445's BIOS's USB
	Legacy support. Due to the delay in issuing SMI's across the IOAPICs,
	its possible for I/O to ports 60/64 to cause register corruption.
	
	The solution is to disable the BIOS's USB Legacy support early in
	boot(via PCI quirks) for x440/x445 systems.
	
	Originally written by Vojtech against SuSE's tree, this patch was then
	updated to disable EHCI by Aleksey Gorelov, cleaned up by Pete Zaitcev
	for 2.4 and finally tweaked and updated against 2.6 by me.
	
	I've lightly tested this version of the patch, but it differs little
	from what Aleksey, Pete and I have been testing for 2.4.
	
	
	Signed-off-by: John Stultz <jstultz@us.ibm.com>
	Signed-off-by: Greg Kroah-Hartman <greg@kroah.com>

<stern@rowland.harvard.edu>
	[PATCH] USB: Improve UHCI suspend/resume
	
	This patch fixes some problems with the suspend/resume handling in the
	UHCI driver:
	
		Don't try to resume ports that aren't already suspended.
	
		The controller won't permit Resume signals to be sent to a port
		if the port isn't enabled, so don't assume it will work.
	
		Port reset and port disable will terminate Resume signalling.
	
	
	Signed-off-by: Alan Stern <stern@rowland.harvard.edu>
	Signed-off-by: Greg Kroah-Hartman <greg@kroah.com>

<jejb@mulgrave.(none)>
	scsi: normalize fixed and descriptor sense data
	
	From: Douglas Gilbert <dougg@torque.net>
	
	The patch only touches two files: scsi.h and scsi_lib.c
	It adds the proposed facility and then uses it in scsi_lib
	in roughly 4 locations. IMO there were 3 sense processing errors:
	   - block SG_IO did not get passed back deferred errors
	     [SG_IO is a __pass-through__ interface!!]
	   - MEDIUM_ERRORs _do_ get processed for deferred sense errors
	     in scsi_io_completion() which seems unintended
	     [I did not fix this one.]
	   - invalid command operation code handling in
	     __scsi_mode_sense() was just wrong
	
	If people think this is a reasonable approach, then the rest of
	the scsi mid-level and upper level driver could be converted.
	As Kai pointed we may need some general routines to pick up the
	sense data "extras".
	
	The benefit of doing this conversion is that it may well
	highlight a lot more sense data processing errors (if the
	above is any guide).
	
	Changes:
	    - add structure to receive normalized sense data from either
	      fixed or descriptor format sense data
	    - add scsi_normalize_sense() function to populate that structure
	    - add scsi_sense_is_deferred() function so deferred errors can
	      be ignored in many contexts
	    - apply new mechanism to sense data processing within the
	      scsi_lib.c file
	
	Patch reformatted by: Christoph Hellwig <hch@lst.de>
	Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

<stern@rowland.harvard.edu>
	[PATCH] USB: Fix off-by-one error in the hub driver
	
	This one-liner fixes a simple mistake in a newly-added part of the hub
	driver.  When a connect change takes place on a suspended port the code
	clears the suspend, but the port number it passes is origin-0 and it
	should be origin-1.
	
	
	Signed-off-by: Alan Stern <stern@rowland.harvard.edu>
	Signed-off-by: Greg Kroah-Hartman <greg@kroah.com>

<jejb@mulgrave.(none)>
	fix undefined function msleep warning in osst
	
	Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

<jejb@mulgrave.(none)>
	fix printk warning in sg.c
	
	sizeof() != int
	
	Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

<jejb@mulgrave.(none)>
	ServeRAID driver ( ips ) Version 7.10.18
	
	From: Hammer, Jack <Jack_Hammer@adaptec.com>
	
	- Fix path/name for scsi_hosts.h include for 2.6 kernels
	- Fix sort order of 7k
	- Remove 3 unused "inline" functions
	
	Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

<greg@kroah.com>
	Kobject Userspace Event Notification
	  
	Implemetation of userspace events through a netlink socket. The kernel events
	layer provides the functionality to raise an event from a given kobject
	represented by its sysfs-path and a signal string to describe the type of
	event.
	  
	Currently, kobject additions and removals are signalized to userspace by forking
	the /sbin/hotplug helper. This patch moves this special case of userspace-event
	out of the kobject core to the new kobject_uevent implementation. This makes it
	possible to send all hotplug messages also through the new netlink transport.
	  
	Possible new users of the kernel userspace functionality are filesystem
	mount events (block device claim/release) or simple device state transitions
	(cpu overheating).
	  
	To send an event, the user needs to pass the kobject, a optional
	sysfs-attribute and the signal string to the following function:
	  
	  kobject_uevent(const char *signal,
	                 struct kobject *kobj,
	                 struct attribute *attr)
	  
	  Example:
	  kobject_uevent("overheating", &cpu->kobj, NULL);
	  
	The message itself is sent over multicast netlink socket, which makes
	it possible for userspace to listen with multiple applications for the same
	messages.
	  
	Signed-off-by: Robert Love <rml@novell.com>
	Signed-off-by: Kay Sievers <kay.sievers@vrfy.org>
	Signed-off-by: Greg Kroah-Hartman <greg@kroah.com>

<akpm@osdl.org>
	[PATCH] tmscsim.c build fix
	
	This must have had a ton of testing.
	
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

<jejb@mulgrave.(none)>
	advansys build fix
	
	it uses TCQ defines but doesn't include scsi/scsi_tcq.h
	
	Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

<hch@lst.de>
	[PATCH] start removing queue from tmscsim
	
	So actually I have a patch that starts to remove internal queueing from
	tmscsim.  This gets rid of internal queueing for those cases where we
	can just make the midlayer do the the work by returning erros from
	->queuecommand (and cleans up the tmscsim queuecommand implementation
	singnificantly).
	
	Next step would get rid of the more complicated internal queueing where
	we need to make the scsi layer requeue by returning appropinquate DID_
	values from ->scsidone.
	
	Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

<davej@redhat.com>
	[CPUFREQ] Fix numerous typos in drivers/cpufreq/Kconfig
	
	Signed-off-by: Dave Jones <davej@redhat.com>

<willy@debian.org>
	[PATCH] sym2 2.1.18k
	
	2.1.18k:
	 - Relicence from dual BSD/GPL to pure GPL
	 - Add my copyright to various files
	 - Remove unnecessary MDELAY calls after printfs
	 - Rename remaining MDELAY() to mdelay(), delete MDELAY and sym_mdelay
	   macros
	 - Restructure PCI initialisation to not disable chips that are part
	   of Mylex RAID cards.
	 - Make SYM_OPT_NVRAM_PRE_READ non-optional.
	
	Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

<markh@osdl.org>
	[PATCH] aacraid: Detect non-committed array
	
	From:  Mark Salyzyn at Adaptec
	
	In the case of this driver patch, we will report to the user via a
	syslogd kernel message that a foreign array has been ignored in
	non-intel environments; or intel environments where the BIOS fails to
	load to perform this set of housekeeping functions. There is a
	provision, via the commit variable, to change this behavior to accept
	the configuration instead.
	
	Signed-off-by: Mark Haverkamp <markh@osdl.org>
	Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

<david-b@pacbell.net>
	[PATCH] USB: ohci init refactor
	
	Please merge, some recent changes made problems
	by making init take too long.  This also adds a bit of
	support for detecting the funky resume states that
	happen with suspend-to-disk (like swsusp, pmdisk).
	
	
	Refactor controller initialization ... this is most of the patch by volume.
	
	 - A time-critical section now runs with IRQs blocked, rather than being split
	   over two separate routines.  (I've recently seen init failures because of
	   preemption in the middle of that 2msec timeout, presumably by khubd.)
	
	 - Bus glue for PCI, LH7A404, OMAP, and SA-1100 now shares more init logic;
	   that'll help shrink support for upcoming non-PCI patches too.
	
	 - Move the root hub register macros to the header (for debug build issue)
	
	 - More tweaks to the frame clock initialization, including slightly more
	   helpful diagnostics on "init err".
	
	Better SWSUSP support.
	
	 - Detects and handles some funky "resume after suspend-to-disk" cases.  These
	   need to go through full driver re-init.
	
	 - Restore root hub to CONFIGURED state on resume.
	
	Signed-off-by: David Brownell <dbrownell@users.sourceforge.net>
	Signed-off-by: Greg Kroah-Hartman <greg@kroah.com>

<jejb@mulgrave.(none)>
	Fix qla2xxx mismerge
	
	From: Andrew Vasquez <andrew.vasquez@qlogic.com>
	
	Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

<aradford@amcc.com>
	[PATCH] 3ware 5/6/7/8000 driver update
	
	- Make tw_check_bits() static.
	- Add MODULE_VERSION support.
	- Fix ioctl path to use dma_alloc/free_coherent() instead of
	  pci_alloc/free_consistent().
	- Remove error variable from ioctl code causing confusion.
	  retval defaults to -EFAULT, any copy_to/from_user() that
	  returns non zero returns -EFAULT.
	
	Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

<greg@kroah.com>
	I2C: fix up __iomem marking for i2c bus drivers
	
	Signed-off-by: Greg Kroah-Hartman <greg@kroah.com>

<stern@rowland.harvard.edu>
	[PATCH] USB: Updated USB device locking
	
	This patch reintroduces the USB device locking code we tried out
	earlier.  As before, it solves the problem of effectively locking all
	the devices while drivers are registered and unregistered by introducing
	an rwsem.  Unlike the earlier attempt, this version does not ever try to
	acquire a lock re-entrantly.  I trust that will eliminate the races and
	hang-ups you observed with the earlier version.  There are also copious
	comments explaining exactly how things should work.
	
	The patch interacts slightly with the locktree() code introduced by
	David for suspend/resume support.  It doesn't change the functionality
	at all; it just updates the routine to follow the new locking rules.
	
	
	
	Signed-off-by: Alan Stern <stern@rowland.harvard.edu>
	Signed-off-by: Greg Kroah-Hartman <greg@kroah.com>

<stern@rowland.harvard.edu>
	[PATCH] USB: Add locking support for USB device resets
	
	This patch reintroduces the usb_lock_device_for_reset() routine, which
	is specially tailored to meet the needs of drivers that have to reset a
	device either during probe() or during normal operations.  It updates a
	few drivers that do device resets, to make them use the new routine.  It
	also adds a new field to struct usb_interface, to keep track of whether
	the interface is in the process of being bound to or unbound from a
	driver.  This is necessary, because during binding we know the device is
	already locked so we don't want to try to acquire the lock again!
	
	With this patch in place, USB device resets should finally become
	reliable.
	
	
	Signed-off-by: Alan Stern <stern@rowland.harvard.edu>
	Signed-off-by: Greg Kroah-Hartman <greg@kroah.com>

<khali@linux-fr.org>
	[PATCH] I2C: More verbose debug in w83781d detection
	
	Quoting myself:
	> As for me, I will propose my extra-debug patch (slightly cleaned up)
	> for inclusion into the 2.6 kernel. It helped us once, so it could
	> prove to be valuable in the future as well.
	
	Here is the patch. It makes the w83781d (mis)detection more verbose so
	as to help debugging problems. The extra messages of course only show
	when I2C chip debugging is enabled. It additionally features some code
	refactoring, some CodingStyle cleanups and adds a missing white space in
	one debug message.
	
	Signed-off-by: Jean Delvare <khali@linux-fr.org>
	Signed-off-by: Greg Kroah-Hartman <greg@kroah.com>

<luca.risolia@studio.unibo.it>
	[PATCH] USB: SN9C10x driver updates
	
	SN9C10x driver updates.
	
	Changes: (+ new, - removed, * cleanup, @ bugfix, = sync with kernels)
	
	@ Create correct red,green,blue entries under /sys according to the detected
	  bridge
	* Add and use defined symbols for I2C slave ids of TAS5110C1B and TAS51130D1B
	* Color fixes for PAS202BCB - from its maintainer -
	
	Signed-off-by: Luca Risolia <luca.risolia@studio.unibo.it>
	Signed-off-by: Greg Kroah-Hartman <greg@kroah.com>

<khali@linux-fr.org>
	[PATCH] I2C: Update Documentation/i2c/writing-clients
	
	This is a very small an update to Documentation/i2c/writing-clients. The
	changes are about i2c client driver ID. It used to say that chip driver
	writers should ask for a unique ID. It now explains that such an ID is
	not required and they can go without it. Until we get plain rid of it...
	
	The patch additionally features CodingStyle updates. We can't ask people
	to respect it and at the same time ignore it in our own docs.
	
	I have made a similar change to the i2c (the project) documentation, and
	will propose an update to Marcelo for Linux 2.4 (not sure he will accept
	it though).
	
	Signed-off-by: Jean Delvare <khali@linux-fr.org>
	Signed-off-by: Greg Kroah-Hartman <greg@kroah.com>

<akpm@osdl.org>
	[PATCH] kobject_uevent warning fix
	
	lib/kobject_uevent.c: In function `kobject_hotplug':
	lib/kobject_uevent.c:225: warning: long long int format, u64 arg (arg 3)
	
	
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Greg Kroah-Hartman <greg@kroah.com>

<akpm@osdl.org>
	[PATCH] ksysfs warning fix
	
	kernel/ksysfs.c: In function `hotplug_seqnum_show':
	kernel/ksysfs.c:28: warning: long long unsigned int format, u64 arg (arg 3)
	
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Greg Kroah-Hartman <greg@kroah.com>

<akpm@osdl.org>
	[PATCH] USB: add missing pci_disable_device for PCI-based USB HCD
	
	From: Kenji Kaneshige <kaneshige.kenji@jp.fujitsu.com>
	
	This patch adds pci_disable_device() into usb_hcd_pci_remove().
	
	If the driver decides to stop using the device, it should call
	pci_disable_device() to deallocate any IRQ resources, disable PCI
	bus-mastering, etc.
	
	Signed-off-by: Kenji Kaneshige <kaneshige.kenji@jp.fujitsu.com>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Greg Kroah-Hartman <greg@kroah.com>

<eric.valette@free.fr>
	[PATCH] USB: rtl8150.c ethernet driver : usb_unlink_urb ->usb_kill_urb
	
	While we are looking at this driver, here is a way to avoid one full
	page of annoying messages at shutdown/module unload.
	
	Signed-off-by: Eric Valette <Eric.Valette@free.fr>
	Signed-off-by: Greg Kroah-Hartman <greg@kroah.com>

<zaitcev@redhat.com>
	[PATCH] USB: Patch for 3 ub bugs in 2.6.9-rc1-mm4
	
	Actual users of ub quickly found problems, so here's a patch to address
	some of them.
	
	#1: An attempt to mount a CF card, pull the plug, then unmount causes a
	message "getblk: bad sector size 512" and an oops. This is caused by
	trying to do put_disk from disconnect instead of using a reference count.
	The sd.c does it this way (it uses kref).
	
	#2: The hald fills /var/log/messages with block device errors. It seems
	that it happens because ub allowed opens of known offline devices, and
	then partition checking produced those errors. I hope taking code from
	sd.c should fix it.
	
	Also I replaced usb_unlink_urb with usb_kill_urb.
	
	
	Signed-off-by: Greg Kroah-Hartman <greg@kroah.com>

<oliver@neukum.org>
	[PATCH] USB: acm work around for misplaced
	
	this implements a work around for some devices which have correct
	extra descriptors, but misplace them.
	
	
	Signed-Off-By: Oliver Neukum <oliver@neukum.name>
	Signed-off-by: Greg Kroah-Hartman <greg@kroah.com>

<stern@rowland.harvard.edu>
	[PATCH] USB: Descriptor listing bugfix for g_file_storage
	
	This patch repairs a mistake I made when adding OTG support to the
	file-storage gadget.  All the descriptor entries were bumped up by one,
	which caused a problem during initialization.
	
	
	Signed-off-by: Alan Stern <stern@rowland.harvard.edu>
	Signed-off-by: Greg Kroah-Hartman <greg@kroah.com>

<lcapitulino@conectiva.com.br>
	[PATCH] USB: remove ugly code from usb/serial/usb-serial.c.
	
	 This patch removes ugly code from some function in usb/serial/usb-serial.c
	which is using a goto statement intead of a simple `return'.
	
	 To be true, I'm not certain if there is a special reason to do that, if so
	ignore me. ;)
	
	
	Signed-off-by: Luiz Capitulino <lcapitulino@conectiva.com.br>
	Signed-off-by: Greg Kroah-Hartman <greg@kroah.com>

<lcapitulino@conectiva.com.br>
	[PATCH] USB: missing check in usb/serial/usb-serial.c.
	
	 This patch add a missing check in the call to bus_register() and
	not initialise `result' (which is not necessary).
	
	
	Signed-off-by: Luiz Capitulino <lcapitulino@conectiva.com.br>
	Signed-off-by: Greg Kroah-Hartman <greg@kroah.com>

<catab@deuroconsult.ro>
	[PATCH] USB: cdc-acm-usb-use-uninit-mem-bug.patch
	
	Attached is a patch for cdc-acm out of bounds access.
	
	Signed-off-by: Catalin(ux aka Dino) BOIE <catab@umbrella.ro>
	Signed-off-by: Greg Kroah-Hartman <greg@kroah.com>

<stern@rowland.harvard.edu>
	[PATCH] USB: Allow device resets for hubs
	
	This patch adds support for calling usb_reset_device() on hubs (other than
	root hubs).  It uses some of the new routines added recently by David
	Brownell to shorten and simplify the code.  The only place where this is
	called is if khubd encounters a serious error with a hub, so I don't
	expect it to turn up very often in ordinary use.
	
	
	Signed-off-by: Alan Stern <stern@rowland.harvard.edu>
	Signed-off-by: Greg Kroah-Hartman <greg@kroah.com>

<davej@redhat.com>
	[CPUFREQ] i386 Kconfig fixes
	
	i386 cpufreq Kconfig fixes:
	- /proc/acpi/processor/../performance is available for all ACPI perflib drivers
	- powernow-k8 depends on FREQ_TABLE
	- clarify the heavy dependency of SPEEDSTEP_CENTRINO on ACPI
	- remove the EXPERIMENTAL tag of SPEEDSTEP_CENTRINO_ACPI
	- allow to disable SPEEDSTEP_CENTRINO_TABLE
	
	Signed-off-by: Dominik Brodowski <linux@brodo.de>
	Signed-off-by: Dave Jones <davej@redhat.com>

<davej@redhat.com>
	[CPUFREQ] x86_64 Kconfig fixes
	
	x86_64 cpufreq Kconfig fixes:
	- SPEEDSTEP_CENTRINO _needs_ the ACPI perflib as the tables are for
	  Banias only, and the Banias is only 32bit
	- SPEEDSTEP_CENTRINO_TABLE won't be built in any longer as it only wastes space
	- /proc/acpi/processor/../performance is available for all ACPI perflib drivers
	
	Signed-off-by: Dominik Brodowski <linux@brodo.de>
	Signed-off-by: Dave Jones <davej@redhat.com>

<davej@redhat.com>
	[CPUFREQ] arm Kconfig fixes
	
	arm cpufreq Kconfig enhancements:
	- don't force the deprecated 24_API on SA11x0 any more, as it will be removed
	  ~2005-01-01 and different interfaces have been available for a long time
	- don't mark CPU_FREQ as being EXPERIMENTAL any longer
	- re-order it in the same way other arches are ordered
	
	Signed-off-by: Dominik Brodowski <linux@brodo.de>
	Signed-off-by: Dave Jones <davej@redhat.com>

<davej@redhat.com>
	[CPUFREQ] core Kconfig fix
	
	cpufreq core Kconfig fix:
	- 24_API is a part of the userspace governor, so keep it directly below the userspace governor
	
	Signed-off-by: Dominik Brodowski <linux@brodo.de>
	Signed-off-by: Dave Jones <davej@redhat.com>

<davej@redhat.com>
	[CPUFREQ] speedstep-centrino should only decode MSR on certain CPUs
	
	The encoding of the MSR only works as described in extract_clock() on
	certain EST-enabled CPUs. So, limit the actual MSR check to these CPUs.
	
	Signed-off-by: Dominik Brodowski <linux@brodo.de>
	Signed-off-by: Dave Jones <davej@redhat.com>

<davej@redhat.com>
	[CPUFREQ] remove double calls to module_get/put in userspace governor
	
	The cpufreq core properly gets and puts the modules it calls, including
	governors. So there's no need to keep the racy in-module calls in
	cpufreq_userspace denoting otherwise.
	
	Signed-off-by: Dominik Brodowski <linux@brodo.de>
	Signed-off-by: Dave Jones <davej@redhat.com>

<davej@redhat.com>
	[CPUFREQ][1/4] cpufreq "cpu group" awareness: add policy->cpus
	
	Save the "affected_cpu_map" used in SMT-aware drivers in struct
	cpufreq_policy->(cpumask_t) cpus, and use it wherever possible. In
	most cases, the ->get() function is only allowed to run on one CPU [the
	one passed as argument] to keep code simpler, and as that code path
	isn't executed often, and only root can do it anyway.
	
	Signed-off-by: Dominik Brodowski <linux@brodo.de>
	Signed-off-by: Dave Jones <davej@redhat.com>

<davej@redhat.com>
	[CPUFREQ][2/4] cpufreq "cpu group" awareness: save sysdev for all CPUs
	
	Save a copy of each CPU's struct sys_device in drivers/cpufreq/cpufreq.c
	so that symlinks can be removed even outside the specific sys_device's
	->remove() function.
	
	Signed-off-by: Dominik Brodowski <linux@brodo.de>
	Signed-off-by: Dave Jones <davej@redhat.com>

<davej@redhat.com>
	[CPUFREQ][3/4] cpufreq "cpu group" awareness: do symlinks for other CPUs instead of registering kobjects
	
	Only register each "affected_cpu_mask" once, and do symlinks for those
	CPUs not directly registered to the driver model.
	
	Zwane Mwaikambo tested it, and here is the result:
	
	root@morocco cpu {0:0} pwd
	/sys/devices/system/cpu
	root@morocco cpu {0:0} tree
	.
	|-- cpu0
	|   |-- cpufreq
	|   |   |-- cpuinfo_cur_freq
	|   |   |-- ...
	|   |   -- scaling_setspeed
	|   -- online
	-- cpu1
	    |-- cpufreq -> ../../../../devices/system/cpu/cpu0/cpufreq
	    -- online
	
	
	Signed-off-by: Dominik Brodowski <linux@brodo.de>
	Signed-off-by: Dave Jones <davej@redhat.com>

<davej@redhat.com>
	[CPUFREQ][4/4] cpufreq "cpu group" awareness: remove FIXME in speedstep-ich
	
	Remove the FIXME in speedstep-ich.
	
	 arch/i386/kernel/cpu/cpufreq/speedstep-ich.c |    8 ++------
	 1 files changed, 2 insertions(+), 6 deletions(-)
	
	Signed-off-by: Dominik Brodowski <linux@brodo.de>
	Signed-off-by: Dave Jones <davej@redhat.com>

<greg@kroah.com>
	PCI: fix __iomem warnings in quirk code
	
	Signed-off-by: Greg Kroah-Hartman <greg@kroah.com>

<greg@kroah.com>
	kevent: standardize on the event types
	
	This prevents any potential typos from happening.
	
	Signed-off-by: Greg Kroah-Hartman <greg@kroah.com>

<greg@kroah.com>
	USB: fix hcd-pci's __iomem warnings
	
	Signed-off-by: Greg Kroah-Hartman <greg@kroah.com>

<greg@kroah.com>
	USB: fix up __iomem warnings in the ehci driver.
	
	Signed-off-by: Greg Kroah-Hartman <greg@kroah.com>

<greg@kroah.com>
	USB: fix up __iomem warnings in the ohci driver.
	  
	Signed-off-by: Greg Kroah-Hartman <greg@kroah.com>

<greg@kroah.com>
	USB: fix up some minor sparse warnings in the uhci driver.
	    
	Signed-off-by: Greg Kroah-Hartman <greg@kroah.com>

<greg@kroah.com>
	kevent: add block mount and umount support
	
	Send notification over the new netlink socket to let userspace know that
	the filesystem code claims/releases the superblock on an blockdevice.
	This way, userspace can get rid of constantly polling /proc/mounts to
	watch for filesystem changes.
	
	Signed-off-by: Kay Sievers <kay.sievers@vrfy.org>
	Signed-off-by: Greg Kroah-Hartman <greg@kroah.com>

<johnpol@2ka.mipt.ru>
	[PATCH] w1_therm: more precise temperature calculation
	
	This patch will introduce new temperature calculation mechanism which
	allows to use up to 9bit resolution(currently 3 digits after point).
	Fixed timeout issues with multiple repeated reading.
	
	Signed-off-by: Evgeniy Polyakov <johnpol@2ka.mipt.ru>
	Signed-off-by: Greg Kroah-Hartman <greg@kroah.com>

<petkov@uni-muenster.de>
	[PATCH] USB: remove calls to usb_unlink_urb in class/audio.c
	
	Signed-off-by: Borislav Petkov <petkov@uni-muenster.de>
	Signed-off-by: Greg Kroah-Hartman <greg@kroah.com>

<petkov@uni-muenster.de>
	[PATCH] USB: remove calls to usb_unlink_urb in class/bluetty.c
	
	Signed-off-by: Borislav Petkov <petkov@uni-muenster.de>
	Signed-off-by: Greg Kroah-Hartman <greg@kroah.com>

<petkov@uni-muenster.de>
	[PATCH] USB: remove calls to usb_unlink_urb in class/cdc-acm.c
	
	Signed-off-by: Borislav Petkov <petkov@uni-muenster.de>
	Signed-off-by: Greg Kroah-Hartman <greg@kroah.com>

<petkov@uni-muenster.de>
	[PATCH] USB: remove calls to usb_unlink_urb in class/usb-midi.c
	
	Signed-off-by: Borislav Petkov <petkov@uni-muenster.de>
	Signed-off-by: Greg Kroah-Hartman <greg@kroah.com>

<petkov@uni-muenster.de>
	[PATCH] USB: remove calls to usb_unlink_urb() in image/hpusbscsi.c
	
	   here's my next cleanup. I've changed the name of the goto label
	   in order to remain consistent with naming.
	
	Signed-off-by: Borislav Petkov <petkov@uni-muenster.de>
	Signed-off-by: Greg Kroah-Hartman <greg@kroah.com>

<jejb@titanic.il.steeleye.com>
	fix SPI transport attributes not showing up in sysfs
	
	There was a typo in the host patch that
	wrongly added a null into the target attributes.

<jejb@titanic.il.steeleye.com>
	add channel to struct scsi_target
	
	this may be temporary depending on how
	the channel issue is resolved for qla1280

<arjanv@redhat.com>
	[PATCH] mark scsi_add_host __must_check
	
	it seems scsi_add_host() is one of those functions that a driver really has
	to check the return value of, but several forget to do this. Patch below
	marks it __must_check which will cause a warning in this case (with gcc
	3.4 and later)..
	
	Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

<hch@lst.de>
	[PATCH] fix Scsi_Host leak in BusLogic
	
	Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

<hch@lst.de>
	[PATCH] kill useless spinlock wrappers in BusLogic
	
	Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

<hch@lst.de>
	[PATCH] remove abort,reset methods from host templates
	
	Due to the prototype changes they'd been giving warnings since before
	2.6.0 was release, it's time to finally kill them.
	
	Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

<Kai.Makisara@kolumbus.fi>
	[PATCH] avoid obsolete "scsi.h" APIs in st
	
	> Date: Tue, 14 Sep 2004 20:18:00 +0200
	> From: Christoph Hellwig <hch>
	> Subject: [PATCH] avoid obsolete "scsi.h" APIs in st
	>
	> no actual behaviour changes, just update to the less obsfucated 2.6+
	> APIs.
	>
	Looks good to me but did not link when DEBUG was set to 1: one
	print_req_sense() conversion was missed. This is corrected in the patch at
	the end of this message.
	
	Signed-off-by: Kai Makisara <kai.makisara@kolumbus.fi>
	Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

<jejb@mulgrave.(none)>
	scsi: add blacklist attribute indicating no ULD attach
	
	From: Jeremy Higdon <jeremy@sgi.com>
	
	Add blacklist attribute to disable ULD attachment to a lun, and use
	that attribute for SGI-branded Engenio UTM luns.
	
	Minor rejection fixes and
	Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

<akpm@osdl.org>
	[PATCH] add missing pci_disable_device for e1000
	
	From: Kenji Kaneshige <kaneshige.kenji@jp.fujitsu.com>
	
	This patch adds pci_disable_device() into e1000_remove().
	
	If your driver decides to stop using the device, it should call
	pci_disable_device() to deallocate any IRQ resources, disable PCI
	bus-mastering, etc.
	
	Signed-off-by: Kenji Kaneshige <kaneshige.kenji@jp.fujitsu.com>
	Signed-off-by: Andrew Morton <akpm@osdl.org>

<akpm@osdl.org>
	[PATCH] pegasus.c fixes
	
	drivers/usb/net/pegasus.c: In function `pegasus_set_settings':
	drivers/usb/net/pegasus.c:961: warning: passing arg 2 of `mii_ethtool_sset' from incompatible pointer type
	drivers/usb/net/pegasus.c: In function `pegasus_get_msglevel':
	drivers/usb/net/pegasus.c:978: warning: unused variable `pegasus'
	drivers/usb/net/pegasus.c: In function `pegasus_set_msglevel':
	drivers/usb/net/pegasus.c:985: warning: unused variable `pegasus'
	
	Signed-off-by: Andrew Morton <akpm@osdl.org>

<ganesh.venkatesan@intel.com>
	[PATCH] e100 - Use pci_device_name for syslog messages till registering netdevice

<ganesh.venkatesan@intel.com>
	[PATCH] e100 - use NET_IP_ALIGN to set rx data buffer alignment

<ganesh.venkatesan@intel.com>
	[PATCH] e100 driver version number update

<ganesh.venkatesan@intel.com>
	[PATCH] e1000 - use pci_device_name for syslog messages till
	registering netdevice.

<ganesh.venkatesan@intel.com>
	[PATCH] e1000 - Removed support for advanced TCO features

<ganesh.venkatesan@intel.com>
	[PATCH] e1000 Check value returned by from pci_enable_device

<ganesh.venkatesan@intel.com>
	[PATCH] e1000 - Fix VLAN filter setup errors (while running on PPC)

<ganesh.venkatesan@intel.com>
	[PATCH] e1000 - Polarity reversal workaround for 10F/10H links

<ganesh.venkatesan@intel.com>
	[PATCH] e1000 - Ethtool -- 82545 do not support WoL

<jolt@tuxbox.org>
	[netdrvr b44] ignore carrier lost errors
	
	some (?) hardware seems to be buggy and is reporting bogus carrier lost 
	values. Both reference implementations from Broadcom indicate that this 
	counter is not reliable and therefore ignore it. We should do the same. 
	"Fixes" the carrier lost problem i've seen.
	
	Signed-off-by: Florian Schirmer <jolt@tuxbox.org>

<jolt@tuxbox.org>
	[netdrvr b44] clean up SiliconBackplane definitions/functions
	
	there is a good amount of code to support SiliconBackplane functions which are unneeded or simply plain wrong. Lets get rid of it.
	
	Signed-off-by: Florian Schirmer <jolt@tuxbox.org>

<jgarzik@pobox.com>
	[netdrvr b44] update MODULE_AUTHORS
	
	As prodded by David Miller.

<pp@ee.oulu.fi>
	[PATCH] b44: use bounce buffers to workaround chip DMA bug/limitations
	
	Signed-off-by: Pekka Pietikainen <pp@ee.oulu.fi>

<jejb@mulgrave.(none)>
	scsi: add proper pci id table to aic7xxx
	
	From: Andi Kleen <ak@suse.de>
	
	Patch updated by: Christoph Hellwig <hch@infradead.org>
	
	Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

<markh@osdl.org>
	[PATCH] 2.6.9 aacraid: aac_count fix
	
	Changed the managing of aac device structures to a linked list so that
	there is no limit to how many adapters can be configured.  Also, put the
	call to scsi_add_host earlier in the probe function, before devices are
	accessed.
	
	Signed-off-by: Mark Haverkamp <markh@osdl.org>
	Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

<jbarnes@engr.sgi.com>
	[PATCH] SCSI QLA not working on latest *-mm SN2
	
	On Thursday, September 16, 2004 1:56 pm, Andrew Vasquez wrote:
	> On Thu, 2004-09-16 at 13:05, Jesse Barnes wrote:
	> > On Thursday, September 16, 2004 12:56 pm, Paul Jackson wrote:
	> > > Andrew Vasquez has been looking at this, via private email with just
	> > > me (no progress yet).  Figured I update the larger list with this much
	> > > ...
	> >
	> > It seems to be failing on one of the accesses to PCI_COMMAND in config
	> > space in qla2x00_reset_chip().  I'm checking now to see if we're
	> > accessing the card right after a reset but before the card has finished.
	> > That would cause a master abort, the symptom I'm seeing at least.
	>
	> Interesting, the only changes in reset_chip() are for PCI posting
	> issues.  Relevant diff attached.
	
	Yeah, I think one of these is the culprit.  Before I got your message, I fixed
	some of them in my tree already (see attached) and things seem to work.
	
	        WRT_REG_WORD(&reg->hccr, HCCR_CLR_RISC_INT);
	+       RD_REG_WORD(&reg->hccr);                        /* PCI Posting. */
	        WRT_REG_WORD(&reg->hccr, HCCR_CLR_HOST_INT);
	+       RD_REG_WORD(&reg->hccr);                        /* PCI Posting. */
	
	        /* Reset ISP chip. */
	        WRT_REG_WORD(&reg->ctrl_status, CSR_ISP_SOFT_RESET);
	+       RD_REG_WORD(&reg->ctrl_status);                 /* PCI Posting. */
	
	In particular, are the above ok?  If the chip is resetting, won't doing a read
	cause a machine check (or at the very least, a device select timeout, which
	will return all ones on friendlier platforms).
	
	        WRT_REG_WORD(&reg->ctrl_status, CSR_ISP_SOFT_RESET);
	+       RD_REG_WORD(&reg->ctrl_status);                 /* PCI Posting. */
	
	Same here?
	
	Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

<andrew.vasquez@qlogic.com>
	[PATCH] SCSI QLA not working on latest *-mm SN2 (qla_dbg fixes)
	
	On Thu, 2004-09-16 at 14:09, Jesse Barnes wrote:
	> On Thursday, September 16, 2004 1:56 pm, Andrew Vasquez wrote:
	> > On Thu, 2004-09-16 at 13:05, Jesse Barnes wrote:
	> > > On Thursday, September 16, 2004 12:56 pm, Paul Jackson wrote:
	> > > > Andrew Vasquez has been looking at this, via private email with just
	> > > > me (no progress yet).  Figured I update the larger list with this much
	> > > > ...
	> > >
	> > > It seems to be failing on one of the accesses to PCI_COMMAND in config
	> > > space in qla2x00_reset_chip().  I'm checking now to see if we're
	> > > accessing the card right after a reset but before the card has finished.
	> > > That would cause a master abort, the symptom I'm seeing at least.
	> >
	> > Interesting, the only changes in reset_chip() are for PCI posting
	> > issues.  Relevant diff attached.
	>
	> Yeah, I think one of these is the culprit.  Before I got your message, I fixed
	> some of them in my tree already (see attached) and things seem to work.
	>
	
	Hmm, seems we were a bit too over-aggressive in placement of the
	readw()s :(
	
	>         WRT_REG_WORD(&reg->hccr, HCCR_CLR_RISC_INT);
	> +       RD_REG_WORD(&reg->hccr);                        /* PCI Posting. */
	>         WRT_REG_WORD(&reg->hccr, HCCR_CLR_HOST_INT);
	> +       RD_REG_WORD(&reg->hccr);                        /* PCI Posting. */
	>
	>         /* Reset ISP chip. */
	>         WRT_REG_WORD(&reg->ctrl_status, CSR_ISP_SOFT_RESET);
	> +       RD_REG_WORD(&reg->ctrl_status);                 /* PCI Posting. */
	>
	> In particular, are the above ok?  If the chip is resetting, won't doing a read
	> cause a machine check (or at the very least, a device select timeout, which
	> will return all ones on friendlier platforms).
	>
	
	There are several more which deltas in qla_dbg.c which are suspect
	also.
	
	>         WRT_REG_WORD(&reg->ctrl_status, CSR_ISP_SOFT_RESET);
	> +       RD_REG_WORD(&reg->ctrl_status);                 /* PCI Posting. */
	>
	> Same here?
	>
	
	Andrew, please add Jesse's patch along with the patch I'm attaching to
	your tree.  I'll be sure to add the ia64 machine back into our test
	ring.
	
	
	Signed-off-by: Andrew Vasquez <andrew.vasquez@qlogic.com>
	Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

<jejb@mulgrave.(none)>
	some ncr53c8xx decrufting
	
	From: Christoph Hellwig <hch@lst.de>
	
	kills lots of BSD glue and procfs mess
	
	Acked by: Matthew Wilcox <willy@debian.org>
	Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

<jejb@mulgrave.(none)>
	scsi: Add reset ioctl capability to ULDs
	
	Currently, the only way to issue a SCSI reset of any
	type is to use the sg device.  By adding extra ioctls
	to scsi_ioctl.c we enable this for all ULDs.
	
	The slight complication is that scsi_ioctl() is usually
	only called when the device has been checked not to be
	undergoing eh recovery.  Resets may be issued in
	this scenario if the user opens the device O_NONBLOCK.
	
	Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

<shemminger@osdl.org>
	[PATCH] (1/4) acenic - use netdev_priv
	
	Trivial, use netdev_priv
	
	Signed-off-by: Stephen Hemminger <shemminger@osdl.org>

<shemminger@osdl.org>
	[PATCH] (2/4) acenic - eliminate MAX_SKB_FRAGS #if
	
	Since MAX_SKB_FRAGS is defined in both 2.4 and 2.6, it makes sense
	to eliminate this old #if code.
	
	Signed-off-by: Stephen Hemminger <shemminger@osdl.org>

<shemminger@osdl.org>
	[PATCH] (3/4) acenic - __iomem warnings cleanup
	
	This cleans all the compile warnings and most of the sparse warnings
	for the acenic driver relating to io memory space.
	Remaining warnings are because tx_ring can be either in i/o or not
	depending on the version of the card.
	Not tested on old TIGON card.
	
	Signed-off-by: Stephen Hemminger <shemminger@osdl.org>

<shemminger@osdl.org>
	[PATCH] (4/4) acenic - don't spin forever in hard_start_xmit
	
	If driver is stuck due to ring full and hardware or link error, don't spin
	forever in the hard_start_xmit routine.
	
	Signed-off-by: Stephen Hemminger <shemminger@osdl.org>

<pavel@ucw.cz>
	[PATCH] swsuspend for ne2k-pci cards
	
	Author: ric Brunet <Eric.Brunet@lps.ens.fr>

<webvenza@libero.it>
	[netdrvr sis900] whitespace and codingstyle updates
	
	Big patch, but only contains whitespace and CodingStyle fixes to make
	the whole sis900.c file uniform. Some >80 lines where too difficult to
	split, so I let them alone, readability would be just as bad as is now.
	
	This patch depends on the previous one liner that adds the new PHY ID
	and is made against kernel 2.6.8 (as the previous).
	
	This patch is also available at: http://teg.homeunix.org/sis900.html

<romieu@fr.zoreil.com>
	[PATCH] via-velocity: wrong module name in Kconfig documentation
	
	Copy/paste abuse.

<ralf@linux-mips.org>
	[PATCH] Stop queue on close in hdlcdrv
	
	The stop method of a driver should ensure queueing is stopped ...

<hch@lst.de>
	[PATCH] move scsi_add_host back to where it belongs in aacraid
	
	looks like you applied a premature version of the last aacraid patch.
	This one moves the scsi_add_host back so it's not called before the
	driver is ready to accept queued commands.
	
	Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

<hch@lst.de>
	[PATCH] don't mark aacraid as experimental
	
	Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

<James.Smart@Emulex.Com>
	[PATCH] Allow LLDD's to fail slave alloc (non-existent slave)
	
	In the cases where an LLDD knows that a lun does not exist, if it
	fails slave_alloc(), the midlayer reports an error message indicating
	slave_alloc failed.
	
	This patch allows the LLDD to reject the slave_alloc() call if it
	knows the lun doesn't exist, and skips the reporting of the
	slave_alloc failure message. This avoids jumping through hoops in the
	LLDD to avoid error messages from slave_alloc. Also saves cycles in
	that the probe is also cancelled for the non-existent device.
	
	Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

<petkov@uni-muenster.de>
	[PATCH] USB: remove call to usb_unlink_urb() in media/usbvideo.c
	
	Signed-off-by: Borislav Petkov <petkov@uni-muenster.de>
	Signed-off-by: Greg Kroah-Hartman <greg@kroah.com>

<petkov@uni-muenster.de>
	[PATCH] USB: remove calls to usb_unlink_urb in media/stv680.c
	
	Signed-off-by: Borislav Petkov <petkov@uni-muenster.de>
	Signed-off-by: Greg Kroah-Hartman <greg@kroah.com>

<petkov@uni-muenster.de>
	[PATCH] USB: remove calls to usb_unlink_urb in media/se401.c
	
	Signed-off-by: Borislav Petkov <petkov@uni-muenster.de>
	Signed-off-by: Greg Kroah-Hartman <greg@kroah.com>

<petkov@uni-muenster.de>
	[PATCH] USB: remove call to usb_unlink_urb in media/ov511.c
	
	Signed-off-by: Borislav Petkov <petkov@uni-muenster.de>
	Signed-off-by: Greg Kroah-Hartman <greg@kroah.com>

<petkov@uni-muenster.de>
	[PATCH] USB: remove calls to usb_unlink_urb in media/konicawc.c
	
	   since usb_kill_urb is a void function, the checking of the return status
	   had to go too.
	
	Signed-off-by: Borislav Petkov <petkov@uni-muenster.de>
	Signed-off-by: Greg Kroah-Hartman <greg@kroah.com>

<petkov@uni-muenster.de>
	[PATCH] USB: remove calls to usb_unlink_urb in input/xpad.c
	
	Signed-off-by: Borislav Petkov <petkov@uni-muenster.de>
	Signed-off-by: Greg Kroah-Hartman <greg@kroah.com>

<petkov@uni-muenster.de>
	[PATCH] USB: usb_unlink_urb removal from input/ati_remote.c
	
	Signed-off-by: Borislav Petkov <petkov@uni-muenster.de>
	Signed-off-by: Greg Kroah-Hartman <greg@kroah.com>

<petkov@uni-muenster.de>
	[PATCH] USB: remove calls to usb_unlink_urb in input/wacom.c
	
	Signed-off-by: Borislav Petkov <petkov@uni-muenster.de>
	Signed-off-by: Greg Kroah-Hartman <greg@kroah.com>

<petkov@uni-muenster.de>
	[PATCH] USB: remove calls to usb_unlink_urb in input/usbmouse.c
	
	Signed-off-by: Borislav Petkov <petkov@uni-muenster.de>
	Signed-off-by: Greg Kroah-Hartman <greg@kroah.com>

<petkov@uni-muenster.de>
	[PATCH] USB: remove calls to usb_unlink_urb in core/message.c
	
	Signed-off-by: Borislav Petkov <petkov@uni-muenster.de>
	Signed-off-by: Greg Kroah-Hartman <greg@kroah.com>

<petkov@uni-muenster.de>
	[PATCH] USB: remove usb_unlink_urb() calls in input/kbtab.c
	
	Signed-off-by: Borislav Petkov <petkov@uni-muenster.de>
	Signed-off-by: Greg Kroah-Hartman <greg@kroah.com>

<petkov@uni-muenster.de>
	[PATCH] USB: usb_unlink_urb removal from input/hid-core.c
	
	Signed-off-by: Borislav Petkov <petkov@uni-muenster.de>
	Signed-off-by: Greg Kroah-Hartman <greg@kroah.com>

<petkov@uni-muenster.de>
	[PATCH] USB: remove calls to usb_unlink_urb in input/mtouchusb.c
	
	Signed-off-by: Borislav Petkov <petkov@uni-muenster.de>
	Signed-off-by: Greg Kroah-Hartman <greg@kroah.com>

<petkov@uni-muenster.de>
	[PATCH] USB: usb_unlink_urb removal from input/aiptek.c
	
	Signed-off-by: Borislav Petkov <petkov@uni-muenster.de>
	Signed-off-by: Greg Kroah-Hartman <greg@kroah.com>

<petkov@uni-muenster.de>
	[PATCH] USB: remove calls to usb_unlink_urb in input/usbkbd.c
	
	Signed-off-by: Borislav Petkov <petkov@uni-muenster.de>
	Signed-off-by: Greg Kroah-Hartman <greg@kroah.com>

<petkov@uni-muenster.de>
	[PATCH] USB: remove calls to usb_unlink_urb() in input/pid.c
	
	Signed-off-by: Borislav Petkov <petkov@uni-muenster.de>
	Signed-off-by: Greg Kroah-Hartman <greg@kroah.com>

<petkov@uni-muenster.de>
	[PATCH] USB: remove calls to usb_unlink_urb in image/mdc800.c (v2)
	
	Signed-off-by: Borislav Petkov <petkov@uni-muenster.de>
	Signed-off-by: Greg Kroah-Hartman <greg@kroah.com>

<petkov@uni-muenster.de>
	[PATCH] USB: remove calls to usb_unlink_urb in input/powermate.c
	
	Signed-off-by: Borislav Petkov <petkov@uni-muenster.de>
	Signed-off-by: Greg Kroah-Hartman <greg@kroah.com>

<petkov@uni-muenster.de>
	[PATCH] USB: remove calls to usb_unlink_urb() in input/touchkitusb.c
	
	Signed-off-by: Borislav Petkov <petkov@uni-muenster.de>
	Signed-off-by: Greg Kroah-Hartman <greg@kroah.com>

<greg@kroah.com>
	[PATCH] USB:  oops, revert drivers/usb/core/message.c change.
	
	That patch was just not right...
	
	Signed-off-by: Greg Kroah-Hartman <greg@kroah.com>

<baldrick@free.fr>
	[PATCH] usb speedtch: no side-effects in BUG_ON
	
	It seems that people want BUG_ON to be like an assertion: harmless if removed.
	
	Signed-off-by: Duncan Sands <baldrick@free.fr>
	Signed-off-by: Greg Kroah-Hartman <greg@kroah.com>

<baldrick@free.fr>
	[PATCH] usb speedtch: convert to using usb_kill_urb
	
	Unlike usb_unlink_urb, usb_kill_urb guarantees that completion handlers have
	finished running before it returns.  The bunch of disconnect code that waited
	for completion handlers can now go away.
	
	Signed-off-by: Duncan Sands <baldrick@free.fr>
	Signed-off-by: Greg Kroah-Hartman <greg@kroah.com>

<hch@lst.de>
	[PATCH] switch fusion to use <linux/list.h> everywhere
	
	Acked By: Moore, Eric Dean <emoore@lsil.com>
	Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

<greg@kroah.com>
	USB: fix incorrect usage of usb_kill_urb in rtl8150 driver.
	
	Signed-off-by: Greg Kroah-Hartman <greg@kroah.com>

<vojtech@suse.cz>
	[PATCH] USB: Fix oops in usblp driver
	
	This bug was reported back in July, and I sent out a patch but apparently
	it never got to you.  The usblp driver was calling usb_buffer_free() from
	usblp_cleanup(), which runs after disconnect() if a user process holds the
	device open.  But once the usb_device is gone usb_buffer_free() will
	oops.  The patch frees the buffers in usb_disconnect() instead.
	
	Recently Joost Witteveen reported the same oops and found that the
	patch solved it for him.  So there shouldn't be problems with accepting
	it.
	
	
	Signed-off-by: Alan Stern <stern@rowland.harvard.edu>
	Signed-off-by: Vojtech Pavlik <vojtech@suse.cz>
	Signed-off-by: Greg Kroah-Hartman <greg@kroah.com>

<david-b@pacbell.net>
	[PATCH] USB: net2280 updates
	
	Net2280 patches to:
	
	  - Make reset logic ensure endpoint toggle and halt bits only get cleared
	    on endpoints other than ep0 to fix an extremely unlikely (but possible)
	    state when a setup packet come in after we've checked the reset status
	    but before calling ep_reset().
	
	  - Avoid a disconnect hang by exchanging SUSPEND_IMMEDIATELY (intended for
	    use when the 8051 is the PCI host) with SUSPEND_REQUEST_INTERRUPT to
	    suspend the NET2280.
	
	  - Make rmmod of gadget drivers trigger disconnect; earlier changes to
	    reset logic broke this.
	
	Signed-off-by: Alex Sanks <alex@netchip.com>
	Signed-off-by: David Brownell <dbrownell@users.sourceforge.net>
	Signed-off-by: Greg Kroah-Hartman <greg@kroah.com>

<david-b@pacbell.net>
	[PATCH] USB: host side fixes for pxa2xx/ethernet/rndis gadgets, like gumstix
	
	This fixes an interop glitch with PXA gadgets; please merge.
	
	
	This resolves an issue that's more or less specific to hosts trying to
	talk pxa255 based Linux devices using the Ethernet/RNDIS gadget driver.
	
	  - Teaches "usbnet" about the product ID used by pxa255 based devices
	    when they enable RNDIS, since it won't be using CDC Ethernet.
	
	  - Forces usbcore config selection code to use non-RNDIS configurations,
	    even when their class is vendor-specific (as in the pxa255 case).
	
	This makes gumstix devices, for example, talk with Linux 2.6.9 hosts
	AND with Windows ... previously only one would work.
	
	From: Craig Hughes <craig@gumstix.com>
	Signed-off-by: David Brownell <dbrownell@users.sourceforge.net>
	Signed-off-by: Greg Kroah-Hartman <greg@kroah.com>

<stern@rowland.harvard.edu>
	[PATCH] USB: Support system suspend in File-Storage Gadget
	
	This patch adds support for system-wide suspend to the File-Storage
	Gadget.  Please apply.
	
	
	
	
	Signed-off-by: Alan Stern <stern@rowland.harvard.edu>
	Signed-off-by: Greg Kroah-Hartman <greg@kroah.com>

<stern@rowland.harvard.edu>
	[PATCH] USB: Suspend update for dummy_hcd
	
	This patch fixes a few minor errors in the port suspend/resume handling
	code of the dummy_hcd driver.  There are a couple of other small changes
	too, such as removing a BUG_ON().  Please apply.
	
	
	Signed-off-by: Alan Stern <stern@rowland.harvard.edu>
	Signed-off-by: Greg Kroah-Hartman <greg@kroah.com>

<stern@rowland.harvard.edu>
	[PATCH] USB: Activate new hubs and resumed hubs the same way
	
	This patch makes the newly-probed hub pathway, the hub reset pathway, and
	the resumed hub pathway all use the same routine for activating the hub
	and scanning for port change events as soon as possible.  It's a modified
	version of something originally written by David Brownell, updated to
	match the current source.  Please apply.
	
	
	Signed-off-by: David Brownell <dbrownell@users.sourceforge.net>
	Signed-off-by: Alan Stern <stern@rowland.harvard.edu>
	Signed-off-by: Greg Kroah-Hartman <greg@kroah.com>

<dhollis@davehollis.com>
	[PATCH] USB: Add Surecom USB Ethernet device ids to usbnet
	
	Add Surecom EP-1427X-2 device ids.
	
	
	Signed-off-by: David Hollis <dhollis@davehollis.com>
	Signed-off-by: Greg Kroah-Hartman <greg@kroah.com>

<stern@rowland.harvard.edu>
	[PATCH] USB: Use list_for_each_entry etc. in UHCI driver
	
	This patch was developed largely by Domen Puncer.  It makes the code in
	the UHCI driver more readable by utilizing list_for_each_entry and related
	macros.  I merely made a couple of very small stylistic changes and
	converted one additional hunk of code.
	
	
	Signed-off-by: Domen Puncer <domen@coderock.org>
	Signed-off-by: Alan Stern <stern@rowland.harvard.edu>
	Signed-off-by: Greg Kroah-Hartman <greg@kroah.com>

<stern@rowland.harvard.edu>
	[PATCH] USB: Fix data toggle handling in the UHCI driver
	
	This patch fixes an error in the way the UHCI driver computes data-toggle
	updates when unlinking a bulk or interrupt URB that hasn't transferred any
	data.  Thanks to Thierry Chantry for finding this bug and testing the
	patch.
	
	
	
	Signed-off-by: Alan Stern <stern@rowland.harvard.edu>
	Signed-off-by: Greg Kroah-Hartman <greg@kroah.com>

<mhoffman@lightlink.com>
	[PATCH] i2c: Add Intel VRD 10.0 and AMD Opteron VID support
	
	This patch adds support for Intel VRD 10.0 and AMD Opteron VID calculations.
	It is based on the lm_sensors project CVS, r1.6.
	
	Signed-off-by: Mark M. Hoffman <mhoffman@lightlink.com>
	Signed-off-by: Greg Kroah-Hartman <greg@kroah.com>

<khali@linux-fr.org>
	[PATCH] I2C: Cleanup lm78 init
	
	This patch cleans the init part of the lm78 driver.
	
	* Do not reset the chip.
	
	* Get rid of useless code, which was accidentally left in when we
	removed the limit initialization from the driver.
	
	* Do not enable monitoring if it is already enabled (it wouldn't hurt,
	but since we can avoid it at no cost...)
	
	Similar changes were applied to the Linux 2.4 driver, which I
	successfully tested on my own LM78 chip.
	
	Signed-off-by: Jean Delvare <khali@linux-fr.org>
	Signed-off-by: Greg Kroah-Hartman <greg@kroah.com>

<nacc@us.ibm.com>
	[PATCH] i2c/i2c-mpc: replace schedule_timeout() with msleep_interruptible()
	
	Properly orders set_current_state() and add_wait_queue().  Uses
	msleep_interruptible() in place of schedule_timeout() to guarantee the
	task delays as expected. Uses set_current_state() instead of direct
	assignment of current->state.
	
	Signed-off-by: Nishanth Aravamudan <nacc@us.ibm.com>
	Signed-off-by: Greg Kroah-Hartman <greg@kroah.com>

<perex@suse.cz>
	[ALSA]  Fix the OSS PCM emulation - O_NONBLOCK write
	
	ALSA<-OSS emulation
	This patch fixes the OSS PCM write() in O_NONBLOCK mode.
	The previous code had not returned partial written bytes.
	
	Signed-off-by: Jaroslav Kysela <perex@suse.cz>

<perex@suse.cz>
	[ALSA]  Added support for AudioTrak Prodigy 192 cards
	
	ICE1712 driver,ICE1724 driver
	
	
	Signed-off-by: Kouichi ONO <co2b@ceres.dti.ne.jp>
	Signed-off-by: Jaroslav Kysela <perex@suse.cz>

<perex@suse.cz>
	[ALSA]  add UA-1000 sample rate detection
	
	USB generic driver
	Instead of assuming 48 kHz, the driver now detects
	the current sample rate setting.
	
	Signed-off-by: Clemens Ladisch <clemens@ladisch.de>

<perex@suse.cz>
	[ALSA]  mark snd_card_dummy_new_mixer() as static
	
	Generic drivers
	
	
	Signed-off-by: Jaroslav Kysela <perex@suse.cz>

<perex@suse.cz>
	[ALSA]  [ac97 core] added AC97_SCAP_DETECT_BY_VENDOR flag
	
	AC97 Codec Core,Intel8x0 driver
	This patch adds a AC97_SCAP_DETECT_BY_VENDOR flag for Xbox. If the flag
	is set, the AC97 codec is detected only by reading of a reasonable
	vendor ID. It seems that Xbox has accessible only vendor/device ID
	registers for reading. Also, a new xbox parameter for snd-intel8x0
	has been introduced to let user force this behaviour.
	
	Signed-off-by: Jaroslav Kysela <perex@suse.cz>

<perex@suse.cz>
	[ALSA]  copy_to_user() return value checking in snd_seq_read()
	
	ALSA sequencer
	Here's a patch that ensures the copy_to_user() return value gets checked
	and acted upon if it is != 0 (that is, if we failed to copy all data) in
	snd_seq_read().
	
	Signed-off-by: Jesper Juhl <juhl-lkml@dif.dk>
	Signed-off-by: Jaroslav Kysela <perex@suse.cz>

<perex@suse.cz>
	[ALSA]  Added missing header file for AudioTrak Prodigy 192 cards
	
	ICE1712 driver
	
	
	Signed-off-by: Kouichi ONO <co2b@ceres.dti.ne.jp>
	Signed-off-by: Jaroslav Kysela <perex@suse.cz>

<perex@suse.cz>
	[ALSA]  Fix driver name for nforce and clean-up
	
	Intel8x0-modem driver
	Driver name is always ICH-MODEM as defined in alsa-lib config.
	Cosmetic cleanups: unused include files, MODULE_DEVICE update.
	
	Signed-off-by: Sasha Khapyorsky <sashak@smlink.com>
	Signed-off-by: Takashi Iwai <tiwai@suse.de>

<perex@suse.cz>
	[ALSA]  show codec name in card description
	
	AC97 Codec Core,ATIIXP driver,Intel8x0 driver,VIA82xx driver
	Include the AC97 codec name in the card longname of
	motherboard controllers.
	(to enhance the chance of getting useful bug reports :)
	
	Signed-off-by: Clemens Ladisch <clemens@ladisch.de>

<perex@suse.cz>
	[ALSA]  adjust intel8x0 joystick documentation
	
	Documentation
	
	
	Signed-off-by: Clemens Ladisch <clemens@ladisch.de>

<perex@suse.cz>
	[ALSA]  enhance Kconfig help texts
	
	ARM,ALSA Core,Generic drivers,ISA,PARISC,PCI drivers,PCMCIA Kconfig,PPC
	USB
	add module names and references to other documentation files
	add more help for generic options
	
	Signed-off-by: Clemens Ladisch <clemens@ladisch.de>

<perex@suse.cz>
	[ALSA]  remove 'ALSA' from Kconfig USB menu name
	
	USB
	make ISA, PCI and USB device look the same in {q,x,menu}config
	
	Signed-off-by: Thierry Vignaud <tvignaud@mandrakesoft.com>
	Signed-off-by: Clemens Ladisch <clemens@ladisch.de>

<perex@suse.cz>
	[ALSA]  fix ALI M5451 description
	
	PCI drivers
	modify ali5451 and intel8x0 help texts to better distinguish
	between M5451 and M5455 AC97 controllers
	
	Signed-off-by: Clemens Ladisch <clemens@ladisch.de>

<perex@suse.cz>
	[ALSA]  Fixes for PCM/control 32bit emulation
	
	PCM Midlevel,IOCTL32 emulation
	- Size mismatch of control element struct due to packed attribute
	  is removed.
	- A typo in PCM syncptr definition is fixed.
	- Suppress the mmap of PCM status/control records on 32bit emulation
	  mode since the record size doesn't match.
	
	Signed-off-by: Takashi Iwai <tiwai@suse.de>

<perex@suse.cz>
	[ALSA]  Support for capture of 16,32,64 channels on emu10k1 device 2
	
	EMU10K1/EMU10K2 driver
	This patch changes default constraint on 'EFX voices mask' control and
	allow capture of 1, 2, 4, 8, 16, 32, 64 channels instead of 1, 2, 4, 8.
	
	Signed-off-by: Peter Zubaj <pzad@pobox.sk>
	Signed-off-by: Takashi Iwai <tiwai@suse.de>

<perex@suse.cz>
	[ALSA]  Remove delay() to improve latency
	
	ES1968 driver
	- Removed mdelay() in ac97 codec handling.
	- Improved the clock measurement routine to allow the longer sleep time.
	  Now it invokes schedule_timeout() instead of a long mdelay().
	
	Signed-off-by: Takashi Iwai <tiwai@suse.de>

<perex@suse.cz>
	[ALSA]  Improved clock measurement
	
	Intel8x0 driver
	Improved the clock measurement routine to allow the longer sleep time.
	Now it invokes schedule_timeout() instead of a long mdelay().
	
	Signed-off-by: Takashi Iwai <tiwai@suse.de>

<perex@suse.cz>
	[ALSA]  Fixed the obsolete description in comments
	
	IOCTL32 emulation
	
	
	Signed-off-by: Takashi Iwai <tiwai@suse.de>

<perex@suse.cz>
	[ALSA]  Fix auto-loading of sequencer modules
	
	ALSA sequencer
	Allow auto-loading of sequencer modules except for module init time
	(which may cause blocking).
	
	Signed-off-by: Takashi Iwai <tiwai@suse.de>

<perex@suse.cz>
	[ALSA]  Fix iomem variable type
	
	Documentation,ALSA Core,MPU401 UART,OPL3,CS46xx driver,YMFPCI driver
	ATIIXP driver,ATIIXP-modem driver,CS4281 driver,Intel8x0 driver
	Intel8x0-modem driver,RME32 driver,RME96 driver,au88x0 driver
	KORG1212 driver,MIXART driver,NM256 driver,RME HDSP driver
	RME9652 driver,PPC Tumbler driver
	The type of iomem variables is changed to void __iomem *.
	
	Signed-off-by: Takashi Iwai <tiwai@suse.de>

<perex@suse.cz>
	[ALSA]  Added support of Mediastation
	
	ICE1712 driver
	The support for Lionstracs Mediastation is added.
	The model name is 'mediastation'.
	
	Signed-off-by: Takashi Iwai <tiwai@suse.de>

<perex@suse.cz>
	[ALSA]  rme32 segfault fix
	
	RME32 driver
	- disables buffer prefill in halfduplex mode, which fixes segmentation fault
	  of rme32 for playback in halfduplex mode
	
	Signed-Off-By: Martin Langer <martin-langer@gmx.de>
	
	Signed-off-by: Takashi Iwai <tiwai@suse.de>

<perex@suse.cz>
	[ALSA]  [hdsp] Fix for 64bit architectures
	
	RME HDSP driver
	Fixed the loading of firmware data and the handling of meter mmap
	on 64bit architectures.
	
	Signed-off-by: Takashi Iwai <tiwai@suse.de>

<perex@suse.cz>
	[ALSA]  Fix SPDIF rate setting for old ICHs
	
	Intel8x0 driver
	Force to set SPDIF rate when PCMOUT is used on ICH[1-3].
	ICH4, NFORCE and ALI uses a separate DMA for SPDIF.
	
	Signed-off-by: Takashi Iwai <tiwai@suse.de>

<perex@suse.cz>
	[ALSA]  use card-specific driver name
	
	au88x0 driver
	use CARD_NAME_SHORT as driver name to allow different configuration file aliases in alsa-lib
	
	Signed-off-by: Clemens Ladisch <clemens@ladisch.de>

<perex@suse.cz>
	[ALSA]  remove 'Rawmidi' part from sequencer port names
	
	ALSA sequencer
	
	
	Signed-off-by: Clemens Ladisch <clemens@ladisch.de>

<perex@suse.cz>
	[ALSA]  don't stop capture on errors
	
	BT87x driver
	don't stop capture on errors because there's too much broken hardware out there
	
	Signed-off-by: Clemens Ladisch <clemens@ladisch.de>

<greg@kroah.com>
	[PATCH] Put symbolic links between drivers and modules in the sysfs tree
	
	This functionality is essential for us to work out which drivers are
	supplied by which modules.  We use this in turn to work out which
	modules are necessary to find the root device (and hence what
	initrd/initramfs needs to insert).
	
	If you look at debian at the moment, it uses a huge mapping table on
	/proc/scsi/* to do this.  If we implement the sysfs feature, we can
	simply go from /sys/block/<device> to the actual device to the driver
	and then to the module with no need of any fixed tables.
	
	Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>
	Signed-off-by: Greg Kroah-Hartman <greg@kroah.com>

<greg@kroah.com>
	[PATCH] USB: add support for symlink from usb and usb-serial driver to its module in sysfs
	
	Signed-off-by: Greg Kroah-Hartman <greg@kroah.com>

<greg@kroah.com>
	[PATCH] PCI: add "struct module *" to struct pci_driver to show symlink in sysfs for pci drivers.
	
	Signed-off-by: Greg Kroah-Hartman <greg@kroah.com>

<jejb@mulgrave.(none)>
	remove old ifdefs aic79xx
	
	From: janitor@sternwelten.at
	
	 Patches to remove some old ifdefs.
	 remove most of the #include <linux/version.h>
	 kill compat cruft like #define ahd_pci_set_dma_mask pci_set_dma_mask
	
	Signed-off-by: Maximilian Attems <janitor@sternwelten.at>
	Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

<jejb@mulgrave.(none)>
	remove old ifdefs aic7xxx
	
	From: janitor@sternwelten.at
	
	 Patches to remove some old ifdefs.
	 remove most of the #include <linux/version.h>
	 kill compat cruft like #define ahd_pci_set_dma_mask pci_set_dma_mask
	
	Signed-off-by: Maximilian Attems <janitor@sternwelten.at>
	Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

<James.Bottomley@steeleye.com>
	[PATCH] add .module to qla1280 template
	
	This was missing.  It needs to be added so the module tracking actually
	works correctly for the driver.
	
	Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

<jejb@mulgrave.(none)>
	complete the bus_addr_t removal from aic7xxx
	
	Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

<akpm@osdl.org>
	[PATCH] QLogic ISP2x00: remove needless busyloop
	
	From: Bjorn Helgaas <bjorn.helgaas@hp.com>
	
	There's no need to wait for an isp2x00 to recognize a fabric if there's no
	isp2x00.  Probably nobody will notice the unnecessary slowdown on real
	hardware, but it's a significant delay on a simulator.
	
	Signed-off-by: Bjorn Helgaas <bjorn.helgaas@hp.com>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

<mochel@digitalimplant.org>
	[driver model] Change symbol exports to GPL only in drivers/base/bus.c.
	
	Signed-off-by: Patrick Mochel <mochel@digitalimplant.org>
	Signed-off-by: Greg Kroah-Hartman <greg@kroah.com>

<mochel@digitalimplant.org>
	[driver model] Change sybmols exports to GPL only in class.c
	
	Signed-off-by: Patrick Mochel <mochel@digitalimplant.org>
	Signed-off-by: Greg Kroah-Hartman <greg@kroah.com>

<mochel@digitalimplant.org>
	[driver model] Change symbol exports to GPL only in core.c
	
	Signed-off-by: Patrick Mochel <mochel@digitalimplant.org>
	Signed-off-by: Greg Kroah-Hartman <greg@kroah.com>

<mochel@digitalimplant.org>
	[driver model] Change symbol exports to GPL only in driver.c
	
	Signed-off-by: Patrick Mochel <mochel@digitalimplant.org>
	Signed-off-by: Greg Kroah-Hartman <greg@kroah.com>

<mochel@digitalimplant.org>
	[driver model] Change symbol exports to GPL only in firmware.c
	
	Signed-off-by: Patrick Mochel <mochel@digitalimplant.org>
	Signed-off-by: Greg Kroah-Hartman <greg@kroah.com>

<mochel@digitalimplant.org>
	[driver model] Change symbol exports to GPL only in platform.c.
	
	Signed-off-by: Patrick Mochel <mochel@digitalimplant.org>
	Signed-off-by: Greg Kroah-Hartman <greg@kroah.com>

<mochel@digitalimplant.org>
	[driver model] Change symbol exports to GPL only in sys.c
	
	Signed-off-by: Patrick Mochel <mochel@digitalimplant.org>
	Signed-off-by: Greg Kroah-Hartman <greg@kroah.com>

<mochel@digitalimplant.org>
	[sysfs] Change symbol exports to GPL only in bin.c
	
	Signed-off-by: Patrick Mochel <mochel@digitalimplant.org>
	Signed-off-by: Greg Kroah-Hartman <greg@kroah.com>

<mochel@digitalimplant.org>
	[sysfs] Change symbol exports to GPL only in dir.c
	
	Signed-off-by: Patrick Mochel <mochel@digitalimplant.org>
	Signed-off-by: Greg Kroah-Hartman <greg@kroah.com>

<mochel@digitalimplant.org>
	[sysfs] Change symbol exports to GPL only in file.c.
	
	Signed-off-by: Patrick Mochel <mochel@digitalimplant.org>
	Signed-off-by: Greg Kroah-Hartman <greg@kroah.com>

<mochel@digitalimplant.org>
	[sysfs] Change symbol exports to GPL only in group.c.
	
	Signed-off-by: Patrick Mochel <mochel@digitalimplant.org>
	Signed-off-by: Greg Kroah-Hartman <greg@kroah.com>

<mochel@digitalimplant.org>
	[sysfs] Change symbol exports to GPL only in symlink.c.
	
	Signed-off-by: Patrick Mochel <mochel@digitalimplant.org>
	Signed-off-by: Greg Kroah-Hartman <greg@kroah.com>

<mochel@digitalimplant.org>
	[driver core] Change symbol exports to GPL only in power/main.c
	
	Signed-off-by: Patrick Mochel <mochel@digitalimplant.org>
	Signed-off-by: Greg Kroah-Hartman <greg@kroah.com>

<mochel@digitalimplant.org>
	[driver core] Change symbol exports to GPL only in power/resume.c
	
	Signed-off-by: Patrick Mochel <mochel@digitalimplant.org>
	Signed-off-by: Greg Kroah-Hartman <greg@kroah.com>

<mochel@digitalimplant.org>
	[driver core] Change symbol exports to GPL only in power/suspend.c.
	
	Signed-off-by: Patrick Mochel <mochel@digitalimplant.org>
	Signed-off-by: Greg Kroah-Hartman <greg@kroah.com>

<hch@lst.de>
	[PATCH] don't mark the initio 9100 driver broken
	
	Users report it just works fine, it has basic EH and compiles without
	warnings even on ppc64.
	
	Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

<hch@lst.de>
	[PATCH] remove internal queueing from inia100
	
	The driver had some trivial internal queueing for srb allocation failure
	in ->queuecommand that can be done at the midlayer easily.
	
	Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

<willy@debian.org>
	[PATCH] Add SPI-5 constants to scsi.h
	
	On Tue, Sep 21, 2004 at 01:04:38PM +0100, Christoph Hellwig wrote:
	> On Tue, Sep 21, 2004 at 12:50:59PM +0100, Matthew Wilcox wrote:
	> >
	> > Add the new constant names from SPI-5 to <scsi/scsi.h>
	
	> What about having a section ala
	>
	> /*
	>  * Old SCSI2 names, don't use in new code
	>  */
	> #define ABORT               ABORT_TASK_SET
	> #define BUS_DEVICE_RESET    TARGET_RESET
	>
	> instead of intermixing them with the rest of the defines?
	
	Sure...
	
	Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

<jejb@mulgrave.(none)>
	Remove duplicate IDENTIFY from scsi.h
	
	Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

<hch@lst.de>
	[PATCH] fix inia100 dma mapping warnings
	
	 - always use the midlayer provided field to save the dma handle for unmapping
	 - merge the unmapping into the main completion handler
	
	Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

<akpm@osdl.org>
	[PATCH] PCI: fix up usb quirk __init marks
	
	Lukas Hejtmanek <xhejtman@fi.muni.cz> wrote:
	>
	> Unable to handle kernel paging request at virtual address 0000ffff
	>   printing eip:
	>  c0402097
	>  *pde = 00000000
	>  Oops: 0002 [#1]
	>  PREEMPT
	>  Modules linked in: yenta_socket pcmcia_core i830 ehci_hcd uhci_hcd rtc
	>  CPU:    0
	>  EIP:    0060:[<c0402097>]    Tainted:  P   VLI
	>  EFLAGS: 00010246   (2.6.9-rc2-mm2)
	>  EIP is at quirk_usb_early_handoff+0x0/0x3e
	>  eax: 0000ffff   ebx: c035d954   ecx: c6866000   edx: 00020000
	>  esi: c6866000   edi: c035da4c   ebp: ceede380   esp: c7f4bed8
	>  ds: 007b   es: 007b   ss: 0068
	>  Process pccardd (pid: 3386, threadinfo=c7f4a000 task=c5ea2d70)
	>  Stack: c01d2076 c6866000 c6866000 ceede380 00000000 c01d20ba c6866000 c035d81c
	>         c035da4c c01d01ce 00000000 c6866000 00000000 00000000 c01d0214 ceede380
	>         00000000 c686642c ceede380 ceede394 c7f4a000 cfbdd0de ceede380 00000000
	>  Call Trace:
	>   [<c01d2076>] pci_do_fixups+0x49/0x4b
	
	Well quirk_usb_early_handoff() should be __devinit, not __init.
	
	There are a few other things in there which look hotpluggy, and are marked
	__init.  The whole thing needs a review.
	
	
	Signed-off-by: Greg Kroah-Hartman <greg@kroah.com>

<dougg@torque.net>
	[PATCH] scsi_mid_low_api.txt update
	
	    - initiator device -> initiator port
	    - add scsi_activate_tcq() + scsi_deactivate_tcq()
	
	Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

<jejb@mulgrave.(none)>
	fusion dead code removal
	
	From: Christoph Hellwig <hch@lst.de>
	
	This patch (ontop of the patch to use <linux/list.>) removes lots of
	dead code from the fusion driver, mostly related to the 
	orphaned dmp and
	target drivers.
	
	Acked By: Moore, Eric Dean <Emoore@lsil.com>
	
	also modified not to back out MPTSTM code
	
	Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

<markh@osdl.org>
	[PATCH] aacraid: dynamic dev update
	
	Here is the patch with Christoph's comments addressed.
	
	Description from Mark Salyzyn:
	
	The main purpose of this patch is to move the array's cached request
	sense packets into a per-adapter structure rather than leaving it global
	(before ID 1,0,0,0 shares 2,0,0,0 cached sense). SAS pressed this change
	as we needed to allocate the sense packets dynamically.
	
	Signed-off-by Mark Haverkamp <markh@osdl.org>
	Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

<hch@lst.de>
	[PATCH] tmscsim: back out bogus eeprom reading changes
	
	Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

<jejb@mulgrave.(none)>
	merge a100u2w source files
	
	From: 	Christoph Hellwig <hch@lst.de>
	
	looking at the a100u2w driver the split between the inia100.c and
	i60uscsi.c source files is hindering work badly.  So I'm attaching
	below a new a100u2w.c that is a merge of those two, but no code changes
	at all (yet) - just the comment headers and includes of the two merged,
	then rest of i60uscsi.c, then rest of inia100.c.
	
	Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

<aia21@cantab.net>
	NTFS: Implement extent mft record deallocation.
	
	Signed-off-by: Anton Altaparmakov <aia21@cantab.net>

<jejb@mulgrave.(none)>
	Fix a100u2w compile error
	
	Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

<jejb@mulgrave.(none)>
	Add refcounting to scsi command allocation
	
	The USB bug reported in:
	
	http://bugme.osdl.org/show_bug.cgi?id=3466
	
	Looks to be because we allow device and host removal
	while some commands are in-flight.
	
	This can be fixed by taking and releasing a ref
	on the scsi_device when the commands are allocated
	and freed.
	
	Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

<jejb@mulgrave.(none)>
	qla1280: ISP1020/1040 support
	
	From: Christoph Hellwig <hch@lst.de>
	
	This patch adds support for the older ISP1020/1040 chips to the qla1280
	driver.  In fact it does not add much support but enables the work
	merged earlier. 
	
	It's been tested to work nicely on x86 and alpha machines by multiple
	people, it unfortunately doesn't work on SGI mips systems yet, but I'm
	pretty sure that's due to bugginess in the pci code for those
	plattforms.
	
	Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

<jejb@mulgrave.(none)>
	tmscsim: remove redundant code
	
	From: Guennadi Liakhovetski <g.liakhovetski@gmx.de>
	
	Signed-off-by: Guennadi Liakhovetski <g.liakhovetski@gmx.de>
	Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

<hch@lst.de>
	[PATCH] initio: remove obsolete APIs, cleanup
	
	This patch has the usual cleanups for the initio driver:
	
	 - remove scsi.h APIs
	 - add missing statics
	 - remove the trivial internal queuing for the srb allocation failure case
	
	but while doing that I noticed that the two source files use completely
	different headers, and the interface between the two files often casted
	to generic types just to cast it back to a separate defintion of the
	same type again.  In one case the structures were even mismatching, but
	because we allocated the bigger defintion and only passed pointers
	around it actually worked..
	
	Thanks to Rodrigo Severo for testing this patch.
	
	Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

<hch@lst.de>
	[PATCH] a100u2w: cleanups
	
	 - mark all functions static
	 - don't use scsi.h obsolete symbols
	 - add my copyright boilerplate (more for last years work then the
	   trivial nitpicks here)
	 - comment formatting fixes
	 - remove dead wood from a100u2w.h
	
	Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

<greg@kroah.com>
	I2C: change i2c-elektor.c driver from using pci_find_device()
	
	Signed-off-by: Greg Kroah-Hartman <greg@kroah.com>

<greg@kroah.com>
	I2C: convert scx200_acb driver to not use pci_find_device
	
	Signed-off-by: Greg Kroah-Hartman <greg@kroah.com>

<david-b@pacbell.net>
	[PATCH] USB Gadget: Ethernet/RNDIS gadget, minor updates
	
	Helps battery recharge, and gives this a new version string
	since it's changed a lot since St. Patrick's Day.
	
	
	Just minor updates:
	
	 - use usb_gadget_vbus_draw() when changing configs, so that USB can
	   be used to recharge batteries (or whatever); and report power use.
	   bMaxPower is now 100 mA except with OTG (where it's 8mA).
	
	 - rename /proc/rndis/000 as /proc/driver/rndis-000, and only have it
	   when a new CONFIG variable is set (added by a later patch)
	
	 - minor fixes to make some debug-only rndis messages compile
	
	 - version is now "Equinox 2004".
	
	Signed-off-by: David Brownell <dbrownell@users.sourceforge.net>
	Signed-off-by: Greg Kroah-Hartman <greg@kroah.com>

<david-b@pacbell.net>
	[PATCH] USB: OHCI support for PXA27x
	
	here's a patch from Nico to add PXA27x OHCI support.
	Please merge; it applies on top of your current BK with
	some offsets, but I can't build that tree for ARM because
	of some #include lossage.
	
	OHCI driver for the Intel PXA27x processor
	
	Signed-off-by: Nicolas Pitre <nico@cam.org>
	Signed-off-by: David Brownell <dbrownell@users.sourceforge.net>
	Signed-off-by: Greg Kroah-Hartman <greg@kroah.com>

<david-b@pacbell.net>
	[PATCH] USB Gadget: debug files now Kconfigured
	
	This adds a new Kconfig option, so now all the usb peripheral
	controllers have the same way to enable debug files (or more
	typically, disable them).
	
	
	Several of the USB peripheral controller drivers have a /proc/driver/udc
	file that's handy when debugging, but probably not wanted otherwise.
	This patch adds CONFIG_USB_GADGET_DEBUG_FILES, and uses it to replace
	some driver-internal defines.
	
	Signed-off-by: David Brownell <dbrownell@users.sourceforge.net>
	Signed-off-by: Greg Kroah-Hartman <greg@kroah.com>

<mdharm-usb@one-eyed-alien.net>
	[PATCH] USB storage: delayed device scanning
	
	This patch started life as as366, got some modifications, and lives now as
	as366b.  It implements a delay in SCSI-layer device scanning for
	usb-storage devices at insertion time.
	
	Many devices work better with this delay.  We believe we can remove several
	US_FL_FIX_INQUIRY unusual_devs.h entries with this patch.  (That's a hint,
	Phil!)
	
	The delay is adjustable via a sysfs parameter which is global to the
	usb-storage module.  The default is 5 seconds.
	
	Signed-off-by: Alan Stern <stern@rowland.harvard.edu>
	Signed-off-by: Matthew Dharm <mdharm-usb@one-eyed-alien.net>
	Signed-off-by: Greg Kroah-Hartman <greg@kroah.com>

<mdharm-usb@one-eyed-alien.net>
	[PATCH] USB Storage: ignore bogus residue values
	
	This patch allows usb-storage to ignore the reported residue values when
	required by some devices.  A few devices are included... I know more are
	waiting to be merged into unusual_devs.h
	
	In case anyone is curious... yes, these are broken devices.
	
	Signed-off-by: Alan Stern <stern@rowland.harvard.edu>
	Signed-off-by: Matthew Dharm <mdharm-usb@one-eyed-alien.net>
	Signed-off-by: Greg Kroah-Hartman <greg@kroah.com>

<mdharm-usb@one-eyed-alien.net>
	[PATCH] USB Storage: revert GetMaxLUN strictness
	
	This is patch as384.  It reverts some of our sanity checks on the GetMaxLUN
	part of the Bulk-only protocol.  Apparently, this is one area where vendors
	can't even get close to correct.  So, in the face of any sort of error, we
	assume a single LUN.
	
	We also include some comments so we don't make this mistake again.
	
	
	Signed-off-by: Alan Stern <stern@rowland.harvard.edu>
	Signed-off-by: Matthew Dharm <mdharm-usb@one-eyed-alien.net>
	Signed-off-by: Greg Kroah-Hartman <greg@kroah.com>

<lcapitulino@conectiva.com.br>
	[PATCH] usb-serial: Moves the search in device list out of usb_serial_probe().
	
	 Move the search in `usb_serial_driver_list' out of usb_serial_probe().
	
	 Note that:
	
	1) The `found' variable is not necessary;
	2) If the device does have a probe function, I'm calling usb_match_id()
	again. I'm uncertain if this is the better thing to do.
	
	
	Signed-off-by: Luiz Capitulino <lcapitulino@conectiva.com.br>
	Signed-off-by: Greg Kroah-Hartman <greg@kroah.com>

<lcapitulino@conectiva.com.br>
	[PATCH] usb-serial: create_serial() return value trivial fix.
	
	 create_serial() only returns NULL if there is no memory enough
	to a new `usb_serial' structure, thus, the right error code to
	return is -ENOMEM.
	
	Signed-off-by: Luiz Capitulino <lcapitulino@conectiva.com.br>
	Signed-off-by: Greg Kroah-Hartman <greg@kroah.com>

<lcapitulino@conectiva.com.br>
	[PATCH] usb-serial: return_serial() trivial cleanup.
	
	 return_serial() trivial cleanup:
	
	1) CodingStyle fix;
	2) The `return' is not necessary, we are at the end of a function
	which don't return nothing (void).
	
	
	Signed-off-by: Luiz Capitulino <lcapitulino@conectiva.com.br>
	Signed-off-by: Greg Kroah-Hartman <greg@kroah.com>

<lcapitulino@conectiva.com.br>
	[PATCH] usb-serial: usb_serial_register() cleanup.
	
	 usb_serial_register() cleanup
	
	1) CodingStyle in the call of usb_serial_bus_register()
	2) The goto and the duplicate `return retval' are not necessary
	
	
	Signed-off-by: Luiz Capitulino <lcapitulino@conectiva.com.br>
	Signed-off-by: Greg Kroah-Hartman <greg@kroah.com>

<lcapitulino@conectiva.com.br>
	[PATCH] usb-serial: Add module version information.
	
	 Add module version information for drivers/usb/serial/usb-serial.c.
	
	Signed-off-by: Luiz Capitulino <lcapitulino@conectiva.com.br>
	Signed-off-by: Greg Kroah-Hartman <greg@kroah.com>

<petkov@uni-muenster.de>
	[PATCH] USB: remove calls to usb_unlink_urb in net/catc.c
	
	Signed-off-by: Borislav Petkov <petkov@uni-muenster.de>
	Signed-off-by: Greg Kroah-Hartman <greg@kroah.com>

<petkov@uni-muenster.de>
	[PATCH] USB: remove calls to usb_unlink_urb in misc/legousbtower.c
	
	   another trivial one.
	
	Signed-off-by: Borislav Petkov <petkov@uni-muenster.de>
	Signed-off-by: Greg Kroah-Hartman <greg@kroah.com>

<petkov@uni-muenster.de>
	[PATCH] USB: remove _some_ calls to usb_unlink_urb in misc/auerswald.c
	
	   here's a more controversial one. Firstly, auerchain_unlink_urb:1180
	   is a wrapper for usb_unlink_urb so i don't think we should change
	   that. Secondly, auerswald_int_release returns an int which is the
	   error code returned by usb_unlink_urb. usb_kill_urb is a void,
	   however, so I've removed the error checking. For the sake of
	   debugging, the dbg-line announcing the name of the function is
	   probably enough.
	
	
	Signed-off-by: Borislav Petkov <petkov@uni-muenster.de>
	Signed-off-by: Greg Kroah-Hartman <greg@kroah.com>

<akpm@osdl.org>
	[PATCH] module.h build fix
	
	From: Ingo Molnar <mingo@elte.hu>
	
	Forward-declare the structures before using them, rather than relying on
	previous inclusions.
	
	akpm: The breakage was introduced by bk-driver-core.patch
	
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Greg Kroah-Hartman <greg@kroah.com>

<khali@linux-fr.org>
	[PATCH] I2C: Store lm83 and lm90 temperatures in signed
	
	Back when I wrote the lm83 and lm90 drivers, I decided to use unsigned
	variables to store temperature values as mirrored from the chipset
	registers. I wonder why, since the registers use signed values
	themselves. The patch below changes the variables back to signed types,
	so as to simplify the conversions made by the driver, making them faster
	and easier to understand.
	
	Additionally, the lm90 driver was lacking boundary checkings and proper
	rounding when writing temperature limits to the chipset, so I added
	these. I also reworded the comments about internal temperature values
	representation for all chipsets.
	
	Tested to work fine on my (LM90-compatible) ADM1032 chip. lm83 patch
	untested, but it is more simple and directly copied from the lm90, so I
	am confident it works fine too.
	
	
	Signed-off-by: Jean Delvare <khali@linux-fr.org>
	Signed-off-by: Greg Kroah-Hartman <greg@kroah.com>

<mhoffman@lightlink.com>
	[PATCH] i2c: sensors chip driver updates
	
	This patch modifies some sysfs file names for sensors chip drivers in
	accordance with the standard interface proposed here [1] and refined
	here [2].  The lm_sensors userspace tools have been modified to accept
	both the new and old names.  This patch was tested for some drivers,
	and at least compile tested for the rest.
	
	[1] http://archives.andrew.net.au/lm-sensors/msg08477.html
	
	[2] http://archives.andrew.net.au/lm-sensors/msg18391.html
	
	Signed-off-by: Mark M. Hoffman <mhoffman@lightlink.com>
	Signed-off-by: Greg Kroah-Hartman <greg@kroah.com>

<mhoffman@lightlink.com>
	[PATCH] i2c: kill some sensors driver macro abuse
	
	This patch kills a specific kind of ugly and ultimately useless macro
	abuse found in many sensors chip drivers.  Compile tested only.
	
	Signed-off-by: Mark M. Hoffman <mhoffman@lightlink.com>
	Signed-off-by: Greg Kroah-Hartman <greg@kroah.com>

<zaitcev@redhat.com>
	[PATCH] USB: Fixes for ub in 2.4.9-rc2-mm2
	
	- Do retries for a memory key which was handed out on Kernel Summit 04.
	- Add missing del_timer.
	- Add shifts for a 2KB block size device, from Pat LaVarre.
	
	Signed-off-by: Pete Zaitcev <zaitcev@yahoo.com>
	Signed-off-by: Greg Kroah-Hartman <greg@kroah.com>

<baldrick@free.fr>
	[PATCH] usb: extract sensible strings from buggy string descriptors
	
	The Freebox is a USB modem popular in France.  It returns bogus string
	descriptors: while the string part is there, the length and type bytes
	are both zero.  This patch detects that case and tries to recover a
	sensible string by scanning for printable Latin characters.  This not
	only causes the modem to spring to life (because usbnet gets a valid
	MAC address) - it also means you get the correct Product and Manufacturer
	strings in sysfs and elsewhere.  This patch is in the "mostly harmless"
	category.
	
	Signed-off-by: Duncan Sands <baldrick@free.fr>
	Signed-off-by: Greg Kroah-Hartman <greg@kroah.com>

<ak@sensi.org>
	[PATCH] USB: export inteface and configuration strings to sysfs
	
	 this patch adds exporting of configuration and interface strings to sysfs.
	
	 both configuration and interface strings are present on my Nokia
	 7610 phone, which can be connected via USB, and I thought it would be a
	 good idea to make them easily accessible via sysfs:
	
	 [root@cs181035096 usb1]# cat 1-1/manufacturer 1-1/product
	 Nokia
	 7610
	 [root@cs181035096 usb1]# grep "" `find . -name configuration`
	 ./1-1/configuration:First and Last and Always
	 [root@cs181035096 usb1]# grep "" `find . -name interface`
	 ./1-1/1-1:1.6/interface:CDC Data Interface
	 ./1-1/1-1:1.5/interface:CDC Comms Interface
	 ./1-1/1-1:1.3/interface:PC Suite Services
	 ./1-1/1-1:1.1/interface:SYNCML-SYNC
	
	 The first two interfaces are for accessing the GPRS modem, they are
	 recognized and supported perfectly by the cdc_acm driver. The last two
	 are CDC OBEX interfaces, for which there is no driver currently, but I plan to
	 write one. This would allow userspace to do really nifty things, for
	 example accessing the phone filesystem, and exchanging contacts and
	 calendar entries via SyncML. Pretty much the same thing that Nokia PC
	 Suite does. But the software needs to distinguish between the two OBEX
	 interfaces (which is syncml and which is file transfer? the only way to
	 know is to read the strings), and that"s why this patch was written.
	
	
	Signed-off-by: Alex Kanavin <ak@sensi.org>
	Signed-off-by: Greg Kroah-Hartman <greg@kroah.com>

<nacc@us.ibm.com>
	[PATCH] usb/file_storage: replace schedule_timeout() with msleep_interruptible()
	
	Use msleep_interruptible() instead of schedule_timeout()
	so that the task delays as expected.
	
	Signed-off-by: Greg Kroah-Hartman <greg@kroah.com>

<nacc@us.ibm.com>
	[PATCH] usb/ati_remote: add set_current_state()
	
	Add set_current_state() before schedule_timeout() so that if the
	while-loop iterates multiple times, schedule_timeout() delays as
	expected. Without the addition, schedule_timeout() will return
	immediately.
	
	
	Signed-off-by: Greg Kroah-Hartman <greg@kroah.com>

<nacc@us.ibm.com>
	[PATCH] usb/kaweth: reorder set_current_state() and schedule_timeout()
	
	Reorder set_current_state() and schedule_timeout() for a
	minor cleanup. The reorder allows removing two of the
	set_current_state() calls.
	
	Signed-off-by: Greg Kroah-Hartman <greg@kroah.com>

<nacc@us.ibm.com>
	[PATCH] usb/hid-core: add set_current_state() before schedule_timeout()
	
	Add set_current_state() before schedule_timeout() so that the task
	delays as expected. Without the addition, schedule_timeout() will return
	immediately on subsequent iterations of the while-loop.
	
	Signed-off-by: Greg Kroah-Hartman <greg@kroah.com>

<nacc@us.ibm.com>
	[PATCH] usb/mdc800: cleanup set_current_state() around wait queues
	
	This patch cleans up the wait queue usage in this driver.  The state is
	no longer set until just before the task sleeps, which removes a few
	set_current_state()s. Correspondingly, the state doesn't need to be set
	back to TASK_RUNNING outside of the while-loops, as schedule_timeout()
	takes care of it.
	
	Signed-off-by: Greg Kroah-Hartman <greg@kroah.com>

<nacc@us.ibm.com>
	[PATCH] usb/uss720: replace schedule_timeout() with msleep_interruptible()
	
	Use msleep_interruptible() instead of schedule_timeout() to guarantee
	the task delays as expected.
	
	Signed-off-by: Greg Kroah-Hartman <greg@kroah.com>

<johnpol@2ka.mipt.ru>
	[PATCH] w1: schedule_timeout() issues.
	
	Need to set current state and check signals.
	
	Signed-off-by: Evgeniy Polyakov <johnpol@2ka.mipt.ru>
	Signed-off-by: Greg Kroah-Hartman <greg@kroah.com>

<jbarnes@engr.sgi.com>
	[PATCH] USB: handle usb host allocation failures gracefully
	
	It looks like a host (like ohci or whatever) could try to allocate a new
	usb_device structure with usb_alloc_dev and get back a valid pointer even if
	the allocation of its private data failed.  I first saw this in the 2.4
	sources, but it looks like 2.6 has the same problem.  This patch attempts to
	fix it by freeing dev if the ->allocate() routine fails, and then returns
	NULL instead of a potentially dangerous dev pointer.
	
	Signed-off-by: Jesse Barnes <jbarnes@sgi.com>
	Signed-off-by: Greg Kroah-Hartman <greg@kroah.com>

<david-b@pacbell.net>
	[PATCH] USB: OHCI autodetects "need" for init reset quirk
	
	Ther recent QUIRK_INITRESET update turns out to need support for some ALi
	and ServerWorks chips, as well as the original SiS and OPTi cases.  Rather
	than trying to maintain a quirk table (for what I still think must be a
	subtle init sequence bug), this patch kicks it in automatically when the
	frame clock init problem is detected.
	
	Signed-off-by: David Brownell <dbrownell@users.sourceforge.net>
	Signed-off-by: Greg Kroah-Hartman <greg@kroah.com>

<hare@suse.de>
	[PATCH] Driver Core: Handle NULL arg for put_device()
	
	Since get_device() accepts a NULL argument, put_device() should do so, too.
	
	Signed-off-by: Hannes Reinecke <hare@suse.de>
	Signed-off-by: Greg Kroah-Hartman <greg@kroah.com>

<roland@topspin.com>
	[PATCH] kobject: add add_hotplug_env_var()
	
	Add a (non-inlined) add_hotplug_env_var() function to <linux/kobject.h>
	and lib/kobject.c.  There's a lot of boilerplate code involved in
	setting environment variables in a hotplug method, so we should have a
	convenience function to consolidate it (and avoid subtle bugs).
	
	
	Signed-off-by: Roland Dreier <roland@topspin.com>
	Signed-off-by: Greg Kroah-Hartman <greg@kroah.com>

<roland@topspin.com>
	[PATCH] USB: use add_hotplug_env_var() in core/usb.c
	
	Use the new add_hotplug_env_var() function in drivers/usb/core/usb.c.
	In addition to cleaning up the code, this fixes a (probably harmless)
	bug here: for each value added to the environment, the code did
	
		length += sprintf(...);
	
	and then
	
		scratch += length;
	
	which means that we skip the sum of the lengths of all the values
	we've put so far, rather than just the length of the value we just
	put.  This is probably harmless since we're unlikely to run out of
	space but if nothing else it's setting a bad example....
	
	I've tested this on a system with USB floppy and CD-ROM; hotplug gets
	the same environment with the patch as without.
	
	
	Signed-off-by: Roland Dreier <roland@topspin.com>
	Signed-off-by: Greg Kroah-Hartman <greg@kroah.com>

<jeremy@sgi.com>
	[PATCH] add ability to set device queue depth to mptfusion
	
	This patch lets you override the default queue depth for SCSI devices
	attached through the mptfusion driver.
	
	I moved some common code that I needed out of mpt_slave_configure()
	into its own function.
	
	New patch with some style issues fixed.  I went ahead and moved the
	logical "and" to the end of the line from the start of the next line.
	I agreed with Matthew's reasoning on the comparison with 0.
	
	Thanks for reviewing, Christoph.
	
	signed-off-by: Jeremy Higdon  <jeremy@sgi.com>
	Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

<aia21@cantab.net>
	NTFS: Splitt runlist related functions off from attrib.[hc] to runlist.[hc].
	
	Signed-off-by: Anton Altaparmakov <aia21@cantab.net>

<aia21@cantab.net>
	NTFS: Add vol->mft_data_pos and initialize it at mount time.
	
	Signed-off-by: Anton Altaparmakov <aia21@cantab.net>

<aia21@cantab.net>
	NTFS: Rename init_runlist() to ntfs_init_runlist(), ntfs_vcn_to_lcn() to
	      ntfs_rl_vcn_to_lcn(), decompress_mapping_pairs() to
	      ntfs_mapping_pairs_decompress() and adapt all callers.
	
	Signed-off-by: Anton Altaparmakov <aia21@cantab.net>

<aia21@cantab.net>
	NTFS: Forgot to lock the mft bitmap when clearing the bit in
	      ntfs_extent_mft_record_free().
	
	Signed-off-by: Anton Altaparmakov <aia21@cantab.net>

<aia21@cantab.net>
	NTFS: Add fs/ntfs/runlist.[hc]::ntfs_get_nr_significant_bytes(),
	      ntfs_get_size_for_mapping_pairs(), ntfs_write_significant_bytes(),
	      and ntfs_mapping_pairs_build(), adapted from libntfs.
	
	Signed-off-by: Anton Altaparmakov <aia21@cantab.net>

<aia21@cantab.net>
	NTFS: Rename ntfs_merge_runlists() to ntfs_runlists_merge().
	
	Signed-off-by: Anton Altaparmakov <aia21@cantab.net>

<aia21@cantab.net>
	NTFS: - Add fs/ntfs/lcnalloc.h::ntfs_cluster_free_from_rl() which is a static
	        inline wrapper for ntfs_cluster_free_from_rl_nolock() which takes the
	        cluster bitmap lock for the duration of the call.
	      - Make fs/ntfs/lcnalloc.c::ntfs_cluster_free_from_rl_nolock() not
	        static and add a declaration for it to lcnalloc.h.
	
	Signed-off-by: Anton Altaparmakov <aia21@cantab.net>

<aia21@cantab.net>
	NTFS: Add fs/ntfs/attrib.[hc]::ntfs_attr_record_resize().
	
	Signed-off-by: Anton Altaparmakov <aia21@cantab.net>

<jejb@mulgrave.(none)>
	megaraid 2.20.4: Fix a data corruption bug
	
	From: 	Bagalkote, Sreenivas <sreenib@lsil.com>
	
	Fixes a data corruption issue. Because of a typo in the driver, IO packets
	were wrongly shared by the IOCTL path. This caused the whole IO command
	to be replaced by an incoming IOCTL command.
	
	Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

<jgarzik@pobox.com>
	[libata] add sata_uli driver for ULi (formerly ALi) SATA
	
	Contributed by Peer Chen <peer_chen@ali.com.tw>, updated to
	latest libata by me.

<jgarzik@pobox.com>
	[libata sata_uli] add dev_select hook

<jt@bougret.hpl.hp.com>
	[PATCH] WE-17 typo fix
	
		Felix R. found a typo in the WE-17 patch I sent you and is
	pending in your tree (more correctly, an overzealous
	search&replace). The patch below fix this mistake.
		I would appreciate you adding this patch to your tree ;-)

<ganesh.venkatesan@intel.com>
	[PATCH] e1000 update -- fix MODULE_PARM, module_param, module_param_array

<manfred@colorfullife.com>
	[PATCH] rx checksum support for gige nForce ethernet

<romieu@fr.zoreil.com>
	[PATCH] sata_nv: enable hotplug event on successfull init only
	
	Wait for successfull completion of nv_init_one() before hotplug events
	are enabled.
	
	Signed-off-by: Francois Romieu <romieu@fr.zoreil.com>

<romieu@fr.zoreil.com>
	[PATCH] sata_nv: wrong failure path and leak
	
	- wrong branching: the driver does not want to iounmap() an address that it
	  has just failed to set;
	- return a sensible error status code instead of a success code;
	- leak plugged: host was never freed if a late error heppened.
	
	Signed-off-by: Francois Romieu <romieu@fr.zoreil.com>

<romieu@fr.zoreil.com>
	[PATCH] sata_nv: housekeeping for goto labels
	
	- each label used in a goto contains a part of the operation that must
	  be issued. This way both the no-error and the error paths can be checked
	  separately;
	- probe_ent does not need to be NULL-initialized.
	
	Signed-off-by: Francois Romieu <romieu@fr.zoreil.com>

<akpm@osdl.org>
	[PATCH] igxb speedup
	
	The interrupt routine will call both those functions even if the first doesn't
	have any work to do.
	
	Signed-off-by: Andrew Morton <akpm@osdl.org>

<akpm@osdl.org>
	[PATCH] e1000 sparc64 dma_mapping build fix
	
	drivers/net/e1000/e1000_main.c: In function `e1000_probe':
	drivers/net/e1000/e1000_main.c:389: error: `DMA_64BIT_MASK' undeclared (first use in this function)
	drivers/net/e1000/e1000_main.c:389: error: (Each undeclared identifier is reported only once
	drivers/net/e1000/e1000_main.c:389: error: for each function it appears in.)
	drivers/net/e1000/e1000_main.c:392: error: `DMA_32BIT_MASK' undeclared (first use in this function)
	
	Signed-off-by: Andrew Morton <akpm@osdl.org>

<nacc@us.ibm.com>
	[PATCH] net/de2104x: replace schedule_timeout() with msleep()
	
	Any comments would be appreciated.
	
	Description: Use msleep() instead of schedule_timeout()
	to guarantee the task delays as expected.
	
	Signed-off-by: Nishanth Aravamudan <nacc@us.ibm.com>

<jesse.brandeburg@intel.com>
	[PATCH] ixgb: fix endianness issue for tx cleanup
	
	This patch fixes tx cleanup so that it works correctly on big endian
	machines.
	This time I remembered to update the version string.
	
	Signed-off-by: Jesse Brandeburg <jesse.brandeburg@intel.com>

<jesse.brandeburg@intel.com>
	[PATCH] e100: fix NAPI race with watchdog
	
	While polling in NAPI mode, we were occassionally getting interrupts
	re-enabled by the watchdog trying to generate a software interrupt.  Fix
	is to add a spinlock around that shared hardware register to allow a
	read-modify-write operation.  This was nasty nasty.  I don't like the
	spinlock in the hot path but i see no other way.  Comments are welcome.
	Updates the driver version as well.
	
	Signed-off-by: Jesse Brandeburg <jesse.brandeburg@intel.com>

<jesse.brandeburg@intel.com>
	[PATCH] e100: whitespace and DPRINTKS
	
	This is a short patch to add a couple of new DPRINTKS and fix some
	whitespace issues.
	
	Signed-off-by: Jesse Brandeburg <jesse.brandeburg@intel.com>

<aia21@cantab.net>
	NTFS: Implement the equivalent of memset() for an ntfs attribute in
	      fs/ntfs/attrib.[hc]::ntfs_attr_set() and switch
	      fs/ntfs/logfile.c::ntfs_empty_logfile() to using it.
	
	Signed-off-by: Anton Altaparmakov <aia21@cantab.net>

<aia21@cantab.net>
	NTFS: Remove unnecessary casts from LCN_* constants.
	
	Signed-off-by: Anton Altaparmakov <aia21@cantab.net>

<aia21@cantab.net>
	NTFS: Implement fs/ntfs/runlist.c::ntfs_rl_truncate_nolock().
	
	Signed-off-by: Anton Altaparmakov <aia21@cantab.net>

<jejb@mulgrave.(none)>
	merge initio source files
	
	From: Christoph Hellwig <hch@lst.de>
	
	Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

<jejb@mulgrave.(none)>
	ST34555N misbehaves on tagged INQUIRY commands - add to blacklist
	
	From: 	Guennadi Liakhovetski <g.liakhovetski@gmx.de>
	
	Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

<James.Smart@Emulex.Com>
	[PATCH] suspending I/Os to a device
	
	Add a device blocked state and API to the mid-layer
	
	Use the new device blocked API in the fc transport class to invoke a
	user settable delay on cable pulls.
	
	Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

<ebs@ebshome.net>
	PPC32: remove bogus eXecute permissions
	
	Signed-off-by: Eugene Surovegin <ebs@ebshome.net>

<aia21@cantab.net>
	NTFS: Add MFT_RECORD_OLD as a copy of MFT_RECORD in fs/ntfs/layout.h
	      and change MFT_RECORD to contain the NTFS 3.1+ specific fields.
	
	Signed-off-by: Anton Altaparmakov <aia21@cantab.net>

<aia21@cantab.net>
	NTFS: Add some debugging checks to fs/ntfs/inode.c::ntfs_truncate() and fix
	      a typo in fs/ntfs/layout.h.
	
	Signed-off-by: Anton Altaparmakov <aia21@cantab.net>

<ben@fluff.org>
	[WATCHDOG] s3c2410_wdt.c-wdog-fix-memrelease.patch
	
	fix the release of the memory resource at exit from the code, and tidy
	up the static variables at the start.
	
	Signed-of-by: Ben Dooks <ben-wdog@fluff.org>
	Signed-of-by: Wim Van Sebroeck <wim@iguana.be>

<dwmw2@shinybook.infradead.org>
	USB: Generic USB ATM/DSL core and completed SpeedTouch driver
	
	This can now load the firmware and initialise the modem for itself,
	with no need for any userspace help (except for putting the firmware
	in /lib/firmware in the first place). 
	
	The core packet I/O code is split out into a separate file where it can
	be used by drivers for some of the other similar modems.
	
	Signed-off-by: David Woodhouse <dwmw2@infradead.org>
	Signed-off-by: Greg Kroah-Hartman <greg@kroah.com>

<sfeldma@pobox.com>
	[PATCH] janitor: net/sis900: pci_find_device to pci_get_device
	
	Replace pci_find_device with pci_get_device/pci_dev_put to plug
	race with pci_find_device.  Compile tested.
	
	Signed-off-by: Scott Feldman <sfeldma@pobox.com>

<sfeldma@pobox.com>
	[PATCH] janitor: net/tulip: pci_find_device to pci_dev_present
	
	Replace pci_find_device with pci_dev_present.  Compile tested.
	
	Signed-off-by: Scott Feldman <sfeldma@pobox.com>

<margitsw@t-online.de>
	[PATCH] prism54 remove TRACE
	
	*  Remove TRACE to please the janitors

<margitsw@t-online.de>
	[PATCH] prism54 Bug in timeout scheduling
	
	*  Bug in loop around schedule_timeout
	*  We must rearm the task
	*
	*  Make timeout message meaningful

<margitsw@t-online.de>
	[PATCH] prism54 print firmware version
	
	*  Print firmware version
	*
	*  As per convention, make errno return negative

<margitsw@t-online.de>
	[PATCH] prism54 bug initialization/mgt_commit
	
	*  Change mgt_commit from void to int
	*  (and pass a return code)
	*  We call this from device initialization,
	*  therefore we need to know that it has succeeded
	*  If it hasn't, we do not have a working device and
	*  should pass a non-zero value upwards

<nhorman@redhat.com>
	[PATCH] ns83820: add vlan tag hardware acceleration support
	
		I was poking about in the National Semi 83820 driver, and I happened to notice that the chip supports vlan tag add/strip assist in hardware, but the driver wasn't making use of it.  This patch adds in the driver support to use the vlan tag add/remove hardware, and enables the drivers use of the kernel vlan hwaccel interface.
	
	Signed-off-by: Neil Horman <nhorman@redhat.com>

<zaitcev@redhat.com>
	[PATCH] USB: fix oops with latest ub driver in -mm tree
	
	On Fri, 1 Oct 2004 11:39:17 -0700
	Greg KH <greg@kroah.com> wrote:
	
	> Pete, any ideas?  Oh, it also happens on my UP laptop.
	>[...]
	> kernel BUG at kernel/timer.c:413!
	
	I have a suspicion. Actually, it was pointed to me by a kind soul before,
	but I forgot who he was, unfortunately. I'm not sure if this is the
	problem, but please try it if you can. It should apply on top of "latest".
	I really hate that word, but in this case I haven't got a version number.
	
	Signed-off-by: Greg Kroah-Hartman <greg@kroah.com>

<hch@lst.de>
	[PATCH] tmscsim: remove superflous global host list
	
	It's only used to "verify" the host pointer in the interrupt handler,
	which better had to be correct or else 90% of the drivers would break.
	
	Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

<g.liakhovetski@gmx.de>
	[PATCH] tmscsim: use mid-layer's decision for tag support
	
	Signed-off-by: Guennadi Liakhovetski <g.liakhovetski@gmx.de>
	Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

<g.liakhovetski@gmx.de>
	[PATCH] tmscsim: remove internal command queue
	
	Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

<hch@lst.de>
	[PATCH] get rid of obsolete APIs in u14-34f
	
	Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

<markh@osdl.org>
	[PATCH] aacraid: Add get container name functionality
	
	Description from Mark Salyzyn:
	
	This patch to aacraid overrides the default naming for an array with the
	programmed array name when set. The array name can be set in the BIOS,
	or the management applications.
	
	Signed-off-by: Mark Haverkamp <markh@osdl.org>
	Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

<jejb@pashleys.(none)>
	ncr53c8xx: remove integrity checking
	
	The comments read like it's a precursor to mid layer
	domain validation.  Anyway, it's never been compiled.
	
	Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

<jejb@pashleys.(none)>
	ncr53c8xx: move driver local quirks up to scsi blacklist
	
	Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

<jejb@pashleys.(none)>
	mcr53c8xx: remove INQUIRY snooping and believe the mid-layer flags
	
	Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

<jejb@pashleys.(none)>
	add device_configure to the transport classes
	
	This allows attributes to be picked out of the INQUIRY fields and
	placed into transport specific capability flags
	
	Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

<jejb@pashleys.(none)>
	ncr53c8xx: Convert to using transport classes
	
	Convert the driver to export period offset and width.  Pick up
	domain validation on targets for free
	
	Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

<dwmw2@shinybook.infradead.org>
	USB: Reformat usb-atm code and rework SpeedTouch firmware loading. 
	
	Now it's all from a single kernel thread started directly by the probe
	routine, and it checks it can find _all_ the firmware it wants before
	starting to poke at the modem.
	
	Signed-off-by: David Woodhouse <dwmw2@infradead.org>
	Signed-off-by: Greg Kroah-Hartman <greg@kroah.com>

<aia21@cantab.net>
	NTFS: Add a helper function fs/ntfs/aops.c::mark_ntfs_record_dirty() which
	      marks all buffers belonging to an ntfs record dirty, followed by
	      marking the page the ntfs record is in dirty and also marking the vfs
	      inode containing the ntfs record dirty (I_DIRTY_PAGES).
	
	Signed-off-by: Anton Altaparmakov <aia21@cantab.net>

<aia21@cantab.net>
	NTFS: Switch fs/ntfs/index.h::ntfs_index_entry_mark_dirty() to using the
	      new helper fs/ntfs/aops.c::mark_ntfs_record_dirty() and remove the no
	      longer needed fs/ntfs/index.[hc]::__ntfs_index_entry_mark_dirty().
	
	Signed-off-by: Anton Altaparmakov <aia21@cantab.net>

<dwmw2@shinybook.infradead.org>
	USB: Fix assertion logic in USB ATM core.
	
	We assert something we believe to be _true_, not false.
	
	Signed-off-by: David Woodhouse <dwmw2@infradead.org>
	Signed-off-by: Greg Kroah-Hartman <greg@kroah.com>

<marcel@holtmann.org>
	[Bluetooth] Improve connection hash handling
	
	The connection hash counts the ACL and SCO links together at the moment
	and this is not a useful behaviour. Separate the counters and put the
	calling of the notifier before the TX tasklet is enabled.
	
	Signed-off-by: Marcel Holtmann <marcel@holtmann.org>

<marcel@holtmann.org>
	[Bluetooth] Fix race when unlinking incoming connections
	
	When the user space applications don't call accept() it can happen that
	incoming connections stay in the accept queue and block further connection
	attempts until the server is restarted. On a disconnect it is necessary
	that the connection is removed from the accept queue. This can't be the
	job of a cleanup function.
	
	Signed-off-by: Marcel Holtmann <marcel@holtmann.org>

<greg@kroah.com>
	[PATCH] PCI: remove pci_find_subsys() calls from cpufreq code.
	
	Signed-off-by: Greg Kroah-Hartman <greg@kroah.com>

<greg@kroah.com>
	[PATCH] PCI: remove pci_find_subsys() calls from acpi code.
	
	Signed-off-by: Greg Kroah-Hartman <greg@kroah.com>

<greg@kroah.com>
	[PATCH] PCI: make pci_find_subsys() static, as it should not be used anymore
	
	Use pci_get_subsys() if you want this functionality.
	
	Signed-off-by: Greg Kroah-Hartman <greg@kroah.com>

<greg@kroah.com>
	[PATCH] PCI: update the pci.txt documentation about pci_find_device and pci_find_subsys going away
	
	Signed-off-by: Greg Kroah-Hartman <greg@kroah.com>

<greg@kroah.com>
	[PATCH] PCI: make pci_find_class() warn if in interrupt like all other find/get functions do.
	
	Signed-off-by: Greg Kroah-Hartman <greg@kroah.com>

<greg@kroah.com>
	[PATCH] PCI: add pci_get_class() to make a safe pci_find_class() like call.
	
	Signed-off-by: Greg Kroah-Hartman <greg@kroah.com>

<greg@kroah.com>
	[PATCH] PCI: clean up the comments in search.c to be correct.
	
	Signed-off-by: Greg Kroah-Hartman <greg@kroah.com>

<greg@kroah.com>
	[PATCH] PCI: remove pci_find_class() usage from arch specific files.
	
	Signed-off-by: Greg Kroah-Hartman <greg@kroah.com>

<greg@kroah.com>
	[PATCH] PCI: remove pci_find_class() usage from all drivers/ files
	
	Signed-off-by: Greg Kroah-Hartman <greg@kroah.com>

<greg@kroah.com>
	[PATCH] PCI: delete the pci_find_class() function as it's unsafe in hotpluggable systems.
	
	Signed-off-by: Greg Kroah-Hartman <greg@kroah.com>

<greg@kroah.com>
	[PATCH] PCI: fix improper pr_debug() statement
	
	Thanks to Joe Perches for pointing this out.
	
	Signed-off-by: Greg Kroah-Hartman <greg@kroah.com>

<johnpol@2ka.mipt.ru>
	[PATCH] scx200: pci_find_device() removal.
	
	Remove pci_find_device() in arch/i386/kernel/scx200.c.
	
	Signed-off-by: Evgeniy Polyakov <johnpol@2ka.mipt.ru>
	Signed-off-by: Greg Kroah-Hartman <greg@kroah.com>

<hch@lst.de>
	[PATCH] PCI: mark proc_bus_pci_dir static
	
	Signed-off-by: Greg Kroah-Hartman <greg@kroah.com>

<david-b@pacbell.net>
	[PATCH] PCI: update Documentation/power/pci.txt
	
	That document was wrong on some things, misleading on others; this
	fixes some of the issues I noticed.
	
	However it probably needs to say that drivers for devices that implement
	the PCI PM spec "should" always use pci_set_power_state() to reduce the
	power usage.  If I get ambitions I might submit a patch to the PCI core
	to print a nag message for drivers that don't do that.
	
	
	Updates the PCI PM docs, better matching the specs and code.
	
	  - List both D3 states (D3hot, D3cold) up front.
	
	  - Clarify that suspend() methods should disable I/0 (including DMA)
	    and IRQs; it's not optional.
	
	  - More accurately describe resume(); there are common cases where
	    device re-initialization isn't appropriate.  The previous text said
	    re-init was always required; that's false.
	
	Signed-off-by: David Brownell <dbrownell@users.sourceforge.net>
	Signed-off-by: Greg Kroah-Hartman <greg@kroah.com>

<shaohua.li@intel.com>
	[PATCH] PCI: Reorder some initialization code to allow resources to be proper allocated.
	
	On Tuesday, August 31, 2004, Linus Torvalds wrote:
	> That list per se obviously looks ok by me, although I'd worry that some
	> other fs_initcall depends on the ACPI stuff having been run (ie while the
	> abover ordering is great, I worry that some _other_ part doesn't fit in
	> the above ordering). Doing a quick check finds "chr_dev_init()", for
	> example, which will do fbmem_init(), which might depend on the ACPI/PnP
	> stuff having run already.
	>
	> So it _might_ be safer to make this ordering more explicit, rather than
	
	Yes, I agree. The problem is there isn't a straightforward method for
	it. It possibly is hard to get it.
	
	> depending on the different phases of the initcalls. But I'd happily be
	> proven wrogn with some simple argument for why this is guaranteed to be
	> ok.. For example, maybe ACPI and PnP is linked before chr/mem.c, in which
	> case it should all be ok.
	
	Original PCI assign resources code is the last 'subsys_initcall'
	according to the makefile, so move some code of it to 'fs_initcall'
	(just below 'subsystem_initcall') should be ok. As you said, ACPI and
	PnP is linked before chr/mem.c. The method requires all other
	'fs_initcall' don't touch PCI resources, since
	'pcibios_assign_resources' is a 'fs_initcall' and maybe don't run, but
	it looks ok currently. Again, I will be appreciated if we can find a
	solution to make the ordering explicit.
	
	
	Signed-off-by: Greg Kroah-Hartman <greg@kroah.com>

<janitor@sternwelten.at>
	[PATCH] PCI list_for_each: arch-i386-pci-i386.c
	
	Replace for with more readable list_for_each.
	Compile tested.
	
	Signed-off-by: Domen Puncer <domen@coderock.org>
	Signed-off-by: Maximilian Attems <janitor@sternwelten.at>
	Signed-off-by: Greg Kroah-Hartman <greg@kroah.com>

<janitor@sternwelten.at>
	[PATCH] PCI list_for_each: arch-alpha-kernel-pci.c
	
	Change for loops with list_for_each().
	
	Signed-off-by: Domen Puncer <domen@coderock.org>
	Signed-off-by: Maximilian Attems <janitor@sternwelten.at>
	Signed-off-by: Greg Kroah-Hartman <greg@kroah.com>

<janitor@sternwelten.at>
	[PATCH] PCI list_for_each: arch-ia64-pci-pci.c
	
	Change for loops with list_for_each_entry().
	
	Signed-off-by: Domen Puncer <domen@coderock.org>
	Signed-off-by: Maximilian Attems <janitor@sternwelten.at>
	Signed-off-by: Greg Kroah-Hartman <greg@kroah.com>

<janitor@sternwelten.at>
	[PATCH] PCI list_for_each: arch-ia64-sn-io-machvec-pci_bus_cvlink.c
	
	s/for/list_for_each/
	
	Signed-off-by: Domen Puncer <domen@coderock.org>
	Signed-off-by: Maximilian Attems <janitor@sternwelten.at>
	Signed-off-by: Greg Kroah-Hartman <greg@kroah.com>

<janitor@sternwelten.at>
	[PATCH] PCI list_for_each: arch-ppc64-kernel-pci.c
	
	s/for/list_for_each/
	
	Signed-off-by: Domen Puncer <domen@coderock.org>
	Signed-off-by: Maximilian Attems <janitor@sternwelten.at>
	Signed-off-by: Greg Kroah-Hartman <greg@kroah.com>

<janitor@sternwelten.at>
	[PATCH] PCI list_for_each: arch-ppc64-kernel-pci_dn.c
	
	s/for/list_for_each/
	
	Signed-off-by: Domen Puncer <domen@coderock.org>
	Signed-off-by: Maximilian Attems <janitor@sternwelten.at>
	Signed-off-by: Greg Kroah-Hartman <greg@kroah.com>

<janitor@sternwelten.at>
	[PATCH] PCI list_for_each: arch-ppc-kernel-pci.c
	
	s/for/list_for_each/
	
	Signed-off-by: Domen Puncer <domen@coderock.org>
	Signed-off-by: Maximilian Attems <janitor@sternwelten.at>
	Signed-off-by: Greg Kroah-Hartman <greg@kroah.com>

<janitor@sternwelten.at>
	[PATCH] PCI list_for_each: arch-sparc-kernel-pcic.c
	
	s/for/list_for_each/
	
	Signed-off-by: Domen Puncer <domen@coderock.org>
	Signed-off-by: Maximilian Attems <janitor@sternwelten.at>
	Signed-off-by: Greg Kroah-Hartman <greg@kroah.com>

<janitor@sternwelten.at>
	[PATCH] PCI pci_dev_b to list_for_each_entry: drivers-pci-setup-bus.c
	
	list_for_each & pci_(dev|bus)_[bg] replaced by list_for_each_entry.
	
	
	Signed-off-by: Domen Puncer <domen@coderock.org>
	Signed-off-by: Maximilian Attems <janitor@sternwelten.at>
	Signed-off-by: Greg Kroah-Hartman <greg@kroah.com>

<akpm@osdl.org>
	[PATCH] add-pci_fixup_enable-pass.patch
	
	From: Bjorn Helgaas <bjorn.helgaas@hp.com>
	
	Nick Piggin's USB driver stopped working when I removed the unconditional
	PCI ACPI IRQ routing stuff.  He has verified that the attached patch fixes
	it.  I sort of hate to add another pass of PCI fixups, so I'm open to
	alternate solutions if anybody suggests one.
	
	Add a "pci_fixup_enable" pass of PCI fixups.  These are run at the end of
	pci_enable_device() to fix up things like IRQs that are not set up until
	then.  Some VIA boards require a fixup after the IRQ is set up.  Found by
	Nick Piggin, initial patch by Bjorn Helgaas, reworked to fit into current
	-mm by Nick.
	
	Signed-off-by: Nick Piggin <nickpiggin@yahoo.com.au>
	Signed-off-by: Bjorn Helgaas <bjorn.helgaas@hp.com>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Greg Kroah-Hartman <greg@kroah.com>

<greg@kroah.com>
	[PATCH] PCI: get rid of pci_find_device() from arch/i386/*
	
	Signed-off-by: Greg Kroah-Hartman <greg@kroah.com>

<greg@kroah.com>
	[PATCH] PCI: remove pci_find_device() usages from drivers/pci/*
	
	yeah, I ignored the ppc64 hotplug pci driver, they can fix it up themselves...
	
	Signed-off-by: Greg Kroah-Hartman <greg@kroah.com>

<johnrose@austin.ibm.com>
	[PATCH] PCI Hotplug: add host bridges to RPA hotplug subsystem
	
	The following patch implements the registration of PCI Host Bridges as hotplug
	slots.  Only host bridges that are dynamically removable will be registered.
	The hotplug slots directory goes from looking like this:
	
	# ls /sys/bus/pci/slots
	.             0000:00:02.2  0001:00:02.4  0002:00:02.2  30000000
	..            0000:00:02.4  0001:00:02.6  0002:00:02.4  control
	0000:00:02.0  0001:00:02.2  0002:00:02.0  0002:00:02.6
	
	to this:
	
	# ls /sys/bus/pci/slots
	.             0000:00:02.0  0001:00:00.0  0001:00:02.6  0002:00:02.2  30000000
	..            0000:00:02.2  0001:00:02.2  0002:00:00.0  0002:00:02.4  control
	0000:00:00.0  0000:00:02.4  0001:00:02.4  0002:00:02.0  0002:00:02.6
	
	This work is precursory to the DLPAR module changes that implement
	addition/removal of these bridges.  Please apply if there are no objections.
	
	Signed-off-by: John Rose <johnrose@austin.ibm.com>
	Signed-off-by: Greg Kroah-Hartman <greg@kroah.com>

<ben@fluff.org>
	[WATCHDOG] s3c2410_wdt.c-wdog-fix3.patch
	
	This patch fixes the following problems:
	- debug is now configurable from cmdline (see previous emails)
	- re-worked the open call
	- moved clock enable to before we setup watchdog
	  (some units on the s3c2410 don't like their registers changing
	   without the clock enabled)
	- fixed bug in having two timer counts, one unused
	- fixed semaphore initialisation, so opens no longer blow up

<kaneshige.kenji@jp.fujitsu.com>
	[PATCH] PCI: warn of missing pci_disable_device()
	
	As mentioned in Documentaion/pci.txt, pci device driver should call
	pci_disable_device() when it decides to stop using the device. But
	there are some drivers that don't use pci_disable_device() so far.
	
	This patch adds warning messages that are displayed if the device is
	removed without properly calling pci_disable_device().
	
	'WARN_ON(1)' is commented out for now because I guess many people
	(including some distros) enables 'CONFIG_DEBUG_KERNEL'. People might
	be surprised if many stack dumps are displayed on their console.
	
	Signed-off-by: Kenji Kaneshige <kaneshige.kenji@jp.fujitsu.com>
	Signed-off-by: Greg Kroah-Hartman <greg@kroah.com>

<dlsy@snoqualmie.dp.intel.com>
	[PATCH] PCI Hotplug: change bus speed patch
	
	Greg,
	
	
	Here is a patch (against 2.6.8-rc2) that fixes the following things:
	1) adds code to lower bus speed if the adapter card added run at a
	lower speed that the current bus speed; 2) checks for any devices on
	the same bus - not just those that sit on slots controlled by the same
	shpc; 3) cleans up the code in the check bus speed area in board_added()
	by creating two functions to handle common code.
	
	Signed-off-by: Dely Sy <dely.l.sy@intel.com>
	Signed-off-by: Greg Kroah-Hartman <greg@kroah.com>

<greg@kroah.com>
	[PATCH] PCI: fix __iomem * warnings for PCI msi core code.
	
	Signed-off-by: Greg Kroah-Hartman <greg@kroah.com>

<dimitry.andric@tomtom.com>
	[WATCHDOG] s3c2410_wdt.c-wdog-fix4.patch
	
	This patch moves the tmr_margin assignment until after the check for a
	correct timeout value. (Plus another minor cosmetic thing.)

<greg@kroah.com>
	[PATCH] PCI Hotplug: fix __iomem warnings in the compaq pci hotplug driver
	
	Signed-off-by: Greg Kroah-Hartman <greg@kroah.com>

<greg@kroah.com>
	[PATCH] PCI Hotplug: fix __iomem warnings in the ibm pci hotplug driver
	
	Signed-off-by: Greg Kroah-Hartman <greg@kroah.com>

<dlsy@snoqualmie.dp.intel.com>
	[PATCH] PCI Hotplug: Bug fixes for shpchp driver
	
	Can you please apply the following patch that has bug fixes for shpchp
	driver? One bug was writing 1's to RsvdZ in Slot Status register
	causing hot-plugging of PCI-X cards not working in some slots.  The
	other fix is for getting the correct bus number.
	
	
	Signed-off-by: Dely Sy <dely.l.sy@intel.com>
	Signed-off-by: Greg Kroah-Hartman <greg@kroah.com>

<greg@kroah.com>
	[PATCH] PCI Hotplug: fix the rest of the drivers for __iomem and other sparse issues.
	
	Signed-off-by: Greg Kroah-Hartman <greg@kroah.com>

<hannal@us.ibm.com>
	[PATCH] PCI: Fix one missed pci_find_device
	
	Just noticed this in my update to the latest mm kernel...
	
	
	Signed-off-by: Greg Kroah-Hartman <greg@kroah.com>

<greg@kroah.com>
	[PATCH] ibmasm: fix __iomem warnings
	
	Signed-off-by: Greg Kroah-Hartman <greg@kroah.com>

<johnrose@austin.ibm.com>
	[PATCH] PCI Hotplug: RPA dynamic addition/removal of PCI Host Bridges
	
	The following patch implements the RPA PCI Hotplug and DLPAR driver changes for
	the dynamic addition/removal of PCI Host bridges (PHBs).  These operations are
	initiated in the same way as existing slot DLPAR operations, which is by
	writing the firmware (drc) name of the PHB to:
	/sys/bus/pci/slots/control/[add,remove]_slot
	
	The "kernel" entry points for these operations are:
	pcibios_remove_root_bus()
		ppc64-specific, submitted to ppc64 list on 8/19, not yet accepted
		http://ozlabs.org/ppc64-patches/patch.pl?id=241
	init_phb_dynamic()
		ppc64-specific, submitted to ppc64 list on 9/16, not yet accepted
		http://ozlabs.org/ppc64-patches/patch.pl?id=292
	pci_remove_bus()
		generic, submitted and accepted by Greg
		http://www.uwsg.iu.edu/hypermail/linux/kernel/0408.3/0595.html
	
	Signed-off-by: John Rose <johnrose@austin.ibm.com>
	Signed-off-by: Greg Kroah-Hartman <greg@kroah.com>

<vernux@us.ibm.com>
	[PATCH] PCI Hotplug: acpiphp extension fixes
	
	This patch fixes an off by one error that one of the IBM machines that
	uses the acpiphp_ibm driver.  The slots were numbered starting at 0 in
	BIOS instead of starting at 1 like the pci hotplug subsystem names
	them.  So this patch provides a lookup to translate the Linux slot
	numbers to the internal ACPI numbers.
	
	Signed-off-by: Vernon Mauery <vernux@us.ibm.com>
	Signed-off-by: Greg Kroah-Hartman <greg@kroah.com>

<wim@iguana.be>
	[WATCHDOG] s3c2410_wdt.c-wdog-fix5.patch
	
	Changed nowayout handling so that it uses the "Kconfig" value.

<hannal@us.ibm.com>
	[PATCH] PCI: Changed pci_find_device to pci_get_device for acpi.c
	
	Another simple patch to complete the /i386 conversion to pci_get_device.
	I was able to compile and boot this patch to verify it didn't break anything
	(on my T22).
	
	Signed-off-by: Hanna Linder <hannal@us.ibm.com>
	Signed-off-by: Greg Kroah-Hartman <greg@kroah.com>

<dlsy@snoqualmie.dp.intel.com>
	[PATCH] PCI Hotplug: quirk fix missed out in last patch
	
	This patch contains a fix that was missed out in the last patch I sent
	you regarding fixes for writing 1's to RsvdZ in Slot Status register
	causing hot-plugging of PCI-X cards not working in some slots.
	
	Signed-off-by: Dely Sy <dely.l.sy@intel.com>
	Signed-off-by: Greg Kroah-Hartman <greg@kroah.com>

<lcapitulino@conectiva.com.br>
	[PATCH] PCI: add missing checks in drivers/pci/probe.c.
	
	 I noticed drivers/pci/probe.c::pci_scan_bus_parented() has some functions which
	the return value is not checked.
	
	 The patch bellow adds the check for device_register(), class_device_register(),
	class_device_create_file() and sysfs_create_link().
	
	(hope the error label names are not too ugly).
	
	
	Signed-off-by: Luiz Capitulino <lcapitulino@conectiva.com.br>
	Signed-off-by: Greg Kroah-Hartman <greg@kroah.com>

<greg@kroah.com>
	[PATCH] PCI: Create new function to see if a pci device is present
	
	This is needed to help get rid of the pci_find_device() usage in the tree.
	
	Signed-off-by: Hanna Linder <hannal@us.ibm.com>
	Signed-off-by: Greg Kroah-Hartman <greg@kroah.com>

<greg@kroah.com>
	[PATCH] PCI: change cyrix.c driver to use pci_dev_present
	
	Signed-off-by: Hanna Linder <hannal@us.ibm.com>
	Signed-off-by: Greg Kroah-Hartman <greg@kroah.com>

<buytenh@wantstofly.org>
	[PATCH] PCI: minor pci.ids update
	
	Here is another patch (against 2.6.9-rc2, not sure if that has the
	latest version of the PCI db) that removes the vendor names from Intel
	IXP and Radisys ENP entries, as per Martin's suggestion.
	
	
	Signed-off-by: Greg Kroah-Hartman <greg@kroah.com>

<rl@hellgate.ch>
	[PATCH] PCI: remove driver private PCI state, 1 arg for pci_{save,restore}_state
	
	This is the second (and hopefully final) iteration of the interface
	change we talked about a while ago. The patch applies cleanly against
	2.6.9-rc2-mm4.
	
	This removes the second argument (buffer for storing PCI state) from
	pci_{save,restore}_state since pci_dev contains such a buffer now.
	Fixed all callers.
	
	Three drivers used to pass a buffer of 256 bytes, one only 48(!). The
	rest was correct. Changes were compile tested, except for Alpha.
	
	Signed-off-by: Roger Luethi <rl@hellgate.ch>
	Signed-off-by: Greg Kroah-Hartman <greg@kroah.com>

<nacc@us.ibm.com>
	[PATCH] pci hotplug/shpchp: replace schedule_timeout() with msleep_interruptible()
	
	Use msleep_interruptible() instead of schedule_timeout() to guarantee
	the task delays as expected.
	
	Signed-off-by: Nishanth Aravamudan <nacc@us.ibm.com>
	Signed-off-by: Greg Kroah-Hartman <greg@kroah.com>

<nacc@us.ibm.com>
	[PATCH] pci hotplug/pciehp: replace schedule_timeout() with msleep_interruptible()
	
	Use msleep_interruptible() instead of schedule_timeout() to guarantee
	the task delays as expected.
	
	Signed-off-by: Nishanth Aravamudan <nacc@us.ibm.com>
	Signed-off-by: Greg Kroah-Hartman <greg@kroah.com>

<nacc@us.ibm.com>
	[PATCH] pci hotplug/cpqphp: replace schedule_timeout() with msleep_interruptible()
	
	Use msleep_interruptible() instead of schedule_timeout() to guarantee
	the task delays as expected.
	
	Signed-off-by: Nishanth Aravamudan <nacc@us.ibm.com>
	Signed-off-by: Greg Kroah-Hartman <greg@kroah.com>

<nacc@us.ibm.com>
	[PATCH] pci hotplug/cpqphp_ctrl: replace schedule_timeout() with msleep_interruptible()
	
	Use msleep_interruptible() instead of schedule_timeout() to guarantee
	the task delays as expected.
	
	Signed-off-by: Nishanth Aravamudan <nacc@us.ibm.com>
	Signed-off-by: Greg Kroah-Hartman <greg@kroah.com>

<paulus@samba.org>
	[PATCH] PPC64: Add pcibios_remove_root_bus
	
	From: John Rose <johnrose@austin.ibm.com>
	
	The following patch creates pcibios_remove_root_bus(), which performs
	the ppc64-specific actions for removal of PCI Host Bridges.  This call
	is invoked by the RPA DLPAR driver upon PHB removal.
	
	Signed-off-by: John Rose <johnrose@austin.ibm.com>
	Signed-off-by: Paul Mackerras <paulus@samba.org>
	Signed-off-by: Greg Kroah-Hartman <greg@kroah.com>

<greg@kroah.com>
	PCI Hotplug: Oops, didn't mean to apply the msi pci express patch, so revert it
	
	Signed-off-by: Greg Kroah-Hartman <greg@kroah.com>

<paulus@samba.org>
	[PATCH] PPC64: RPA dynamic addition/removal of PCI Host Bridges
	
	From: John Rose <johnrose@austin.ibm.com>
	
	The following patch implements the ppc64-specific bits for dynamic (DLPAR)
	addition of PCI Host Bridges.  The entry point for this operation is
	init_phb_dynamic(), which will be called by the RPA DLPAR driver.
	
	Among the implementation details, the global number aka PCI domain for the
	newly added PHB is assigned using the same simple counter that assigns it at
	boot.  This has two consequences.  First, the PCI domain associated with a PHB
	will not persist across DLPAR remove and subsequent add.  Second, stress tests
	that repeatedly add/remove PHBs might generate some large values for PCI
	domain.  If we decide at a later point to hash an OF property to PCI domain
	value, this can be easily fixed up.
	
	Also, the linux,pci-domain property is not generated for the newly added PHBs
	at the moment.  Because there doesn't seem to be an easy way to dynamically add
	single properties to the OFDT, and because the userspace dependency on this
	property is being questioned, I've ignored it for now.  If we decide on a
	solution for this at a later point, it can also be easily fixed up.
	
	Signed-off-by: John Rose <johnrose@austin.ibm.com>
	Signed-off-by: Paul Mackerras <paulus@samba.org>
	Signed-off-by: Greg Kroah-Hartman <greg@kroah.com>

<greg@kroah.com>
	[PATCH] PCI: remove pci_module_init() usage from drivers/pci/hotplug/*
	
	Signed-off-by: Greg Kroah-Hartman <greg@kroah.com>

<greg@kroah.com>
	[PATCH] PCI: clean up pci_dev_get() to be sane
	
	Signed-off-by: Greg Kroah-Hartman <greg@kroah.com>

<johnrose@austin.ibm.com>
	[PATCH] PCI Hotplug: RPA DLPAR - remove error check
	
	Here's a really long explanation for a really short patch! :)
	
	As an unfortunate side effect of runtime addition/removal of PCI Host Bridges,
	the RPA DLPAR driver can no longer depend on the success of ioremap_explicit()
	(and therefore remap_page_range()) for the case of DLPAR adding an I/O Slot.
	
	Without addressing this, an attempt to add the first child slot of a newly
	added PHB will fail when __ioremap_explicit() determines the mappings for that
	range to already exist.
	
	For a little context, __ioremap_explicit() creates mappings for the range of a
	newly added slot.  Here's why these calls will be expected to fail in some
	cases.  Keep in mind that at boot-time, the PPC64 kernel calls ioremap() for
	the entire range spanned by each PHB.  Consider the following scenarios of
	DLPAR-adding an I/O slot.
	
	1) Just after boot, one removes an I/O slot.  At this point the range
	   associated with the parent PHB is fragmented, and the child range for the
	   slot in question is iounmap()'ed.  One then re-adds the slot, at which point
	   remap_page_range()/ioremap_explicit() restores the mappings that were
	   previously removed.
	
	2) One adds a new PHB, at which point the ppc64-specific addition ioremaps the
	   entire PHB range.  One then performs a DLPAR-add of a child slot of that
	   PHB.  At this point, mappings already exist for the range of the slot to
	   be added.  So remap_page_range()/ioremap_explicit() will fail at this point.
	
	The problem is, there's not a good way to distinguish between cases 1 and 2
	from the perspective of the DLPAR driver.  Because of that, I believe the
	correct solution to be:
	
	- Removal of relevant error prints from iounmap_explicit(), which is only used
	  for DLPAR.
	- Removal of error code checks from the RPA driver
	
	
	Signed-off-by: John Rose <johnrose@austin.ibm.com>
	Signed-off-by: Greg Kroah-Hartman <greg@kroah.com>

<greg@kroah.com>
	[PATCH] PCI: remove all usages of pci_dma_sync_sg as it's obsolete.
	
	Signed-off-by: Greg Kroah-Hartman <greg@kroah.com>

<greg@kroah.com>
	[PATCH] PCI: remove all usages of pci_dma_sync_single as it's obsolete.
	
	Signed-off-by: Greg Kroah-Hartman <greg@kroah.com>

<greg@kroah.com>
	[PATCH] PCI: fix up pci_register_driver() to stop lying in its return value.
	
	It shouldn't return 1, it needs to return either -ERROR or 0.
	
	Signed-off-by: Greg Kroah-Hartman <greg@kroah.com>

<greg@kroah.com>
	[PATCH] PCI: audit all callers of pci_register_driver() to work properly.
	
	No, pci_register_driver() does not return the number of pci devices found, sorry.
	No, if pci_register_driver() fails, you do not need to call pci_unregister_driver().
	
	Signed-off-by: Greg Kroah-Hartman <greg@kroah.com>

<greg@kroah.com>
	[PATCH] PCI: pci_module_init() is identical to pci_register_driver() so just make it a #define
	
	It needs to stay this way until all usages of pci_module_init() are purged
	from the tree.
	
	Signed-off-by: Greg Kroah-Hartman <greg@kroah.com>

<greg@kroah.com>
	[PATCH] PCI: remove pci_module_init() usage from drivers/usb/*
	
	Signed-off-by: Greg Kroah-Hartman <greg@kroah.com>

<akpm@osdl.org>
	[PATCH] PCI: CONFIG_PCI=n build fix
	
	With CONFIG_PCI=n:
	
	arch/i386/kernel/cpu/cyrix.c: In function `init_cyrix':
	arch/i386/kernel/cpu/cyrix.c:285: `cyrix_55x0' undeclared (first use in this function)
	arch/i386/kernel/cpu/cyrix.c:285: (Each undeclared identifier is reported only once
	arch/i386/kernel/cpu/cyrix.c:285: for each function it appears in.)
	
	Make pci_dev_present() a macro.  It doesn't make sense to require that
	pci_device_id's be in scope when CONFIG_PCI=n
	
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Greg Kroah-Hartman <greg@kroah.com>

<akpm@osdl.org>
	[PATCH] PCI: pci_dev_put() build fix
	
	With CONFIG_PCI=n:
	
	arch/i386/kernel/cpu/mtrr/main.c: In function `have_wrcomb':
	arch/i386/kernel/cpu/mtrr/main.c:86: warning: implicit declaration of function `pci_dev_put
	
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Greg Kroah-Hartman <greg@kroah.com>

<akpm@osdl.org>
	[PATCH] USB: Fix hiddev devfs oops
	
	From: Herbert Xu <herbert@gondor.apana.org.au>
	
	There is a long-standing devfs_unregister oops in hid/hiddev.  It's caused
	by hid calling hiddev_exit before unregistering itself which in turn calls
	hiddev_disconnect.
	
	hiddev_exit removes the directory which contains the hiddev devices.
	Therefore it needs to be called after the hiddev devices have been
	disconnected.
	
	Signed-off-by: Herbert Xu <herbert@gondor.apana.org.au>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Greg Kroah-Hartman <greg@kroah.com>

<jejb@titanic.il.steeleye.com>
	Fix up 3w-xxxx after NULL removal mismerge
	
	Looks like there were also several other NULL<->0 replacements
	necessary in the new code.
	
	Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

<jejb@titanic.il.steeleye.com>
	remove config_compat from Megaraid
	
	From: "Bagalkote, Sreenivas" <sreenib@lsil.com>
	
	Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

<akpm@osdl.org>
	[PATCH] fix acenic hotplug
	
	From: Anton Blanchard <anton@samba.org>
	
	Now that the acenic has been converted to the hotplug API a number of uses
	of __init and __initdata have to be changed to __devinit and __devinitdata.
	
	Acked-by: Jes Sorensen <jes@trained-monkey.org>
	Signed-off-by: Anton Blanchard <anton@samba.org>
	Signed-off-by: Andrew Morton <akpm@osdl.org>

<perex@suse.cz>
	[ALSA]  Fix the variable types in struct
	
	RME HDSP driver
	The variable types are declared explicitly like u32 and u64
	to avoid ambiguity.
	
	Signed-off-by: Takashi Iwai <tiwai@suse.de>

<perex@suse.cz>
	[ALSA]  more au88x0 eq cleanups
	
	au88x0 driver
	cleanup au88x0 equalizer code by factoring out a sign_invert function
	that ensures all negative integers become positive.
	
	Signed-off-by: Jeff Muizelaar <muizelaar@rogers.com>
	Signed-off-by: Takashi Iwai <tiwai@suse.de>

<perex@suse.cz>
	[ALSA]  Fix HDSP meter ioctl
	
	RME HDSP driver
	Fixes and clean up of GET_PEAK_RMS ioctl.
	
	Signed-off-by: Takashi Iwai <tiwai@suse.de>

<perex@suse.cz>
	[ALSA]  Fix DXS entry for GA-7VAX
	
	VIA82xx driver
	From: 1 1 <anoy@mail.ru>
	
	I have tested my MB GA-7VAX and want to say you that you should use
	VIA_DXS_ENABLE instead VIA_DXS_NO_VRA.  On the maximum volume output level
	with VIA_DXS_NO_VRA there is abnormal loud noise, and with VIA_DXS_ENABLE
	there are much less noises.  And I have detected unused code section.
	
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Takashi Iwai <tiwai@suse.de>

<perex@suse.cz>
	[ALSA]  Aureon S/PDIF input fixes
	
	ICE1712 driver
	Fix GPIO pin directions and use RXP1 instead of RXP0 as S/PDIF source on CS8415A
	
	Signed-off-by: Peter Christensen <peter@developers.dk>
	Signed-off-by: Takashi Iwai <tiwai@suse.de>

<perex@suse.cz>
	[ALSA]  Aureon S/PDIF input fixes
	
	ICE1712 driver
	GPIO directions changed
	   * GPIO>22 not configured as they do not exist
	   * GPIO22 set to output (CS8415A CS pin)
	   * GPIO21 set to input. (SPI MISO pin)
	
	Init sequence of CS8415A changed:
	  * SWCLK is set to 1 (OMCK output to RMCK pin)
	  * MUX2:0 is set to 001 (S/PDIF input on RXP1)
	  * SODEL is set to 1 (MSB of SDOUT data occurs if the second OSCLK period after the OLRCK edge)
	  * SOLRPOL is set to 1 (SDOUT data is for the right channel with OLRCK is high)
	
	Signed-off-by: Peter Christensen <peter@christensen>
	Signed-off-by: Takashi Iwai <tiwai@suse.de>

<perex@suse.cz>
	[ALSA]  Fix drain/drop of linked PCM streams
	
	PCM Midlevel
	This patch fixes the dead-locking of linked PCM streams when
	drain/drop is called.  The counter field is added to pcm group
	struct to handle link/unlink more easily.
	
	When the PCM streams are linked, start/drain/drop are operated
	to all linked streams.  The drain will wait until draining of all
	linked streams are finished.
	
	The XRUN triggers stopping of all linked streams and changes the
	state of all of them to XRUN even if only one of them is actually
	in XRUN.
	
	Signed-off-by: Takashi Iwai <tiwai@suse.de>

<aia21@cantab.net>
	NTFS: - Move ntfs_{un,}map_page() from ntfs.h to aops.h and fix resulting
	        include errors.
	      - Move typedefs for runlist_element and runlist from ntfs.h to
	        runlist.h and fix resulting include errors.
	
	Signed-off-by: Anton Altaparmakov <aia21@cantab.net>

<perex@suse.cz>
	[ALSA]  snd-usb-usx2y 0.7.3
	
	USB generic driver,USB USX2Y
	Use usb_kill_urb() instead of deprecated usb_unlink_urb()
	
	Signed-off-by: Karsten Wiese <annabellesgarden@yahoo.de>
	Signed-off-by: Takashi Iwai <tiwai@suse.de>

<aia21@cantab.net>
	NTFS: Remove unused {__,}format_mft_record() from fs/ntfs/mft.c.
	
	Signed-off-by: Anton Altaparmakov <aia21@cantab.net>

<perex@suse.cz>
	[ALSA]  Replace with usb_kill_urb()
	
	USB generic driver
	Use usb_kill_urb() instead of deprecated usb_unlink_urb() for sync'ed URBs.
	
	Signed-off-by: Takashi Iwai <tiwai@suse.de>

<perex@suse.cz>
	[ALSA]  Fix peakmeter ioctl on big-endian
	
	RME HDSP driver
	Fixed the data transfer of peakmeter ioctl on big-endian architectures.
	
	Signed-off-by: Takashi Iwai <tiwai@suse.de>

<perex@suse.cz>
	[ALSA]  Clean up ice1712 chip struct
	
	ICE1712 driver
	Clean up of ice1712 chip struct.  The board-specific data are moved
	to spec union.
	
	Signed-off-by: Takashi Iwai <tiwai@suse.de>

<perex@suse.cz>
	[ALSA]  Adds AC'97 support to Aureon cards.
	
	ICE1712 driver
	This patch adds support of the STAC9744 chip located on Aureon cards,
	enabling volume control for analogue input channels.
	It also adds the posibility of listening to both the analogue inputs
	and the digital audio.
	
	Signed-off-by: Peter Christensen <peter@developers.dk>
	Signed-off-by: Takashi Iwai <tiwai@suse.de>

<perex@suse.cz>
	[ALSA]  Add reset_workaround module option
	
	Documentation,NM256 driver
	- The workaround for some laptops like Dell Latitude LS can be
	  specified via reset_workaround module option, too.
	- The check of reset_workaround is merged into the quirk table.
	- The spinlock in AC97 reset callback is removed.
	
	Signed-off-by: Takashi Iwai <tiwai@suse.de>

<perex@suse.cz>
	[ALSA]  add overclocking option for the analog input
	
	PCI drivers,BT87x driver
	adds CONFIG_SND_BT87X_OVERCLOCK to enable sample rates
	up to 1792000 Hz when recording from the analog input
	
	Signed-off-by: Clemens Ladisch <clemens@ladisch.de>

<perex@suse.cz>
	[ALSA]  Add (experimental) CM9761 support
	
	AC97 Codec Core
	CM9761 support patch is added.
	At least, SPDIF and 4.0 output seems working.
	
	Signed-off-by: Takashi Iwai <tiwai@suse.de>

<perex@suse.cz>
	[ALSA]  Fix SPDIF support on ICH4/5/6
	
	Intel8x0 driver
	Fixed SPDIF support on ICH4/5/6.  The driver name of these chipsets
	is set as 'ICH4' to tell from the older ICHs.
	
	Signed-off-by: Takashi Iwai <tiwai@suse.de>

<perex@suse.cz>
	[ALSA]  Fix AC97 master mute
	
	ICE1712 driver
	Instead of muting the AC97 chip and thus eliminating the possibility of recording,
	muting is done by setting front playback to DAC only instead of DAC+AUX.
	
	Signed-off-by: Peter Christensen <ungod@developers.dk>
	Signed-off-by: Takashi Iwai <tiwai@suse.de>

<perex@suse.cz>
	[ALSA]  Fix AC3 playback on SB Live
	
	EMU10K1/EMU10K2 driver
	Fix the AC3 playback on SB Live!
	(Audigy has been working fine.)
	
	Signed-off-by: Takashi Iwai <tiwai@suse.de>

<perex@suse.cz>
	ALSA CVS update
	USB generic driver
	add Edirol UA-25 support
	
	Signed-off-by: Clemens Ladisch <clemens@ladisch.de>

<perex@suse.cz>
	[ALSA]  Fix / clean up OPL3 for CS4281
	
	Documentation,OPL3,CS4281 driver
	Moved cs4281-specific code into cs4281 driver from opl3.
	The ugly type-casting is removed now.
	
	The opl3 instance can be created via snd_opl3_new() (followed by
	snd_opl3_init()) to allow the driver to set its own command and
	private_data/private_free.
	
	snd_opl3_create() is kept for compatibility as it was.
	
	Signed-off-by: Takashi Iwai <tiwai@suse.de>

<perex@suse.cz>
	[ALSA]  fix DAC slot assignment
	
	AC97 Codec Core
	write the DAC slot assignment bits to the extended ID register
	where they belong instead of overwriting the SPSA bits in the
	extended status register
	
	Signed-off-by: Clemens Ladisch <clemens@ladisch.de>

<perex@suse.cz>
	[ALSA]  fix description of SPSA=3 in the proc file
	
	AC97 Codec Core
	
	
	Signed-off-by: Clemens Ladisch <clemens@ladisch.de>

<perex@suse.cz>
	[ALSA]  fix snd_opl3_init documentation
	
	Documentation
	
	
	Signed-off-by: Clemens Ladisch <clemens@ladisch.de>

<perex@suse.cz>
	[ALSA]  Clean up bitmap
	
	EMU10K1/EMU10K2 driver
	Clean up the declaration of bitmap with DECLARE_BITMAP().
	
	Signed-off-by: Takashi Iwai <tiwai@suse.de>

<perex@suse.cz>
	[ALSA]  Fix dead blocking during module_init()
	
	ALSA sequencer,ALSA<-OSS sequencer
	Fixed the auto-loading of modules during module_init().
	
	Signed-off-by: Takashi Iwai <tiwai@suse.de>

<perex@suse.cz>
	[ALSA]  Fix pci_restore_state()
	
	ALSA Core
	Fixed pci_save_state() call with the new API.
	
	Signed-off-by: Takashi Iwai <tiwai@suse.de>

<aia21@cantab.net>
	NTFS: - Modify fs/ntfs/mft.c::__mark_mft_record_dirty() to use the helper
	        mark_ntfs_record_dirty() which also changes the behaviour in that we
	        now set the buffers belonging to the mft record dirty as well as the
	        page itself.
	      - Update fs/ntfs/mft.c::write_mft_record_nolock() and sync_mft_mirror()
	        to cope with the fact that there now are dirty buffers in mft pages.
	
	Signed-off-by: Anton Altaparmakov <aia21@cantab.net>

<perex@suse.cz>
	[ALSA]  Add KERN_ERR to error messages
	
	ALSA Core
	Added KERN_ERR prefix to error messages in snd_assert() and
	snd_runtime_check() macros.
	
	Signed-off-by: Takashi Iwai <tiwai@suse.de>

<perex@suse.cz>
	[ALSA]  Fix typo
	
	ALSA sequencer
	Fixed a typo for snd_seq_autoload_lock() in the last change
	(only for the case without CONFIG_KMOD).
	
	Signed-off-by: Takashi Iwai <tiwai@suse.de>

<perex@suse.cz>
	[ALSA]  Added dxs quirk for QDI Kudoz 7X/600-6AL
	
	VIA82xx driver
	Added the default dxs_support entry for QDI Kudoz 7X/600-6AL.
	
	Signed-off-by: Takashi Iwai <tiwai@suse.de>

<perex@suse.cz>
	[ALSA]  Fix ac97 codec reset and clean up
	
	CS46xx driver
	- Fixed AC97 codec RESET for duel codecs (only for CONFIG_SND_CS46XX_NEW_DSP)
	- Clean up the codec detection routine
	
	Signed-off-by: Takashi Iwai <tiwai@suse.de>

<perex@suse.cz>
	[ALSA]  Fix compilation (sync with parisc tree)
	
	PARISC Harmony driver
	Sync with parisc tree - fix compilations, module description fixes.
	
	Signed-off-by: Takashi Iwai <tiwai@suse.de>

<perex@suse.cz>
	[ALSA]  Fix Aureon CCS init sequence
	
	ICE1712 driver
	- Fix Aureon 5.1 Sky GPIO write mask bits
	- Fix 192kHz bit
	
	Signed-off-by: Peter Christensen <peter@developers.dk>
	Signed-off-by: Takashi Iwai <tiwai@suse.de>

<perex@suse.cz>
	[ALSA]  Fix the detection of secondary codec
	
	CS46xx driver
	Fixed the detection of secondary codec.
	
	Signed-off-by: Takashi Iwai <tiwai@suse.de>

<dwmw2@shinybook.infradead.org>
	USB: SpeedTouch / ATM update:
	
	 - Continue polling even if we receive a 'line down' interrupt. The
	   Rev 4 modems give that one but not 'line up'.
	 - Make the warn() on debugging assertions actually conditional :)
	 - Keep a reference count on the module while its thread is running.
	 - Provide empty exit function for usb_atm.ko so it's unloadable.
	 - Handle firmware which is in /usr so only turns up later.
	
	Signed-off-by: David Woodhouse <dwmw2@infradead.org>
	Signed-off-by: Greg Kroah-Hartman <greg@kroah.com>

<olh@suse.de>
	[NET]: Allow CONFIG_NET=n on ppc64.
	
	Signed-off-by: Olaf Hering <olh@suse.de>
	Signed-off-by: David S. Miller <davem@davemloft.net>

<marcel@holtmann.org>
	[Bluetooth] Let the CAPI free the SKB in the error case
	
	If the CAPI send_message() function returns with anything else than
	CAPI_NOERROR then there is no need to free the SKB. The CAPI will take
	care of it by itself.
	
	Signed-off-by: Marcel Holtmann <marcel@holtmann.org>

<acme@conectiva.com.br>
	[SKBUFF] move common code to hdlc_type_trans
	
	Signed-off-by: Arnaldo Carvalho de Melo <acme@conectiva.com.br>
	Signed-off-by: David S. Miller <davem@redhat.com>

<marcel@holtmann.org>
	[Bluetooth] Add module parameter for disabling ISOC transfers
	
	Some USB host controllers don't like the way Bluetooth USB dongles uses
	the isochronous transfers for the SCO audio support. This patch makes it
	possible to disable them without recompiling the driver.
	
	Signed-off-by: Marcel Holtmann <marcel@holtmann.org>

<marcel@holtmann.org>
	[Bluetooth] Add security manager flags and options
	
	This patch adds the initial flags and options for the upcoming kernel
	based Bluetooth security manager.
	
	Signed-off-by: Marcel Holtmann <marcel@holtmann.org>

<marcel@holtmann.org>
	[Bluetooth] Stop TX task before notifying the driver
	
	When notifying the driver of a changed voice setting the TX task must
	be stopped first. Otherwise the driver don't have a chance to switch
	the settings if needed.
	
	Signed-off-by: Marcel Holtmann <marcel@holtmann.org>

<len.brown@intel.com>
	[ACPI] Notify SMM of cpufreq
	http://marc.theaimsgroup.com/?l=acpi4linux&m=109428989121089&w=2
	
	Signed-off-by: Dominik Brodowski <linux@brodo.de>

<rmk@flint.arm.linux.org.uk>
	[ARM] Convert system ticker timer to sysdev model.
	
	Machine support files are now expected to provide a sys_timer
	structure which encapsulates everything to do with the kernels
	system timer, and provides elegant with the system device model.
	In addition, it provides the relevant power management hooks.

<rmk@flint.arm.linux.org.uk>
	[ARM] Move OS timer suspend/resume from pm.c to time.c
	
	This makes OS timer suspend/resume part of the system device power
	management model.

<rmk@flint.arm.linux.org.uk>
	[ARM] Separate out footbridge DC21285 and ISA timer implementations.

<len.brown@intel.com>
	EXPORT_SYMBOL(acpi_os_write_port);
	EXPORT_SYMBOL(acpi_fadt_is_v1);

<aia21@cantab.net>
	NTFS: Update fs/ntfs/inode.c::ntfs_write_inode() to also use the helper
	      mark_ntfs_record_dirty() and thus to set the buffers belonging to the
	      mft record dirty as well as the page itself.
	
	Signed-off-by: Anton Altaparmakov <aia21@cantab.net>

<aia21@cantab.net>
	NTFS: Fix warnings on x86-64.  (Randy Dunlap with slight modification from me)
	
	Fix printk arg type warnings on x86-64 (and OK on x86-32) (gcc 3.3.3):
	fs/ntfs/dir.c:1272: warning: long long unsigned int format, long unsigned int arg (arg 6)
	fs/ntfs/dir.c:1388: warning: long long unsigned int format, long unsigned int arg (arg 5
	
	Signed-off-by: Randy Dunlap <rddunlap@osdl.org>
	Signed-off-by: Anton Altaparmakov <aia21@cantab.net>

<aia21@cantab.net>
	NTFS: Add fs/ntfs/mft.c::try_map_mft_record() which fails with -EALREADY if
	      the mft record is already locked and otherwise behaves the same way
	      as fs/ntfs/mft.c::map_mft_record().
	
	Signed-off-by: Anton Altaparmakov <aia21@cantab.net>

<jejb@titanic.il.steeleye.com>
	scsi: fix host transport allocations
	
	Spotted by: <James.Smart@emulex.com>
	
	The allocation in scsi_host_alloc() is completely innefective because
	the host has only just been allocated and is set to the blank transport
	template (with zero size for host attributes).
	
	On the current model, the host attribute storage must be allocated later
	in scsi_add_host() when the driver has had an opportunity to set the transport
	template.
	
	This is getting a bit cumbersome, so it might also be better simply
	to move the transport template from the host structure into the host
	template structure instead.
	
	Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

<pfg@sgi.com>
	[IA64-SGI] Remove Altix I/O code (ready for re-org).
	
	Signed-off-by: Patrick Gefre <pfg@sgi.com>
	Signed-off-by: Tony Luck <tony.luck@intel.com>

<pfg@sgi.com>
	[IA64-SGI] Add in Altix I/O code
	
	Signed-off-by: Patrick Gefre <pfg@sgi.com>
	Signed-off-by: Tony Luck <tony.luck@intel.com>

<pfg@sgi.com>
	[IA64] qla1280.c Mod for Altix I/O add code.
	
	Changes inside CONFIG_IA64_GENERIC CONFIG_IA64_SGI_SN2
	Need to include sn/io.h for generic builds (sn_+pci_set_vchan def)
	Remove rrb alloc - now done in PROM
	Remove endian setting - now done in PROM
	Change arg 2 for sn_pci_set_vchan()
	
	Acked-by: Jes Sorenson
	
	Signed-off-by: Patrick Gefre <pfg@sgi.com>
	Signed-off-by: Tony Luck <tony.luck@intel.com>

<pfg@sgi.com>
	[IA64-SGI] Fix issue with gemini TIO systems
	
	Signed-off-by: Patrick Gefre <pfg@sgi.com>
	Signed-off-by: Tony Luck <tony.luck@intel.com>

<pfg@sgi.com>
	[IA64-SGI] Redundant BUG check
	
	Signed-off-by: Patrick Gefre <pfg@sgi.com>
	Signed-off-by: Tony Luck <tony.luck@intel.com>

<jejb@titanic.il.steeleye.com>
	53c700: update driver for host spi class
	
	Since currently the host class isn't initialised until scsi_add_host(), we
	have to make sure we don't set the spi_signalling() attribute until after
	this has been run.
	
	Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

<pfg@sgi.com>
	[IA64-SGI] Fix a possible memory leak.
	
	Fix a possible memory leak.  Change the name of the 'new_sn_irq_info'
	variable to 'tmp_sn_irq_info' since we're not really allocating a new
	kernel sn_irq_info, we just getting new target information from the
	PROM and replacing it in the kernel's sn_irq_info for the given irq
	
	Signed-off-by: Patrick Gefre <pfg@sgi.com>
	Signed-off-by: Tony Luck <tony.luck@intel.com>

<pfg@sgi.com>
	[IA64-SGI] make pci_root_ops non static
	
	add extern for pci_root_ops
	delete our version of the pci_root_ops code
	make pci_root_ops non static
	
	Ack-by: Matthew Wilcox
	Ack-by: Jesse Barnes
	Ack-by: Grant Grundler
	
	Signed-off-by: Patrick Gefre <pfg@sgi.com>
	Signed-off-by: Tony Luck <tony.luck@intel.com>

<aia21@cantab.net>
	NTFS: Modify fs/ntfs/mft.c::write_mft_record_nolock() so that it only
	      writes the mft record if the buffers belonging to it are dirty.
	      Otherwise we assume that it was written out by other means already.
	
	Signed-off-by: Anton Altaparmakov <aia21@cantab.net>

<bzolnier@elka.pw.edu.pl>
	[PATCH] libata: PCI IDE legacy mode fix
	
	In PCI IDE legacy mode ap->port_no is incorrectly set to zero for
	the second port.  Fix it by adding ->hard_port_no to struct ata_probe_ent
	and struct ata_port (per Jeff's suggestion) and teaching ata_piix.c
	to use it instead of ->port_no.
	
	Signed-off-by: Bartlomiej Zolnierkiewicz <bzolnier@gmail.com>

<aia21@cantab.net>
	NTFS: Attempting to write outside initialized size is _not_ a bug so remove
	      the bug check from fs/ntfs/aops.c::ntfs_write_mst_block().  It is in
	      fact required to write outside initialized size when preparing to
	      extend the initialized size.
	
	Signed-off-by: Anton Altaparmakov <aia21@cantab.net>

<aia21@cantab.net>
	NTFS: Map the page instead of using page_address() before writing to it in
	      fs/ntfs/aops.c::ntfs_mft_writepage().
	
	Signed-off-by: Anton Altaparmakov <aia21@cantab.net>

<aia21@cantab.net>
	NTFS: Provide exclusion between opening an inode / mapping an mft record
	      and accessing the mft record in fs/ntfs/mft.c::ntfs_mft_writepage()
	      by setting the page not uptodate throughout ntfs_mft_writepage().
	
	Signed-off-by: Anton Altaparmakov <aia21@cantab.net>

<hch@lst.de>
	[PATCH] tmscsim: remove remaining INQUIRY sniffing
	
	Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

<akpm@osdl.org>
	[PATCH] psi240i build fix
	
	drivers/scsi/psi240i.c:713: unknown field `abort' specified in initializer
	drivers/scsi/psi240i.c:713: warning: initialization from incompatible pointer type
	drivers/scsi/psi240i.c:714: unknown field `reset' specified in initializer
	drivers/scsi/psi240i.c:714: warning: initialization from incompatible pointer typ
	
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

<hch@lst.de>
	[PATCH] get rid of obsolete APIs in BusLogic
	
	Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

<hch@lst.de>
	[PATCH] get rid of obsolete APIs in nsp32
	
	Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

<hch@lst.de>
	[PATCH] fdomain: reduce usage of global variables
	
	preparation for supporting more than HBA instance
	
	Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

<luben_tuikov@adaptec.com>
	[PATCH] Adding PCI ID tables to aic7xxx and aic79xxx
	
	Adding proper PCI ID tables to aic7xxx and aic79xx.
	
	Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

<rmk@flint.arm.linux.org.uk>
	[ARM] Fix Integrator timer implementation.

<pekon@fi.muni.cz>
	[PATCH] PATCH: netpoll with xircom_cb
	
	I have a headless computer with xircom pcmcia card and needed netconsole
	on it. After looking around in other drivers I concocted this patch.  It
	survived light testing. I have no documentation for the hw, so it maybe
	totally bogus.

<aia21@cantab.net>
	NTFS: Big cleanup of mft record writing code.
	
	- Clear the page uptodate flag in fs/ntfs/aops.c::ntfs_write_mst_block()
	  to ensure noone can see the page whilst the mst fixups are applied.
	- Add the helper fs/ntfs/mft.c::ntfs_may_write_mft_record() which
	  checks if an mft record may be written out safely obtaining any
	  necessary locks in the process.  This is used by
	  fs/ntfs/aops.c::ntfs_write_mst_block().
	- Modify fs/ntfs/aops.c::ntfs_write_mst_block() to also work for
	  writing mft records and improve its error handling in the process.
	  Now if any of the records in the page fail to be written out, all
	  other records will be written out instead of aborting completely.
	- Remove ntfs_mft_aops and update all users to use ntfs_mst_aops.
	- Modify fs/ntfs/inode.c::ntfs_read_locked_inode() to set the
	  ntfs_mst_aops for all inodes which are NInoMstProtected() and
	  ntfs_aops for all other inodes.
	- Rename fs/ntfs/mft.c::sync_mft_mirror{,_umount}() to
	  ntfs_sync_mft_mirror{,_umount}() and change their parameters so they
	  no longer require an ntfs inode to be present.  Update all callers.
	- Cleanup the error handling in fs/ntfs/mft.c::ntfs_sync_mft_mirror().
	- Clear the page uptodate flag in fs/ntfs/mft.c::ntfs_sync_mft_mirror()
	  to ensure noone can see the page whilst the mst fixups are applied.
	- Remove the no longer needed fs/ntfs/mft.c::ntfs_mft_writepage() and
	  fs/ntfs/mft.c::try_map_mft_record().
	- Fix callers of fs/ntfs/aops.c::mark_ntfs_record_dirty() to call it
	  with the ntfs inode which contains the page rather than the ntfs
	  inode the mft record of which is in the page.
	
	Ooops.  Yes, I know, I should have split this up into smaller changes...
	
	Signed-off-by: Anton Altaparmakov <aia21@cantab.net>

<aia21@cantab.net>
	NTFS: - Fix two race conditions in fs/ntfs/inode.c::ntfs_put_inode().
	
	- Fix race condition in fs/ntfs/inode.c::ntfs_put_inode() by moving the
	  index inode bitmap inode release code from there to
	  fs/ntfs/inode.c::ntfs_clear_big_inode().  (Thanks to Christoph
	  Hellwig for spotting this.)
	- Fix race condition in fs/ntfs/inode.c::ntfs_put_inode() by taking the
	  inode semaphore around the code thst sets ni->itype.index.bmp_ino to
	  NULL and reorganize the code to optimize it a bit.  (Thanks to
	  Christoph Hellwig for spotting this.)
	
	Signed-off-by: Anton Altaparmakov <aia21@cantab.net>

<akpm@osdl.org>
	[PATCH] smc91x: Revert 1.1923.3.58: "m32r: modify drivers/net/smc91x.c for m32r"
	
	From: Nicolas Pitre <nico@cam.org>
	
	This change is flaky. Also conflicting with planned update
	of the driver.
	
	Signed-off-by: Nicolas Pitre <nico@cam.org>
	Signed-off-by: Andrew Morton <akpm@osdl.org>

<akpm@osdl.org>
	[PATCH] smc91x: Assorted minor cleanups
	
	From: Nicolas Pitre <nico@cam.org>
	
	- turn #if THROTTLE_TX into C code
	- adjust some debug messages
	- factorize code a litle
	- fix warnings with gcc-3.4.1
	- etc.
	
	Signed-off-by: Nicolas Pitre <nico@cam.org>
	Signed-off-by: Andrew Morton <akpm@osdl.org>

<akpm@osdl.org>
	[PATCH] smc91x: set the MAC addr from the smc_enable function
	
	From: Nicolas Pitre <nico@cam.org>
	
	This is a pre-requisite for patch 05.  Also a good thing to do.
	
	Signed-off-by: Nicolas Pitre <nico@cam.org>
	Signed-off-by: Andrew Morton <akpm@osdl.org>

<akpm@osdl.org>
	[PATCH] smc91x: fold smc_setmulticast() into smc_set_multicast_list()
	
	From: Nicolas Pitre <nico@cam.org>
	
	This allows for access to the chip to be entirely factorized, and
	proper locking to be added over an extremely small critical area.
	
	Also a prerequisite for patch 05.
	
	Signed-off-by: Nicolas Pitre <nico@cam.org>
	Signed-off-by: Andrew Morton <akpm@osdl.org>

<akpm@osdl.org>
	[PATCH] smc91x: simplify register bank usage
	
	From: Nicolas Pitre <nico@cam.org>
	
	Let's avoid all that crap of preserving the bank to restore it all the time if
	that's not necessary.  The rule is simple: bank 2 is the only allowed bank
	when the chip is active and unlocked.  Anything that needs to change the bank
	to something other than bank 2 must lock against any concurrent access and
	return to bank 2 before unlocking.
	
	Signed-off-by: Nicolas Pitre <nico@cam.org>
	Signed-off-by: Andrew Morton <akpm@osdl.org>

<akpm@osdl.org>
	[PATCH] smc91x: move TX processing out of IRQ context entirely
	
	From: Nicolas Pitre <nico@cam.org>
	
	When large amount of packets are sent, the most likely source of throttling
	(when THROTTLE_TX_PKTS is off) is the completion of on-chip buffer allocation
	that triggers an IRQ.
	
	Instead of pushing data to the chip in IRQ context, we now schedule a tasklet
	which has the big advantage of being interruptible by the RX packet IRQ giving
	the RX processing the ultimate priority over anything else.  This is really
	important especially on the SMC91C111 which has only 4 packet buffers total
	regardless of packet size and has a tendency of suffering from RX overruns.
	This change allows RX packets to be pulled immediately upon arrival instead of
	having to wait for a (possibly much larger) TX packet to be entirely pushed
	onto the chip.
	
	The THROTTLE_TX_PKTS logic is also a bit more efficient as it now looks for a
	packet already been transmitted before stopping the queue therefore decreasing
	unnecessary TX idle periods while still keeping most buffers free for RX
	packets.
	
	Signed-off-by: Nicolas Pitre <nico@cam.org>
	Signed-off-by: Andrew Morton <akpm@osdl.org>

<akpm@osdl.org>
	[PATCH] smc91x: use a work queue to reconfigure the phy from  smc_timeout()
	
	From: Nicolas Pitre <nico@cam.org>
	
	This way we can reconfigure the phy and sleep as needed.
	
	Also removed unnecessary locking from smc_phy_powerdown() since the chip is
	not active anymore when this is called.
	
	Signed-off-by: Nicolas Pitre <nico@cam.org>
	Signed-off-by: Andrew Morton <akpm@osdl.org>

<akpm@osdl.org>
	[PATCH] smc91x: fix possible leak of the skb waiting for mem  allocation
	
	From: Nicolas Pitre <nico@cam.org>
	
	Free the pending TX skb inside smc_reset() rather than doing it where
	smc_reset() is called.  Worse, some places just didn't care.  Also do it when
	closing the driver.
	
	Signed-off-by: Nicolas Pitre <nico@cam.org>
	Signed-off-by: Andrew Morton <akpm@osdl.org>

<akpm@osdl.org>
	[PATCH] smc91x: display pertinent register values from the  timeout function
	
	From: Nicolas Pitre <nico@cam.org>
	
	If ever that function is called, this will certainly help track the reason for
	it.
	
	Signed-off-by: Nicolas Pitre <nico@cam.org>
	Signed-off-by: Andrew Morton <akpm@osdl.org>

<akpm@osdl.org>
	[PATCH] smc91x: straighten SMP locking
	
	From: Nicolas Pitre <nico@cam.org>
	
	Fix SMP locking, and add special cases for SMP in order to preserve UP's
	slightly better efficiency and reliability.
	
	Signed-off-by: Nicolas Pitre <nico@cam.org>
	Signed-off-by: Andrew Morton <akpm@osdl.org>

<akpm@osdl.org>
	[PATCH] smc91x: cosmetics
	
	From: Nicolas Pitre <nico@cam.org>
	
	Update version string, some coments, rename a variable, etc.  Nothing really
	worrying...
	
	Signed-off-by: Nicolas Pitre <nico@cam.org>
	Signed-off-by: Andrew Morton <akpm@osdl.org>

<akpm@osdl.org>
	[PATCH] m32r: trivial fix of smc91x.h
	
	From: Hirokazu Takata <takata@linux-m32r.org>
	
	Fix LED control.
	
	Signed-off-by: Hayato Fujiwara <fujiwara@linux-m32r.org>
	Signed-off-by: Hirokazu Takata <takata@linux-m32r.org>
	Signed-off-by: Andrew Morton <akpm@osdl.org>

<akpm@osdl.org>
	[PATCH] smc91x: fix SMP lock usage
	
	From: Nicolas Pitre <nico@cam.org>
	
	Well, there is no such thing as a spin_trylock_irq() in the kernel.
	
	Signed-off-by: Nicolas Pitre <nico@cam.org>
	Signed-off-by: Andrew Morton <akpm@osdl.org>

<akpm@osdl.org>
	[PATCH] smc91x: more SMP locking fixes
	
	From: Nicolas Pitre <nico@cam.org>
	
	This fixes remaining locking problems on SMP.
	
	Thanks to Hirokazu Takata for testing.
	
	Signed-off-by: Nicolas Pitre <nico@cam.org>
	Signed-off-by: Andrew Morton <akpm@osdl.org>

<akpm@osdl.org>
	[PATCH] smc91x: fix compilation with DMA on PXA2xx
	
	From: Nicolas Pitre <nico@cam.org>
	
	This is required for DMA on PXA to compile with the latest changes in
	mainline.  Also moved away from the PCI DMA flags.
	
	Signed-off-by: Nicolas Pitre <nico@cam.org>
	Signed-off-by: Andrew Morton <akpm@osdl.org>

<akpm@osdl.org>
	[PATCH] smc91x: receives two bytes too many
	
	From: Nicolas Pitre <nico@cam.org>
	
	The logic about proper packet size was a bit confused.  Fix comments and
	the code where appropriate.  Thanks to Stuart Juengst for spotting this.
	
	Signed-off-by: Nicolas Pitre <nico@cam.org>
	Signed-off-by: Andrew Morton <akpm@osdl.org>

<akpm@osdl.org>
	[PATCH] smc91x: release on-chip RX packet memory ASAP
	
	From: Nicolas Pitre <nico@cam.org>
	
	We are desperately in need of on-chip memory so free it as soon as we have
	fetched its content.  Suggested by Marc Singer.
	
	Signed-off-by: Nicolas Pitre <nico@cam.org>
	Signed-off-by: Andrew Morton <akpm@osdl.org>

<jgarzik@pobox.com>
	[libata] add AHCI driver

<jgarzik@pobox.com>
	[libata ahci] fix several bugs
	  
	* PCI IDs from test version didn't make it into mainline... doh
	* do all command setup in ->qc_prep
	* phy_reset routine that does signature check
	* check SATA phy for errors
	* reset hardware from scratch, in case card BIOS didn't run
	* implement staggered spinup by default
	* adding additional debugging output

<jgarzik@pobox.com>
	[libata ahci] more updates
	
	* allocate DMA areas in better order
	* remove unneeded hooks

<jeremy@sgi.com>
	[PATCH] per-port LED control for sata_vsc
	
	signed-off-by: Jeremy Higdon <jeremy@sgi.com>

<bzolnier@gmail.com>
	[libata] do not memset() SCSI request buf in a get-reference style function
	
	fixes INQUIRY command handling for ATAPI.
	
	Signed-off-by: Bartlomiej Zolnierkiewicz <bzolnier@gmail.com>

<lsml@rtr.ca>
	[PATCH] Export ata_scsi_simulate() for use by non-libata drivers
	
	This patch modifies libata-scsi for easier sharing of
	the various ata_id_* functions and the ata_scsi_simulate()
	function with non-libata drivers.
	
	Signed-off-by: Mark Lord <mlord@pobox.com>
	Signed-off-by: Jeff Garzik <jgarzik@pobox.com>

<bzolnier@gmail.com>
	[libata piix] Fix PATA UDMA masks
	
	piix_pata_cbl_detect() handles cable detection just fine.
	
	Signed-off-by: Bartlomiej Zolnierkiewicz <bzolnier@gmail.com>

<aia21@cantab.net>
	NTFS: Modify fs/ntfs/aops.c::mark_ntfs_record_dirty() to no longer take the
	      ntfs inode as a parameter as this is confusing and misleading and the
	      ntfs inode is available via NTFS_I(page->mapping->host).
	      Adapt all callers to this change.
	
	Signed-off-by: Anton Altaparmakov <aia21@cantab.net>

<aia21@cantab.net>
	NTFS: Modify fs/ntfs/mft.c::write_mft_record_nolock() and
	      fs/ntfs/aops.c::ntfs_write_mst_block() to only check the dirty state
	      of the first buffer in a record and to take this as the ntfs record
	      dirty state.  We cannot look at the dirty state for subsequent
	      buffers because we might be racing with
	      fs/ntfs/aops.c::mark_ntfs_record_dirty().
	
	Signed-off-by: Anton Altaparmakov <aia21@cantab.net>

<jejb@mulgrave.(none)>
	merge scsiiom.c into tmscsim.c
	
	From: Christoph Hellwig <hch@lst.de>
	
	Also reapplied sparse fixes on top of the initial
	patch.
	
	Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

<g.liakhovetski@gmx.de>
	[PATCH] tmscsim: use block-layer tags
	
	Now uses the generic block layer tag handling routines (via the SCSI API).
	
	Signed-off-by: Guennadi Liakhovetski <g.liakhovetski@gmx.de>
	Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

<jejb@mulgrave.(none)>
	SCSI: Fix problems with non-power-of-two sector size discs
	
	We can't support them, but the system should disable them cleanly
	and continue when they're detected (at the moment it
	dumps a stack trace).
	
	The fix (hack) is to set them to zero size and 512 byte
	sectors.  This means they're still amenable to ioctls (like
	to reformat them with a useful block size) but cannot
	be read from or written to.
	
	Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

<ganesh.venkatesan@intel.com>
	[PATCH] e1000:  modified ethtool_set_pauseparam to use e1000_setup_link
	for flow control settings for fiber serdes link

<ganesh.venkatesan@intel.com>
	[PATCH] e1000: remove unused function e1000_enable_mng_pass_thru

<ganesh.venkatesan@intel.com>
	[PATCH] e1000: fix set ringparam for ethtool returning error code on bad input

<ganesh.venkatesan@intel.com>
	[PATCH] e1000: driver version update

<ganesh.venkatesan@intel.com>
	[PATCH] e1000: white space corrections

<viro@parcelfarce.linux.theplanet.co.uk>
	[PATCH] amd8111e iomem annotations
	
		* trivial iomem annotations
		* couple of missing dev->priv -> netdev_priv(dev).
	
	Signed-off-by: Al Viro <viro@parcelfarce.linux.theplanet.co.uk>

<johnrose@austin.ibm.com>
	[PATCH] PCI Hotplug: rpaphp safe list traversal
	
	Hoping you will accept this fix.  The bug can cause a crash upon hotplug
	remove.  The bug involves unsafe traversal of a list while deleting list
	members.  The fix uses list_for_each_safe() rather than
	list_for_each().  Also threw in an initialization to get rid of a
	compiler warning.
	
	Signed-off-by: John Rose <johnrose@austin.ibm.com>
	Signed-off-by: Greg Kroah-Hartman <greg@kroah.com>

<viro@parcelfarce.linux.theplanet.co.uk>
	[PATCH] typhoon.c missing include
	
	DMA_32BIT_MASK is declared in linux/dma-mapping.h; not all platforms get
	it from already included headers, so we need explicit include here (fixes
	breakage at least on alpha and sparc64).
	
	Signed-off-by: Al Viro <viro@parcelfarce.linux.theplanet.co.uk>

<kernel@kolivas.org>
	[PATCH] netconsole support for b44

<kernel@kolivas.org>
	[PATCH] b44poll - whitespace

<stern@rowland.harvard.edu>
	[PATCH] Let LLD specify INQUIRY length
	
	That sounds like a good suggestion.  Even better, instead of adding a new
	field we can simply use the existing inquiry_length.
	
	This patch changes scsi_probe_lun() to use the value in
	sdev->inquiry_length for the first INQUIRY attempt, if that value is
	nonzero.  Subsequent attempts are based, as before, on the blacklist flags
	and the Additional Length field in the INQUIRY data.
	
	The patch also contains a fairly extensive reorganization of the
	subroutine.  All the code that was duplicated for sending the INQUIRY
	command twice has been consolidated.  The routine now makes up to three
	passes:
	
		In the first pass, the transfer length is the value initially
		found in sdev->inquiry_length if that has been set, otherwise
		it is the current conservative 36 bytes.
	
		If the first pass succeeds, the routine retrieves the blist flags
		for the device and checks the Additional Length field.  The blist
		flags take precedence over sdev->inquiry_length, which in turn
		takes precedence over the Additional Length.  If it turns out
		there is more data available than we transferred the first time,
		a second pass tries to get it.
	
		If the second pass succeeds the INQUIRY data may have changed,
		so the blist flags are looked up again and the Additional Length
		is checked again.  If not, a third pass tries to get the data
		back, using the same transfer length as the first pass.
	
	Finally, the value stored in sdev->inquiry_length is set to the amount
	actually transferred or the size computed from the Additional Length,
	whichever is smaller.
	
	Although the net change in the source file size is small, the new routine
	has more comments and less code.  Overall I think it's an improvement.
	
	Signed-off-by: Alan Stern <stern@rowland.harvard.edu>
	Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

<rddunlap@osdl.org>
	[PATCH] pcnet32: use unsigned 1-bit fields

<linville@tuxdriver.com>
	[PATCH] 3c59x: style change in vortex_ethtool_ops declaration
	
	Style change suggested during patch review.
	
	Signed-off-by: John W. Linville <linville@tuxdriver.com>

<bunk@stusta.de>
	[PATCH] net/tokenring/olympic.c: remove unused variable
	
	Recent changes in Linus' tree removed all uses of a variable, resulteing
	in the following warning:
	
	<--  snip  -->
	
	...
	  CC      drivers/net/tokenring/olympic.o
	drivers/net/tokenring/olympic.c: In function `olympic_arb_cmd':
	drivers/net/tokenring/olympic.c:1404: warning: unused variable `i'
	...
	
	<--  snip  -->
	
	
	The following patch removes this unused variable:
	
	
	Signed-off-by: Adrian Bunk <bunk@stusta.de>

<aia21@cantab.net>
	NTFS: Move the static inline ntfs_init_big_inode() from fs/ntfs/inode.c to
	      inode.h and make fs/ntfs/inode.c::__ntfs_init_inode() non-static and
	      add a declaration for it to inode.h.  Fix some compilation issues
	      that resulted due to #includes and header file interdependencies.
	
	Signed-off-by: Anton Altaparmakov <aia21@cantab.net>

<aia21@cantab.net>
	NTFS: Simplify setup of i_mode in fs/ntfs/inode.c::ntfs_read_locked_inode().
	
	Signed-off-by: Anton Altaparmakov <aia21@cantab.net>

<aia21@cantab.net>
	NTFS: Add helpers fs/ntfs/layout.h::MK_MREF() and MK_LE_MREF().
	
	Signed-off-by: Anton Altaparmakov <aia21@cantab.net>

<aia21@cantab.net>
	NTFS: Modify fs/ntfs/mft.c::map_extent_mft_record() to only verify the mft
	      record sequence number if it is specified (i.e. not zero).
	
	Signed-off-by: Anton Altaparmakov <aia21@cantab.net>

<aia21@cantab.net>
	NTFS: Add fs/ntfs/mft.[hc]::ntfs_mft_record_alloc() and various helper
	      functions used by it.
	
	Signed-off-by: Anton Altaparmakov <aia21@cantab.net>

<greg@kroah.com>
	kevent: add __bitwise kobject_action to help the compiler check for misusages
	
	Signed-off-by: Greg Kroah-Hartman <greg@kroah.com>

<greg@kroah.com>
	USB: add endian markups to the ub driver.
	
	Signed-off-by: Greg Kroah-Hartman <greg@kroah.com>

<shemminger@osdl.org>
	[PATCH] b44: replace MODULE_PARM
	
	Replace MODULE_PARM with module_param
	
	Signed-off-by: Stephen Hemminger <shemminger@osdl.org>

<shemminger@osdl.org>
	[PATCH] b44: use netdev_priv
	
	Replace uses of dev->priv with netdev_priv
	
	Signed-off-by: Stephen Hemminger <shemminger@osdl.org>

<shemminger@osdl.org>
	[PATCH] ns83820: use module_param
	
	Replace MODULE_PARM with module_param
	
	Signed-off-by: Stephen Hemminger <shemminger@osdl.org>

<shemminger@osdl.org>
	[PATCH] eql: use netdev_priv
	
	Use netdev_priv where possible.
	
	Signed-off-by: Stephen Hemminger <shemminger@osdl.org>

<shemminger@osdl.org>
	[PATCH] dummy: use netdev_priv
	
	Can use netdev_priv in dummy device.
	
	Signed-off-by: Stephen Hemminger <shemminger@osdl.org>

<shemminger@osdl.org>
	[PATCH] tg3: use module_param
	
	get rid of deprecated use of MODULE_PARM
	
	Signed-off-by: Stephen Hemminger <shemminger@osdl.org>
	Signed-off-by: Jeff Garzik <jgarzik@pobox.com>

<shemminger@osdl.org>
	[PATCH] tg3: use netdev_priv
	
	use netdev_priv
	
	Signed-off-by: Stephen Hemminger <shemminger@osdl.org>
	Signed-off-by: Jeff Garzik <jgarzik@pobox.com>

<shemminger@osdl.org>
	[PATCH] tg3: make driver only data static
	
	Several data structures should have been marked static because
	the are local to this driver.
	
	Signed-off-by: Stephen Hemminger <shemminger@osdl.org>
	Signed-off-by: Jeff Garzik <jgarzik@pobox.com>

<shemminger@osdl.org>
	[PATCH] slip: use module_param
	
	Replace MODULE_PARM with module_param (also make slip_maxdev static).
	
	Signed-off-by: Stephen Hemminger <shemminger@osdl.org>

<shemminger@osdl.org>
	[PATCH] slip: use netdev_priv
	
	Replace dev->priv with netdev_priv(dev)
	
	Signed-off-by: Stephen Hemminger <shemminger@osdl.org>

<rddunlap@osdl.org>
	[PATCH] skfp: remove assignment expression in conditional (sparse)(v2)
	
	Fix sparse warning:
	drivers/net/skfp/hwmtm.c:1904:20: warning: assignment expression in
	conditional
	
	Signed-off-by: Randy Dunlap <rddunlap@osdl.org>

<bzolnier@gmail.com>
	[PATCH] REQUEST_SENSE support for ATAPI
	
	It is quite different from your patch:
	* uses ata_qc_issue()
	* supports both DMA and PIO
	* ->sense_buffer[] mangling dropped for now
	
	Now libata works with ATAPI devices (yeah!)...
	...unless PIO is used, then it fails in mysterious way.
	
	Signed-off-by: Bartlomiej Zolnierkiewicz <bzolnier@gmail.com>

<bzolnier@gmail.com>
	[libata] arbitrary size ATAPI PIO support
	
	Signed-off-by: Bartlomiej Zolnierkiewicz <bzolnier@gmail.com>

<viro@www.linux.org.uk>
	[PATCH] 64bit fix in cycx_x25.c
	
	comparing u32 with ~0UL is wrong
	
	Signed-off-by: Al Viro <viro@parcelfarce.linux.theplanet.co.uk>

<viro@www.linux.org.uk>
	[PATCH] cyclom iomem annotations
	
	__iomem added where needed in cyclom code
	cycx_setup() gets physical address as an explicit argument instead of
	abusing hw->dpmbase
	
	Signed-off-by: Al Viro <viro@parcelfarce.linux.theplanet.co.uk>

<viro@www.linux.org.uk>
	[PATCH] hd6457x iomem annotations
	
	Signed-off-by: Al Viro <viro@parcelfarce.linux.theplanet.co.uk>

<viro@www.linux.org.uk>
	[PATCH] dscc4 iomem annotations
	
	Signed-off-by: Al Viro <viro@parcelfarce.linux.theplanet.co.uk>

<viro@www.linux.org.uk>
	[PATCH] bunch of trivial iomem annotations in drivers/net
	
	Signed-off-by: Al Viro <viro@parcelfarce.linux.theplanet.co.uk>

<viro@www.linux.org.uk>
	[PATCH] rrunner iomem annotations
	
	Signed-off-by: Al Viro <viro@parcelfarce.linux.theplanet.co.uk>

<viro@www.linux.org.uk>
	[PATCH] via-velocity iomem annotations
	
	Signed-off-by: Al Viro <viro@parcelfarce.linux.theplanet.co.uk>

<viro@www.linux.org.uk>
	[PATCH] tulip iomem annotations, switch to io{read,write}
	
	Signed-off-by: Al Viro <viro@parcelfarce.linux.theplanet.co.uk>

<viro@www.linux.org.uk>
	[PATCH] winbond840 iomem annotations, switch to io{read,write}
	
	Signed-off-by: Al Viro <viro@parcelfarce.linux.theplanet.co.uk>

<viro@www.linux.org.uk>
	[PATCH] forcedeth iomem annotations
	
	Signed-off-by: Al Viro <viro@parcelfarce.linux.theplanet.co.uk>

<viro@www.linux.org.uk>
	[PATCH] yellowfin iomem annotations, switch to io{read,write}
	
	Signed-off-by: Al Viro <viro@parcelfarce.linux.theplanet.co.uk>

<viro@www.linux.org.uk>
	[PATCH] hp100 iomem annotations
	
	Signed-off-by: Al Viro <viro@parcelfarce.linux.theplanet.co.uk>

<vda@port.imtp.ilyichevsk.odessa.ua>
	kconfig.debug: mention that DEBUG_SLAB can slow down machine quite a bit
	
	I experienced x3 slowdown due to this option being set.
	
	Please add this small warning to DEBUG_SLAB help text.
	
	Signed-off-by: Sam Ravnborg <sam@ravnborg.org>

<rddunlap@osdl.org>
	kconfig: OVERRIDE: save kernel version in .config file
	
	Omit .config file timestamp in the file if the environment variable
	"KCONFIG_NOTIMESTAMP" exists and is non-null.
	
	Signed-off-by: Randy Dunlap <rddunlap@osdl.org>
	Signed-off-by: Sam Ravnborg <sam@ravnborg.org>

<agruen@suse.de>
	kbuild: Allow install of external modules to custom path
	
	Currently, a ``make modules_install'' for an external module will
	install that module into /lib/modules/$(uname -r)/extra. Allow to
	override this default by specifying INSTALL_MOD_DIR.
	
	Signed-off-by: Andreas Gruenbacher <agruen@suse.de>
	Signed-off-by: Sam Ravnborg <sam@ravnborg.org>

<trini@kernel.crashing.org>
	kbuild: fix 'htmldocs' and friends with O=
	
	The following patch fixes up 'htmldocs' and related to work when
	trees are being built with O=.  I fixed it all up by passing the srctree
	as an env-var to docproc (and thus what it calls) and then pull that out
	when needed.
	
	Signed-off-by: Tom Rini <trini@kernel.crashing.org>
	Signed-off-by: Sam Ravnborg <sam@ravnborg.org>

<sam@mars.ravnborg.org>
	kbuild: Create Makefile in output dir for *config targets
	
	Upon request from Andi Kleen the Makefile is now created for *config
	targets also. So the MAkefile in the output directory is present when
	it is expected (after kernel configuration).
	Also tell user the Makefile is generated.
	
	Signed-off-by: Sam Ravnborg <sam@ravnborg.org>

<sam@mars.ravnborg.org>
	kbuild: use two double-quotes for localversion
	
	Modifies LOCALVERSION definition such that it uses
	patsubst instead of subst to remove surrounding double quotes from
	CONFIG_LOCALVERSION.  This helps syntax-highlighting editors.
	
	From: Tejun Heo <tj@home-tj.org>
	Signed-off-by: Sam Ravnborg <sam@ravnborg.org>

<sam@mars.ravnborg.org>
	kbuild: explicit enable framepointer
	
	Newer gcc versions automatically turns on -fomit-frame-pointer when
	-O2 is specified thus breaking CONFIG_FRAME_POINTER option.
	Explicitly specifying -fno-omit-frame-pointer fixes it.
	
	From: Tejun Heo <tj@home-tj.org>
	Signed-off-by: Sam Ravnborg <sam@ravnborg.org>

<sam@mars.ravnborg.org>
	kbuild: Add cc-option-align
	
	gcc version >= 3.00 shifted from -malign-* to -falign-*. $(cc-option-align) will
	based on current gcc version specify the right prefix for the align option.
	Documented in Documentation/makefiles.txt
	
	Signed-off-by: Sam Ravnborg <sam@ravnborg.org>

<vda@port.imtp.ilyichevsk.odessa.ua>
	kbuild: make gcc -align options .config-settable
	
	With all alignment options set to 1 (minimum alignment),
	I've got 5% smaller vmlinux compared to one built with
	default code alignment.
	Original implementation altered to use cc-option-align by sam.
	
	From: Denis Vlasenko <vda@port.imtp.ilyichevsk.odessa.ua>
	Signed-off-by: Sam Ravnborg <sam@ravnborg.org>

<aia21@cantab.net>
	NTFS: 2.1.21 release
	
	Signed-off-by: Anton Altaparmakov <aia21@cantab.net>

<mike.miller@hp.com>
	[PATCH] cciss: SCSI API updates
	
	This patch updates our SCSI support to no longer use deprecated APIs.
	
	Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

<wim@iguana.be>
	[WATCHDOG] v2.6.9-rc3 i8xx_tco.c-stop_reboot-patch
	
	Fix for Bugzilla Bug 132719: "watchdog i8xx_tco causing machine to
	reboot."

<dwmw2@shinybook.infradead.org>
	USB SpeedTouch / ATM: Make it work on 64-bit hosts.
	
	Reduce size of struct udsl_control to make it fit in skb->cb, by
	dropping the cell_header and generating it later instead of storing
	it.
	
	Signed-off-by: David Woodhouse <dwmw2@infradead.org>
	Signed-off-by: Duncan Sands <baldrick@free.fr>
	Signed-off-by: Greg Kroah-Hartman <greg@kroah.com>

<baldrick@free.fr>
	USB SpeedTouch cleanup.
	
	 - Don't free pages with kfree()
	 - Clean up debugging messages
	 - Print name of firmware file loaded.
	
	Signed-off-by: Duncan Sands <baldrick@free.fr>
	Signed-off-by: David Woodhouse <dwmw2@infradead.org>
	Signed-off-by: Greg Kroah-Hartman <greg@kroah.com>

<aia21@cantab.net>
	NTFS: Update Documentation/filesystems/ntfs.txt with instructions on how to
	      use the Device-Mapper driver with NTFS ftdisk/LDM raid.  This removes
	      the linear raid problem with the Software RAID / MD driver when one
	      or more of the devices has an odd number of sectors.
	
	Signed-off-by: Anton Altaparmakov <aia21@cantab.net>

<hch@lst.de>
	[PATCH] sparse __iomem annotations for qla2xxx
	
	this also found a real bug, qla2xxx isn't iounmapping at host removal at
	all currently - and if the right cpp macro would have been set it'd be
	too late.
	
	Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

<linux@de.rmk.(none)>
	[PCMCIA] 01-unused_bulkmem_code.diff
	
	Most of drivers/pcmcia/bulkmem.c is unused by the Linux kernel
	PCMCIA subsystem and/or in-kernel PCMCIA device drivers. Remove
	this unused code as well as references to it.

<linux@de.rmk.(none)>
	[PCMCIA] 02-move_bulkmem.diff
	
	The rest of drivers/pcmcia/bulkmem.c is only used by code
	relevant for 16-bit PCMCIA devices. So, link it with ds instead
	of with cs. The newly created module pcmcia.ko contains a
	MODULE_ALIAS() for the name "ds" so that backwards compatibility
	is ensured.

<linux@de.rmk.(none)>
	[PCMCIA] 03-remove_ftl_memory.diff
	
	Remove both include/pcmcia/ftl.h and include/pcmcia/memory.h as they
	are unused.

<linux@de.rmk.(none)>
	[PCMCIA] 04-obsolete_kconfig.diff
	
	Add a new CONFIG_PCMCIA_OBSOLETE option.

<len.brown@intel.com>
	[ACPI] firmware wakeup address is physical, not virtual (David Shaohua Li)
	http://bugzilla.kernel.org/show_bug.cgi?id=3390

<linux@de.rmk.(none)>
	[PCMCICA] 05-obsolete_parts_of_cs.diff
	
	Some parts of cs.c are not used by any PCMCIA socket or card driver
	or the PCMCIA subsystem itself. Mark them CONFIG_PCMCIA_OBSOLETE.
	Also, define pcmcia_get_window static as it was supposed to be.

<linux@de.rmk.(none)>
	[PCMCIA] 06-Kconfig_PCMCIA.diff
	
	After noting three things, namely
	1.) CardBus cards work without ds a.k.a. pcmcia loaded,
	2.) ds a.k.a pcmcia cannot be built as module if pcmcia_core is
	    built in, and
	3.) some commenting in drivers/pcmcia/Kconfig was obsolete
	    [to use 32-bit cards, you don't need pcmcia-cs],
	I wrote this patch which introduces more config options for fine-
	grained tuning of what to built as what and what not to built. In
	future, 16-bit-specific code in pcmcia_core may be surrounded by
	CONFIG_PCMCIA. Also, I'll try to remove the dependency of
	yenta_socket on cardbus.

<mike.miller@hp.com>
	[PATCH] cciss: fixes for clustering
	
	This patch changes our open specifically for clustering software. We must
	allow root to access any volume or device with a LUN ID. We also modified
	our revalidate function for this reason.
	If a logical is reserved, we must register it with the OS with size=0. Then
	the backup system can call BLKRRPART after breaking the reservation to
	set the device to the correct size.
	We also must register a controller with no logical volumes for the online
	utilities to function. This is the way we've done it since the 2.2 kernel.
	Which doesn't neccesarily make it right, but we have legacy apps to consider.
	
	Signed off by: Mike Miller <mike.miller@hp.com>
	Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

<linux@de.rmk.(none)>
	[PCMCIA] 01-lookup_bus.diff
	
	pcmcia_lookup_bus is only called from ds.c, and doesn't need to know
	about a handle -- just about the struct pcmcia_socket.

<linux@de.rmk.(none)>
	[PCMCIA] 02-adjust_resource_info.diff
	
	pcmcia_adjust_resource_info is only called from ds.c and doesn't
	need to know about a valid handle.

<linux@de.rmk.(none)>
	[PCMCIA] 03-replace_cis.diff
	
	pcmcia_replace_cis doesn't need to know about the handle or a sub-
	function, as the cis can only be replaced as a whole. Also, remove
	bogus entries in cs_internal.h

<linux@de.rmk.(none)>
	[PCMCIA] 04-get_firstnext_tuple.diff
	
	Add wrappings around pcmcia_get_{first,next}_tuple, and use the new
	pccard_get_first,next_tuple calls wherever possible.

<linux@de.rmk.(none)>
	[PCMCIA] 05-get_tuple_data.diff
	
	Add a wrapping around pcmcia_get_tuple_data, and use
	pccard_get_tuple_data wherever possible.

<len.brown@intel.com>
	[ACPI] add module parameters: processor.c2=[0,1] processor.c3=[0,1]
	to disable/enable C2 or C3
	blacklist entries for R40e and Medion 41700
	http://bugme.osdl.org/show_bug.cgi?id=3549
	
	from Andi Kleen

<linux@de.rmk.(none)>
	[PCMCIA] 06-parse_tuple.diff
	
	Add a wrapper around pcmcia_parse_tuple, and use pccard_parse_tuple
	in ds.c

<linux@de.rmk.(none)>
	[PCMCIA] 07-read_tuple.diff
	
	Rename the "internal" read_tuple to pccard_read_tuple, and
	update it to better calling conventions.

<linux@de.rmk.(none)>
	[PCMCIA] 08-validate_cis.diff
	
	Add a wrapper around pcmcia_validate_cis, and use
	pccard_validate_cis in ds.c

<jejb@titanic.il.steeleye.com>
	SCSI: fix Suspend I/O block/unblock path
	
	From: James.Smart@Emulex.Com
	
	urther testing is showing that we are having some i/o threads
	prematurely die with the following message: "rejecting I/O to device
	being removed"
	
	Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

<linux@de.rmk.(none)>
	[PCMCIA] 09-pcmcia_compat.diff
	
	Move the compatibility pcmcia_* functions which take a "handle" as
	argument to a new file, pcmcia_compat.c, which is built into "ds"
	a.k.a. "pcmcia.ko".  This makes sense as only 16-bit PCMCIA drivers
	have a valid handle.

<linux@de.rmk.(none)>
	[PCMCIA] 10-get_window.diff
	
	Change calling conventions to pcmcia_get_window, and use this
	function directly in ds.c, but keep the existing wrappers
	pcmcia_get_{first,next}_window in pcmcia_compat.c

<phil@ipom.com>
	[PATCH] USB Storage: Unusual_dev patch for Finepix 1300 and 1400's.
	
	There are several cameras (1300s and 1400s) with the same bcdDevice
	number (1000). Most of them are 8070 devices, but some of them are UFI
	devices (similar to 8070 devices but don't clear the sense data after
	an INQUIRY or REQUEST SENSE). Furthermore if the devices that truely
	do act like 8070 devices are overridden to be UFI, they find more than
	one LUN. Specifiying UFI and SINGLE_LUN seems to satisfy all kinds of
	devices that claim device number 1000.
	
	
	From: Pavel Machek <pavel@ucw.cz>
	Signed-off-by: Phil Dibowitz <phil@ipom.com>
	Signed-off-by: Greg Kroah-Hartman <greg@kroah.com>

<phil@ipom.com>
	[PATCH] USB Storage: unusual_devs patch for new tekom entry
	
	Stephan Fuhrmann sent in the entry for a device needing the new RESIDUE
	flag. Here is an appropriate tested patch.
	
	
	From: Stephan Fuhrmann <atomenergie@t-online.de>
	Signed-off-by: Phil Dibowitz <phil@ipom.com>
	Signed-off-by: Greg Kroah-Hartman <greg@kroah.com>

<phil@ipom.com>
	[PATCH] USB Storage: unusual_devs patch for winward music disk
	
	The following is needed for Winward Music Disk. I narrowed the range of
	the original patch which was sent by Stephan Walter.
	
	
	From: Stephan Walter <stephan.walter@epfl.ch>
	Signed-off-by: Phil Dibowitz <phil@ipom.com>
	Signed-off-by: Greg Kroah-Hartman <greg@kroah.com>

<phil@ipom.com>
	[PATCH] USB Storage: Remove unusual_dev entry for IBM Storage Key
	
	This removes the 0a16/8888/0100 unusual_devs entry for an IBM USB
	Storag key. It does not appear to be needed and caused issues for
	Buddha Henry <spanishbuddha@hotmail.com>, who has tested with this
	patch and his device works properly.
	
	
	Signed-off-by: Phil Dibowitz <phil@ipom.com>
	Signed-off-by: Greg Kroah-Hartman <greg@kroah.com>

<phil@ipom.com>
	[PATCH] USB Storage: Remove unusual_devs entries for Genesys Drives
	
	Here's a patch to remove the three Genesys disk entries in
	unusual_devs.
	
	They don't appear to be needed anymore because:
	1. The inquiries now request the right amount of data
	2. MODE_XLATE, according to Alan, isn't used in 2.6
	
	Signed-off-by: Phil Dibowitz <phil@ipom.com>
	Signed-off-by: Greg Kroah-Hartman <greg@kroah.com>

<phil@ipom.com>
	[PATCH] USB Storage: Fix Kyocera order
	
	This removes a duplicate entry and fixes order. Trivial.
	
	
	Signed-off-by: Phil Dibowitz <phil@ipom.com>
	Signed-off-by: Greg Kroah-Hartman <greg@kroah.com>

<linux@de.rmk.(none)>
	[PCMCIA] 11-configuration_info.diff
	
	Add a wrapper around pcmcia_get_configuration_info, and
	use pccard_get_configuration_info in ds.c

<jejb@mulgrave.(none)>
	aic7xxx and aic79xx: fix sleeping while holding a lock
	
	From: Luben Tuikov <luben_tuikov@adaptec.com>
	
	Fix sleeping while holding a lock on host removal and on
	killing the DV thread.
	
	Signed-off-by: Luben Tuikov <luben_tuikov@adaptec.com>
	Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

<stern@rowland.harvard.edu>
	[PATCH] USB Storage: new unusual_devs entry
	
	Here's another USB mass storage device that incorrectly reports the total
	number of disk blocks.  Please apply.
	
	
	Signed-off-by: Alan Stern <stern@rowland.harvard.edu>
	Signed-off-by: Greg Kroah-Hartman <greg@kroah.com>

<phil@ipom.com>
	[PATCH] USB Storage: unusual_dev modification
	
	The following patch changes the 0x059f/0xa601/0x0200 per the report from
	  Torsten Eriksson. It adds comments to the uncommented entry and
	changes the subclass.
	
	
	Signed-off-by: Phil Dibowitz <phil@ipom.com>
	Signed-off-by: Greg Kroah-Hartman <greg@kroah.com>

<linux@de.rmk.(none)>
	[PCMCIA] 12-reset_card.diff
	
	pcmcia_reset_card doesn't need to know about the handle, but add a
	wrapper for backwards compatibility anyways.

<linux@de.rmk.(none)>
	[PCMCIA] 13-get_status.diff
	
	Add a wrapper around pcmcia_get_status, and use pccard_get_status
	in ds.c

<linux@de.rmk.(none)>
	[PCMCIA] 14-access_configuration.diff
	
	Add a wrapper around pcmcia_access_configuration_register, and use
	pccard_access_configuration_register in ds.c

<linux@de.rmk.(none)>
	[PCMCIA] 15-get_firstnext_region.diff
	
	pcmcia_get_{first,next}_region are tricky: they're used
	only by ds.c, but to keep backwards compatibility proper
	wrappers are needed (for the moment). However, match_region()
	doesn't work without knowing about ds.c's handle, it seems...
	but wait:
	
	    while (list != NULL) {
	        if (!(handle->Attributes & INFO_MTD_CLIENT) ||
	            (strcmp(handle->dev_info, list->dev_info) == 0)) {
	            *match = list->info;
	            return CS_SUCCESS;
	        }
	        list = list->info.next;
	    }
	
	as ds.c's handle doesn't have INFO_MTD_CLIENT, the if always
	succeeds -- allowing is to simplify it for ds.c. However, this
	means we need special functions for ds.c. It's not too large,
	fortunately.

<ak@sensi.org>
	[PATCH] USB: USB CDC OBEX driver
	
	Also, as the full patch isn't going in, can you please apply this tiny
	part of it? Somehow the header descriptor was omitted from the CDC ACM
	driver, but it's present on my phone (thus giving me the "ignoring extra
	header" error when it's plugged in) and in the CDC spec (section 5.2.3.1).
	
	
	Signed-off-by: Alex Kanavin <ak@sensi.org>
	Signed-Off-By: Oliver Neukum <oliver@neukum.name>
	Signed-off-by: Greg Kroah-Hartman <greg@kroah.com>

<hj.oertel@surfeu.de>
	[PATCH] USB: usb/serial RM vendor/product id for ftdi_sio
	
	Hello,
	this is a small patch of the USB ftdi_sio driver against linux-2.6.8.1.
	I only added a new vendor and product id for the RM-CANview,
	a CAN fieldbus interface:
	http://www.rmcan.com/site/en/products/gateways/usb/index.htm
	
	Thanks
	Heinz
	
	Signed-off-by: Heinz-Juergen Oertel <oe@port.de>
	Signed-off-by: Greg Kroah-Hartman <greg@kroah.com>

<ben-linux@org.rmk.(none)>
	[ARM PATCH] 2131/1: Add _iomem to the IO string functions
	
	Patch from Ben Dooks
	
	This patch stops mtd from generating problems of
	casting pointers to ints, due to the memcpy_fromio
	and related functions all taking `unsigned long`
	for their IO addresses.
	
	Replace `unsigned long` with `void __iomem *`
	
	Compiled clean on arch-s3c2410
	
	Signed-off-by: Ben Dooks 

<bzolnier@gmail.com>
	[PATCH] arbitrary size ATAPI PIO support bugfixes
	
	* sg was incorrectly used instead of qc->sg in __atapi_pio_bytes()
	* due to obvious typo qc->curbytes wasn't zeroed in ata_qc_new_init()
	
	Signed-off-by: Bartlomiej Zolnierkiewicz <bzolnier@gmail.com>

<bzolnier@gmail.com>
	[PATCH] make ATAPI PIO work
	
	If "BSY=0, DRQ=0" condition happens on ATAPI just
	complete the command as this condition happens for:
	* the end of the PIO transfer (ie. REQUEST_SENSE
	  seems to return only 18 of 96 requested bytes)
	* unsupported ATAPI commands (ie. REPORT_LUNS)
	
	Signed-off-by: Bartlomiej Zolnierkiewicz <bzolnier@gmail.com>

<petkov@uni-muenster.de>
	[PATCH] USB: remove calls to usb_unlink_urb in net/usbnet.c
	
	Signed-off-by: Borislav Petkov <petkov@uni-muenster.de>
	Signed-off-by: Greg Kroah-Hartman <greg@kroah.com>

<petkov@uni-muenster.de>
	[PATCH] USB: remove calls to usb_unlink_urb() in net/pegasus.c
	
	Signed-off-by: Borislav Petkov <petkov@uni-muenster.de>
	Signed-off-by: Greg Kroah-Hartman <greg@kroah.com>

<petkov@uni-muenster.de>
	[PATCH] USB: remove calls to usb_unlink_urb() in net/kaweth.c
	
	Hi there Greg,
	  here's another one.
	
	
	Signed-off-by: Borislav Petkov <petkov@uni-muenster.de>
	Signed-off-by: Greg Kroah-Hartman <greg@kroah.com>

<ben-linux@org.rmk.(none)>
	[ARM PATCH] 2144/1: S3C2410 - s3c2440 fixes and clock updates
	
	Patch from Ben Dooks
	
	Fixes the following problems and ommisions:
	
	 - added variable for base crystal rate
	 - moved clock variables into clock.c
	 - fixed bug in identifying s3c2440 cpus
	 - added initial support for new uart registration
	 - removed base blocks from include/asm/arch/hardware.h
	
	Signed-off-by: Ben Dooks 

<ben-linux@org.rmk.(none)>
	[ARM PATCH] 2145/1: S3C2410 - GPIO ID register update
	
	Patch from Ben Dooks
	
	Update the include/asm-arm/arch-s3c2410/regs-gpio.h with
	GSTATUS1 register information
	
	Signed-off-by: Ben Dooks 

<torvalds@ppc970.osdl.org>
	Add fake '__builtin_warning()' for the gcc case.
	
	Allows us to do compile-time sparse warnings of our own.

<pablo@eurodev.net>
	[NETFILTER]: Clean up ip_conntrack stats
	
	Signed-off-by: Pablo Neira <pablo@eurodev.net>
	Signed-off-by: Patrick McHardy <kaber@trash.net>

<greg@kroah.com>
	USB: add bulk_in_size for usb-serial devices.
	
	Don't know why I didn't do it before...
	
	Signed-off-by: Greg Kroah-Hartman <greg@kroah.com>

<rusty@rustcorp.com.au>
	[NETFILTER]: Change MASQUERADE to Use Device Address Directly
	
	Instead of doing a dubious route lookup, just use the first IP address
	of the (dynamic) interface.  Also, reset assured bit so after masq
	connections can be cleaned up if memory pressure.
	
	Signed-off-by: Rusty Russell <rusty@rustcorp.com.au>
	Signed-off-by: Patrick McHardy <kaber@trash.net>

<yasuyuki.kozakai@toshiba.co.jp>
	[NETFILTER]: prearation of removing skb_linearize()
	   
	This patch uses skb_header_pointer() so that packets can be parsed even though
	skb_linearize() doesn't exist. But this patch doesn't remove skb_linearize()
	yet. We can remove it after changing all match/target modules.
	   
	Moreover ...
	    - I deleted the optimization not to parse IPv6 extension header
	      many time from previous patch. I'll send the patch to do this
	      separately.
	    - fixed the bug that "offset" argument of match functions are always 0.
	    - deleted "hdr" and "datalen" argument and added "protoff" argument
	      to match functions. "protoff" means the offset to Layer 4 protocol
	      header.
	    - the argument order of target function is changed likely IPv4 modules.
	      This prevents user from meeting kernel panic when they use old
	      match modules.
	    - changed {tcp,udp,icmp6}_match(). These functions became very similar
	      to codes in ip_tables.c again.
	   
	Signed-off-by: Yasuyuki KOZAKAI <yasuyuki.kozakai@toshiba.co.jp>
	Signed-off-by: Patrick McHardy <kaber@trash.net>

<yasuyuki.kozakai@toshiba.co.jp>
	[NETFILTER]: Enable ip6t_LOG.c to work without skb_linearize()
	
	This patch enables ip6t_LOG.c to work without skb_linearize().
	
	I changed a large part of this file. At first, ip6_nexthdr() is deleted
	to prevent multiple call of skb_header_pointer() at dump_packet() and
	ip6_nexthdr().
	   
	And the following bugs are fixed. The first bug is fixed by introducing
	skb_header_pointer(), then I didn't separate patches.
	
	    - No check with skb->len. Then invalid memory access may occur.
	
	    - If packet is fragmented and it's not first fragment, nonexistent
	      extension headers is tried to parse.
	
	    - All headers which aren't TCP/UDP/ICMPv6 are treated as IPv6
	      extension header.
	  
	    - The encrypted data after ESP is tried to parse.
	   
	    - ntohl() for ID in Fragment header is missing.
	   
	    - If doff*4 of TCP header is less than sizeof(struct tcphdr),
	      TCP options are tried to parse.
	   
	Signed-off-by: Yasuyuki KOZAKAI <yasuyuki.kozakai@toshiba.co.jp>
	Signed-off-by: Patrick McHardy <kaber@trash.net>

<yasuyuki.kozakai@toshiba.co.jp>
	[NETFILTER]: Enable ip6t_ah.c to work without skb_linearize()
	   
	Signed-off-by: Yasuyuki KOZAKAI <yasuyuki.kozakai@toshiba.co.jp>
	Signed-off-by: Patrick McHardy <kaber@trash.net>

<kaber@coreworks.de>
	[NETFILTER]: Introduce tabs to ip6t_ah.c
	
	Fix horrible indentation, not a single tab in the file.
	
	Signed-off-by: Patrick McHardy <kaber@trash.net>

<yasuyuki.kozakai@toshiba.co.jp>
	[NETFILTER]: Enable ip6t_esp.c to work without skb_linearize()
	
	Signed-off-by: Yasuyuki KOZAKAI <yasuyuki.kozakai@toshiba.co.jp>
	Signed-off-by: Patrick McHardy <kaber@trash.net>

<kaber@coreworks.de>
	[NETFILTER]: ip6t_esp.c whitespace cleanup
	
	Signed-off-by: Patrick McHardy <kaber@trash.net>

<torvalds@ppc970.osdl.org>
	Older gcc's ICE on missing (unused) varags macro name.

<benh@kernel.crashing.org>
	[PATCH] ppc32/64: FPU/vector register restore after signal
	
	This fixes some issues with restoring the altivec and/or FPU registers
	upon return from a signal or when setting a context.  It also add a
	proper stack backlink to the signal frames created for 64 bits
	applications.
	
	Signed-off-by: Benjamin Herrenschmidt <benh@kernel.crashing.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<benh@kernel.crashing.org>
	[PATCH] ppc64: Fix iSeries build (ouch !)
	
	The move of iomap out of eeh inadvertently broke iSeries ...
	
	Fixed like this.
	
	Signed-off-by: Benjamin Herrenschmidt <benh@kernel.crashing.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<torvalds@ppc970.osdl.org>
	Add copyright notice on ppc64 iomap files.
	
	Paul cares. I think there's something in the water at IBM
	that makes people sticklers ;)

<torvalds@ppc970.osdl.org>
	Wrap <linux/compiler.h> inside '#ifndef __ASSEMBLY__'
	
	None of the compatibility defines make sense for assembly
	files, and gcc has trouble with vararg macros when using
	"-traditional" (which is used for asm), to the point of
	ICE'ing.

<rohit.seth@intel.com>
	[PATCH] add sys_setaltroot()
	
	Add a new system call setaltroot(2).
	
	Currently, using the altroot feature is accessible only via the
	set_personality() system call.  It is accessible to user space only if there
	is more than one exec domain in the system.  This patch allows using the
	altroot feature on systems where there is only one exec domain.
	
	It is possible to work around the issue by adding a dummy exec domain, but it
	was rejected for not being very elegant.
	
	If this feature is implemented in userspace, it adds a 16% overhead on a test
	case which greps for a single word in the kernel source tree.
	
	Signed-off-by: Zou Nanhai <nanhai.zou@intel.com>
	Signed-off-by: Gordon Jin <gordon.jin@intel.com>
	Signed-off-by: Arun Sharma <arun.sharma@intel.com>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<andrea@novell.com>
	[PATCH] parport_pc superio chip fixes
	
	This patch fixes some troubles that somebody reported me with the superio
	chips.
	
	In short rmmod parport_pc && cat /proc/iomem was good enough for crashing
	the box hard on some machine (and hwscan --printer was doing just that).
	The way the oops triggers is that iomem tries to vsprintf the p->name, but
	the p->name was a static string in the module address (now unloaded).
	
	The reason is that the superio chip scanning leaves up to two persistent
	ranges claimed.  But the second (legacy) pass has no way to notice the
	resources are already reclaimed.  Plus if the superio->io was different
	than the "io" variable (the range to scan for superio chips) the "io" range
	would generate a leak of the original "io" range too.
	
	I simply make sure to always release the requested space during the superio
	scan, and I make sure not to istantiate new ranges in the p->base that
	would cause the later parport scan to fail too (plus leaving up to leaked
	resources).
	
	The previous code that was returning values and was leaving garbage in
	there made no sense to me.  My best guess (assuming I didn't misread it ;)
	is that probably somebody added the request_region without realizing
	they're pointing to the very same address that would be requested later
	(and nobody does accesses on those ranges until later, so it was very safe
	to claim it later).
	
	Disclaimer: I don't have the specs of the winbond and smsc at hand, I just
	guessed what they do from the code (nothing checks superio->io except
	get_superio_dma get_superio_irq, which made the thing enough self
	explainatory to fix it without specs)
	
	Signed-off-by: Andrea Arcangeli <andrea@novell.com>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<pavel@ucw.cz>
	[PATCH] swsusp: progress in percent
	
	swsusp currently has very poor progress indication.  Thanks to Erik Rigtorp
	<erik@rigtorp.com>, we have percentages there, so people know how long wait
	to expect.  Please apply,
	
	From: Erik Rigtorp <erik@rigtorp.com>
	Signed-off-by: Pavel Machek <pavel@suse.cz>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<pavel@ucw.cz>
	[PATCH] acpi proc: error handling
	
	Propagate the software_suspend() return value.
	
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<mingo@elte.hu>
	[PATCH] i386 entry.S cleanups
	
	Remove the unused lcall7/lcall27 code.
	
	Signed-off-by: Ingo Molnar <mingo@elte.hu>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<roland@redhat.com>
	[PATCH] make rlimit settings per-process instead of per-thread
	
	POSIX specifies that the limit settings provided by getrlimit/setrlimit are
	shared by the whole process, not specific to individual threads.  This
	patch changes the behavior of those calls to comply with POSIX.
	
	I've moved the struct rlimit array from task_struct to signal_struct, as it
	has the correct sharing properties.  (This reduces kernel memory usage per
	thread in multithreaded processes by around 100/200 bytes for 32/64
	machines respectively.)  I took a fairly minimal approach to the locking
	issues with the newly shared struct rlimit array.  It turns out that all
	the code that is checking limits really just needs to look at one word at a
	time (one rlim_cur field, usually).  It's only the few places like
	getrlimit itself (and fork), that require atomicity in accessing a whole
	struct rlimit, so I just used a spin lock for them and no locking for most
	of the checks.  If it turns out that readers of struct rlimit need more
	atomicity where they are now cheap, or less overhead where they are now
	atomic (e.g. fork), then seqcount is certainly the right thing to use for
	them instead of readers using the spin lock.  Though it's in signal_struct,
	I didn't use siglock since the access to rlimits never needs to disable
	irqs and doesn't overlap with other siglock uses.  Instead of adding
	something new, I overloaded task_lock(task->group_leader) for this; it is
	used for other things that are not likely to happen simultaneously with
	limit tweaking.  To me that seems preferable to adding a word, but it would
	be trivial (and arguably cleaner) to add a separate lock for these users
	(or e.g. just use seqlock, which adds two words but is optimal for readers).
	
	Most of the changes here are just the trivial s/->rlim/->signal->rlim/. 
	
	I stumbled across what must be a long-standing bug, in reparent_to_init.
	It does:
		memcpy(current->rlim, init_task.rlim, sizeof(*(current->rlim)));
	when surely it was intended to be:
		memcpy(current->rlim, init_task.rlim, sizeof(current->rlim));
	As rlim is an array, the * in the sizeof expression gets the size of the
	first element, so this just changes the first limit (RLIMIT_CPU).  This is
	for kernel threads, where it's clear that resetting all the rlimits is what
	you want.  With that fixed, the setting of RLIMIT_FSIZE in nfsd is
	superfluous since it will now already have been reset to RLIM_INFINITY.
	
	The other subtlety is removing:
		tsk->rlim[RLIMIT_CPU].rlim_cur = RLIM_INFINITY;
	in exit_notify, which was to avoid a race signalling during self-reaping
	exit.  As the limit is now shared, a dying thread should not change it for
	others.  Instead, I avoid that race by checking current->state before the
	RLIMIT_CPU check.  (Adding one new conditional in that path is now required
	one way or another, since if not for this check there would also be a new
	race with self-reaping exit later on clearing current->signal that would
	have to be checked for.)
	
	The one loose end left by this patch is with process accounting.
	do_acct_process temporarily resets the RLIMIT_FSIZE limit while writing the
	accounting record.  I left this as it was, but it is now changing a limit
	that might be shared by other threads still running.  I left this in a
	dubious state because it seems to me that processing accounting may already
	be more generally a dubious state when it comes to NPTL threads.  I would
	think you would want one record per process, with aggregate data about all
	threads that ever lived in it, not a separate record for each thread.
	I don't use process accounting myself, but if anyone is interested in
	testing it out I could provide a patch to change it this way.
	
	One final note, this is not 100% to POSIX compliance in regards to rlimits.
	POSIX specifies that RLIMIT_CPU refers to a whole process in aggregate, not
	to each individual thread.  I will provide patches later on to achieve that
	change, assuming this patch goes in first.
	
	Signed-off-by: Roland McGrath <roland@redhat.com>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<roland@redhat.com>
	[PATCH] add WCONTINUED support to wait4 syscall
	
	POSIX specifies the new WCONTINUED flag for waitpid, not just for waitid.
	I overlooked this addition when I implemented waitid.  The real work was
	already done to support waitid, but waitpid needs to report the results
	
	Signed-off-by: Roland McGrath <roland@redhat.com>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<roland@redhat.com>
	[PATCH] fix PTRACE_ATTACH race with real parent's wait calls
	
	There is a race between PTRACE_ATTACH and the real parent calling wait. 
	For a moment, the task is put in PT_PTRACED but with its parent still
	pointing to its real_parent.  In this circumstance, if the real parent
	calls wait without the WUNTRACED flag, he can see a stopped child status,
	which wait should never return without WUNTRACED when the caller is not
	using ptrace.  Here it is not the caller that is using ptrace, but some
	third party.
	
	This patch avoids this race condition by adding the PT_ATTACHED flag to
	distinguish a real parent from a ptrace_attach parent when PT_PTRACED is
	set, and then having wait use this flag to confirm that things are in order
	and not consider the child ptraced when its ->ptrace flags are set but its
	parent links have not yet been switched.  (ptrace_check_attach also uses it
	similarly to rule out a possible race with a bogus ptrace call by the real
	parent during ptrace_attach.)
	
	While looking into this, I noticed that every arch's sys_execve has:
	
			current->ptrace &= ~PT_DTRACE;
	
	with no locking at all.  So, if an exec happens in a race with
	PTRACE_ATTACH, you could wind up with ->ptrace not having PT_PTRACED set
	because this store clobbered it.  That will cause later BUG hits because
	the parent links indicate ptracedness but the flag is not set.  The patch
	corrects all the places I found to use task_lock around diddling ->ptrace
	when it's possible to be racing with ptrace_attach.  (The ptrace operation
	code itself doesn't have this issue because it already excludes anyone else
	being in ptrace_attach.)
	
	Signed-off-by: Roland McGrath <roland@redhat.com>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<mingo@elte.hu>
	[PATCH] softirqs: fix latency of softirq processing
	
	The attached patch fixes a local_bh_enable() buglet: we first enabled
	softirqs then did we do local_softirq_pending() - often this is preemptible
	code.  So this task could be preempted and there's no guarantee that
	softirq processing will occur (except the periodic timer tick).
	
	The race window is small but existent.  This could result in packet
	processing latencies or timer expiration latencies - hard to detect and
	annoying bugs.
	
	The fix is to invoke softirqs with softirqs enabled but preemption still
	disabled.  Patch is against 2.6.9-rc2-mm1.
	
	Signed-off-by: Ingo Molnar <mingo@elte.hu>
	Cc: <davem@davemloft.net>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<arnd@arndb.de>
	[PATCH] add missing linux/syscalls.h includes
	
	I found that the prototypes for sys_waitid and sys_fcntl in
	<linux/syscalls.h> don't match the implementation.  In order to keep all
	prototypes in sync in the future, now include the header from each file
	implementing any syscall.
	
	Signed-off-by: Arnd Bergmann <arnd@arndb.de>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<albert@users.sourceforge.net>
	[PATCH] distinct tgid/tid CPU usage
	
	This patch adjusts /proc/*/stat to have distinct per-process and per-thread
	CPU usage, faults, and wchan.
	
	Signed-off-by: Albert Cahalan <albert@users.sf.net>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<Lev_Makhlis@bmc.com>
	[PATCH] show aggregate per-process counters in /proc/PID/stat 2
	
	Add up resource usage counters for live and dead threads to show aggregate
	per-process usage in /proc/<pid>/stat.  This mirrors the new getrusage()
	semantics.  /proc/<pid>/task/<tid>/stat still has the per-thread usage.
	
	After moving the counter aggregation loop inside a task->sighand lock to
	avoid nasty race conditions, it has survived stress-testing with '(while
	true; do sleep 1 & done) & top -d 0.1'
	
	Signed-off-by: Lev Makhlis <mlev@despammed.com>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<roland@redhat.com>
	[PATCH] exec: fix posix-timers leak and pending signal loss
	
	I've found some problems with exec and fixed them with this patch to
	de_thread.
	
	The second problem is that a multithreaded exec loses all pending signals. 
	This is violation of POSIX rules.  But a moment's thought will show it's
	also just not desireable: if you send a process a SIGTERM while it's in the
	middle of calling exec, you expect either the original program in that
	process or the new program being exec'd to handle that signal or be killed
	by it.  As it stands now, you can try to kill a process and have that
	signal just evaporate if it's multithreaded and calls exec just then.  I
	really don't know what the rationale was behind the de_thread code that
	allocates a new signal_struct.  It doesn't make any sense now.  The other
	code there ensures that the old signal_struct is no longer shared.  Except
	for posix-timers, all the state there is stuff you want to keep.  So my
	changes just keep the old structs when they are no longer shared, and all
	the right state is retained (after clearing out posix-timers).
	
	The final bug is that the cumulative statistics of dead threads and dead
	child processes are lost in the abandoned signal_struct.  This is also
	fixed by holding on to it instead of replacing it.
	
	Signed-off-by: Roland McGrath <roland@redhat.com>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<hugh@veritas.com>
	[PATCH] __set_page_dirty_nobuffers mappings
	
	Marcelo noticed that the BUG_ON in __set_page_dirty_nobuffers doesn't make
	much sense: it lost its way in 2.6.7, amidst so many page_mappings!
	
	It's supposed to be checking that, although page->mapping may suddenly go NULL
	from truncation, and although tmpfs swizzles page_mapping(page) between tmpfs
	inode address_space and swapper_space, there's sufficient stabilization while
	here in __set_page_dirty_nobuffers that the mapping after we locked
	mapping->tree_lock is the same as the mapping before we locked
	mapping->tree_lock i.e.  the lock we hold is the right one.
	
	Signed-off-by: Hugh Dickins <hugh@veritas.com>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<mason@suse.com>
	[PATCH] reiserfs: small filesystem fix
	
	On small filesystems (<128M), make sure not to reference bitmap blocks that
	don't exist.
	
	Thanks to Jan Kara for finding this bug.
	
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<mingo@elte.hu>
	[PATCH] fix the prof=schedule feature
	
	Fix mismerge of the "prof=schedule" feature.  Without this patch the output
	is a boring empty profile.
	
	Signed-off-by: Ingo Molnar <mingo@elte.hu>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<gkurz@meiosys.com>
	[PATCH] fork() bug invalidates file descriptors
	
	Take a process P1 that spawns a thread T (aka.  a clone with CLONE_FILES). 
	If P1 forks another process P2 (aka.  not a clone) while T is blocked in a
	open() that should return file descriptor FD, then FD will be unusable in
	P2.  This leads to strange behaviors in the context of P2: close(FD)
	returns EBADF, while dup2(a_valid_fd, FD) returns EBUSY and of course FD is
	never returned again by any syscall...
	
	testcase:
	
	#include <errno.h>
	#include <fcntl.h>
	#include <sched.h>
	#include <signal.h>
	#include <string.h>
	#include <sys/stat.h>
	#include <sys/types.h>
	#include <unistd.h>
	#include <asm/page.h>
	
	#define FIFO "/tmp/bug_fifo"
	#define FD   0
	
	/*
	 * This program is meant to show that calling fork() while a clone spawned
	 * with CLONE_FILES is blocked in open() makes a fd number unusable in the
	 * child.
	 *
	 *
	 *     Parent               Clone                Child
	 *        |
	 *   clone(CLONE_FILES)-

<mingo@elte.hu>
	[PATCH] generic irq subsystem: core
	
	The main goal of this patch is to consolidate all the different but still
	fundamentally similar arch/*/kernel/irq.c code into the kernel/irq/ subsystem.
	
	There are 4 new files in the kernel/irq/ directory:
	
	 - handle.c: core bits: __do_IRQ() and handle_IRQ_event(),
	   callable from arch-specific irq.c code.
	
	 - manage.c: the main driver apis
	
	 - spurious.c: the handling of buggy interrupt sources.
	
	 - autoprobe.c: probing of interrupts - older code but still in use.
	
	 - proc.c: /proc/irq/ code.
	
	 - internals.h for irq-core-internal interfaces not visible to drivers
	   nor arch PIC code.
	
	An architecture enables the generic hardirq code by defining
	CONFIG_GENERIC_HARDIRQS in its arch Kconfig.  People doing this conversion
	should check out the x86/x64/ppc/ppc64 patches for details - the conversion is
	quite straightforward but every converted function (i.e.  every function
	removed from the arch irq.c) _must_ be matched to the generic version and if
	there is any detail that the generic code should do it has to be added to the
	generic code.  All of the currently converted 4 architectures were converted
	like that, and the generic code was extended/fixed along the way.
	
	Other changes related to this patchset:
	
	 - clean up the irq include files (linux/irq.h, linux/interrupt.h,
	   linux/hardirq.h) and consolidate asm-*/[hard]irq.h. Note, to keep all
	   non-touched architectures in an untouched state this consolidation is
	   done carefully and strictly under CONFIG_GENERIC_HARDIRQS.
	
	   Once the consolidation is done we can do a couple of final cleanups
	   to reach the following logical splitup of 3 include files:
	
	     linux/interrupt.h: driver-visible APIs and details
	     linux/irq.h:       core irq and arch-PIC code, internals
	     asm-*/irq.h:       arch PIC and irq delivery details
	
	   the following include files will likely vanish:
	
	     linux/hardirq.h    merges into linux/irq.h
	     asm-*/hardirq.h:   merges into asm-*/irq.h
	     asm-*/hw_irq.h:    merges into asm-*/irq.h
	
	   Christoph would like to do these once the current wave of
	   cleanups gets in.
	
	Signed-off-by: Ingo Molnar <mingo@elte.hu>
	Signed-off-by: Christoph Hellwig <hch@lst.de>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<mingo@elte.hu>
	[PATCH] generic irq subsystem: x86 port
	
	x86 port of generic hardirq handling.
	
	akpm: (in response to build errors)
	
	- remove APIC_MISMATCH_DEBUG altogether.  Just make it synonymous with
	  CONFIG_X86_IO_APIC
	
	- Move the definition of irq_mis_count over to io_apic.c
	
	Signed-off-by: Ingo Molnar <mingo@elte.hu>
	Signed-off-by: Christoph Hellwig <hch@lst.de>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<mingo@elte.hu>
	[PATCH] generic irq subsystem: x86_64 port
	
	x86_64 port of generic hardirq handling.
	
	Signed-off-by: Ingo Molnar <mingo@elte.hu>
	Signed-off-by: Christoph Hellwig <hch@lst.de>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<mingo@elte.hu>
	[PATCH] generic irq subsystem: ppc port
	
	ppc32 port of generic hardirq handling.
	
	Signed-off-by: Ingo Molnar <mingo@elte.hu>
	Signed-off-by: Christoph Hellwig <hch@lst.de>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<mingo@elte.hu>
	[PATCH] generic irq subsystem: ppc64 port
	
	ppc64 port of generic hardirq handling.
	
	Signed-off-by: Ingo Molnar <mingo@elte.hu>
	Signed-off-by: Christoph Hellwig <hch@lst.de>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<mingo@elte.hu>
	[PATCH] doc: remove references to hardirq.c
	
	The patch below removes stale references to kernel/hardirq.c in comments,
	remnants of the earlier iterations of the generic irq subsystem code.
	
	Signed-off-by: Ingo Molnar <mingo@elte.hu>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<axboe@suse.de>
	[PATCH] invalidate page race fix
	
	invalidate_inode_pages() and invalidate_inode_pages2() can mark pages not
	uptodate while read() is trying to read from them.  This is interpreted as
	an I/O error.
	
	Fix that by teaching the invalidate code to leave the page alone if someone
	else has a ref on it.
	
	Signed-off-by: Jens Axboe <axboe@suse.de>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<akonovalov@ru.mvista.com>
	[PATCH] ppc32: Xilinx ML300 board support (very basic)
	
	Adds minimal Xilinx ML300 board support (enough to boot with ramdisk).  The
	only peripheral devices supported are 16x50 compatible UARTs.
	
	Signed-off-by: Andrei Konovalov <akonovalov@ru.mvista.com>
	Acked-by: Benjamin Herrenschmidt <benh@kernel.crashing.org>
	Acked-by: Matt Porter <mporter@kernel.crashing.org>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<mporter@kernel.crashing.org>
	[PATCH] ppc32: use gen550 for PPC44x progress/ppc-stub
	
	Use gen550 for early PPC progress messages and for the in-kernel ppc-stub.c
	on PPC44x.
	
	Signed-off-by: Matt Porter <mporter@kernel.crashing.org>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<mporter@kernel.crashing.org>
	[PATCH] ppc32: add gen550.h
	
	Add a missing include file for gen550.
	
	Signed-off-by: Matt Porter <mporter@kernel.crashing.org>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<mporter@kernel.crashing.org>
	[PATCH] ppc32: configure PPC440GX L2 cache based on CPU rev
	
	This patch enables/disables the PPC440GX L2 cache based on errata which
	prevents reliable operation on certain CPU revisions and speed grades.
	
	Signed-off-by: Eugene Surovegin <ebs@ebshome.net>
	Signed-off-by: Matt Porter <mporter@kernel.crashing.org>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<paulus@samba.org>
	[PATCH] ppc32: fix cpu voltage change delay
	
	This patch fixes a problem where my new powerbook would sometimes hang or
	crash when changing CPU speed.  We had schedule_timeout(HZ/1000) in there,
	intended to provide a delay of one millisecond.  However, even with
	HZ=1000, it was (I believe) only waiting for the next jiffy before
	proceeding, which could be less than a millisecond.  Changing the code to
	use msleep, and specifying a time of 1 jiffy + 1ms has fixed the problem.
	(When I looked at the msleep code, it appeared to me that msleep(1) with
	HZ=1000 would sleep for between 0 and 1ms.)
	
	Ben also asked me to remove the code that changes the AACK delay enable,
	after looking in the Darwin sources and seeing that Darwin does not change
	this in its corresponding code.
	
	Signed-off-by: Paul Mackerras <paulus@samba.org>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<paul.mundt@nokia.com>
	[PATCH] sh: SH73180 subtype support
	
	This adds support for the SH73180 subtype (sh4a).
	
	Signed-off-by: Hiroshi DOYU <Hiroshi_DOYU@montavista.co.jp>
	Signed-off-by: Paul Mundt <paul.mundt@nokia.com>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<paul.mundt@nokia.com>
	[PATCH] sh: SH7705 subtype cleanup + 32k cache support
	
	This fixes up the existing SH7705 support and enables the 32k cache mode for
	the processor.
	
	Signed-off-by: Alex Song <songqf9@yahoo.ca>
	Signed-off-by: Paul Mundt <paul.mundt@nokia.com>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<paul.mundt@nokia.com>
	[PATCH] sh: Use asm-offsets
	
	This basically follows the same change as for sh64 and adds asm-offsets to sh.
	 Some hardcoded thread_info struct offsets get cleaned up by this.
	
	Signed-off-by: Paul Mundt <paul.mundt@nokia.com>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<paul.mundt@nokia.com>
	[PATCH] sh: consistent API cleanup
	
	This gets rid of the hardcoded workarounds for the Dreamcast in the
	dma-mapping code, and now wraps into the common consistent_alloc() and
	consistent_free() routines if the ones in the machvec aren't interested in
	handling it.
	
	Signed-off-by: Paul Mundt <paul.mundt@nokia.com>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<paul.mundt@nokia.com>
	[PATCH] sh: defconfig updates
	
	Nothing exciting here..  random defconfig updates, as well as a few new ones
	for microdev and ctp/pci-sh03.
	
	Signed-off-by: Paul Mundt <paul.mundt@nokia.com>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<paul.mundt@nokia.com>
	[PATCH] sh: DMA API updates
	
	This updates some of the sh DMA drivers and core API.  Previously modules had
	to register for the channels they were interested in, but now it's dealt with
	transparently by the API with only the number of physical channels needing to
	be specified by each module.
	
	Signed-off-by: Paul Mundt <paul.mundt@nokia.com>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<paul.mundt@nokia.com>
	[PATCH] sh: SCBRR calculation fixes for early printk()
	
	The early printk() code was using a fixed PCLK value that was only sane in the
	SH7750 case.  This updates the SCBRR value calculation to use
	CONFIG_SH_PCLK_FREQ instead and thus works on other subtypes as well (tested
	on SH4-202).
	
	Signed-off-by: Paul Mundt <paul.mundt@nokia.com>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<paul.mundt@nokia.com>
	[PATCH] sh: EDOSK7705 board support
	
	This adds support for the edosk7705 board from Renesas.
	
	Signed-off-by: Paul Mundt <paul.mundt@nokia.com>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<paul.mundt@nokia.com>
	[PATCH] sh: SH-4 optimized memcpy()
	
	This adds support for an SH-4 optimized memcpy().
	Written by Stuart Menefy <stuart.menefy@st.com>.
	
	Signed-off-by: Paul Mundt <paul.mundt@nokia.com>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<paul.mundt@nokia.com>
	[PATCH] sh: SH4-202 MicroDev board support
	
	This adds support for the SH4-202 MicroDev from SuperH, Inc.
	
	Signed-off-by: Paul Mundt <paul.mundt@nokia.com>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<paul.mundt@nokia.com>
	[PATCH] sh: cleanup + merge
	
	This adds other random bits of sh cleanup.  This includes Kconfig updates,
	some exported symbols to satisfy module builds, cleanup of some whitespace
	damage, some compile fixes, and some general header and mach-type cleanup.
	
	Signed-off-by: Tom Rini <trini@kernel.crashing.org>
	Signed-off-by: Paul Mundt <paul.mundt@nokia.com>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<paul.mundt@nokia.com>
	[PATCH] sh: PCI updates
	
	This updates some of the PCI drivers.  SH7751, the sh03 board-specific PCI
	code, and some ST40 PCI updates are grouped in this.  
	
	Signed-off-by: Paul Mundt <paul.mundt@nokia.com>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<paul.mundt@nokia.com>
	[PATCH] sh: oprofile support for SH7750/SH7750S
	
	The SH7750 and SH7750S have hardware performance counters, this adds an
	oprofile driver for those.
	
	Signed-off-by: Paul Mundt <paul.mundt@nokia.com>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<paul.mundt@nokia.com>
	[PATCH] sh: Broken-out CPU subtype probing
	
	Previously we could do subtype parsing and cache configuration in the same
	location..  but with the introduction of things like the SH7705 where we use
	SH-3 style probing with SH-4 style caches, this is no longer the case.  As
	such, we move the probe code to a saner place.
	
	Signed-off-by: Paul Mundt <paul.mundt@nokia.com>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<paul.mundt@nokia.com>
	[PATCH] sh: SE73180 board support
	
	This adds support for the SH73180 Solution Engine.
	
	Signed-off-by: Hiroshi DOYU <Hiroshi_DOYU@montavista.co.jp>
	Signed-off-by: Paul Mundt <paul.mundt@nokia.com>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<paul.mundt@nokia.com>
	[PATCH] sh: CTP/PCI-SH03 board support
	
	This adds support for the CTP/PCI-SH03 board from Interface.
	
	Signed-off-by: Saito.K <ksaito@interface.co.jp>
	Signed-off-by: Paul Mundt <paul.mundt@nokia.com>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<paul.mundt@nokia.com>
	[PATCH] sh: sh-sci updates
	
	sh-sci updates all around the board.  Support for the newly added subtypes,
	some compilation cleanups, etc.
	
	Signed-off-by: Paul Mundt <paul.mundt@nokia.com>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<paul.mundt@nokia.com>
	[PATCH] sh: ST40 updates
	
	This includes some ST40 updates from the ST tree.  The most notable change is
	the ST40GX1 fixes for INTC2-based interrupts.
	
	Signed-off-by: Alex Bennee <kernel-hacker@bennee.com>
	Signed-off-by: Paul Mundt <paul.mundt@nokia.com>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<trini@kernel.crashing.org>
	[PATCH] sh: fix EMBEDDED_RAMDISK with O=
	
	The following fixes EMBEDDED_RAMDISK to work with O=.  The problem was that
	we couldn't find the linker script, since we needed to specify the patch to
	the source tree for it.  I've tested this with the ramdisk set to both
	'ramdisk.gz' and '../ramdisk.gz'.
	
	Signed-off-by: Tom Rini <trini@kernel.crashing.org>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<suresh.b.siddha@intel.com>
	[PATCH] share i386/x86_64 intel cache descriptors table
	
	Some cache descriptors are missing from x86_64 table.  So instead of
	copying from i386 code, here is a patch to share the table between i386 and
	x86_64.
	
	Signed-off-by: Suresh Siddha <suresh.b.siddha@intel.com>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<oleg@tv-sign.ru>
	[PATCH] Fix show_trace() in irq context with CONFIG_4KSTACKS
	
	- valid_stack_ptr() erroneously assumes that stack always lives in
	  task_struct->thread_info.
	
	- the main loop in show_trace() does not recalc ebp after stack
	  switching.  With CONFIG_FRAME_POINTER every call to print_context_stack()
	  will produce the same output.
	
	With this patch, show_trace() does not use task argument in the main loop. 
	Instead, it converts stack to thread_info* context, and passes it to
	print_context_stack() and (implicitly) to valid_stack_ptr().
	
	valid_stack_ptr() now does bounds checking against proper context.
	
	Signed-off-by: Oleg Nesterov <oleg@tv-sign.ru>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<suresh.b.siddha@intel.com>
	[PATCH] Disable SW irqbalance/irqaffinity for E7520/E7320/E7525 v2
	
	As part of the workaround for the "Interrupt message re-ordering across hub
	interface" errata (page #16 in
	http://developer.intel.com/design/chipsets/specupdt/30288402.pdf), BIOS may
	enable hardware IRQ balancing for E7520/E7320/E7525(revision ID 0x9 and
	below) based platforms.
	
	Add pci quirks to disable SW irqbalance/affinity on those platforms.  Move
	balanced_irq_init() to late_initcall so that kirqd will be started after
	pci quirks.
	
	Signed-off-by: Suresh Siddha <suresh.b.siddha@intel.com>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<mingo@elte.hu>
	[PATCH] fix nosmp & pcibios_fixup_irqs() interaction
	
	Fix interaction between nosmp and pcibios_fixup_irqs().
	
	When we boot with nosmp we dont have all the mptable info, so
	IO_APIC_get_PCI_irq_vector() doesnt work and devices just end up getting a
	wrong interrupt.
	
	From: Oleg Nesterov <oleg@tv-sign.ru>
	Acked-by: Ingo Molnar <mingo@elte.hu>
	
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<rddunlap@osdl.org>
	[PATCH] i386/io_apic init section fixups
	
	Code section errors in i386/io_apic.c found by scripts/reference_init.pl.
	Looks like they could cause problems for a few drivers or in a real hotplug
	environment.
	
	Error: ./arch/i386/kernel/io_apic.o .text refers to 000018ff R_386_PC32        .init.text
	
	call chain:
	  snd_mpu401_acpi_resource
	    acpi_register_gsi
	      mp_register_gsi
		io_apic_set_pci_routing
	{A}	  ioapic_register_intr
		    IO_APIC_irq_trigger
		      find_irq_entry
	
	Error: ./arch/i386/kernel/io_apic.o .text refers to 00001967 R_386_PC32        .init.text
	
		(as above thru {A}, then:)
		  IO_APIC_irq_trigger
		    irq_trigger
		      MPBIOS_trigger	>> removing __init from this led to
					   needing to remove __init from
					   EISA_ELCR also.
	
	Signed-off-by: Randy Dunlap <rddunlap@osdl.org>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<pavel@ucw.cz>
	[PATCH] swsusp: fix process start times after resume
	
	Currently, process start times change after swsusp (because they are
	derived from jiffies and current time, oops).  This should fix it.
	
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<pavel@ucw.cz>
	[PATCH] swsusp: add comments at critical places
	
	apm.c needs save_processor_state and friends.  Add a comment to keep people
	from removing it.  Describe a way to make swsusp work on non-PSE machines. 
	Document purpose of acpi_restore_state.
	
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<pavel@ucw.cz>
	[PATCH] swsusp: Documentation update
	
	Documentation update.
	
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<oliver@neukum.org>
	[PATCH] additional documentation for power management
	
	This is additional documentation for power management.  Pavel Machek has
	given his acknowledgement.
	
	Signed-Off-By: Oliver Neukum <oliver@neukum.name>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<venkatesh.pallipadi@intel.com>
	[PATCH] S3 suspend/resume with noexec v2
	
	This patch is required for S3 suspend-resume on noexec capable systems.  On
	these systems, we need to save and restore MSR_EFER during S3
	suspend-resume.
	
	Signed-off-by: "Venkatesh Pallipadi" <venkatesh.pallipadi@intel.com>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<agx@sigxcpu.org>
	[PATCH] Mac swsusp driver fixes
	
	Allow swsusp work with macintosh's own thermal sensor drivers enabled.
	
	Contributions from Nathan Hand <nathanh@manu.com.au>
	
	Signed-Of-By: Guido Guenther <agx@sigcpu.org>
	
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<takata@linux-m32r.org>
	[PATCH] m32r: ds1302 driver
	
	This is a DS1302 real-time clock driver.
	
	It is moved from arch/m32r/drivers/, has been originally taken from
	arch/cris/arch-v10/drivers/ds1302.c.
	
	Currently, this driver supports only m32r target boards.  Maybe some work will
	be required to support other target.
	
	Signed-off-by: Hayato Fujiwara <fujiwara@linux-m32r.org>
	Signed-off-by: Hirokazu Takata <takata@linux-m32r.org>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<takata@linux-m32r.org>
	[PATCH] m32r: new CF/PCMCIA driver for m32r
	
	This patch is for the new M32R CF/PCMCIA drivers.  It is moved from
	arch/m32r/drivers/ and some part are updated for 2.6 kernel.
	
	Signed-off-by: Hayato Fujiwara <fujiwara@linux-m32r.org>
	Signed-off-by: Hirokazu Takata <takata@linux-m32r.org>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<takata@linux-m32r.org>
	[PATCH] m32r: update include/asm-m32r/m32102.h
	
	Here is a patch to update include/asm-m32r/m32102.h.
	
	     * include/asm-m32r/m32102.h:
	     - Add macro definitions for DMA controller.
	     - Cosmetics; rearrange indentations.
	
	Signed-off-by: Hirokazu Takata <takata@linux-m32r.org>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<takata@linux-m32r.org>
	[PATCH] m32r: AR camera driver
	
	Here is a patch for the Renesas AR camera driver for m32r.
	
	  - AR (artificial retina) camera is newly supported.
	    AR camera module: Renesas M64278E-800, VGA(640x480 pixcels)
	    http://www.renesas.com/avs/resource/japan/jpn/pdf/assp/rjj01f0005_psmobile.pdf
	
	Signed-off-by: Hayato Fujiwara <fujiwara@linux-m32r.org>
	Signed-off-by: Hirokazu Takata <takata@linux-m32r.org>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<takata@linux-m32r.org>
	[PATCH] m32r: SIO driver
	
	Here is a patch to support the M32R SIO (serial IO) driver.
	
	This driver supports the M32R serial ports.
	- Supports two types M32R serial interfaces; M32R_SIO and M32R_PLDSIO.
	- With SMP safeness.
	
	Currently the M32R_PLDSIO serial interface, which is implemented on a PLD
	on the M3T-M32700UT evaluation board, has slightly different specification
	from the integrated peripheral SIO (M32R_SIO).  Now we can select them by
	CONFIG_ option.
	
	It is a serial-core based driver, based on drivers/serial/8250.c.  Any
	comments or suggestions will be appreciated.
	
	Signed-off-by: Hirokazu Takata <takata@linux-m32r.org>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<takata@linux-m32r.org>
	[PATCH] m32r: fix sys_tas system call for m32r
	
	This patch fixes a sys_tas system call for m32r.
	
	- This patch fixes an Oops at sys_tas() in case CONFIG_SMP && CONFIG_PREEMPT.
	  > Unable to handle kernel paging request at virtual address XXXXXXXX
	
	  It is because a page fault happens at the spin_locked region in sys_tas()
	  and in_atomic() checks preempt_count, but spin_lock() already counts up
	  the preemt_count.
	
	  arch/m32r/kernel/sys_m32r.c:
	    32  /*
	    33   * sys_tas() - test-and-set
	    34   * linuxthreads testing version
	    35   */
	    36  #ifndef CONFIG_SMP
	    37  asmlinkage int sys_tas(int *addr)
	    38  {
	    39          int oldval;
	    40          unsigned long flags;
	    41
	    42          if (!access_ok(VERIFY_WRITE, addr, sizeof (int)))
	    43                  return -EFAULT;
	    44          local_irq_save(flags);
	    45          oldval = *addr;
	    46          *addr = 1;
	    47          local_irq_restore(flags);
	    48          return oldval;
	    49  }
	    50  #else /* CONFIG_SMP */
	    51  #include <linux/spinlock.h>
	    52
	    53  static spinlock_t tas_lock = SPIN_LOCK_UNLOCKED;
	    54
	    55  asmlinkage int sys_tas(int *addr)
	    56  {
	    57          int oldval;
	    58
	    59          if (!access_ok(VERIFY_WRITE, addr, sizeof (int)))
	    60                  return -EFAULT;
	    61
	    62          spin_lock(&tas_lock);
	    63          oldval = *addr;
	
		/* <<< ATTENTION >>>
		 * A page fault may happen here, because "addr" points an
		 * user-space area.
		 */
	
	    64          *addr = 1;
	    65          spin_unlock(&tas_lock);
	    66
	    67          return oldval;
	    68  }
	    69  #endif /* CONFIG_SMP */
	
	  arch/mm/fault.c:
	   137  /*
	   138   * If we're in an interrupt or have no user context or are runni
	ng in an
	   139   * atomic region then we must not take the fault..
	   140   */
	   141  if (in_atomic() || !mm)
	   142          goto bad_area_nosemaphore;
	
	- sys_tas() is used for user-level mutual exclusion for the m32r,
	  which is prepared to implement a linuxthreads library.
	  The above problem may be happened in a program, which uses
	  pthread_mutex_lock(), calls sys_tas().
	
	  The current m32r instruction set has no user-level locking
	  functions for mutual exclusion.
	  # I hope it will be fixed in the future...
	
	- This patch fixes the problem by using _raw_spin_lock() instead of
	  spin_lock().  spin_lock() increments up preemt_count, on the contrary,
	  _raw_sping_lock() does not.
	
	  # I think this fix is just a temporary work around, and
	  # it is preferable to be rewrite to make it simpler by using 
	  # asm() function or something...
	
		* arch/m32r/kernel/sys_m32r.c:
		- Fix sys_tas() for CONFIG_SMP && CONFIG_PREEMPT.
	
	Signed-off-by: Hayato Fujiwara <fujiwara@linux-m32r.org>
	Signed-off-by: Hirokazu Takata <takata@linux-m32r.org>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<takata@linux-m32r.org>
	[PATCH] m32r: update arch/m32r/mm/fault.c to fix a  compile error
	
	Here is a patch to update arch/m32r/mm/fault.c in order to fix
	a compile error of -mm kernel for m32r.
	
		* arch/m32r/mm/fault.c:
		- Add the third parameter of expand_stack().
		  This modification is derived from
		  enforce-a-gap-between-heap-and-stack.patch;
	
		  "heap-stack-gap for 2.6" (Sep. 25, 2004)
		  http://www.uwsg.iu.edu/hypermail/linux/kernel/0409.3/0435.html
	
	Signed-off-by: Hirokazu Takata <takata@linux-m32r.org>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<takata@linux-m32r.org>
	[PATCH] m32r: fix a compile error of M32R SIO driver
	
	Here is a patch to fix a compile error of m32r-sio.c.
	
		* include/asm-m32r/termbits.h:
		- Add CTVB definition.
		  This modification is derived from new-serial-flow-control.patch;
	
		  "[Patch] new serial flow control" (Oct. 4, 2004)
		  http://www.uwsg.iu.edu/hypermail/linux/kernel/0410.0/0853.html
	
	Signed-off-by: Hirokazu Takata <takata@linux-m32r.org>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<blaisorblade_spam@yahoo.it>
	[PATCH] uml: readd linux Makefile target
	
	Since people are used to doing "make linux ARCH=um" and to use "linux" as
	the kernel image, make it be an hard link to vmlinux.  This should hurt the
	less possible the users (actually nothing) while not slowing down the
	build.
	
	Acked-by: Jeff Dike <jdike@addtoit.com>
	Signed-off-by: Paolo 'Blaisorblade' Giarrusso <blaisorblade_spam@yahoo.it>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<aherrman@de.ibm.com>
	[PATCH] s390: zfcp host adapter
	
	zfcp host adapter change:
	 - Return -EIO if wait_event_interruptible_timeout was interrupted.
	 - Reduce stack uage of zfcp_cfdc_dev_ioctl.
	 - Make zfcp_sg_list_[alloc,free] more consistent.
	 - Store driver version to zfcp_data structure.
	 - Add missing FSF states and make corresponding log messages consistent.
	 - Always wait for completion in zfcp_scsi_command_sync.
	 - Add Andreas to authors list.
	 - Add timeout for cfdc upload/download.
	 - Add support for temporary units (units not registered to the scsi stack).
	 - Allow sending of ELS commands to ports by their d_id.
	 - Increase port refcount while link test is running.
	
	Signed-off-by: Martin Schwidefsky <schwidefsky@de.ibm.com>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<schwidefsky@de.ibm.com>
	[PATCH] s390: qeth layer 2 support
	
	From: Frank Pavlic <pavlic@de.ibm.com>
	From: Thomas Spatzier <tspat@de.ibm.com>
	
	qeth network driver changes:
	 - Add Layer 2 support for OSA-Express.
	
	Signed-off-by: Martin Schwidefsky <schwidefsky@de.ibm.com>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<arndb@de.ibm.com>
	[PATCH] s390: z/VM watchdog timer
	
	Add support for z/VM watchdog timer.
	
	Signed-off-by: Martin Schwidefsky <schwidefsky@de.ibm.com>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<wein@de.ibm.com>
	[PATCH] s390: z/VM log reader
	
	Add an interface to read from the z/VM recording system services.
	
	Signed-off-by: Martin Schwidefsky <schwidefsky@de.ibm.com>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<edrossma@us.ibm.com>
	[PATCH] s390: crypto device driver
	
	crypto driver changes:
	 - Add support for zero-pad and crypto express II (CEX2C).
	
	Signed-off-by: Martin Schwidefsky <schwidefsky@de.ibm.com>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<geraldsc@de.ibm.com>
	[PATCH] s390: add support to read z/VM monitor records
	
	Add support to read z/VM monitor records.
	
	Signed-off-by: Martin Schwidefsky <schwidefsky@de.ibm.com>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<jeffm@novell.com>
	[PATCH] ReiserFS: Cleanup internal use of bh macros
	
	This patch cleans up ReiserFS's use of buffer head flags.  All direct
	access of BH_* are made into macro calls, and all reiserfs-specific BH_*
	macro implementations have been removed and replaced with the BUFFER_FNS
	implementations found in linux/buffer_head.h
	
	Signed-off-by: Jeff Mahoney <jeffm@novell.com>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<jeffm@novell.com>
	[PATCH] ReiserFS: Cleanup access of journal (cosmetic)
	
	This patch cleans up fs/reiserfs/journal.c such that repeated uses of
	SB_JOURNAL(p_s_sb) are removed in favor of a local journal variable.  The
	compiler won't care, and it makes the code much easier to read.
	
	Signed-off-by: Jeff Mahoney <jeffm@novell.com>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<jeffm@novell.com>
	[PATCH] ReiserFS: Add I/O error handling to journal operations
	
	This patch allows ReiserFS to handle I/O errors in the journal (or journal
	flush) where it would have previously panicked.  The new behavior is to
	mark the filesystem read-only, disallow new transactions to be started, and
	to allow existing transactions to complete (though not to commit).  The
	resultant filesystem can be safely umounted, and checked via normal
	mechanisms.  As it is a journaling filesystem, the filesystem itself will
	be in a similar state to the power being cut to the machine, once umounted.
	
	Signed-off-by: Jeff Mahoney <jeffm@novell.com>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<jeffm@novell.com>
	[PATCH] ReiserFS: Fix several missing reiserfs_write_unlock calls
	
	This patch fixes several missing reiserfs_write_unlock() calls on error
	paths not introduced by reiserfs-io-error-handling.diff
	
	Signed-off-by: Jeff Mahoney <jeffm@novell.com>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<vladimir.grouzdev@Jaluna.COM>
	[PATCH] xtime value may become incorrect
	
	The xtime value may become incorrect when the update_wall_time(ticks)
	function is called with "ticks" > 1.  In such a case, the xtime variable is
	updated multiple times inside the loop but it is normalized only once
	outside of the loop.
	
	This bug was reported at:
	
	http://bugme.osdl.org/show_bug.cgi?id=3403
	
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<nickpiggin@yahoo.com.au>
	[PATCH] sched: trivial sched changes
	
	The following patches properly intergrate sched domains and cpu hotplug (using
	Nathan's code), by having sched-domains *always* only represent online CPUs,
	and having hotplug notifier to keep them up to date.
	
	Then tackle Jesse's domain setup problem: the disjoint top-level domains were
	completely broken.  The group-list builder thingy simply can't handle distinct
	sets of groups containing the same CPUs.  The code is ugly and specific enough
	that I'm re-introducing the arch overridable domains.
	
	I doubt we'll get a proliferation of implementations, because the current
	generic code can do the job for everyone but SGI.  I'd rather take a look at
	it again down the track if we need to rather than try to shoehorn this into
	the generic code.
	
	Nathan and I have tested the hotplug work. He's happy with it.
	
	I've tested the disjoint domain stuff (copied it to i386 for the test), and it
	does the right thing on the NUMAQ.  I've asked Jesse to test it as well, but
	it should be fine - maybe just help me out and run a test compile on ia64 ;)
	
	This really gets sched domains into much better shape.  Without further ado,
	the patches.
	
	
	
	This patch:
	
	Make a definition static and slightly sanitize ifdefs.
	
	Signed-off-by: Nick Piggin <nickpiggin@yahoo.com.au>
	Signed-off-by: Ingo Molnar <mingo@elte.hu>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<nickpiggin@yahoo.com.au>
	[PATCH] sched: add CPU_DOWN_PREPARE notifier
	
	Add a CPU_DOWN_PREPARE hotplug CPU notifier.  This is needed so we can dettach
	all sched-domains before a CPU goes down, thus we can build domains from
	online cpumasks, and not have to check for the possibility of a CPU coming up
	or going down.
	
	Signed-off-by: Nick Piggin <nickpiggin@yahoo.com.au>
	Signed-off-by: Ingo Molnar <mingo@elte.hu>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<nickpiggin@yahoo.com.au>
	[PATCH] sched: integrate cpu hotplug and sched domains
	
	Register a cpu hotplug notifier which reinitializes the scheduler domains
	hierarchy.  The notifier temporarily attaches all running cpus to a "dummy"
	domain (like we currently do during boot) to avoid balancing.  It then calls
	arch_init_sched_domains which rebuilds the "real" domains and reattaches the
	cpus to them.
	
	Also change __init attributes to __devinit where necessary.
	
	Signed-off-by: Nathan Lynch <nathanl@austin.ibm.com>
	
	Alterations from Nick Piggin:
	
	* Detach all domains in CPU_UP|DOWN_PREPARE notifiers. Reinitialise and
	  reattach in CPU_ONLINE|DEAD|UP_CANCELED. This ensures the domains as
	  seen from the scheduler won't become out of synch with the cpu_online_map.
	
	* This allows us to remove runtime cpu_online verifications. Do that.
	
	* Dummy domains are __devinitdata.
	
	* Remove the hackery in arch_init_sched_domains to work around the fact that
	  the domains used to work with cpu_possible maps, but node_to_cpumask returned
	  a cpu_online map.
	
	Signed-off-by: Nick Piggin <nickpiggin@yahoo.com.au>
	Signed-off-by: Ingo Molnar <mingo@elte.hu>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<akpm@osdl.org>
	[PATCH] sched: arch_destroy_sched_domains warning fix
	
	kernel/sched.c:4114: warning: `arch_destroy_sched_domains' defined but not used
	
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<nickpiggin@yahoo.com.au>
	[PATCH] sched: sched add load balance flag
	
	Introduce SD_LOAD_BALANCE flag for domains where we don't want to do load
	balancing (so we don't have to set up meaningless spans and groups).  Use this
	for the initial dummy domain, and just leave isolated CPUs on the dummy
	domain.
	
	Signed-off-by: Nick Piggin <nickpiggin@yahoo.com.au>
	Signed-off-by: Ingo Molnar <mingo@elte.hu>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<nickpiggin@yahoo.com.au>
	[PATCH] sched: remove disjoint NUMA domains setup
	
	Remove the disjoint NUMA domains setup code. It was broken.
	
	Signed-off-by: Nick Piggin <nickpiggin@yahoo.com.au>
	Signed-off-by: Ingo Molnar <mingo@elte.hu>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<nickpiggin@yahoo.com.au>
	[PATCH] sched: make domain setup overridable
	
	Allow sched domain setup to be overridden by arch code. This functionality
	is needed again.
	
	From: Paul Jackson <pj@sgi.com>
	
	  Builds of 2.6.9-rc1-mm5 ia64 NUMA configs fail, with many complaints that
	  SD_NODE_INIT is defined twice, in asm/processor.h and linux/sched.h.
	
	  I guess that the preprocessor conditionals were wrong when Nick added the
	  per-arch override ability again of SD_NODE_INIT were wrong.  At least this
	  change lets me rebuild ia64 again.
	
	Signed-off-by: Nick Piggin <nickpiggin@yahoo.com.au>
	Signed-off-by: Ingo Molnar <mingo@elte.hu>
	Signed-off-by: Paul Jackson <pj@sgi.com>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<nickpiggin@yahoo.com.au>
	[PATCH] sched: IA64 add disjoint NUMA domain support
	
	Implement disjoint NUMA domain setup for IA64 architecture.  Most of the code
	was what was ripped out of kernel/sched.c, which was written by Jesse Barnes
	<jbarnes@sgi.com>.  I fixed up the tricky NUMA groups initialistion.
	
	Signed-off-by: Nick Piggin <nickpiggin@yahoo.com.au>
	Signed-off-by: Ingo Molnar <mingo@elte.hu>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<nickpiggin@yahoo.com.au>
	[PATCH] sched: fix domain debug for isolcpus
	
	Fix an oops in the domain debug code when isolated CPUs are specified.
	Introduced by 5/8 "sched add load balance flag"
	
	Signed-off-by: Nick Piggin <nickpiggin@yahoo.com.au>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<nickpiggin@yahoo.com.au>
	[PATCH] sched: enable SD_LOAD_BALANCE
	
	Actually turn on SD_LOAD_BALANCE for the regular domains.  Introduced by
	5/8 "sched add load balance flag".
	
	Signed-off-by: Nick Piggin <nickpiggin@yahoo.com.au>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<nickpiggin@yahoo.com.au>
	[PATCH] sched: hotplug add a CPU_DOWN_FAILED notifier
	
	Introduce CPU_DOWN_FAILED notifier, so we can cope with a failure after a
	CPU_DOWN_PREPARE notice.
	
	This fixes 3/8 "add CPU_DOWN_PREPARE notifier" to be useful
	
	Signed-off-by: Nick Piggin <nickpiggin@yahoo.com.au>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<nickpiggin@yahoo.com.au>
	[PATCH] sched: use CPU_DOWN_FAILED notifier
	
	Use CPU_DOWN_FAILED notifier in the sched-domains hotplug code.  This goes
	with 4/8 "integrate cpu hotplug and sched domains"
	
	Signed-off-by: Nick Piggin <nickpiggin@yahoo.com.au>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<nickpiggin@yahoo.com.au>
	[PATCH] sched: fixes for ia64 domain setup
	
	Still having some trouble with ia64 domain setup on the Altixes.  Jesse
	hasn't had much time to look into it, and I'm lacking an Altix, so I'm not
	sure if this is right or not...
	
	Anyway, it again does the right thing on the NUMAQ, and fixes some real
	bugs, so can you include it please?
	
	* Increase SD_NODES_PER_DOMAIN to 6 from 4 to better match Altix's
	   topology. A setting of 4 will include this node, the other one
	   in the brick, and the 2 nodes in the next closest brick, while 6
	   will catch 2 other bricks. Probably it could be increased even
	   more.
	
	* Work correctly with sparse and not completely full node maps.
	
	* Nasty typo fixed in find_next_best_node:
		-               val = node_distance(node, i);
		+               val = node_distance(node, n);
	
	* Ensure all nodes are themselves a member of their numa balancing
	   domain. This is more a precaution against creative implementations
	   of node_distance.. but it makes the setup easier to verify without
	   having to look at a table of node_distance's, which is possibly
	   generated at runtime.
	
	So again, I'm not too sure if this will fix the Altix setup or not.  But if
	you do a release, it will surely be less broken than it was before.
	
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<akpm@osdl.org>
	[PATCH] sched: print preempt count
	
	Better debugging output when the CPU scheduler detects atomicity errors.
	
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<pwil3058@bigpond.net.au>
	[PATCH] CPU Scheduler: fix potential error in runqueue nr_uninterruptible count
	
	Problem:
	
	In the function try_to_wake_up(), when the runqueue's nr_uninterruptible
	field is decremented it's possible (on SMP systems) that the pointer no
	longer points to the runqueue that the task being woken was on when it went
	to sleep.  This would cause the wrong runqueue's field to be decremented
	and the correct one tp remain unchanged.
	
	Fix:
	
	Save a pointer to the old runqueue at the beginning of the function and use
	it when decrementing nr_uninterruptible.
	
	Signed-off-by: Peter Williams <pwil3058@bigpond.net.au>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<colpatch@us.ibm.com>
	[PATCH] sched_domains: Make SD_NODE_INIT per-arch #2
	
	Here's yet another version of a patch to implement per-arch SD_*_INITs. 
	This follows the same basic idea of my last patch, but
	
	1) defines an arch-specific SD_NODE_INIT for the 4 NUMA arches (i386,
	   x86_64, IA64 & PPC64),
	
	2) defines *default* SD_CPU_INIT & SD_SIBLING_INIT for *all* arches,
	   with the possibility of them being overridden by simply defining an
	   arch-specific version in include/asm/topology.h.
	
	The motivation behind the third version of this patch is that Martin feels
	that there should be no "default" NUMA initializer because NUMA
	characteristics are *very* arch/platform specific, and hence a "default"
	NUMA initializer can only lead to confusion.  I agree with most of that,
	but don't quite see as much harm in having a default as he does.
	Nevertheless, to keep him quiet, I've run up this version of the patch. 
	Martin, please run this through your magic test suite and make sure I
	didn't break anything trivial.
	
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<colpatch@us.ibm.com>
	[PATCH] sched: remove NODE_BALANCE_RATE definitions
	
	NODE_BALANCE_RATE is defined all over the place, but used nowhere.  Let's
	remove it.
	
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<mingo@elte.hu>
	[PATCH] sched: fix SCHED_SMT & numa=fake=2 lockup
	
	This patch fixes an interaction between the numa=fake=<domains> feature,
	the domain setup code and cpu_siblings_map[].  The bug leads to a bootup
	crash when using numa=fake=2 on a 2-way/4-way SMP+HT box.
	
	When SCHED_SMT is turned on the domains-setup code relies on siblings not
	spanning multiple domains (which makes perfect sense).  But numa=fake=2
	creates an assymetric 1101/0010 splitup between CPUs, which results in two
	siblings being on different nodes.
	
	The patch adds a check_siblings_map() function that checks the sibling maps
	and fixes them up if they violate this rule.  (it also prints a warning in
	that case.)
	
	The patch also turns SCHED_DOMAIN_DEBUG back on - had this been enabled
	we'd have noticed this bug much earlier.
	
	From: Badari Pulavarty <pbadari@us.ibm.com>
	
	  arch/x86_64/mm/numa.c: In function `numa_setup':
	  arch/x86_64/mm/numa.c:332: error: `numa_fake' undeclared (first use in this function)
	  arch/x86_64/mm/numa.c:332: error: (Each undeclared identifier is reported only once
	  arch/x86_64/mm/numa.c:332: error: for each function it appears in.)
	
	Signed-off-by: Ingo Molnar <mingo@elte.hu>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<mingo@elte.hu>
	[PATCH] fix & clean up zombie/dead task handling & preemption
	
	This patch fixes all the preempt-after-task->state-is-TASK_DEAD problems we
	had.  Right now, the moment procfs does a down() that sleeps in
	proc_pid_flush() [it could] our TASK_DEAD state is zapped and we might be
	back to TASK_RUNNING to and we trigger this assert:
	
	        schedule();
	        BUG();
	        /* Avoid "noreturn function does return".  */
	        for (;;) ;
	
	I have split out TASK_ZOMBIE and TASK_DEAD into a separate p->exit_state
	field, to allow the detaching of exit-signal/parent/wait-handling from
	descheduling a dead task.  Dead-task freeing is done via PF_DEAD.
	
	Tested the patch on x86 SMP and UP, but all architectures should work
	fine.
	
	Signed-off-by: Ingo Molnar <mingo@elte.hu>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<axboe@suse.de>
	[PATCH] return full SCSI status byte in SG_IO
	
	This has been around for a while. Return the full scsi result byte in
	rq->errors for SG_IO generated requests.
	
	Signed-off-by: Jens Axboe <axboe@suse.de>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<torvalds@ppc970.osdl.org>
	Fix old-style fn declaration.

<torvalds@ppc970.osdl.org>
	Don't use obsolete gcc named initializer syntax.
	
	The proper C99 syntax is much preferred.

<torvalds@ppc970.osdl.org>
	Fix pci config syscall definitions.
	
	Including the proper header file showed that they didn't
	match the declared prototypes.

<rmk@flint.arm.linux.org.uk>
	[SERIAL] Add FCR setting to serial8250_config structure.
	
	This allows us to adapt the FCR for each port type in a much more
	flexible way, and allows us to set the transmit trigger levels.

<rmk@flint.arm.linux.org.uk>
	[SERIAL] Convert TI16C750 flow control into a port capability.
	
	Add UART_CAP_AFE, and use this to enable TI16C750 flow control,
	but only if we have 32 bytes or more of FIFO.

<rmk@flint.arm.linux.org.uk>
	[SERIAL] Add comment about frobbing the 950's ACR on TX disable.
	
	Add a bit of explaination why we only turn off the transmitter if
	we are called from uart_stop().

<kaber@coreworks.de>
	[NETFILTER]: Convert ip6t_physdev match function to new argument order
	
	Signed-off-by: Patrick McHardy <kaber@trash.net>

<rmk@flint.arm.linux.org.uk>
	[SERIAL] Clean up handling of LSR in receive function.
	
	It's pointless accessing the LSR value via a pointer all the time -
	it prevents the compiler optimising it.  Also, ensure that we
	recognise a break sent during a kernel printk correctly.

<rmk@flint.arm.linux.org.uk>
	[SERIAL] Add explaination why we don't use RTS flow control.

<greg@kroah.com>
	USB: add serial ipw driver
	
	Based on a 2.4 tty usb driver from Roelf Diedericks <roelfd@inet.co.za>
	Cleaned up and ported to 2.6 and the usb-serial layer by me.
	
	Signed-off-by: Greg Kroah-Hartman <greg@kroah.com>

<rmk@flint.arm.linux.org.uk>
	[SERIAL] Make port autoprobing set up->capabilities.
	
	Convert port autoprobing to set up->capabilities as it discovers
	various capabilities of the port.  Warn when the detected
	capabilities do not match those in the uart_config table.

<rmk@flint.arm.linux.org.uk>
	[SERIAL] Add new port registration/unregistration functions.
	
	serial8250_register_port()/serial8250_unregister_port() has the
	capability of registering ports with their struct device nodes,
	which allows sysfs to indicate which tty devices belong to which
	hardware devices.
	
	We also add a serial8250 platform device driver in an initial
	attempt at PM for ISA ports.  However, I'm leaving out the
	platform device for the time being since adding that would cause
	potential oops issues.

<petero2@telia.com>
	[PATCH] DVD+RW support
	
	This patch adds support for using DVD+RW drives as writable block devices.
	
	The patch is based on work from:
	
	        Andy Polyakov <appro@fy.chalmers.se> - Wrote the 2.4 patch
	        Nigel Kukard <nkukard@lbsd.net> - Initial porting to 2.6.x
	
	It works for me using an Iomega Super DVD 8x USB drive.
	
	
	  Nov 5 2001, Aug 8 2002. Modified by Andy Polyakov
	  <appro@fy.chalmers.se> to support MMC-3 complaint DVD+RW units.
	
	  Modified by Nigel Kukard <nkukard@lbsd.net> - support DVD+RW
	  2.4.x patch by Andy Polyakov <appro@fy.chalmers.se>
	
	This patch implements CDRW packet writing as a kernel block device.  Usage
	instructions are in the packet-writing.txt file.
	
	A hint: If you don't want to wait for a complete disc format, you can
	format just a part of the disc.  For example:
	
	        cdrwtool -d /dev/hdc -m 10240
	
	This will format 10240 blocks, ie 20MB.
	
	Signed-off-by: Peter Osterlund <petero2@telia.com>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<petero2@telia.com>
	[PATCH] packet-writing: add credits
	
	Nigel pointed out that the earlier patches contained attributions that
	are not present in this patch. The 2.4 patch contains:
	
	  Nov 5 2001, Aug 8 2002. Modified by Andy Polyakov
	  <appro@fy.chalmers.se> to support MMC-3 complaint DVD+RW units.
	
	and Nigel changed it to this in his 2.6 patch:
	
	  Modified by Nigel Kukard <nkukard@lbsd.net> - support DVD+RW
	  2.4.x patch by Andy Polyakov <appro@fy.chalmers.se>
	
	The patch I sent you deleted most of the earlier work and moved the
	rest to cdrom.c, but the comments were not moved over, since the
	earlier authors didn't modify cdrom.c.
	
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<petero2@telia.com>
	[PATCH] CDRW packet writing support
	
	This patch implements CDRW packet writing as a kernel block device.  Usage
	instructions are in the packet-writing.txt file.
	
	A hint: If you don't want to wait for a complete disc format, you can
	format just a part of the disc.  For example:
	
	        cdrwtool -d /dev/hdc -m 10240
	
	This will format 10240 blocks, ie 20MB.
	
	Signed-off-by: Peter Osterlund <petero2@telia.com>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<petero2@telia.com>
	[PATCH] cdrom: buffer sizing fix
	
	The problem is that some drives fail the "GET CONFIGURATION" command when
	asked to only return 8 bytes.  This happens for example on my drive, which
	is identified as:
	
	        hdc: HL-DT-ST DVD+RW GCA-4040N, ATAPI CD/DVD-ROM drive
	
	Since the cdrom_mmc3_profile() function already allocates 32 bytes for the
	reply buffer, this patch is enough to make the command succeed on my drive.
	
	Signed-off-by: Peter Osterlund <petero2@telia.com>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<colpatch@us.ibm.com>
	[PATCH] Create nodemask_t
	
	The idea behind this patch is to create a nodemask_t as a node analog of
	cpumask_t.  As NUMA machines become more common, the need for a standard,
	cross-platform bitmap of both online & possible nodes becomes more
	apparent.  We believe we've worked out most of the kinks of the variable
	length bitmap types with the recent cpumask_t patches.  Nodemasks are also
	currently far less widespread than cpumasks.  Further, inclusion at this
	point in the kernel would mean consistency in node handling between 2.6 and
	2.7.
	
	Future goals would be to get rid of the 'numnodes' variable used to count
	the number of online nodes, and replace with node_online_map.  This would
	allow arbitrary node numbering and facilitate node hotplugging.
	
	(Nothing actually uses this yet, but several projects need it, and it does
	model a well-defined physical grouping).
	
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<akpm@osdl.org>
	[PATCH] reiserfs: rename struct key
	
	Rename resierfs's `struct key' to `struct reiserfs_key' to avoid namespace
	clashes.
	
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<dhowells@redhat.com>
	[PATCH] Add some key management specific error codes
	
	Here's a patch to add some new error codes specific to key management.
	
	Signed-Off-By: David Howells <dhowells@redhat.com>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<dhowells@redhat.com>
	[PATCH] keys: new error codes for Alpha, MIPS, PA-RISC, Sparc & Sparc64
	
	The attached patch adds the new error codes I added for key-related errors to
	those archs that don't make use of <asm-generic/errno.h>, including Alpha,
	MIPS, PA-RISC, Sparc and Sparc64.  This is required to compile with
	CONFIG_KEYS on those platforms.
	
	Signed-Off-By: David Howells <dhowells@redhat.com>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<dhowells@redhat.com>
	[PATCH] implement in-kernel keys & keyring management
	
	The feature set the patch includes:
	
	 - Key attributes:
	   - Key type
	   - Description (by which a key of a particular type can be selected)
	   - Payload
	   - UID, GID and permissions mask
	   - Expiry time
	 - Keyrings (just a type of key that holds links to other keys)
	 - User-defined keys
	 - Key revokation
	 - Access controls
	 - Per user key-count and key-memory consumption quota
	 - Three std keyrings per task: per-thread, per-process, session
	 - Two std keyrings per user: per-user and default-user-session
	 - prctl() functions for key and keyring creation and management
	 - Kernel interfaces for filesystem, blockdev, net stack access
	 - JIT key creation by usermode helper
	
	There are also two utility programs available:
	
	 (*) http://people.redhat.com/~dhowells/keys/keyctl.c
	
	     A comprehensive key management tool, permitting all the interfaces
	     available to userspace to be exercised.
	
	 (*) http://people.redhat.com/~dhowells/keys/request-key
	
	     An example shell script (to be installed in /sbin) for instantiating a
	     key.
	
	Signed-Off-By: David Howells <dhowells@redhat.com>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<pmarques@grupopie.com>
	[PATCH] kallsyms data size reduction / lookup speedup
	
	This patch is an improvement over my first kallsyms speedup patch posted about
	2 weeks ago.
	
	It changes scripts/kallsyms as to produce a different format for
	kallsyms_names and extra data to speedup lookups.  The compression algorithm
	is quite simple: it uses all the char codes not actually used in symbols to
	build a lookup table that translates these codes into small strings.  For
	instance, in my test runs the code 0xFE was being translated into "acpi_"
	giving a 4 byte save on every translation.
	
	The advantage of this algorithm is that to translate a symbol we only require
	information that is stored on that symbol position, and never need to go back
	on the compressed stream to get information from other symbols.
	
	To give an idea about the benefits of this algorithm here are some benchmark
	results on a P4 2.8GHz with a symbol table with 10000 entries:
	
	kallsyms_lookup average time:
	  vanilla           1346.0 us
	  speedup             14.4 us
	  with this patch      0.5 us
	
	total data produced by scripts/kallsyms:
	  uncompressed         169 Kb
	  vanilla              134 Kb
	  with this patch       91 Kb
	
	(speedup was my latest patch, that only changed the way kallsyms_lookup worked
	and not the data format)
	
	I removed a cond_resched() from the proc/kallsyms handling code path, because
	using stem compression, if the current position went backwards, the hole
	stream would be uncompressed up to the current position.  It seemed that by
	removing this loop it would be safe to remove the conditional reschedule
	altogether.
	
	There is just one catch with this patch: the time it takes to compile the
	kernel goes up just a bit (about 0.8s on a P4 2.8GHz with defconfig).  If this
	delay is not acceptable I can change the compression algorithm so that it can
	use the previous table (calculating a new table is what consumes most of the
	time, and not doing the actual compression) and check to see if it obtains a
	similar compression ratio.  If it does, then this is a sign that the symbol
	patterns haven't changed that much and this table is still good to use.  This
	would not only cut the time down to half on any compilation (because of the 2
	pass symbol build method), but in frequent cases where a developer is
	compiling a single file and linking everything over and over again, the table
	optimization process would never run.
	
	I'm CC'ing Brent Casavant on this email, because last june he sent a patch
	trying a different approach that used a 32 entry symbol cache, because there
	was a problem with the time "top" took to read "proc/<pid>/wchan".  I was
	hopping he would be willing to test this patch and comment on the results.
	
	Signed-off-by: Paulo Marques <pmarques@grupopie.com>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<od@suse.de>
	[PATCH] TIOCCONS security
	
	The ioctl TIOCCONS allows any user to redirect console output to another
	tty.  This allows anyone to suppress messages to the console at will.
	
	AFAIK nowadays not many programs write to /dev/console, except for start
	scripts and the kernel (printk() above console log level).
	
	Still, I believe that administrators and operators would not like any user
	to be able to hijack messages that were written to the console.
	
	The only user of TIOCCONS that I am aware of is bootlogd/blogd, which runs
	as root.  Please comment if there are other users.
	
	Is there any reason why normal users should be able to use TIOCCONS?
	
	Otherwise I would suggest to restrict access to root (CAP_SYS_ADMIN), e.g. 
	with this patch.
	
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<wli@holomorphy.com>
	[PATCH] move waitqueue functions to kernel/wait.c
	
	The following patch series consolidates the various instances of waitqueue
	hashing to use a uniform structure and share the per-zone hashtable among all
	waitqueue hashers.  This is expected to increase the number of hashtable
	buckets available for waiting on bh's and inodes and eliminate statically
	allocated kernel data structures for greater node locality and reduced kernel
	image size.  Some attempt was made to look similar to Oleg Nesterov's
	suggested API in order to provide some kind of credit for independent
	invention of something very similar (the original versions of these patches
	predated my public postings on the subject of filtered waitqueues).
	
	These patches have the further benefit and intention of enabling aio to use
	filtered wakeups by standardizing the data structure passed to wake functions
	so that embedded waitqueue elements in aio structures may be succesfully
	passed to the filtered wakeup wake functions, though this patch series doesn't
	implement that particular functionality.
	
	Successfully stress-tested on x86-64, and ia64 in recent prior versions.
	
	
	This patch:
	
	Move waitqueue -related functions not needing static functions in sched.c
	to kernel/wait.c
	
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<wli@holomorphy.com>
	[PATCH] standardize bit waiting data type
	
	Eliminate specialized page and bh waitqueue hashing structures in favor of
	a standardized structure, using wake_up_bit() to wake waiters using the
	standardized wait_bit_key structure.
	
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<wli@holomorphy.com>
	[PATCH] consolidate bit waiting code patterns
	
	Consolidate bit waiting code patterns for page waitqueues using
	__wait_on_bit() and __wait_on_bit_lock().
	
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<wli@holomorphy.com>
	[PATCH] eliminate bh waitqueue hashtable
	
	Eliminate the bh waitqueue hashtable using bit_waitqueue() via
	wait_on_bit() and wake_up_bit() to locate the waitqueue head associated
	with a bit.
	
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<wli@holomorphy.com>
	[PATCH] eliminate inode waitqueue hashtable
	
	Eliminate the inode waitqueue hashtable using bit_waitqueue() via
	wait_on_bit() and wake_up_bit() to locate the waitqueue head associated
	with a bit.
	
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<wli@holomorphy.com>
	[PATCH] move wait ops' contention case completely out of line
	
	Move the slow paths of wait_on_bit() and wait_on_bit_lock() out of line.
	Also uninline wake_up_bit() to reduce the number of callsites generated,
	and adjust loop startup in __wait_on_bit_lock() to properly reflect its
	usage in the contention case.
	
	Incremental atop the fastcall and wait_on_bit_lock()/test_and_set_bit()
	fixes.  Successfully tested on x86-64.
	
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<wli@holomorphy.com>
	[PATCH] reduce number of parameters to __wait_on_bit() and __wait_on_bit_lock()
	
	Some of the parameters to __wait_on_bit() and __wait_on_bit_lock() are
	redundant, as the wait_bit_queue parameter holds the flags word and the bit
	number.  This patch updates __wait_on_bit() and __wait_on_bit_lock() to
	fetch that information from the wait_bit_queue passed to them and so reduce
	the number of parameters so that -mregparm may be more effective.
	
	Incremental atop the complete out-of-lining of the contention cases and the
	fastcall and wait_on_bit_lock()/test_and_set_bit() fixes.
	
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<wli@holomorphy.com>
	[PATCH] document wake_up_bit()'s requirement for preceding memory barriers
	
	Document the requirement to use a memory barrier prior to wake_up_bit().
	
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<akpm@osdl.org>
	[PATCH] jbd wakeup fix
	
	Processes can sleep in do_get_write_access(), waiting for buffers to be
	removed from the BJ_Shadow state.  We did this by doing a wake_up_buffer() in
	the commit path and sleeping on the buffer in do_get_write_access().
	
	With the filtered bit-level wakeup code this doesn't work properly any more -
	the wake_up_buffer() accidentally wakes up tasks which are sleeping in
	lock_buffer() as well.  Those tasks now implicitly assume that the buffer came
	unlocked.  Net effect: Bogus I/O errors when reading journal blocks, because
	the buffer isn't up to date yet.  Hence the recently spate of journal_bmap()
	failure reports.
	
	The patch creates a new jbd-private BH flag purely for this wakeup function.
	So a wake_up_bit(..., BH_Unshadow) doesn't wake up someone who is waiting for
	a wake_up_bit(BH_Lock).
	
	JBD was the only user of wake_up_buffer(), so remove it altogether.
	
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<akpm@osdl.org>
	[PATCH] unreachable code in ext3_direct_IO()
	
	davej points out that in this code local variable `ret' is already known to be
	positive non-zero, so this test is meaningless.
	
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<axboe@suse.de>
	[PATCH] switchable and modular io schedulers
	
	This patch modularizes the io schedulers completely, allowing them to be
	modular.  Additionally it enables online switching of io schedulers.  See
	also http://lwn.net/Articles/102593/ .
	
	
	There's a scheduler file in the sysfs directory for the block device
	queue:
	
	axboe@router:/sys/block/hda/queue> ls
	iosched            max_sectors_kb  read_ahead_kb
	max_hw_sectors_kb  nr_requests     scheduler
	
	If you list the contents of the file, it will show available schedulers
	and the active one:
	
	axboe@router:/sys/block/hda/queue> cat scheduler
	[cfq]
	
	Lets load a few more.
	
	router:/sys/block/hda/queue # modprobe deadline-iosched
	router:/sys/block/hda/queue # modprobe as-iosched
	router:/sys/block/hda/queue # cat scheduler
	[cfq] deadline anticipatory
	
	Changing is done with
	
	router:/sys/block/hda/queue # echo deadline > scheduler
	router:/sys/block/hda/queue # cat scheduler
	cfq [deadline] anticipatory
	
	deadline is now the new active io scheduler for hda.
	
	Signed-off-by: Jens Axboe <axboe@suse.de>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<axboe@suse.de>
	[PATCH] cfq-v2 I/O scheduler update
	
	Here is the next incarnation of the CFQ io scheduler, so far known as
	CFQ v2 locally. It attempts to address some of the limitations of the
	original CFQ io scheduler (hence forth known as CFQ v1). Some of the
	problems with CFQ v1 are:
	
	- It does accounting for the lifetime of the cfq_queue, which is setup
	  and torn down for the time when a process has io in flight. For a fork
	  heavy work load (such as a kernel compile, for instance), new
	  processes can effectively starve io of running processes. This is in
	  part due to the fact that CFQ v1 gives preference to a new processes
	  to get better latency numbers. Removing that heuristic is not an
	  option exactly because of that.
	
	- It makes no attempts to address inter-cfq_queue fairness.
	
	- It makes no attempt to limit upper latency bound of a single request.
	
	- It only provides per-tgid grouping. You need to change the source to
	  group on a different criteria.
	
	- It uses a mempool for the cfq_queues. Theoretically this could
	  deadlock if io bound processes never exit.
	
	- The may_queue() logic can be unfair since it fluctuates quickly, thus
	  leaving processes sleeping while new processes are allowed to allocate
	  a request.
	
	CFQ v2 attempts to fix these issues. It uses the process io_context
	logic to maintain a cfq_queue lifetime of the duration of the process
	(and its io). This means we can now be a lot more clever in deciding
	which process is allowed to queue or dispatch io to the device. The
	cfq_io_context is per-process per-queue, this is an extension to what AS
	currently does in that we truly do have a unique per-process identifier
	for io grouping. Busy queues are sorted by service time used, sub sorted
	by in_flight requests. Queues that have no io in flight are also
	preferred at dispatch time.
	
	Accounting is done on completion time of a request, or with a fixed cost
	for tagged command queueing. Requests are fifo'ed like with deadline, to
	make sure that a single request doesn't stay in the io scheduler for
	ages.
	
	Process grouping is selectable at runtime. I provide 4 grouping
	criterias: process group, thread group id, user id, and group id.
	
	As usual, settings are sysfs tweakable in /sys/block/<dev>/queue/iosched
	
	axboe@apu:[.]s/block/hda/queue/iosched $ ls
	back_seek_max      fifo_batch_expire  find_best_crq  queued
	back_seek_penalty  fifo_expire_async  key_type       show_status
	clear_elapsed      fifo_expire_sync   quantum        tagged
	
	In order, each of these settings control:
	
	back_seek_max
	back_seek_penalty:
		Useful logic stolen from AS that allow small backwards seeks in
		the io stream if we deem them useful. CFQ uses a strict
		ascending elevator otherwise. _max controls the maximum allowed
		backwards seek, defaulting to 16MiB. _penalty denotes how
		expensive we account a backwards seek compared to a forward
		seek. Default is 2, meaning it's twice as expensive.
	
	clear_elapsed:
		Really a debug switch, will go away in the future. It clears the
		maximum values for completion and dispatch time, shown in
		show_status.
	
	fifo_batch_expire
	fifo_batch_async
	fifo_batch_sync:
		The settings for the expiry fifo. batch_expire is how often we
		allow the fifo expire to control which request to select.
		Default is 125ms. _async is the deadline for async requests
		(typically writes), _sync is the deadline for sync requests
		(reads and sync writes). Defaults are, respectively, 5 seconds
		and 0.5 seconds.
	
	key_type:
		The grouping key. Can be set to pgid, tgid, uid, or gid. The
		current value is shown bracketed:
	
		axboe@apu:[.]s/block/hda/queue/iosched $ cat key_type
		[pgid] tgid uid gid
	
		Default is tgid. To set, simply echo any of the 4 words into the
		file.
	
	quantum:
		The amount of requests we select for dispatch when the driver
		asks for work to do and the current pending list is empty.
		Default is 4.
	
	queued:
		The minimum amount of requests a group is allowed to queue.
		Default is 8.
	
	show_status:
		Debug output showing the current state of the queues.
	
	tagged:
		Set this to 1 if the device is using tagged command queueing.
		This cannot be reliably detected by CFQ yet, since most drivers
		don't use the block layer (well it could, by looking at number
		of requests being between dispatch and completion. but not
		completely reliably). Default is 0.
	
	The patch is a little big, but works reliably here on my laptop. There
	are a number of other changes and fixes in there (like converting to
	hlist for hashes). The code is commented a lot better, CFQ v1 has
	basically no comments (reflecting that it was writting in one go, no
	touched or tuned much since then). This is of course only done to
	increase the AAF, akpm acceptance factor. Since I'm on the road, I
	cannot provide any really good numbers of CFQ v1 compared to v2, maybe
	someone will help me out there.
	
	Signed-off-by: Jens Axboe <axboe@suse.de>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<axboe@suse.de>
	[PATCH] convert jiffies <-> msecs for io schedulers
	
	The various io schedulers don't convert to and from jiffies and ms in their
	sysfs exported values.  This patch adds that.
	
	Signed-off-by: Jens Axboe <axboe@suse.de>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<hch@lst.de>
	[PATCH] don't export blkdev_open and def_blk_ops
	
	Already since 2.4 all block devices use block_device_operations and
	shouldn't deal with file operations directly.
	
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<rmk@flint.arm.linux.org.uk>
	[SERIAL] Convert 8250_pci to use new serial8250_register_port()
	
	This allows 8250 PCI ports to register with their correct device
	structures.

<hch@lst.de>
	[PATCH] remove dead code from fs/mbcache.c
	
	mb_cache_entry_takeout and mb_cache_entry_dup are totally unused.
	
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<hch@lst.de>
	[PATCH] remove posix_acl_masq_nfs_mode
	
	Completely unused but exported function in fs/posix_acl.c
	
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<hch@lst.de>
	[PATCH] don't export shmem_file_setup
	
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<hch@lst.de>
	[PATCH] remove pm_find, unexport pm_send
	
	cutting back some unused legacy PM code
	
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<hch@lst.de>
	[PATCH] remove dead code and exports from signal.c
	
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<hch@lst.de>
	[PATCH] unexport proc_sys_root
	
	Only used by kernel/sysctl.c which absolutely can't be modular
	
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<hch@lst.de>
	[PATCH] unexport is_subdir and shrink_dcache_anon
	
	Two dcache.c functions that shouldn't be used by filesystems directly
	(probably a leftover of the intermezzo mess).
	
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<hch@lst.de>
	[PATCH] unexport devfs_mk_symlink
	
	Only legit user is the partitioning code, in addition some uml code is
	still using despite the uml people beeing told to fix it at least two
	times.
	
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<hch@lst.de>
	[PATCH] unexport do_execve/do_select
	
	These are basically shared code for native/32bit compat code, but as
	CONFIG_COMPAT is a bool there's no need to export them.
	
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<hch@lst.de>
	[PATCH] unexport exit_mm
	
	Not exactly a thing we want done from modules, and no module uses it
	anyway.
	
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<hch@lst.de>
	[PATCH] unexport files_lock and put_filp
	
	Rather lowlevel functions that modules shouldn't mess with and fortunately
	currently don't.
	
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<hch@lst.de>
	[PATCH] unexport f_delown
	
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<hch@lst.de>
	[PATCH] unexport lookup_create
	
	Besides namei.c it's only used in the SN2 hwgraph code which can't be
	modular (and will be removed soon)
	
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<hch@lst.de>
	[PATCH] remove wake_up_all_sync
	
	no user in sight
	
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<hch@lst.de>
	[PATCH] remove set_fs_root/set_fs_pwd
	
	Not exactly something we want modules to mess around with.
	
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<hch@lst.de>
	[PATCH] generic acl support for ->permission
	
	Currently we every filesystem with Posix ACLs has it's own reimplemtation
	of the generic permission checking code with additonal ACL support.  This
	patch
	
	- adds an optional callback to vfs_permission that filesystems can use
	  for ACL support (and renames it to generic_permission because the old
	  name was wrong - it wasn't like the other vfs_* functions at all)
	
	- uses it in ext2, ext3 and jfs.  XFS will follow a little later as it's
	  permission checking is burried under several layers of abstraction.
	
	From: Dave Kleikamp <shaggy@austin.ibm.com>
	
	  jfs doesn't currently set MS_POSIXACL (it doesn't require the acl mount
	  option), so this test would fail here.  The patch below will set it.
	
	
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<marcelo.tosatti@cyclades.com>
	[PATCH] Adjust alignment of pagevec structure
	
	We can shrink the pagevec structure to cacheline align it.  It is used all
	over VM reclaiming and mpage pagecache read code.
	
	Right now it is 140 bytes on 64-bit and 72 bytes on 32-bit.  Thats just a
	little bit more than a power of 2 (which will cacheline align), so shrink
	it to be aligned: 64 bytes on 32bit and 124bytes on 64-bit. 
	
	It now occupies two cachelines most of the time instead of three. 
	
	I changed nr and cold to "unsigned short" because they'll never reach 2 ^ 16.
	
	Did some reaim benchmarking on 4way PIII (32byte cacheline), with 512MB RAM:
	
	#### stock 2.6.9-rc1-mm4 ####
	
	Peak load Test: Maximum Jobs per Minute 4144.44 (average of 3 runs)
	Quick Convergence Test: Maximum Jobs per Minute 4007.86 (average of 3 runs)
	
	Peak load Test: Maximum Jobs per Minute 4207.48 (average of 3 runs)
	Quick Convergence Test: Maximum Jobs per Minute 3999.28 (average of 3 runs)
	
	#### shrink-pagevec #####
	
	Peak load Test: Maximum Jobs per Minute 4717.88 (average of 3 runs)
	Quick Convergence Test: Maximum Jobs per Minute 4360.59 (average of 3 runs)
	
	Peak load Test: Maximum Jobs per Minute 4493.18 (average of 3 runs)
	Quick Convergence Test: Maximum Jobs per Minute 4327.77 (average of 3 runs)
	
	
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<adaplas@hotpop.com>
	[PATCH] fbdev: remove unnecessary banshee_wait_idle from tdfxfb
	
	- This patch removes the unnecessary call to banshee_wait_idle() from
	  tdfxfb_copyarea, imageblit and fillrect.  Removal of the sync will garner
	  an additional ~20% in scrolling speed.
	
	- Removes "inverse" which generates a compile warning if modular.
	
	Signed-off-by: Antonino Daplas <adaplas@pol.net>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<adaplas@hotpop.com>
	[PATCH] fbdev: fix logo drawing failure for vga16fb
	
	This fixes the logo failing to draw in vga16fb due to faulty boolean logic.
	
	Signed-off-by: Antonino Daplas <adaplas@pol.net>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<adaplas@hotpop.com>
	[PATCH] fbcon: Fix setup boot options of fbcon
	
	This patch fixes the 'fbcon=map:<option>" of fbcon.  (This option has been
	present since 2.4, but got broken in 2.6). This particular option tells
	fbcon what framebuffer device gets mapped to what console. Syntax is:
	
		fbcon=map:abcd...
	
		where a, b, c, d,... are framebuffer numbers as it would
		appear in /proc/fb.
	
	Given only 2 valid fbdevs, 0 and 1, if fbcon=map:0110, then:
	
	tty1 = fb0
	tty2 = fb1
	tty3 = fb1
	tty4 = fb0
	(sequence repeats for the rest of the consoles)
	
	If an invalid framebuffer is used, then the console will be mapped to the
	first user-chosen framebuffer.  Ie: fbcon=map:102
	
	tty1 = fb1
	tty2 = fb0
	tty3 = fb1 <

<adaplas@hotpop.com>
	[PATCH] fbdev: Pass struct device to class_simple_device_add
	
	Swsusp turns off the display when a power-management-enabled framebuffer
	driver is used.  According to Nigel Cunningham <ncunningham@linuxmail.org>,
	the fix may involve the following:
	
	"...I thought the best approach would be to use device classes to find the
	struct dev for the frame buffer driver, and then use the same code I use for
	storage devices to avoid suspending the frame buffer until later..."
	
	Changes:
	
	- pass info->device to class_simple_device_add()
	- add struct device *device to struct fb_info
	- store struct device in framebuffer_alloc()
	- for drivers not using framebuffer_alloc(), store the struct during
	  initalization
	- port i810fb and rivafb to use framebuffer_alloc()
	
	Signed-off-by: Antonino Daplas <adaplas@pol.net>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<adaplas@hotpop.com>
	[PATCH] fbdev: Add Tile Blitting support
	
	Hopefully, this patch fixes one last major regression for one particular
	driver, namely matroxfb.  This drier has 2 versions, one for the kernel and
	another as a '2.4 backport' patch.
	
	This patch adds a tileblitting extension to fbcon.  This extension, in
	summary, is basically a forward-port of the 2.4 fbdev/fbcon framework to 2.6
	but without the fbcon dependency.  Tile blitting is similar to bitblit, except
	that the basic unit is a tile (a bitmap of x-by-y dimensions).  The display,
	instead of being described in terms of pixels and scanlines, are described as
	a region further subdivided into rectangular sections.  In fbcon parlance, a
	tile is a character.
	
	Besides a possible fix for matroxfb, tileblitting can be advantageous for
	hardware that supports some kind of fontcaching mechanism.  Also, in the
	unlikely chance that the console begins supporting multicolored fonts,
	tileblitting is probably more optimal than bitblitting because bitblitting
	will need to push more data through the bus.
	
	To enable support for this extension, a driver needs to:
	
	- enable CONFIG_FB_TILEBLITTING
	- set FBINFO_MISC_TILEBLITTING in info->flags
	- set the required function pointers in struct fb_tileops.  The required
	  operations are:
	
	  - void (*fb_settile)(struct fb_info *info, struct fb_tilemap *map);
	
	    tells driver about the tile characteristics (dimensions, bitdepth) and
	    about the tilemap which is an array of bitmaps: display->fontdata
	
	  - void (*fb_tilecopy)(struct fb_info *info, struct fb_tilearea *area);
	
	    move a rectangular section of tiles (bmove)
	
	  - void (*fb_tilefill)(struct fb_info *info, struct fb_tilerect *rect);
	
	    fill a rectangular section with a tile (clear)
	
	  - void (*fb_tileblit)(struct fb_info *info, struct fb_tileblit *blit);
	
	    copy an array of tiles to a rectangular section (putcs)
	
	  - void (*fb_tilecursor)(struct fb_info *info, struct fb_tilecursor *cursor);
	
	    cursor function
	
	Changes:
	
	Addition of this extension necessitates cleanup of fbcon.c.  The basic drawing
	functions in fbcon are bmove, clear, putcs and cursor (the fbcon_* set).  The
	fbcon_* set are just wrappers to accel_* set.  However, usage is not
	consistent, some functions call the fbcon_* set, others call the accel_* set.
	
	With this patch, a new fbcon-specific structure (struct fbcon_ops) is created.
	 Depending on the setting of the hardware, this struct contains pointers to
	either the tileblitting set or the bitblitting set (formerly the accel_* set).
	 The tileblitting set is new in this patch.
	
	The vast majority of functions in fbcon will need to only call the fbcon_*
	set.  In turn, it calls functions in struct fbcon_ops.  Knowledge of the
	blitting type is not required.
	
	The accel_* set is renamed to bit_* and is moved into a separate file,
	bitblit.c.  The tile blitting set is in tileblit.c.
	
	In my case at least, the cleanup did produce an unexpected but beneficial
	side effect, a little more speedup.  Not much, < 5%.
	
	Petr, if you have comments, suggestions, or you think this is a bad idea,
	let me know.
	
	Signed-off-by: Antonino Daplas <adaplas@pol.net>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<adaplas@hotpop.com>
	[PATCH] fbdev: fix scrolling corruption
	
	This patches fixes the following:
	
	- scrolling corruption if scrolling mode is SCROLL_PAN_MOVE. This bug
	  was introduced by the tile blitting patch.
	
	- flashing cursor even when console is blanked
	
	Signed-off-by: Antonino Daplas <adaplas@pol.net>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<benh@kernel.crashing.org>
	[PATCH] radeonfb: Fix monitor probe logic
	
	Fix a small logic error in the monitor probe code when nothing was found.
	
	Signed-off-by: Benjamin Herrenschmidt <benh@kernel.crashing.org>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<andreas@fjortis.info>
	[PATCH] fbdev: Remove i810fb explicit agp initialization hack.
	
	When Antonino A.  Daplas posted his "fbdev: Initialize i810fb after
	agpgart" patch he said that the ugly agp initialization hack for intel agp
	shouldn't be needed but that he couldn't test it.
	
	I have tested the framebuffer updates and additionally removed the
	initialization hack and it does indeed work.
	
	Signed-off-by: Andreas Henriksson <andreas@fjortis.info>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<adaplas@hotpop.com>
	[PATCH] fbdev: Add iomem annotations to fbmem.c
	
	Add iomem annotations to fbmem.c
	
	Signed-off-by: Antonino Daplas <adaplas@pol.net>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<adaplas@hotpop.com>
	[PATCH] fbdev: Add iomem annotations to i810fb
	
	Add iomem annotations to i810fb.
	
	Signed-off-by: Antonino Daplas <adaplas@pol.net>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<adaplas@hotpop.com>
	[PATCH] fbdev: Add iomem annotations to vga16fb.c
	
	Add iomem annotations to vga16fb.c
	
	Signed-off-by: Antonino Daplas <adaplas@pol.net>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<tiwai@suse.de>
	[PATCH] VGA console font problems on 2.6 kernel
	
	From: Egbert Eich <eich@suse.de>
	
	I would like to utilize kernel ioctls to save/restore console fonts
	in VGA text mode when running X. So far the Xserver takes care of this
	however there more and more problems with this:
	        1. On some platforms (IA64) we need to POST the BIOS before
		   we even have a chance to access the hardware ourselves.
		   This POSTing will usually undo any changes to the graphics
		   hardware that the kernel may have done.
		2. More and more drivers fully rely on BIOS support however
		   the BIOS functions which could be used to save/restore
		   register settings may be broken so the only way of mode
		   save/restore is getting/setting the BIOS mode ID.
	
	I've hacked up some code for X however I ran into two problems:
	
	1. con_font_get() in linux/drivers/char/vt.c seems to be broken as
	   the font parameters (height, width, charcount) are never reported
	   back. Therefore this function seems to be pretty useless.
	   The fix is simple (please see below).
	
	2. fb consoles seem to allow to install fonts per vt so that the user
	   can have a different font on every console. The text console driver
	   doesn't support this: the font is downloaded to the video card 
	   and will be used for all systems. Still the vga_con driver stores
	   the font parameters per console with the effect that setting a 
	   font with different parameters on one console will result in the
	   wron values when this font information is read back from another
	   console.
	   Appearantly this broken feature has been introduced in 2.6 as
	   in the 2.4 kernel the vga_con font information is stored in one
	   single global variable.
	
	The IA64 platform at least still heavily relies on the VGA text console.
	To be able to fix some VT switching issues with X on this platform I
	need these two issues resolved.
	
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<adaplas@hotpop.com>
	[PATCH] fbcon unimap fix
	
	fbcon doesn't set a unimap at boot time, so special characters come out
	wrongly.
	
	This is the code sequence in take_over_console().
	
	newcon->startup()
	oldcon->deinit()
	newcon->init()
	
	The previous console driver (ie, vgacon), via its deinit method, may release
	the unimap allocated by fbcon in fbcon_startup. This is the reason why
	calling con_set_default_unimap() in fbcon_init() works, but not in
	fbcon_startup().
	
	
	Check if the default display has an allocated unimap, and if it has none,
	call con_set_default_unimap().  And if the target display has no allocated
	unimap, then call con_copy_unimap(), where the source unimap is from the
	default display.
	
	Signed-off-by: Antonino Daplas <adaplas@pol.net>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<venkatesh.pallipadi@intel.com>
	[PATCH] Fix EDID_INFO in zero-page
	
	EDID_INFO is encroaching on the space meant for E820 map in zero-page.
	This will result in E820 map corruption on any system that has more=20 than
	18 E820 entries and CONFIG_VIDEO_SELECT.  Not sure how this bug=20 managed
	to hide for more than a year.
	
	Attached patch should fix the bug.
	
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<adaplas@hotpop.com>
	[PATCH] fbdev: fix framebuffer memory calculation for vesafb
	
	- use vesafb_fix.line_length * vesafb_defined.yres to calculate the minimum
	  memory required for a video mode. From Aurelien Jacobs <aurel@gnuage.org>.
	
	- separately calculate the memory required for a video mode, memory to be
	  remapped, and total memory (for MTRR). From Gerd Knorr
	  <kraxel@bytesex.org>.
	
	- the 'vram' option is for memory to be remapped, not total memory.
	
	Signed-off-by: Antonino Daplas <adaplas@pol.net>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<adaplas@hotpop.com>
	[PATCH] fbdev: split vesafb option vram into vtotal and vremap
	
	From: Gerd Knorr <kraxel@bytesex.org>:
	
	"IMHO the the only sane thing is to have two options for total + remapped
	memory as well.  Otherwise we'll end up changing that back and forth like
	it happened for the size calculation stuff for quite some time ...
	
	The patch below does just that and also has the other vmode fix
	(vmode = yres * linelength /* instead of yres * xres * depth >> 3 */)."
	
	Signed-off-by: Antonino Daplas <adaplas@pol.net>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<vandrove@vc.cvut.cz>
	[PATCH] Remove big-endian mode from matroxfb
	
	One of the PowerPC developers, Kostas Georgiou, pointed out to me
	discussion back from 2001 that they would prefer little endian mode as
	majority of users runs XF4.x and not Xpmac.  And apparently nobody runs
	Xpmac now, so we can safely remove big-endian mode from matroxfb
	completely.
	
	  So let's simplify matroxfb a bit: 
	
	Accelerator and ILOAD fifo is now always in little endian mode.  This is
	what XFree does.  Due to this change all #ifdefs based on endianness was
	removed from driver - except one which selects framebuffer endinaness (but
	there is no code in matroxfb which writes to framebuffer directly).
	
	It seems that while I was not looking m68k got ioremap, and all
	architectures now offer ioremap and ioremap_nocache.  Let's kill code which
	mapped ioremap_nocache to ioremap, and ioremap to bus_to_virt for
	architectures which did not provide them.
	
	And this also fixes small typo - M_C2CTL should be 0x3C10 and not 0x3E10.
	Apparently Matrox notes about need to program this register during
	initialization are not so important...
	
	Signed-off-by: Petr Vandrovec <vandrove@vc.cvut.cz>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<vandrove@vc.cvut.cz>
	[PATCH] Assorted matroxfb fixes
	
	This small change does:
	
	(1) Properly document 'outputs' option.
	
	(2) Properly use accelerated characters drawing.  fbcon used depth == 0
	    for character painting long ago, but it is fixed for several months.
	
	(3) Provide correct hints for fbcon about matroxfb/matroxfb_crtc2
	    hardware capabilities.
	
	Signed-off-by: Petr Vandrovec <vandrove@vc.cvut.cz>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<benh@kernel.crashing.org>
	[PATCH] rework radeonfb blanking
	
	This patch cleans up some old cruft in the manipulation of the LVDS
	interface registers and fixes the blanking code to work with various DVI
	flat panels.
	
	Since this is all very sensitive stuff, I'm posting the patch here for
	testing before submitting it upstream, though Andrew is welcome to put it
	in -mm.
	
	It also fix some problems with getting the right PLL setup on recent Mac
	laptops, replacing the old hard coded list of values with cleaner code that
	"probes" the PLL setup done by the firmware.
	
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<geert@linux-m68k.org>
	[PATCH] FrameMaster II build fix
	
	fm2fb: Trivial fix for the breakage introduced by the addition of
	fb_get_options().
	
	Signed-off-by: Geert Uytterhoeven <geert@linux-m68k.org>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<adaplas@hotpop.com>
	[PATCH] fbdev: trivial fb_get_options fix for cyber2000fb and bw2fb
	
	Trivial fb_get_options fix for
	- cyber200fb
	- bw2fb
	
	Signed-off-by: Antonino Daplas <adaplas@pol.net>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<vandrove@vc.cvut.cz>
	[PATCH] Add VIDIOC_S_CTRL_OLD to matroxfb
	
	For several months I'm receiving complaints from matroxfb users that v4lctl
	suddenly stops working for them on kernel upgrade.
	
	Problem is that VIDIOC_S_CTRL was renumbered, but all distros still use old
	VIDIOC_S_CTRL value (f.e.  even xawtv-3.94 in Debian unstable still uses
	old VIDIOC_S_CTRL definition).
	
	So let's add this old VIDIOC_S_CTRL value (now named VIDIOC_S_CTRL_OLD) to
	matroxfb's v4l handling.
	
	Signed-off-by: Petr Vandrovec <vandrove@vc.cvut.cz>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<suresh.b.siddha@intel.com>
	[PATCH] no exec: i386 and x86_64 cleanups
	
	Sync x86_64 noexec behaviour with i386.  And remove all the confusing
	noexec related boot parameters.
	
	Signed-off-by: Suresh Siddha <suresh.b.siddha@intel.com>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<wli@holomorphy.com>
	[PATCH] pidhashing: rewrite alloc_pidmap()
	
	Rewrite alloc_pidmap() to clarify control flow by eliminating all usage of
	goto, honor pid_max and first available pid after last_pid semantics, make
	only a single pass over the used portion of the pid bitmap, and update
	copyrights to reflect ongoing maintenance by Ingo and myself.
	
	Signed-off-by: William Irwin <wli@holomorphy.com>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<wli@holomorphy.com>
	[PATCH] pidhashing: retain older vendor copyright
	
	I was informed that the vendor component of the copyright can't be clobbered
	without more care, so this patch retains the older vendor, updating it only to
	reflect the appropriate time period.
	
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<wli@holomorphy.com>
	[PATCH] pidhashing: lower PID_MAX_LIMIT for 32-bit machines
	
	/proc/ breaks when PID_MAX_LIMIT is elevated on 32-bit, so this patch lowers
	it there.
	
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<wli@holomorphy.com>
	[PATCH] pidhashing: enforce PID_MAX_LIMIT in sysctls
	
	The pid_max sysctl doesn't enforce PID_MAX_LIMIT or sane lower bounds.
	RESERVED_PIDS + 1 is the minimum pid_max that won't break alloc_pidmap(), and
	PID_MAX_LIMIT may not be aligned to 8*PAGE_SIZE boundaries for unusual values
	of PAGE_SIZE, so this also rounds up PID_MAX_LIMIT to it.
	
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<zwane@linuxpower.ca>
	[PATCH] Allow multiple inputs in alternative_input
	
	I had to use the following patch to allow multiple arguments to be passed
	down to the asm stub for alternative_input whilst writing alternatives for
	mwait code, it seems like a simple enough fix.
	
	Signed-off-by: Zwane Mwaikambo <zwane@linuxpower.ca>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<raven@themaw.net>
	[PATCH] autofs4: allow map update recognition
	
	Having recently repaired autofs' ability to recognise updates to maps
	dynamically I found I needed to reintroduce the directory inode lookup
	method (I broke the update recognition several versions ago, oops).
	
	This patch does this and applies cleanly against 2.6.9-rc1-mm4.
	
	As far as I can tell from testing it doesn't introduce any backward
	incompatibilities.
	
	Signed-off-by: Ian Kent <raven@themaw.net>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<rmk@flint.arm.linux.org.uk>
	[SERIAL] Keep trying to register our console device.
	
	Some serial drivers receive their serial port device information via
	the device model.  This unfortunately means that the selected port
	may not be available when the console subsystem initialises, so we
	must keep trying to register the console after each port is added.

<Natalie.Protasevich@unisys.com>
	[PATCH] Incorrect PCI interrupt assignment on ES7000 for platform GSI
	
	In arch/i386/kernel/acpi/boot.c, platform GSI does not propagate back from
	mp_register_gsi() to a calling routine which results in IRQ to be set for
	wrong GSI.  This causes most of the PCI slots on the first PCI module to
	fail.  This patch fixes the problem by returning new GSI back to
	acpi_register_gsi().
	
	Signed-off-by: Natalie Protasevich <Natalie.Protasevich@unisys.com>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<wli@holomorphy.com>
	[PATCH] procfs: fix task_mmu.c text size reporting
	
	Not all binfmts page align ->end_code and ->start_code, so the task_mmu
	statistics calculations need to perform this alignment themselves.
	
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<wli@holomorphy.com>
	[PATCH] make console_conditional_schedule() __sched and use cond_resched()
	
	Relatively minor add-on (not necessarily tied to it or required to be taken
	or a fix for any bug).  Since cond_resched() is using PREEMPT_ACTIVE now,
	it may be useful to update the open-coded instance of cond_resched() to use
	the generic call.  Also, it should probably be __sched so the caller shows
	up in wchan.
	
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<wli@holomorphy.com>
	[PATCH] report per-process pagetable usage
	
	Andi Kleen requested that the number of pagetable pages in use by a process
	be reported in /proc/$PID/status; this patch implements that.
	
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<stelian@popies.net>
	[PATCH] A simple FIFO implementation
	
	A simple ringbuffer implementation for various character drivers.
	
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<agruen@suse.de>
	[PATCH] Replace hard-coded MODVERDIR in modpost
	
	When building external modules, MODVERDIR is relative to the external
	module instead of in the kernel source tree.  Use the MODVERDIR environment
	variable instead of the hard-coded path in modpost.
	
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<hch@lst.de>
	[PATCH] remove MOD_INC_USE_COUNT/MOD_DEC_USE_COUNT
	
	They've been marked deprecated since 2.5.x and there's no more users.
	
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<hch@lst.de>
	[PATCH] mark inter_module_* deprecated
	
	These had been officially deprecated since Rusty's module rewrite, but
	never got the __deprecated marker.  The only remaining users are drm and
	mtd, so we'll get some warnings for common builds.  But maybe that's the
	only way to get the drm people to fix the mess :)
	
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<hch@lst.de>
	[PATCH] don't include <linux/sysctl.h> in <linux/security.h>
	
	security.h gets pulled in in lots of places, so use forward declarations
	for struct ctl_table instead of pulling sysctl in everywhere.
	
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<schwidefsky@de.ibm.com>
	[PATCH] cleanup: move call to update_process_times.
	
	For non-smp kernels the call to update_process_times is done in the
	do_timer function.  It is more consistent with smp kernels to move this
	call to the architecture file which calls do_timer.
	
	Signed-off-by: Martin Schwidefsky <schwidefsky@de.ibm.com>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<schwidefsky@de.ibm.com>
	[PATCH] cleanup: remove unused definitions from timex.h
	
	The CLOCK_TICK_FACTOR and FINETUNE defines from <asm/timex.h> are not used
	anywhere.  Kill them.
	
	Signed-off-by: Martin Schwidefsky <schwidefsky@de.ibm.com>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<schwidefsky@de.ibm.com>
	[PATCH] cleanup: time.h, times.h, timex.h and jiffies.h
	
	This patch moves some definitions among time.h, times.h, timex.h and
	jiffies.h.  The purpose is to sort all jiffies related functions to
	jiffies.h, to get rid of the cyclic dependency between time.h & timex.h and
	to move all #include lines to the start of the header files.
	
	Signed-off-by: Martin Schwidefsky <schwidefsky@de.ibm.com>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<dipankar@in.ibm.com>
	[PATCH] Fix dcache lookup
	
	__d_lookup() has leftover stuff from earlier code to protect it against
	rename.  The smp_rmb() there was needed for the sequence counter logic.
	
	Original dcache_rcu had :
	
	+               move_count = dentry->d_move_count;
	+               smp_rmb();
	+
	                if (dentry->d_name.hash != hash)
	                        continue;
	                if (dentry->d_parent != parent)
	                        continue;
	
	This was to make sure that comparisons didn't happen before before the
	sequence counter was snapshotted.  This logic is now gone and memory
	barrier is not needed.  Removing this should also improve performance.
	
	The other change is the leftover smp_read_barrier_depends(), later
	converted to rcu_dereference().  Originally, the name comparison was not
	protected against d_move() and there could have been a mismatch of
	allocation size of the name string and dentry->d_name.len.  This was
	avoided by making the qstr update in dentry atomic using a d_qstr pointer. 
	Now, we do ->d_compare() or memcmp() with the d_lock held and it is safe
	against d_move().  So, there is no need to rcu_dereference() anything.  In
	fact, the current code is meaningless.
	
	Signed-off-by: Dipankar Sarma <dipankar@in.ibm.com>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<dipankar@in.ibm.com>
	[PATCH] Remove d_bucket
	
	Tested using dcachebench and hevy rename test.
	http://lse.sourceforge.net/locking/dcache/rename_test/
	
	While going over dcache code, I realized that d_bucket which was introduced
	to prevent hash chain traversals from going into an infinite loop earlier,
	is no longer necessary.  Originally, when RCU based lock-free lookup was
	first introduced, dcache hash chains used list_head.  Hash chain traversal
	was terminated when dentry->next reaches the list_head in the hash bucket. 
	However, if renames happen during a lock-free lookup, a dentry may move to
	different bucket and subsequent hash chain traversal from there onwards may
	not see the list_head in the original bucket at all.  In fact, this would
	result in the list_head in the bucket interpreted as a list_head in dentry
	and bad things will happen after that.  Once hlist based hash chains were
	introduced in dcache, the termination condition changed and lock-free
	traversal would be safe with NULL pointer based termination of hlists.
	This means that d_bucket check is no longer required.
	
	There still exist some theoritical livelocks like a dentry getting
	continuously moving and lock-free look-up never terminating.  But that
	isn't really any worse that what we have.  In return for these changes, we
	reduce the dentry size by the size of a pointer.  That should make akpm and
	mpm happy.
	
	Signed-off-by: Dipankar Sarma <dipankar@in.ibm.com>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<dipankar@in.ibm.com>
	[PATCH] Document RCU based dcache lookup
	
	Finally some in-tree documentation for RCU-based dcache look-up.
	
	Signed-off-by: Dipankar Sarma <dipankar@in.ibm.com>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<ak@muc.de>
	[PATCH] x86-64/i386: add mce tainting
	
	This patch adds machine check tainting.  When a handled machine check
	occurs the oops gets a new 'M' flag.  This is useful to ignore machines
	with hardware problems in oops reports.
	
	On i386 a thermal failure also sets this flag.
	
	Done for x86-64 and i386 so far.
	
	Signed-off-by: Andi Kleen <ak@suse.de>
	Signed-off-by: Nick Piggin <nickpiggin@yahoo.com.au>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<nickpiggin@yahoo.com.au>
	[PATCH] taint: fix forced rmmod
	
	This taint didn't appear to be reported.
	
	Signed-off-by: Nick Piggin <nickpiggin@yahoo.com.au>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<nickpiggin@yahoo.com.au>
	[PATCH] taint on bad_page
	
	Hugh and I both thought this would be generally useful.
	
	Signed-off-by: Nick Piggin <nickpiggin@yahoo.com.au>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<haroldo.gamal@infolink.com.br>
	[PATCH] smbfs does not honor uid, gid, file_mode and dir_mode supplied by user mount
	
	This patch fixes "Samba Bugzilla Bug 999".  The last version (2.6.8.1) of
	smbfs kernel module do not honor uid, gid, file_mode and dir_mode supplied
	by user during mount.  This bug is also logged as "Kernel Bug Tracker Bug
	3330".
	
	To fully work, some modifications are needed to samba smbmount.c and
	smbmnt.c files.  Those patches are available at Samba and Kernel Bug
	Tracker pages.
	
	After those patches, if the user do not supply any of the parameters above,
	the uid, gid, file_mode and dir_mode on the server will be used by the
	client.
	
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<drepper@redhat.com>
	[PATCH] Simplify last lib/idr.c change
	
	The last change to alloc_layer in lib/idr.c unnecessarily complicates
	the code and depending on the definition of spin_unlock will cause worse
	code to be generated than necessary.  The following patch should improve
	the situation.
	
	Signed-off-by: Ulrich Drepper <drepper@redhat.com>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<medaglia@undl.org.br>
	[PATCH] Fix types.h
	
	This patch fixes troubles when compiling some applications that include
	<linux/byteorder/little_endian.h>, like xmms.
	
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<jmorris@redhat.com>
	[PATCH] xattr consolidation v3 - generic xattr API
	
	This patch consolidates common xattr handling logic into the core fs code,
	with modifications suggested by Christoph Hellwig (hang off superblock, remove
	locking, use generic code as methods), for use by ext2, ext3 and devpts, as
	well as upcoming tmpfs xattr code.
	
	Signed-off-by: James Morris <jmorris@redhat.com>
	Signed-off-by: Stephen Smalley <sds@epoch.ncsc.mil>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<jmorris@redhat.com>
	[PATCH] xattr consolidation v3 - LSM
	
	This patch replaces the dentry parameter with an inode in the LSM
	inode_{set|get|list}security hooks, in keeping with the ext2/ext3 code. 
	dentries are not needed here.
	
	Signed-off-by: James Morris <jmorris@redhat.com>
	Signed-off-by: Stephen Smalley <sds@epoch.ncsc.mil>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<jmorris@redhat.com>
	[PATCH] xattr consolidation v3 - ext3
	
	This patch converts the ext3 xattr and acl code to the generic xattr API.
	
	Signed-off-by: James Morris <jmorris@redhat.com>
	Signed-off-by: Stephen Smalley <sds@epoch.ncsc.mil>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<jmorris@redhat.com>
	[PATCH] xattr consolidation v3 - ext2
	
	This patch converts ext2 xattr and acl code to the new generic xattr API.
	
	Signed-off-by: James Morris <jmorris@redhat.com>
	Signed-off-by: Stephen Smalley <sds@epoch.ncsc.mil>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<jmorris@redhat.com>
	[PATCH] xattr consolidation v3 - devpts
	
	This patch updates the devpts xattr handler code to the generic xattr API,
	also adds a GPL notice, author and copyright details.
	
	Signed-off-by: James Morris <jmorris@redhat.com>
	Signed-off-by: Stephen Smalley <sds@epoch.ncsc.mil>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<jmorris@redhat.com>
	[PATCH] xattr consolidation v3 - tmpfs
	
	This patch adds xattr support to tmpfs, and a security xattr handler.  The
	purpose of this is to allow udev to be mounted on tmpfs, as used currently by
	Fedora.
	
	Original patch from: Luke Kenneth Casson Leighton <lkcl@lkcl.net>.
	
	Signed-off-by: James Morris <jmorris@redhat.com>
	Signed-off-by: Stephen Smalley <sds@epoch.ncsc.mil>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<agruen@suse.de>
	[PATCH] xattr: re-introduce validity check before xattr cache insert
	
	* ext[23]_xattr_list():
	
	  - Before inserting an xattr block into the cache, make sure that the
	    block is not corrupted.  The check got moved after inserting into the
	    cache in the xattr consolidation patches, so corrupted blocks could become
	    visible to cache users.
	
	  - Take a variable out of the loop that calls the ->list handlers.
	
	* A few cosmetic changes.
	
	Signed-off-by: Andreas Gruenbacher <agruen@suse.de>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<jmorris@redhat.com>
	[PATCH] SELinux: allow all filesystems to specify fscreate mount  option
	
	The patch below allows all types of filesystems to specify the fscreate
	mount option (which is used to specify the security context of the
	filesystem itself).  This was previously only available for filesystems
	with full xattr security labeling, but is also potentially required for
	filesystems with e.g.  psuedo xattr labeling such as devpts and tmpfs.
	
	An example of use is to specify at mount time the fs security context of a
	tmpfs filesystem, overriding the default specified in policy for that
	filesystem.
	
	This patch has been in the Fedora kernel for some weeks with no problems.
	
	Signed-off-by: James Morris <jmorris@redhat.com>
	Signed-off-by: Stephen Smalley <sds@epoch.ncsc.mil>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<wli@holomorphy.com>
	[PATCH] profile: 512x Altix timer interrupt livelock fix
	
	I've been informed that /proc/profile livelocks some systems in the timer
	interrupt, usually at boot.  The following patch attempts to amortize the
	atomic operations done on the profile buffer to address this stability
	concern.  This patch has nothing to do with performance; kernels using
	periodic timer interrupts are under realtime constraints to complete
	whatever work they perform within timer interrupts before the next timer
	interrupt arrives lest they livelock, performing no work whatsoever apart
	from servicing timer interrupts.  The latency of the cacheline bounce for
	prof_buffer contributes to the time spent in the timer interrupt, hence it
	must be amortized when remote access latencies or deviations from fair
	exclusive cacheline acquisition may cause cacheline bounces to take longer
	than the interval between timer ticks.
	
	What this patch does is to create a pair of per-cpu open-addressed
	hashtables indexed by profile buffer slot holding values representing the
	number of pending profile buffer hits for the profile buffer slot.  When
	this hashtable overflows, one iterates over the hashtable accounting each
	of the pairs of profile buffer slots and hit counts to the global profile
	buffer.  Zero is a legitimate profile buffer slot, so zero hit counts
	represent unused hashtable entries.  The hashtable is furthermore protected
	from flush IPI's by interrupt disablement.
	
	In order to flush the pending profile hits for read_profile(), this patch
	flips betweeen the pairs of per-cpu profile buffer by signalling all cpus
	to flip via IPI at the time of read_profile(), followed by doing all the
	work to flush the profile hits from the older per-cpu buffers in the
	context of the caller of read_profile(), with exclusion provided by a
	semaphore ensuring that only one caller of profile_flip_buffers() may
	execute at a time, and using interrupt disablement to prevent buffer flip
	IPI's from altering the hashtables or flip state while an update is in
	progress.  The flip state is per-cpu so that remote cpus need only disable
	interrupts locally for synchronization, which is both simple and
	busywait-free for remote cpus.  The flip states all change in tandem when
	some cpu requests the hashtables be flipped, and the requester waits for
	the completion of smp_call_function() for notification that all cpus have
	finished flipping between their hashtables.  The IPI handler merely toggles
	the flip state (which is an array index) between 0 and 1.
	
	This is expected to be a much stronger amortization than merely reducing
	the frequency of profile buffer access by a factor of the size of the
	hashtable because numerous hits may be held for each of its entries.  This
	reduces what was before the patch a number of atomic increments equal to
	what after the patch becomes the sum of the hits held for each entry in the
	hashtable, to a number of atomic_add()'s equal to the number of entries in
	the per_cpu hashtable.  This is nondeterministic, but as the profile hits
	tend to be concentrated in a very small number of profile buffer slots
	during any given timing interval, is likely to represent a very large
	number of atomic increments.  This amortization of atomic increments does
	not depend on the hash function, only the sharp peakedness of the
	distribution of profile buffer hits.
	
	This algorithm has two advantages over full-size per-cpu profile buffers.
	The first is that the space footprint is much smaller.  Per-cpu profile
	buffers would increase the space requirements by a factor of
	num_online_cpus(), where this algorithm only requires one page per cpu. 
	The second is that reading the profile state is much faster, because the
	state that must be traversed is exactly the above space consumers, and the
	relative reduction in size concomitantly reduces the time required for a
	read operation.
	
	I also took the liberty of adding some commentary to the comments at the
	beginning of the file reflecting the major work done on profile.c in recent
	months and describing what the file implements.
	
	The reporters of this issue have verified that this resolves their timer
	interrupt livelock on 512x Altixen.  In my own testing on 4x logical
	x86-64, this patch saw a rate of about 18 flushes per minute under load, or
	about one flush every 3 seconds, for about 38.4 atomic accesses to the
	profile buffer per second per cpu in one of the algorithm's worst cases,
	about 3.84% of the number of atomic profile buffer accesses per second per
	cpu as a normal kernel would commit.  This represents a twenty-six-fold
	increase in the scalability on SMP systems with 4KB PAGE_SIZE, i.e.  with a
	4KB PAGE_SIZE, the number of atomic profile buffer accesses per second per
	cpu is reduced by a factor of 26, thereby increasing the number of cpus a
	system must have before it would experience a timer interrupt livelock by a
	factor of 26, with the proviso that cacheline bounces must take the same
	amount of time to service.  This increase in the scalability of the kernel
	is expected to be much larger for ia64, which has a large PAGE_SIZE,
	because the distribution of profile buffer hits is so sharply peaked that
	doubling the hashtable size will much more than double the amortization
	factor.  In fact, only 19 flushes were observed on a 64x Altix over an
	approximately 10 minute AIM7 run, and 1 flush on a 512x Altix over the
	course of an entire AIM7 run, for truly vast effective amortization
	factors.
	
	A prior version of this patch, which did not include the node-local
	hashtable allocation and bounded collision chains has been successfully
	tested on 64x and 512x ia64 vs 2.6.9-rc2, 8x ia64 vs.  2.6.9-rc2-mm1, 4x
	x86-64 vs.  2.6.9-rc2-mm1, and 6x sparc64 vs.  2.6.9-rc2-mm1.  This patch
	minus the hashtable initialization fix has been successfully tested on 2x
	ppc64, 2x alpha, 8x ia64, 6x sparc64, and 4x x86-64, all vs.
	2.6.9-rc2-mm1.  This precise version of the patch has been successfully
	tested on 8x ia32 against 2.6.9-rc2-mm1 and 6x sparc64 vs.  both
	2.6.9-rc2-mm1 and 2.6.9-rc2-mm2.
	
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<wli@holomorphy.com>
	[PATCH] sparc32: early tick_ops
	
	The zaphod scheduler likes to call scheduler_tick() before time_init(). 
	sparc32 oopses.
	
	Perhaps a scheduler bug, but this robustifies things.
	
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<Markus.Lidel@shadowconnect.com>
	[PATCH] i2o: code beautifying and cleanup
	
	- added KERN_* to printk where it was missing (original from Alan Cox)
	
	- removed unused code which was commented out already (original from Alan
	  Cox)
	
	- make error messages more sane in i2o_block (original from Alan Cox)
	
	Signed-off-by: Markus Lidel <Markus.Lidel@shadowconnect.com>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<Markus.Lidel@shadowconnect.com>
	[PATCH] i2o: added support for Promise controllers
	
	- added support for Promise I2O controllers, which need a different
	  initialization sequence (original from Alan Cox)
	
	Signed-off-by: Markus Lidel <Markus.Lidel@shadowconnect.com>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<Markus.Lidel@shadowconnect.com>
	[PATCH] i2o: new functions to convert messages to a virtual address
	
	- added new function i2o_msg_in_to_virt and i2o_msg_out_to_virt, to turn an
	  I2O message to a virtual address (original from Alan Cox)
	
	- replaced readl with le32_to_cpu where it is not necessary (original from
	  Alan Cox)
	
	Signed-off-by: Markus Lidel <Markus.Lidel@shadowconnect.com>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<Markus.Lidel@shadowconnect.com>
	[PATCH] i2o: quieten sparse 1-bit-bitfield warnings in i2o.h
	
	- Single-bit bitfields should be unsigned. Quell sparse warnings for
	   these. (from Randy Dunlap)
	
	Signed-off-by: Randy Dunlap <rddunlap@osdl.org>
	Signed-off-by: Markus Lidel <Markus.Lidel@shadowconnect.com>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<janitor@sternwelten.at>
	[PATCH] janitor: cpqarray remove unused include
	
	  remove unused #include <linux/version.h>
	  Old ifdefs were removed that used it's definition.
	
	Signed-off-by: Maximilian Attems <janitor@sternwelten.at>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<janitor@sternwelten.at>
	[PATCH] janitor: remove old ifdefs dmascc
	
	 Patches to remove some old ifdefs.
	 remove most of the #include <linux/version.h>
	 kill compat cruft like #define ahd_pci_set_dma_mask pci_set_dma_mask
	
	Signed-off-by: Maximilian Attems <janitor@sternwelten.at>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<janitor@sternwelten.at>
	[PATCH] janitor: remove old ifdefs fasttimer
	
	 Patches to remove some old ifdefs.
	 remove most of the #include <linux/version.h>
	 kill compat cruft like #define ahd_pci_set_dma_mask pci_set_dma_mask
	
	Signed-off-by: Maximilian Attems <janitor@sternwelten.at>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<janitor@sternwelten.at>
	[PATCH] janitor: list_for_each: drivers-char-drm-radeon_mem.c
	
	s/for/list_for_each/
	
	Signed-off-by: Domen Puncer <domen@coderock.org>
	Signed-off-by: Maximilian Attems <janitor@sternwelten.at>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<janitor@sternwelten.at>
	[PATCH] janitor: char/rio_linux: replace schedule_timeout() with msleep()/msleep_interruptible()
	
	Use msleep()/msleep_interruptible() [as appropriate] instead of
	schedule_timeout() to guarantee the task delays as expected.
	
	Signed-off-by: Nishanth Aravamudan <nacc@us.ibm.com>
	Signed-off-by: Maximilian Attems <janitor@sternwelten.at>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<janitor@sternwelten.at>
	[PATCH] janitor: char/sis-agp: replace schedule_timeout() with msleep()
	
	Signed-off-by: Nishanth Aravamudan <nacc@us.ibm.com>
	Signed-off-by: Maximilian Attems <janitor@sternwelten.at>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<janitor@sternwelten.at>
	[PATCH] janitor: char/fdc-io: replace direct assignment with set_current_state()
	
	Signed-off-by: Nishanth Aravamudan <nacc@us.ibm.com>
	Signed-off-by: Maximilian Attems <janitor@sternwelten.at>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<janitor@sternwelten.at>
	[PATCH] janitor: char/ipmi_si_intf: add set_current_state()
	
	Add set_current_state() before schedule_timeout() so a delay is achieved.
	Without the addition, schedule_timeout() returns immediately.
	
	Signed-off-by: Nishanth Aravamudan <nacc@us.ibm.com>
	Signed-off-by: Maximilian Attems <janitor@sternwelten.at>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<janitor@sternwelten.at>
	[PATCH] janitor: char/sx: replace direct assignment with set_current_state()
	
	Signed-off-by: Nishanth Aravamudan <nacc@us.ibm.com>
	Signed-off-by: Maximilian Attems <janitor@sternwelten.at>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<janitor@sternwelten.at>
	[PATCH] drivers/char: replace schedule_timeout() with msleep_interruptible()
	
	Replace lots of open-coded sleeps with msleep_interruptible() under
	drivers/char.
	
	Signed-off-by: Maximilian Attems <janitor@sternwelten.at>
	Signed-off-by: Nishanth Aravamudan <nacc@us.ibm.com>
	Signed-off-by: Rogier Wolff <R.E.Wolff@BitWizard.nl>
	Signed-off-by: Christoph Lameter <christoph@lameter.com>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<janitor@sternwelten.at>
	[PATCH] janitor: remove check_region from drivers/char/esp.c
	
	Signed-off-by: Maximilian Attems <janitor@sternwelten.at>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<janitor@sternwelten.at>
	[PATCH] janitor: mark __init/__exit static drivers/net/ppp_deflate
	
	Signed-off-by: Maximilian Attems <janitor@sternwelten.at>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<janitor@sternwelten.at>
	[PATCH] janitor: mark __init/__exit static drivers/net/bsd_comp
	
	Signed-off-by: Maximilian Attems <janitor@sternwelten.at>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<janitor@sternwelten.at>
	[PATCH] janitor: fix-typo-arm-dma arch/arm26/machine/dma.c
	
	caught by Domen Puncer <domen@coderock.org>
	
	Signed-off-by: Maximilian Attems <janitor@sternwelten.at>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<janitor@sternwelten.at>
	[PATCH] janitor: kill KERNEL_VERSION duplicate in videocodec.c
	
	Kill KERNEL_VERSION duplicate.  Funny that it insn't even used in here
	
	Signed-off-by: Domen Puncer <domen@coderock.org>
	Signed-off-by: Maximilian Attems <janitor@sternwelten.at>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<janitor@sternwelten.at>
	[PATCH] janitor: video/radeon_base: replace MS_TO_HZ() with msecs_to_jiffies()
	
	Replace MS_TO_HZ() with msecs_to_jiffies().
	
	Signed-off-by: Nishanth Aravamudan <nacc@us.ibm.com>
	Signed-off-by: Maximilian Attems <janitor@sternwelten.at>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<janitor@sternwelten.at>
	[PATCH] janitor: video/radeonfb: remove MS_TO_HZ()
	
	Removes definition of MS_TO_HZ() in favor of msecs_to_jiffies().
	
	Signed-off-by: Nishanth Aravamudan <nacc@us.ibm.com>
	Signed-off-by: Maximilian Attems <janitor@sternwelten.at>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<janitor@sternwelten.at>
	[PATCH] janitor: drivers/media: replace schedule_timeout() with msleep()
	
	Signed-off-by: Nishanth Aravamudan <nacc@us.ibm.com>
	Signed-off-by: Maximilian Attems <janitor@sternwelten.at>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<janitor@sternwelten.at>
	[PATCH] janitor: drivers/message: replace schedule_timeout() with msleep_interruptible()
	
	Use msleep_interruptible() instead of schedule_timeout() under drivers/message.
	
	Signed-off-by: Nishanth Aravamudan <nacc@us.ibm.com>
	Signed-off-by: Maximilian Attems <janitor@sternwelten.at>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<janitor@sternwelten.at>
	[PATCH] drivers/md: replace schedule_timeout() with msleep_interruptible()
	
	Signed-off-by: Nishanth Aravamudan <nacc@us.ibm.com>
	Signed-off-by: Maximilian Attems <janitor@sternwelten.at>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<janitor@sternwelten.at>
	[PATCH] ieee1394: replace schedule_timeout() with msleep_interruptible()
	
	Signed-off-by: Nishanth Aravamudan <nacc@us.ibm.com>
	Signed-off-by: Maximilian Attems <janitor@sternwelten.at>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<janitor@sternwelten.at>
	[PATCH] janitor: replace dprintk with pr_debug in drivers/scsi/tpam/
	
	Replaced dprintk, and deleted it out of tpam.h.
	
	Signed-off-by: Domen Puncer <domen@coderock.org>
	Signed-off-by: Maximilian Attems <janitor@sternwelten.at>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<janitor@sternwelten.at>
	[PATCH] janitor: isdn/icn: change units of ICN_BOOT_TIMEOUT1
	
	Change units of ICN_BOOT_TIMEOUT1 to msecs instead of jiffies for
	msleep_interruptible() in icn.c.  Also, remove unused constant
	ICN_CHANLOCK_DELAY.
	
	Signed-off-by: Nishanth Aravamudan <nacc@us.ibm.com>
	Signed-off-by: Maximilian Attems <janitor@sternwelten.at>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<janitor@sternwelten.at>
	[PATCH] drivers/isdn: replace milliseconds() with msecs_to_jiffies()
	
	Signed-off-by: Nishanth Aravamudan <nacc@us.ibm.com>
	Signed-off-by: Maximilian Attems <janitor@sternwelten.at>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<janitor@sternwelten.at>
	[PATCH] janitor: replace dprintk with pr_debug in microcode.c
	
	Replaced dprintk with pr_debug from kernel.h
	
	Signed-off-by: Domen Puncer <domen@coderock.org>
	Signed-off-by: Maximilian Attems <janitor@sternwelten.at>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<janitor@sternwelten.at>
	[PATCH] janitor: __FUNCTION__ string concatenation deprecated
	
	__FUNCTION__ string concatenation is deprecated
	
	Signed-off-by: Clemens Buchacher <drizzd@aon.at>
	Signed-off-by: Maximilian Attems <janitor@sternwelten.at>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<nacc@us.ibm.com>
	[PATCH] net/mac89x0: replace schedule_timeout() with msleep_interruptible()
	
	Signed-off-by: Nishanth Aravamudan <nacc@us.ibm.com>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<Markus.Lidel@shadowconnect.com>
	[PATCH] i2o: correct error code if bus is busy in i2o_scsi
	
	- corrected the error code in i2o_scsi_reply to return the correct error
	  code DID_BUS_BUSY if bus is busy (original from Alan Cox)
	
	Signed-off-by: Markus Lidel <Markus.Lidel@shadowconnect.com>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<Markus.Lidel@shadowconnect.com>
	[PATCH] i2o: message conversion fix for le32_to_cpu parameters
	
	- fixed incorrect parameters to le32_to_cpu which was introduced with the
	  I2O message conversion patch
	
	Signed-off-by: Markus Lidel <Markus.Lidel@shadowconnect.com>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<rmk@flint.arm.linux.org.uk>
	[ARM] Add netconsole support to ARM AM79C961A driver.

<rmk@flint.arm.linux.org.uk>
	[ARM] Convert to constant-optimising udelay() implementation.
	
	This allows us to eliminate a multiplication when we have a constant
	delay value, as per x86.

<rmk@flint.arm.linux.org.uk>
	[ARM] Rehash iwmmxt signal handling.
	
	In the near future, VFP will want to save state onto the user stack.
	Therefore, separate out the iwmmxt specific parts, and implement
	a generic "safe copy to user space using random CPU instructions".
	This is necessary because iwmmxt and VFP both use special CPU
	instructions to load and/or save their state.

<rmk@flint.arm.linux.org.uk>
	[ARM] Clean up footbridge configuration.

<rmk@flint.arm.linux.org.uk>
	[ARM] Move machine specific boot variables to separate makefile.
	
	Move machine specific boot variables out of arch/arm/boot/Makefile
	into arch/arm/mach-*/Makefile.boot.

<rmk@flint.arm.linux.org.uk>
	[ARM] Fix missed udelay usage - assembly needs to call __udelay now.

<dtor_core@ameritech.net>
	[PATCH] ieee1394: SBP-2 - rename some constants to fix clash with new SCSI core defines.
	
	Acked by Ben Collins.
	
	Signed-off-by: Dmitry Torokhov <dtor@mail.ru>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<ben-linux@org.rmk.(none)>
	[ARM PATCH] 2132/1: Fix timer NULL pointer de-reference on suspend
	
	Patch from Ben Dooks
	
	Timer suspend code fails to check for NULL before
	calling the timer implementor's suspend or resume hooks.
	
	Signed-off-by: Ben Dooks 

<rmk@flint.arm.linux.org.uk>
	[ARM] Sanitise Footbridge machine class.
	
	Footbridge was suffering from a little lack of care and attention;
	it still had the nasty arch.c file with all the associated #ifdef
	gross-ness that entailed.
	
	Re-jig footbridge support so that each machine type contains all
	the necessary support code, with a separate common implementation
	which they all share.

<holt@sgi.com>
	[IA64-SGI] Double spin_unlock in bte.c
	
	If all bte interfaces are in use, the current code will leave the
	bte pointer set when exiting from the loop trying to locate an
	interface to use.  This results in two processes using the same
	interface and both trying to free the same one.  With a
	premptible kernel, this results in the preempt count getting
	off.
	 
	Signed-off-by: Robin Holt <holt@sgi.com>
	Signed-off-by: Tony Luck <tony.luck@intel.com>

<bzolnier@trik.(none)>
	[ide] add sg_init_one() helper and teach ide about it
	
	Signed-off-by: Bartlomiej Zolnierkiewicz <bzolnier@gmail.com>

<rmk@flint.arm.linux.org.uk>
	[ARM] Add generic RTC implementation.
	
	This provides a number of helper functions and data structures
	for RTC implementations to make use of, including a standard
	implemention for /proc/driver/rtc and the rtc miscdevice.  It
	supports runtime registration of RTC timekeeping sources.

<rmk@flint.arm.linux.org.uk>
	[ARM] Add documentation for ARM kernel timer infrastructure.

<davej@dhcp83-103.boston.redhat.com>
	[AGPGART] Fix incorrect VIA PT880 entry.
	There was a mistake in the list of IDs I got from VIA,
	which meant this chipset was incorrectly recognised.
	
	Signed-off-by: Dave Jones <davej@redhat.com>

<bzolnier@trik.(none)>
	[ide] add ide_hwif_t->dma_setup()
	
	* tag REQ_DRIVE_TASKFILE write requests with REQ_RW
	* split off ->dma_setup() from ->ide_dma_[read,write] functions
	* use ->dma_setup() directly in ATAPI drivers and remove media
	  checks from ->ide_dma_[read,write]
	* ->ide_dma_[read,write,begin] cannot fail now
	* in Etrax ide.c setup DMA for ATAPI devices before sending
	  command to drive (so setup order is the same as for disks)
	
	Signed-off-by: Bartlomiej Zolnierkiewicz <bzolnier@gmail.com>

<bzolnier@trik.(none)>
	[ide] add ide_hwif_t->dma_exec_cmd()
	
	* split off ->dma_exec_cmd() from ->ide_dma_[read,write] functions
	* choose command to execute by ->dma_exec_cmd() in higher layers
	  and remove ->ide_dma_[read,write]
	* in Etrax ide.c driver REQ_DRIVE_TASKFILE requests weren't
	  handled properly for drive->addressing == 0
	* in trm290.c read and write commands were interchanged
	* in sgiioc4.c commands weren't sent to disk devices
	
	Signed-off-by: Bartlomiej Zolnierkiewicz <bzolnier@gmail.com>

<bzolnier@trik.(none)>
	[ide] convert ide_hwif_t->ide_dma_begin() to ->dma_start()
	
	Make ->ide_dma_begin() functions void and rename them to ->dma_start().
	
	Signed-off-by: Bartlomiej Zolnierkiewicz <bzolnier@gmail.com>

<pfg@sgi.com>
	[IA64-SGI] BUG_ON test was backwards
	
	Signed-off-by: Patrick Gefre <pfg@sgi.com>
	Signed-off-by: Tony Luck <tony.luck@intel.com>

<holt@sgi.com>
	[IA64-SGI] Correct BTE notification timeouts on SN2.
	
	The SN2 Block Transfer Engine occassionally fails to send a notification
	that it has completed a transfer to the kernel.  This patch adds a
	timeout mechanism which will detect the failure, reset the interface,
	and then retry the transfer.
	 
	Signed-off-by: Robin Holt
	Signed-off-by: Tony Luck <tony.luck@intel.com>

<holt@sgi.com>
	[IA64-SGI] Distribute useage of BTE interfaces.
	
	During peak utilization periods, the first interface on a node has
	an inordinately large amount of contention.  This is due to all
	cpus starting their scan for an interface at 0.  This patch distributes
	that based upon the slice the requesting cpu is attached to.
	 
	Signed-off-by: Robin Holt
	Signed-off-by: Tony Luck <tony.luck@intel.com>

<pfg@sgi.com>
	[IA64-SGI] Fixes calling arg1 for bte_crb_error_handler()
	
	Signed-off-by: Patrick Gefre <pfg@sgi.com>
	Signed-off-by: Tony Luck <tony.luck@intel.com>

<greg@kroah.com>
	PCI: fix up pci_save/restore_state in via-agp due to api change.
	
	Signed-off-by: Greg Kroah-Hartman <greg@kroah.com>

<khali@linux-fr.org>
	[PATCH] I2C: Spare 1 byte in lm90 driver
	
	I just noticed the other day that the lm90 driver uses an u16 to store
	the value of the 8-bit alarms register. This is most probably due to the
	fact that I originally copied the lm90 driver from the lm83 driver,
	which actually has two 8-bit registers for alarms, and obviously forgot
	to change the variable type.
	
	
	Signed-off-by: Jean Delvare <khali@linux-fr.org>
	Signed-off-by: Greg Kroah-Hartman <greg@kroah.com>

<khali@linux-fr.org>
	[PATCH] I2C: Fourth auto-fan control interface proposal
	
	Here comes my fourth (and hopefully last) sysfs interface proposal for
	implementing auto-fan control in 2.6. Previous proposals have been
	discussed here:
	
	[1] http://archives.andrew.net.au/lm-sensors/msg07517.html
	[2] http://archives.andrew.net.au/lm-sensors/msg08049.html
	[3] http://archives.andrew.net.au/lm-sensors/msg18008.html
	
	The interface is still made up of two parts: per fan temp channels
	selection, and trip points selection. Changes from the third proposal:
	
	pwm[1-*]_enable value 2 is now used to explicitely state the auto pwm
	mode. This was proposed by Mark D. Studebaker [4].
	
	[4] http://archives.andrew.net.au/lm-sensors/msg18011.html
	
	Temp channels selection
	=======================
	
	Renamed files from fan[1-*]_auto_channels to
	pwm[1-*]_auto_channels_temp. The change from fan tp pwm is to match the
	recent renaming suggested by Mark M. Hoffman [5]. The "_temp" suffix is
	to leave some room for a "_fan" suffix at a later time if new chips
	drive auto pwm according to fan speeds instead of temperature.
	
	[5] http://archives.andrew.net.au/lm-sensors/msg18797.html
	
	Trip points
	===========
	
	Trip points are now numbered (point1, point2, etc...) instead of named
	(_off, _min, _max, _full...). This solves the problem of various chips
	having a different number of trip points. The interface is still chip
	independent in that it doesn't require chip-specific knowledge to be
	used by user-space apps.
	
	The reason for this change is that newer chips tend to have more trip
	points. the LM63 has 8, the LM93 has no less than 12. Also, I read in
	the LM63 datasheet that ideal pwm vs temperature curve were parabolic in
	shape. Seems hard to achieve this if we arbitrarily lock the number of
	trip points to 3 ;)
	
	I also introduced an optional hysteresis temperature for trip points.
	The LM63 has this. Since it makes full sense I'd expect other chips to
	propose this as well.
	
	As before, there are two sets of files, each chip driver picks the one
	matching its internal model: trip points are either temperature
	channel-dependent (ADM1031...) or pwm channel-dependent (IT87xx...). If
	we ever come accross fan speed-driven pwm outputs where trip points are
	fan channel-dependent we may have to offer a third set of files. We'll
	see when/if this happens.
	
	I hope I have taken everyone's comments and advice into account and we
	can make this interface proposal part of the sysfs interface standard
	now. I'm sorry it took so long. Comments welcome.
	
	
	Signed-off-by: Jean Delvare <khali@linux-fr.org>
	Signed-off-by: Greg Kroah-Hartman <greg@kroah.com>

<R.Marek@sh.cvut.cz>
	[PATCH] I2C: fix it8712 detection
	
	Following patch fixes the bug introduced by me in VID VRM patch.
	Spotted (and later reviewed) by Jean Delvare. This bug is non-fatal,
	it8712 will be just treated as it was before my VID VRM patch.
	
	Tested on it8705 and it8712  hardware.
	
	Signed-off-by: Rudolf Marek <r.marek@sh.cvut.cz>
	Signed-off-by: Greg Kroah-Hartman <greg@kroah.com>

<nacc@us.ibm.com>
	[PATCH] I2C: replace schedule_timeout() with msleep_interruptible() in i2c-ibm_iic.c
	
	Use msleep_interruptible() instead of schedule_timeout() to
	guarantee the task delays as expected. Remove the unnecessary
	set_current_state() following the if, as schedule_timeout() [and thus,
	mlseep_interruptible()] is guaranteed to return in TASK_RUNNING.
	
	Signed-off-by: Nishanth Aravamudan <nacc@us.ibm.com>
	Signed-off-by: Greg Kroah-Hartman <greg@kroah.com>

<khali@linux-fr.org>
	[PATCH] I2C: Update Kconfig for AMD bus drivers
	
	This updates the AMD entries i2c/busses/Kconfig in two ways:
	* Add missing PCI dependancy.
	* Reword the help so that users know exactly what is supported by each
	  driver.
	
	Signed-off-by: Jean Delvare <khali@linux-fr.org>
	Signed-off-by: Greg Kroah-Hartman <greg@kroah.com>

<khali@linux-fr.org>
	[PATCH] I2C: Fix amd756 name
	
	This sets the proper name for busses supported by the i2c-amd756 driver.
	So far, all busses were named AMD756 regardless of the real hardware.
	Setting the real name is certainly less confusing for the user, and the
	sensors-detect script expects this too.
	
	Signed-off-by: Jean Delvare <khali@linux-fr.org>
	Signed-off-by: Greg Kroah-Hartman <greg@kroah.com>

<khali@linux-fr.org>
	[PATCH] I2C: Clean up i2c-amd756 and i2c-prosavage messages
	
	A number of messages in the i2c-amd756 and i2c-prosavage drivers have a
	leading ": " (especially the former). This is a legacy from lm_sensors'
	printks of the 2.4 times. This patch cleans them up. While I was there,
	I dropped a couple useless white spaces and dots as well.
	
	
	Signed-off-by: Jean Delvare <khali@linux-fr.org>
	Signed-off-by: Greg Kroah-Hartman <greg@kroah.com>

<ben-linux@fluff.org>
	[PATCH] I2C: S3C2410 I2C Bus driver
	
	Bus driver for the Samsung S3C2410 SoC onboard I2C controller
	
	Signed-off-by: Ben Dooks <ben-linux@fluff.org>
	Signed-off-by: Greg Kroah-Hartman <greg@kroah.com>

<khali@linux-fr.org>
	[PATCH] I2C: lm87 driver ported to Linux 2.6
	
	This is my port of the lm87 driver to Linux 2.6. It is based on the
	preliminary work of Jeff Oliver. I then significantly improved the code,
	added functionality, tested the whole thing on a real motherboard, fixed
	a couple remaining bugs, and here we are.
	
	I'll port a number of improvements and fixes back to the 2.4 version of
	the driver after lm_sensors 2.8.8 is released (i.e. soon).
	
	Signed-off-by: Jean Delvare <khali@linux-fr.org>
	Signed-off-by: Greg Kroah-Hartman <greg@kroah.com>

<rmk@flint.arm.linux.org.uk>
	[SERIAL] serial_reg.h update.
	
	This includes a fuller definition of the 8250 and compatible bits,
	and adding notes where the definition varies between different
	chips.
	
	This also fixes the following build error:
	
	drivers/serial/8250.c:185: error: `UART_FCR_R_TRIG_10'

<sfrench@smft41.(none)>
	[CIFS] ignore guest mount option do not log warning on it
	
	Signed-off-by:  Steve French (sfrench@us.ibm.com)

<kraxel@bytesex.org>
	[PATCH] I2C: i2c bus power management support
	
	The patch below adds power management support to the i2c bus.
	It adds just two small functions which call down to the devices
	power management functions if they are present, so the i2c device
	drivers will receive the suspend and resume events.
	
	From: Gerd Knorr <kraxel@bytesex.org>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Greg Kroah-Hartman <greg@kroah.com>

<len.brown@intel.com>
	[ACPI] create IBM ThinkPad ACPI driver -- ibm-acpi-0.6.patch
	
	by Borislav Deianov
	Signed-off-by: Len Brown <len.brown@intel.com>

<greg@kroah.com>
	I2C: convert from pci_module_init to pci_register_driver for all i2c drivers.
	
	Signed-off-by: Greg Kroah-Hartman <greg@kroah.com>

<tgraf@suug.ch>
	[PKT_SCHED]: Replace tc_stats with new gnet_stats in struct Qdisc
	
	Replaces tc_stats with gnet_stats replacements in struct
	Qdisc and adapts all qdiscs to use them.
	
	Signed-off-by: Thomas Graf <tgraf@suug.ch>
	Signed-off-by: David S. Miller <davem@davemloft.net>

<tgraf@suug.ch>
	[PKT_SCHED]: Use gnet_stats API to copy statistics into netlink message
	
	Adapts qdisc API to use new gnet_stats functions to copy
	statistics into netlink message.
	
	Signed-off-by: Thomas Graf <tgraf@suug.ch>
	Signed-off-by: David S. Miller <davem@davemloft.net>

<tgraf@suug.ch>
	[PKT_SCHED]: Introduce gen_replace_estimator
	
	Introduces gen_replace_estimator.
	
	Signed-off-by: Thomas Graf <tgraf@suug.ch>
	Signed-off-by: David S. Miller <davem@davemloft.net>

<tgraf@suug.ch>
	[PKT_SCHED]: Use generic rate estimator
	
	Adapts qdiscs to use generic estimator.
	
	Signed-off-by: Thomas Graf <tgraf@suug.ch>
	Signed-off-by: David S. Miller <davem@davemloft.net>

<tgraf@suug.ch>
	[PKT_SCHED]: Qdisc are not supposed to dump TCA_STATS themselves
	
	hfsc and htb qdisc are not supposed to copy TCA_STATS
	on their own and queue length statistic is already
	updated in generic code part.
	
	Signed-off-by: Thomas Graf <tgraf@suug.ch>
	Signed-off-by: David S. Miller <davem@davemloft.net>

<davem@nuts.davemloft.net>
	[PKT_SCHED]: Fix sch_atm build.
	
	Move it over to use qstats/bstats.
	
	Signed-off-by: David S. Miller <davem@davemloft.net>

<davem@nuts.davemloft.net>
	[SPARC64]: Re-export force_sig to modules.
	
	Used by sparc envctl drivers, specifically envctl.c and bbc_envctrl.c
	under drivers/sbus/char/
	
	Signed-off-by: David S. Miller <davem@davemloft.net>

<davem@nuts.davemloft.net>
	[SPARC]: Add entries for recently added system calls.
	
	Signed-off-by: David S. Miller <davem@davemloft.net>

<tgraf@suug.ch>
	[PKT_SCHED]: CBQ; Destroy filters before destroying classes.
	
	CBQ destroys its classes by traversing the hashtable and thus classes
	are not destroyed from root to leafs which means that class Y being
	a subclass of class X may be destroyed before X. This is a problem
	if a filter is attached to class X (parent) classifying into class Y
	(result). In case Y gets deleted before X the filter references an
	already deleted class while trying to unbind (cbq_unbind_filter).
	Therefore all filters must be destroyed before destroying classes. An
	additional BUG_TRAP has been added to document this not so obvious case.
	
	The BUG can be triggered with the following commands:
	 qdisc add dev  root handle 10:0 cbq bandwidth 100Mbit avpkt 1400 mpu 64
	 class add dev  parent 10:0  classid 10:12 cbq bandwidth 100mbit        rate 100mbit allot 1514 prio 3 maxburst 1 avpkt  500 bounded
	 class add dev  parent 10:12  classid 10:13 cbq bandwidth 100mbit        rate 100mbit allot 1514 prio 3 maxburst 1 avpkt  500 bounded
	 filter add dev  parent 10:12 protocol ip prio 10 u32 match ip protocol 6 0xff flowid 10:13
	 qdisc del dev  root
	
	The deletion ordering in the above case is: 10:0 -> 10:13 -> 10:12
	
	Signed-off-by: Thomas Graf <tgraf@suug.ch>
	Signed-off-by: David S. Miller <davem@davemloft.net>

<solt2@dns.toxicfilms.tv>
	[TCP]: Document tcp_tso_win_divisor in ip-sysctl.txt
	
	Signed-off-by: David S. Miller <davem@davemloft.net>

<davem@nuts.davemloft.net>
	[AF_UNIX]: Remove spurious len test in unix_mkname.
	
	Noticed by James Antill <james-linux-kernel@and.org>
	
	Signed-off-by: David S. Miller <davem@davemloft.net>

<rddunlap@osdl.org>
	[NET]: Fix sprintf type warnings on 64-bit in pktgen.c
	
	Signed-off-by: Randy Dunlap <rddunlap@osdl.org>
	Signed-off-by: David S. Miller <davem@davemloft.net>

<davem@nuts.davemloft.net>
	[NET]: More pktgen.c warnings not caught by Randys patch.
	
	Signed-off-by: David S. Miller <davem@davemloft.net>

<ganesh.venkatesan@intel.com>
	[PATCH] e100: Fix loss of connectivity to BMC when interface
	is brought down.
	
	Signed-off-by: Ganesh Venkatesan <ganesh.venkatesan@intel.com>

<ganesh.venkatesan@intel.com>
	[PATCH] e100: Fix set ringparam for ethtool returning error code on bad input
	
	Signed-off-by: Ganesh Venkatesan <ganesh.venkatesan@intel.com>

<ganesh.venkatesan@intel.com>
	[PATCH] e100: Driver version number update
	
	Signed-off-by: Ganesh Venkatesan <ganesh.venkatesan@intel.com>

<hadi@cyberus.ca>
	[NET]: Add Mirred TC action.
	
	Signed-off-by: Jamal Hadi Salim <hadi@cyberus.ca>
	Signed-off-by: David S. Miller <davem@davemloft.net>

<ganesh.venkatesan@intel.com>
	[PATCH] e1000: Configuration and user guide update
	
	Signed-off-by: Ganesh Venkatesan <ganesh.venkatesan@intel.com>

<ganesh.venkatesan@intel.com>
	[PATCH] e100: Configuration and user guide update
	
	Signed-off-by: Ganesh Venkatesan <ganesh.venkatesan@intel.com>

<ganesh.venkatesan@intel.com>
	[PATCH] ixgb: Configuration and user guide update
	
	Signed-off-by: Ganesh Venkatesan <ganesh.venkatesan@intel.com>

<ak@suse.de>
	[TCP]: Remove bogus CONFIG_SYSCTL ifdef
	
	Modular IPv6 needs these variables always exported, even when
	CONFIG_SYSCTL is not enabled.
	
	Signed-off-by: Andi Kleen <ak@suse.de>
	Signed-off-by: David S. Miller <davem@davemloft.net>

<herbert@gondor.apana.org.au>
	[TCP]: Create tcpdiag_dump_sock
	
	The first one move tcpdiag_bc_run calls into one place so that we can
	change its parameters next.
	
	Signed-off-by: Herbert Xu <herbert@gondor.apana.org.au>
	Signed-off-by: David S. Miller <davem@davemloft.net>

<herbert@gondor.apana.org.au>
	[TCP]: Make tcpdiag_bc_run take tcpdiag_entry
	
	This patch adds a tcpdiag_entry struct and makes tcpdiag_bc_run use it
	instead of a struct sock.  This will allow us to use tcpdiag_bc_run on
	struct open_request in the next patch.
	
	Please note that I've left the CONFIG_IPV6 defines in as to support
	ipv6 modules we'll need to modularise tcpdiag itself.  I'll probably
	do that after this is all fixed.
	 
	Signed-off-by: Herbert Xu <herbert@gondor.apana.org.au>
	Signed-off-by: David S. Miller <davem@davemloft.net>

<herbert@gondor.apana.org.au>
	[TCP]: Dump SYN_RECV sockets in tcpdiag
	
	Finally this patch adds the code to list SYN_RECV sockets.  A future
	enhancement would be to do this for the GET operation as well.
	
	Signed-off-by: Herbert Xu <herbert@gondor.apana.org.au>
	Signed-off-by: David S. Miller <davem@davemloft.net>

<herbert@gondor.apana.org.au>
	[NET]: Make sure to copy TSO fields in copy_skb_header().
	
	Signed-off-by: Herbert Xu <herbert@gondor.apana.org.au>
	Signed-off-by: David S. Miller <davem@davemloft.net>

<davem@nuts.davemloft.net>
	[NET]: Need to disable preempt in softirq check of netif_rx_ni.
	
	Signed-off-by: David S. Miller <davem@davemloft.net>

<herbert@gondor.apana.org.au>
	[NETLINK]: Yield in netlink_broadcast when congested.
	
	Signed-off-by: Herbert Xu <herbert@gondor.apana.org.au>
	Signed-off-by: David S. Miller <davem@davemloft.net>

<herbert@gondor.apana.org.au>
	[TCP]: Fix new packet len calc in tcp_fragment()
	
	The following patch makes it allocate skb_headlen(skb) - len instead
	of skb->len - len.  When skb is linear there is no difference.  When
	it's non-linear we only ever copy the bytes in the header.
	
	Signed-off-by: Herbert Xu <herbert@gondor.apana.org.au>
	Signed-off-by: David S. Miller <davem@davemloft.net>

<davem@nuts.davemloft.net>
	[CRYPTO]: Fix typo in Kconfig.
	
	Signed-off-by: David S. Miller <davem@davemloft.net>

<jmorris@redhat.com>
	[CRYPTO]: Add Tnepres cipher support
	
	This patch adds support for the kerneli 'Tnepres' cipher, a reversed form
	of Serpent which was implemented due to problems with the specification.
	This allows people to maintain compatibility between old kerneli and
	current kernels.
	
	Signed-off-by: Ruben Garcia <ruben@ugr.es>
	Signed-off-by: Fruhwirth Clemens <clemens@endorphin.org>
	Signed-off-by: James Morris <jmorris@redhat.com>
	Signed-off-by: David S. Miller <davem@davemloft.net>

<viro@www.linux.org.uk>
	[PATCH] lanstreamer fix
	
	copy from on-stack array is memcpy(), not memcpy_fromio()
	
	Signed-off-by: Al Viro <viro@parcelfarce.linux.theplanet.co.uk>

<len.brown@intel.com>
	[ACPI] simplify ES7000 IRQ re-naming scheme
	so that it works for all PCI interrupts.
	
	Signed-off-by: Natalie Protasevich <Natalie.Protasevich@UNISYS.com>
	Signed-off-by: Len Brown <Len.Brown@intel.com>

<pablo@eurodev.net>
	[NETFILTER]: Fix removing invalid proc file
	
	Signed-off-by: Pablo Neira <pablo@eurodev.net>
	Signed-off-by: Patrick McHardy <kaber@trash.net>
	Signed-off-by: David S. Miller <davem@davemloft.net>

<okir@suse.de>
	[NETFILTER]: Don't export common symbols from ipfwadm.ko
	
	Exported kernel symbols ip_conntrack_count and ip_conntrack_tcp_update were
	showing up both in ip_conntrack.ko and ipfwadm.ko, causing bogus dependencies
	in modules.dep.
	
	Signed-off-by: Olaf Kirch <okir@suse.de>
	Signed-off-by: Patrick McHardy <kaber@trash.net>
	Signed-off-by: David S. Miller <davem@davemloft.net>

<yasuyuki.kozakai@toshiba.co.jp>
	[NETFILTER]: Fix multiple bugs in ip6rt.c
	
	The first patch fixes the following bugs
	
	- Wrong cast the pointer to extension header.
	- Segments Left field in Routing Header isn't treated as 1 octet.
	
	Signed-off-by: Yasuyuki KOZAKAI <yasuyuki.kozakai@toshiba.co.jp>
	Signed-off-by: Patrick McHardy <kaber@trash.net>
	Signed-off-by: David S. Miller <davem@davemloft.net>

<yasuyuki.kozakai@toshiba.co.jp>
	[NETFILTER]: Fix checks in ip6t_multiport.c
	
	The first patch fixes following bugs in ip6t_multiport.c,
	
	- missing check the size of the preference data.
	- IP6T_INV_PROTO should check with not ip->flags but ip->invflags.
	
	Signed-off-by: Yasuyuki KOZAKAI <yasuyuki.kozakai@toshiba.co.jp>
	Signed-off-by: Patrick McHardy <kaber@trash.net>
	Signed-off-by: David S. Miller <davem@davemloft.net>

<yasuyuki.kozakai@toshiba.co.jp>
	[NETFILTER]: Fix multiple bugs in ip6t_frag.c
	
	The first patch fixes following bugs in ip6t_frag.c,
	
	- Wrong cast the pointer to extension header.
	- header length of Fragment Header is statically 8 octets.
	  Then the option --frag-len doesn't make sense.
	- There are endian issues where using frag->info.
	- Reserved fields are not 2 bit but 8bit + 2 bit. (see RFC2460)
	
	Signed-off-by: Yasuyuki KOZAKAI <yasuyuki.kozakai@toshiba.co.jp>
	Signed-off-by: Patrick McHardy <kaber@trash.net>
	Signed-off-by: David S. Miller <davem@davemloft.net>

<tony.luck@intel.com>
	[IA64] Allow -mtune=merced for gcc 3.4
	
	Patch submitted by H. J. Lu
	
	  Gcc 3.4.2 fixed ia64 -mtune=merced regressions on Linux 2.6 kernel:
	
	  http://gcc.gnu.org/bugzilla/show_bug.cgi?id=16278
	
	  I have been using this patch for several months now.
	
	Signed-off-by: Tony Luck <tony.luck@intel.com>

<arun.sharma@intel.com>
	[IA64] Add missing prototypes to kill warnings in sys_ia32.c
	
	Signed-off-by: Arun Sharma <arun.sharma@intel.com>
	Signed-off-by: Tony Luck <tony.luck@intel.com>

<tony.luck@intel.com>
	[IA64] uninitialised flags element could cause crashes
	
	window is not zeroed, so the flags should be assigned, not modified.
	This can lead to crashes at boot if the IO and Memory resources overlap.
	
	Patch supplied by Matthew Wilcox
	
	Signed-off-by: Tony Luck <tony.luck@intel.com>

<kaos@sgi.com>
	[IA64] Avoid a rare deadlock during unwind
	
	There is a rare deadlock condition during unwind script creation.  If
	build_script() is interrupted in the middle of creating the script, it
	holds the script write lock.  If the interrupt handler needs to call
	unwind for some failure condition, unwind will try to read the
	incomplete script and will deadlock on the script lock.
	
	The fix is to disable interrupts while building the script, so
	interrupt handlers never see partial scripts.
	
	Promoting spin_lock_irqsave() from script_new() to find_save_locs()
	changes the indentation, so the patch looks bigger than it really is.
	
	Signed-off-by: Keith Owens <kaos@sgi.com>
	Signed-off-by: Tony Luck <tony.luck@intel.com>

<suresh.b.siddha@intel.com>
	[IA64] fallback to swiotlb for consistent DMA mappings
	
	Patch supplied by Suresh Siddha
	
	This is mainly needed for EM64T platforms and makes sense for ia64 too.
	Need of this was broughtup sometime(long time?) back on lkml.
	http://www.ussg.iu.edu/hypermail/linux/kernel/0406.3/0112.html
	
	Signed-off-by: Tony Luck <tony.luck@intel.com>

<akpm@osdl.org>
	[PATCH] typhoon build fix
	
	Signed-off-by: Andrew Morton <akpm@osdl.org>

<akpm@osdl.org>
	[PATCH] sata_sil mod15 quirk with Seagate ST3120026AS
	
	From: <stuart@cybertherial.com>
	
	Hardware Environment: AMD64, sil3512 controller on m/b.  Harddrive: Seagate
	120GB ST3120026AS
	
	Problem Description: Drive would lock when writing large files, eg video
	from firewire, audio editing.  Checked dmesg, was obviously the sata drive.
	
	Have added the drive to the blacklist in sata_sil.c and the problem seems
	to have disappeared.
	
	Is there a good test to verify that the mod15 bug is really the problem?
	
	Signed-off-by: Andrew Morton <akpm@osdl.org>

<perex@suse.cz>
	[ALSA]  fixing a two-rme32-in-one-machine bug
	    
	RME32 driver
	    - fixing the dev counter in snd_rme32_probe(). The patch can enable a second
	      rme32 card
	
	Signed-off-by: Martin Langer <martin-langer@gmx.de>
	Signed-off-by: Takashi Iwai <tiwai@suse.de>

<perex@suse.cz>
	[ALSA]  Add routing/volume of ADAT I/O on EWS88D
	
	ICE1712 driver
	The routing/volume control of ADAT I/O on EWS88D is added.
	
	Signed-off-by: Takashi Iwai <tiwai@suse.de>

<perex@suse.cz>
	[ALSA]  Misc. volume fixes
	
	ICE1712 driver
	 - Added mute function to Master/Front/Rear/Side/LFE/CEnter
	 - Master volume is artificially made in software
	 - Added PCM volume control (basically what was the master volume)
	 - Front/Read/Side/LFE/Center is now logarithmic (and computed as <volume> * <master volume> / <maximum volume>)
	
	Signed-off-by: Peter Christensen <peter@developers.dk>
	Signed-off-by: Takashi Iwai <tiwai@suse.de>

<perex@suse.cz>
	[ALSA]  RME9632 precise_ptr fix
	
	RME HDSP driver
	Correct hardware position mask to mask correctly when buffer is not
	maximum size.
	
	Signed-off-by:  Ed Wildgoose <lists@wildgooses.com>
	Signed-off-by: Takashi Iwai <tiwai@suse.de>

<perex@suse.cz>
	[ALSA]  fix build in !KMOD case (sequencer)
	
	ALSA sequencer
	seq_device.c needs to pull in the snd_seq_autoload_lock()/unlock()
	defines from seq_kernel.h in the !KMOD case.
	
	Signed-off-by: Ingo Molnar <mingo@elte.hu>
	Signed-off-by: Jaroslav Kysela <perex@suse.cz>

<perex@suse.cz>
	[ALSA]  Fixed SPDIF on CS4298
	
	AC97 Codec Core
	Fixed SPDIF support on CS4298 AC97 chip.
	
	Signed-off-by: Takashi Iwai <tiwai@suse.de>

<perex@suse.cz>
	[ALSA]  Fix AC97_EXTENDED_STATUS initialial value
	
	AC97 Codec Core
	Fixed a bug to write an invalid initial value of AC97_EXTENDED_STATUS.
	
	Signed-off-by: Takashi Iwai <tiwai@suse.de>

<perex@suse.cz>
	[ALSA]  Exclude uneeded code when ! CONFIG_PROC_FS
	
	PCM Midlevel,AC97 Codec Core
	From Michal Rokos <michal@rokos.info>
	
	I tried to compile without procfs support and I got few 'unused code'
	warnings.
	
	This patch fixes it.
	
	Tested by compilation only. (With CONFIG_PROC_FS on and off)
	
	Signed-off-by: Takashi Iwai <tiwai@suse.de>

<perex@suse.cz>
	[ALSA]  Add VIA8237 driver type
	
	VIA82xx driver
	VIA8237 and later chips are handled as a different type from VIA8233,
	since they don't support the AC97 slot mapping any more.
	The alsa-lib will resolve the 5.1 remapping for them.
	
	Signed-off-by: Takashi Iwai <tiwai@suse.de>

<perex@suse.cz>
	[ALSA]  PCM boundary fix in 32bit compat layer
	
	IOCTL32 emulation
	PCM boundary size is fixed within the 32bit value range when HW_PARAMS
	ioctl is called in 32bit mode.
	Also, with this patch, the conversion functions are inlined.
	
	Signed-off-by: Takashi Iwai <tiwai@suse.de>

<perex@suse.cz>
	[ALSA]  Fix non-blocking write in ALSA OSS emulation
	
	ALSA<-OSS emulation
	write() calls in non-blocking mode eat the written data and never
	return -EAGAIN.  The attached patch fixes the problem.
	
	Signed-off-by: Benjamin Otte <otte@gnome.org>
	Signed-off-by: Takashi Iwai <tiwai@suse.de>

<aia21@cantab.net>
	NTFS: Fix two typos in Documentation/filesystems/ntfs.txt.
	
	Thanks to Richard Russon for pointing them out.
	
	Signed-off-by: Anton Altaparmakov <aia21@cantab.net>

<rmk@flint.arm.linux.org.uk>
	[ARM] Cleanup some quirks.
	
	- Ensure FIQs are enabled when cpu_idle() is called.
	- Remove unused members of irq_cpustat_t.
	- Remove unnecessary #ifndef CONFIG_SMP...#endif around irq_exit()
	  macro.
	- Rename __stf/__clf such that it stresses that they affect only
	  local state (as per local_irq_xxx).
	- Move THREAD_SIZE such that it can be used in current_thread_info()

<rmk@flint.arm.linux.org.uk>
	[ARM] Export find_{first,next}_bit_{l,b}e

<bzolnier@trik.(none)>
	[ide] pmac: use more ide_hwif_t fields
	
	Use dmatable_dma, sg_table, sg_nents and sg_dma_direction fields
	of ide_hwif_t and remove their equivalents from pmac_ide_hwif_t.
	
	Signed-off-by: Bartlomiej Zolnierkiewicz <bzolnier@gmail.com>

<bzolnier@trik.(none)>
	[ide] always allocate hwif->sg_table
	
	Allocate hwif->sg_table in hwif_init() so it can also be used for PIO.
	
	Signed-off-by: Bartlomiej Zolnierkiewicz <bzolnier@gmail.com>

<rusty@rustcorp.com.au>
	[PATCH] module_param_array() should take a pointer
	
	module_param_array() takes a variable to put the number of elements in. 
	Looking through the uses, many people don't care, so they declare a dummy
	or share one variable between several parameters.  The latter is
	problematic because sysfs uses that number to decide how many to display.
	
	The solution is to change the variable arg to a pointer, and if the pointer
	is NULL, use the "max" value.  This change is fairly small, but fixing up
	the callers is a lot of (trivial) churn.
	
	Signed-off-by: Rusty Russell <rusty@rustcorp.com.au>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<ak@muc.de>
	[PATCH] x86_64: drop old APIC workaround
	
	Suggested by Ingo Molnar.
	
	Drop APIC level workaround for old IO-APICs on x86-64 because it is a
	significant part of interrupt handling time.  x86-64 only runs on modern
	chipsets that probably don't have this bug.
	
	Signed-off-by: Andi Kleen <ak@suse.de>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<ak@muc.de>
	[PATCH] x86_64: intialize hpet char driver
	
	Initialize HPET char driver
	
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<ak@muc.de>
	[PATCH] x86_64: use TSC on SMP EM64T machines
	
	x86-64 MP kernels always used HPET timing when available.  This was done
	because AMD systems don't have synchronized TSCs in all cases.  On Intel
	this is not true (except Summit), so use faster TSC timing for those.
	
	Also only enable HPET gettimeofday when there is more than one CPU online.
	
	Signed-off-by: Andi Kleen <ak@suse.de>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<ak@muc.de>
	[PATCH] x86_64: add notsc option
	
	Add an notsc option so that it can be turned off again.
	
	This may be useful on the Summit, but will only work when there is a HPET
	fallback.
	
	Signed-off-by: Andi Kleen <ak@suse.de>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<ak@muc.de>
	[PATCH] x86_64: add an option to configure oops stack dump
	
	Add an kstack= option to configure how much stack should be printed on a
	oops.
	
	Signed-off-by: Andi Kleen <ak@suse.de>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<ak@muc.de>
	[PATCH] x86_64: fix IOAPIC on Nvidia boards
	
	Originally suggested by Zwane Mwaikumbo
	
	Ignore all ACPI timer overrides on all Nvidia boards.  The fallback doesn't
	work and no Nvidia boards needs a timer override.  But some buggy BIOS have
	it anyways.
	
	Also enable IO-APIC mode by default for Nvidia then.
	
	Thanks to Andy Currid for confirming this.
	
	Signed-off-by: Andi Kleen <ak@suse.de>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<ak@muc.de>
	[PATCH] x86_64 Kconfig: Split CONFIG_NUMA_EMU and CONFIG_K8_NUMA
	
	Split CONFIG_NUMA_EMU and CONFIG_K8_NUMA because they are independent.
	
	Signed-off-by: Andi Kleen <ak@muc.de>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<gordon.jin@intel.com>
	[PATCH] x86_64: correct copy_user_generic return value when exception happens
	
	Fix a bug that arch/x86_64/lib/copy_user:copy_user_generic will return a
	wrong value when exception happens.
	
	In the case the address is not 8-byte aligned (i.e.  go into
	Lbad_alignment), if exception happens in Ls11, %rdx will be wrong number of
	copied bytes, then copy_user_generic returns wrong value.  It also fixed a
	bug of zeroing wrong number of bytes of destination at this situation.  (In
	Lzero_rest)
	
	Signed-off-by: Yanmin Zhang <yanmin.zhang@intel.com>
	Signed-off-by: Nanhai Zou <nanhai.zou@intel.com>
	Signed-off-by: Gordon Jin <gordon.jin@intel.com>
	Signed-off-by: Suresh Siddha <suresh.b.siddha@intel.com>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<rddunlap@osdl.org>
	[PATCH] x86_64/io_apic init section fixups
	
	Code section errors in i386/io_apic.c found by scripts/reference_init.pl.
	Looks like they could cause problems for a few drivers or in a real hotplug
	environment.
	
	Error: ./arch/i386/kernel/io_apic.o .text refers to 000018ff R_386_PC32        .init.text
	
	call chain:
	  snd_mpu401_acpi_resource
	    acpi_register_gsi
	      mp_register_gsi
		io_apic_set_pci_routing
	{A}	  ioapic_register_intr
		    IO_APIC_irq_trigger
		      find_irq_entry
	
	Error: ./arch/i386/kernel/io_apic.o .text refers to 00001967 R_386_PC32        .init.text
	
		(as above thru {A}, then:)
		  IO_APIC_irq_trigger
		    irq_trigger
		      MPBIOS_trigger	>> removing __init from this led to
					   needing to remove __init from
					   EISA_ELCR also.
	
	Signed-off-by: Randy Dunlap <rddunlap@osdl.org>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<dwmw2@infradead.org>
	[PATCH] JFFS2: work around uninitialised use of usercompr field by old code.
	
	We didn't use the 'usercompr' field before recently.  Unfortunately we didn't
	set it to zero either, so there's a lot of file systems out there with it set
	to 0x5a.  Deal with that rather than getting confused.
	
	Signed-Off-By: David Woodhouse <dwmw2@infradead.org>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<kaigai@ak.jp.nec.com>
	[PATCH] atomic_inc_return() for i386
	
	This patch implements atomic_inc_return() and so on for i386, and includes
	runtime check whether CPU is legacy 386.
	
	Signed-off-by: KaiGai, Kohei <kaigai@ak.jp.nec.com>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<kaigai@ak.jp.nec.com>
	[PATCH] atomic_inc_return() for x86_64
	
	Signed-off-by: KaiGai, Kohei <kaigai@ak.jp.nec.com>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<kaigai@ak.jp.nec.com>
	[PATCH] atomic_inc_return() for arm
	
	This patch declares atomic_inc_return() as the alias of atomic_add_return()
	and atomic_dec_return() as an alias of atomic_dec_return().
	
	Signed-off-by: KaiGai, Kohei <kaigai@ak.jp.nec.com>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<kaigai@ak.jp.nec.com>
	[PATCH] atomic_inc_return() for arm26
	
	This patch implements atomic_inc_return() and so on for ARM26.  Because
	Hugh says that SMP is not supported in arm26, it is implemented by normal
	operations between local_irq_save() and local_irq_restore() like another
	atomic operations.
	
	Signed-off-by: KaiGai, Kohei <kaigai@ak.jp.nec.com>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<kaigai@ak.jp.nec.com>
	[PATCH] atomic_inc_return() for sparc64
	
	This patch declares atomic_add_return() as an alias of __atomic_add().
	atomic64_add_return(),atomic_sub_return() and atomic64_sub_return() are
	same.
	
	Signed-off-by: KaiGai, Kohei <kaigai@ak.jp.nec.com>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<wli@holomorphy.com>
	[PATCH] sparc32: add atomic_sub_and_test()
	
	Add atomic_sub_and_test() to sparc32, implemented in terms of
	atomic_sub_return(), so reiser4 can be simultaneously microoptimized for
	x86 and made to pass compilation testing on sparc32.
	
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<hch@lst.de>
	[PATCH] remove dead exports from fs/fat/
	
	These were used by the defunct umsdos code only.
	
	Signed-off-by: OGAWA Hirofumi <hirofumi@mail.parknet.co.jp>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<hirofumi@mail.parknet.co.jp>
	[PATCH] FAT: use hlist_head for fat_inode_hashtable
	
	Signed-off-by: OGAWA Hirofumi <hirofumi@mail.parknet.co.jp>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<hirofumi@mail.parknet.co.jp>
	[PATCH] FAT: rewrite the cache for file allocation table lookup
	
	This rewrites the cache stuff for file allocation table (FAT).
	
	This cache stocks the more pieces of FAT-chain by counting the number
	of contiguous data blocks. And if cache hit, since a block number can
	calculate without looking FAT-chain up, fat_get_block() become more
	fast.
	
	But if data blocks was fragmenting, unfortunately this cache is unuseful.
	
	read from block device
	
	[1st]# time dd if=/dev/hda6 of=/dev/null bs=1M count=2048
	2147483648 bytes transferred in 229.524189 seconds (9356241 bytes/sec)
	real    3m49.557s, user    0m0.026s, sys     1m20.414s
	[2nd]# time dd if=/dev/hda6 of=/dev/null bs=1M count=2048
	2147483648 bytes transferred in 229.539358 seconds (9355623 bytes/sec)
	real    3m49.647s, user    0m0.036s, sys     1m20.144s
	
	read from full contiguous file with this patch
	
	[1st]# time dd if=data of=/dev/null bs=1M count=2048
	2147483648 bytes transferred in 337.959477 seconds (6354264 bytes/sec)
	real    5m37.970s, user    0m0.031s, sys     1m21.915s
	[2nd]# time dd if=data of=/dev/null bs=1M count=2048
	2147483648 bytes transferred in 225.401699 seconds (9527362 bytes/sec)
	real    3m45.476s, user    0m0.027s, sys     1m19.286s
	
	read from full fragmented file with this patch
	
	[1st]# time dd if=data of=/dev/null bs=1M count=2048
	2147483647 bytes transferred in 1146.529081 seconds (1873030 bytes/sec)
	real    19m6.538s, user    0m0.020s, sys     1m32.774s
	[2nd]# time dd if=data of=/dev/null bs=1M count=2048
	2147483647 bytes transferred in 1045.084822 seconds (2054841 bytes/sec)
	real    17m25.152s, user    0m0.022s, sys     1m34.801s
	
	read from full contiguous file without this patch
	
	[1st]# time dd if=data of=/dev/null bs=1M count=2048
	2147483648 bytes transferred in 348.144707 seconds (6168365 bytes/sec)
	real    5m48.169s, user    0m0.019s, sys     1m29.962s
	[2nd]# time dd if=data of=/dev/null bs=1M count=2048
	2147483648 bytes transferred in 324.017361 seconds (6627681 bytes/sec)
	real    5m24.038s, user    0m0.023s, sys     1m20.602s
	
	read from full fragmented file without this patch
	
	[1st]# time dd if=data of=/dev/null bs=1M count=2048
	2147483647 bytes transferred in 1156.845693 seconds (1856327 bytes/sec)
	real    19m16.855s, user    0m0.031s, sys     1m32.172s
	[2nd]# time dd if=data of=/dev/null bs=1M count=2048
	2147483647 bytes transferred in 1066.518713 seconds (2013545 bytes/sec)
	real    17m46.526s, user    0m0.023s, sys     1m33.630s
	
	Signed-off-by: OGAWA Hirofumi <hirofumi@mail.parknet.co.jp>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<hirofumi@mail.parknet.co.jp>
	[PATCH] FAT: cache lock from per sb to per inode
	
	Signed-off-by: OGAWA Hirofumi <hirofumi@mail.parknet.co.jp>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<hirofumi@mail.parknet.co.jp>
	[PATCH] FAT: the inode hash from per module to per sb
	
	Signed-off-by: OGAWA Hirofumi <hirofumi@mail.parknet.co.jp>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<hirofumi@mail.parknet.co.jp>
	[PATCH] FAT: Fix the race bitween fat_free() and fat_get_cluster()
	
	This patch fixes the race condition
	
	  |      fat_free                |    fat_get_cluster
	  +------------------------------+-----------------------
	                                     fat_cache_lookup()
	                                     (get the copy of cache)
	   fat_cache_inval_inode()
	(invalidate caches on inode)
	                                     fat_cache_add()
	                                     (update/add the getted cache)
	
	The above race has possible that invalidated cache is added.
	
	This patch fixes the race condition by adding the cache-id to copy of cache.
	
	Signed-off-by: OGAWA Hirofumi <hirofumi@mail.parknet.co.jp>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<hirofumi@mail.parknet.co.jp>
	[PATCH] FAT: remove debug_pr()
	
	Signed-off-by: OGAWA Hirofumi <hirofumi@mail.parknet.co.jp>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<hirofumi@mail.parknet.co.jp>
	[PATCH] FAT: merge fix
	
	Signed-off-by: OGAWA Hirofumi <hirofumi@mail.parknet.co.jp>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<hirofumi@mail.parknet.co.jp>
	[PATCH] FAT: check free_clusters value
	
	This patch make sure it's <= sbi->clusters.
	
	Signed-off-by: OGAWA Hirofumi <hirofumi@mail.parknet.co.jp>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<hirofumi@mail.parknet.co.jp>
	[PATCH] FAT: removal of C[FT]_LE_[WL] macro
	
	Signed-off-by: OGAWA Hirofumi <hirofumi@mail.parknet.co.jp>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<hirofumi@mail.parknet.co.jp>
	[PATCH] FAT: remove validity check of FAT first entry
	
	The low byte of FAT's first entry must have same value with media-field.
	
	So, I added that validity check for some case. In fact, in some case
	this check detected non-FAT filesystem.  But in real world,
	unfortunately too many devices is writing a wrong value.
	
	This patch removes that validity check.
	
	Signed-off-by: OGAWA Hirofumi <hirofumi@mail.parknet.co.jp>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<hugh@veritas.com>
	[PATCH] lighten mmlist_lock
	
	Let's lighten the global spinlock mmlist_lock.
	
	What's it for?
	1. Its original role is to guard mmlist.
	2. It later got a second role, to prevent get_task_mm from raising
	   mm_users from the dead, just after it went down to 0.
	
	Firstly consider the second: __exit_mm sets tsk->mm NULL while holding
	task_lock before calling mmput; so mmlist_lock only guards against the
	exceptional case, of get_task_mm on a kernel workthread which did AIO's
	use_mm (which transiently sets its tsk->mm without raising mm_users) on an
	mm now exiting.
	
	Well, I don't think get_task_mm should succeed at all on use_mm tasks.
	It's mainly used by /proc/pid and ptrace, seems at best confusing for those
	to present the kernel thread as having a user mm, which it won't have a
	moment later.  Define PF_BORROWED_MM, set in use_mm, clear in unuse_mm
	(though we could just leave it), get_task_mm give NULL if set.
	
	Secondly consider the first: and what's mmlist for?
	1. Its original role was for swap_out to scan: rmap ended that in 2.5.27.
	2. In 2.4.10 it got a second role, for try_to_unuse to scan for swapoff.
	
	So, make mmlist a list of mms which maybe have pages on swap: add mm to
	mmlist when first swap entry is assigned in try_to_unmap_one (pageout), or
	in copy_page_range (fork); and mmput remove it from mmlist as before,
	except usually list_empty and there's no need to lock.  drain_mmlist added
	to swapoff, to empty out the mmlist if no swap is then in use.
	
	mmput leave mm on mmlist until after its exit_mmap, so try_to_unmap_one can
	still add mm to mmlist without worrying about the mm_users 0 case; but
	try_to_unuse must avoid the mm_users 0 case (when an mm might be removed
	from mmlist, and freed, while it's down in unuse_process): use
	atomic_inc_return now all architectures support that.
	
	Some of the detailed comments in try_to_unuse have grown out of date:
	updated and trimmed some, but leave SWAP_MAP_MAX for another occasion.
	
	Signed-off-by: Hugh Dickins <hugh@veritas.com>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<kraxel@bytesex.org>
	[PATCH] v4l: tuner update
	
	This is a update for the analog tv tuner module, it adds support for two
	new tuner chips.
	
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<kraxel@bytesex.org>
	[PATCH] v4l: avoid using struct file ptrs in video-buf
	
	This patch makes the video-buf helper module pass through a void pointer
	instead of a struct file pointer, that makes the code also usable when no
	file pointer is available.  This is needed for when using the video-buf
	infrastructure to manage DMA buffers for DVB cards.
	
	The file pointer was used by the videobuf_queue_ops callbacks to get the
	drivers private data via file->private_data, now a pointer to the drivers's
	private data can be passed directly.
	
	Adaptions of the drivers follow with separate patches.
	
	Signed-off-by: Gerd Knorr <kraxel@bytesex.org>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<kraxel@bytesex.org>
	[PATCH] v4l: adapt saa7146 to video-buf changes.
	
	This patch adapts the saa7146 driver to the video-buf changes.
	
	Signed-off-by: Gerd Knorr <kraxel@bytesex.org>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<kraxel@bytesex.org>
	[PATCH] v4l: bttv driver update
	
	This update for the bttv driver.  Changes:
	 * adapt the driver to video-buf changes.
	 * It also added sanity checks for the bt878 risc code buffer sizes.
	 * adds support for new tv cards.
	 * cleanup i2c driver autoload.
	 * misc cleanups (msleep, ...).
	 * fix IRQ bug when stopping vbi capture.
	 * drop check for cx2388x (bt878 successor) and the printk saying bttv
	   doesn't support these.
	 * set i2c class correctly for dvb cards.
	
	Signed-off-by: Gerd Knorr <kraxel@bytesex.org>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<kraxel@bytesex.org>
	[PATCH] v4l: cx88 driver update
	
	This is a major update of the cx88 driver.  Main new feature is support
	for the MPEG PCI function of the cx2388x chips.  The changes in detail:
	
	  * A bunch of code restructions, to allow multiple modules (one per PCI
	    function) work on top of the core module.
	  * Add a new module with common code for the mpeg PCI function.
	  * Add a new module to support mpeg encoder cards (connexant
	    "blackbird" reference design).  That one is not much tested yet and
	    may have bugs.  They can be easily workarounded by not loading the
	    module through, it isn't needed to capture uncompressed video.
	  * Add a new module to support DVB cards.  That one is better tested
	    than the blackbird one, but it needs additional cutting-edge stuff
	    from the dvb project, thats why it is disabled in Kconfig for now.
	  * Several cleanups along the way: use kthread, use msleep(), drop some
	    2.4.x compatibility code, move insmod options to 2.6 style, ...
	  * adapt code to the video-buf changes.
	  * suspend fixes.
	  * as usual some new tv cards.
	
	Signed-off-by: Gerd Knorr <kraxel@bytesex.org>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<kraxel@bytesex.org>
	[PATCH] DVB/V4L dependency fix
	
	The problem is that dvb is way to much work-in-progress right now, it's
	almost impossible to build something which works on both mainline kernel +
	latest dvb cvs.  Hope at least the interfaces are settled soon, for now I
	gave up on getting it work in mainline in short-term.
	
	The patch below compiles the DVB card configuration code only when
	VIDEO_CX88_DVB is enabled (which is commented right now in Kconfig due to
	being broken).
	
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<kraxel@bytesex.org>
	[PATCH] v4l: msp3400 cleanup
	
	This is a minor cleanup for the msp3400.c module: use the new msleep()
	function for delays.
	
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<hunold@linuxtv.org>
	[PATCH] DVB: update saa7146
	
	- [DVB] fix videodev has no release callback
	
	- [DVB] use PAGE_SIZE for pagetables, not home-brewn SAA7146_PGTABLE_SIZE
	
	- [DVB] use cpu_to_le32() at various places for endianess independency
	
	- [DVB] turn some error checks into BUG()s
	
	- [DVB] make saa7146_i2c_adapter_prepare() support an adapter class
	
	- [DVB] add support for V4L2_PIX_FMT_RGB32 pixelformat
	
	- [DVB] replace generic saa7146 i2c name by card specific name, suggested by
	  Uli Luckas <luckas@musoft.de>
	
	Signed-off-by: Michael Hunold <hunold@linuxtv.org>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<hunold@linuxtv.org>
	[PATCH] DVB: documentation update
	
	- [DVB] add udev.txt which describes how to use dvb and udev/sysfs
	- [DVB] add Visionplus VisionDTV USB-Ter DVB-T adapter documentation
	- [DVB] update TT USB DEC documentation
	- [DVB] update various Kconfig entries
	- [DVB] remove obsolete firmware documentation
	
	Signed-off-by: Michael Hunold <hunold@linuxtv.org>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<hunold@linuxtv.org>
	[PATCH] DVB: skystar2 dvb bt8xx update
	
	- [DVB] convert drivers from dvb-i2c to kernel-i2c
	- [DVB] convert MODULE_PARM() to module_param()
	- [DVB] convert dvb_delay() to mdelay()
	- [DVB] dvb-bt8xx: convert home-brewn bttv i2c access to a real bttv sub-driver
	
	Signed-off-by: Michael Hunold <hunold@linuxtv.org>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<hunold@linuxtv.org>
	[PATCH] DVB: core update
	
	- [DVB] remove non-linux compatibility stuff from dvb_functions.  rest in
	  peace.
	
	- [DVB] remove home-brewn dvb-i2c stuff. rest in peace.
	
	- [DVB] convert MODULE_PARM() to module_param()
	
	- [DVB] convert dvb_delay() to mdelay()
	
	- [DVB] convert C++ comments to C comments
	
	- [DVB] dvb_ca_en50221: fix for matrix CAMs from Sjoerd Simons, use c99
	  initializers, Fix for aston CAM read timeout problems, Moved CAM CTRL IF
	  reset to a better place, better debugging with multiple cards (Sjoerd
	  Simons)
	
	- [DVB] dvb-frontend: patch by Wolfgang Fritz: suppress spurious events
	  during tuning, Do not allow write (and related) ioctls when frontend is
	  opened RDONLY, Properly lock the frontend module on open/close, patch by
	  Christopher Pascoe: remove bogus up(fe->sem) on fe thread exit, patch by
	  Christopher Pascoe: remove bogus up(fe->sem) on fe thread exit
	
	- [DVB] dvb-demux: using spin_lock instead of spin_lock_irq caused a race
	  condition between irq/tasklet and user space task
	
	- [DVB] dvb-core: add sysfs/udev support using "class_simple", prevent Oops
	  when PES filter is set with invalid pes_type, protect feed_list with
	  spin_locks
	
	Signed-off-by: Michael Hunold <hunold@linuxtv.org>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<hunold@linuxtv.org>
	[PATCH] DVB: frontend conversion
	
	- [DVB] stv0299, tda1004x, ves1820, ves1x93: convert from dvb-i2c to
	  kernel-i2c, MODULE_PARM() to module_param(), dvb_delay() to mdelay()
	
	- [DVB] tda1004x: move from home-brewn firmware loading to firmware_class
	
	- [DVB] stv0299: support Cinergy1200, patch by Uli Luckas
	
	Signed-off-by: Michael Hunold <hunold@linuxtv.org>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<hunold@linuxtv.org>
	[PATCH] DVB: frontend conversion #2
	
	- [DVB] alps_tdlb7, alps_tdmb7, at76c651, cx24110, dst: convert from dvb-i2c
	  to kernel-i2c, MODULE_PARM() to module_param(), dvb_delay() to mdelay()
	
	- [DVB] alps_tdlb7: move from home-brewn firmware loading to firmware_class
	
	- [DVB] dst: use sysfs attributes for type and flags for per-card parameters
	
	Signed-off-by: Michael Hunold <hunold@linuxtv.org>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<hunold@linuxtv.org>
	[PATCH] DVB: frontend conversion #3
	
	- [DVB] dvb_dummy_fe, grundig_29504-401, grundig_29504-491, mt312: convert
	  from dvb-i2c to kernel-i2c, MODULE_PARM() to module_param(), dvb_delay() to
	  mdelay()
	
	- [DVB] update frontend Kconfig
	
	Signed-off-by: Michael Hunold <hunold@linuxtv.org>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<hunold@linuxtv.org>
	[PATCH] DVB: frontend conversion #4
	
	- [DVB] nxt6000, sp887x: convert from dvb-i2c to kernel-i2c, MODULE_PARM()
	  to module_param(), dvb_delay() to mdelay()
	
	- [DVB] sp887x: move from home-brewn firmware loading to firmware_class
	
	Signed-off-by: Michael Hunold <hunold@linuxtv.org>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<hunold@linuxtv.org>
	[PATCH] DVB: add frontend
	
	- [DVB] add new driver for Zarlink DVB-T MT352 frontend
	- [DVB] add new driver for Conexant 22702 DVB OFDM frontend 
	
	Signed-off-by: Michael Hunold <hunold@linuxtv.org>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<hunold@linuxtv.org>
	[PATCH] DVB: add frontend #2
	
	- [DVB] add new driver for mobile DVB-T demodulator DiBcom 3000-MB
	- [DVB] add new drivers to Makefile
	
	Signed-off-by: Michael Hunold <hunold@linuxtv.org>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<hunold@linuxtv.org>
	[PATCH] DVB: new driver for mobile USB Budget DVB-T devices
	
	- [DVB] new driver for mobile USB Budget DVB-T devices, thanks to Patrick
	  Boettcher
	
	Signed-off-by: Michael Hunold <hunold@linuxtv.org>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<hunold@linuxtv.org>
	[PATCH] DVB: misc driver updates
	
	- [DVB] av7110: convert MODULE_PARM() to module_param(), replace home-brewn
	  waiting stuff in osd code with wait_event_interruptible_timeout()
	
	- [DVB] av7110: put a semaphore around osd calls to make sure they're
	  properly serialized, timeout variable in arm_thread() must be int, not
	  unsigned long
	
	- [DVB] av7110: add additional OSD window types (patch by Jeremy Jones), new
	  ioctl OSD_GET_CAPABILITY/OSD_CAP_MEMSIZE; returns size of OSD memory
	
	- [DVB] av7110: put audio/video initialization into separate function
	  init_av7110_av(); call this function after system initialization and after
	  arm crash to restore the previous state; thanks to Soeren Sonnenburg
	  <bugreports@nn7.de> for this patch.
	
	- [DVB] av7110, budget, ttusb-budget: remove dvb i2c remains, support kernel
	  i2c
	
	- [DVB] av7110, budget: use msleep() instead of my_wait(), thanks to Kernel
	  Janitors/Nishanth Aravamudan <nacc@us.ibm.com>
	
	- [DVB] av7110, budget: fix videodev has no release callback
	
	- [DVB] av7110: more sparse annotiations
	
	- [DVB] budget: add support for TerraTec Cinergy 1200 DVB-S
	
	- [DVB] budget: fix race condition in irq handler
	
	- [DVB] skystar2, av7110, ttusb-budget, budget: make i2c
	  client_(un)register() functions static
	
	Signed-off-by: Michael Hunold <hunold@linuxtv.org>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<hunold@linuxtv.org>
	[PATCH] DVB: frontend updates
	
	- [DVB] all: replace dvb_unregister_frontend_new() with
	  dvb_unregister_frontend()
	
	- [DVB] sp887x: fix firmware download, patch by Jose Alberto Reguero
	
	- [DVB] tda1004x: add firmware loading via firmware_class()
	
	- [DVB] dvb_frontend: without hierachical coding, code_rate_LP is
	  irrelevant, so we tolerate the otherwise invalid FEC_NONE setting
	
	- [DVB] ves1x93: fixed dropouts on older DVB cards, fix tuning issues
	  (Andreas Share / Gregoire Favre), 
	
	Signed-off-by: Michael Hunold <hunold@linuxtv.org>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<hunold@linuxtv.org>
	[PATCH] V4L: follow changes in saa7146
	
	- [V4L] mxb, dpc7146, hexium_orion, hexium_gemini: follow latest changes in
	  saa7146 driver
	
	Signed-off-by: Michael Hunold <hunold@linuxtv.org>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<akpm@osdl.org>
	[PATCH] module_parm_array fixups
	
	Fix up various things which Rusty's patch broke or missed.
	
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<tharbaugh@lnxi.com>
	[PATCH] gen_init_cpio uses external file list
	
	This patch makes gen_init_cpio generate the initramfs_data.cpio from a file
	which contains a list of entries: file, dir, nod.  I swapped the order of
	filename/location for the file arguments so that it would be more uniform
	with the dir and node tyes.
	
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<azarah@nosferatu.za.org>
	[PATCH] Select cpio_list or source directory for initramfs image
	
	Attached is a patch that adds CONFIG_INITRAMFS_SOURCE, enabling you to
	either specify a file as cpio_list, or a directory to generate a list from.
	
	It depreciate the INITRAMFS_LIST environment variable introduced not long
	ago.
	
	There are some issues (suggestions/patches welcome) that I am not
	sure about:
	1) I put the menu entry under block devices, but I am not sure if
	   this is the correct location?
	2) There might be a better (or more correct) way to do this with
	   kbuild?
	3) Variable names and especially help text needs some love.
	4) I am not sure if I am duplicating work in progress?
	
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<akpm@osdl.org>
	[PATCH] select-cpio_list-or-source-directory-for-initramfs-image fix
	
	Kconfig barfs if it doesn't have leading spaces in the help.
	
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<neilb@cse.unsw.edu.au>
	[PATCH] nfsd4: nfsd oopsed when encountering a conflict with a local lock
	
	Bug Fix: Non NFSD conflicting byte-range locks were causing an Oops.
	
	Encode a zero length owner and zero clientid for non NFSD conflicting locks in
	the lock_denied response.
	
	Signed-off-by: Andy Adamson <andros@umich.edu>
	Signed-off-by: J. Bruce Fields <bfields@citi.umich.edu>
	Signed-off-by: Neil Brown <neilb@cse.unsw.edu.au>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<neilb@cse.unsw.edu.au>
	[PATCH] nfsd: separate a little of logic from fh_verify into new function
	
	Separate out the little bit of logic in fh_verify that checks the i_mode into
	a separate function.  This is nicely encapsulated, fh_verify() is overly long
	anyway, and this change helps make a subsequent nfs4 named attribute change
	clearer.
	
	Signed-off-by: J. Bruce Fields <bfields@citi.umich.edu>
	Signed-off-by: Neil Brown <neilb@cse.unsw.edu.au>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<neilb@cse.unsw.edu.au>
	[PATCH] nfsd4: don't take i_sem around call to ->getxattr
	
	The ->getxattr op doesn't take the i_sem (see
	Documentation/filesystems/Locking)
	
	Signed-off-by: J. Bruce Fields <bfields@citi.umich.edu>
	Signed-off-by: Neil Brown <neilb@cse.unsw.edu.au>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<neilb@cse.unsw.edu.au>
	[PATCH] nfsd: make sure getxattr inode op is non-NULL before calling it
	
	Make sure getxattr inode op is non-NULL before calling it.
	
	Also, security hook should probably be called before calling the getxattr op
	the first time.
	
	Signed-off-by: J. Bruce Fields <bfields@citi.umich.edu>
	Signed-off-by: Neil Brown <neilb@cse.unsw.edu.au>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<neilb@cse.unsw.edu.au>
	[PATCH] nfsd4: reference count stateowners
	
	Reference-counting the nfsd4 stateowner structs will let us fix a race and
	simplify some of the xdr code a bit, and may also help us make the nfsd4
	locking a little more fine-grained in the future.
	
	Signed-off-by: J. Bruce Fields <bfields@citi.umich.edu>
	Signed-off-by: Neil Brown <neilb@cse.unsw.edu.au>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<neilb@cse.unsw.edu.au>
	[PATCH] nfsd4: take a reference to preserve stateowner through xdr replay code
	
	Take a reference to preserve the stateowner through the xdr replay code, and
	simplify nfsd4_proc_compound a little.
	
	Signed-off-by: J. Bruce Fields <bfields@citi.umich.edu>
	Signed-off-by: Neil Brown <neilb@cse.unsw.edu.au>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<neilb@cse.unsw.edu.au>
	[PATCH] nfsd4: revert awkward extension of state lock over xdr for replay encoding
	
	With the addition of a reference count, we no longer need the code that
	conditionally extended the nfs4 state lock over the xdr encode stage.
	
	Signed-off-by: J. Bruce Fields <bfields@citi.umich.edu>
	Signed-off-by: Neil Brown <neilb@cse.unsw.edu.au>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<neilb@cse.unsw.edu.au>
	[PATCH] nfsd4: fix race in xdr encoding of lock_denied response.
	
	We take a reference on the stateowner, and copy the clientid, instead of just
	hoping no one destroys the stateowner before we reference it in
	nfsd4_encode_lock_denied.
	
	Signed-off-by: J. Bruce Fields <bfields@citi.umich.edu>
	Signed-off-by: Neil Brown <neilb@cse.unsw.edu.au>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<neilb@cse.unsw.edu.au>
	[PATCH] nfsd: remove incorrect stateid modification in nfsv4 open upgrade
	
	When we upgrade an open, we keep the same stateid and bump only the seqid.
	
	Signed-off-by: Andy Adamson <andros@umich.edu>
	Signed-off-by: J. Bruce Fields <bfields@citi.umich.edu>
	Signed-off-by: Neil Brown <neilb@cse.unsw.edu.au>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<neilb@cse.unsw.edu.au>
	[PATCH] nfsd4: move open owner checks from nfsd4_process_open2 into new function
	
	nfsd4_process_open2 has become a bit long and contorted.  The following
	patches break nfsd4_process_open2 into smaller functions and add comments to
	describe logic flow, in preparation for delegation state.
	
	We begin by pulling out the code that searches for conflicting open owners
	into a separate function.
	
	Signed-off-by: Andy Adamson <andros@citi.umich.edu>
	Signed-off-by: J. Bruce Fields <bfields@citi.umich.edu>
	Signed-off-by: Neil Brown <neilb@cse.unsw.edu.au>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<neilb@cse.unsw.edu.au>
	[PATCH] nfsd: set OPEN_RESULT_LOCKTYPE_POSIX in open()
	
	We should set the OPEN_RESULT_LOCKTYPE_POSIX flag in the return to open, to
	indicate that we support locking.
	
	Signed-off-by: Andy Adamson <andros@citi.umich.edu>
	Signed-off-by: J. Bruce Fields <bfields@citi.umich.edu>
	Signed-off-by: Neil Brown <neilb@cse.unsw.edu.au>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<neilb@cse.unsw.edu.au>
	[PATCH] nfsd4: move seqid decrement on reclaim to separate function
	
	Move seqid decrement on reclaim to separate function
	
	Signed-off-by: Andy Adamson <andros@citi.umich.edu>
	Signed-off-by: J. Bruce Fields <bfields@citi.umich.edu>
	Signed-off-by: Neil Brown <neilb@cse.unsw.edu.au>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<neilb@cse.unsw.edu.au>
	[PATCH] nfsd4: reorganize "if" in nfsd4_process_open2 to make test clearer
	
	Reorganize "if" in nfsd4_process_open2 to make test clearer; there was no real
	reason to test for the negative here.
	
	Signed-off-by: Andy Adamson <andros@umich.edu>
	Signed-off-by: J. Bruce Fields <bfields@citi.umich.edu>
	Signed-off-by: Neil Brown <neilb@cse.unsw.edu.au>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<neilb@cse.unsw.edu.au>
	[PATCH] nfsd4: move open_upgrade code into a separate function
	
	Move most of the code for the open_upgrade case into a separate
	nfs4_upgrade_open.
	
	Signed-off-by: Andy Adamson <andros@umich.edu>
	Signed-off-by: J. Bruce Fields <bfields@citi.umich.edu>
	Signed-off-by: Neil Brown <neilb@cse.unsw.edu.au>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<neilb@cse.unsw.edu.au>
	[PATCH] nfsd4: move some nfsd4_process_open2 code to nfs4_new_open
	
	Move most of the code in the new_open case of nfsd4_process_open2 to
	nfs4_new_open.
	
	Signed-off-by: Andy Adamson <andros@umich.edu>
	Signed-off-by: J. Bruce Fields <bfields@citi.umich.edu>
	Signed-off-by: Neil Brown <neilb@cse.unsw.edu.au>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<neilb@cse.unsw.edu.au>
	[PATCH] nfsd: clean up nfsd4_process_open2
	
	Comments, dprintk cleanup
	
	Signed-off-by: Andy Adamson <andros@citi.umich.edu>
	Signed-off-by: J. Bruce Fields <bfields@citi.umich.edu>
	Signed-off-by: Neil Brown <neilb@cse.unsw.edu.au>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<neilb@cse.unsw.edu.au>
	[PATCH] nfsd4: fix putrootfh return
	
	Thanks to Al Viro for noticing that putrootfh could return either a linux or
	an nfs error.
	
	Signed-off-by: J. Bruce Fields <bfields@citi.umich.edu>
	Signed-off-by: Neil Brown <neilb@cse.unsw.edu.au>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<neilb@cse.unsw.edu.au>
	[PATCH] nfsd4: move code to truncate on open to separate function
	
	for OPEN with O_TRUNC, if the truncate fails, the open fails.  for
	nfs4_open_upgrade, this means undo the get_write_access.  for new OPENs, this
	means release the newly created stateid.
	
	Signed-off-by: Andy Adamson <andros@citi.umich.edu>
	Signed-off-by: J. Bruce Fields <bfields@citi.umich.edu>
	Signed-off-by: Neil Brown <neilb@cse.unsw.edu.au>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<wli@holomorphy.com>
	[PATCH] vm: introduce remap_pfn_range() to replace remap_page_range()
	
	This patch introduces remap_pfn_range(), destined to replace
	remap_page_range(), to which all callers of remap_page_range() are converted
	in the sequel.
	
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<wli@holomorphy.com>
	[PATCH] vm: convert references to remap_page_range() under arch/ and Documentation/ to remap_pfn_range()
	
	This patch converts all callers of remap_page_range() under arch/ and all
	references in Documentation/ to use remap_pfn_range().
	
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<wli@holomorphy.com>
	[PATCH] vm: convert users of remap_page_range() under drivers/ and net/ to use remap_pfn_range()
	
	This patch converts all callers of remap_page_range() under arch/ and net/ to
	use remap_pfn_range() instead.
	
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<wli@holomorphy.com>
	[PATCH] vm: convert users of remap_page_range() under include/asm-*/ to use remap_pfn_range()
	
	This patch converts uses of remap_page_range() via io_remap_page_range() in
	include/asm-*/ to use remap_pfn_range().  io_remap_page_range() has a similar
	physical address overflow issue that needs to be addressed later.
	
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<wli@holomorphy.com>
	[PATCH] vm: convert users of remap_page_range() under sound/ to use remap_pfn_range()
	
	This patch converts all users of remap_page_range() under sound/ to use
	remap_pfn_range(), with the exception of maestro3 changelogs, which are likely
	expected to be preserved intact apart from additions (as most changelogs are),
	regardless of API changes.
	
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<zwane@linuxpower.ca>
	[PATCH] Update 'noapic' description
	
	The 'noapic' kernel parameter only disables IOAPIC use and not all the
	APICs (which would include local APICs) in the system.
	
	Signed-off-by: Zwane Mwaikambo <zwane@fsmlabs.com>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<mingo@elte.hu>
	[PATCH] disk stats preempt safety
	
	The per-cpu disk stats are being updated in a non-preempt-safe manner in a
	couple of places.
	
	The patch introduces introduces preempt and non-preempt versions of the
	statistics code and updates the block code to use the appropriate ones.
	
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<jbglaw@lug-owl.de>
	[PATCH] Document DEC VSXXX-AB digitizer as known working
	
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<roland@redhat.com>
	[PATCH] move struct k_itimer out of linux/sched.h
	
	I don't know why struct k_itimer was ever declared in sched.h; perhaps at
	one time it was referenced by something else there.  There is no need for
	it now.  This patch moves the struct where it belongs, in
	linux/posix-timers.h.  It has zero effect on anything except keeping the
	source easier to read.
	
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<mahalcro@us.ibm.com>
	[PATCH] BSD Secure Levels LSM: add time hooks
	
	I have received positive feedback from various individuals who have applied my
	BSD Secure Levels LSM patch, and so at this point I am submitting it to you
	with a request to merge it in.  Nothing has changed in this patch since when I
	last posted it to the LKML, so I am not re-sending it there.
	
	This first patch adds hooks to catch attempts to set the system clock back.
	
	Signed-off-by: Michael A. Halcrow <mahalcro@us.ibm.com>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<mahalcro@us.ibm.com>
	[PATCH] BSD Secure Levels LSM: core
	
	This patch modifies Kconfig and Makefile to support building the BSD
	Secure Levels LSM, in addition to the module itself.
	
	Signed-off-by: Michael A. Halcrow <mahalcro@us.ibm.com>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<mahalcro@us.ibm.com>
	[PATCH] BSD Secure Levels LSM: documentation
	
	This patch includes documentation on using the BSD Secure Levels LSM.
	
	Signed-off-by: Michael A. Halcrow <mahalcro@us.ibm.com>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<shemminger@osdl.org>
	[PATCH] register_chrdev_region(), alloc_chrdev_region() const char
	
	A couple chrdev routines take a constant string and should be declared with
	const char *.
	
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<fhirtz@redhat.com>
	[PATCH] Display committed memory limit and available in  meminfo
	
	The following patch will have the committed memory limit (per the current
	overcommit ratio) and the amount of memory remaining under this limit
	displayed in meminfo.
	
	It's presently somewhat difficult to use the strict memory overcommit
	settings as it's somewhat difficult to determine the amount of memory
	remaining under the cap.  This patch would make using strict overcommit a
	good bit simpler.
	
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<clameter@sgi.com>
	[PATCH] Posix compliant cpu clocks
	
	POSIX clocks are to be implemented in the following way according
	to V3 of the Single Unix Specification:
	
	1. CLOCK_PROCESS_CPUTIME_ID
	
	  Implementations shall also support the special clockid_t value
	  CLOCK_PROCESS_CPUTIME_ID, which represents the CPU-time clock of the
	  calling process when invoking one of the clock_*() or timer_*()
	  functions. For these clock IDs, the values returned by clock_gettime() and
	  specified by clock_settime() represent the amount of execution time of the
	  process associated with the clock.
	
	2. CLOCK_THREAD_CPUTIME_ID
	
	  Implementations shall also support the special clockid_t value
	  CLOCK_THREAD_CPUTIME_ID, which represents the CPU-time clock of the
	  calling thread when invoking one of the clock_*() or timer_*()
	  functions. For these clock IDs, the values returned by clock_gettime()
	  and specified by clock_settime() shall represent the amount of
	  execution time of the thread associated with the clock.
	
	These times mentioned are CPU processing times and not the time that has
	passed since the startup of a process. Glibc currently provides its own
	implementation of these two clocks which is designed to return the time
	that passed since the startup of a process or a thread.
	
	Moreover Glibc's clocks are bound to CPU timers which is problematic when the
	frequency of the clock changes or the process is moved to a different
	processor whose cpu timer may not be fully synchronized to the cpu timer
	of the current CPU. This patchset results in a both clocks working reliably.
	
	The patch also implements the access to other the thread and process clocks
	of linux processes by using negative clockid's:
	
	1. For CLOCK_PROCESS_CPUTIME_ID: -pid
	2. For CLOCK_THREAD_CPUTIME_ID: -(pid + PID_MAX_LIMIT)
	
	This allows
	
	clock_getcpuclockid(pid) to return -pid
	
	and
	
	pthread_getcpuiclock(pid) to return -(pid + PID_MAX_LIMIT)
	
	to allow access to the corresponding clocks.
	
	Todo:
	- The timer API to generate events by a non tick based timer is not
	  usable in its current state. The posix timer API seems to be only
	  useful at this point to define clock_get/set. Need to revise this.
	- Implement timed interrupts in mmtimer after API is revised.
	
	The mmtimer patch is unchanged from V6 and stays as is in 2.6.9-rc3-mm2.
	But I expect to update the driver as soon as the interface to setup hardware
	timer interrupts is usable.
	
	Single Thread Testing
	  CLOCK_THREAD_CPUTIME_ID=          0.494140878 resolution= 0.000976563
	 CLOCK_PROCESS_CPUTIME_ID=          0.494140878 resolution= 0.000976563
	Multi Thread Testing
	Starting Thread: 0 1 2 3 4 5 6 7 8 9
	 Joining Thread: 0 1 2 3 4 5 6 7 8 9
	0 Cycles=      0 Thread=  0.000000000ns Process=  0.495117441ns
	1 Cycles=1000000 Thread=  0.140625072ns Process=  2.523438792ns
	2 Cycles=2000000 Thread=  0.966797370ns Process=  8.512699671ns
	3 Cycles=3000000 Thread=  0.806641038ns Process=  7.561527309ns
	4 Cycles=4000000 Thread=  1.865235330ns Process= 12.891608163ns
	5 Cycles=5000000 Thread=  1.604493009ns Process= 11.528326215ns
	6 Cycles=6000000 Thread=  2.086915131ns Process= 13.500983475ns
	7 Cycles=7000000 Thread=  2.245118337ns Process= 13.947272766ns
	8 Cycles=8000000 Thread=  1.604493009ns Process= 12.252935961ns
	9 Cycles=9000000 Thread=  2.160157356ns Process= 13.977546219ns
	
	Clock status at the end of the timer tests:
	          Gettimeofday() = 1097084999.489938000
	           CLOCK_REALTIME= 1097084999.490116229 resolution= 0.000000040
	          CLOCK_MONOTONIC=        177.071675109 resolution= 0.000000040
	 CLOCK_PROCESS_CPUTIME_ID=         13.978522782 resolution= 0.000976563
	  CLOCK_THREAD_CPUTIME_ID=          0.497070567 resolution= 0.000976563
	          CLOCK_SGI_CYCLE=        229.967982280 resolution= 0.000000040
	PROCESS clock of 1 (init)=          4.833986850 resolution= 0.000976563
	 THREAD clock of 1 (init)=          0.009765630 resolution= 0.000976563
	
	
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<clameter@sgi.com>
	[PATCH] Posix compliant cpu clocks V6: mmtimer provides CLOCK_SGI_CYCLE
	
	* Add CLOCK_SGI_CYCLE provided by drivers/char/mmtimer
	
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<oleg@tv-sign.ru>
	[PATCH] detach_pid(): restore optimization
	
	Kirill's kernel/pid.c rework broke optimization logic in detach_pid().  Non
	zero return from __detach_pid() was used to indicate, that this pid can
	probably be freed.  Current version always (modulo idle threads) return non
	zero value, thus resulting in unneccesary pid_hash scanning.
	
	Also, uninlining __detach_pid() reduces pid.o text size from 2492 to 1600
	bytes.
	
	Acked-By: Kirill Korotaev <dev@sw.ru>
	Signed-off-by: Oleg Nesterov <oleg@tv-sign.ru>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<oleg@tv-sign.ru>
	[PATCH] detach_pid(): eliminate one find_pid() call
	
	Now there is no point in calling costly find_pid(type) if
	__detach_pid(type) returned non zero value.
	
	Acked-By: Kirill Korotaev <dev@sw.ru>
	Signed-off-by: Oleg Nesterov <oleg@tv-sign.ru>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<hch@lst.de>
	[PATCH] don't include <linux/irq.h> from drivers
	
	<linux/irq.h> is internals for the generic irq handler implementation,
	which is used on most but not all platforms.
	
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<venkatesh.pallipadi@intel.com>
	[PATCH] x86[64]: display phys_proc_id only when it is initialized
	
	phys_proc_id gets initialized only when (smp_num_siblings > 1).  But gets
	printed even when (smp_num_siblings == 1).  As a result we print incorrect
	physical processor id in /proc/cpuinfo, when HT is disabled.
	
	Signed-off-by:: "Venkatesh Pallipadi" <venkatesh.pallipadi@intel.com>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<oleg@tv-sign.ru>
	[PATCH] copy_thread(): unneeded child_tid initialization
	
	{set,clear}_child_tid initialized in copy_process() right after return from
	copy_thread().
	
	These vars are not used in cleanup path if copy_thread() fails.
	
	grep -r _child_tid arch/ shows only ia64/kernel/asm-offsets.c,
	so i blindly patched non i386 archs too.
	
	Signed-off-by: Oleg Nesterov <oleg@tv-sign.ru>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<janitor@sternwelten.at>
	[PATCH] drivers: remove unused MOD_{DEC,INC}_USE_COUNT
	
	hch send in a patch to remove MOD_{DEC,INC}_USE_COUNT.  Let's also remove
	useless references to it (comments, old ifdefs).
	
	Signed-off-by: maximilian attems <janitor@sternwelten.at>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<geert@linux-m68k.org>
	[PATCH] m68k: MM off-by-one
	
	Fix off-by-one error in zone size calculation (from Didier Mequignon and Petr
	Stehlik)
	
	Signed-off-by: Geert Uytterhoeven <geert@linux-m68k.org>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<geert@linux-m68k.org>
	[PATCH] Atari ACSI dependencies
	
	Atari ACSI: Correct a small problem in the dependencies of ATARI_BIONET and
	ATARI_PAMSNET (e.g.  ATARI_ACSI=m shouldn't allow ATARI_BIONET=y).
	
	Signed-off-by: Adrian Bunk <bunk@fs.tum.de>
	Signed-off-by: Geert Uytterhoeven <geert@linux-m68k.org>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<geert@linux-m68k.org>
	[PATCH] m68k: minmax-removal arch/m68k/kernel/bios32.c
	
	M68k PCI: Removes unnecessary min/max macros and change calls to use kernel.h
	macros instead.
	
	Signed-off-by: Michael Veeck <michael.veeck@gmx.net>
	Signed-off-by: Maximilian Attems <janitor@sternwelten.at>
	Signed-off-by: Geert Uytterhoeven <geert@linux-m68k.org>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<geert@linux-m68k.org>
	[PATCH] M68k: don't emit empty stack program header in vmlinux
	
	Recent versions of ld add an empty stack program header to the kernel image,
	which makes it incompatible with current m68k bootstrap loaders.  Modify the
	linker script to make sure we see only the program headers that are really
	needed.  (from Roman Zippel)
	
	Signed-off-by: Geert Uytterhoeven <geert@linux-m68k.org>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<geert@linux-m68k.org>
	[PATCH] Amifb: update pseudocolor bitfield lenghts
	
	Amiga frame buffer: The new convention (introduced in 2.6.9-rc1) requires that
	the usable color depth for pseudocolor visuals is indicated by the lengths of
	the color bitfields.  Update amifb for this convention, and add a special case
	for HAM (Hold-and-Modify) mode (colormap has 16 (HAM6) or 64 (HAM8) entries).
	
	Signed-off-by: Geert Uytterhoeven <geert@linux-m68k.org>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<geert@linux-m68k.org>
	[PATCH] Amiga frame buffer: kill obsolete DMI Resolver code
	
	Kill remainings of the DMI Resolver support code that got removed somewhere
	between 2.0 and 2.2.
	
	Signed-off-by: Geert Uytterhoeven <geert@linux-m68k.org>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<geert@linux-m68k.org>
	[PATCH] m68k: NULL vs. 0 cleanups
	
	A few more NULL vs. 0 cleanups, as detected by sparse.
	
	Signed-off-by: Geert Uytterhoeven <geert@linux-m68k.org>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<geert@linux-m68k.org>
	[PATCH] Amifb: use new amifb:off logic to enhance audio experience
	
	Amiga frame buffer: We used to have a local hack in fbmem.c to always call the
	fbdev setup() routines, even when an fbdev was explicitly disabled on the
	kernel command line (video=xxx:off).  This allowed amifb to suspend the
	monitor, but program the sync generator of the video controller in Denise/Lisa
	to a 31 kHz/70 Hz mode, increasing the maximum audio playback frequency.
	Thanks to the recently introduced fb_get_options() routine, we can kill the
	local hack and just use the return value of fb_get_options().
	
	Signed-off-by: Geert Uytterhoeven <geert@linux-m68k.org>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<baldrick@free.fr>
	[PATCH] firmware_class: avoid double free
	
	The error exit path in request_firmware frees the allocated struct firmware
	*firmware, which is good.  What is not so good is that the value of
	firmware has already been copied out to the caller as *firmware_p.  The
	risk is that the caller will pass this to release_firmware, a double free. 
	This is exactly what will happen if the caller copied the example code
	
	         if(request_firmware(&fw_entry, $FIRMWARE, device) == 0)
	                copy_fw_to_device(fw_entry->data, fw_entry->size);
	         release(fw_entry);
	
	from the firmware documentation.
	
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<olh@suse.de>
	[PATCH] remove scsi ioctl from udf/lowlevel.c
	
	I'm not sure why these defines and typedefs exists, the driver compiles
	fine without it.
	
	Signed-off-by: Olaf Hering <olh@suse.de>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<ed@il.fontys.nl>
	[PATCH] nfsd: Insecure port warning shows decimal IPv4 address
	
	print a couple of ipv4 addresses as dotted quads, not as hex.
	
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<yuasa@hh.iij4u.or.jp>
	[PATCH] mips: added missing definition and fixed typo
	
	This patch had added missing definition and had fixed typo for VRC4173.
	
	Cc: Ralf Baechle <ralf@linux-mips.org> 
	Signed-off-by: Yoichi Yuasa <yuasa@hh.iij4u.or.jp>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<rsa@us.ibm.com>
	[PATCH] hvc_console fix to prevent oops and late hangup and write operations
	
	This patch prevents execution of hvc_write() and hvc_hangup() after the tty
	layer has executed a final hvc_close() against a device.  This patch
	provides a better method than was previously used.  tty->driver_data is no
	longer invalidated so we'll no longer get oopses when the tty layer allows
	late hangup() and write() operations.
	
	- Removed silly tty->driver_data = NULL; from hvc_close which prevents
	  possible oops in hvc_write() and hvc_hangup() due to improperly acting
	  ldisc close ordering.
	
	- Added hp->count <= 0 check to hvc_write() and hvc_hangup() to prevent
	  execution of these function after hvc_close() has been invoked by the tty
	  layer.  Same tty ldisc issues as above are the reason.
	
	- Added some comments to clarify the situation.
	
	- Awaiting a forth coming patch from Alan Cox which should clean up the
	  close ordering and prevent the late hangup and write ops from happening.
	
	Signed-off-by: Ryan S. Arnold <rsa@us.ibm.com>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<aoki@sdl.hitachi.co.jp>
	[PATCH] vm thrashing control tuning
	
	This patch adds "swap_token_timeout" parameter in /proc/sys/vm.  The
	parameter means expired time of token.  Unit of the value is HZ, and the
	default value is the same as current SWAP_TOKEN_TIMEOUT (i.e.  HZ * 300).
	
	Signed-off-by: Hideo Aoki <aoki@sdl.hitachi.co.jp>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<aoki@sdl.hitachi.co.jp>
	[PATCH] proc.txt cleanup
	
	In Documentation/filesystems/proc.txt, explanation of /proc/meminfo is
	described in section 1.3 (IDE devices in /proc/ide).  I think that it
	should be described in section 1.2 (Kernel data).
	
	Signed-off-by: Hideo Aoki <aoki@sdl.hitachi.co.jp>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<colin@colino.net>
	[PATCH] Warning fix in drivers/macintosh/macio-adb.c
	
	This one fixes another unitialized var warning (which is harmless, but
	whatever).
	
	Signed-off-by: Colin Leroy <colin@colino.net>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<Matt_Domsch@dell.com>
	[PATCH] idefloppy: suppress media not present errors
	
	Below is a patch to suppress printing uninformative errors from
	ide-floppy.c in response to commands to floppy drives in which no media is
	present.
	
	Without this patch, commands sent to ide-floppy devices without media
	inserted cause error messages on the console (KERN_ERR level) such as:
	
	ide-floppy: ide: I/O error, pc = 0 key = 2, asc = 3a asq = 0
	ide-floppy: ide: I/O error, pc = 1b key = 2, asc = 3a asq = 0
	ide-floppy: ide: I/O error, pc = 23 key = 2, asc = 3a asq = 0
	ide-floppy: ide: I/O error, pc = 1e key = 2, asc = 3a asq = 0
	ide-floppy: ide: I/O error, pc = 1e key = 2, asc = 3a asq = 0
	
	Dell's Virtual Floppy (system management presents to the local system an
	IDE floppy device, which is actually a floppy device in a remote system
	connected over an IP link) exhibits this also, when connecting to a remote
	floppy drive with no media present.
	
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<Matt_Domsch@dell.com>
	[PATCH] modules: put srcversion checksum in each modinfo section
	
	Separate the module source and header checksum into a separate modinfo
	field srcversion.
	
	With CONFIG_MODULE_SRCVERSION_ALL=y, put srcversion into every module, not
	just those with MODULE_VERSION("something").
	
	Patch by Rusty Russell, trivial merging and testing by Matt Domsch
	
	Signed-off-by: Matt Domsch <Matt_Domsch@dell.com>
	Signed-off-by: Rusty Russell <rusty@rustcorp.com.au>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<juhl-lkml@dif.dk>
	[PATCH] __copy_to_user return value checks in i2o_config.c
	
	Signed-off-by: Jesper Juhl <juhl-lkml@dif.dk>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<akpm@osdl.org>
	[PATCH] vmalloc_to_page() preempt cleanup
	
	remove unneeded preempt_disable/enable.  pte_offset_map/unmap already does
	that.
	
	Signed-off-by: Ingo Molnar <mingo@elte.hu>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<pavel@ucw.cz>
	[PATCH] __init poisoning for i386
	
	Overwrite __init section so calls to __init functions from normal code
	are caught, reliably.
	
	(Plus a fix from Dave Hansen)
	
	Signed-off-by: Dave Hansen <haveblue@us.ibm.com>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<blaisorblade_spam@yahoo.it>
	[PATCH] use container_of() for rb_entry()
	
	Use, in the rb_entry definition, the container_of macro instead of
	reinventing the wheel; compared to using offset_of() as I did in the prev. 
	version, it has type safety checking.
	
	Signed-off-by: Paolo 'Blaisorblade' Giarrusso <blaisorblade_spam@yahoo.it>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<haveblue@us.ibm.com>
	[PATCH] remove weird pmd cast
	
	I don't know what this is trying to do.  It might be some kind of artifact
	from when get_pgd_slow() was removed.  
	
	The expanded expression with __pa() ends up looking something like this:
	
		(unsigned long)(u64)(u32)pmd-PAGE_OFFSET
	
	and that is just nutty because pmd is a pointer now, anyway.
	
	Attached patch removes the casts.
	
	Signed-off-by: Dave Hansen <haveblue@us.ibm.com>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<bunk@stusta.de>
	[PATCH] #include <asm/bitops.h> -> #include <linux/bitops.h>
	
	There's no reason to directly #include <asm/bitops.h> since it's
	available on all architectures and also included by
	#include <linux/bitops.h>.
	
	This patch changes #include <asm/bitops.h> to #include <linux/bitops.h>.
	
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<dino@in.ibm.com>
	[PATCH] ps shows wrong ppid
	
	/proc shows the wrong PID as parent in the following case
	
	Process A creates Threads 1 & 2 (using pthread_create) Thread 2 then forks
	and execs process B getppid() for Process B shows Process A (rightly) as
	parent, however /proc/B/status shows Thread 3 as PPid (incorrect).
	
	Signed-off-by: Dinakar Guniguntala <dino@in.ibm.com>
	Acked-by: Ingo Molnar <mingo@elte.hu>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<marcelo.tosatti@cyclades.com>
	[PATCH] Remove redundant AND from swp_type()
	
	There is a useless AND in swp_type() function.
	
	We just shifted right SWP_TYPE_SHIFT() bits the value from the swp_entry_t,
	and then we AND it with "(1 << 5) - 1" (which is a mask corresponding to
	the number of bits used by "type").
	
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<manfred@colorfullife.com>
	[PATCH] slab: reduce fragmentation due to kmem_cache_alloc_node
	
	Attached is a patch that fixes the fragmentation that Badri noticed with
	kmem_cache_alloc_node.
	
	kmem_cache_alloc_node tries to allocate memory from a given node. The
	current implementation contains two bugs:
	
	- the node aware code was used even for !CONFIG_NUMA systems.  Fix:
	  inline function that redefines kmem_cache_alloc_node as kmem_cache_alloc
	  for !CONFIG_NUMA.
	
	- the code always allocated a new slab for each new allocation.  This
	  caused severe fragmentation.  Fix: walk the slabp lists and search for a
	  matching page instead of allocating a new page.
	
	- the patch also adds a new statistics field for node-local allocs.  They
	  should be rare - the codepath is quite slow, especially compared to the
	  normal kmem_cache_alloc.
	
	Signed-Off-By: Manfred Spraul <manfred@colorfullife.com>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<neilb@cse.unsw.edu.au>
	[PATCH] md: convert %Lu to %llu in printk
	
	While %Lu works with gcc, %llu is the correct usage.
	
	Signed-off-by: Neil Brown <neilb@cse.unsw.edu.au>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<ed@il.fontys.nl>
	[PATCH] lockd: remove hardcoded maximum NLM cookie length
	
	At the moment, the NLM cookie length is fixed to 8 bytes, while 1024 is the
	theoretical maximum.  FreeBSD uses 16 bytes, Mac OS X uses 20 bytes. 
	Therefore we need to make the length dynamic (which I set to 32 bytes).
	
	This patch is based on an old patch for Linux 2.4.23-pre9, which I changed
	to patch properly (also added some stylish NIPQUAD fixes).
	
	From: Neil Brown <neilb@cse.unsw.edu.au>
	
	Further lockd tidyups.
	  - NIPQUAD everywhere that is appropriate
	  - use XDR_QUADLEN in more places as appropriate
	  - discard QUADLEN which is a lockd-specific version of XDR_QUADLEN
	
	Signed-off-by: Neil Brown <neilb@cse.unsw.edu.au>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<castet.matthieu@free.fr>
	[PATCH] bttv IRQ fix
	
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<macro@linux-mips.org>
	[PATCH] "console=" parameter ignored
	
	I've noticed that under specific circumstances the "console=" kernel
	parameter is ignored.  This happens when EARLY_PRINTK is enabled and the
	serial console is the only available.  In this case unregister_console()
	when called for the early console sets preferred_console back to -1
	replacing the value that was recorded by console_setup() -- the order of
	calls is as follows:
	
	1. register_console() -- for the early console,
	
	2. console_setup() -- recording the console index for the real console,
	
	3. unregister_console() -- for the early console, erasing the console
	   index recorded above,
	
	4. register_console() -- for the real console, picking up the first device
	   available, instead of the selected one.
	
	I've observed this problem with a DECstation system using ttyS3 -- its
	default console device from the firmware's point of view.
	
	The solution is to restore the setting of "console=" upon
	unregister_console().  This made a snapshot of 2.4.26 work for me.  I
	wasn't able to test the changes with 2.6 because DECstation drivers don't
	support it yet, but the code responsible for console selection appears
	functionally the same.  So I've concluded it needs the same change.  Here's
	a patch.
	
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<dean@arctic.org>
	[PATCH] transmeta efficeon support and cpuid update
	
	This patch adds efficeon as a cpu option, and makes a small update to the
	transmeta cpuid code.  (i wasn't sure if the various doc files are UTF-8...
	if they are, then the e should be a U-275 ;)
	
	The compile options may not be ideal, but they're probably close.  i used
	-march=pentium3, but -march=pentium4 would have been good enough too.
	
	The cpuid update teaches transmeta.c about the extended processor revision
	present in cpuid level 0x80860002...  the external documentation does not
	indicate how to break apart this field, and instructs only that the 32-bit
	value should be printed in hex (alas).
	
	Signed-off-by: dean gaudet <dean@arctic.org>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<kaos@ocs.com.au>
	[PATCH] reference_init fix
	
	Treat .pci_fixup entries the same as .init code/data.
	
	Signed-off-by: Keith Owens <kaos@ocs.com.au>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<bunk@stusta.de>
	[PATCH] fix block/cciss.c with PROC_FS=n
	
	kernel/built-in.o(.text+0x1d42b): In function `crash_create_proc_entry':
	: undefined reference to `proc_vmcore'
	
	Signed-off-by: Adrian Bunk <bunk@stusta.de>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<bunk@stusta.de>
	[PATCH] make CONFIG_PM_DEBUG depend on CONFIG_PM
	
	Signed-off-by: Chris Wright <chrisw@osdl.org>
	Signed-off-by: Adrian Bunk <bunk@stusta.de>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<armin@melware.de>
	[PATCH] Remove obsolete file Documentation/isdn/README.eicon
	
	The file
	
	   Documentation/isdn/README.eicon
	
	is outdated and obsolete in kernel 2.6.  This file includes description of
	the old Eicon ISDN driver in kernel 2.4, which was removed in 2.6.
	
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<kenneth.w.chen@intel.com>
	[PATCH] Enable config_schedstats for all arches
	
	Config option CONFIG_SCHEDSTATS is currently enabled via arch specific
	Kconfig.debug.  Only x86 and ppc arches has code to turn it on.  Why not
	put it in generic lib/Kconfig.debug so it is done once to enable everyone?
	
	Signed-off-by: Ken Chen <kenneth.w.chen@intel.com>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<jeffm@csh.rit.edu>
	[PATCH] reiserfs: support for REISERFS_UNSUPPORTED_OPT notation
	
	This patch adds a REISERFS_UNSUPPORTED_OPT flag to denote when a mount
	option is allowable, but is unsupported in the running configuration.  This
	allows the potential for the set of mount options to be consistent,
	regardless of what features the kernel is compiled with.
	
	Rather than failing the mount, a warning is issued and the mount succeeds.
	
	Signed-off-by: Jeff Mahoney <jeffm@novell.com>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<jeffm@csh.rit.edu>
	[PATCH] reiserfs: allow user_xattr and acl options to be ignored, with warning
	
	This patch uses the REISERFS_UNSUPPORTED_OPT flag to denote -o(no)acl, and
	-o(no)user_xattr as unsupported, but allowable, when support isn't built
	into the kernel.
	
	Signed-off-by: Jeff Mahoney <jeffm@novell.com>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<andros@thnk.citi.umich.edu>
	[PATCH] nfs4 lease: add a lock manager copy lock callback
	
	The following patches provide an interface to the lease subsystem in the
	current VFS locking code.  NFSv4 delegations and Samba op-locks share most
	architecture features.  The version 4 NFS server delegation implementation
	should use leases to co-ordinate behavior between local, Samba, and NFS
	access.
	
	
	The main design points are
	
	- Seperate the fcntl interface from the file_lock FL_LEASE processing in
	  fcntl_setlease, creating __setlease() called by fcntl_setlease()
	
	- Add new lock_manager callbacks to enable lease properties to be set,
	  leases to be broken, and leases to be cleaned up: with default callbacks
	  preserving the current fcntl_setlease properties.
	
	- Add a new interface, setlease() which also calls __setlease(), and
	  remove_lease() for kernel lease managers (e.g.  the v4 NFS server)
	
	
	This patch:
	
	Add a lock manager copy lock callback to locks_copy_lock() so that nfsd can
	set lease properties.
	
	Signed-off-by: Andy Adamson <andros@citi.umich.edu>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<andros@thnk.citi.umich.edu>
	[PATCH] nfs4 lease: add a lock manager release private callback
	
	Add a lock manager release private callback to locks_free_lock() for lock
	manger lease clean-up.
	
	Signed-off-by: Andy Adamson <andros@citi.umich.edu>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<andros@thnk.citi.umich.edu>
	[PATCH] nfs4 lease: add a lock manager break callback
	
	- Add a lock manager break callback to break_lease() for lock managers to
	  initiate breaking a lease.
	
	- Move the break_lease() kill_fasync() call to a default lock manager
	  fl_break callback
	
	Signed-off-by: Andy Adamson <andros@citi.umich.edu>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<andros@thnk.citi.umich.edu>
	[PATCH] nfs4 lease: aeparate the lease initialization code
	
	Separate the lease initialization code from lease_alloc().  set the default
	lock manager ops.
	
	Signed-off-by: Andy Adamson <andros@citi.umich.edu>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<andros@thnk.citi.umich.edu>
	[PATCH] nfs4 lease: move the f_delown processing
	
	Move the f_delown processing from lease_modify() into a new default lock
	manager fl_release_private callback.
	
	Signed-off-by: Andy Adamson <andros@citi.umich.edu>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<andros@thnk.citi.umich.edu>
	[PATCH] nfs4 lease: separate the lease processsing code
	
	nfsd will not have a file descriptor, nor an owner on the filp.  nfsd also
	will not use signals.  Seperate the lease processsing coe from
	fcntl_setlease() into a __setlease() call.
	
	Signed-off-by: Andy Adamson <andros@citi.umich.edu>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<andros@thnk.citi.umich.edu>
	[PATCH] nfs4 lease: use the inode i_writecount
	
	Use the inode i_writecount to test for handing out a F_RDLCK lease.
	
	Signed-off-by: Andy Adamson <andros@citi.umich.edu>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<andros@thnk.citi.umich.edu>
	[PATCH] nfs4 lease: export setlease
	
	Export setlease(), a direct interface to __setlease() used by nfsd
	
	Signed-off-by: Andy Adamson <andros@citi.umich.edu>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<andros@thnk.citi.umich.edu>
	[PATCH] nfs4 lease: export remove_lease
	
	Export remove_lease(), an interface to time_out_leases() with an
	fl_break_time in the past.  needed by nfsd
	
	Signed-off-by: Andy Adamson <andros@citi.umich.edu>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<andros@thnk.citi.umich.edu>
	[PATCH] nfs4 lease: add the new lock manager callbacks to the documentation
	
	Add the new lock manager callbacks to the documentation
	
	Signed-off-by: Andy Adamson <andros@citi.umich.edu>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<sct@redhat.com>
	[PATCH] ext3 directio block leak fix
	
	The orphan list holds inodes that need to be truncated on recovery.  In the
	O_DIRECT case, it's used if we extend the inode --- the truncate on recovery
	means we'll recover the newly-allocated disk blocks if we crash after the IO
	starts but before i_size is updated on disk.
	
	Now, the orphan list is *also* used to delete inodes that are unlinked but
	still-open.  Those get truncated but also deleted on recovery.
	
	The orphan list is held both in memory and on disk.  So the rules are that the
	inode can't be reclaimed while on the orphan list.  There are only two cases
	--- either the inode is actively being written(O_DIRECT) or truncated (in
	which case the inode is by definition not going to be reused), or it's
	unlinked but still open (again, non-reclaimable).
	
	But in the case where you're truncating or write(O_DIRECT)ing a file that is
	*ALSO* unlinked, there's a problem --- the final unlink would put the inode on
	the orphan list, but the write/truncate would try to add/remove it.  End
	result is that the inode disappears from the orphan list while it's still
	unlinked-but-in-use.
	
	That's just a leak-on-crash, it's not going to be detectable in normal use. 
	But it's still a bug, and the way we fix it is for direct-IO and truncate not
	to do the ext3_orphan_del if the file is unlinked (ie.  i_nlink==0).
	
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<kernel@linuxace.com>
	[PATCH] doc: scsihosts parameter no longer exists
	
	The scsihosts boot parameter was removed in 2.5.73, but references to it
	still exist in docs.  Cleanup below.
	
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<akpm@osdl.org>
	[PATCH] typhoon build fix
	
	Fix incorrect attempt to doubly-initialise the ethtool ops.
	
	Cc: <jgarzik@redhat.com>
	
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<bzolnier@trik.(none)>
	[ide] sg PIO for taskfile requests
	
	Use scatterlists for taskfile based PIO transfers
	instead of directly walking rq->[bio,cbio] lists.
	
	If CONFIG_IDE_TASKFILE_IO is defined
	this code will be used for fs requests.
	
	ide_pio_sector() is based on ata_pio_sector()
	from libata-core.c so kudos to Jeff.
	
	Signed-off-by: Bartlomiej Zolnierkiewicz <bzolnier@gmail.com>

<bzolnier@trik.(none)>
	[ide] sg PIO for fs requests
	
	Convert CONFIG_IDE_TASKFILE_IO=n code
	to use scatterlists for PIO transfers.
	
	Fixes longstanding 'data integrity on error'
	issue and makes barriers work with PIO.
	
	Signed-off-by: Bartlomiej Zolnierkiewicz <bzolnier@gmail.com>

<bzolnier@trik.(none)>
	[ide] ide-disk: unify PIO write/multiwrite code
	
	Merge multwrite_intr() into write_intr().
	
	The only change in functionality is that rq->errors is
	now also cleared for multiwrite PIO (if there is no error).
	
	Signed-off-by: Bartlomiej Zolnierkiewicz <bzolnier@gmail.com>

<bzolnier@trik.(none)>
	[ide] unify PIO code
	
	Use PIO code from ide-taskfile.c in ide-disk.c so:
	* drive status is checked after PIO read
	* request is failed if invalid data phase
	  is detected during PIO write
	
	Signed-off-by: Bartlomiej Zolnierkiewicz <bzolnier@gmail.com>

<hawkes@sgi.com>
	[IA64] top level scheduler domain for ia64
	
	Some have noticed that the overlapping sched domains code doesn't quite work
	as intended (it results in disjoint domains on some machines), and that a top
	level, machine spanning domain is needed.  This patch from John Hawkes adds
	it to the ia64 code.  This allows processes to run on all CPUs in large
	systems, though balancing is limited.  It should go to Linus soon now
	otherwise large systems will only have ~16p (depending on topology) usable by
	the scheduler.  I sanity checked it on a small system after rediffing John's
	original, and he's done some testing on very large systems.
	 
	 Nick, can you buy off on the sched.c change?  Alternatively, do you want to
	 send that fix separately John? Nick did indeed ACK this change, but it isn't
	 dependent on this ia64 specific part ... so it's going to be submitted
	 separately.
	  
	Signed-off-by: John Hawkes <hawkes@sgi.com>
	Signed-off-by: Jesse Barnes <jbarnes@sgi.com>
	Signed-off-by: Tony Luck <tony.luck@intel.com>

<kaber@coreworks.de>
	[NETFILTER]: Select source address for gateway in MASQUERADE
	
	Suggested by Herbert Xu <herbert@gondor.apana.org.au>
	
	Signed-off-by: Patrick McHardy <kaber@trash.net>

<jbarnes@sgi.com>
	[IA64] mca.c: sparse cleanup
	
	Looks like we were casting a value into a union and sparse doesn't like that.
	Why not just assign it directly to the appropriate field?
	 
	Signed-off-by: Jesse Barnes <jbarnes@sgi.com>
	Signed-off-by: Tony Luck <tony.luck@intel.com>

<jbarnes@sgi.com>
	[IA64] numa.c, discontig.c: sparse: use NULL, not 0
	
	Clean up a couple of places that were using 0 instead of NULL, which is the
	more proper value.
	 
	Signed-off-by: Jesse Barnes <jbarnes@sgi.com>
	Signed-off-by: Tony Luck <tony.luck@intel.com>

<pfg@sgi.com>
	[IA64] export sn_dma_mapping_error for libata
	
	Signed-off-by: Patrick Gefre <pfg@sgi.com>
	Signed-off-by: Tony Luck <tony.luck@intel.com>

<yasuyuki.kozakai@toshiba.co.jp>
	[NETFILTER]: Enable ip6t_rt.c to work without skb_linearize()
	
	Signed-off-by: Patrick McHardy <kaber@trash.net>
	Signed-off-by: Yasuyuki KOZAKAI <yasuyuki.kozakai@toshiba.co.jp>

<yasuyuki.kozakai@toshiba.co.jp>
	[NETFILTER]: Enable ip6t_multiport.c to work without skb_linearize()
	
	Signed-off-by: Yasuyuki KOZAKAI <yasuyuki.kozakai@toshiba.co.jp>
	Signed-off-by: Patrick McHardy <kaber@trash.net>

<rmk@flint.arm.linux.org.uk>
	[ARM] Add seqlocking to timers.
	
	Sometimes, it's useful to have locking.  Especially when we're
	talking about time keeping.
	
	It would appear that shemminger's patch of 5th February 2003
	completely missed updating _ANY_ ARM timer implementations and,
	because linux-arch didn't exist at the time, there appears to
	have been no notification to any architecture developer that
	maybe, just maybe, some work was required.
	
	One wonders how many other changes are in the kernel which
	architecture maintainers have missed.

<yasuyuki.kozakai@toshiba.co.jp>
	[NETFILTER]: Enable ip6t_frag.c to work without skb_linearize()
	
	Signed-off-by: Yasuyuki KOZAKAI <yasuyuki.kozakai@toshiba.co.jp>
	Signed-off-by: Patrick McHardy <kaber@trash.net>

<jbarnes@sgi.com>
	[IA64-SGI] snsc.c: snsc needs asm/sn/io.h
	
	The sn system controller driver needs asm/sn/io.h in order to build correctly
	(it was missing the numionodes declaration).
	 
	Signed-off-by: Jesse Barnes <jbarnes@sgi.com>
	Signed-off-by: Tony Luck <tony.luck@intel.com>

<pfg@sgi.com>
	[IA64-SGI] Mod to allow functions other than zero to use virtual channel 1.
	
	Signed-off-by: Patrick Gefre <pfg@sgi.com>
	Signed-off-by: Tony Luck <tony.luck@intel.com>

<jbarnes@sgi.com>
	[IA64] fix sba_iommu build
	
	sba_iommu.c needs to include linux/nodemask.h for node_online now.  Here's a
	patch to add it.
	 
	Signed-off-by: Jesse Barnes <jbarnes@sgi.com>
	Signed-off-by: Tony Luck <tony.luck@intel.com>

<jbarnes@sgi.com>
	[IA64-SGI] sparse cleanups & misc fixes for sn2
	
	This is a big patch mostly because I trimmed shub_mmr.h down from 17M to 11k
	or so.  It fixes a number of things sparse discovered and removes some dead
	code, fixes up some prototypes, etc.  Of note:
	 
	o sn_proc_fs.c was directly dereferencing user pointers, fixed
	o sn_hwperf.c was missing an include and was using asm-ia64 directly
	o the I/O routines were all missing proper sparse annotations
	o dead code in prominfo_proc.c has been removed
	o fix generic build by putting numionodes into asm/sn/io.h
	
	With this patch applied, the check build is pretty clean.  The sn_console bit
	depends on some of the other changes, so it's included here.
	
	Signed-off-by: Jesse Barnes <jbarnes@sgi.com>
	Signed-off-by: Tony Luck <tony.luck@intel.com>

<len.brown@intel.com>
	[ACPI] clarify #define ACPI_THERMAL_MODE_CRITICAL (Pavel Machek)

<tglx@linutronix.de>
	Shared Reed-Solomon ECC library
	
	The attached patch contains a shared Reed-Solomon Library analogous to
	the shared zlib.
	
	(N)AND FLASH is gaining popularity and there are a lot of ASIC/SoC/FPGA
	controllers around which implement hardware support for Reed-Solomon
	error correction. As usual they use different implementations
	(polynomials etc.). So it's obvious to use a shared library for the
	common tasks of error correction.
	
	A short scan through the kernel revealed that at least the ftape driver
	uses Reed-Solomon error correction. It could be easily converted to use
	the shared library code. 
	
	The encoder/decoder code is lifted from the GPL'd userspace RS-library
	written by Phil Karn. I modified/wrapped it to provide the different
	functions which we need in the MTD/NAND code.
	
	The library is tested in extenso under various MTD/NAND configurations.
	
	The lib should be usable for other purposes right out of the box.
	Adjustment for currently not implemented functionality is an easy task.
	
	I'm willing to take the maintainership of the library.
	
	Signed-Off-By: Thomas Gleixner <tglx@linutronix.de>
	Signed-Off-By: David Woodhouse <dwmw2@infradead.org>
	"No objections at all. Just keep the authorship notices." -- Phil Karn

<tglx@linutronix.de>
	Add DocBook documentation for MTD NAND drivers
	
	Signed-Off-By: Thomas Gleixner <tglx@linutronix.de>
	Signed-Off-By: David Woodhouse <dwmw2@infradead.org>

<tglx@linutronix.de>
	MTD updates for __iomem
	
	Signed-Off-By: Thomas Gleixner <tglx@linutronix.de>
	Signed-Off-By: David Woodhouse <dwmw2@infradead.org>

<greg@kroah.com>
	USB: update devices.txt with the proper USB minor number information.
	
	Signed-off-by: Greg Kroah-Hartman <greg@kroah.com>

<greg@kroah.com>
	USB: add phidgetkit driver.
	
	originally written by Sean Young <sean@mess.org> but with LED additions and
	cleanups from me.
	
	Signed-off-by: Greg Kroah-Hartman <greg@kroah.com>

<dwmw2@shinybook.infradead.org>
	MTD cmdlinepart: Allow partition definitions to be set from elsewhere
	
	... by making mtdpart_setup() non-static
	
	Patch from Juha Yrjl committed by Jarkko Lavinen.
	
	Signed-Off-By: David Woodhouse <dwmw2@infradead.org>

<greg@kroah.com>
	USB: remove unneeded checks in the usb-serial core.
	
	Signed-off-by: Greg Kroah-Hartman <greg@kroah.com>

<greg@kroah.com>
	USB: fix build error in the USB core if CONFIG_PROCFS is disabled 
	
	Signed-off-by: Greg Kroah-Hartman <greg@kroah.com>

<greg@kroah.com>
	USB: fix DoS in the visor driver by rate limiting sends.
	
	Signed-off-by: Greg Kroah-Hartman <greg@kroah.com>

<dwmw2@shinybook.infradead.org>
	MTD map driver update: Alchemy DB1xxx boards
	
	- Change Pete Popov's email address
	- Tglx's __iomem fixes
	- Include file cleanups
	
	Signed-Off-By: David Woodhouse <dwmw2@infradead.org>

<greg@kroah.com>
	PCI: use pci_dev_present() in irq.c check
	
	Signed-off-by: Greg Kroah-Hartman <greg@kroah.com>

<dwmw2@shinybook.infradead.org>
	MTD map driver update: ppc44x 'ebony' board
	
	- Update mporter email address
	- Include file fixups
	- Tglx's __iomem fixes
	
	Signed-Off-By: David Woodhouse <dwmw2@infradead.org>

<greg@kroah.com>
	kobject: add CONFIG_DEBUG_KOBJECT
	
	Signed-off-by: Greg Kroah-Hartman <greg@kroah.com>

<dwmw2@shinybook.infradead.org>
	MTD map access: Fix calculation of the number of longs in a bus access
	
	Patch from Ben Dooks <ben-mtd@fluff.org>
	Signed-Off-By: David Woodhouse <dwmw2@infradead.org>

<jbarnes@sgi.com>
	[IA64-SGI] more sparse I/O accessor fixes
	
	I forgot to add 'const volatile' to the I/O read/write functions in the last
	patch, and also forgot to update the _relaxed variants.  This patch fixes
	that by adding 'const volatile' to the sn2 specific read/write routines as
	well as the ia64 machine vector wrappers.
	 
	Signed-off-by: Jesse Barnes <jbarnes@sgi.com>
	Signed-off-by: Tony Luck <tony.luck@intel.com>

<tglx@linutronix.de>
	MTD char device access -- return data when ECC errors happen.
	
	This is sane, as the driver returns the real data and the return 
	value is for information of NAND aware filesystems. Userspace 
	access to raw NAND is usually restricted to debugging tools which 
	are aware of the NAND specific problems.
	
	Signed-Off-By: Thomas Gleixner <tglx@linutronix.de>
	Signed-Off-By: David Woodhouse <dwmw2@infradead.org>

<dwmw2@shinybook.infradead.org>
	New MTD map drivers.
	
	- Technology Systems TS-5500 board
	- Simtec BAST
	- IBM 440GX Ocotea
	
	Signed-Off-By: David Woodhouse <dwmw2@infradead.org>

<mdharm-usb@one-eyed-alien.net>
	[PATCH] USB Storage: Fix queuecommand() for disconnected devices
	
	Following the recommendation of James Bottomley (of SCSI fame), this patch
	changes the queuecommand() routine so that when a command is received for a
	disconnected device, instead of accepting the command and then ignoring it,
	we fail the command immediately with DID_NO_CONNECT.
	
	This fixes a timeout-abort-oops sequence that would occur when the
	higher-level drivers (mostly the CD driver) try to queue a SYNCHRONIZE
	CACHE command during scsi_remove_host().
	
	
	Signed-off-by: Alan Stern <stern@rowland.harvard.edu>
	Signed-off-by: Matthew Dharm <mdharm-usb@one-eyed-alien.net>
	Signed-off-by: Greg Kroah-Hartman <greg@kroah.com>
	
	
	===== drivers/usb/storage/scsiglue.c 1.84 vs edited =====

<stern@rowland.harvard.edu>
	[PATCH] usbcore: drop reference to bus on allocation error
	
	A recent patch introduced this reference counting leak.
	
	
	Signed-off-by: Alan Stern <stern@rowland.harvard.edu>
	Signed-off-by: Greg Kroah-Hartman <greg@kroah.com>
	
	
	===== drivers/usb/core/usb.c 1.293 vs edited =====

<luca.risolia@studio.unibo.it>
	[PATCH] USB: W996[87]CF driver updates
	
	Small W996[87]CF documentation updates.
	
	Signed-off-by: Luca Risolia <luca.risolia@studio.unibo.it>

<philippe.bertin@pandora.be>
	[PATCH] USB: Superfluous statement in usb.c

<rco3@2005dauphin.org>
	[PATCH] USB: PL2303 - PharosGPS patch
	
	This patch adds recognition/support for the PharosGPS puck, as included with
	Microsoft's Streets and Trips package.  The device has an inline
	USB-to-serial converter which functions as a PL2303 but with different
	VENDOR_ID and PRODUCT_ID, and so the PL2303 driver is modified to recognize
	this additional device.
	
	Signed-off by: Robert C. Olsen, III [pl2303@2005dauphin.org]
	Signed-off-by: Greg Kroah-Hartman <greg@kroah.com>

<zaitcev@redhat.com>
	[PATCH] USB: usblp BKL removal
	
	the appended patch is not in yet, what gives? I sent it to Marcelo with
	an understanding that it would be in Linus tree any day now. It was a couple
	of months ago. It's not just BKL witchhunt either. I remember that it fixed
	an oops, although I do not remember the precise scenario by now (it had
	something to do with a race between ->release and ->disconnect).
	
	
	From: Pete Zaitcev <zaitcev@redhat.com>
	Signed-off-by: Greg Kroah-Hartman <greg@kroah.com>

<lcapitulino@conectiva.com.br>
	[PATCH] USB: Module version info for CyberJack.
	
	 Add module version information for drivers/usb/serial/cyberjack.c.
	
	
	Signed-off-by: Luiz Capitulino <lcapitulino@conectiva.com.br>
	Signed-off-by: Greg Kroah-Hartman <greg@kroah.com>

<lcapitulino@conectiva.com.br>
	[PATCH] USB: Module version info for PL2303.
	
	 Add module version information for usb/serial/pl2303.c.
	
	
	Signed-off-by: Luiz Capitulino <lcapitulino@conectiva.com.br>
	Signed-off-by: Greg Kroah-Hartman <greg@kroah.com>

<lcapitulino@conectiva.com.br>
	[PATCH] USB: Module version info for Belkin_sa.
	
	 Add module version information for usb/serial/belkin_sa.c.
	
	
	Signed-off-by: Luiz Capitulino <lcapitulino@conectiva.com.br>
	Signed-off-by: Greg Kroah-Hartman <greg@kroah.com>

<dwmw2@shinybook.infradead.org>
	MTD: NOR flash chip driver updates
	
	Mostly from Eric Biederman for supporting BIOS flash.
	
	    - Move support firmware hub style lock and unlock into fhw_lock.h (from cfi_cmdset_0002)
	    - Move cfi_varsize_frob into cfi_util from cfi_cmdset_0001.c and cfi_cmdset_0002.c
	    - reduce gen_probe probe failuers to a debug level message
	    - Modify cfi_fixup to take a struct mtd_info instead of a struct map_info
	      So that the fixup routines can modify the mtd functions.
	    - Modify cfi_cmdset_0001() to allocate and initialize the mtd structure
	      before calling cfi_fixup.
	    - Modify cfi_cmdset_0002() to allocate and initialize the mtd structure
	      before calling cfi_fixup.
	    - Refactor the hard coded fixups in cfi_cmdset_0001 and cfi_cmdset_0002
	      so the improved cfi_fixup infrastructure.
	    - Rewrote amd76xrom and ichxrom.
	      They now report their starting physical address in their name.
	      They now both handle multiple bankwidth configurations
	      They both can create multipe mtd devices.
	      They both now assume the rom windows are properly opened by the BIOS
	       or whatever runs previous to them.
	      Their code is now synchromized so it is almost identical,
	         and could be a starting point for a x86_rom_probe.
	
	Signed-Off-By: David Woodhouse <dwmw2@infradead.org>

<lkml@lievin.net>
	[PATCH] USB: tiglusb.c: add direct USB support on some new TI handhelds
	
	I have extended my driver to add support of the embedded USB port provided by
	some new Texas Instruments' handhelds. Things are the same except for the
	maximum packet size.
	
	Description: add support of the USB port embedded on some new TI handhelds (TI84+ and TI89 Titanium).
	
	Thanks, Romain.
	
	Signed-off-by: Romain Lievin <lkml@lievin.net>
	Signed-off-by: Greg Kroah-Hartman <greg@kroah.com>

<david-b@pacbell.net>
	[PATCH] USB: usb hub descriptor fetch needs retries
	
	Some of the recent changes to change how descriptors are read have managed
	to confuse one USB keyboard.  It recovers OK with a few retries though.
	
	Signed-off-by: David Brownell <dbrownell@users.sourceforge.net>
	Signed-off-by: Greg Kroah-Hartman <greg@kroah.com>

<david-b@pacbell.net>
	[PATCH] USB: usb suspend support for hid-core
	
	Basic HID driver support for USB suspend/resume.  At least one keyboard
	works OK as a remote wakeup source ... unless you write the sysfs
	power/state attribute using that USB keyboard, in which case the input
	subsystem reports an endless stream of newlines!  :)
	
	Someone still needs to implement some configurable timer to support the
	"suspend idle mice/keyboards/..." policy for devices that can issue
	wakeup events.  In conjunction with autosuspend policies in hub and
	HCD (UHCI) code, that could allegedly save 2W of power by enabling the
	C3 state on Centrino laptops that use USB mice.
	
	Signed-off-by: David Brownell <dbrownell@users.sourceforge.net>
	Signed-off-by: Greg Kroah-Hartman <greg@kroah.com>

<davem@nuts.davemloft.net>
	[NET]: TSO requires SG, enforce this at device registry.
	
	Signed-off-by: David S. Miller <davem@davemloft.net>

<dwmw2@shinybook.infradead.org>
	MTD translation layer helper: set PF_NOFREEZE to allow sleep
	
	Patch from Todd Poynor
	
	Signed-Off-By: David Woodhouse <dwmw2@infradead.org>

<tglx@linutronix.de>
	MTD: M-Systems DiskOnChip translation layer (NFTL): fix unused variable.
	
	Signed-Off-By: Thomas Gleixner <tglx@linutronix.de>
	Signed-Off-By: David Woodhouse <dwmw2@infradead.org>

<dwmw2@shinybook.infradead.org>
	MTD userspace ABI: fix userspace compilation w.r.t. __user
	
	Signed-Off-By: David Woodhouse <dwmw2@infradead.org>

<davem@nuts.davemloft.net>
	[SPARC64]: Make iomap.o obj-y instead of lib-y for module exports.
	
	Signed-off-by: David S. Miller <davem@davemloft.net>

<tglx@linutronix.de>
	MTD: NAND flash driver updates.
	
	 - Use new RS library for ECC
	 - Add support for new NAND flash chips
	 - New board support:
	   - iPAQ H1910
	   - Renesas AG-AND devel board
	   - Simtec S3C210 
	 - Support for shared controllers on multiple chips.
	
	Signed-Off-By: Thomas Gleixner <tglx@linutronix.de>
	Signed-Off-By: David Woodhouse <dwmw2@infradead.org>

<shemminger@osdl.org>
	[PATCH] kaweth: use alloc_etherdev to allocate device private
	
	Change other usb network driver to use alloc_etherdev to allocate the
	private data structure. And use netdev_priv to find it.
	
	Signed-off-by: Stephen Hemminger <shemminger@osdl.org>
	Signed-off-by: Oliver Neukum <oliver@neukum.name>
	Signed-off-by: Greg Kroah-Hartman <greg@kroah.com>

<shemminger@osdl.org>
	[PATCH] usbnet: use alloc_etherdev to allocate private data
	
	In order for network device lifetime stuff to work properly, it is necessary
	for devices to allocate private data as part of alloc_etherdev.
	Also, netdev_priv() is improvement over dereferencing netdev->priv
	
	Signed-off-by: Stephen Hemminger <shemminger@osdl.org>
	Signed-off-by: Greg Kroah-Hartman <greg@kroah.com>

<stern@rowland.harvard.edu>
	[PATCH] UHCI: No bandwidth reclamation during enumeration
	
	A few devices prefer not to have full-speed bandwidth reclamation turned
	on while they are being enumerated.  In particular this seems to be true
	for the USB Bluetooth adapters built in to some laptop models (used for
	remote keyboards).  This patch alters the UHCI driver so that control URBs
	for devices still in the USB_STATE_DEFAULT state will be placed on the
	low-speed queue rather than the full-speed queue.  Since the low-speed
	queue isn't subject to bandwidth reclamation the devices will work
	properly.  The negative impact on other devices is minimal; the process of
	device initialization will be slowed down by a few milliseconds.
	
	
	
	Signed-off-by: Alan Stern <stern@rowland.harvard.edu>
	Signed-off-by: Greg Kroah-Hartman <greg@kroah.com>

<dale@farnsworth.org>
	[PATCH] USB: USB fixes for non-cache-coherent processors
	
	I posted this before, but didn't see any discussion.
	
	This patch fixes a couple of places where the usb subsystem
	DMAs to/from local (stack) variables.  This doesn't work on
	non-cache-coherent processors.  I'm testing on PPC 4xx systems.
	
	Signed-off-by: Dale Farnsworth <dale@farnsworth.org>
	Signed-off-by: Greg Kroah-Hartman <greg@kroah.com>

<davem@nuts.davemloft.net>
	[IEEE1394]: ohci1394.c/pcylynx.c need asm/irq.h
	
	Signed-off-by: David S. Miller <davem@davemloft.net>

<david-b@pacbell.net>
	[PATCH] USB: usbnet patch (new ax8817x device)
	
	This patch enables usage of another USB2 100BASE-T adapter.
	http://www.corega.co.jp/product/list/lanadp/feusb2tx.htm
	
	From:          Naoki Shibata <zupae234@yahoo.co.jp>
	Signed-off-by: David Brownell <dbrownell@users.sourceforge.net>
	Signed-off-by: Greg Kroah-Hartman <greg@kroah.com>

<shemminger@osdl.org>
	[PATCH] USB kaweth: use alloc_etherdev to allocate device private data - fix
	
	Goof found by compile warning.
	
	
	From: Stephen Hemminger <shemminger@osdl.org>
	Signed-off-by: Greg Kroah-Hartman <greg@kroah.com>

<davem@nuts.davemloft.net>
	[SPARC64]: Update defconfig.
	
	Signed-off-by: David S. Miller <davem@davemloft.net>

<stern@rowland.harvard.edu>
	[PATCH] USB Gadget: Use proper BCD values
	
	This updates an earlier patch that added bcdDevice values for a new
	USB peripheral controller.  The values weren't valid BCD numbers.
	
	
	
	Signed-off-by: Alan Stern <stern@rowland.harvard.edu>
	Signed-off-by: Greg Kroah-Hartman <greg@kroah.com>

<davem@nuts.davemloft.net>
	[NET]: Uninline netif_rx_ni().
	
	It expands to a lot of code when SMP or PREEMPT is
	enabled.
	
	Signed-off-by: David S. Miller <davem@davemloft.net>

<akpm@osdl.org>
	[PATCH] v4l: missing bits
	
	Missing parts of the v4l update
	
	Cc: Gerd Knorr <kraxel@bytesex.org>
	
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<akpm@osdl.org>
	[PATCH] i2o: missing bits from merge
	
	A couple of functions got themselves lost.
	
	cc: <Markus.Lidel@shadowconnect.com>
	
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<dwmw2@shinybook.infradead.org>
	JFFS2 updates
	
	 - Reduce memory use by merging adjacent obsolete raw_node_refs
	 - Error handling fixes
	 - Respect kmalloc size limit in scan
	 - NAND ECC updates
	
	Signed-Off-By: David Woodhouse <dwmw2@infradead.org>

<viro@parcelfarce.linux.theplanet.co.uk>
	[PATCH] moxa iomem annotations
	
	Signed-off-by: Al Viro <viro@parcelfarce.linux.theplanet.co.uk>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<viro@parcelfarce.linux.theplanet.co.uk>
	[PATCH] sparc32 kconfig fixes
	
		a) CONFIG_VT should set CONFIG_INPUT
		b) parport_pc and serial/8250 are broken for sparc32 same as for
	sparc64
	
	Signed-off-by: Al Viro <viro@parcelfarce.linux.theplanet.co.uk>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<viro@parcelfarce.linux.theplanet.co.uk>
	[PATCH] if_ppp.h __user annotation
	
	annotated ioctl structure
	
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<viro@parcelfarce.linux.theplanet.co.uk>
	[PATCH] sx.c iomem annotations and fixes
	
	a bunch of missing readb() and check of 64Kb alignment of physical address
	done on remapped one.
	
	Signed-off-by: Al Viro <viro@parcelfarce.linux.theplanet.co.uk>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<viro@parcelfarce.linux.theplanet.co.uk>
	[PATCH] skystar2 iomem annotations
	
	Signed-off-by: Al Viro <viro@parcelfarce.linux.theplanet.co.uk>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<viro@parcelfarce.linux.theplanet.co.uk>
	[PATCH] kyro iomem annotations
	
	Signed-off-by: Al Viro <viro@parcelfarce.linux.theplanet.co.uk>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<viro@parcelfarce.linux.theplanet.co.uk>
	[PATCH] teles{0,pci} iomem annotations
	
	Signed-off-by: Al Viro <viro@parcelfarce.linux.theplanet.co.uk>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<viro@parcelfarce.linux.theplanet.co.uk>
	[PATCH] isurf iomem annotations
	
	Signed-off-by: Al Viro <viro@parcelfarce.linux.theplanet.co.uk>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<viro@parcelfarce.linux.theplanet.co.uk>
	[PATCH] ipr iomem annotations
	
		Annotated.  Original reused the structure that contained pointers into
	remapped iomem for storing offsets in such area, so we need to split that
	beast.
	
	Signed-off-by: Al Viro <viro@parcelfarce.linux.theplanet.co.uk>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<viro@parcelfarce.linux.theplanet.co.uk>
	[PATCH] ips iomem annotations
	
	Signed-off-by: Al Viro <viro@parcelfarce.linux.theplanet.co.uk>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<viro@parcelfarce.linux.theplanet.co.uk>
	[PATCH] megaraid iomem annotations
	
	Signed-off-by: Al Viro <viro@parcelfarce.linux.theplanet.co.uk>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<viro@parcelfarce.linux.theplanet.co.uk>
	[PATCH] nsp32 iomem annotations
	
	Signed-off-by: Al Viro <viro@parcelfarce.linux.theplanet.co.uk>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<viro@parcelfarce.linux.theplanet.co.uk>
	[PATCH] aac7xxx iomem annotations
	
	aic7xxx annotations - trivial part
	
	Signed-off-by: Al Viro <viro@parcelfarce.linux.theplanet.co.uk>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<viro@parcelfarce.linux.theplanet.co.uk>
	[PATCH] ioremap cleanups in aic7xxx
	
		ioremap() is capable of dealing with addresses that are not
	page-aligned; no need to duplicate that in driver.
	
	Signed-off-by: Al Viro <viro@parcelfarce.linux.theplanet.co.uk>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<viro@parcelfarce.linux.theplanet.co.uk>
	[PATCH] qla1820 iomem annotations
	
	Signed-off-by: Al Viro <viro@parcelfarce.linux.theplanet.co.uk>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<torvalds@ppc970.osdl.org>
	Fix posix timer direct user space access
	
	This makes us do the proper copy_to_user() for the new
	posix timers code.
	
	Acked by Christoph Lameter <clameter@sgi.com>.

<rddunlap@osdl.org>
	[TG3]: tg3_nvram_read_using_eeprom cannot be __init.
	
	Signed-off-by: Randy Dunlap <rddunlap@osdl.org>
	Signed-off-by: David S. Miller <davem@davemloft.net>

<kaber@coreworks.de>
	[IPV6]: Fix netdevice/inet6_dev reference leaks in ip6_route_add error paths
	
	Signed-off-by: Patrick McHardy <kaber@trash.net>
	Signed-off-by: Hideaki YOSHIFUJI <yoshfuji@linux-ipv6.org>
	Signed-off-by: David S. Miller <davem@davemloft.net>

<linville@tuxdriver.com>
	[TG3]: Add MODULE_VERSION.
	
	Signed-off-by: John W. Linville <linville@tuxdriver.com>
	Signed-off-by: David S. Miller <davem@davemloft.net>

<linville@tuxdriver.com>
	[B44]: Add MODULE_VERSION.
	
	Signed-off-by: John W. Linville <linville@tuxdriver.com>
	Signed-off-by: David S. Miller <davem@davemloft.net>

<davem@nuts.davemloft.net>
	[TG3]: Update driver version and reldate.
	
	Signed-off-by: David S. Miller <davem@davemloft.net>

<laforge@netfilter.org>
	[NETFILTER]: Add iptables CONNMARK match+target
	
	This is the first patch, adding something similar like nfmark, but on a
	per-conntrack (as opposed to per-skb) level.  Very useful especially for
	asymmatric routing in combination with MASQUERADE, as often found on
	home DSL setups with dymamic IP address that also have e.g. a tunnel
	device with static IP.
	
	
	Signed-off-by: Henrik Nordstrom <hno@marasystems.com>
	Signed-off-by: Harald Welte <laforge@netfilter.org>
	Signed-off-by: David S. Miller <davem@davemloft.net>

<davem@nuts.davemloft.net>
	[TCP]: Add total num retransmits accounting.
	
	Signed-off-by: David S. Miller <davem@davemloft.net>

<laforge@netfilter.org>
	[NETFILTER]: Add iptables hashlimit match
	
	It was previously known as dstlimit, but has now
	been generalized one step further.
	
	Signed-off-by: Harald Welte <laforge@netfilter.org>
	Signed-off-by: David S. Miller <davem@davemloft.net>

<davem@nuts.davemloft.net>
	[NET]: In netif_rx_ni, put netif_rx call inside preempt-disable.
	
	Noticed by Herbert Xu.
	
	Signed-off-by: David S. Miller <davem@davemloft.net>

<herbert@gondor.apana.org.au>
	[XFRM]: Make {__,}xfrm_policy_check behave identically wrt. empty policy lists.
	
	Signed-off-by: Herbert Xu <herbert@gondor.apana.org.au>
	Signed-off-by: David S. Miller <davem@davemloft.net>

<kaber@coreworks.de>
	[XFRM]: Apply policy checks to packets with a secpath when the policy list is empty
	
	Signed-off-by: Patrick McHardy <kaber@trash.net>
	Signed-off-by: David S. Miller <davem@davemloft.net>

<herbert@gondor.apana.org.au>
	[XFRM]: Fix policy update bug when increasing priority of last policy.
	
	Based upon a patch by Patrick McHardy.
	
	Signed-off-by: Herbert Xu <herbert@gondor.apana.org.au>
	Signed-off-by: David S. Miller <davem@davemloft.net>

<chas@cmf.nrl.navy.mil>
	[ATM]: use RCV_SHUTDOWN to exit skb_recv_datagram()
	
	Signed-off-by: David S. Miller <davem@davemloft.net>

<chas@cmf.nrl.navy.mil>
	[ATM]: point to multipoint signalling (from ekinzie@cmf.nrl.navy.mil)
	
	Signed-off-by: David S. Miller <davem@davemloft.net>

<kaber@coreworks.de>
	[PKT_SCHED]: Fix netem qlen accounting.
	
	Signed-off-by: Patrick McHardy <kaber@trash.net>
	Signed-off-by: David S. Miller <davem@davemloft.net>

<shemminger@osdl.org>
	[NET]: dst: use const in accessors
	
	Signed-off-by: Stephen Hemminger <shemminger@osdl.org>
	Signed-off-by: David S. Miller <davem@davemloft.net>

<shemminger@osdl.org>
	[TCP]: use const in tcp.h
	
	Signed-off-by: Stephen Hemminger <shemminger@osdl.org>
	Signed-off-by: David S. Miller <davem@davemloft.net>

<kaber@coreworks.de>
	[IPV4]: Fix inet6_dev reference leak in ndisc_dst_alloc error path.
	
	Signed-off-by: Patrick McHardy <kaber@trash.net>
	Signed-off-by: David S. Miller <davem@davemloft.net>

<ak@suse.de>
	[ATALK]: Add appletalk 32-bit ioctl emulation.
	
	From: Helmut Tschemernjak <helmut@helios.de>
	
	Signed-off-by: Andi Kleen <ak@suse.de>
	Signed-off-by: David S. Miller <davem@davemloft.net>

<akpm@osdl.org>
	[NETFILTER]: Avoid warning on CONNTRACK_STAT_INC in death_by_timeout()
	
	Module removal can call death_by_timeout() manually, which isn't in softirq
	context, so the CONNTRACK_STAT_INC() call there (which assumes preempt
	disabled) can give a warning.  Of course, the warning here is spurious, but
	the simplest workaround is to call CONNTRACK_STAT_INC() inside the lock.
	
	Signed-off-by: Rusty Russell <rusty@rustcorp.com.au>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: David S. Miller <davem@davemloft.net>

<rddunlap@osdl.org>
	MTD: dilnetpc: use %p for ptr printk arg.
	
	Use %p to print a pointer, so that its length doesn't matter
	and so that gcc won't complain.
	
	drivers/mtd/maps/dilnetpc.c:416: warning: long unsigned int format, pointer arg (arg 2)
	
	Signed-off-by: Randy Dunlap <rddunlap@osdl.org>
	Signed-off-by: David Woodhouse <dwmw2@infradead.org>

<aia21@cantab.net>
	NTFS: Improve error handling in fs/ntfs/inode.c::ntfs_truncate().
	
	Signed-off-by: Anton Altaparmakov <aia21@cantab.net>

<bzolnier@trik.(none)>
	[ide] remove broken pdc4030 driver
	
	Sigh, I broke it by accident 16 months ago and nobody has noticed
	(I suspect that it was non-functional even earlier).
	
	Additionally, this driver:
	* should be converted to use scatterlists
	* has verbose debugging enabled by default
	* needs hacks all over IDE code
	* is guilty of crimes against ide_hwifs[]
	
	Just remove it for now.
	
	Signed-off-by: Bartlomiej Zolnierkiewicz <bzolnier@gmail.com>

<torvalds@evo.osdl.org>
	Update tty layer to not mix kernel and user pointers.
	
	Instead, tty_io.c will always copy user space data to
	kernel space, leaving the drivers to worry only about
	normal kernel buffers.
	
	No more "from_user" flag, and having the user copy in
	each driver.
	
	This cleans up the code and also fixes a number of
	locking bugs.

<aoki@sdl.hitachi.co.jp>
	[PATCH] vm thrashing control tuning CONFIG_SWAP=n build fix
	
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<mporter@kernel.crashing.org>
	[PATCH] ppc32: remove bogus PPC44x prefetch workaround
	
	This patch removes the bogus workaround for dcache prefetch beyond the end
	of the physical memory.
	
	Signed-off-by: Eugene Surovegin <ebs@ebshome.net>
	Signed-off-by: Matt Porter <mporter@kernel.crashing.org>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<roland@topspin.com>
	[PATCH] ppc: fix build with O=$(output_dir)
	
	Recent changes to arch/ppc/boot/lib/Makefile cause
	
	      CC      arch/ppc/boot/lib/../../../../lib/zlib_inflate/infblock.o
	    Assembler messages:
	    FATAL: can't create arch/ppc/boot/lib/../../../../lib/zlib_inflate/infblock.o: No such file or directory
	
	when building a ppc kernel using O=$(output_dir) with CONFIG_ZLIB_INFLATE=n,
	because the $(output_dir)/lib/zlib_inflate directory doesn't get created.
	
	This patch, which makes arch/ppc/boot/lib/Makefile create the
	directory if needed, is one fix for the problem.
	
	Signed-off-by: Roland Dreier <roland@topspin.com>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<mporter@kernel.crashing.org>
	[PATCH] ppc32: fix ibm44x_common.c compile
	
	Fix ibm44x_common.c compile.
	
	Signed-off-by: Eugene Surovegin <ebs@ebshome.net>
	Signed-off-by: Matt Porter <mporter@kernel.crashing.org>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<sfr@canb.auug.org.au>
	[PATCH] ppc64: iSeries compile broken in 2.6.9-bk3
	
	One of the iSeries specific files used HZ without including linux/param.h
	and previously got away with it.
	
	Signed-off-by: Stephen Rothwell <sfr@canb.auug.org.au>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<paulus@samba.org>
	[PATCH] ppc64: fix XICS startup function to enable as well
	
	When the generic IRQ patch went in, it changed the behaviour of setup_irq
	(compared to the previous ppc64 version) in that we now don't call the
	handler's enable function if it has a startup function.  The XICS interrupt
	controller has a startup function, and so we weren't getting any interrupts
	through the XICS because they never got enabled.  This patch adds a call to
	xics_enable_irq to xics_startup and fixes the problem.
	
	Signed-off-by: Paul Mackerras <paulus@samba.org>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<olof@austin.ibm.com>
	[PATCH] ppc64: fix CPU numa init code thinkos
	
	There seems to have been a couple of thinkos in the NUMA init code, in
	particular in find_cpu_node():
	
	* Property size returned is in bytes, not words
	* Off-by-one error in loop iteration
	
	Signed-off-by: Nathan Lynch <nathanl@austin.ibm.com>
	Signed-off-by: Olof Johansson <olof@austin.ibm.com>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<werner@almesberger.net>
	[PATCH] x86_64: no TIOCSBRK/TIOCCBRK in ia32 emulation
	
	In ia32 emulation, the amd64 kernel refuses the ioctls TIOCSBRK and
	TIOCCBRK with EINVAL.  I've attached a patch that adds them to the
	compatibility list.
	
	Since all architectures have these ioctls ("m68knommu" inherits them from
	"m68k", "um" from its host) and use the same code, I think adding them to
	compat_ioctl.h is the correct choice (as opposed to adding them to
	arch/x86_64/ia32/ia32_ioctl.c).
	
	Signed-off-by: Werner Almesberger <werner@almesberger.net>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<takata@linux-m32r.org>
	[PATCH] m32r: update SIO driver to use module_param()
	
	Here is a patch for M32R SIO driver, which replaces deprecated 
	MODULE_PARAM() with modern module_param().
	
		* drivers/serial/m32r_sio.c:
		- Replace MODULE_PARAM() with module_param().
		- Fix a typo: UARRT_RSA_BASE --> UART_RSA_BASE.
	
	Signed-off-by: Hirokazu Takata <takata@linux-m32r.org>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<rddunlap@osdl.org>
	[PATCH] saa7134: discarded reference
	
	Error: ./drivers/media/video/saa7134/saa7134-core.o .data refers to 0000000000000028 R_X86_64_64       .exit.text
	
	Signed-off-by: Randy Dunlap <rddunlap@osdl.org>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<rddunlap@osdl.org>
	[PATCH] bt878: discarded reference
	
	Error: ./drivers/media/dvb/bt8xx/bt878.o .data refers to 0000000000000048 R_X86_64_64       .exit.text
	
	Signed-off-by: Randy Dunlap <rddunlap@osdl.org>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<rddunlap@osdl.org>
	[PATCH] cx88: discarded reference
	
	Error: ./drivers/media/video/cx88/cx88-video.o .data refers to 0000000000000b28 R_X86_64_64       .exit.text
	
	Signed-off-by: Randy Dunlap <rddunlap@osdl.org>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<apw@shadowen.org>
	[PATCH] vm_dirty_ratio initialisation fix
	
	When a system has a very large imbalance of overall memory size to
	ZONE_NORMAL (for example when large amounts of numa remap space are in use)
	page_writeback_init() may incorrectly set vm_dirty_ratio and
	dirty_background_ratio to zero; leading to divide by zero errors elsewhere.
	This patch bounds these at 1%.
	
	Signed-off-by: Andy Whitcroft <apw@shadowen.org>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<s.esser@e-matters.de>
	[PATCH] smbfs protocol fixes
	
	From: <Urban.Widmark@enlight.net>
	
	The memset is because it was previously possible to send always the same CIFS
	fragment and use this to increase the data counters.  When the data counter
	"exceeds" the amount of bytes expected this will return the buffer only
	partially initialised...  With findfirst etc requests this should allow
	leaking kernel memory content.
	
	The other thing is that the data is only returned when data_tot and parm_tot
	both "exceed" the expected values.  Previously it was possible to create a
	sequence of CIFS fragments that allowed exceeding the counters.  The calling
	functions then would believe they received a number of bytes that does not fit
	into the allocated buffer.
	
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<dino@in.ibm.com>
	[PATCH] stat shows wrong ppid
	
	One more place in fs/proc/array.c where ppid is wrong, which I missed in my
	previous mail to lkml.
	
	Signed-off-by: Dinakar Guniguntala <dino@in.ibm.com>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<yuasa@hh.iij4u.or.jp>
	[PATCH] mips: fixed MIPS Makefile
	
	The MIPS Makefile was changed so that the offset of data section may not be
	dependent on a specific machine header file.
	
	Signed-off-by: Yoichi Yuasa <yuasa@hh.iij4u.or.jp>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<bunk@stusta.de>
	[PATCH] Another ISA PnP modem (USR0009)
	
	Below is a patch from Denis Zaitsev <zzz@anda.ru> with the following two
	adjustments:
	
	- applies with -p1 (not -p0)
	
	- USRobotics -> U.S. Robotics (consistent with the rest of the entries)
	
	Signed-off-by: Adrian Bunk <bunk@stusta.de>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<paulkf@microgate.com>
	[PATCH] ppp: terminate connection on hangup
	
	I reviewed, patched, and tested ppp_async.c to implement
	ldisc->hangup().  This correctly terminates the PPP connection on
	hangup.
	
	Paul Mackerras already did an excellent job of ensuring safe shutdown
	and I/O completion in ldisc->close so the change is trivial: just add
	the ldisc->hangup and call the existing close routine.
	
	Cc: Alan Cox <alan@lxorguk.ukuu.org.uk>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<paulkf@microgate.com>
	[PATCH] ppp: disconnect on hangup (synctty)
	
	Here is the hangup implementation for ppp_synctty.c (same as patch
	previously for ppp_asynctty.c)
	
	Cc: Alan Cox <alan@lxorguk.ukuu.org.uk>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<david-b@pacbell.net>
	[PATCH] USB: goku_udc sparse updates
	
	This is a bunch of "sparse" fixes for goku_udc.  One of these might be
	an issue on some systems for code that explicitly halts IN endpoints
	(like file_storage) if normal memory access doesn't work for PCI.
	
	Signed-off-by: David Brownell <dbrownell@users.sourceforge.net>
	Signed-off-by: Greg Kroah-Hartman <greg@kroah.com>

<david-b@pacbell.net>
	[PATCH] USB: usb/hcd kconfig updates
	
	This updates the dependencies of the HCDs and host-side USB so that:
	
	 - Options for PCI-only HCDs (UHCI and, for now, EHCI) only appear
	   systems that actually have PCI.
	
	 - Adding non-PCI bus glue support for another OHCI adapter doesn't
	   need involve changing the main USB Kconfig anymore.
	
	 - Minor tweaks to the OMAP support, so OMAP 17xx and 24xx don't need
	   additional Kconfig changes and so the H3/17xx gets the ISP1301 too.
	
	This still tries to hide host-side USB config options on systems that
	don't offer USB.  While currently convenient, that's a losing proposition
	in the long term:  host controllers on chips like SL811 and TD243 can be
	put onto any custom board.
	
	Signed-off-by: David Brownell <dbrownell@users.sourceforge.net>
	Signed-off-by: Greg Kroah-Hartman <greg@kroah.com>

<david-b@pacbell.net>
	[PATCH] USB: usb error code docs
	
	This has various updates to the USB error code documentation that I've
	had floating around.
	
	Signed-off-by: David Brownell <dbrownell@users.sourceforge.net>
	Signed-off-by: Greg Kroah-Hartman <greg@kroah.com>

<david-b@pacbell.net>
	[PATCH] USB: ohci module param for broken bios
	
	This patch provides a way to work around especially broken BIOS/SMM
	implementations which claim they support the OS-handoff handshake
	but actually don't.  It's confirmed that this resolves some OSDL bug
	(ID isn't handy just now).
	
	Signed-off-by: David Brownell <dbrownell@users.sourceforge.net>
	Signed-off-by: Greg Kroah-Hartman <greg@kroah.com>

<david-b@pacbell.net>
	[PATCH] USB: omap_udc updates
	
	This is a collection of updates to the OMAP UDC driver.
	
	  - OMAP-1510 support, including DMA (the DMA controller isn't quite
	    the same as on newer chips) but not double buffering.
	
	  - Some PIO work:
	
	      * fix some races that showed up on OMAP-1510
	
	      * tracking down annoying PIO-OUT lossage and making double buffering
	        start to behave (needed as fallback if all DMA channels are in use).
	
	  - DMA-IN works on both 1510 and 16xx
	
	Plus minor cleanups.
	
	Signed-off-by: David Brownell <dbrownell@users.sourceforge.net>
	Signed-off-by: Greg Kroah-Hartman <greg@kroah.com>

<david-b@pacbell.net>
	[PATCH] USB: net2280 compile fixes
	
	Fix some compiler warnings that came up with net2280 on processors with
	64bit dma_addr-t ... one of them would have been a bug on big-endian CPUs.
	(Thanks to Randy Dunlap for reporting these.)
	
	Signed-off-by: David Brownell <dbrownell@users.sourceforge.net>
	Signed-off-by: Greg Kroah-Hartman <greg@kroah.com>

<stern@rowland.harvard.edu>
	[PATCH] USB file-storage gadget: clean up endian issues
	
	This patch adds the __le16 data types to the file-storage gadget and
	removes some erroneous conversions to little-endian order.
	
	Signed-off-by: Alan Stern <stern@rowland.harvard.edu>
	Signed-off-by: Greg Kroah-Hartman <greg@kroah.com>

<wli@holomorphy.com>
	[PATCH] PA-RISC io_remap_page_range() fix
	
	It was pointed out to me that I typo'd and lost a backslash in the
	PA-RISC io_remap_page_range() definition. This patch corrects the
	one-character typo.

<sri@us.ibm.com>
	[SCTP] Change sctp_assoc_t to a sized type(s32).
	
	Signed-off-by: Sridhar Samudrala <sri@us.ibm.com>

<sri@us.ibm.com>
	[SCTP] Adaption layer indication support.
	
	Add support for SCTP_ADAPTION_INDICATION notification, SCTP_ADAPTION_LAYER
	socket option and SCTP_PARAM_ADAPTION_LAYER_IND parameter.
	
	Signed-off-by: Sridhar Samudrala <sri@us.ibm.com>

<torvalds@ppc970.osdl.org>
	remap_pfn_range: make the region special.
	
	VM_IO tells the rest fo the world that the pages may
	have side effects on reads/writes etc, and VM_RESERVED
	historically told swap-out not to bother with it.

<torvalds@ppc970.osdl.org>
	Make drivers/char/mem.c use remap_pfn_range()
	
	Rather than the deprecated remap_page_range() function
	that can't handle all of the PFN range anyway.
	
	Also, since that will now mark the vma as being special,
	there's no need to do it in mmap_mem() any more.

<torvalds@ppc970.osdl.org>
	Make core-dumps have all the relevant regions in it.
	
	Based on input from Roland McGrath and Hugh Dickins.
	
	This simplifies the logic, and takes advantage of the
	"new" VM information in the form of vma->anon_vma.

<sri@us.ibm.com>
	[SCTP] Update cwnd/ssthresh as per the sctpimpguide modifications.
	
	Signed-off-by: Sridhar Samudrala <sri@us.ibm.com>

<sri@us.ibm.com>
	[SCTP] When an address is deleted, update any transports that are caching it as a source adddress.
	
	Signed-off-by: Sridhar Samudrala <sri@us.ibm.com>

<viro@www.linux.org.uk>
	[PATCH] missing includes of asm/irq.h
	
	disable_irq() needs asm/irq.h and not everyone who needs it gets it
	included indirectly.
	
	Signed-off-by: Al Viro <viro@parcelfarce.linux.theplanet.co.uk>

<sri@us.ibm.com>
	[SCTP] Fix HEARTBEAT_ACKs being sent to wrong dest. ip address in a
	multi-homing scenario after a failback.
	
	Signed-off-by: Jorge Hernandez-Herrero <jhh@lucent.com>
	Signed-off-by: Sridhar Samudrala <sri@us.ibm.com>

<viro@www.linux.org.uk>
	[PATCH] depca removal of bogus virt_to_bus() uses
	
	Signed-off-by: Al Viro <viro@parcelfarce.linux.theplanet.co.uk>

<hannal@us.ibm.com>
	[PATCH] hw_random.c: replace pci_find_device
	
	As pci_find_device is going away I've replaced it with pci_get_device.
	for_each_pci_dev is a macro wrapper around pci_get_device.
	If someone with this hardware could test it I would appreciate it.
	
	Thanks.
	
	Hanna Linder
	IBM Linux Technology Center
	
	Signed-off-by: Hanna Linder <hannal@us.ibm.com>
	Signed-off-by: Jeff Garzik <jgarzik@pobox.com>

<pavel@ucw.cz>
	[PATCH] Fix suspend/resume support in via-rhine2
	
	If I want via-rhine to work after resume, I need this patch. It stops
	interrupts during suspend and reinitializes them after that.

<bzolnier@trik.(none)>
	[block] remove bio walking
	
	All users of this code were fixed to use scatterlists.
	
	Acked by Jens.
	
	Signed-off-by: Bartlomiej Zolnierkiewicz <bzolnier@gmail.com>

<bzolnier@trik.(none)>
	[ide] kill CONFIG_IDE_TASKFILE_IO
	
	It is not needed any longer:
	* PIO code is unified and converted to use scatterlists
	* taskfile code doesn't support falling back to PIO
	* it is much easier to convert non-taskfile version of
	  __ide_do_rw_disk() to something sane than taskfile one
	
	Signed-off-by: Bartlomiej Zolnierkiewicz <bzolnier@gmail.com>

<viro@parcelfarce.linux.theplanet.co.uk>
	[PATCH] aacraid iomem annotations
	
	Signed-off-by: Al Viro <viro@parcelfarce.linux.theplanet.co.uk>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<viro@parcelfarce.linux.theplanet.co.uk>
	[PATCH] fusion iomem annotations
	
	Signed-off-by: Al Viro <viro@parcelfarce.linux.theplanet.co.uk>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<viro@parcelfarce.linux.theplanet.co.uk>
	[PATCH] alpha writeq fixes
	
	Some drivers do ifdef on writeq; alpha has it as inline function, so they
	get confused.
	
	Signed-off-by: Al Viro <viro@parcelfarce.linux.theplanet.co.uk>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<viro@parcelfarce.linux.theplanet.co.uk>
	[PATCH] amd64 io.h annotations
	
	Signed-off-by: Al Viro <viro@parcelfarce.linux.theplanet.co.uk>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<viro@parcelfarce.linux.theplanet.co.uk>
	[PATCH] amd64 uaccess.h annotations
	
	sparse complains on casts from long to pointers; unsigned long is OK, though,
	and it's OK with all numeric cases.
	
	Signed-off-by: Al Viro <viro@parcelfarce.linux.theplanet.co.uk>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<viro@parcelfarce.linux.theplanet.co.uk>
	[PATCH] alpha io_remap_page_range() compile fix
	
	Signed-off-by: Al Viro <viro@parcelfarce.linux.theplanet.co.uk>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<viro@parcelfarce.linux.theplanet.co.uk>
	[PATCH] ppc io.h annotations
	
	Signed-off-by: Al Viro <viro@parcelfarce.linux.theplanet.co.uk>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<viro@parcelfarce.linux.theplanet.co.uk>
	[PATCH] sparc64 missing volatile in io.h prototypes
	
		A bunch of places passes volatile pointers to readb() et.al.;
	sparc64 has their arguments declared as void __iomem *.  Prototypes
	changed to match other platforms.
	
	Signed-off-by: Al Viro <viro@parcelfarce.linux.theplanet.co.uk>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<viro@parcelfarce.linux.theplanet.co.uk>
	[PATCH] added typechecking ot sparc64 ioremap()
	
	ioremap() made inlined function on sparc64; that had caught one bogosity in
	drivers, actually - cpwatchdog.c passed sizeof(structure that was never
	declared) as the second argument to ioremap().  It went unnoticed since
	that argument was never used in the body of macro, so it disappeared without
	a trace...
	
	Signed-off-by: Al Viro <viro@parcelfarce.linux.theplanet.co.uk>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<len.brown@intel.com>
	[ACPI] disable printk on AML breakpoint
	https://bugzilla.redhat.com/bugzilla/show_bug.cgi?id=135856
	
	Signed-off-by: Len Brown <len.brown@intel.com>

<sfrench@smft41.(none)>
	[CIFS] treat NTFS junctions (reparse points) as directories rather than symlinks since we can not follow them
	
	Signed-off-by:  Steve French (sfrench@us.ibm.com)

<ajgrothe@yahoo.com>
	[CRYPTO]: Put khazad back into tcrypt table.
	
	Signed-off-by: David S. Miller <davem@davemloft.net>

<shemminger@osdl.org>
	[NET]: Replace dst_release refcount error with standard WARN_ON
	
	Replace the dst count underflow bug message with a standard WARN message.
	This makes errors noticeable and also reduces the kernel text size by 600
	since we aren't doing as much to setup the printk.
	
	Signed-off-by: Stephen Hemminger <shemminger@osdl.org>
	Signed-off-by: David S. Miller <davem@davemloft.net>

<akpm@osdl.org>
	[NET]: neigh_stat preempt fix
	
	On some code paths this code is playing with per-cpu data with preemption
	enabled.
	
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: David S. Miller <davem@davemloft.net>

<akpm@osdl.org>
	[CRYPTO]: Deinline large function in blowfish.c 
	
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: David S. Miller <davem@davemloft.net>

<akpm@osdl.org>
	[NET]: Add new sysfs attribute 'carrier' for net devices.
	
	From: Jesper Juhl <juhl-lkml@dif.dk>
	
	The patch adds a new sysfs attribute called carrier for net devices that
	exposes the result of netif_carrier_ok().  This allows a user to quickly
	and easily determine if a given netdevice has carrier or not.  Reading
	/sys/class/net/<interface>/carrier yields a '1' when there is a carrier and
	a '0' when there is not.
	
	Signed-off-by: Jesper Juhl <juhl-lkml@dif.dk>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: David S. Miller <davem@davemloft.net>

<akpm@osdl.org>
	[ATM]: ambassador printk warning fix
	
	From: Jesper Juhl <juhl-lkml@dif.dk>
	
	drivers/atm/ambassador.c:2295: warning: unsigned int format, long unsigned int arg (arg 2)
	
	Signed-off-by: Jesper Juhl <juhl-lkml@dif.dk>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: David S. Miller <davem@davemloft.net>

<chas@cmf.nrl.navy.mil>
	[ATM]: [ambassador] eliminate pci_find_device()
	
	Signed-off-by: David S. Miller <davem@davemloft.net>

<chas@cmf.nrl.navy.mil>
	[ATM]: [firestream] remove dead code (from Francois Romieu <romieu@fr.zoreil.com>)
	
	Signed-off-by: David S. Miller <davem@davemloft.net>

<chas@cmf.nrl.navy.mil>
	[ATM]: [zatm] eliminate pci_find_device (from Francois Romieu <romieu@fr.zoreil.com>)
	
	Signed-off-by: David S. Miller <davem@davemloft.net>

<jt@bougret.hpl.hp.com>
	[IRDA]: Fix lmp_lsap_inuse()
	
	o [CRITICA] Fix locking in error path in IrLMP (Stanford checker)
	o [CORRECT] Don't reuse unconnected LSAPs (listening sockets)
	o [CORRECT] Make sure the LSAP we are picking has just not been grabed
	o [CORRECT] Wrap around the LSAP space properly back to 0x10
	
	Signed-off-by: Jean Tourrilhes <jt@hpl.hp.com>
	Signed-off-by: David S. Miller <davem@davemloft.net>

<jt@bougret.hpl.hp.com>
	[IRDA]: Fix nsc-ircc dongle_id input
	
	<Original patch from Maik Broemme>
	
	o [CRITICA] Don't Oops on invalid dongle-id in nsc-ircc driver
	
	Signed-off-by: Jean Tourrilhes <jt@hpl.hp.com>
	Signed-off-by: David S. Miller <davem@davemloft.net>

<jt@bougret.hpl.hp.com>
	[IRDA]: IrNET char dev alias
	
	o [FEATURE] Add module alias for IrNET char dev
	
	Signed-off-by: Jean Tourrilhes <jt@hpl.hp.com>
	Signed-off-by: David S. Miller <davem@davemloft.net>

<jt@bougret.hpl.hp.com>
	[IRDA]: IAS safety comments
	
	o [FEATURE] Make optional the del of IAS object when del IAS attrib
	o [FEATURE] Clarify when/why it's safe to to the above
	
	Signed-off-by: Jean Tourrilhes <jt@hpl.hp.com>
	Signed-off-by: David S. Miller <davem@davemloft.net>

<jt@bougret.hpl.hp.com>
	[IRDA]: Adaptive discovery query timer
	
	o [FEATURE] Adapt to the rate of the peer discovery (passive discovery)
	o [FEATURE] Add extra safety margin in passive discovery
	Allow to interoperate properly with device performing slow discovery
	
	Signed-off-by: Jean Tourrilhes <jt@hpl.hp.com>
	Signed-off-by: David S. Miller <davem@davemloft.net>

<jt@bougret.hpl.hp.com>
	[IRDA]: IrCOMM IAS object fix
	
	o [CORRECT] Restore properly the IAS object when IrCOMM disconnect.
	Allow 'pppd passive persist' to work properly.
	
	Signed-off-by: Jean Tourrilhes <jt@hpl.hp.com>
	Signed-off-by: David S. Miller <davem@davemloft.net>

<jt@bougret.hpl.hp.com>
	[IRDA]: via-ircc driver speed fixes
	
	o [CORRECT] Speed change fixes in via-ircc driver
	o [FEATURE] Add new dongle ID in via-ircc driver
	o [FEATURE] Various code cleanups in via-ircc driver
	
	Signed-off-by: Jean Tourrilhes <jt@hpl.hp.com>
	Signed-off-by: David S. Miller <davem@davemloft.net>

<jt@bougret.hpl.hp.com>
	[IRDA]: Debug module param
	
	<Patch from Stephen Hemminger>
	
	o [CORRECT] irda 2.6 - fix module info
	
	The module parameter info for irda is incorrect.
	The debug parameter is named debug, the variable is irda_debug.
	
	Signed-off-by: Stephen Hemminger <shemminger@osdl.org>
	Signed-off-by: Jean Tourrilhes <jt@hpl.hp.com>
	Signed-off-by: David S. Miller <davem@davemloft.net>

<jt@bougret.hpl.hp.com>
	[IRDA]: Stir driver usb reset fix
	
	<Patch from Stephen Hemminger>
	
	o [CORRECT] stir4200 - get rid of reset on speed change
	
	The Sigmatel 4200 doesn't accept the address setting which gets done on
	USB reset.  The USB core recently changed to resend address (or
	something like that), so usb_reset_device is failing.
	
	The device works without doing the USB reset on speed change, it just
	will be less robust in recovering when things get wedged (like coming
	out of FIR mode).
	
	Signed-off-by: Stephen Hemminger <shemminger@osdl.org>
	Signed-off-by: Jean Tourrilhes <jt@hpl.hp.com>
	Signed-off-by: David S. Miller <davem@davemloft.net>

<jt@bougret.hpl.hp.com>
	[IRDA]: Stir driver suspend fix
	
	<Patch from Stephen Hemminger>
	
	o [FEATURE] stir4200: don't need suspend/resume if !CONFIG_PM
	
	The suspend/resume code only needs to be compiled in if power management
	is enabled.
	
	Signed-off-by: Stephen Hemminger <shemminger@osdl.org>
	Signed-off-by: Jean Tourrilhes <jt@hpl.hp.com>
	Signed-off-by: David S. Miller <davem@davemloft.net>

<jt@bougret.hpl.hp.com>
	[IRDA]: Stir netdev and messages cleanups
	
	<Patch from Stephen Hemminger>
	
	o [FEATURE] stir4200: netdev_priv and message cleanup
	
	Stir4200 driver cleanup's:
	        * use netdev_priv
	        * make sure messages identify the driver
	        * get rid of unneeded message
	
	Signed-off-by: Stephen Hemminger <shemminger@osdl.org>
	Signed-off-by: Jean Tourrilhes <jt@hpl.hp.com>
	Signed-off-by: David S. Miller <davem@davemloft.net>

<tgraf@suug.ch>
	[PKT_SCHED]: Requeues statistics
	
	Introduces requeue statistics for qdiscs. Patch is based on a
	patch of Jamal Hadi Salim and adapted to new statistic API.
	
	Signed-off-by: Thomas Graf <tgraf@suug.ch>
	Signed-off-by: David S. Miller <davem@davemloft.net>

<tgraf@suug.ch>
	[PKT_SCHED]: Max TLV types cleanup
	
	Cleans up maximum TLV type of existing definitions and adds
	missing definitions for TBF, RED, GRED, and HTB.
	
	Signed-off-by: Thomas Graf <tgraf@suug.ch>
	Signed-off-by: David S. Miller <davem@davemloft.net>

<tgraf@suug.ch>
	[PKT_SCHED]: Add dump_stats qdisc op
	
	Adds a new qdisc operation dump_stats which qdiscs can use
	to dump statistics. The op is invoked between gnet_stats_start_copy
	and gnet_stats_finish_copy and therefore stats_lock is already
	held. This is required to ensure proper locking throughout the
	whole statistic dumping procedure.
	
	Signed-off-by: Thomas Graf <tgraf@suug.ch>
	Signed-off-by: David S. Miller <davem@davemloft.net>

<tgraf@suug.ch>
	[PKT_SCHED]: CBQ: use dump_stats
	
	Makes CBQ use dump_stats qdisc op to provide xstats.
	
	Signed-off-by: Thomas Graf <tgraf@suug.ch>
	Signed-off-by: David S. Miller <davem@davemloft.net>

<tgraf@suug.ch>
	[PKT_SCHED]: RED: use dump_stats
	
	Makes RED use dump_stats qdisc op.
	
	Signed-off-by: Thomas Graf <tgraf@suug.ch>
	Signed-off-by: David S. Miller <davem@davemloft.net>

<tgraf@suug.ch>
	[PKT_SCHED]: Add dump_stats class op
	
	Adds a new class operation dump_stats which classes can use
	to dump statistics. Unlike in qdiscs, there are no common
	statistics therefore classes must dump all statistics on their
	own. The qdisc stats_lock is being used for locking.
	
	Signed-off-by: Thomas Graf <tgraf@suug.ch>
	Signed-off-by: David S. Miller <davem@davemloft.net>

<tgraf@suug.ch>
	[PKT_SCHED]: CBQ: Use gnet_stats for class statistics
	
	Converts CBQ class statistics counters to gnet_stats
	structures.
	
	Signed-off-by: Thomas Graf <tgraf@suug.ch>
	Signed-off-by: David S. Miller <davem@davemloft.net>

<tgraf@suug.ch>
	[PKT_SCHED]: CBQ: Use dump_stats for class statistics dumping
	
	Makes CBQ use dump_stats to dump class statistics, i.e.
	moves the statistic dump code from cbq_dump_class to
	cbq_dump_class_stats.
	
	Signed-off-by: Thomas Graf <tgraf@suug.ch>
	Signed-off-by: David S. Miller <davem@davemloft.net>

<tgraf@suug.ch>
	[PKT_SCHED]: CBQ: Use generic rate estimator
	
	Makes CBQ use the generic rate estimator.
	
	Signed-off-by: Thomas Graf <tgraf@suug.ch>
	Signed-off-by: David S. Miller <davem@davemloft.net>

<tgraf@suug.ch>
	[PKT_SCHED]: HTB: Use gnet_stats for class statistics
	
	Converts HTB class statistic counters to gnet_stats
	structures.
	
	Signed-off-by: Thomas Graf <tgraf@suug.ch>
	Signed-off-by: David S. Miller <davem@davemloft.net>

<tgraf@suug.ch>
	[PKT_SCHED]: HTB: Use dump_stats for class statistics dumping
	
	Makes HTB use dump_stats to dump class statistics, i.e.
	moves the statistics dump code from htb_dump_class to
	htb_dump_class_stats.
	
	Signed-off-by: Thomas Graf <tgraf@suug.ch>
	Signed-off-by: David S. Miller <davem@davemloft.net>

<tgraf@suug.ch>
	[PKT_SCHED]: HTB: Remove unneeded rate estimator bits
	
	Removes old generic unused rate estimator bits. HTB has its own
	rate estimator routines and therefore no rate estimator is created
	so there is no need to try and delete one. We might want to convert
	it to the generic rate estimator at a later point.
	
	Signed-off-by: Thomas Graf <tgraf@suug.ch>
	Signed-off-by: David S. Miller <davem@davemloft.net>

<tgraf@suug.ch>
	[PKT_SCHED]: HTB: Use gnet_stats for class statistics
	
	Converts HTB class statistic counters to gnet_stats
	structures.
	
	Signed-off-by: Thomas Graf <tgraf@suug.ch>
	Signed-off-by: David S. Miller <davem@davemloft.net>

<tgraf@suug.ch>
	[PKT_SCHED]: HFSC: Use generic rate estimator
	
	Makes HFSC use the generic rate estimator.
	
	Signed-off-by: Thomas Graf <tgraf@suug.ch>
	Signed-off-by: David S. Miller <davem@davemloft.net>

<tgraf@suug.ch>
	[PKT_SCHED]: HFSC: Use dump_stats for class statistics dumping
	
	Makes HFSC use dump_stats to dump class statistics, i.e.
	moves the statistics dump code from hfsc_dump_class to
	hfsc_dump_class_stats.
	
	Signed-off-by: Thomas Graf <tgraf@suug.ch>
	Signed-off-by: David S. Miller <davem@davemloft.net>

<tgraf@suug.ch>
	[PKT_SCHED]: ATM: Use gnet_stats for class statistics and dump them
	
	Makes ATM qdisc use gnet_stats for class statistic counters and
	adds dumping bits to actually dump those. Althought the counters
	were updated they never got dumped to userspace.
	
	Signed-off-by: Thomas Graf <tgraf@suug.ch>
	Signed-off-by: David S. Miller <davem@davemloft.net>

<laforge@netfilter.org>
	[NETFILTER]: Add iptables CLUSTERIP target, seq_file version
	
	This enables you to build a static load sharing cluster between multiple
	nodes - without the requirement to have a load balancer.  It uses a
	series of [evil] tricks like replying with linklayer multicast addresses
	to ARP requests, and using CONNMARK for stateful blocking all traffic
	not intended for the local node.
	
	Signed-off-by: Harald Welte <laforge@netfilter.org>
	Signed-off-by: David S. Miller <davem@davemloft.net>

<herbert@gondor.apana.org.au>
	[TCP]: Fix tcp_trim_head() calculations.
	
	Dave, we need to use the skb's MSS in trim_head as otherwise the
	counters will be screwed up.
	
	Signed-off-by: Herbert Xu <herbert@gondor.apana.org.au>
	Signed-off-by: David S. Miller <davem@davemloft.net>

<chrisw@osdl.org>
	[PKT_SCHED]: Trivial spelling fix in net/sched/Kconfig
	
	Signed-off-by: Chris Wright <chrisw@osdl.org>
	Signed-off-by: David S. Miller <davem@davemloft.net>

<chrisw@osdl.org>
	[PKT_SCHED]: Make tcp_proto_lookup_ops() static
	
	Signed-off-by: Chris Wright <chrisw@osdl.org>
	Signed-off-by: David S. Miller <davem@davemloft.net>

<paulus@samba.org>
	[PATCH] PPC64 remove __ioremap_explicit() error message
	
	This patch, from John Rose, is the counterpart of one recently
	forwarded by Greg KH.  It has the same description, but isn't the same
	patch - this is the arch/ppc64 part of the change.
	
	As an unfortunate side effect of runtime addition/removal of PCI Host Bridges,
	the RPA DLPAR driver can no longer depend on the success of ioremap_explicit()
	(and therefore remap_page_range()) for the case of DLPAR adding an I/O Slot.  
	
	Without addressing this, an attempt to add the first child slot of a newly
	added PHB will fail when __ioremap_explicit() determines the mappings for that
	range to already exist.
	
	For a little context, __ioremap_explicit() creates mappings for the range of a
	newly added slot.  Here's why these calls will be expected to fail in some
	cases.  Keep in mind that at boot-time, the PPC64 kernel calls ioremap() for
	the entire range spanned by each PHB.  Consider the following scenarios of
	DLPAR-adding an I/O slot.
	
	1) Just after boot, one removes an I/O slot.  At this point the range
	   associated with the parent PHB is fragmented, and the child range for the
	   slot in question is iounmap()'ed.  One then re-adds the slot, at which point
	   remap_page_range()/ioremap_explicit() restores the mappings that were
	   previously removed.
	
	2) One adds a new PHB, at which point the ppc64-specific addition ioremaps the
	   entire PHB range.  One then performs a DLPAR-add of a child slot of that
	   PHB.  At this point, mappings already exist for the range of the slot to
	   be added.  So remap_page_range()/ioremap_explicit() will fail at this point.
	
	The problem is, there's not a good way to distinguish between cases 1 and 2
	from the perspective of the DLPAR driver.  Because of that, I believe the
	correct solution to be:
	
	- Removal of relevant error prints from iounmap_explicit(), which is only used
	  for DLPAR.
	- Removal of error code checks from the RPA driver
	
	Here's the first of these.
	
	Signed-off-by: John Rose <johnrose@austin.ibm.com>
	Signed-off-by: Paul Mackerras <paulus@samba.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<benh@kernel.crashing.org>
	[PATCH] ppc64: Fix boot on some non-LPAR pSeries
	
	This patch fixes a problem when allocating the TCE tables (iommu) during
	early boot on some non-LPAR machines with a lot of memory.
	
	Signed-off-by: Benjamin Herrenschmidt <benh@kernel.crashing.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<benh@kernel.crashing.org>
	[PATCH] ppc64: Fix typo in zImage boot wrapper
	
	This patch fixes a typo in the zImage boot wrapper (incorrect printf).
	
	Signed-off-by: Benjamin Herrenschmidt <benh@kernel.crashing.org>
	Signed-off-by: Matthew Dharm <mdharm@momenco.com>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<benh@kernel.crashing.org>
	[PATCH] ppc64: Update G5 thermal control driver
	
	This patch updates the G5 thermal control driver, the main change
	is support for the new "PowerMac7,3" type desktops including the
	dual 2.5Ghz with liquid cooling.
	
	Signed-off-by: Benjamin Herrenschmidt <benh@kernel.crashing.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<benh@kernel.crashing.org>
	[PATCH] ppc: Disable IRQ probe on ppc
	
	The current "generic" implementation of IRQ probing isn't well suited
	for ppc in it's current form, and causes issues with yenta_socket
	(and possibly others) on pmac laptops. We didn't have a probe implementation
	in the past, we probably don't need one anyway, so for now, the fix is to
	make this optional and enable it on x86 and x86_64 but not ppc and ppc64
	(the 4 archs to use the generic IRQ code).
	
	Signed-off-by: Benjamin Herrenschmidt <benh@kernel.crashing.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<benh@kernel.crashing.org>
	[PATCH] ppc: Fix build of irq.c with CONFIG_TAU_INT
	
	This patch fixes build of arch/ppc/kernel/irc.c when CONFIG_TAU_INT
	is set.
	
	Signed-off-by: Benjamin Herrenschmidt <benh@kernel.crashing.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<paulus@samba.org>
	[PATCH] Fix PREEMPT_ACTIVE definition
	
	When the generic IRQ stuff went in, it seems that HARDIRQ_BITS got bumped
	from 9 (for ppc64) up to 12.  Consequently, the PREEMPT_ACTIVE bit is now
	within HARDIRQ_MASK, and I get in_interrupt() falsely returning true when
	PREEMPT_ACTIVE is set, and thus a BUG_ON tripping in arch/ppc64/mm/tlb.c.
	
	The patch below fixes this by changing PREEMPT_ACTIVE to 0x10000000.  I
	have changed the PREEMPT_ACTIVE definitions for each of the architectures
	that define CONFIG_GENERIC_HARDIRQS (i386, ppc, ppc64, x86_64) and fixed
	the comment in include/linux/hardirq.h.  We could perhaps move the
	PREEMPT_ACTIVE definition to include/linux/hardirq.h - I don't know why it
	is still per-arch.
	
	Signed-off-by: Paul Mackerras <paulus@samba.org>
	Acked-by: Ingo Molnar <mingo@elte.hu>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<viro@parcelfarce.linux.theplanet.co.uk>
	[PATCH] qlogicisp iomem annotations
	
	Signed-off-by: Al Viro <viro@parcelfarce.linux.theplanet.co.uk>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<viro@parcelfarce.linux.theplanet.co.uk>
	[PATCH] aic7xxx_old iomem annotations (for real, this time)
	
	annotated, ioremap() use simplified (it can deal with addresses that are
	not page-aligned just fine).
	
	Signed-off-by: Al Viro <viro@parcelfarce.linux.theplanet.co.uk>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<viro@parcelfarce.linux.theplanet.co.uk>
	[PATCH] aty iomem annotations
	
	Signed-off-by: Al Viro <viro@parcelfarce.linux.theplanet.co.uk>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<viro@parcelfarce.linux.theplanet.co.uk>
	[PATCH] initio.c NULL noise removal
	
	Signed-off-by: Al Viro <viro@parcelfarce.linux.theplanet.co.uk>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<axboe@suse.de>
	[PATCH] move io scheduler kconfig entries
	
	Currently they are in the generic setup, pretty confusing. This patch
	moves the io scheduler selection into a seperate menu under block
	devices.
	
	Signed-off-by: Jens Axboe <axboe@suse.de>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<matthew@wil.cx>
	[PATCH] PA-RISC sound update
	
	trivial sound/parisc updates:
	
	 - substream->dma_device was removed (Stuart Brady)
	 - Fix module unloading (Stuart Brady)
	 - Fixed the off-by-one in snd_card_harmony_rate_bits (Stuart Brady)
	 - Harmony is a GSC device, not available on pure PCI machines (Matthew Wilcox)
	 - Fixed module parameter descriptions for ALSA Harmony (Stuart Brady)

<chrisw@osdl.org>
	[PATCH] lsm: rename security_scaffolding_startup to security_init
	
	Rename security_scaffolding_startup() to security_init().  It always
	bothered me.
	
	Signed-off-by: Chris Wright <chrisw@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<chrisw@osdl.org>
	[PATCH] lsm: reduce noise during security_register
	
	Registering a security module can be a noisy operation, esp. when it
	retries registration with the primary module.  Eliminate some noise, and
	distinguish the return values for register_security so a module can tell
	the difference between failure modes.
	
	Signed-off-by: Chris Wright <chrisw@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<chrisw@osdl.org>
	[PATCH] lsm: Lindent security/security.c
	
	Lindent security/security.c.
	
	Signed-off-by: Chris Wright <chrisw@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<nico@cam.org>
	[PATCH] fix PXA270 compile errors
	
	missing #include (and placement cleanup)
	
	Signed-off-by: Nicolas Pitre <nico@cam.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<chrisw@osdl.org>
	[PATCH] make __sigqueue_alloc() a general helper
	
	Posix timers preallocate siqueue structures during timer creation
	and keep them for reuse.  This allocation happens in user context
	with no locks held, however it's designated as an atomic allocation.
	Loosen this restriction, and while we're at it let's do a bit of code
	consolidation so signal sending uses same __sigqueue_alloc() helper.
	
	Signed-off-by: Chris Wright <chrisw@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<bzolnier@trik.(none)>
	[ide] pmac: kill pmac_ide_[raw_]build_sglist()
	
	Just use ide_dma_[raw_]build_sglist() from ide-dma.c.
	
	Signed-off-by: Bartlomiej Zolnierkiewicz <bzolnier@gmail.com>

<bzolnier@trik.(none)>
	[ide] use ide_map_sg()
	
	* make Etrax ide.c, icside.c and ide-dma.c use ide_map_sg()
	* use one sg for REQ_DRIVE_TASKFILE requests in ide-dma.c
	  (no reason for 128 sectors per sg limit)
	
	Signed-off-by: Bartlomiej Zolnierkiewicz <bzolnier@gmail.com>

<bzolnier@trik.(none)>
	[ide] kill ide_raw_build_sglist()
	
	ide_build_sglist() can be now used for REQ_DRIVE_TASKFILE requests.
	
	Signed-off-by: Bartlomiej Zolnierkiewicz <bzolnier@gmail.com>

<torvalds@ppc970.osdl.org>
	Fix up USB serial console for tty layer changes.
	
	This didn't show up in my "allmodconfig" tests, because the
	console requires things to be built-in, not modules.

<bzolnier@trik.(none)>
	[ide] ide-scsi: simplify+speedup DMA support
	
	* add hwif->sg_mapped flag
	* add idescsi_map_sg() converting scsi_cmd->sg into
	  hwif->sg_table (this removes need for rq->bio)
	* remove code (de)allocating rq->bio
	
	Signed-off-by: Bartlomiej Zolnierkiewicz <bzolnier@gmail.com>

<bzolnier@trik.(none)>
	[ide] kill ide_hwif_t->ide_dma_verbose
	
	* make __ide_dma_verbose() void and drop "__" prefix
	* ide_dma_verbose() is always available now
	* use it instead of ide_hwif_t->ide_dma_verbose
	* sgiioc4.c version reported wrong mode
	* icside.c version repeated info given by ->ide_dma_check()
	
	Signed-off-by: Bartlomiej Zolnierkiewicz <bzolnier@gmail.com>

<bzolnier@trik.(none)>
	[ide] kill /proc/ide/ide?/config
	
	* writes to PCI config space are non-functional since 2.4.21
	* reads of full PCI config space are allowed for normal users
	* I'm not aware of any applications using this interface
	
	Signed-off-by: Bartlomiej Zolnierkiewicz <bzolnier@gmail.com>

<akpm@osdl.org>
	[PATCH] Fix build for CONFIG_SECURITY=n
	
	.. broken by the rename.
	
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Chris Wright <chrisw@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<janitor@sternwelten.at>
	[PATCH] USB: tiglusb: replace schedule_timeout() with msleep_interruptible()
	
	Description: Use msleep_interruptible() instead of schedule_timeout() to
	guarantee the task delays as expected.
	
	Signed-off-by: Nishanth Aravamudan <nacc@us.ibm.com>
	Signed-off-by: Maximilian Attems <janitor@sternwelten.at>
	Signed-off-by: Greg Kroah-Hartman <greg@kroah.com>

<janitor@sternwelten.at>
	[PATCH] USB: dabusb: replace schedule_timeout() with msleep_interruptible()
	
	Description: Use msleep_interruptible() instead of schedule_timeout()
	so that the task delays as expected.
	
	Signed-off-by: Nishanth Aravamudan <nacc@us.ibm.com>
	Signed-off-by: Maximilian Attems <janitor@sternwelten.at>
	Signed-off-by: Greg Kroah-Hartman <greg@kroah.com>

<stern@rowland.harvard.edu>
	[PATCH] USB device init: implement the Windows scheme
	
	This patch implements the Windows scheme for USB device initialization.
	It also incorporates the change recently posted by David to scrub the
	endpoint state following a SET-ADDRESS.  Other noteworthy changes:
	
		There are two new module parameters to control whether the
		old scheme or the new one is used first and whether the other
		scheme is tried if the first one fails.  Default settings are
		to use the new scheme only.
	
		hub_set_address() returns 0 immediately if the device is already
		in the USB_STATE_ADDRESS state.
	
		On the first attempt to read the device descriptor the code
		uses a short 1-second timeout.  This ought to help prevent
		full-speed devices with an 8- or 16-byte maxpacket from
		slowing the procedure down by NAKing the unexpectedly early
		status stage of the transfer.
	
		For debugging, the ep0 maxpacket value is printed.  It might
		be a good idea to validate it rather than just believing the
		device -- although I haven't heard of any device providing
		an incorrect value other than 0.
	
	
	Signed-off-by: Alan Stern <stern@rowland.harvard.edu>
	Signed-off-by: Greg Kroah-Hartman <greg@kroah.com>

<bunk@stusta.de>
	[PATCH] USB: fix usb/serial/console.c compile error
	
	The following compile error seems to come from Linus' tree:
	
	
	<--  snip  -->
	
	...
	  CC      drivers/usb/serial/bus.o
	  CC      drivers/usb/serial/console.o
	drivers/usb/serial/console.c: In function `usb_console_write':
	drivers/usb/serial/console.c:221: warning: passing arg 3 of pointer to function makes integer from pointer without a cast
	drivers/usb/serial/console.c:221: error: too many arguments to function
	drivers/usb/serial/console.c:223: warning: passing arg 3 of `usb_serial_generic_write' makes integer from pointer without a cast
	drivers/usb/serial/console.c:223: error: too many arguments to function `usb_serial_generic_write'
	make[3]: *** [drivers/usb/serial/console.o] Error 1
	
	<--  snip  -->
	
	
	This was caused by the changed "write" in usb_serial_device_type.
	
	
	
	Signed-off-by: Adrian Bunk <bunk@stusta.de>
	Signed-off-by: Greg Kroah-Hartman <greg@kroah.com>

<david-b@pacbell.net>
	[PATCH] USB input Kconfig updates
	
	This tweaks the USB input driver support, notably fixing a botched
	dependency that makes all the USB drivers appear strangely in Kconfig.
	
	Signed-off-by: David Brownell <dbrownell@users.sourceforge.net>
	Signed-off-by: Greg Kroah-Hartman <greg@kroah.com>

<oliver@neukum.org>
	[PATCH] kaweth: full conversion to usb_unlink_urb
	
	kaweth used its own synchronisation superseded by usb_unlink_urb().
	
	Signed-off-by: Oliver Neukum <oliver@neukum.name>
	Signed-off-by: Greg Kroah-Hartman <greg@kroah.com>

<oliver@neukum.org>
	[PATCH] kaweth: no need for packed
	
	there was an uneeded packed attribute for a data structure.
	
	Signed-off-by: Oliver Neukum <oliver@neukum.name>
	Signed-off-by: Greg Kroah-Hartman <greg@kroah.com>

<nacc@us.ibm.com>
	[PATCH] pmac_cpufreq msleep cleanup/fixes
	
	Uses msleep() instead of schedule_timeout() to guarantee the task delays
	as expected.  Two of the changes are reworks of previous msleep() calls
	which unnecessarily added a jiffy to the parameter.
	
	Signed-off-by: Nishanth Aravamudan <nacc@us.ibm.com>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<trini@kernel.crashing.org>
	[PATCH] remove unused arch/sh/tools/machgen.sh
	
	arch/sh/tools/machgen.sh is no longer used as it has been replaced by
	arch/sh/tools/gen-mach-types
	
	Signed-off-by: Tom Rini <trini@kernel.crashing.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<len.brown@intel.com>
	[ACPI] ACPICA 20040827 update from Bob Moore
	
	Signed-off-by: Len Brown <len.brown@intel.com>
	
	Implemented support for implicit object conversion in
	the non-numeric logical operators (LEqual, LGreater,
	LGreaterEqual, LLess, LLessEqual, and LNotEqual.) Any
	combination of Integers/Strings/Buffers may now be used;
	the second operand is implicitly converted on the fly to
	match the type of the first operand.  For example:
	
	LEqual (Source1, Source2)
	
	Source1 and Source2 must each evaluate to an integer, a
	string, or a buffer. The data type of Source1 dictates the
	required type of Source2.  Source2 is implicitly converted
	if necessary to match the type of Source1.
	
	Updated and corrected the behavior of the string
	conversion support.  The rules concerning conversion of
	buffers to strings (according to the ACPI specification)
	are as follows:
	
	ToDecimalString - explicit byte-wise conversion of buffer
	to string of decimal values (0-255) separated by commas.
	
	ToHexString - explicit byte-wise conversion of buffer to
	string of hex values (0-FF) separated by commas.
	
	ToString - explicit byte-wise conversion of buffer to
	string.  Byte-by-byte copy with no transform except NULL
	terminated.  Any other implicit buffer-to-string conversion
	
	byte-wise conversion of buffer to string of hex values
	(0-FF) separated by spaces.
	
	Fixed a problem in acpi_ns_get_pathname_length where the
	returned length was one byte too short in the case of a
	node in the root scope.  This could cause a fault during
	debug output.

<len.brown@intel.com>
	[ACPI] ACPICA 20040922 from Bob Moore
	
	Signed-off-by: Len Brown <len.brown@intel.com>
	
	Fixed a problem with the implementation of the LNot()
	operator where "Ones" was not returned for the TRUE
	case. Changed the code to return Ones instead of (!Arg)
	which was usually 1. This change affects iASL constant
	folding for this operator also.
	
	Fixed a problem in acpi_ut_initialize_buffer where an
	existing buffer was not initialized properly -- Now zero
	the entire buffer in this case where the buffer already
	exists.
	
	Changed the interface to acpi_os_sleep from (UINT32
	Seconds, UINT32 Milliseconds) to simply (ACPI_INTEGER
	Milliseconds). This simplifies all related code
	considerably. This requires changes/updates to all OS
	interface layers (OSLs.)
	
	Implemented a new external interface,
	acpi_install_exception_handler, to allow a system exception
	handler to be installed. This handler is invoked upon
	any run-time exception that occurs during control method
	execution.
	
	Added support for the DSDT in acpi_tb_find_table. This
	allows the DataTableRegion() operator to access the local
	copy of the DSDT.

<ben@fluff.org>
	[PATCH] I2C: Fix compile of drivers/i2c/busses/i2c-s3c2410.c
	
	Signed-off-by: Greg Kroah-Hartman <greg@kroah.com>

<ebs@ebshome.net>
	[PATCH] I2C: fix recently introduced race in IBM PPC4xx I2C driver
	
	On Tue, Oct 19, 2004 at 10:21:08PM -0700, Eugene Surovegin wrote:
	[snip]
	> It looks like this change added race I tried to avoid here.
	>
	> This code is modeled after __wait_event_interruptible_timeout, where
	> "prepare_to_wait" is done _before_ checking completion status. This
	> change breaks this, e.g. if IRQ happens right after we check iic->sts,
	> but before calling msleep_interruptible(). In this case we'll sleep
	> much more than required (seconds instead of microseconds)
	>
	> Greg, if my analysis is correct, please rollback this change.
	>
	> Nishanth, I'd be nice if you CC'ed me with this patch, my e-mail is at
	> the top of that source file.
	
	Oh, well. I should have used wait_event_interruptible_timeout when I
	ported this driver to 2.6.
	
	This patch fixes recently introduced race and also cleans ups some
	2.4-ism.
	
	
	Signed-off-by: Eugene Surovegin <ebs@ebshome.net>
	Signed-off-by: Greg Kroah-Hartman <greg@kroah.com>

<len.brown@intel.com>
	[ACPI] acpi_os_sleep() now takes a single 64-bit value in [ms]
	
	Signed-off-by: Len Brown <len.brown@intel.com>

<rmk@flint.arm.linux.org.uk>
	[PCMCIA] Fix PCMCIA behaviour on resume with different card.
	
	PCMCIA checks the card CIS against its cached copy.  If it finds
	that the card does not match, it destroys the bindings with existing
	drivers, issues an remove event followed by an insert event.  However,
	ds.c delays the remove event by 100ms, so cardmgr sees the insert
	before remove.  It thereby ignores the new card.
	
	Also, we ended up leaving the fake CIS intact, so the new card appears
	to be described by the fake CIS.  Destroy the fake CIS in addition to
	the CIS cache.

<len.brown@intel.com>
	[ACPI] ACPICA 20040924 from Bob Moore
	
	Signed-off-by: Len Brown <len.brown@intel.com>
	
	Added a new OSL interface, acpi_os_get_timer.  This
	interface implements a 64-bit monotonic timer in 100
	nanosecond units.
	
	Implemented support for the ACPI 3.0 Timer operator.
	This 64-bit timer utilizes the timer provided by the
	acpi_os_get_timer interface.

<cw@f00f.org>
	[PATCH] UML IO sched support
	
	Signed-off-by: cw@f00f.org
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<shemminger@osdl.org>
	[PATCH] cdev: protect against buggy drivers
	
	Here is a better fix (thanks Greg) that allows long names for character
	device objects.
	
	Signed-off-by: Stephen Hemminger <shemminger@osdl.org>
	Signed-off-by: Greg Kroah-Hartman <greg@kroah.com>

<shemminger@osdl.org>
	[PATCH] avoid problems with kobject_set_name and name with %
	
	kobject_set_name takes a printf style argument list. There are many
	callers that pass only one string, if this string contained a '%' character
	than bad things would happen.  The fix is simple.
	
	Signed-off-by: Stephen Hemminger <shemminger@osdl.org>
	Signed-off-by: Greg Kroah-Hartman <greg@kroah.com>

<akpm@osdl.org>
	[PATCH] kobject_hotplug: permit no hotplug_ops
	
	Make kobject_hotplug() work even if the kobject's kset doesn't implement any
	hotplug_ops.
	
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Greg Kroah-Hartman <greg@kroah.com>

<akpm@osdl.org>
	[PATCH] remove cpu_run_sbin_hotplug()
	
	From: Keshavamurthy Anil S <anil.s.keshavamurthy@intel.com>
	
	Remove cpu_run_sbin_hotplug() - use kobject_hotplug() instead.
	
	Signed-off-by: Anil S Keshavamurthy <anil.s.keshavamurthy@intel.com>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Greg Kroah-Hartman <greg@kroah.com>

<akpm@osdl.org>
	[PATCH] kobject_uevent warning fix
	
	lib/kobject_uevent.c:39: warning: `action_to_string' defined but not used
	
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Greg Kroah-Hartman <greg@kroah.com>

<torvalds@ppc970.osdl.org>
	Linux 2.6.10-rc1
	
	New and Improved! "Woozy Numbat!"
	
	Pick up the phone in the next two minutes and phone in your
	order, and we'll throw in a second copy of Woozy Numbat,
	ABSOLUTELY FREE! You too could start a Numbat farm!

<herbert@gondor.apana.org.au>
	[TCP]: Only re-set TSO size for packet which was TSO to begin with.
	
	Signed-off-by: Herbert Xu <herbert@gondor.apana.org.au>
	Signed-off-by: David S. Miller <davem@davemloft.net>

<shemminger@osdl.org>
	[PKT_SCHED]: netem: use timer to handle packets not rescheduling
	
	Change the behaviour of netem's delayed packets queue to make it work better
	with TBF and other rate control disciplines.
	
	Now, packets are put in the delayed queue and held there until the next timer interval,
	then moved to the underlying qdisc. qlen is set to match the available packets in 
	the underlying discipline (and not count those waiting). Previously, netem would perturb
	the rate control disciplines because of rescheduling and moving packets in
	the dequeue handler.
	
	Signed-off-by: Stephen Hemminger <shemminger@osdl.org>
	Signed-off-by: David S. Miller <davem@davemloft.net>

<tgraf@suug.ch>
	[PKT_SCHED]: u32: Remove unused hgenerator field in tc_u_hnode.
	
	Signed-off-by: Thomas Graf <tgraf@suug.ch>
	Signed-off-by: David S. Miller <davem@davemloft.net>

<davem@nuts.davemloft.net>
	[NETFILTER]: Fix ipt_hashlimit build with NETFILTER_DEBUG enabled.
	
	Signed-off-by: David S. Miller <davem@davemloft.net>

<greg@kroah.com>
	hotplug: prevent skips in sequence number from happening
	
	Signed-off-by: Greg Kroah-Hartman <greg@kroah.com>

<david-b@pacbell.net>
	[PATCH] USB ehci: minor pci tweaks
	
	This has minor PCI tweaks for the EHCI driver:
	
	  - If the (nonfunctional) AMD 8111 controller shows up, ignore it.
	    (Patch from Matt Dharm, with minor coding style tweaks).
	
	  - Delete some code that interprets an EHCI capability code; it
	    should be a PCI capability instead.
	
	Signed-off-by: David Brownell <dbrownell@users.sourceforge.net>
	Signed-off-by: Greg Kroah-Hartman <greg@kroah.com>

<david-b@pacbell.net>
	[PATCH] USB ehci: handle earlier endpoint_disable()
	
	The recent patch to scrub out ep0 state earlier (to get rid of some of
	the enumeration problems that started with about 2.6.6) requires EHCI
	to handle endpoint_disable() calls in a slightly different context.
	
	This makes those calls work when an endpoint's QH may still be on the
	async schedule, rather than already unlinked.  (The QH stays on the async
	schedule for a few milliseconds after it's empty, since it's routine to
	issue another request almost immediately.)
	
	Signed-off-by: David Brownell <dbrownell@users.sourceforge.net>
	Signed-off-by: Greg Kroah-Hartman <greg@kroah.com>

<david-b@pacbell.net>
	[PATCH] USB ehci: minor debug cleanups
	
	This updates debug messages, declaring that labels can be constant strings
	and changing some old-school dbg() calls to driver model dev_dbg().
	
	Signed-off-by: David Brownell <dbrownell@users.sourceforge.net>
	Signed-off-by: Greg Kroah-Hartman <greg@kroah.com>

<davem@nuts.davemloft.net>
	[ATY]: Fix build on sparc after viro sparse changes.
	
	Signed-off-by: David S. Miller <davem@davemloft.net>

<david-b@pacbell.net>
	[PATCH] Missed usb devices on boot
	
	This marks sets change_bits to all ones when bringing up a hub, since
	not all hubs seem to send change events for devices that were plugged in
	when the hub was reset. 
	
	David Miller confirms this fixes his boot-time lost keyboard/mouse
	problem

<len.brown@intel.com>
	[ACPI] place-holder for ACPI 3.0 acpi_os_get_timer()

<len.brown@intel.com>
	[ACPI] ACPICA 20041006 from Bob Moore
	
	Signed-off-by: Len Brown <len.brown@intel.com>
	
	Implemented support for the ACPI 3.0 Timer operator. This
	ASL function implements a 64-bit timer with 100 nanosecond
	granularity.
	
	Defined a new OSL interface, acpi_os_get_timer. This
	interface is used to implement the ACPI 3.0 Timer
	operator. This allows the host OS to implement the timer
	with the best clock available.  Also, it keeps the core
	subsystem out of the clock handling business, since the
	host OS (usually) performs this function.
	
	Fixed an alignment issue on 64-bit platforms. The
	hw_low_level_read/write() functions use a 64-bit address
	which is part of the packed ACPI Generic Address
	Structure. Since the structure is non-aligned, the
	alignment macros are now used to extract the address to
	a local variable before use.
	
	Fixed a problem where the ToInteger operator assumed all
	input strings were hexadecimal. The operator now handles
	both decimal strings and hex strings (prefixed with "0x").
	
	Fixed a problem where the string length in the string
	object created as a result of the internal ConvertToString
	procedure could be incorrect.  This potentially affected
	all implicit conversions and also the ToDecimalString and
	ToHexString operators.
	
	Fixed two problems in the ToString operator. If the
	length parameter was zero, an incorrect string object was
	created and the value of the input length parameter was
	inadvertently changed from zero to Ones.
	
	Fixed a problem where the optional ResourceSource string
	in the ExtendedIRQ resource macro was ignored.
	
	Simplified the interfaces to the internal division
	functions, reducing code size and complexity.

<len.brown@intel.com>
	[ACPI] fix build warning in tables/tbget.c

<len.brown@intel.com>
	[ACPI] ACPICA 20041015 from Bob Moore
	
	Signed-off-by: Len Brown <len.brown@intel.com>
	
	Note: ACPI CA is currently undergoing an in-depth and
	complete formal evaluation to test/verify the following
	areas. Other suggestions are welcome. This will result in
	an increase in the frequency of releases and the number
	of bug fixes in the next few months.
	
	- Functional tests for all ASL/AML operators
	- All implicit/explicit type conversions
	- Bit fields and operation regions
	- 64-bit math support and 32-bit-only "truncated" math support
	- Exceptional conditions, both compiler and interpreter
	- Dynamic object deletion and memory leaks
	- ACPI 3.0 support when implemented
	- External interfaces to the ACPI subsystem
	
	Fixed two alignment issues on 64-bit platforms -
	within debug statements in acpi_ev_gpe_detect and
	acpi_ev_create_gpe_block. Removed references to the
	Address field within the non-aligned ACPI generic address
	structure.
	
	Fixed a problem in the Increment and Decrement operators
	where incorrect operand resolution could result in the
	inadvertent modification of the original integer when the
	integer is passed into another method as an argument and
	the arg is then incremented/decremented.
	
	Fixed a problem in the FromBCD operator where the upper
	32-bits of a 64-bit BCD number were truncated during
	conversion.
	
	Fixed a problem in the ToDecimal operator where the length
	of the resulting string could be set incorrectly too long
	if the input operand was a Buffer object.
	
	Fixed a problem in the Logical operators (LLess,
	etc.) where a NULL byte (0) within a buffer would
	prematurely terminate a compare between buffer objects.
	
	Added a check for string overflow (>200 characters as per
	the ACPI specification) during the Concatenate operator
	with two string operands.

<len.brown@intel.com>
	[ACPI] fix build warning

<len.brown@intel.com>
	Cset exclude: jason.davis@unisys.com[torvalds]|ChangeSet|20040914144015|50315

<chrisw@osdl.org>
	[PATCH] delay rq_lock acquisition in setscheduler
	
	Doing access control checks with rq_lock held can cause deadlock when
	audit messages are created (via printk or audit infrastructure) which
	trigger a wakeup and deadlock, as noted by both SELinux and SubDomain
	folks.  This patch will let the security checks happen w/out lock held,
	then re-sample the p->policy in case it was raced. 
	
	Originally from John Johansen <johansen@immunix.com>, reworked by me.
	AFAIK, this version drew no objections from Ingo or Andrea. 
	
	From: John Johansen <johansen@immunix.com>
	Acked-by: Ingo Molnar <mingo@elte.hu>
	Signed-off-by: Chris Wright <chrisw@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<perex@suse.cz>
	[ALSA]  boot_devs removal - module_param_array() accepts NULL now
	
	Intel8x0 driver,RME96 driver,ICE1724 driver,NM256 driver
	
	
	Signed-off-by: Jaroslav Kysela <perex@suse.cz>

<roland@redhat.com>
	[PATCH] Invalid BUG_ONs in signal.c
	
	Oh, duh.  The race is obvious.  Sorry for the confusion there.
	
	The BUG_ON's were useful for debugging, since they trigger on a lot of
	errors, but they _also_ trigger on some unlikely (but valid) races.
	
	So just remove them - just fall through to the regular exit code after
	core-dumping (which does everything right).
	
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<roland@redhat.com>
	[PATCH] Fix ptrace problem
	
	This is indeed a new bug, and it is not architecture-specific.  In my
	recent changes to close some race conditions, I overlooked the case of a
	process using PTRACE_ATTACH on its own children.  The new PT_ATTACHED flag
	does not really mean "PTRACE_ATTACH was used", it means "PTRACE_ATTACH is
	changing the ->parent link".
	
	This fixes the problem that Stephane Eranian program demonstrates.
	
	Signed-off-by: Roland McGrath <roland@redhat.com>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<roland@redhat.com>
	[PATCH] fix core-dump return code
	
	While looking at the signal.c coredumping BUG_ON race, I noticed a bug
	(not directly related) in do_coredump.  It was setting the "core dumped"
	flag even when the format dumping hook failed (e.g.  for memory
	allocation failures).
	
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<len.brown@intel.com>
	[ACPI] ibm-acpi 0.7 from Borislav Deianov
	
	The CMOS handle was incorrectly marked as required, breaking insmod
	on models without one;
	
	The BLED method was incorrectly required if LED is not defined,
	breaking LED control on the A21e.
	
	Signed-off-by: Len Brown <len.brown@intel.com>

<bzolnier@trik.(none)>
	[ide] aec62xx: kill /proc/ide/aec62xx
	
	Signed-off-by: Bartlomiej Zolnierkiewicz <bzolnier@gmail.com>

<bzolnier@trik.(none)>
	[ide] atiixp: kill /proc/ide/atiixp
	
	Signed-off-by: Bartlomiej Zolnierkiewicz <bzolnier@gmail.com>

<bzolnier@trik.(none)>
	[ide] cs5520: kill /proc/ide/cs5520
	
	Signed-off-by: Bartlomiej Zolnierkiewicz <bzolnier@gmail.com>

<bzolnier@trik.(none)>
	[ide] cs5530: kill /proc/ide/cs5530
	
	Signed-off-by: Bartlomiej Zolnierkiewicz <bzolnier@gmail.com>

<bzolnier@trik.(none)>
	[ide] hpt366: kill /proc/ide/hpt366
	
	Signed-off-by: Bartlomiej Zolnierkiewicz <bzolnier@gmail.com>

<bzolnier@trik.(none)>
	[ide] pdc202xx_new: kill /proc/ide/pdcnew
	
	Signed-off-by: Bartlomiej Zolnierkiewicz <bzolnier@gmail.com>

<bzolnier@trik.(none)>
	[ide] pdc202xx_old: kill /proc/ide/pdc202xx
	
	Signed-off-by: Bartlomiej Zolnierkiewicz <bzolnier@gmail.com>

<bzolnier@trik.(none)>
	[ide] piix: kill /proc/ide/piix
	
	Signed-off-by: Bartlomiej Zolnierkiewicz <bzolnier@gmail.com>

<bzolnier@trik.(none)>
	[ide] sc1200: kill /proc/ide/sc1200
	
	Signed-off-by: Bartlomiej Zolnierkiewicz <bzolnier@gmail.com>

<bzolnier@trik.(none)>
	[ide] serverworks: kill /proc/ide/svwks
	
	Signed-off-by: Bartlomiej Zolnierkiewicz <bzolnier@gmail.com>

<bzolnier@trik.(none)>
	[ide] slc90e66: kill /proc/ide/slc90e66
	
	Signed-off-by: Bartlomiej Zolnierkiewicz <bzolnier@gmail.com>

<rmk@flint.arm.linux.org.uk>
	[ARM] Fix missing parens for __FD_* operations.
	
	fork.c highlighted that we were missing some parens.  Add them.

<tgraf@suug.ch>
	[NETFILTER]: Fix warning in CONNMARK
	
	Signed-off-by: Thomas Graf <tgraf@suug.ch>
	Signed-off-by: Patrick McHardy <kaber@trash.net>

<arjan@nl.rmk.(none)>
	[SERIAL] Remove dead code.
	
	serial8250_get_irq_map is no longer used anywhere in the kernel (it
	used to be used by the isapnp code but isn't anymore) so it's dead
	code, below is a patch to remove this.

<andrew.vasquez@qlogic.com>
	[PATCH] SCSI: fix `risc_code_addr01' multiple definition
	
	Make all of the qlogic firmware pointers static
	
	Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

<rddunlap@osdl.org>
	[PATCH] qla1280: driver_setup not __initdata
	
	'driver_setup' cannot be __initdata if slave_configure() can be called
	after driver-init:
	Error: ./drivers/scsi/qla1280.o .text refers to 0000000000000fbf R_X86_64_PC32     .init.data+0x000000000000007b
	Error: ./drivers/scsi/qla1280.o .text refers to 0000000000000fc9 R_X86_64_PC32     .init.data+0x000000000000007e
	Error: ./drivers/scsi/qla1280.o .text refers to 0000000000000fea R_X86_64_PC32     .init.data+0x000000000000007b
	Error: ./drivers/scsi/qla1280.o .text refers to 0000000000000ff4 R_X86_64_PC32     .init.data+0x0000000000000080
	Error: ./drivers/scsi/qla1280.o .text refers to 0000000000001039 R_X86_64_PC32     .init.data+0x000000000000007b
	Error: ./drivers/scsi/qla1280.o .text refers to 0000000000001043 R_X86_64_PC32     .init.data+0x0000000000000082
	
	Signed-off-by: Randy Dunlap <rddunlap@osdl.org>
	Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

<akpm@osdl.org>
	[PATCH] Add megaraid PCI IDs
	
	From: "Sergey S. Kostyliov" <rathamahata@ehouse.ru>
	
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

<akpm@osdl.org>
	[PATCH] aic7xxx remove warnings
	
	From: Jan Dittmer <jdittmer@ppp0.net>
	
	This patch converts the aic7xxx driver to use module_param instead of
	MODULE_PARM and therefore gets rid of two warning in the non-modular build
	case.
	
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

<adam@yggdrasil.com>
	[PATCH] dmx3191d.c lacked MODULE_DEVICE_TABLE()
	
	The MODULE_DEVICE_TABLE() declaration, which is used by boot and hot
	plug facilities to load the module when the hardware is present was
	missed in the PCI API conversion.
	
	Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

<jejb@mulgrave.(none)>
	sym2 2.1.18m
	
	From: 	Matthew Wilcox <matthew@wil.cx>
	
	sym2 2.1.18m:
	 - Improve documentation
	 - Remove host-level command queueing (Christoph Hellwig)
	 - Add support for IU and QAS
	 - sparse annotation (Randolph Chung)
	 - Remove SYM_LINUX_BOOT_COMMAND_LINE_SUPPORT ifdefs
	 - Switch to the new module_param interface
	   - Rename tags to cmd_per_lun for consistency
	   - Fix debug param
	   - Split extended tags functionality into the new tag_ctrl parameter
	   - rewrite how safe param works
	   - reverse_probe param has had no effect for a while, remove it.
	   - Add descriptions for all the parameters
	 - Add MODULE_AUTHOR and MODULE_DESCRIPTION
	 - Restructure sym_config_pqs() a little
	 - Move hostid setup to a more sensible place
	 - Do away with SYM_GLUE_C
	 - Use a completion instead of a semaphore (Thomas Gleixner)
	 - Use IDENTIFY() instead of M_IDENTIFY
	 - Define messages in terms of those defined in <scsi/scsi.h>
	 - Define PCI IDs in terms of those in <linux/pci_ids.h>
	 - Define sym2's status codes in terms of the SAM ones defined in <scsi/scsi.h>
	
	Added brown bag fix
	Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

<stern@rowland.harvard.edu>
	[PATCH] SCSI core: Fix refcounting error
	
	This bug was present as of 2.6.9-bk7, apparently introduced along with the
	addition of SCSI targets into sysfs.  The code takes a reference to the
	host for each initialized sdev but only drops a reference when each
	target is released.  As you might expect, this causes a refcount leak
	whenever a target has more than 0 LUNs.
	
	The patch changes things so that the reference is acquired when the target
	is initialized, not when the sdev is initialized.
	
	Signed-off-by: Alan Stern <stern@rowland.harvard.edu>
	Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

<ink@jurassic.park.msu.ru>
	[PATCH] alpha: fix sparse warnings
	
	- add missing "__user" annotations in csum_partial_copy.c;
	- make io_remap_page_range more readable and fix a warning.

<ink@jurassic.park.msu.ru>
	[PATCH] alpha: fix CIA IO
	
	The high order bits of the input address should be cleared only after
	IO type and base are determined.

<ink@jurassic.park.msu.ru>
	[PATCH] alpha: bootp fixes
	
	- redefine "printk" as "srm_printk" for bootstrappers;
	- fix stack corruption problem with bootp/bootpz loaders and older
	  SRM consoles.

<rth@twiddle.net>
	[PATCH] Add __ioremap
	
	I hadn't realized this was supposed to be an official interface.
	Or maybe it's not, but the fb drivers all use it.   Anyway...

<torvalds@ppc970.osdl.org>
	Start supporting lock context annotations.
	
	This just sets up the portability defines.

<torvalds@ppc970.osdl.org>
	Annotate the trivial unconditional lock/unlock functions on SMP.
	
	This does _not_ handle the conditional ones (lock_kernel and the
	trylock variants), so there will be a fair number of context
	error warnings with this. However, the warnings are disabled by
	default in sparse - you have to use "-Wcontext" to see them.

<adaplas@hotpop.com>
	[PATCH] fbdev: Fix software blanking code
	
	The code in fbmem.c:fb_blank() is broken.  For drivers without an fb_blank
	hook, an FBIO_BLANK ioctl will produce wrong colors or will segfault.
	
	Signed-off-by: Antonino Daplas <adaplas@pol.net>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<yasuyuki.kozakai@toshiba.co.jp>
	[NETFILTER]: Fix multiple bugs in dst match
	
	This patch fixes the following bugs in ip6t_dst.c.
	
	  - ".me = THIS_MODULE" is missing 
	  - The cast of the pointer to the next IPv6 extension header is wrong.
	  - hdrlen may underflow.
	  - (u16)*optdesc causes to alignment problem.
	  - The calculation of the offset to next option is wrong. In the case
	    that the type isn't 0, it should be "Opt Data Len" field + 2
	    (see RFC2460).
	
	Signed-off-by: Yasuyuki KOZAKAI <yasuyuki.kozakai@toshiba.co.jp>
	Signed-off-by: Patrick McHardy <kaber@trash.net>

<yasuyuki.kozakai@toshiba.co.jp>
	[NETFILTER]: Fix multiple bugs in hbh match
	
	This patch fixes the following bugs in ip6t_hbh.c.
	  - The cast of the pointer to the next IPv6 extension header is wrong.
	  - hdrlen may underflow.
	  - (u16)*optdesc causes to alignment problem.
	  - The calculation of the offset to next option is wrong. In the case
	    that the type isn't 0, it should be "Opt Data Len" field + 2
	    (see RFC2460).
	
	Signed-off-by: Yasuyuki KOZAKAI <yasuyuki.kozakai@toshiba.co.jp>
	Signed-off-by: Patrick McHardy <kaber@trash.net>

<yasuyuki.kozakai@toshiba.co.jp>
	[NETFILTER]: Introduce skb_header_pointer() to dst match
	
	Signed-off-by: Yasuyuki KOZAKAI <yasuyuki.kozakai@toshiba.co.jp>
	Signed-off-by: Patrick McHardy <kaber@trash.net>

<yasuyuki.kozakai@toshiba.co.jp>
	[NETFILTER]: Introduce skb_header_pointer() to hbh match
	
	Signed-off-by: Yasuyuki KOZAKAI <yasuyuki.kozakai@toshiba.co.jp>
	Signed-off-by: Patrick McHardy <kaber@trash.net>

<pablo@eurodev.net>
	[NETFILTER]: fix stats in __ip_conntrack_confirm
	
	net_rx_softirq can preempt the calling process while incrementing the stats.
	I think that we can fix this moving both CONNTRACK_STAT_INC to the locked
	section. 
	
	Signed-off-by: Pablo Neira Ayuso <pablo@eurodev.net>
	Signed-off-by: Patrick McHardy <kaber@trash.net>

<torvalds@ppc970.osdl.org>
	Un-inline the big kernel lock.
	
	Now that spinlocks are uninlined, it is silly to keep the
	BKL inlined. And this should make it a lot easier for people
	to play around with variations on the locking (ie Ingo's
	semaphores etc).

<torvalds@evo.osdl.org>
	Fix broken intel8x0.c ALSA "merge"
	
	The file didn't compile, and the ALSA CVS tree
	had dropped the bitfield signedness fixes.

<benh@kernel.crashing.org>
	[PATCH] Fix msleep to sleep _at_least_ the requested amount
	
	Makes sure msleep() sleeps at least the amount provided, since
	schedule_timeout() doesn't guarantee a full jiffy.
	
	Signed-off-by: Benjamin Herrenschmidt <benh@kernel.crashing.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<benh@kernel.crashing.org>
	[PATCH] ppc64: Move PCI IO mapping from pSeries_pci.c to pci.c
	
	This patch moves some of the routines responsible for dealing
	with the mapping of PCI host bridges IO space from pSeries to
	the generic ppc64 pci code. PowerMac doesn't use it currently,
	but a new platform will soon.
	
	Signed-off-by: Benjamin Herrenschmidt <benh@kernel.crashing.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<ambx1@neo.rr.com>
	[PNPBIOS] disable if ACPI is active
	
	As further ACPI pnp functionaility is implemented it is no longer
	safe to run ACPI and PNPBIOS concurrently.
	
	We therefore take the following approach:
	- attempt to enable ACPI support
	- if ACPI fails (blacklist etc.) enable pnpbios support
	- if ACPI support is not compiled in the kernel enable pnpbios support
	
	Signed-off-by: Adam Belay <ambx1@neo.rr.com>
	

<nacc@us.ibm.com>
	[PNPBIOS] use msleep_interruptible()
	
	Description: Use msleep_interruptible() instead of
	schedule_timeout() to guarantee the task delays as expected.
	
	Signed-off-by: Nishanth Aravamudan <nacc@us.ibm.com>
	Signed-off-by: Adam Belay <ambx1@neo.rr.com>
	

<ambx1@neo.rr.com>
	[PNPBIOS] acpi compile fix
	
	Allow PNPBIOS to compile if ACPI support is not enabled.
	
	Signed-off-by: Adam Belay <ambx1@neo.rr.com>
	

<benh@kernel.crashing.org>
	[PATCH] ppc64: Fix pSeries secondary CPU setup
	
	This patch fixes the setup of the secondary CPU(s) on pSeries,
	on non-LPAR platforms, especially with 970 CPUs, we need to copy
	some of the HID registers from CPU0 to the other ones as soon as
	they reach the early asm code. The PowerMac SMP entry did it
	already, but not the pSeries one.
	
	Signed-off-by: Benjamin Herrenschmidt <benh@kernel.crashing.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<benh@kernel.crashing.org>
	[PATCH] ppc64: Rewrite the openpic driver
	
	This patch replaces the open_pic IRQ controller driver with a new
	version rewritten from scratch, called "mpic" (this is the name of
	IBM's open_pic implementation and also the only one actually used
	on any platform).
	
	It is smaller, hopefully more readable, supports the various variants
	of the cell in a single driver (open_pic_u3.c is gone), and adds
	optional support for the workaround of U3 mpic beeing used along with
	IO-APICs on HyperTransport (the eval board will uses that, among
	others).
	
	Signed-off-by: Benjamin Herrenschmidt <benh@kernel.crashing.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<benh@kernel.crashing.org>
	[PATCH] 8250: Let arch provide the list of leagacy ports
	
	This patch adds an optional callback for the 8250 driver to request the
	list of legacy port via a function call instead of relying on a #define
	of an array.
	
	This finally allows to fix the problem of platforms like ppc and ppc64
	for which the same kernel can boot machines with and without a 8250, and
	is necessary to properly deal with a new platform coming to ppc64 which
	has a 8250 but with different irq numbers.
	
	Signed-off-by: Benjamin Herrenschmidt <benh@kernel.crashing.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<benh@kernel.crashing.org>
	[PATCH] ppc64: properly build list of legacy serial ports from OF
	
	This patch adds a ppc64 implementation of the routine providing
	the list of default 8250 serial ports. It provides a empty list
	by default unless the platform code fills it, and it provides
	a generic function for user by Open Firmware based machines which
	fills the list based on serial ports found in the OF device-tree.
	
	It depends on the previous patch adding the generic support for
	this to the 8250 driver.
	
	Signed-off-by: Benjamin Herrenschmidt <benh@kernel.crashing.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<benh@kernel.crashing.org>
	[PATCH] ppc64: clean up existence-check of legacy ISAdevices
	
	My previous patch exposed the internals of the ppc_md.  data structure
	to drivers, which wasn't nice, this new patch cleans that up.
	
	Signed-off-by: Benjamin Herrenschmidt <benh@kernel.crashing.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<benh@kernel.crashing.org>
	[PATCH] ppc64: cleanups of ppc64 pci.c
	
	This patch applies on top of previously posted "ppc64: Move PCI IO mapping
	from pSeries_pci.c to pci.c".
	
	It does cosmetic cleanups & add some debug macros to pci.c without actually
	changing any functionality. Further patches against ppc64 pci.c that I'll
	post will be against a file already patched with this one.
	
	Signed-off-by: Benjamin Herrenschmidt <benh@kernel.crashing.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<benh@kernel.crashing.org>
	[PATCH] ppc64: Some small pci fixes
	
	This patch fixes a few issues in the ppc64 pci code, notably some
	incorrect parsing of Open Firmware "ranges" when setting up host
	bridge resources that would cause a problem with some future
	platforms, a default mapping of the ISA IOs if the OF "isa" node
	lacks a "ranges" property, and a safeguard in pci_scan_all_fns()
	in case a pci<->OF node mapping cannot be established.
	
	Signed-off-by: Benjamin Herrenschmidt <benh@kernel.crashing.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<benh@kernel.crashing.org>
	[PATCH] ppc64: Rework PCI <-> OF node matching
	
	This patch reworks the code that deals with matching PCI devices
	with Open Firmware device nodes. This code made several incorrect
	assumptions and can be simplified significantly. The main functional
	difference now is that PHBs are no longer special cased, but that
	shouldn't cause any specific problem.
	
	It also fixes a problem where u3_iommu.c wouldn't work for PCI
	devices that lacked a matching OF device node.
	
	Signed-off-by: Benjamin Herrenschmidt <benh@kernel.crashing.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<benh@kernel.crashing.org>
	[PATCH] ppc64: cleanup/split SMP code
	
	Splits arch/ppc64/kernel/smp.c into 3 different files, smp.c, pSeries_smp.c and
	iSeries_smp.c, thus removing most of the #define mess in those files and making
	it easier to add a new platform.
	
	Signed-off-by: Benjamin Herrenschmidt <benh@kernel.crashing.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<benh@kernel.crashing.org>
	[PATCH] ppc64: Some cleanups of prom_init.c
	
	This patch does a few cleanups of arch/ppc64/kernel/prom_init.c, making
	the RTAS instanciation code more readable & more robust, fixing a bug
	in the code bringing in additional CPUs (would work with IBM firmware,
	but not with another firmware of an upcoming platform), plus remove some
	old commented out cruft left-over from the big cleanup.
	
	Signed-off-by: Benjamin Herrenschmidt <benh@kernel.crashing.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<benh@kernel.crashing.org>
	[PATCH] ppc64: remove unused cruft from prom.h
	
	This patch removes some bogus struct definitions from prom.h that aren't
	used anymore after the other pending ppc64 patches have been applied.
	
	Signed-off-by: Benjamin Herrenschmidt <benh@kernel.crashing.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<bgerst@quark.didntduck.org>
	[PATCH] mem leak in tty_io.c
	
	The recent patch to clean up user accesses introduced a memory leak.  If
	write_buf is reallocated, the old buffer isn't freed.  Also, since kfree
	can take nulls, I removed the if from the other kfree.
	
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<geert@linux-m68k.org>
	[PATCH] NTFS: missing #include <linux/vmalloc.h>
	
	fs/ntfs/compress.c calls v{malloc,free}() without including <linux/vmalloc.h>
	
	Signed-off-by: Geert Uytterhoeven <geert@linux-m68k.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<geert@linux-m68k.org>
	[PATCH] Cyclades assignment warning
	
	Remove unneeded cast that causes a warning (cy_isa_addresses is an array
	of unsigned ints).
	
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<geert@linux-m68k.org>
	[PATCH] SCx200_ACB depends on PCI
	
	SCx200_ACB is a PCI driver and thus should depend on PCI
	
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<geert@linux-m68k.org>
	[PATCH] Atyfb: kill assignment warnings on Atari due to __iomem
	
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<jgarzik@pobox.com>
	Cset exclude: elf@buici.com|ChangeSet|20040920183610|08290
	
	Revert smc91x driver changeset, since this is already covered by other
	smc91x updates already upstream.
	
	Signed-off-by: Jeff Garzik <jgarzik@pobox.com>

<aia21@cantab.net>
	NTFS: Add fs/ntfs/aops.c to list of providers for ->b_end_io method in
	      Documentation/filesystems/Locking.
	
	Signed-off-by: Anton Altaparmakov <aia21@cantab.net>

<aia21@cantab.net>
	NTFS: - Change fs/ntfs/inode.c::ntfs_truncate() to return an error code
	        instead of void and provide a helper ntfs_truncate_vfs() for the
	        vfs ->truncate method.
	      - Add a new ntfs inode flag NInoTruncateFailed() and modify
	        fs/ntfs/inode.c::ntfs_truncate() to set and clear it appropriately.
	
	Signed-off-by: Anton Altaparmakov <aia21@cantab.net>

<aia21@cantab.net>
	NTFS: Fix min_size and max_size definitions in ATTR_DEF structure in
	      fs/ntfs/layout.h to be signed.
	
	Signed-off-by: Anton Altaparmakov <aia21@cantab.net>

<aia21@cantab.net>
	NTFS: Add attribute definition handling helpers to fs/ntfs/attrib.[hc]:
	      ntfs_attr_size_bounds_check(), ntfs_attr_can_be_non_resident(), and
	      ntfs_attr_can_be_resident(), which in turn use the new private helper
	      ntfs_attr_find_in_attrdef().
	
	Signed-off-by: Anton Altaparmakov <aia21@cantab.net>

<aia21@cantab.net>
	NTFS: In fs/ntfs/aops.c::mark_ntfs_record_dirty(), take the
	      mapping->private_lock around the dirtying of the buffer heads
	      analagous to the way it is done in __set_page_dirty_buffers().
	
	Signed-off-by: Anton Altaparmakov <aia21@cantab.net>

<linux@dominikbrodowski.de>
	[PATCH] Fix PCMCIA duplicate pc_debug names
	
	Avoid naming confusion concerning "pc_debug" which is widely used by drivers
	be renaming the PCMCIA "driver services" variant to ds_pc_debug. The module
	parameter stays the same, thanks to module_param_named().
	
	Signed-off-by: Dominik Brodowski <linux@dominikbrodowski.de>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<mingo@redhat.com>
	[PATCH] Avoid small irq preemption recursion window
	
	This will get rid of the stack recursion possibility that can occur if
	an IRQ happens to hit the IRQ return path right after we've reset
	preempt_count() to 0 and are about to disable interrupts again.
	Trivially fixed by just moving the preempt count update to inside the
	interrupt disable.
	
	This makes the current PREEMPT_ACTIVE method fully work for IRQ
	recursions.

<torvalds@ppc970.osdl.org>
	ppc64: make G5 setup compile again
	
	The stop_self thing is accessed unconditionally from pSeries_setup.c

<hannal@us.ibm.com>
	[PATCH] add 'for_each_pci_dev()' helper macro
	
	Jeff already mistakenly sent in a user of this macro, so we should
	probably add the macro itself too.
	
	Signed-off-by: Hanna Linder <hannal@us.ibm.com>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<len.brown@intel.com>
	[ACPI] ACPI_CUSTOM_DSDT for IA64 too
	
	Signed-off-by: Anil S Keshavamurthy <anil.s.keshavamurthy@intel.com>
	Signed-off-by: Len Brown <len.brown@intel.com

<torvalds@ppc970.osdl.org>
	Allow BKL re-acquire to fail, causing us to re-schedule.
	
	This allows for low-latency BKL contention even with
	preemption. Previously, since preemption is disabled
	over context switches, re-acquiring the kernel lock when
	resuming a process would be non-preemtible.

<len.brown@intel.com>
	[ACPI] Extensions for Display Adapters (Bruno Ducrot)
	http://bugme.osdl.org/show_bug.cgi?id=1944
	
	Signed-off-by: Luming Yu <luming.yu@intel.com>
	Signed-off-by: Len Brown <len.brown@intel.com>

<bdschuym@pandora.be>
	[EBTABLES]: Add wildcard support for interface matching.
	
	Due to an old braindead decision, ebtables doesn't yet support the
	wildcard '+' for matching interface names. The following patch removes
	this nuissance and is backwards compatible.
	
	Signed-off-by: David S. Miller <davem@davemloft.net>

<hch@lst.de>
	[NETFILTER]: Make *_find_target_lock routines static.
	
	Signed-off-by: David S. Miller <davem@davemloft.net>

<davem@nuts.davemloft.net>
	[NETFILTER]: ip_ct_attach decl got removed by accident.
	
	Signed-off-by: David S. Miller <davem@davemloft.net>

<laforge@netfilter.org>
	[NETFILTER]: fix ipt_ULOG bogus error messages
	
	Please apply the fix below, it addresses some bogus error messages
	('error during NLMSG_PUT') that were printed because of a wrong
	calculation of the 'len' parameter to NLMSG_PUT().
	
	Signed-off-by: Harald Welte <laforge@netfilter.org>
	Signed-off-by: David S. Miller <davem@davemloft.net>

<herbert@gondor.apana.org.au>
	[NET]: Give skb_checksum_help() an skb_buff * again
	
	Since skb_checksum_help has been using pskb_expand_head for a while
	now without any ill effects, I thought it would be a good idea to
	remove the double pointers from it and its callers.
	
	This is what the following patch does.  The only 'rider' bit is the
	removal of an unnecessary BUG_ON in ip6_pkt_discard_out.  The preceding
	assignment was only added because the following function oopsed so
	there is no point in doing BUG_ON.
	
	Signed-off-by: Herbert Xu <herbert@gondor.apana.org.au>
	Signed-off-by: David S. Miller <davem@davemloft.net>

<andrea@novell.com>
	[NET]: Accept should return ENFILE not EMFILE.
	
	Signed-off-by: David S. Miller <davem@davemloft.net>

<akpm@osdl.org>
	[PATCH] revert "ppc: fix build with o=output_dir"
	
	This was the wrong fix - back it out and try again later.
	
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<juhl-lkml@dif.dk>
	[PATCH] ds_ioctl.c usercopy check
	
	Patch adds a check of the return value and returns -EFAULT if
	__copy_to_user fails.
	
	Signed-off-by: Jesper Juhl <juhl-lkml@dif.dk>
	Acked-by: Russell King <rmk@arm.linux.org.uk>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<dhowells@redhat.com>
	[PATCH] Shift key-related error codes up and insert ECANCELED
	
	This patch shifts the key-related error codes up by one and inserts an
	ECANCELED error code where not already defined.  It seems that has been
	defined in glibc without passing it back to the kernel:-/
	
	Signed-Off-By: David Howells <dhowells@redhat.com>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<akpm@osdl.org>
	[PATCH] msnd.c build fix
	
	sound/oss/msnd.c: In function `msnd_enable_irq':
	sound/oss/msnd.c:278: warning: implicit declaration of function `enable_irq'
	sound/oss/msnd.c: In function `msnd_disable_irq':
	sound/oss/msnd.c:307: warning: implicit declaration of function `disable_irq'
	
	sound/oss/msnd.c:323: `msnd_get_num_devs' undeclared here (not in a function)
	sound/oss/msnd.c:323: initializer element is not constant
	
	
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<nickpiggin@yahoo.com.au>
	[PATCH] mm: help zone padding
	
	Uses the zero length array which seems to be quite abundant throughout the
	tree to reduce the size of the zone padding to zero.
	
	1536 before, 1152 afterwards for me.
	
	Also try to be a bit smarter about getting commonly accessed fields
	together, which surely can't be worse than before.
	
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<rddunlap@osdl.org>
	[PATCH] checkstack: add x86_64 arch. support
	
	Add support for x86_64 arch. to 'make checkstack' (checkstack.pl).
	
	Signed-off-by: Randy Dunlap <rddunlap@osdl.org>
	Acked-by: Jrn Engel <joern@wohnheim.fh-wedel.de>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<chrisw@osdl.org>
	[PATCH] lsm: fix send_sigurg mediation
	
	Stephen Smalley notes that send_sigurg isn't mediated by LSM in the same
	manner as send_sigio.  Patch below is a slight modification of Stephen's
	original patch.  It moves the security_file_send_sigiotask() hook into the
	sigio_perm().  The hook's fd and reason arguments are replaced with the
	signum.  sigio_perm() and it's callers are updated to pass the signum
	through to the hook.  In send_sigio case, the signum is simply fown->signum
	or SIGIO when signum is 0, however in send_sigurg the kernel doesn't use
	fown->signum, it always sends SIGURG.
	
	From: Stephen Smalley <sds@epoch.ncsc.mil>
	Signed-off-by: Chris Wright <chrisw@osdl.org>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<chrisw@osdl.org>
	[PATCH] lsm: remove net related includes from security.h
	
	With this we're back to the times when changing skbuff.h only triggers
	rebuild of _net_ related stuff 8)
	
	This uncovered a bug in rmap.h, that was not including mm.h to get the
	definition of struct vm_area_struct, working by luck.
	
	Signed-off-by: Arnaldo Carvalho de Melo <acme@conectiva.com.br>
	Signed-off-by: Chris Wright <chrisw@osdl.org>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<trini@kernel.crashing.org>
	[PATCH] ppc32: Fix building for Motorola Sandpoint with O=
	
	Since we directly -include $(clear_L2_L3) when needed, we need to point to
	the full path of it.
	
	Signed-off-by: Tom Rini <trini@kernel.crashing.org>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<david@gibson.dropbear.id.au>
	[PATCH] ppc64: don't build virtual IO drivers for PowerMac
	
	Only compile vio.c on iSeries and pSeries, since other PPC64 platforms
	(PowerMac) don't use virtual IO.  The resulting #ifdefs in dma.c are kind
	of ugly, but at least contained, and I can't see a nicer way of doing it
	for the time being.
	
	Signed-off-by: David Gibson <david@gibson.dropbear.id.au>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<david@gibson.dropbear.id.au>
	[PATCH] ppc64: trivial sparse cleanups
	
	This patch squashes a handful of assorted sparse warnings in the ppc64
	code.  Should be pretty much trivial and self explanatory.
	
	Signed-off-by: David Gibson <david@gibson.dropbear.id.au>
	Acked-by: Paul Mackerras <paulus@samba.org>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<david@gibson.dropbear.id.au>
	[PATCH] ppc64: xmon sparse cleanups
	
	This patch removes many sparse warnings from the xmon code.  Mostly K&R
	function declarations and 0-instead-of-NULLs.  There are still a whole
	bunch of warnings in xmon/ppc-opc.c, which is a copy of a file from
	binutils.
	
	Signed-off-by: David Gibson <david@gibson.dropbear.id.au>
	Acked-by: Paul Mackerras <paulus@samba.org>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<paulus@samba.org>
	[PATCH] ppc64: provide notifier list for EEH slot isolations
	
	When the EEH (enhanced i/o error handling) hardware on pSeries detects
	various kinds of PCI errors, it immediately freezes and isolates the slot
	of the offending PCI card.  We get to know about that by noticing that
	reads from the device return all-1s, and then we have to do a firmware call
	to find out whether the all-1s value was due to a slot isolation.
	
	This patch adds a notifier so that other parts of the system (e.g.  the RPA
	PCI hotplug driver) can know that a slot isolation event has occurred and
	take whatever recovery action is appropriate.  The notifier is called in a
	workqueue function, although the read from the device that noticed the
	all-1s value may have been at interrupt level.  As a precaution, if we keep
	trying to read from the device at interrupt level, and do 1000 reads
	without the workqueue getting a chance to run, we panic, on the grounds
	that we presumably have a badly-written driver which will spin forever in
	its interrupt routine, e.g.  waiting for a bit in a device register to go
	to 0.
	
	This patch is based on an earlier patch by Linas Vepstas <linas@linas.org>.
	
	Signed-off-by: Paul Mackerras <paulus@samba.org>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<paulus@samba.org>
	[PATCH] ppc64: crash during firmware flash update
	
	This patch is from Linas Vepstas <linas@austin.ibm.com>.
	
	Race conditions during system shutdown after a firmware flash can sometimes
	lead to an invalid pointer deref (deref to freed memory).  This patch fixes
	this.  In addition, it makes sure that the proc entries created by the
	firmware flash module are removed when the module is unloaded. 
	
	Signed-off-by: Linas Vepstas <linas@linas.org>
	Signed-off-by: Paul Mackerras <paulus@samba.org>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<paulus@samba.org>
	[PATCH] ppc64: create iommu_free_table()
	
	This patch is from John Rose <johnrose@austin.ibm.com>.
	
	The patch below creates iommu_free_table().  Iommu tables are not currently
	freed in PPC64.  This could cause a memory leak for DLPAR of an EADS slot. 
	The function verifies that there are no outstanding TCE entries for the
	range of the table before freeing it.  I added a call to iommu_free_table()
	to the code that dynamically removes a device node.  This should be fairly
	symmetrical with the table allocation, which happens during dynamic
	addition of a device node.
	
	Signed-off-by: John Rose <johnrose@austin.ibm.com>
	Signed-off-by: Paul Mackerras <paulus@samba.org>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<paulus@samba.org>
	[PATCH] ppc64: __ioremap_explicit() criterion change
	
	This patch is from John Rose <johnrose@austin.ibm.com>.
	
	The function __ioremap_explicit() misses a possible (obscure) case when
	reserving the imalloc area for the new region.  This can result in the
	unexpected DLPAR-add failure for an I/O slot.  The failure will be
	characterized by a kernel message resembling "could not obtain imalloc area
	for ea 0x..." Here's an explanation:
	
	At boot time, imalloc regions are created for the ranges of all PHBs.  Upon
	removal of a child slot for one of these PHBs, the imalloc region is split
	so that the region for the child slot can be removed.
	
	A GFW testcase revealed the following scenario.  A PHB is remapped at boot
	for virtual address range A through C.  At boot, the partition owns a slot
	that spans from A to B.  This slot is DLPAR-removed, leaving an imalloc
	region from B to C.  At this point, the user DLPAR adds an EADS slot that
	was not present at boot, but is a child of the PHB.  The new slot happens
	to have a range that directly matches the leftover PHB range, from B to C. 
	The existing code does not expect this, so the operation fails.
	
	Signed-off-by: John Rose <johnrose@austin.ibm.com>
	Signed-off-by: Paul Mackerras <paulus@samba.org>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<pavel@ucw.cz>
	[PATCH] power/disk.c: small fixups
	
	power_down may never ever fail, so it does not really need to return
	anything.  Kill obsolete code and fixup old comments.
	
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<bunk@stusta.de>
	[PATCH] small SOFTWARE_SUSPEND help text fixes
	
	Some small fixes for the SOFTWARE_SUSPEND help text.
	
	Signed-off-by: Adrian Bunk <bunk@stusta.de>
	Signed-off-by: Pavel Machek <pavel@suse.cz>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<blaisorblade_spam@yahoo.it>
	[PATCH] uml: Kconfig and defconfig updates.
	
	- Make CONFIG_SMP depend on TT mode. Since SMP does not work in SKAS mode
	  (it's still a TODO), add the dependency in the Kconfig. Also mark CONFIG_SMP
	  as experimental.
	- Workaround kconfig warning: just for now (we wait for a "CONFIG_VIRTUAL_OS"
	  to exclude physical hardware) create the CONFIG_INPUT option (fixed to N),
	  to avoid complaints from make *config ARCH=um about it being undefined.
	- Mark HPPFS as broken and needing updates.
	- Update defconfig, both for new kernel options and for changes in the actual
	  config. For instance, enable module support by default.
	- Update help text for some items and add a help to some other ones.
	
	Signed-off-by: Paolo 'Blaisorblade' Giarrusso <blaisorblade_spam@yahoo.it>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<blaisorblade_spam@yahoo.it>
	[PATCH] uml: resync LDS script for SMP changes
	
	Add a couple entries to the linker script which are needed for SMP to link.
	(From Yan Burman)
	
	Signed-off-by: Paolo 'Blaisorblade' Giarrusso <blaisorblade_spam@yahoo.it>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<blaisorblade_spam@yahoo.it>
	[PATCH] uml: unused label
	
	Signed-off-by: Paolo 'Blaisorblade' Giarrusso <blaisorblade_spam@yahoo.it>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<blaisorblade_spam@yahoo.it>
	[PATCH] uml: add conf INITRAMFS_SOURCE
	
	Signed-off-by: Paolo 'Blaisorblade' Giarrusso <blaisorblade_spam@yahoo.it>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<schwidefsky@de.ibm.com>
	[PATCH] s390: sacf local root exploit (CAN-2004-0887)
	
	s390 core changes:
	 - Force user process back to home space mode in space switch event
	   exception handler.
	
	Signed-off-by: Martin Schwidefsky <schwidefsky@de.ibm.com>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<schwidefsky@de.ibm.com>
	[PATCH] s390: core changes
	
	s390 core changes:
	 - Load pid to cr4 on context switch.
	 - Correct and check buffer length of cpcmd. Fix cpcmd inline assembly.
	 - Add missing cc clobber to do_softirq insline assembly.
	 - Regenerate default configuration.
	
	Signed-off-by: Martin Schwidefsky <schwidefsky@de.ibm.com>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<akpm@osdl.org>
	[PATCH] ne2k-pci pci build fix
	
	Fix for updated pci_{save,restore}_state()
	
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Jeff Garzik <jgarzik@pobox.com>

<schwidefsky@de.ibm.com>
	[PATCH] s390: dcss segments cleanup
	
	From: Carsten Otte <cotte@de.ibm.com>
	From: Gerald Schaefer <geraldsc@de.ibm.com>
	
	Cleanup segment load/unload infrastructure.
	
	Signed-off-by: Martin Schwidefsky <schwidefsky@de.ibm.com>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<schwidefsky@de.ibm.com>
	[PATCH] s390: debug feature system control
	
	From: Christian Borntraeger <cborntra@de.ibm.com>
	
	Debug feature changes:
	 - Add system control to stop the debug feature.
	
	Signed-off-by: Martin Schwidefsky <schwidefsky@de.ibm.com>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<schwidefsky@de.ibm.com>
	[PATCH] s390: qdio changes
	
	From: Utz Bacher <utz.bacher@de.ibm.com>
	
	qdio changes:
	 - Rename iqdio_is_inbound_q_done to tiqdio_is_inbound_q_done to
	   keep function naming consistent.
	 - Allocate qdio structures below 2GB.
	
	Signed-off-by: Martin Schwidefsky <schwidefsky@de.ibm.com>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<schwidefsky@de.ibm.com>
	[PATCH] s390: network driver
	
	From: Frank Pavlic <pavlic@de.ibm.com>
	From: Thomas Spatzier <tspat@de.ibm.com>
	
	s390 network driver changes:
	 - ctc/iucv: Use DECLARE_PER_CPU instead of extern DEFINE_PER_CPU.
	 - lcs: Always set channel state to CH_STATE_INIT when stopping channels.
	 - qeth: vlan fixes.
	
	Signed-off-by: Martin Schwidefsky <schwidefsky@de.ibm.com>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<jbarnes@engr.sgi.com>
	[PATCH] sched: small load balance fix
	
	Small bug fix for domains that don't load balance (like those that only
	balance on exec for example).
	
	Signed-off-by: John Hawkes <hawkes@sgi.com>
	Signed-off-by: Jesse Barnes <jbarnes@sgi.com>
	Acked-by: Nick Piggin <nickpiggin@yahoo.com.au>
	Acked-by: Ingo Molnar <mingo@elte.hu>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<hawkes@oss.sgi.com>
	[PATCH] sched: improved load_balance() tolerance for pinned tasks
	
	A large number of processes that are pinned to a single CPU results in
	every other CPU's load_balance() seeing this overloaded CPU as "busiest",
	yet move_tasks() never finds a task to pull-migrate.  This condition occurs
	during module unload, but can also occur as a denial-of-service using
	sys_sched_setaffinity().  Several hundred CPUs performing this fruitless
	load_balance() will livelock on the busiest CPU's runqueue lock.  A smaller
	number of CPUs will livelock if the pinned task count gets high.  This
	simple patch remedies the more common first problem: after a move_tasks()
	failure to migrate anything, the balance_interval increments.  Using a
	simple increment, vs.  the more dramatic doubling of the balance_interval,
	is conservative and yet also effective.
	
	Signed-off-by: John Hawkes <hawkes@sgi.com>
	Acked-by: Ingo Molnar <mingo@elte.hu>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<amgta@yacht.ocn.ne.jp>
	[PATCH] schedstat: fix schedule() statistics
	
	The number of times schedule() left the processor idle in the
	/proc/schedstat (runqueue.sched_goidle) seems to be wrong.
	
	The schedule() statistics should satisfy the equation:
		sched_cnt == sched_noswitch + sched_switch + sched_goidle
	
	(http://eaglet.rain.com/rick/linux/schedstat/v10/format-10.html)
	
	The below patch fix this, and I have confirmed to be fixed with:
		# grep ^cpu /proc/schedstat | awk '{print $6+$7+$9, $8}'
	
	Acked-by: Ingo Molnar <mingo@elte.hu>
	
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<dvhltc@us.ibm.com>
	[PATCH] sched: active_load_balance fixes
	
	The following patch against the latest mm fixes several problems with
	active_load_balance().
	
	Rather than starting with the highest allowable domain (SD_LOAD_BALANCE is
	still set) and depending on the order of the cpu groups, we start at the
	lowest domain and work up until we find a suitable CPU or run out of
	options (SD_LOAD_BALANCE is no longer set).  This is a more robust approach
	as it is more explicit and not subject to the construction order of the cpu
	groups.
	
	We move the test for busiest_rq->nr_running <=1 into the domain loop so we
	don't continue to try and move tasks when there are none left to move.
	This new logic (testing for nr_running in the domain loop) should make the
	busiest_rq==target_rq condition really impossible, so we have replaced the
	graceful continue on fail with a BUG_ON.  (Bjorn Helgaas, please confirm)
	
	We eliminate the exclusion of the busiest_cpu's group from the pool of
	available groups to push to as it is the ideal group to push to, even if
	not very likely to be available.  Note that by removing the test for
	group==busy_group and allowing it to also be tested for suitability, the
	running time is nearly the same.
	
	We no longer force the destination CPU to be in a group of completely idle
	CPUs, nor to be the last in that group.
	
	Signed-off-by: Darren Hart <dvhltc@us.ibm.com>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<neilb@cse.unsw.edu.au>
	[PATCH] md: remove md_flush_all
	
	Following are 7 patches for md
	
	They all grew out of a desire to redo the locking in unplug_slave.  Getting
	and dropping a spinlock so often for very little gain (it would be nearly
	impossible to lose the relevant race) really bothered me.
	
	I finally figured that I could reply it with rcu locking which is very light
	wait, and quite up to the task.
	
	One the way I found an number of inconsistencies that needed cleaning up and
	even a few bugs to fix.  The first 6 patches deal with these inconsistencies
	and bugs.  The last redoes the locking for adding/removing/accessing devices
	within md personalities.
	
	
	This patch:
	
	md_flush_all() isn't needed as each personality defines its own
	issue_flush_fn.
	
	Signed-off-by: Neil Brown <neilb@cse.unsw.edu.au>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<neilb@cse.unsw.edu.au>
	[PATCH] md: make retry_list non-global in raid1 and multipath
	
	Both raid1 and multipath have a "retry_list" which is global, so all raid1
	arrays (for example) us the same list.  This is rather ugly, and it is simple
	enough to make it per-array, so this patch does that.
	
	It also changes to multipath code to use list.h lists instead of
	roll-your-own.
	
	Signed-off-by: Neil Brown <neilb@cse.unsw.edu.au>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<neilb@cse.unsw.edu.au>
	[PATCH] md: rationalise issue_flush function in md personalities
	
	The functions are all subtly different.  This patch makes them all much the
	same.  In particular, EOPNOTSUPP gets returned by all is appropriate.
	
	Signed-off-by: Neil Brown <neilb@cse.unsw.edu.au>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<neilb@cse.unsw.edu.au>
	[PATCH] md: rationalise unplug functions in md
	
	There are currently subtle differences in the different personalities
	concerning when subdevices are unplugged (faulty?  nr_pending?).  This patch
	makes them sll uniform.
	
	Signed-off-by: Neil Brown <neilb@cse.unsw.edu.au>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<neilb@cse.unsw.edu.au>
	[PATCH] md: make sure md always uses rdev_dec_pending properly
	
	The ->nr_pending counted should always be decremented with rdev_dec_pending,
	as this need to do things when the count hits zero.  There were a few places
	where it was being decremented directly.
	
	Signed-off-by: Neil Brown <neilb@cse.unsw.edu.au>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<neilb@cse.unsw.edu.au>
	[PATCH] md: fix two little bugs in raid10
	
	These can cause resync to spin when there is a faulty drive.
	
	Signed-off-by: Neil Brown <neilb@cse.unsw.edu.au>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<neilb@cse.unsw.edu.au>
	[PATCH] md: modify locking when accessing subdevices in md
	
	Each md personality keeps a list of devices that are currently active in the
	array (mdk_rdev_t).  As these can potentially be removed at any time, some
	locking is needed when accessing entries in the list.  Currently this involves
	a spinlock, but all the spinlocking this imposed in unplug_slaves bothered me.
	
	So, I have changed it to use rcu locking.  This is more appropriate as objects
	are removed only very rarely, and there is no cost in waiting a little while
	for a remove to succeed.
	
	Also, all changes to the list of devices are performed by the per-array thread
	(calling md_check_recovery) and so are completely single threaded, so no
	locking between writers is needed at all.
	
	Finally, devices are never added or removed while resync is happening, so
	resync doesn't need to worry about locking at all.
	
	So with this patch, the spinlocking is replaced with rcu read locking and
	synchronize_kernel.  The rcu_read_lock is held while dereferencing a possible
	device, and the nr_pending count is atomically incremented if the device is to
	be held outside of the rcu_read_lock.
	
	When removing a device, if the nr_pending count appears to be zero, we set the
	list entry to NULL and call synchronize_kernel().  If the count is still zero
	after this, we have a safe removal.  If it is non-zero, then someone has just
	started using it so we put the pointer back and fail the removal.  When the
	new user finally drops it's reference, that will cause the per-array thread to
	wake up again and retry the removal.
	
	Signed-off-by: Neil Brown <neilb@cse.unsw.edu.au>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<neilb@cse.unsw.edu.au>
	[PATCH] md: make read retry use a new bio in raid1 and raid10
	
	When retrying a read request, we need to "Reset" the bio.  It is easiest to
	get this right if we discard the bio we have and re-clone it.
	
	Signed-off-by: Neil Brown <neilb@cse.unsw.edu.au>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<neilb@cse.unsw.edu.au>
	[PATCH] md: discard calc_sb_csum_common in favour of csum_fold
	
	csum_fold should always have been used on the result of csum_partial.
	calc_sb_csum_common therefore isn't needed.
	
	Signed-off-by: Neil Brown <neilb@cse.unsw.edu.au>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<neilb@cse.unsw.edu.au>
	[PATCH] md: don't hold lock on md devices while waiting for them to finish resync.
	
	If one md array is waiting for another to finish resyncing, then it holds a
	reference to the array, so the array cannot be stopped.  With this patch, we
	drop the reference before waiting.
	
	Signed-off-by: Neil Brown <neilb@cse.unsw.edu.au>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<neilb@cse.unsw.edu.au>
	[PATCH] md: fix typos in md and raid10
	
	Signed-off-by: Neil Brown <neilb@cse.unsw.edu.au>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<neilb@cse.unsw.edu.au>
	[PATCH] md: fixes to make version-1 superblocks work in md driver
	
	Add some missing data_offset additions and some le_to_cpu convertions and fix
	a few other little mistakes.
	
	Signed-off-by: Neil Brown <neilb@cse.unsw.edu.au>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<cmm@us.ibm.com>
	[PATCH] ext2: discard preallocation in last iput
	
	Currently the ext2 preallocation is discarded on every iput() (via
	ext2_put_inode()).  We should only discard the preallocation on the last
	iput() (via ext2_clear_inode()).
	
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<jmorris@redhat.com>
	[PATCH] Add d_alloc_name() to libfs
	
	This patch consolidates several occurrences of duplicated code into a new
	libfs function d_alloc_name().
	
	Signed-off-by: James Morris <jmorris@redhat.com>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<vandrove@vc.cvut.cz>
	[PATCH] Weak symbols in modules and versioned symbols
	
	Weak symbol may be unavailable in kernel, but if it is available, its
	signature should be same as was at the build time.  If we do not attach
	signatures to weak symbols, kernel is tainted when such module is loaded.
	
	vmmon: no version for "sys_ioctl" found: kernel tainted.
	
	I also believe that it is safer to add & check signatures here - module
	wants either sys_ioctl with right signature, or no sys_ioctl at all, not
	sys_ioctl with different signature (which signals that there is some
	misbuild occuring).
	
	Signed-off-by: Petr Vandrovec <vandrove@vc.cvut.cz>
	Signed-off-by: Rusty Russell <rusty@rustcorp.com.au> (forwarded)
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<Peter_Pregler@email.com>
	[PATCH] cpia.c rmmod deadlock fix
	
	Newer versions of module-init-tools do some locking now which leads to a
	dead-lock if cpia.c does a request_module("cpia_usb/pp").  The attached
	patch against 2.6.8 removes the request_module.  The problem is actually
	the same as is documented in debian bug #259056 which was caused by alsa
	autoloading some oss-modules.  So I guess there might be more places in the
	kernel where this new locking in the module-init-tools might lead to
	dead-locks.
	
	Signed-off-by: Peter Pregler <Peter_Pregler@email.com>
	Acked-by: Gerd Knorr <kraxel@bytesex.org>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<marcelo.tosatti@cyclades.com>
	[PATCH] Change pagevec counters back to unsigned long and cacheline align
	
	Change pagevec "nr" and "cold" back to "unsigned long", because <4 byte
	accesses can be slow on architectures < Pentium III (additional "data16"
	operand on instruction).
	
	This still honours the cacheline alignment, making the size of "pagevec"
	structure a power of two (either 64 or 128 bytes).
	
	Haven't been able to see any significant change on performance on my
	limited testing.
	
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<alex.kiernan@gmail.com>
	[PATCH] UFS: solaris compatibility fix
	
	Fix handling of device inodes on Solaris x86 filesystems, add support for
	large dev_t against Solaris UFS filesystems.
	
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<agk@redhat.com>
	[PATCH] device-mapper: dm-crypt tidy-ups
	
	Small dm-crypt tidy-ups:
	- Use unsigned consistently
	- Simplify crypt_iv_plain memset
	- Use DMEMIT macro
	
	Signed-Off-By: Alasdair G Kergon <agk@redhat.com>
	Signed-Off-By: Christophe Saout <christophe@saout.de>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<agk@redhat.com>
	[PATCH] device-mapper: dm-crypt generator extension
	
	Create crypt_iv_operations structure with generator method and move the
	plain iv generator into this structure.  Optionally accept an extended
	<sector format> syntax: <cipher>-<chaining mode>-<iv mode>
	
	This also makes it ready to support chaining modes other than CBC 
	mode, such as CMC (not implemented in cryptoapi yet), 
	The problems outlined by Adam J. Richter in
	  http://article.gmane.org/gmane.linux.kernel.device-mapper.dm-crypt/454
	would be fixed by switching to CMC chaining mode.
	
	Example of a valid target line:
	  0 200 crypt aes-cbc-plain 00000000000000000000000000000000 0 /dev/loop/5 0
	
	Signed-Off-By: Alasdair G Kergon <agk@redhat.com>
	Signed-Off-By: Christophe Saout <christophe@saout.de>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<agk@redhat.com>
	[PATCH] device-mapper: dm-crypt: new IV mode ESSIV
	
	This patch adds a new IV mode ''encrypted sector|salt IV'' described in
	  http://article.gmane.org/gmane.linux.kernel.device-mapper.dm-crypt/472
	
	To use ESSIV, set the ivmode (using the new syntax) to "essiv:<hash>".
	"hash" should be a valid cryptoapi hash.
	
	This, for example, is a valid dm-target line:
	
	0 200 crypt aes-cbc-essiv:sha256 00000000000000000000000000000000 0 /dev/loop/5 0
	
	Signed-Off-By: Alasdair G Kergon <agk@redhat.com>
	Signed-Off-By: Christophe Saout <christophe@saout.de>
	Signed-Off-By: Fruhwirth Clemens <clemens@endorphin.org>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<agk@redhat.com>
	[PATCH] device-mapper trivial: stray semi-colon
	
	Remove stray semicolon.
	
	Signed-Off-By: Alasdair G Kergon <agk@redhat.com>
	From: Lars Marowsky-Bree <lmb@suse.de>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<agk@redhat.com>
	[PATCH] device-mapper trivial: duplicate kfree in error path
	
	Remove duplicate kfree in dm_register_target error path.
	
	Signed-Off-By: Alasdair G Kergon <agk@redhat.com>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<werner@almesberger.net>
	[PATCH] update CREDITS entry of Werner Almesberger
	
	This patch updates my entry.  (Long overdue ...)
	
	Signed-off-by: Werner Almesberger <werner@almesberger.net>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<adaplas@hotpop.com>
	[PATCH] fbdev: Reduce pixmap memory allocation size
	
	- Reduce pixmap size allocated by fbmem, i810fb and rivafb from 16-64K to
	  8K.  This size is sufficient that a single putcs call can be accomodated by
	  a single imageblit
	
	- Replace NR_FB_DRIVERS with FB_MAX
	
	- Trivial code, Kconfig and Documentation cleanup
	
	Signed-off-by: Antonino Daplas <adaplas@pol.net>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<adaplas@hotpop.com>
	[PATCH] fbdev: Remove inter_module_get/put from i810fb
	
	The function inter_module_get/put is to be deprecated. Remove.
	
	Signed-off-by: Antonino Daplas <adaplas@pol.net>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<adaplas@hotpop.com>
	[PATCH] fbdev: Various mach64 changes
	
	  Alexander Kern <alex.kern@gmx.de>
	  [PATCH] port Daniel Mantione 2.4 driver to 2.6
	  [PATCH] add more pci_id number
	  [PATCH] add accelerated imgblit
	  [PATCH] revert SDRAM_MAGIC_PLL to old behaviour
	  [PATCH] do a "from BIOS" initialisation only by __i386__
	
	  Arnaud FONTAINE <arnaud.fontaine@free.fr>
	  [PATCH atyfb] correction for 3D Rage Mobility L
	
	  Geert Uytterhoeven <geert@linux-m68k.org>
	  [PATCH atyfb] Atari Atyfb fixes
	  [PATCH atyfb] Atyfb on Mach64 GX or Atari
	  [PATCH 468] m68k sparse floating point
	
	  James Simmons <jsimmons@infradead.org>
	  [PATCH add] port to framebuffer_alloc api
	
	  Nicolas Souchu <nsouch@free.fr>
	  [PATCH] I do not found a copy, but it was incorporated too
	
	  Ville Syrjl <syrjala@sci.fi>
	  [PATCH] fix pan with doublescan
	  [PATCH] another double scan fix
	  [PATCH] disable linear aperture register access
	  [PATCH] Memory type correction
	  [PATCH] atyfb (2.6): Fix mmio_start
	  [PATCH] atyfb (2.6): Fix mem_refresh_rate for Mobility
	  [PATCH] atyfb (2.6): Add RGB565 support
	  [PATCH] atyfb: Blank LCD by turning off backlight voltage
	  [PATCH] atyfb: Rage LT LCD register access
	  [PATCH] atyfb: vblank irq support
	  [PATCH] atyfb: MTRR support
	
	
	Antonino Daplas <adaplas@pol.net>
	   remove/modify all references to info->cursor
	
	Signed-off-by: Antonino Daplas <adaplas@pol.net>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<adaplas@hotpop.com>
	[PATCH] fbdev: Clean up of fbcon/fbdev cursor interface
	
	The current cursor interface is confusing.  Some fields are taken from the
	cursor structure in struct fb_info (enable, mask, rop fields) and the rest are
	taken from the passed cursor structure.  These lead to a lot of confusion,
	making it hard for developers to write their own implementation.
	
	Also, the cursor code has several 'short-circuits', occassionally leading to
	undefined cursor behavior.
	
	These are the changes brought about by the patch:
	
	- Removed struct fb_cursor and related fields from struct fb_info, and
	  instead, placed them in a struct not visible to fbdev.
	
	- The struct fb_cursor passed to fb_cursor() will _always_ contain valid
	  data with various bitflags indicating which fields have changed
	
	- The struct fb_pixmap sprite in struct fb_info is used only by drivers with
	  hardware cursor implementation.  Initializing and allocating memory for this
	  structure is not needed.  Remove initialization and memory allocation.
	
	- The FBIO_CURSOR ioctl is broken (because fb_cursor() is broken).  For now,
	  remove fb_cursor code and make the FBIO_CURSOR ioctl always return -ENODEV.
	
	- The flag FB_CUR_SETCUR is changed to FB_CUR_SETIMAGE, indicating that the
	  cursor sprite has changed.  The image change is now checked by fbcon so
	  drivers will not unnecessarily load the sprite image everytime.  This causes
	  hardware cursors to flicker, especially in rivafb.
	
	- Remove fb_load_cursor_image().  This is unused, and should not be
	  implemented generically.
	
	- Documented the usage of the cursor interface in skeletonfb.c
	
	Signed-off-by: Antonino Daplas <adaplas@pol.net>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<adaplas@hotpop.com>
	[PATCH] fbdev: Clean up softcursor implementation
	
	- use struct fb_pixmap pixmap instead of struct fb_pixmap sprite.  The
	  softcursor uses fb_imageblit which also uses pixmap.
	
	- remove/change all references to info->cursor
	
	Signed-off-by: Antonino Daplas <adaplas@pol.net>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<adaplas@hotpop.com>
	[PATCH] fbdev: Clean up i810fb cursor implementation
	
	remove/modify all references to info->cursor
	
	Signed-off-by: Antonino Daplas <adaplas@pol.net>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<adaplas@hotpop.com>
	[PATCH] fbdev: Cleanup rivafb cursor implementation
	
	remove/modify all references to info->cursor
	
	Signed-off-by: Antonino Daplas <adaplas@pol.net>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<adaplas@hotpop.com>
	[PATCH] fbdev: Intel 830M/845G/852GM/855GM/865G framebuffer driver port
	
	  Linux framebuffer driver for Intel(R) 830M/845G/852GM/855GM/865G integrated
	  graphics chips.
	  Port from kernel 2.4 + some modifications and cleanup :
	       - Fix HW accel on 845G
	       - Use of agpgart for fb memory reservation
	       - Add mtrr support
	
	Signed-off-by: Sylvain Meyer <sylvain.meyer@worldonline.fr>
	Signed-off-by: Antonino Daplas <adaplas@pol.net>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<adaplas@hotpop.com>
	[PATCH] fbdev: S3 Savage Framebuffer Driver
	
	S3 Savage Frambuffer Driver for the following chipsets:
	
	Savage 3D
	Savage MX
	Savage 4
	Savage 2000
	ProSavage
	SuperSavage
	
	This is based from the driver written by:
	 Denis Oliver Kropp <dok@directfb.org>
	 Sven Neumann <neo@directfb.org>
	
	Initial Porting to 2.6 done by:
	 Mika Pruikkonen <mpruikko@cc.hut.fi>
	
	Added the following:
	- Console acceleration support (imageblit, fillrect, copyarea) -
	  Configurable
	- DDC2/I2C support for (ProSavage DDR-K, Savage 4 and Prosavage PM only -
	  Configurable
	- 8, 16, 32 bits per pixel
	
	Signed-off-by: Antonino Daplas <adaplas@pol.net>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<jim.hague@acm.org>
	[PATCH] pm2fb: Blanking fixes
	
	- Current blanking code forces +ve (h|v)sync. Correct, match 2.4
	  behaviour, and introduce VESA constants for clarity.
	
	Signed-off-by: Jim Hague <jim.hague@acm.org>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<jim.hague@acm.org>
	[PATCH] pm2fb: Colour palette fixes
	
	- Hardware CLUT only needs setting on pseudocolor.
	- Pseudo palette values need to be 32bit wide for cfb_*().
	
	Signed-off-by: Jim Hague <jim.hague@acm.org>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<roland@redhat.com>
	[PATCH] acct: report single record for multithreaded process
	
	This patch changes process accounting to write just one record for a
	process with many NPTL threads, rather than one record for each thread.  No
	record is written until the last thread exits.  The process's record shows
	the cumulative time of all the threads that ever lived in that process
	(thread group).  This seems like the clearly right thing and I assume it is
	what anyone using process accounting really would like to see.
	
	There is a race condition between multiple threads exiting at the same time
	to decide which one should write the accounting record.  I couldn't think
	of anything clever using existing bookkeeping that would get this right, so
	I added another counter for this.  (There may be some potential to clean up
	existing places that figure out how many non-zombie threads are in the
	group, now that this count is available.)
	
	Signed-off-by: Roland McGrath <roland@redhat.com>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<roland@redhat.com>
	[PATCH] session leader tty disassociation fix
	
	The session leader should disassociate from its controlling terminal and
	send SIGHUP signals only when the whole session leader process dies. 
	Currently, this gets done when any thread in that process dies, which is
	wrong.  This patch fixes it.  
	
	Signed-off-by: Roland McGrath <roland@redhat.com>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<rusty@rustcorp.com.au>
	[PATCH] MODULE_PARM must die: make it warn first.
	
	This patch adds a warning whenever MODULE_PARM is used.  Successive
	patches change them over to module_param.  Help appreciated!
	
	Signed-off-by: Rusty Russell <rusty@rustcorp.com.au>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<rusty@rustcorp.com.au>
	[PATCH] Remove MODULE_PARM from i386 defconfig.
	
	This cleans up defconfig for i386.  Not much work.  This patch removes
	MODULE_PARM for everything made by "defconfig" on x86.  There are only a
	few left.
	
	Signed-off-by: Rusty Russell <rusty@rustcorp.com.au>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<rusty@rustcorp.com.au>
	[PATCH] Remove MODULE_PARM from arch/i386
	
	This patch removes MODULE_PARM for everything under arch/i386.  Currently
	only APM.
	
	Signed-off-by: Rusty Russell <rusty@rustcorp.com.au>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<rusty@rustcorp.com.au>
	[PATCH] Fix for MODULE_PARM obsolete
	
	There is no __attribute_unused__: use __attribute__((__unused__)).
	
	Signed-off-by: Rusty Russell <rusty@rustcorp.com.au>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<rusty@rustcorp.com.au>
	[PATCH] Builtin Module Parameters in sysfs too
	
	Currently, only module parameters in loaded modules are exported in
	/sys/modules/, while those of "modules" built into the kernel can be set by
	the kernel command line, but not read or set via sysfs.
	
	- move module parameters from /sys/modules/$(module_name)/$(parameter_name) to
	  /sys/modules/$(module_name)/parameters/$(parameter_name)
	
	- remove dummy kernel_param for exporting refcnt, add "struct module *"-based
	  attribute instead
	
	- also export module paramters for "modules" which are built into the kernel,
	  so parameters are always accessible at
	  /sys/modules/$(KBUILD_MODNAME)/$(parameter_name)
	
	Signed-off-by: Rusty Russell <rusty@rustcorp.com.au> (modified)
	Signed-off-by: Dominik Brodowski <linux@brodo.de>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<rusty@rustcorp.com.au>
	[PATCH] boot parameters: quoting of environment variables revisited
	
	As noticed by Joey Hess (and thanks for Christoph for forwarding it).  Also
	requirements from Werner Almesberger.
	
	If someone passes 'foo="some value"' the param engine removes the quotes
	and hands 'foo' and 'some value'.  The __setup() parameters expect a single
	string, and so we try to regenerate it from the two parts.  Finally, we try
	to place it as an environment variable.
	
	Werner wants quotes stripped out of the environment variable.  It makes
	sense to do that for __setup, too (so it sees 'foo=some value'), since
	__setup functions don't usually handle quotes.
	
	Signed-off-by: Rusty Russell <rusty@rustcorp.com.au>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<rusty@rustcorp.com.au>
	[PATCH] Eliminate init_module and cleanup_module from Documentation
	
	In 2.2, you used to just be able to call functions "init_module" and
	"cleanup_module" and they'd be magically called.
	
	These days you should use module_init(myinit)/module_exit(myexit) and avoid
	#ifdef MODULE.
	
	Signed-off-by: Rusty Russell <rusty@rustcorp.com.au>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<axboe@suse.de>
	[PATCH] fix bad segment coalescing in blk_recalc_rq_segments()
	
	blk_recalc_rq_segments forgots to take ->max_segment_size into account and
	gladly merges segments bigger than we can support, thus underestimating the
	number of segments needed to fill it.
	
	Signed-off-by: Jens Axboe <axboe@suse.de>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<rddunlap@osdl.org>
	[PATCH] __init dependencies: ignore __param
	
	Ignore __param section references; they aren't discarded.
	
	Error: ./drivers/mtd/devices/phram.o __param refers to 0000000000000010 R_X86_64_64       .init.text+0x0000000000000013
	Error: ./drivers/scsi/dc395x.o __param refers to 0000000000000020 R_X86_64_64       .init.data+0x0000000000000064
	Error: ./drivers/usb/gadget/ether.o __param refers to 0000000000000048 R_X86_64_64       .init.data+0x0000000000000020
	
	Signed-off-by: Randy Dunlap <rddunlap@osdl.org>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<akpm@osdl.org>
	[PATCH] e1000 module_param build fix
	
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Jeff Garzik <jgarzik@pobox.com>

<sds@epoch.ncsc.mil>
	[PATCH] Add DAC check for setxattr(security.selinux)
	
	This patch against 2.6.9 adds a DAC ownership check to the existing MAC
	permission checks when setting the security.selinux attribute via setxattr.
	In the past, the MAC permission checks were viewed as sufficient for
	controlling relabeling operations, but experience in the Fedora SELinux
	integration has shown that a DAC check is also appropriate here,
	particularly under targeted policy.
	
	Signed-off-by: Stephen Smalley <sds@epoch.ncsc.mil>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<suresh.b.siddha@intel.com>
	[PATCH] intel irqbalance quirk cleanup
	
	- Remove the call to quirk_intel_irqbalance() from quirk_pciehp_msi().
	
	- Move the x86(/x86_64)-specific quirk_intel_irqbalance() into x86 quirks.c
	  due to its dependency on <linux/irq.h>
	
	- Mark it __init rather than __devinit, since it calls __init functions.
	
	Signed-off-by: Suresh Siddha <suresh.b.siddha@intel.com>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<jbarnes@engr.sgi.com>
	[PATCH] mmtimer sparse fixes
	
	Small patch to add __iomem annotations to mmtimer.c.
	
	Signed-off-by: Jesse Barnes <jbarnes@sgi.com>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<zippel@linux-m68k.org>
	[PATCH] hfs: update key after rename
	
	After a file has been renamed, the cached search key must be updated.
	
	Signed-off-by: Roman Zippel <zippel@linux-m68k.org>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<zippel@linux-m68k.org>
	[PATCH] hfs: relax dirty check
	
	hfs has two dirty bits, but currently OS X uses only one of them, so match its
	behaviour, so that a uncleanly unmounted disk can be mounted r/w again, after
	it has been checked.
	
	Signed-off-by: Roman Zippel <zippel@linux-m68k.org>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<zippel@linux-m68k.org>
	[PATCH] hfs: manage correct block count
	
	Manage the fs block count with a separate variable and keep a correct i_blocks
	for e.g.  correct du output.
	
	Signed-off-by: Roman Zippel <zippel@linux-m68k.org>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<zippel@linux-m68k.org>
	[PATCH] hfs: read correct dir time
	
	Fix a small typo and read the correct time for a dir.
	
	Signed-off-by: Roman Zippel <zippel@linux-m68k.org>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<zippel@linux-m68k.org>
	[PATCH] hfs: write back resource info directly
	
	Write back the information for a dirty resource inode directly and not via the
	main inode, as at the time the latter is written the former might already be
	gone.
	
	Signed-off-by: Roman Zippel <zippel@linux-m68k.org>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<zippel@linux-m68k.org>
	[PATCH] hfs: export type/creator via xattr
	
	This exports the hfs type/creator info via xattr.
	
	Signed-off-by: Roman Zippel <zippel@linux-m68k.org>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<clameter@sgi.com>
	[PATCH] Posix layer <-> clock driver API fix
	
	This is needed for an mmtimer driver update that we are currently working
	on.  The mmtimer driver provides CLOCK_SGI_CYCLE via clock_gettime and
	clock_settime.
	
	With this api fix one will be able to use timer_create, timer_settime and
	friends from userspace to schedule and receive signals via timer interrupts
	of mmtimer.
	
	Changelog
		* Clean up timer api for drivers that use register_posix_clock. Drivers
		  will then be able to use posix timers to schedule interrupts.
		* Change API for posix_clocks[].timer_create to only pass one pointer
		  to a k_itimer structure that is now allocated and managed by the
		  posix layer in the same way as for the other posix timer
		  functions.
		* Isolate a posix_timer_event(timr) function in posix-timers.c that may
		  be called by the interrupt routine of a timer to signal that the
		  scheduled event has taken place.
	
	Signed-off-by: Christoph Lameter <clameter@sgi.com>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<nickpiggin@yahoo.com.au>
	[PATCH] vm: unreclaimable pages debugginf
	
	Add zone->all_unreclaiable to the sysrq-M and omm-killing diagnostic output.
	
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<hch@lst.de>
	[PATCH] use generic_file_open in udf
	
	Let's try to reduce the number of hand-crafted LFS checks
	
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<jim.houston@ccur.com>
	[PATCH] idr_remove safety checking
	
	idr_remove() should fail gracefully and warn if the id being removed is not
	valid.
	
	The attached patch should do the job without additional overhead.
	
	With the existing code, removing an id which was not allocated could remove
	a valid id which shares the same lowest layer of the radix tree.
	
	I ran a kernel with this patch but have not done any tests to force
	a failure.
	
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<paulkf@microgate.com>
	[PATCH] serial send_break duration fix
	
	Fix tty_io.c send_break() to assert break for proper duration.  If driver
	break_ctl() changes task state, then break may end prematurely.  USB serial
	driver break_ctl() sends a URB, changing task state to TASK_RUNNING.
	
	Signed-off-by: Paul Fulghum <paulkf@microgate.com>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<jbarnes@engr.sgi.com>
	[PATCH] I/O space write barrier
	
	On some platforms (e.g.  SGI Challenge, Origin, and Altix machines), writes
	to I/O space aren't ordered coming from different CPUs.  For the most part,
	this isn't a problem since drivers generally spinlock around code that does
	writeX calls, but if the last operation a driver does before it releases a
	lock is a write and some other CPU takes the lock and immediately does a
	write, it's possible the second CPU's write could arrive before the
	first's.
	
	This patch adds a mmiowb() call to deal with this sort of situation, and
	adds some documentation describing I/O ordering issues to
	deviceiobook.tmpl.  The idea is to mirror the regular, cacheable memory
	barrier operation, wmb.  Example of the problem this new macro solves:
	
	CPU A:  spin_lock_irqsave(&dev_lock, flags)
	CPU A:  ...
	CPU A:  writel(newval, ring_ptr);
	CPU A:  spin_unlock_irqrestore(&dev_lock, flags)
	        ...
	CPU B:  spin_lock_irqsave(&dev_lock, flags)
	CPU B:  writel(newval2, ring_ptr);
	CPU B:  ...
	CPU B:  spin_unlock_irqrestore(&dev_lock, flags)
	
	In this case, newval2 could be written to ring_ptr before newval.  Fixing
	it is easy though:
	
	CPU A:  spin_lock_irqsave(&dev_lock, flags)
	CPU A:  ...
	CPU A:  writel(newval, ring_ptr);
	CPU A:  mmiowb(); /* ensure no other writes beat us to the device */
	CPU A:  spin_unlock_irqrestore(&dev_lock, flags)
	        ...
	CPU B:  spin_lock_irqsave(&dev_lock, flags)
	CPU B:  writel(newval2, ring_ptr);
	CPU B:  ...
	CPU B:  mmiowb();
	CPU B:  spin_unlock_irqrestore(&dev_lock, flags)
	
	Note that this doesn't address a related case where the driver may want to
	actually make a given write get to the device before proceeding.  This
	should be dealt with by immediately reading a register from the card that
	has no side effects.  According to the PCI spec, that will guarantee that
	all writes have arrived before being sent to the target bus.  If no such
	register is available (in the case of card resets perhaps), reading from
	config space is sufficient (though it may return all ones if the card isn't
	responding to read cycles).  I've tried to describe how mmiowb() differs
	from PCI posted write flushing in the patch to deviceiobook.tmpl.
	
	Signed-off-by: Jesse Barnes <jbarnes@sgi.com>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<yanmin.zhang@intel.com>
	[PATCH] hugetlb_get_unmapped_area fix
	
	hugetlb_get_unmapped_area() fails to find an unmapped area while unmapped
	area is huge.  That's because hugetlb_get_unmapped_area just searches
	forward from mm->free_area_cache.  If reaching TASK_SIZE, it does not go
	back to TASK_UNMAPPED_BASE, just returns -ENOMEM.
	
	1) Add a specific hugetlb_get_unmapped_area on i386.
	2) Generic hugetlb_get_unmapped_area is also fixed.
	
	Signed-off-by: Zhang Yanmin <yanmin.zhang@intel.com>
	Acked-by: Ingo Molnar <mingo@elte.hu>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<margitsw@t-online.de>
	[PATCH] Add prism54 to MAINTAINERS
	
	Add prism54 to MAINTAINERS
	
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<bunk@stusta.de>
	[PATCH] CREDITS update
	
	Adrian sent me a check for $100.
	
	Signed-off-by: Adrian Bunk <bunk@stusta.de>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<bunk@stusta.de>
	[PATCH] ISDN hisax_fcpcipnp.c: kill unused variable
	
	drivers/isdn/hisax/hisax_fcpcipnp.c: In function `hisax_fcpcipnp_init':
	drivers/isdn/hisax/hisax_fcpcipnp.c:999: warning: unused variable `pci_nr_found'
	
	Signed-off-by: Adrian Bunk <bunk@stusta.de>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<bjorn.helgaas@hp.com>
	[PATCH] PCDP: call acpi_register_gsi() with arguments in correct order
	
	PCDP: call acpi_register_gsi() with arguments in correct order
	
	Signed-off-by: Bjorn Helgaas <bjorn.helgaas@hp.com>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<colin@colino.net>
	[PATCH] clean up therm_adt746x
	
	This patch cleans therm_adt746x a bit: lines at maximum 80 chars width,
	dispatches the big function in three little ones.
	
	Functionality not changed.
	
	Signed-off-by: Colin Leroy <colin@colino.net>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<edwardsg@sgi.com>
	[PATCH] increase max LOG_BUF_SHIFT value
	
	We've run into problems at 512p with the kernel log buffer wrapping and
	overwriting some of the early boot output.  This is with a
	CONFIG_LOG_BUF_SHIFT value of 20 (1MB).  The patch below just bumps the max
	possible setting to 21 (2MB).
	
	Signed-off-by: Greg Edwards <edwardsg@sgi.com>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<jack@suse.cz>
	[PATCH] Quota warnings somewhat broken
	
	Fix end of lines in quota messages.
	
	Signed-off-by: Jan Kara <jack@suse.cz>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<petero2@telia.com>
	[PATCH] Fix incorrect kunmap_atomic in pktcdvd
	
	The pktcdvd driver uses kunmap_atomic() incorrectly.  The function is
	supposed to take an address as the first parameter, but the pktcdvd driver
	passed a page pointer.  Thanks to Douglas Gilbert and Jens Axboe for
	discovering this.
	
	Signed-off-by: Peter Osterlund <petero2@telia.com>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<bfg-kernel@blenning.no>
	[PATCH] firmware spelling errors
	
	Signed-off-by: Adrian Bunk <bunk@stusta.de>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<akpm@osdl.org>
	[PATCH] ide_pio_sector() kmap fix
	
	kunmap_atomic() takes a kernel-virtual address, not a pageframe address.
	For the hundredth time.
	
	We really should get typechecking happening there..
	
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<benh@kernel.crashing.org>
	[PATCH] ppc64: annotate remaining IO accessors
	
	This patch adds proper __iomem annotations to the remaning IO macros on
	ppc64, and removes now useless casts from eeh.h. This fixes the sparse
	warnings in mpic.c among others.
	
	I need to do an equivalent things for ppc32 (though I think viro did
	some of it already) and fix users.
	
	Signed-off-by: Benjamin Herrenschmidt <benh@kernel.crashing.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<benh@kernel.crashing.org>
	[PATCH] ppc64: Improve PCI config accessors
	
	This improves the config space access routines on G5, by adding a
	generic helper function to locate the pci_controller structure (to be
	used by an upcoming new platform too) and cleaning up the pmac routines.
	
	It includes the fix to skip devices that aren't present in the OF tree
	that is necessary for newer G5 desktop models.
	
	Signed-off-by: Benjamin Herrenschmidt <benh@kernel.crashing.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<benh@kernel.crashing.org>
	[PATCH] ppc64: Cleanup console detection
	
	This removes some leftover code that was in #if 0 in the console
	autodetect code.
	
	It also adds passing of the default serial speed as console options when
	it is available from Open Firmware. 
	
	Signed-off-by: Benjamin Herrenschmidt <benh@kernel.crashing.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<len.brown@intel.com>
	[ACPI] ACPI_VIDEO is EXPERIMENTAL

<suresh.krishnan@ericsson.ca>
	[NET]: Address family not supported for sendmsg()
	
	Signed-off-by: David S. Miller <davem@davemloft.net>

<arnouten@bzzt.net>
	[TCP]: Add /proc/net/tcp{,6} layout documentation.
	
	Signed-off-by: David S. Miller <davem@davemloft.net>

<linville@tuxdriver.com>
	[BONDING]: Add MODULE_VERSION
	
	Signed-off-by: John W. Linville <linville@tuxdriver.com>
	Signed-off-by: David S. Miller <davem@davemloft.net>

<linville@tuxdriver.com>
	[VLAN]: Add MODULE_VERSION
	
	Signed-off-by: John W. Linville <linville@tuxdriver.com>
	Signed-off-by: David S. Miller <davem@davemloft.net>

<chas@cmf.nrl.navy.mil>
	[ATM]: [horizon] eliminate pci_find_device()
	
	Signed-off-by: David S. Miller <davem@davemloft.net>

<ehrhardt@mathematik.uni-ulm.de>
	[IPV4]: Do not try to unhash null-netdev nexthops.
	
	Signed-off-by: Christian Ehrhardt <ehrhardt@mathematik.uni-ulm.de>
	Signed-off-by: David S. Miller <davem@davemloft.net>

<tgraf@suug.ch>
	[PKT_SCHED]: Rename TCQ_F_INGRES to TCQ_F_INGRESS.
	
	This typo annoyned me several times by not showing up in greps.
	
	Signed-off-by: Thomas Graf <tgraf@suug.ch>
	Signed-off-by: David S. Miller <davem@davemloft.net>

<pcaulfie@redhat.com>
	[DECNET]: Connect hang bugfix
	
	This patch fixes a bug in the DECnet connect that seems to have been in 2.6 for
	a while now.
	
	If a connection is rejected by a remote host (eg invalid access control, no
	such object etc) the Linux end hangs in connect() because it is only waiting for
	the socket to go into RUN state.
	
	This patch sets the ECONNREFUSED error state on the socket when the connection
	is rejected to that the connect() exits it's wait loop and returns the error to
	the user.
	
	Signed-off-by: David S. Miller <davem@davemloft.net>

<hch@lst.de>
	[ATM]: Mark vcc_remove_socket static
	
	Signed-off-by: David S. Miller <davem@davemloft.net>

<hch@lst.de>
	[XFRM]: Remove dead exports.
	
	Signed-off-by: David S. Miller <davem@davemloft.net>

<torvalds@ppc970.osdl.org>
	Fix UP non-preempt build for kernel lock changes.
	
	Duh. I had tested every "interesting" combination of SMP and PREEMPT,
	but the _trivial_ one was broken ;)

<hch@lst.de>
	[IPV6]: Remove dead exports.
	
	Signed-off-by: David S. Miller <davem@davemloft.net>

<hch@lst.de>
	[TCP]: Remove dead exports.
	
	Signed-off-by: David S. Miller <davem@davemloft.net>

<hch@lst.de>
	[NET]: Remove dead socket layer exports.
	
	Signed-off-by: David S. Miller <davem@davemloft.net>

<len.brown@intel.com>
	[ACPI] Move the "only do this once" stuff from acpi_register_gsi() into
	eisa_set_level().
	
	Signed-off-by: Bjorn Helgaas <bjorn.helgaas@hp.com>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Len Brown <len.brown@intel.com>

<akpm@osdl.org>
	[CRYPTO]: small sha256 cleanup
	
	Looks like open-coded be_to_cpu.  GCC produces rather poor code for this. 
	be_to_cpu produces asm()s which are ~4 times shorter.
	
	Compile-tested only.
	
	I am not sure whether input can be 32bit-unaligned.
	If it indeed can be, replace:
	
	((u32*)(input))[I]  ->  get_unaligned( ((u32*)(input))+I )
	
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: David S. Miller <davem@davemloft.net>

<akpm@osdl.org>
	[CRYPTO]: small sha512 cleanup
	
	Looks like open-coded be_to_cpu.  GCC produces rather poor code for this. 
	be_to_cpu produces asm()s which are ~4 times shorter.
	
	Compile-tested only.
	
	I am not sure whether input can be 64bit-unaligned.
	If it indeed can be, replace:
	
	((u64*)(input))[I]  ->  get_unaligned( ((u64*)(input))+I )
	
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: David S. Miller <davem@davemloft.net>

<akpm@osdl.org>
	[CRYPTO]: reduce sha512_transform() stack usage, speedup
	
	Patch moves large temporary u64 W[80] from stack to ctx struct:
	
	* reduces stack usage by 640 bytes
	* saves one 640-byte memset() per sha512_transform()
	  (we still do it after *all* iterations are done)
	* quite unexpectedly saves 1.6k of code on i386
	  because stack offsets now fit into 8bits
	  and many stack addressing insns got 3 bytes smaller:
	
	# size sha512.o.org sha512.o
	text       data     bss     dec     hex filename
	8281        372       0    8653    21cd sha512.o.org
	6649        372       0    7021    1b6d sha512.o
	
	# objdump -d sha512.o.org | cut -b9- >sha512.d.org
	# objdump -d sha512.o | cut -b9- >sha512.d
	# diff -u sha512.d.org sha512.d
	[snip]
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: David S. Miller <davem@davemloft.net>

<akpm@osdl.org>
	[CRYPTO]: aes-586-asm: formatting changes
	
	From: Denis Vlasenko <vda@port.imtp.ilyichevsk.odessa.ua>
	
	- Macro parameters renamed for clarity.
	
	- Inaccurate comments fixed.
	
	- ebp register usage de-obfuscated (this is needed for next patch).
	
	No real code changes.
	
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: David S. Miller <davem@davemloft.net>

<akpm@osdl.org>
	[CRYPTO]: aes-586-asm: small optimizations
	
	From: Denis Vlasenko <vda@port.imtp.ilyichevsk.odessa.ua>
	
	- recode back-to-back fwd_rnd() pairs to avoid two register moves.
	
	- ditto for inv_rnd().
	
	- optimize out lea 0(%ebp),%ebp
	
	- remove two stray insns
	
	# size aes-i586-asm.o.org aes-i586-asm.o
	   text    data     bss     dec     hex filename
	   5971       0       0    5971    1753 aes-i586-asm.o.org
	   5905       0       0    5905    1711 aes-i586-asm.o
	
	Overall, patch does not add and does not modify any insns, only removes a
	handful of them.  However, speed difference is way below noise level.
	
	Run-tested with tcrypt module.
	
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: David S. Miller <davem@davemloft.net>

<Brian.Haley@hp.com>
	[IPV6] Lookup appropriate destination when sending TCPv6 with routing header.
	
	Signed-off-by: Brian Haley <Brian.Haley@hp.com>
	Signed-off-by: Hideaki YOSHIFUJI <yoshfuji@linux-ipv6.org>

<yoshfuji@linux-ipv6.org>
	[IPV6] Remove codes related to RTF_ALLONLINK.
	
	Signed-off-by: Hideaki YOSHIFUJI <yoshfuji@linux-ipv6.org>

<yoshfuji@linux-ipv6.org>
	[IPV6] simplify functions related to RTF_ALLONLINK.
	
	Simplify ipv6_get_saddr(), ipv6_dev_get_saddr() and
	rt6_purge_dflt_routers().
	
	Signed-off-by: Hideaki YOSHIFUJI <yoshfuji@linux-ipv6.org>

<yoshfuji@linux-ipv6.org>
	[IPV6] NDISC: update neighbor cache entry by RS.
	
	Signed-off-by: Hideaki YOSHIFUJI <yoshfuji@linux-ipv6.org>

<herbert@gondor.apana.org.au>
	[TCP]: Handle real partial-ACKs of TSO frames correctly.
	
	Actually, I think we've caught your crash now.  If that code path
	is triggering at all, then it'll trigger with TSO packets too.  If
	we get a truly partial ack on a TSO packet, then tcp_tso_acked will
	not trim it off.  So we will fall through to this last-ditch trim
	call, which doesn't update packets_out.
	
	There are two solutions to this problem.  I've taken the simpler
	approach for now.  We simply trim off the partial bits in tcp_tso_acked
	and live with the fact that the packet counters may differ from
	what's on the netwrok by one.
	
	Later on we can 'fix' this by remembering where the original TSO
	packet started from, perhaps in skb->h or somewhere.  Dave, is this
	worth it?
	
	Signed-off-by: Herbert Xu <herbert@gondor.apana.org.au>
	Signed-off-by: David S. Miller <davem@davemloft.net>

<benh@kernel.crashing.org>
	[PATCH] Remove bogus definition of local chrp_int_ack_special in pSeries_setup.c.
	
	Signed-off-by: Benjamin Herrenschmidt <benh@kernel.crashing.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<benh@kernel.crashing.org>
	[PATCH] ppc64: don't include <stddef.h>
	
	This patch fixes a couple of places where the ppc64 iSeries code would
	#include <stddef.h>. The only "system" include I consider acceptable is
	<stdarg.h> provided by gcc.
	
	Signed-off-by: Benjamin Herrenschmidt <benh@kernel.crashing.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<yoshfuji@linux-ipv6.org>
	[IPV6] kill a warning when building without CONFIG_SYSCTL.
	
	Signed-off-by: Hideaki YOSHIFUJI <yoshfuji@linux-ipv6.org>

<arjan@infradead.org>
	[PATCH] remove NET_HW_FLOWCONTROL
	
	CONFIG_NET_HW_FLOWCONTROL is entirely unused now, and superceded by NAPI in
	practice, so remove the dead code
	
	Signed-off-by: Arjan van de Ven <arjan@infradead.org>
	Signed-off-by: Jeff Garzik <jgarzik@pobox.com>

<jgarzik@pobox.com>
	[libata] return ENOTTY rather than EOPNOTSUPP for unknown-ioctl

<shaggy@austin.ibm.com>
	JFS: avoid assert in lbmfree
	
	In the error path, lmLogInit must clear log->lbuf_free before
	calling lbmFree.
	
	Signed-off-by: Dave Kleikamp <shaggy@austin.ibm.com>

<benh@kernel.crashing.org>
	[PATCH] ppc64: PCI ignores empty phb regions
	
	The ppc64 PCI code, when parsing the OF tree, may end up getting empty
	regions in addition to the "normal" ones for the PHB (some pSeries OF
	device-tree contains weird "ranges" properties). These are harmless but
	do trigger some annoying warnings during boot, so let's ignore them.
	
	Signed-off-by: Benjamin Herrenschmidt <benh@kernel.crashing.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<benh@kernel.crashing.org>
	[PATCH] ppc64: Fix new mpic driver on some POWER3
	
	On machines using the "ISU" mecanism for the MPIC, the new driver didn't properly
	calculate the new interrupt count when an ISU was added. That would cause later on
	failure to request interrupts in the offending range.
	
	Signed-off-by: Benjamin Herrenschmidt <benh@kernel.crashing.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<benh@kernel.crashing.org>
	[PATCH] ppc64: Fix g5-only build
	
	The iommu_free_table() patch broke g5 only build by adding back some
	incestuous relationship between generic code and pSeries code. 
	
	This wraps this in #ifdef as a quick fix until the original author of
	the patch comes up with a better solution.
	
	Signed-off-by: Benjamin Herrenschmidt <benh@kernel.crashing.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<benh@kernel.crashing.org>
	[PATCH] ppc64: Add new "Maple" platform support
	
	This adds support for the Maple 970FX Eval Board.  It adds the basic
	arch support.  For the Maple to be fully functional, it needs a couple
	more patches to be applied for IDE and Ethernet that are currently
	pending with the respective maintainers of those subsystems.
	
	Signed-off-by: Benjamin Herrenschmidt <benh@kernel.crashing.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<benh@kernel.crashing.org>
	[PATCH] 8250: Fix empty port registration
	
	My latest 8250 patch prevented registration of "empty" ports (ports that
	have a 0 iobase in the static table). Unfortunately, some archs seem to rely
	on this, and so broke. This patch reverts that part of the patch.
	
	Signed-off-by: Benjamin Herrenschmidt <benh@kernel.crashing.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<benh@kernel.crashing.org>
	[PATCH] ppc64: Some sparse fixes
	
	This is a batch of sparse fixes for things in arch/ppc64/* and
	include/asm-ppc64/*
	
	More to come of course...
	
	Signed-off-by: Benjamin Herrenschmidt <benh@kernel.crashing.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<roland@redhat.com>
	[PATCH] Wake up signalled tasks when exiting ptrace
	
	In general it is not safe to do any non-ptrace wakeup of a thread in
	TASK_TRACED, because the waking thread could race with a ptrace call
	that could be doing things like mucking directly with its kernel stack. 
	
	AFAIK noone has established that whatever clobberation ptrace can do to
	a running thread is safe even if it will never return to user mode, so
	we can't allow this even for SIGKILL.
	
	What we _can_ safely do is make a thread switching out of TASK_TRACED
	resume rather than sitting in TASK_STOPPED if it has a pending SIGKILL
	or SIGCONT.  The following patch does this.
	
	This should be sufficient for the shutdown case.  When killing all
	processes, if the tracer gets killed first, the tracee goes into
	TASK_STOPPED and will be woken and killed by the SIGKILL (same as
	before).  If the tracee gets killed first, it gets a pending SIGKILL and
	doesn't wake up immediately--but, now, when the tracer gets killed, the
	tracee will then wake up to die. 
	
	This will also fix the (same) situations that can arise now where you
	have used gdb (or whatever ptrace caller), killed -9 the gdb and the
	process being debugged, but still have to kill -CONT the process before
	it goes away (now it should just go away either the first time or when
	you kill gdb). 
	
	Signed-off-by: Roland McGrath <roland@redhat.com>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<akpm@osdl.org>
	[PATCH] revert- sys_setaltroot
	
	We decided to do this a different way.
	
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<shaggy@austin.ibm.com>
	JFS: endian annotations
	
	Signed-off-by: Dave Kleikamp <shaggy@austin.ibm.com>

<akpm@osdl.org>
	[IA64] Need <asm/uaccess.h> for KERNEL_DS & set_fs() definitions.
	
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Tony Luck <tony.luck@intel.com>

<alex.williamson@hp.com>
	[IA64] efi.c: fix mem= & max_addr=
	
	With this change, there's some extra fuzz introduced that a max_addr
	specification will get rounded down to a granule boundary and memory
	quantity, when using mem=, will be within a granule size of the
	requested amount.  Let me know if anyone finds more problems with it.
	
	Signed-off-by: Alex Williamson <alex.williamson@hp.com>
	Signed-off-by: Tony Luck <tony.luck@intel.com>

<eranian@hpl.hp.com>
	[IA64] misc small patches for perfmon
	
	change-log:
	- update comment for pfm_do_fasync()
	- fix return value for pfm_smpl_buffer_alloc(). Now
	  return ENOMEM instead of EAGAIN when buffer too big
	  for RLIMIT_MEMLOCK.
	- added missing vm_pgoff initialization in pfm_smpl_buffer_alloc()
	- added flags tro debug print in pfm_write_pmcs
	- added seed and mask to debug print in pfm_write_pmds
	- shorten some of the debug prints
	- remove bogus sanity check from pfm_save_regs() in SMP.
	  this could cause invalid PMU state restore
	
	signed-off-by: eranian@hpl.hp.com
	Signed-off-by: Tony Luck <tony.luck@intel.com>

<kaos@sgi.com>
	[IA64] Correct bit test for salinfo oem decode
	
	The valid.oem_data bit is in different positions in each section.  Make
	the test for valid oem data a section specific test.
	 
	Signed-off-by: Keith Owens <kaos@sgi.com>
	Signed-off-by: Tony Luck <tony.luck@intel.com>

<bzolnier@trik.(none)>
	[ide] ide-disk: fix /proc/ide/hd?/smart_thresholds
	
	Add missing ->data_phase assignment.
	
	Signed-off-by: Bartlomiej Zolnierkiewicz <bzolnier@gmail.com>

<markgw@sgi.com>
	[IA64] sn_hwperf correctly handle bricks with multiple slabs
	
	The procfs handler for /proc/sgi_sn/sn_topology did
	not correctly handle multiple slabs in the same brick,
	e.g. a brick containing a compute node and an ionode.
	 
	Signed-off-by: Mark Goodwin <markgw@sgi.com>
	Signed-off-by: Tony Luck <tony.luck@intel.com>

<bzolnier@trik.(none)>
	[ide] ide-probe: undecoded slave fixup
	
	Undecoded slave fixup is a oneliner patch to ide-probe to
	recognize both of my Maxtor drives that appear to have the same
	serial number, D3000000.
	
	Signed-off-by: tabris@tabris.net
	Signed-off-by: Bartlomiej Zolnierkiewicz <bzolnier@gmail.com>

<kaos@sgi.com>
	[IA64] Correct references from text/data to init.text/data.
	
	These errors were found by 'make buildcheck'.
	 
	Signed-off-by: Keith Owens <kaos@sgi.com>
	Signed-off-by: Tony Luck <tony.luck@intel.com>

<bzolnier@trik.(none)>
	[ide] pdc202xx_old: PDC20267 needs the same LBA48 fixup as PDC20265
	
	From: Krzysztof Chmielewski <k.chmielewski@neostrada.pl>
	
	Signed-off-by: Bartlomiej Zolnierkiewicz <bzolnier@gmail.com>

<herbert@gondor.apana.org.au>
	[TCP]: Move tcp_get_info() into tcp.c
	
	In my recent foray into tcp_diag I discovered some ugly looking ifdef's
	on CONFIG_IPV6 that'll break when IPv6 is built as a module.  In order
	to fix it, we need to allow tcp_diag to be built as a module.
	
	So here is a start.  This patch move tcp_get_info from tcp_diag.c into
	the site of the other caller, tcp.c.
	
	Signed-off-by: Herbert Xu <herbert@gondor.apana.org.au>
	Signed-off-by: David S. Miller <davem@davemloft.net>

<juhl-lkml@dif.dk>
	[NET]: Fix spelling error for IPComp help in Kconfig.
	
	Signed-off-by: Jasper Juhl <juhl-lkml@dif.dk>
	Signed-off-by: David S. Miller <davem@davemloft.net>

<bzolnier@trik.(none)>
	[ide] remove unused internal exports from ide core
	
	From: Arjan van de Ven <arjan@fenrus.demon.nl>
	
	ide-iops.c exports a few functions that either have no users or have no
	users AND shouldn't be used by drivers; the patch below unexports them.
	
	-EXPORT_SYMBOL(SELECT_INTERRUPT);
	-EXPORT_SYMBOL(SELECT_MASK);
	-EXPORT_SYMBOL(QUIRK_LIST);
	-EXPORT_SYMBOL(ata_vlb_sync);
	
	only used in the core ide code
	
	-EXPORT_SYMBOL(ata_input_data);
	-EXPORT_SYMBOL(ata_output_data);
	
	drivers should (and do) use the hwif-> function pointer variant of these,
	these functions are internal and used for setting the default hwif->
	function pointers only. No need to export, in fact exporting is only asking
	for accidents
	
	Signed-off-by: Bartlomiej Zolnierkiewicz <bzolnier@gmail.com>

<bzolnier@trik.(none)>
	[ide] add pci_get_legacy_ide_irq()
	
	This patch adds pci_get_legacy_ide_irq() to the PCI layer for dealing
	with PCI IDE chipsets that use the "legacy mode" IRQ routing, thus
	violating the normal PCI routing.  The generic implementation provides
	IRQ numbers 14 and 15, and it adds a ppc64 specific one with platform
	callbacks so that a plaform can provide different IRQ numbers for "legacy"
	IDE.  I only fixed the amd7xxx.c driver for now, I expect people using
	this interface will slowly fix their drivers (I will fix via soon as I'll
	need it too, and maybe a few others).
	
	Signed-off-by: Benjamin Herrenschmidt <benh@kernel.crashing.org>
	Signed-off-by: Bartlomiej Zolnierkiewicz <bzolnier@gmail.com>

<bzolnier@trik.(none)>
	[ide] add ide_use_dma()
	
	Should prevent bugs like the recent piix one in the future.
	
	Signed-off-by: Bartlomiej Zolnierkiewicz <bzolnier@gmail.com>

<jasonuhl@sgi.com>
	[IA64] fix pgtable.h comments
	
	Remove some statements from comments in <asm-ia64/pgtable.h> whose
	correctness is page size dependent ... and based on using an 8k
	page size, which almost nobody actually uses.
	 
	Signed-off-by: Jason Uhlenkott <jasonuhl@sgi.com>
	Signed-off-by: Tony Luck <tony.luck@intel.com>

<steiner@sgi.com>
	[IA64] Delete obsolete code from SGI console driver
	
	Delete obsolete code that supports the SGI simulator. This
	support code has been moved into the fakeprom and is no
	longer required in the kernel.
	 
	Signed-off-by: Jack Steiner <steiner@sgi.com>
	Signed-off-by: Tony Luck <tony.luck@intel.com>

<bzolnier@trik.(none)>
	[ide] remove needless exports from ide-taskfile.c
	
	Also remove unused MAX_DMA define.
	
	Signed-off-by: Bartlomiej Zolnierkiewicz <bzolnier@gmail.com>

<sam@mars.ravnborg.org>
	kbuild/usr: initramfs list fixed and simplified
	
	Moving logic to scripts/gen_initramfs_list.sh make a nice cleanup in
	usr/Makefile.
	A new initramfs image will be generated if the initramfs_list file changes.
	This patch also fixes the bug with make O=..
	
	Signed-off-by: Sam Ravnborg <sam@ravnborg.org>

<trini@kernel.crashing.org>
	kbuild: warning fixes on Solaris 9
	
	The following set of patches is based loosely on the patches that
	Jean-Christophe Dubois came up with for 2.6.7.  Where as the original
	patches added a number of casts to unsigned char, I went the route of
	making the chars be explicitly signed.  I honestly don't know which
	route is better to go down.  Doing this is the bulk of the patch.  Out
	of the rest of the odds 'n ends is that on Solaris, Elf32_Word is a
	ulong, which means all of the printf's are unhappy (uint format, ulong
	arg) for most of the typedefs.
	
	Signed-off-by: Tom Rini <trini@kernel.crashing.org>
	Signed-off-by: Sam Ravnborg <sam@ravnborg.org>

<juhl-lkml@dif.dk>
	kconfig: Small spelling fix for MODULE_SRCVERSION_ALL Kconfig
	
	Here's a trivial patch fixing a small spelling error in init/Kconfig in
	the description of MODULE_SRCVERSION_ALL
	
	Signed-off-by: Jesper Juhl <juhl-lkml@dif.dk>
	Signed-off-by: Sam Ravnborg <sam@ravnborg.org>

<rmk+lkml@arm.linux.org.uk>
	arm: Fix ARM kernel build with permitted binutils versions
	
	All ARM binutils versions post 2.11.90 contains an extra "feature" which
	interferes with the kernel in various ways - extra "mapping symbols"
	in the ELF symbol table '$a', '$t' and '$d'.  This causes two problems:
	
	1. Since '$a' symbols have the same value as function names, this
	   causes anything which uses the kallsyms infrastructure to report
	   wrong values.
	2. programs which parse System.map do not expect symbols to start with
	   '$'.
	
	Signed-off-by: Russell King <rmk@arm.linux.org.uk>
	Signed-off-by: Sam Ravnborg <sam@ravnborg.org>
	
	===== kernel/module.c 1.120 vs edited =====

<tgraf@suug.ch>
	[PKT_SCHED]: pkt_cls.h needs pkt_sched.h
	
	Signed-off-by: David S. Miller <davem@davemloft.net>

<tgraf@suug.ch>
	[PKT_SCHED]: Add net/sch_generic.h with generic sched definitions.
	
	Adds net/sch_generic.h containing all bits directly referenced by
	schedulers and classifiers. Map of users:
	
	Group 1)
	 struct qdisc_rate_table         sch_*, tcf_police -> cls_*
	
	   Could theoretically be moved to pkt_sched.h with Patch 4
	   but the long term goal it so make net/act_api.h to being
	   dependent on net/pkt_sched.h
	
	Group 2)
	 struct Qdisc                    sch_*, tcf_proto -> cls_*
	 struct Qdisc_ops                sch_*, tcf_proto -> cls_*
	 struct Qdisc_class_ops          sch_*, tcf_proto -> cls_*
	 struct tcf_proto_ops            sch_*, cls_*
	 struct tcf_proto                sch_*, cls_*
	
	   Obviously used by schedulers but also by classifiers to
	   bind classes (tcf_proto -> Qdisc -> Qdisc_ops ->
	   Qdisc_class_ops). tcf_proto OTOH is used by schedulers,
	   (neat cross usage).
	
	Group 3)
	 struct tcf_result               sch_*, cls_*
	
	   Used to communicate between scheduler and classifer
	   to report classify result.
	 
	Group 4)
	 sch_tree_(un)lock               sch_*, cls_*
	 tcf_tree_(un)lock               sch_*, cls_*
	 qdisc(un)lock_tree              sch_*, cls_*
	   
	   Randomly used in schedulers and classifiers.
	 
	Group 5)
	 tcf_destroy                     sch_*, cls_api.c
	
	   Coud theoretically be moved to pkt_sched.h if we include
	   pkt_sched.h in cls_api.c but this is really generic and
	   it seemd cleaner to have it here. This would be the only
	   classifier related action in pkt_sched.h
	
	The following types are referenced in sch_generic.h but defined in
	either pkt_cls.h or pkt_sched.h because they will never be used
	by the other side:
	
	  - qdisc_walker (pkt_sched.h)
	  - tcf_walker (pkt_cls.h)
	
	Signed-off-by: Thomas Graf <tgraf@suug.ch>
	Signed-off-by: David S. Miller <davem@davemloft.net>

<tgraf@suug.ch>
	[PKT_SCHED]: Remove obsolete definitions in pkt_cls.h
	
	Removes all obsolete definitions in pkt_cls.h now in sch_generic.h
	and includes them via sch_generic.h.
	
	Signed-off-by: Thomas Graf <tgraf@suug.ch>
	Signed-off-by: David S. Miller <davem@davemloft.net>

<tgraf@suug.ch>
	[PKT_SCHED]: Add net/act_api.h with public action/policer bits
	
	Adds net/act_api.h containing all public action/policer bits used
	by schedulers and classifiers
	
	Signed-off-by: Thomas Graf <tgraf@suug.ch>
	Signed-off-by: David S. Miller <davem@davemloft.net>

<tgraf@suug.ch>
	[PKT_SCHED]: Remove obsolete definitions in pkt_sched.h
	
	Removes all obsolete definitions in pkt_sched.h now in sch_generic.h
	or act_api.h.
	
	Signed-off-by: Thomas Graf <tgraf@suug.ch>
	Signed-off-by: David S. Miller <davem@davemloft.net>

<tgraf@suug.ch>
	[PKT_SCHED]: Transform pkt_sched.h prototypes to be extern
	
	Signed-off-by: Thomas Graf <tgraf@suug.ch>
	Signed-off-by: David S. Miller <davem@davemloft.net>

<tgraf@suug.ch>
	[PKT_SCHED]: Move tc_classify from pkt_cls.h to sch_api.c
	
	tc_classiy has grown too big to be inlined, move it to sch_api.c
	and export it.
	
	Signed-off-by: Thomas Graf <tgraf@suug.ch>
	Signed-off-by: David S. Miller <davem@davemloft.net>

<tgraf@suug.ch>
	[PKT_SCHED]: psched_*_per_* can be static
	
	Signed-off-by: Thomas Graf <tgraf@suug.ch>
	Signed-off-by: David S. Miller <davem@davemloft.net>

<tgraf@suug.ch>
	[PKT_SCHED]: Cleanup cls_set_class
	
	Clean up a really messy cross reference where a macro cls_set_class
	in pkt_sched.h would point to a function tcf_set_class in cls_api.c
	that uses a inlined function __cls_set_class in pkt_sched.h again.
	
	Make tcf_set_class be cls_set_class since it was never used and
	inline it as well.
	
	Signed-off-by: Thomas Graf <tgraf@suug.ch>
	Signed-off-by: David S. Miller <davem@davemloft.net>

<tgraf@suug.ch>
	[PKT_SCHED]: Inline psched_tod_diff
	
	Signed-off-by: Thomas Graf <tgraf@suug.ch>
	Signed-off-by: David S. Miller <davem@davemloft.net>

<tgraf@suug.ch>
	[PKT_SCHED]: Use new header architecture
	
	Signed-off-by: Thomas Graf <tgraf@suug.ch>
	Signed-off-by: David S. Miller <davem@davemloft.net>

<zach@vmware.com>
	[PATCH] faster signal handling on x86
	
	Optimize away the unconditional write to debug registers on signal delivery
	path.  This is already done on x86_64.
	
	We only need to write to dr7 if there is a breakpoint to re-enable, and 
	MOVDR is a serializing instruction, which is expensive.  Getting rid of 
	it gets a 33% faster signal delivery path (at least on Xeon - I didn't
	test other CPUs, so your gain may vary).
	
	[ Editors note: it's likely only that slow on Netburst.  Serializing is
	  not that expensive, but it is likely that writing to %db7 invalidates
	  the trace cache, which explains why it's so slow on Xeon - it's not
	  just the op itself, it has to re-populate the cache all the time.
						--- Linus ]
	
	
	Measured delta TSC for three paths on a 2.4GHz Xeon.
	
	1) With unconditional write to dr7 :  800-1000 cycles
	2) With conditional write to dr7   :  84-112 cycles
	3) With unlikely write to dr7      :  84 cycles
	
	Performance test using divzero microbenchmark (3 million divide by zeros):
	
	With unconditional write:
	   7.445 real / 6.136 system
	   7.529 real / 6.482 system
	   7.541 real / 5.974 system
	   7.546 real / 6.217 system
	   7.445 real / 6.167 system
	
	With unlikely write:
	   5.779 real / 4.518 system
	   5.783 real / 4.591 system
	   5.552 real / 4.569 system
	   5.790 real / 4.528 system
	   5.554 real / 4.382 system
	
	That's about a 33% speedup - more than I expected; apparently getting rid
	of the serializing instruction makes the do_signal path much faster.
	
	Zachary Amsden (zach@vmware.com)

<hadi@cyberus.ca>
	[PKT_SCHED]: Add generic packet editor.
	
	Signed-off-by: Jamal Hadi Salim <hadi@cyberus.ca>
	Signed-off-by: David S. Miller <davem@davemloft.net>

<jgarzik@pobox.com>
	[libata] use kunmap_atomic() correctly

<davem@nuts.davemloft.net>
	[PKT_SCHED]: Make net/tc_act/tc_pedit.h include net/act_api.h
	
	Signed-off-by: David S. Miller <davem@davemloft.net>

<steiner@sgi.com>
	[IA64-SGI] Update asm-ia64/sn/sn_cpuid.h macros
	
	SGI SN code currently makes assumptions about the bits in the LID
	register. These assumptions do not conform to the bit specifications
	from Intel. For example, SN currently assumes that bits [28:16] of
	the LID contain the physical node ID of a node.
	 
	This patch eliminates these assumptions. A SAL call is now used to translate
	LID values to the NASID/subnode/slice values that are needed for SN
	platforms. The results of the SAL call are saved in the SN nodepda.
	
	Signed-off-by: Jack Steiner <steiner@sgi.com>
	Signed-off-by: Tony Luck <tony.luck@intel.com>

<steiner@sgi.com>
	[IA64-SGI] Delete simulator support from SN idle loop
	
	Delete hack for supporting simulator for SN platforms. This capability
	has been moved into the simulator environment & is no longer required
	in the kernel.
	
	Signed-off-by: Jack Steiner <steiner@sgi.com>
	Signed-off-by: Tony Luck <tony.luck@intel.com>

<pfg@sgi.com>
	[IA64-SGI] only allocate irq if the device can interrupt
	
	Signed-off-by: Patrick Gefre <pfg@sgi.com>
	Acked-by: Mike Habeck <habeck@sgi.com>
	Signed-off-by: Tony Luck <tony.luck@intel.com>

<tony.luck@intel.com>
	[IA64] Need <asm/meminit.h> for GRANULEROUNDDOWN
	
	Alex's change for mem=/max_addr= now needs to include meminit.h
	
	Signed-off-by: Tony Luck <tony.luck@intel.com>

<herbert@gondor.apana.org.au>
	[NETLINK]: Remove netlink_sock_nr
	
	This patch removes netlink_sock_nr which is only used by a printk
	statement in af_netlink.c.  Even that's only there if
	NETLINK_REFCNT_DEBUG is defined.
	
	If we were really looking for netlink refcnt bugs there are probably
	better places to do that anyway.
	
	Signed-off-by: Herbert Xu <herbert@gondor.apana.org.au>
	Signed-off-by: David S. Miller <davem@davemloft.net>

<aia21@cantab.net>
	NTFS: Ensure the mft record size does not exceed the PAGE_CACHE_SIZE at
	      mount time as this cannot work with the current implementation.
	
	Signed-off-by: Anton Altaparmakov <aia21@cantab.net>

<tony@com.rmk.(none)>
	[ARM PATCH] 2162/1: OMAP update 1/8: Improved cpu detection and serial init
	
	Patch from Tony Lindgren
	
	This patch improves the OMAP cpu detection during the boot,
	and adds board-specific init for the serial ports.
	
	Signed-off-by: Tony Lindgren
	

<tony@com.rmk.(none)>
	[ARM PATCH] 2164/1: OMAP update 3/8: Include files
	
	Patch from Tony Lindgren
	
	This patch syncs the mainline kernel with the linux-omap tree.
	The highlights of the patch are:
	- Collapse OMAP 1610, 6912 and 1710 into one processor group 16xx
	- USB updates by David Brownell
	- Pin multiplexing updates by David Brownell
	- Board specific low level serial port init
	
	Signed-off-by: Tony Lindgren
	

<tony@com.rmk.(none)>
	[ARM PATCH] 2165/1: OMAP update 4/X: Replace 1610 and 5912 header files with 16xx
	
	Patch from Tony Lindgren
	
	This patch replaces old OMAP headers for 1610 and 5912. These
	headers are replaced with a common omap16xx.h header file.
	
	Signed-off-by: Tony Lindgren
	

<aia21@cantab.net>
	NTFS: Check for location of attribute name and improve error handling in
	      general in fs/ntfs/inode.c::ntfs_read_locked_inode() and friends.
	
	Signed-off-by: Anton Altaparmakov <aia21@cantab.net>

<tony@com.rmk.(none)>
	[ARM PATCH] 2166/1: OMAP update 5/8: Change OMAP to use generic clock framework
	
	Patch from Tony Lindgren
	
	This patch by Tuukka Tikkanen changes OMAP to use ARM generic
	clock framework instead of older OMAP specific clock framework.
	Patch replaces old clocks.c with new clock.[ch].
	
	Signed-off-by: Tony Lindgren
	

<tony@com.rmk.(none)>
	[ARM PATCH] 2167/1: OMAP update 6/8: Add graphics acceleration support to DMA
	
	Patch from Tony Lindgren
	
	This patch by Imre Deak adds support for graphics acceleration
	features on the OMAP DMA controller.
	
	Signed-off-by: Tony Lindgren
	

<tony@com.rmk.(none)>
	[ARM PATCH] 2169/1: OMAP update 8/8: McBSP update
	
	Patch from Tony Lindgren
	
	Patch by Samuel Ortiz to update OMAP McBSP support
	
	Signed-off-by: Tony Lindgren
	

<rmk@flint.arm.linux.org.uk>
	[ARM] Group linux/* includes together in mcbsp.c

<jbarnes@sgi.com>
	[IA64] fix machine vectors for mmiowb
	
	I left out some of the necessary machine vector magic in the mmiowb patch
	which caused the generic build to break.  This patch fixes it up by properly
	#defining it and #undefing it and adding a routine to lib/io.c.
	 
	Signed-off-by: Jesse Barnes <jbarnes@sgi.com>
	Signed-off-by: Tony Luck <tony.luck@intel.com>

<steiner@sgi.com>
	[IA64-SGI] Update asm-ia64/sn/sn_cpuid.h macros
	
	(I missed a file in the cleanup code that I sent yesterday.)
	
	SGI SN code currently makes assumptions about the bits in the LID
	register. These assumptions do not conform to the bit specifications
	from Intel. For example, SN currently assumes that bits [28:16] of
	the LID contain the physical node ID of a node.
	
	This patch eliminates these assumptions. A SAL call is now used to translate
	LID values to the NASID/subnode/slice values that are needed for SN
	platforms. The results of the SAL call are saved in the SN nodepda.
	
	Signed-off-by: Jack Steiner <steiner@sgi.com>
	Signed-off-by: Tony Luck <tony.luck@intel.com>

<hunold@linuxtv.org>
	[PATCH] DVB: rework debugging in av7110
	
	- [DVB] av7110: switch from stupid DEB_xx() debug macros to saner dprintk() style debugging
	- [DVB] av7110: fix dvb-ttpci ca write() polling
	- [DVB] budget: switch from stupid DEB_xx() debug macros to saner dprintk() style debugging
	
	Signed-off-by: Michael Hunold <hunold@linuxtv.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<hunold@linuxtv.org>
	[PATCH] DVB: misc. updates to the dvb-core
	
	- [DVB] ttusb_dec: add new 2000T type model number
	- [DVB] dvb_ca_en50221: properly zero out private pointer
	- [DVB] dvb-bt8xx: properly use a mutex when starting/stopping the dma engine, remove card list, it's not need anymore
	- [DVB] bt878: fix hex <=> dec typo (missing 0x prefix), mark remove bt878_remove() function __devexit_p
	- [DVB] dvb-core: add dvb_net_debug module parameter, remove some dead code
	
	Signed-off-by: Michael Hunold <hunold@linuxtv.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<hunold@linuxtv.org>
	[PATCH] DVB: add new driver
	
	- [DVB] add new driver for the Terratec CinergyT2/qanu USB2 DVB-T receiver, thanks to Daniel Mack and Holger Waechtler
	
	Signed-off-by: Michael Hunold <hunold@linuxtv.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<hunold@linuxtv.org>
	[PATCH] DVB: revamp dibusb driver
	
	- [DVB] dibusb: update documentation for the dibusb DVB driver
	- [DVB] dibusb: major overhaul of the driver, including adding new vendor and product ids from clones
	
	Signed-off-by: Michael Hunold <hunold@linuxtv.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<hunold@linuxtv.org>
	[PATCH] DVB: misc. updates to frontend drivers
	
	- [DVB] add legacy DishNetwork support to dvb core and stv0299, thanks to Jeremy Hall
	- [DVB] mt352: major cleanup, support DVICO FusionHDTV DVB-T, thanks to Christopher Pascoe
	
	Signed-off-by: Michael Hunold <hunold@linuxtv.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<tony@com.rmk.(none)>
	[ARM PATCH] 2170/1: OMAP update 2/8, take 2: Arch files
	
	Patch from Tony Lindgren
	
	This patch syncs the mainline kernel with the linux-omap tree.
	The highlights of the patch are:
	- Collapse OMAP 1610, 6912 and 1710 into one processor group 16xx
	- USB updates by David Brownell
	- Pin multiplexing updates by David Brownell
	- Board specific low level serial port init
	
	Signed-off-by: Tony Lindgren
	

<ben-linux@org.rmk.(none)>
	[ARM PATCH] 2134/3: S3C2410 - Power Management core (1/4)
	
	Patch from Ben Dooks
	
	Core support for S3C2410 suspend to SDRAM
	
	Signed-off-by: Ben Dooks 

<ben-linux@org.rmk.(none)>
	[ARM PATCH] 2135/3: S3C2410 - Power Management timer resume (2/4)
	
	Patch from Ben Dooks
	
	Support for restarting the system timer after a suspend-resume
	cycle.
	
	Also fixes the following
	
	 - missed partial setup for BAST and VR1000
	 - added IPAQ RX3715 timer setup
	
	Signed-off-by: Ben Dooks 

<tony.luck@intel.com>
	[IA64] fix(?) unwind data for ia64_monarch_init_handler
	
	Roland> I can see the ERROR: comes from unwcheck.pl but I have no
	Roland> idea what it is checking (something to do with unwind info?)
	Roland> let alone how to fix the problem.
	
	Roland> Is this benign or is there something to be fixed?
	
	David> Both: it needs to be fixed, but it's (mostly) benign since the only
	David> time we're executing that code is when the unwinder can't run anyhow,
	David> since we're in the middle of delivering an MCA.  That may (and
	David> probably will) change in the future, so it's something that should be
	David> fixed.
	
	David> I was hoping someone who knows and could test the MCA code better
	David> would fix it but that hasn't happened yet, so it's time for plan B.
	
	David> Tony, below is a patch that fixes the unwind info enough that the
	David> warning/error goes away.  The unwind-info may not be 100% correct
	David> though.  Someone who can test/exercise this code may want to check on
	David> that.
	
	Signed-off-by: Tony Luck <tony.luck@intel.com>

<ben-linux@org.rmk.(none)>
	[ARM PATCH] 2136/1: S3C2410 - Power Management IRQ wakeup (3/4)
	
	Patch from Ben Dooks
	
	Allow all wake-up capable IRQs to be configured
	as such
	
	Signed-off-by: Ben Dooks 

<ben-linux@org.rmk.(none)>
	[ARM PATCH] 2138/1: S3C2410 - Power Management documentation (4/4)
	
	Patch from Ben Dooks
	
	Documentation for the suspend and resume code in
	Documentation/arm/Samsung-S3C24XX/Suspend.txt
	
	Signed-off-by: Ben Dooks 

<ben-linux@org.rmk.(none)>
	[ARM PATCH] 2146/1: S3C2410 - serial fixes and s3c2440 updates
	
	Patch from Ben Dooks
	
	fixes the following:
	
	 - no debug output in the head code for either s3c2410 or s3c2440
	 - fifo size calculation in the low-level debugging code
	 - serial constants for s3c2440 serial fifo sizes
	 - added s3c2440 support for uncompress.h
	
	Signed-off-by: Ben Dooks 

<ben-linux@org.rmk.(none)>
	[ARM PATCH] 2147/1: S3C2410 - reorganise board support
	
	Patch from Ben Dooks
	
	this patch makes the following changes:
	
	 - renames struct s3c2410_board to s3c24xx_board
	 - moves board registration into cpu.c
	
	Signed-off-by: Ben Dooks 

<ben-linux@org.rmk.(none)>
	[ARM PATCH] 2148/1: S3C2410 - I2C platfrom data
	
	Patch from Ben Dooks
	
	Attached is the include file for the i2c platform data
	for the s3c2410/s3c2440 I2C controller
	
	Signed-off-by: Ben Dooks 

<ben-linux@org.rmk.(none)>
	[ARM PATCH] 2149/1: S3C2410 - usb-simtec.c fixes and cleanup
	
	Patch from Ben Dooks
	
	This patch does the following
	
	 - removes the setup code to change device/host
	   behaviour, which does not belong here
	
	 - tidies up the debug output
	
	 - fixes the call to free_irq() to pass the
	   right info
	
	 - ensures the usb code is notified when the
	   over-current condition is removed
	
	Signed-off-by: Ben Dooks 

<ben-linux@org.rmk.(none)>
	[ARM PATCH] 2151/1: S3C2410 - fix guard on include/asm-arm/arch-s3c2410/regs-iic.h
	
	Patch from Ben Dooks
	
	fix guard define so it does not clash with another header
	file.
	
	Signed-off-by: Ben Dooks 

<ben-linux@org.rmk.(none)>
	[ARM PATCH] 2152/1: S3C2410 - lcd controller register fixes
	
	Patch from Ben Dooks
	
	Fix the mis-definition of the following registers / bits
	in the s3c2410 LCD controller register header:
	
	- S3C2410_LCDCON1_MMODE
	- S3C2410_LCDCON1_ENVID
	- S3C2410_LCDCON3_HBPD
	- S3C2410_LCDCON3_WDLY
	
	and adds the following missing register definitoons
	
	- S3C2410_LCDBANK
	- S3C2410_LCDBASEU
	- S3C2410_OFFSIZE
	- S3C2410_PAGEWIDTH
	
	thanks to Arnaud Patard for finding these problems
	
	Signed-off-by: Ben Dooks 
	Signed-off-by: Arnaud Patard 

<ben-linux@org.rmk.(none)>
	[ARM PATCH] 2155/1: S3C2410 - fix definition of S3C2410_UDC_MAXP_REG
	
	Patch from Ben Dooks
	
	Attached is the fix for the S3C2410_UDC_MAXP_REG
	definition.
	
	Signed-off-by: Ben Dooks 
	Signed-off-by: Arnaud Patard 

<ben-linux@org.rmk.(none)>
	[ARM PATCH] 2156/1: S3C2410 - Documentation updates
	
	Patch from Ben Dooks
	
	Update the following in Documentation/arm/Samsing-S3C24XX/
	
	- mtd merge update
	- list of contributors
	- change history
	
	Signed-off-by: Ben Dooks 

<ben-linux@org.rmk.(none)>
	[ARM PATCH] 2157/2: S3C2410 - default configuration update
	
	Patch from Ben Dooks
	
	Updated default configurations for s3c2410 and bast
	
	Signed-off-by: Ben Dooks 

<ben-linux@org.rmk.(none)>
	[ARM PATCH] 2158/1: S3C2410 - clean warnings from arch/arm/mach-s3c2410/pm.c
	
	Patch from Ben Dooks
	
	Clean warnings about unsigned long / unsigned int printk args
	and update comment on debugging
	
	Depends on patch 2134/3
	
	Signed-off-by: Ben Dooks 

<ben-linux@org.rmk.(none)>
	[ARM PATCH] 2159/1: BAST - include/asm-arm/arch-s3c2410/bast-pmu.h
	
	Patch from Ben Dooks
	
	Header file for BAST Power Management unit register
	definitions
	
	Signed-off-by: Ben Dooks 

<ben-linux@org.rmk.(none)>
	[ARM PATCH] 2161/1: S3C2410 - uncompressor low level uart configuration
	
	Patch from Ben Dooks
	
	Allow the uncompressing messages to be sent to the UART
	specified in the kernel configuration, instead of just
	UART 0. This includes the Kconfig update to make this
	option available all the time, and to rename it's
	description text.
	
	This patch also fixes s3c2440 support for the
	uncompressor
	
	Signed-off-by: Ben Dooks 

<ben-linux@org.rmk.(none)>
	[ARM PATCH] 2139/1: BAST - Power management initialisation
	
	Patch from Ben Dooks
	
	Allow power managemnet support for the Simtec EB2410ITX (BAST)
	
	Signed-off-by: Ben Dooks 

<ben-linux@org.rmk.(none)>
	[ARM PATCH] 2172/1: S3C2410 - clock updates
	
	Patch from Ben Dooks
	
	This patch does the following:
	
	- move the clock initialisation to just after the cpu init
	- add the two clocks for the s3c2440
	- add dclk0/1 and clkout0/1 definitions
	- add list of clocks to the board specific struct
	- fix initialisation of the clock control
	- update handling of parent clocks for >1 parent
	
	this fixes the following problems:
	
	- serial console with no clock sources
	- clocks specific to various boards
	- hang if LCD controller enabled at start time
	
	Signed-off-by: Ben Dooks 

<rmk@flint.arm.linux.org.uk>
	[MMC] Fix incorrectly balanced spin_lock_irq()

<torvalds@ppc970.osdl.org>
	Don't ask the user for esoteric compiler tweaks by default.
	
	You can get all the kernel tweaking if you say yes to EMBEDDED,
	which exposes questions that make sense only for experts.

<dhowells@redhat.com>
	[PATCH] ppc/ppc64: hook up key management syscalls
	
	The attached patch permits my key management stuff to be used on PPC, PPC64
	and PPC on PPC64. Syscall numbers were allocated by Paul Mackerras.
	
	I've updated my keyctl utility to work on PPC/PPC64 too:
	
		http://people.redhat.com/~dhowells/keys/keyctl.c
	
	Signed-Off-By: David Howells <dhowells@redhat.com>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<hollisb@us.ibm.com>
	[PATCH] HVSI hangup oops
	
	Testing revealed that the HVSI driver could oops if carrier
	detect dropped mid-data transfer.
	
	This fixes it by properly locking the hangup.
	
	Signed-off-by: Hollis Blanchard <hollisb@us.ibm.com>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<hollisb@us.ibm.com>
	[PATCH] HVSI early boot console
	
	This patch adds support for the udbg early console interfaces
	when using an HVSI console.
	
	Signed-off-by: Hollis Blanchard <hollisb@us.ibm.com>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<hollisb@us.ibm.com>
	[PATCH] HVSI reset support
	
	This patch adds support for when the service processor (the
	other end of the console) resets due to a critical error; we can resume
	the connection when it comes back.
	
	Signed-off-by: Hollis Blanchard <hollisb@us.ibm.com>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<rmk@flint.arm.linux.org.uk>
	[MMC] Add support for passing scatterlists to MMC host drivers.
	
	This is intended to remove block layer knowledge from MMC host
	drivers.  Host drivers are expected to use the scatter list for
	data transfers rather than accessing the struct request.

<rmk@flint.arm.linux.org.uk>
	[MMC] Remove block knowledge from MMCI driver.
	
	Convert MMCI driver to use the scatter list provided by the upper
	MMC layers.  This removes all knowledge of struct request from the
	MMCI driver.

<tgraf@suug.ch>
	[PKT_SCHED]: Remove bogus lock and make cls_set_class return unsigned long.
	
	Signed-off-by: Thomas Graf <tgraf@suug.ch>
	Signed-off-by: David S. Miller <davem@davemloft.net>

<laforge@netfilter.org>
	[NET]: Fix NLM_F_MULTI in tcp_diag and xfrm_user
	
	Signed-off-by: Harald Welte <laforge@netfilter.org>
	Signed-off-by: Herbert Xu <herbert@gondor.apana.org.au>
	Signed-off-by: David S. Miller <davem@davemloft.net>

<torvalds@ppc970.osdl.org>
	Fix up "compat_sys_keyctl()" system call.
	
	Fix name, and make sure that it's listed as a conditional
	system call so that we stub it out to ENOSYS if the kernel
	isn't compiled with key management support.

<chas@relax.cmf.nrl.navy.mil>
	[ATM]: don't leak skb on as_indicate failure; don't wakeup twice on as_close
	
	Signed-off-by: Chas Williams <chas@cmf.nrl.navy.mil>
	Signed-off-by: David S. Miller <davem@davemloft.net>

<marcel@holtmann.org>
	[Bluetooth] Ignore the BPA 100/105 devices
	
	The BPA 100/105 devices from Digianswer identify themself with the USB
	class code for H:2 devices, but they are using quite a different host
	transport protocol and so ignore them.
	
	Signed-off-by: Marcel Holtmann <marcel@holtmann.org>

<rmk@flint.arm.linux.org.uk>
	[MMC] Switch PXAMCI to use supplied scatterlist.
	
	This converts the PXA MCI driver to use the supplied scatter list
	rather than accessing the struct request directly, thereby making
	this host driver independent of the block layer.
	
	We also clean up the driver to use a consistent driver name for
	resources.

<janitor@sternwelten.at>
	[PATCH] scsi/53c700: replace 	schedule_timeout() with
	
	Any comments would be appreciated.
	
	Description: Use msleep_interruptible() instead of
	schedule_timeout() to guarantee the task delays as expected.
	
	Signed-off-by: Nishanth Aravamudan <nacc@us.ibm.com>
	Signed-off-by: Maximilian Attems <janitor@sternwelten.at>
	Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

<tony@com.rmk.(none)>
	[ARM PATCH] 2173/1: OMAP update 7/8, take 3: Add PM support
	
	Patch from Tony Lindgren
	
	This patch by Dirk Behme, Todd Poynor et al adds power management
	support for OMAP. Suspend works on at least 1510 and 16xx.
	
	Signed-off-by: Tony Lindgren
	

<marcel@holtmann.org>
	[Bluetooth] Fix another disconnect race
	
	When the selecting of the alternate setting for the SCO audio support
	fails, the hci_usb_disconnect() will dereference a NULL pointer. To
	avoid this, the isoc_iface variable must be set before releasing the
	interface and unset afterwards.
	
	Signed-off-by: Marcel Holtmann <marcel@holtmann.org>

<rmk@flint.arm.linux.org.uk>
	[MMC] Deprecate "req" member of mmc_data structure.
	
	Host drivers should now use the scatterlist rather than accessing
	the request directly.  This marks the request pointer as being
	deprecated so that host driver authors get a chance to fix their
	drivers up before we remove this member.

<marcel@holtmann.org>
	[Bluetooth] Allow vendor specific packet types
	
	The vendor packet type 0xff is not handled at the moment. This patch
	corrects this behaviour and also adapts the security filter for this
	packet type.
	
	Signed-off-by: Marcel Holtmann <marcel@holtmann.org>

<janitor@sternwelten.at>
	[PATCH] scsi/scsi_lib: replace 	schedule_timeout() with
	
	Any comments would be appreciated.
	
	Description: Use msleep_interruptible() instead of
	schedule_timeout() to guarantee the task delays as expected.
	
	Signed-off-by: Nishanth Aravamudan <nacc@us.ibm.com>
	Signed-off-by: Maximilian Attems <janitor@sternwelten.at>
	Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

<trini@kernel.crashing.org>
	ppc32: Move request_irq() calls to arch_initcall() functions
	
	request_irq() needs to be called a bit later than we were
	doing before, causing crashes.
	
	Signed-off-by: Randy Vinson <rvinson@mvista.com>
	Signed-off-by: Tom Rini <trini@kernel.crashing.org>

<trini@kernel.crashing.org>
	ppc32: Fix warning in gen550 code.
	
	In gen550_dbg.c, cast addr in our direct_inb/oub routines to
	__iomem.
	
	Signed-off-by: Randy Vinson <rvinson@mvista.com>
	Signed-off-by: Tom Rini <trini@kernel.crashing.org>

<Kai.Makisara@kolumbus.fi>
	[PATCH] SCSI tape: remove remaining typedefs
	
	This patch augments Christoph Hellwig's earlier patch by converting the local
	typedefs to struct definitions. One debugging printk format is also fixed. The
	patch is against 2.6.10-rc1, compiles and has been tested.
	
	Signed-off-by: Kai Makisara <kai.makisara@kolumbus.fi>
	Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

<davej@redhat.com>
	[CPUFREQ] Reevaluate users requests after denial.
	Sometimes, a user or userspace daemon wants a specific frequency is set,
	but that frequency is (temporarily) unavailable or becomes unavailable
	due to e.g. thermal considerations. As soon as this situation changes,
	the user wish should be re-evaluated. The attached patch saves the user
	wish in "cpu_set_freq", and re-uses that whenever appropriate.
	
	Thanks to Thomas Renninger for testing.
	
	Signed-off-by: Dominik Brodowski <linux@brodo.de>
	Signed-off-by: Dave Jones <davej@redhat.com>

<davej@redhat.com>
	[CPUFREQ] Don't break on FFFFFFFF'd frequencies.
	 
	Some BIOSes export invalid _PSS entries where all bits are set to one. While
	this is totally contrary to the ACPI specification, BIOS vendors try to
	tell userspace that these entries should not be considered or used. In order
	to not fail on such entries, the speedstep-centrino already contains a
	method to ignore these things. However, due to a wrong ordering of checks
	the driver aborts nonetheless. So move some checks around.
	
	
	Signed-off-by: Dominik Brodowski <linux@brodo.de>
	Signed-off-by: Dave Jones <davej@redhat.com>

<davej@redhat.com>
	[CPUFREQ] struct acpi_processor_performance *acpi_processor_perf should be static.
	
	Signed-off-by: Dominik Brodowski <linux@brodo.de>
	Signed-off-by: Dave Jones <davej@redhat.com>

<davej@redhat.com>
	[CPUFREQ] dbs_tuners_ins should be static.
	
	Signed-off-by: Dominik Brodowski <linux@brodo.de>
	Signed-off-by: Dave Jones <davej@redhat.com>

<davej@redhat.com>
	[CPUFREQ] Attribute definitions in cpufreq core should be static.
	
	Signed-off-by: Dominik Brodowski <linux@brodo.de>
	Signed-off-by: Dave Jones <davej@redhat.com>

<davej@redhat.com>
	[CPUFREQ] cpufreq_sysctl_table should be static even though it'll be gone soon.
	
	Signed-off-by: Dominik Brodowski <linux@brodo.de>
	Signed-off-by: Dave Jones <davej@redhat.com>

<davej@redhat.com>
	[CPUFREQ] Dothan is stepping 13  == 0x0D instead of 0x13 == 19
	
	Thanks to Brian Miles for debugging this issue.
	
	Signed-off-by: Dominik Brodowski <linux@brodo.de>
	Signed-off-by: Dave Jones <davej@redhat.com>

<davej@redhat.com>
	[CPUFREQ] Rename cpufreq acpi module.
	
	The "acpi" cpufreq driver uses the far too generic module name "acpi".
	Fix it by renaming it to "cpufreq-acpi". A MODULE_ALIAS("acpi"); will
	allow for backwards-compatible naming until 2005-06-30.
	
	Signed-off-by: Dominik Brodowski <linux@brodo.de>
	Signed-off-by: Dave Jones <davej@redhat.com>

<davej@redhat.com>
	[CPUFREQ] Unify the CPU_FREQ config option.
	
	Signed-off-by: Dominik Brodowski <linux@brodo.de>
	Signed-off-by: Dave Jones <davej@redhat.com>

<davej@redhat.com>
	[CPUFREQ] 2.4 API clarification.
	
	Clarify that cpufreq_set() and cpufreq_setmax() are parts of the 2.4. API
	to the userspace governor which will be removed soon after 2005-01-01.
	
	Signed-off-by: Dominik Brodowski <linux@brodo.de>
	Signed-off-by: Dave Jones <davej@redhat.com>

<davej@redhat.com>
	[CPUFREQ] Add a unified cpufreq debug infrastructure.
	
	cpufreq_debug_printk will print messages if
	
	a) debugging for the specified part is activated (add
	        1 for core,
	        2 for drivers,
	        4 for governors
	   and pass value as
	        cpufreq.debug=<value>
	   on the kernel command line).
	
	b) and either
	        b1) printk_ratelimit() allows it to be printed,
	        b2) the user disables ratelimit'ing by passing
	                cpufreq.debug_ratelimit=0
	            on the kernel command line, _or_
	        b3) during driver initialization [unless a different
	            driver has been initialized successfully] and
	            unloading, and whenever a new policy is set.
	
	            The last point may cause for numerous messages
	            if an userspace-based dynamic governor is used
	            which mis-uses the policy interface to set specific
	            frequencies. Oh, the ACPI processor.c interface
	            to the file "performance" uses the same trick,
	            but that interface is marked deprecated as well,
	            so I don't care. And debugging isn't activated
	            normally, you know...
	
	Signed-off-by: Dominik Brodowski <linux@brodo.de>
	Signed-off-by: Dave Jones <davej@redhat.com>

<davej@redhat.com>
	[CPUFREQ] Use the unified cpufreq debug infrastructure in the speedstep library.
	Modified existing dprintks and added a few which might be / have been
	of interest.
	
	Signed-off-by: Dominik Brodowski <linux@brodo.de>
	Signed-off-by: Dave Jones <davej@redhat.com>

<davej@redhat.com>
	[CPUFREQ] Use the unified cpufreq debug infrastructure in the speedstep-smi driver.
	Modified existing dprintks and added a few which might be / have been
	of interest.
	
	Signed-off-by: Dominik Brodowski <linux@brodo.de>
	Signed-off-by: Dave Jones <davej@redhat.com>

<davej@redhat.com>
	[CPUFREQ] Use the unified cpufreq debug infrastructure in the speedstep-ich driver.
	Modified existing dprintks and added a few which might be / have been
	of interest.
	
	Signed-off-by: Dominik Brodowski <linux@brodo.de>
	Signed-off-by: Dave Jones <davej@redhat.com>

<davej@redhat.com>
	[CPUFREQ] Use the unified cpufreq debug infrastructure in the speedstep-centrino driver.
	
	Modified existing dprintks and added a few which might be / have
	been of interest, and cleared some whitespace/tab confusion. The big
	comment regarding which frequency to pass as "old" value wasn't up to
	date any longer in two regards: the driver's behaviour had changed, and
	the core is know able to handle such things... anyways, the comment could
	be removed.
	
	Signed-off-by: Dominik Brodowski <linux@brodo.de>
	Signed-off-by: Dave Jones <davej@redhat.com>

<davej@redhat.com>
	[CPUFREQ] Use the unified cpufreq debug infrastructure in the p4-clockmod driver.
	Modified existing dprintks and added a few which might be / have been
	of interest.
	
	Signed-off-by: Dominik Brodowski <linux@brodo.de>
	Signed-off-by: Dave Jones <davej@redhat.com>

<nico@org.rmk.(none)>
	[ARM PATCH] 2080/1: clean up io-{read|write}sl
	
	Patch from Nicolas Pitre
	
	- eliminate difference between ARMv3 and ARMv4 versions of io-readsl
	- unified little/big endian support
	- misc optimisations
	
	Signed-off-by: Nicolas Pitre 

<davej@redhat.com>
	[CPUFREQ] Use the unified cpufreq debug infrastructure in the longrun driver,
	and add some dprintks which might be / have been of interest.
	
	Signed-off-by: Dominik Brodowski <linux@brodo.de>
	Signed-off-by: Dave Jones <davej@redhat.com>

<davej@redhat.com>
	[CPUFREQ] Use the unified cpufreq debug infrastructure in the powernow-k8 driver.
	Modified existing dprintks.
	
	Signed-off-by: Dominik Brodowski <linux@brodo.de>
	Signed-off-by: Dave Jones <davej@redhat.com>

<davej@redhat.com>
	[CPUFREQ] Use the unified cpufreq debug infrastructure in the powernow-k7 driver.
	Modified existing dprintks, and removed the driver-only debug module
	parameter.
	
	Signed-off-by: Dominik Brodowski <linux@brodo.de>
	Signed-off-by: Dave Jones <davej@redhat.com>

<davej@redhat.com>
	[CPUFREQ] Use the unified cpufreq debug infrastructure in the longhaul driver.
	Modified existing dprintks, and removed the driver-only debug module
	parameter.
	
	Signed-off-by: Dominik Brodowski <linux@brodo.de>
	Signed-off-by: Dave Jones <davej@redhat.com>

<davej@redhat.com>
	[CPUFREQ] Use the unified cpufreq debug infrastructure in the gx-suspmod driver.
	Modified existing dprintks.
	
	Signed-off-by: Dominik Brodowski <linux@brodo.de>
	Signed-off-by: Dave Jones <davej@redhat.com>

<davej@redhat.com>
	[CPUFREQ] Use the unified cpufreq debug infrastructure in the acpi-cpufreq driver.
	Also convert the driver's ACPI debug messages to cpufreq debug messages.
	
	Signed-off-by: Dominik Brodowski <linux@brodo.de>
	Signed-off-by: Dave Jones <davej@redhat.com>

<davej@redhat.com>
	[CPUFREQ] Add (one each) dprintk for the performance and powersave cpufreq governors.
	
	Signed-off-by: Dominik Brodowski <linux@brodo.de>
	Signed-off-by: Dave Jones <davej@redhat.com>

<davej@redhat.com>
	[CPUFREQ] Add a few dprintks for the userspace cpufreq governor.
	
	Signed-off-by: Dominik Brodowski <linux@brodo.de>
	Signed-off-by: Dave Jones <davej@redhat.com>

<davej@redhat.com>
	[CPUFREQ] Add a few useful dprintks in the frequency table helpers.
	
	Signed-off-by: Dominik Brodowski <linux@brodo.de>
	Signed-off-by: Dave Jones <davej@redhat.com>

<davej@redhat.com>
	[CPUFREQ] Add a few useful dprintks to the cpufreq core
	
	Signed-off-by: Dominik Brodowski <linux@brodo.de>
	Signed-off-by: Dave Jones <davej@redhat.com>

<davej@redhat.com>
	[CPUFREQ] Show the CPUs which can only change frequencies at the same time in a sysfs file named "affected_cpus".
	The usefulness of such a file was first noted by Zwane Mwaikambo.
	
	Signed-off-by: Dominik Brodowski <linux@brodo.de>
	Signed-off-by: Dave Jones <davej@redhat.com>

<davej@redhat.com>
	[CPUFREQ] module_vid_table is only used if DEBUG isn't set, so put #ifdefs around it.
	
	Signed-off-by: Dominik Brodowski <linux@brodo.de>
	Signed-off-by: Dave Jones <davej@redhat.com>

<davej@redhat.com>
	[CPUFREQ] print_speed and speedbuffer are only used if DEBUG isn't set
	so put #ifdefs around them.
	
	Signed-off-by: Dominik Brodowski <linux@brodo.de>
	Signed-off-by: Dave Jones <davej@redhat.com>

<davej@redhat.com>
	[CPUFREQ] Use __ATTR in cpufreq.c attribute definitions.
	Fixes the lack of MODULE_OWNER setting [can't cause problems yet
	because cpufreq can only be built into the kernel], and allows
	for code reduction.
	
	Signed-off-by: Dominik Brodowski <linux@brodo.de>
	Signed-off-by: Dave Jones <davej@redhat.com>

<davej@redhat.com>
	[CPUFREQ] Set .owner in cpufreq_userspace.c sysfs attribute definition.
	
	Signed-off-by: Dominik Brodowski <linux@brodo.de>
	Signed-off-by: Dave Jones <davej@redhat.com>

<davej@redhat.com>
	[CPUFREQ] Use __ATTR in cpufreq_ondemand.c attribute definitions.
	Fixes the lack of MODULE_OWNER setting, and allows for code recuction.
	
	Signed-off-by: Dominik Brodowski <linux@brodo.de>
	Signed-off-by: Dave Jones <davej@redhat.com>

<davej@redhat.com>
	[CPUFREQ] Set .owner in freq_table's sysfs definition.
	
	Signed-off-by: Dominik Brodowski <linux@brodo.de>
	Signed-off-by: Dave Jones <davej@redhat.com>

<davej@redhat.com>
	[CPUFREQ] ondemand return EINVAL on errors.
	
	Return -EINVAL instead of a non-error-value if the user echo'es something
	bad into attributes generated by the ondemand cpufreq governor.
	
	Signed-off-by: Dominik Brodowski <linux@brodo.de>
	Signed-off-by: Dave Jones <davej@redhat.com>

<davej@redhat.com>
	[CPUFREQ] NVidia nForce2 FSB cpufreq driver.
	Adds cpufreq support for FSB changing on nForce2 platforms.  On this
	plattforms the PCI/AGP clock is independent from the FSB and it also
	doesn't depend on the used CPU.
	
	From: Sebastian Witt <se.witt@gmx.net>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Dave Jones <davej@redhat.com>

<trini@kernel.crashing.org>
	ppc32: Remove sandpoint_early_serial_map()
	
	This was causing problems and isn't needed.
	
	Signed-off-by: Randy Vinson <rvinson@mvista.com>
	Signed-off-by: Tom Rini <trini@kernel.crashing.org>

<greearb@candelatech.com>
	[VLAN]: Sync code and feature set with 2.4.x
	
	Signed-off-by: David S. Miller <davem@davemloft.net>

<viro@parcelfarce.linux.theplanet.co.uk>
	[PATCH] FB_INTEL Kconfig breakage
	
		FB_INTEL selects AGP_INTEL (i.e. intel-agp.c), which is i386-only.
	AGP_INTEL itself depends on X86 && !X86_64 and for a good reason - it doesn't
	build elsewhere.
	
		Added dependency to FB_INTEL itself; as it is allmodconfig had been
	broken on everything outside i386.
	
	Signed-off-by: Al Viro <viro@parcelfarce.linux.theplanet.co.uk>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<randolph@tausq.org>
	[PATCH] Fix cc-option call for xcompiles
	
	If an arch Makefile overrides CROSS_COMPILE (e.g. parisc, mips, ...)
	then the cc-option call in the main Makefile uses the wrong compiler 
	to check for options.
	
	Signed-off-by: Randolph Chung <tausq@debian.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<torvalds@ppc970.osdl.org>
	Fix atyfb modular build on ppc.
	
	Noted by Al Viro, superhacker and endlessly patient person.
	
	Sign up today!
	
	You too can become a superhacker by setting up a cross-compile
	environment for all architectures and building "allmodconfig"
	trees all day long to find places where others have screwed up.

<torvalds@ppc970.osdl.org>
	Fix kbuild problem with O=
	
	Kbuild can't fix up "-I $(src)/.." to the right directory
	due to the particular magic transformations it does on -I
	arguments. Remove the space, use "-I$(src)/.." and it works.
	
	Hopefully Sam will fix this build issue. 
	
	I think somebody should dress up as scripts/Makefile.lib
	for Halloween. Now _that_ would be scary.

<jgarzik@pobox.com>
	[libata] cosmetic libata.h changes to make merging with 2.4 easier

<gerg@snapgear.com>
	[PATCH] remove unused include in m68knommu mm/init.c
	
	Remove unused shglcore.h include from m68knommu/mm/init.c
	That file will be removed in an upcoming patch.
	
	Signed-off-by: Greg Ungerer <gerg@snapgear.com>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<gerg@snapgear.com>
	[PATCH] remove unused include in m68knommu mm/memory.c
	
	Remove unused shglcore.h include from m68knommu/mm/memory.c
	That file will be removed in an upcoming patch.
	
	Signed-off-by: Greg Ungerer <gerg@snapgear.com>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<gerg@snapgear.com>
	[PATCH] remove uneeded includes (5206e/config.c)
	
	Remove uneeded includes. asm/delay.h is not needed here.
	
	Signed-off-by: Greg Ungerer <gerg@snapgear.com>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<gerg@snapgear.com>
	[PATCH] remove uneeded includes (5249/config.c)
	
	Remove uneeded includes. asm/delay.h is not needed here.
	
	Signed-off-by: Greg Ungerer <gerg@snapgear.com>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<gerg@snapgear.com>
	[PATCH] remove uneeded includes (5307/config.c)
	
	Remove uneeded includes. asm/delay.h is not needed here.
	
	Signed-off-by: Greg Ungerer <gerg@snapgear.com>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<gerg@snapgear.com>
	[PATCH] remove unused shglcore support
	
	Remove unused SHGLCORE support.
	
	Signed-off-by: Greg Ungerer <gerg@snapgear.com>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<gerg@snapgear.com>
	[PATCH] clean up HZ definition
	
	Clean up the definition of HZ on m68knommu systems.
	There is really only a couple of cases to handle, most
	boards use the traditional 100Hz still. Only special
	case out those that don't. The current code is just
	spaghetti.
	
	Signed-off-by: Greg Ungerer <gerg@snapgear.com>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<gerg@snapgear.com>
	[PATCH] remove unused shglcore.h include
	
	Remove unused shglcore.h include.
	
	Signed-off-by: Greg Ungerer <gerg@snapgear.com>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<gerg@snapgear.com>
	[PATCH] remove other unused shglcores.h include
	
	Remove remaining unused shglcores.h include.
	
	Signed-off-by: Greg Ungerer <gerg@snapgear.com>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<gerg@snapgear.com>
	[PATCH] support all relocation types for m68knommu modules
	
	Add code to support the apply_relocate_add() function, needed to
	support all relocation types of the m68k and Coldfire families.
	This code is straight out of the m68k support for this.
	
	Patch was originally from Christian Magnusson
	<christian.magnusson@runaware.com>
	
	Signed-off-by: Greg Ungerer <gerg@snapgear.com>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<gerg@snapgear.com>
	[PATCH] update total_vm on non-MMU configurations
	
	This patch fixes 3 problems with the nommu.c support code:
	
	1. export mem_map and vmtruncate (to make them the same as MMU version)
	
	2. update the total_vm usage in mmap routines
	   Without this the OOM killer has no "badness" points to rate
	   processes on...
	
	   This patch was originally submitted by Giovanni Casoli
	   <giovanni.casoli@atengineering.it> for a 2.4.26 kernel.
	   I applied it to the 2.6.9 code.
	
	3. provide stub for arch_get_unmapped_area
	
	Signed-off-by:  Greg Ungerer <gerg@uclinux.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<herbert@gondor.apana.org.au>
	[NETLINK]: Check netlink_insert in kernel_create
	
	This patch checks the return value of netlink_insert() in
	netlink_kernel_create().  It could fail if someone loads
	the same module twice for instance.
	
	Signed-off-by: Herbert Xu <herbert@gondor.apana.org.au>
	Signed-off-by: David S. Miller <davem@davemloft.net>

<herbert@gondor.apana.org.au>
	[XFRM]: Don't panic in xfrm_user_init
	
	Since xfrm_user can be built as a module it's best not to panic
	when something goes wrong in xfrm_user_init.  Call me a wimp for
	not fixing netlink_kernel_init's return value :)
	
	Signed-off-by: Herbert Xu <herbert@gondor.apana.org.au>
	Signed-off-by: David S. Miller <davem@davemloft.net>

<herbert@gondor.apana.org.au>
	[ETHTOOL]: Enforce SG requires TX csum rule.
	
	Signed-off-by: Herbert Xu <herbert@gondor.apana.org.au>
	Signed-off-by: David S. Miller <davem@davemloft.net>

<len.brown@intel.com>
	[ACPI] C1 fixes when processor driver is loaded
	honor "halt=" cmdline parameter
	use monitor/mwait when available
	http://bugzilla.kernel.org/show_bug.cgi?id=2280
	
	Signed-off-by: Venkatesh Pallipadi <venkatesh.pallipadi@intel.com>
	Signed-off-by: Len Brown <len.brown@intel.com>

<len.brown@intel.com>
	[PATCH] apply recent ES7000 ACPI interrupt fix to MPS mode
	
	Before:
	IRQ26 -> 0:10-> 1:2
	IRQ27 -> 0:11-> 1:3
	
	After:
	IRQ26 -> 1:2
	IRQ27 -> 1:3
	IRQ58 -> 0:10
	IRQ59 -> 0:11
	
	Signed-off-by: Natalie Protasevich <Natalie.Protasevich@unisys.com>
	Signed-off-by: Len Brown <Len.Brown@intel.com>

<len.brown@intel.com>
	8250_pnp serial_req.port_high fix for Tiger
	
	Signed-off-by: David Shaohua Li <shaohua.li@intel.com>
	Signed-off-by: Len Brown <len.brown@intel.com>

<len.brown@intel.com>
	[ACPI] introduces acpi_penalize_isa_irq() to to avoid PCI
	devices use IRQ of legacy PNP devices.
	
	Signed-off-by: David Shaohua Li <shaohua.li@intel.com>
	Signed-off-by: Len Brown <len.brown@intel.com>

<len.brown@intel.com>
	[ACPI] export acpi_match_ids()
	
	Signed-off-by: David Shaohua Li <shaohua.li@intel.com>
	Signed-off-by: Len Brown <len.brown@intel.com>

<len.brown@intel.com>
	[ACPI] create ACPI-based PNP driver.
	
	With this driver, legacy device drivers (floppy ACPI driver,
	COM ACPI driver, and ACPI motherboard driver) which
	directly use ACPI can be removed, since now we have unified PNP
	interface for legacy ACPI enumerated devices.
	
	Originally by Matthieu Castet
	Signed-off-by: Li Shaohua <shaohua.li@intel.com>
	Signed-off-by: Len Brown <len.brown@intel.com>

<len.brown@intel.com>
	[ACPI] fix video module unload oops
	
	Signed-off-by: Luming Yu <luming.yu@intel.com>
	Signed-off-by: Len Brown <len.brown@intel.com>

<aia21@cantab.net>
	NTFS: In fs/ntfs/aops.c::ntfs_writepage(), if t he page is fully outside
	      i_size, i.e. race with truncate, invalidate the buffers on the page
	      so that they become freeable and hence the page does not leak.
	
	Signed-off-by: Anton Altaparmakov <aia21@cantab.net>

<aia21@cantab.net>
	NTFS: Implement extension of resident files in the regular file write code
	      paths (fs/ntfs/aops.c::ntfs_{prepare,commit}_write()).  At present
	      this only works until the data attribute becomes too big for the mft
	      record after which we abort the write returning -EOPNOTSUPP from
	      ntfs_prepare_write().
	
	Signed-off-by: Anton Altaparmakov <aia21@cantab.net>

<dhowells@redhat.com>
	[PATCH] move key_init to security_initcall
	
	During system boot many probes, etc.  will generate upcalls to userspace
	via call_usermodehelper().  This has the effect of calling execve() before
	the key subsystem has been initialized, and thus Oopsing on a NULL key_jar
	during key_alloc().  Move key_init to security_initcall so that it's called
	along with other security initialization routines which have similar
	requirements.
	
	Signed-off-by: Chris Wright <chrisw@osdl.org>
	Signed-off-by: David Howells <dhowells@redhat.com>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<hugh@veritas.com>
	[PATCH] shmem NUMA policy spinlock
	
	The NUMA policy for shared memory or tmpfs page allocation was protected by
	a semaphore.  It helps to improve scalability if we change that to a
	spinlock (and there's only one place that needs to drop and reacquire). 
	Oh, and don't even bother to get the spinlock while the tree is empty.
	
	Acked-by: Andi Kleen <ak@suse.de>
	Signed-off-by: Hugh Dickins <hugh@veritas.com>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<hugh@veritas.com>
	[PATCH] statm: __vm_stat_accounting
	
	The procfs shared_vm accounting in do_mmap_pgoff didn't balance with munmap
	in the case of shared anonymous: because file comes in NULL, whereas
	vm_file gets set at the end by shmem_zero_setup.
	
	Update file; and update vm_flags (a driver is likely to add VM_IO or
	VM_RESERVED, modifying reserved_vm); and update pgoff (doesn't affect
	procfs accounting, but could affect vma_merge - though at present all
	drivers which modify vm_pgoff set a VM_SPECIAL which prevents merging). 
	And do that __vm_stat_account before advancing to make_pages_present.
	
	Signed-off-by: Hugh Dickins <hugh@veritas.com>
	Acked-by: William Irwin <wli@holomorphy.com>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<hugh@veritas.com>
	[PATCH] statm: shared = rss - anon_rss
	
	The third "shared" field of /proc/$pid/statm in 2.4 was a count of pages in
	the mm whose page_count is more than 1 (oddly, including pages shared just
	with swapcache).  That's too costly to calculate each time, so 2.6 changed
	it to the total file-backed extent.  But Andrea knows apps and users
	surprised when (rss - shared) goes negative: we need to provide an rss-like
	statistic, close to the 2.4 interpretation.
	
	Something that's quick and easy to maintain accurately is mm->anon_rss, the
	count of anonymous pages in the mm.  Then shared = rss - anon_rss gives a
	pretty good and meaningful approximation to 2.4's intention: wli confirms
	that this will be useful to Oracle too.
	
	Where to show it?  I think it's best to treat this as a bugfix and show it
	in the third field of /proc/$pid/statm, after resident, as before - there's
	no evidence that the total file-backed extent was found useful.
	
	Albert would like other fields to revert to page counts, but that's a lot
	harder: if mprotect can change the category of a page, then it can't be
	accounted as simply as this.  Only go that route if real need shown.
	
	Signed-off-by: Hugh Dickins <hugh@veritas.com>
	Acked-by: William Irwin <wli@holomorphy.com>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<hugh@veritas.com>
	[PATCH] statm: fix negative data
	
	The sixth "data" field of /proc/$pid/statm was sometimes negative: text is
	a subset of shared_vm, and so was subtracted twice from total_vm.
	
	Signed-off-by: Hugh Dickins <hugh@veritas.com>
	Acked-by: William Irwin <wli@holomorphy.com>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<hugh@veritas.com>
	[PATCH] omit CommitAvail
	
	CommitLimit was a good addition to /proc/meminfo, but we don't usually show
	both what's used and what's free: don't waste lines of screenspace, omit
	CommitAvail, let the user do the arithmetic as with all the others.  And in
	updating that Documentation, removed the long-gone ReverseMaps.
	
	Signed-off-by: Hugh Dickins <hugh@veritas.com>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<hugh@veritas.com>
	[PATCH] tmpfs truncate latency
	
	High latency observed when deleting a large video file from tmpfs.
	
	shmem_truncate held info->lock (easily dropped) and nested atomic kmaps
	(more awkward to handle, since it's structured to keep them) while scanning
	the many pages of its swap vector.  Now be prepared to cond_resched every
	64 ops (but scan an empty page in one go).
	
	shmem_free_pages to free a linked list of empty swap vector pages at the
	end (cond_resched every 64): could still free them one by one in the main
	loop, but this foreshadows scalability changes - which will want to use RCU
	on them, only freeing the pages after a grace period.
	
	Signed-off-by: Hugh Dickins <hugh@veritas.com>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<hugh@veritas.com>
	[PATCH] anon cris align address_space
	
	CRIS does not demand alignment, so PageAnon's PAGE_MAPPING_ANON bit got
	mixed up with the low bit of the struct address_space *mapping pointer.
	
	Patch based on that from Mikael Starvik, but moved the alignment to the
	declaration of struct address_space itself, and align to sizeof(long) so
	it's well-aligned on all architectures.
	
	Signed-off-by: Hugh Dickins <hugh@veritas.com>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<jgarzik@pobox.com>
	[PATCH] add nth_page()
	
	Provide a function to get the pageframe number of the nth page at
	scatterlist.page.  We cannot just index off scatterlist.page because the
	physically-contiguous pages may not be contiguous in mem_map[].
	
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<jmorris@redhat.com>
	[PATCH] SELinux: fix netif bugs and simplify.
	
	This patch fixes and simplifies locking in the SELiunux netif cache.
	
	An old problem (which I forgot about) is fixed where a netif lookup can be
	followed by a preemption, causing a race against sel_netif_put().  Kaigai
	Kohei discovered a problem where netif lookups were also not protected
	against races with sel_netif_flush().
	
	The code has now been reworked to fix these problems, eliminate the
	refcounting and remove atomic operations entirely from the read path
	(generally making better use of RCU).  The avc entry ref has been removed
	as part of this simplification in anticipation of an RCU scalability patch
	which removes them in general.
	
	Signed-off-by: James Morris <jmorris@redhat.com>
	Signed-off-by: Stephen Smalley <sds@epoch.ncsc.mil>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<jmorris@redhat.com>
	[PATCH] SELinux: fix sidtab locking bug
	
	This patch by Kaigai Kohei fixes a bug in the SELinux sidtab code, where we
	do a spin_unlock_irq() while nested under another irq lock, which enables
	interrupts and allows a deadlock to happen:
	
	  sidtab_set() is called between POLICY_WRLOCK and POLICY_WRUNLOCK in
	  services.c:1092.  sidtab_set() uses SIDTAB_LOCK()/SIDTAB_UNLOCK(), but
	  SIDTAB_UNLOCK() enables any interruptions because it's defined as
	  spin_unlock_irq().  If an interruption occurs between SIDTAB_UNLOCK() and
	  POLICY_WRUNLOCK, and interruption context try to hold the POLICY_RDLOCK,
	  then a deadlock happen in the result.
	
	The solution is to save & restore flags on the inner lock, per the patch
	below.
	
	Signed-off-by: James Morris <jmorris@redhat.com>
	Signed-off-by: Stephen Smalley <sds@epoch.ncsc.mil>
	Signed-off-by: Kaigai Kohei <kaigai@ak.jp.nec.com>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<sfr@canb.auug.org.au>
	[PATCH] ppc64: iSeries console: cleanup after tty_write user copies  removal
	
	This patch just removes more of the infrastructure in the PPC64 iSeries
	console driver that is no longer needed since we no longer need to do
	copies from user mode in the tty drivers.
	
	Signed-off-by: Stephen Rothwell <sfr@canb.auug.org.au>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<paulus@samba.org>
	[PATCH] ppc64: cpu hotplug notifier for numa
	
	This patch is from Nathan Lynch <nathanl@austin.ibm.com>.
	
	The NUMA properties of all "possible" cpus are not necessarily available at
	boot time on ppc64 LPAR.  Only the properties for present cpus are known.
	
	This patch modifies the ppc64 numa code to map a cpu to its node right before
	it is brought up -- this means that secondary cpus are now mapped to their
	nodes during smp_init().  Cpus are removed from their nodes after they have
	gone offline.
	
	Also some minor cleanups:
	
	- Stash the "minimum common depth" in a global at boot time, so we don't
	  have to rediscover it every time something changes.
	
	- Remove unnecessary variable from of_get_associativity() which is accessed
	  while possibly uninitialized.
	
	- Remove the cpu portion from dump_numa_topology() since it will show only
	  the boot cpu now.  We could display this information from smp_cpus_done() if
	  necessary.
	
	Signed-off-by: Nathan Lynch <nathanl@austin.ibm.com>
	Signed-off-by: Paul Mackerras <paulus@samba.org>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<mporter@kernel.crashing.org>
	[PATCH] ppc32: disable broken L2 cache on all 440GX revs
	
	Always disable L2 cache on PPC440GX.  All revs/speeds of silicon have
	parity error problems despite errata claims to the contrary.
	
	Signed-off-by: Matt Porter <mporter@kernel.crashing.org>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<paulus@samba.org>
	[PATCH] PPC/PPC64: Fix FP state corruption on UP
	
	Unfortunately the patch Ben sent last week to fix a bug in the saving and
	restoring of floating-point and altivec context across signal handlers
	introduced another bug, which tends to corrupt the FP and altivec contexts
	of other tasks.  This patch fixes the problem for both ppc32 and ppc64. 
	
	Signed-off-by: Paul Mackerras <paulus@samba.org>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<david@gibson.dropbear.id.au>
	[PATCH] ppc64: rework hugepage code
	
	Rework the ppc64 hugepage code.  Instead of using specially marked pmd
	entries in the normal pagetables to represent hugepages, use normal pte_t
	entries, in a special set of pagetables used for hugepages only.
	
	Using pte_t instead of a special hugepte_t makes the code more similar to
	that for other architecturess, allowing more possibilities for
	consolidating the hugepage code.
	
	Using independent pagetables for the hugepages is also a prerequisite for
	moving the hugepages into their own region well outside the normal user
	address space.  The restrictions imposed by the powerpc mmu's segment
	design mean we probably want to do that in the fairly near future.
	
	Signed-off-by: David Gibson <david@gibson.dropbear.id.au>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<paul.mundt@nokia.com>
	[PATCH] sh: do_signal() update for generic changes
	
	A while back get_signal_to_deliver() changed to take a struct k_sigaction *.
	This updates do_signal() and handle_signal() to follow the generic API change.
	
	Signed-off-by: Paul Mundt <paul.mundt@nokia.com>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<paul.mundt@nokia.com>
	[PATCH] sh: compile fixes
	
	A few random build failures/warnings popped up in 2.6.9, this fixes them.
	
	Signed-off-by: Paul Mundt <paul.mundt@nokia.com>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<paul.mundt@nokia.com>
	[PATCH] sh: syscall updates
	
	This adds the new syscalls (waitid/add_key/request_key/keyctl).
	
	Signed-off-by: Paul Mundt <paul.mundt@nokia.com>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<venkatesh.pallipadi@intel.com>
	[PATCH] HPET reenabling after suspend-resume
	
	hpet hardware seems to need a little prodding during resume for it to start
	sending the timer interupts again.  Attached patch does it for both i386
	and x86_64.
	
	Makefile change below: Right now suspend-resume ordering of system devices
	depends on their order of linking.  It is ugly.  But, thats the way it
	works currently.  And we want timer device to resume before PIC.
	
	Signed-off-by: "Venkatesh Pallipadi" <venkatesh.pallipadi@intel.com>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<jamesclv@us.ibm.com>
	[PATCH] x86-64 clustered APIC support
	
	Forthcoming IBM boxes will be using Nocona and/or Opteron chips in
	clustered mode to get beyond 8 CPUs.  In fact, there are plans to try for
	128 CPUs when the Tulsa chip comes out.  Thus, there are a fair number of
	signed vs.  unsigned changes in the patch.
	
	Thanks to the HPET timer and some HW changes, I've been able to remove the
	MPS/ACPI string comparisons from the detection code.  Instead, it scans
	bios_cpu_apicid and uses simple heuristics to select the correct IRQ
	delivery mode.  No need for a config option.  Hurrah!
	
	Likewise, I've been able to avoid the preprocessor tricks that the i386
	sub-arch needed to build with one or more sub-arches.
	
	Reluctantly-Acked-by: Andi Kleen <ak@muc.de>
	
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<bjorn.helgaas@hp.com>
	[PATCH] ia64 iomap implementation
	
	This preserves the ioreadX() == inX() semantics (same as i386), since it's
	not clear that the speedup of omitting the mf.a for port operations is
	worth the risk of breaking drivers.
	
	Signed-off-by: Bjorn Helgaas <bjorn.helgaas@hp.com>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<pavel@ucw.cz>
	[PATCH] Kill useless pm_access from vt.c
	
	pm_access does nothing these days, and looks ugly.  This removes it from
	vt.c.  That actually looks like last user in the tree; it should be
	possible to kill pm_access completely after 2.6.10.  Ouch and add warning
	to obsolete pm.txt file.
	
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<yi.zhu@intel.com>
	[PATCH] swsusp: print error message when swapping is disabled
	
	This patch gives some clues to the user when swapping is not enabled during
	swsusp.  Please apply.
	
	Signed-off-by: Zhu Yi <yi.zhu@intel.com>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<cw@f00f.org>
	[PATCH] uml: use generic IRQ code
	
	Convert UML to use the generic IRQ code.
	
	Signed-off-by: Chris Wedgwood <cw@f00f.org>
	Acked-by: Jeff Dike <jdike@addtoit.com>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<cw@f00f.org>
	[PATCH] uml: Build fix for TT w/o SKAS
	
	This is required to get UML to build with only TT mode.
	
	Signed-of-by: Chris Wedgwood <cw@f00f.org>
	Acked-by: Jeff Dike <jdike@addtoit.com>
	
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<cw@f00f.org>
	[PATCH] uml: Kconfig.debug update
	
	Update Kconfig.debug so we get SYSRQ back and also the spinlock
	debugging options.
	
	Signed-off-by: Chris Wedgwood <cw@f00f.org>
	Acked-by: Jeff Dike <jdike@addtoit.com>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<cw@f00f.org>
	[PATCH] uml: minor warning removal
	
	Include some files to remove missing prototype warnings.
	
	Signed-off-by: Chris Wedgwood <cw@f00f.org>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<cw@f00f.org>
	[PATCH] uml: mconsole_proc rewrite
	
	This is an update/resync of kraxel's mconsole_proc rewrite from about
	two months ago and IMO it should be merged as-is (yes, it means /proc
	has to be mounted but the current code crashes so this is better IMO).
	
	Signed-off-by: Chris Wedgwood <cw@f00f.org>
	Acked-by: Jeff Dike <jdike@addtoit.com>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<cw@f00f.org>
	[PATCH] uml: resolve symbols in back-traces
	
	Resolve symbols in back-traces.
	
	Signed-off-by: Chris Wedgwood <cw@f00f.org>
	Acked-by: Jeff Dike <jdike@addtoit.com>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<schwidefsky@de.ibm.com>
	[PATCH] s390: tty_write fix
	
	Make the s/390 console drivers compile without warnings again after the
	recent tty layer change that moved the copy_from_user out of the drivers.
	
	Signed-off-by: Martin Schwidefsky <schwidefsky@de.ibm.com>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<paulmck@us.ibm.com>
	[PATCH] scheduler: remove redundant #ifdef
	
	Removes a redundant #ifdef CONFIG_SMP that is nested within an enclosing
	#ifdef CONFIG_SMP.
	
	Signed-off-by: <paulmck@us.ibm.com>
	Acked-by: Ingo Molnar <mingo@elte.hu>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<nickpiggin@yahoo.com.au>
	[PATCH] vmscan: pages_scanned fix
	
	kswapd is still sometimes going into loops.  The problem seemed to be
	happening on systems with zero inactive pages in ZONE_DMA, so pages_scanned
	could never be increased, all_unreclaimable would never be set, and kswapd
	would never break.
	
	So change pages_scanned to be a count of the number of _active_ list pages
	scanned rather than inactive.  This has been reported to solve the problems.
	
	This is not subject to the reverse problem where one might have zero active
	list pages, because inactive pages are either be reclaimed, or put onto the
	active list.
	
	I think it is reasonable to have all_unreclaimed trigger based on the amount
	of active list scanning rather than inactive.
	
	
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<adaplas@hotpop.com>
	[PATCH] savagefb export fixes
	
	Signed-off-by: Antonino Daplas <adaplas@pol.net>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<penberg@cs.helsinki.fi>
	[PATCH] radeonfb: screeninfo initialization cleanup
	
	This patch changes the initialization of radeonfb_default_var to use named
	initializers and avoids explicitly setting fields that are automatically
	zeroed.
	
	Signed-off-by: Pekka Enberg <penberg@cs.helsinki.fi>
	Acked-by: Benjamin Herrenschmidt <benh@kernel.crashing.org>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<bjorn.helgaas@hp.com>
	[PATCH] radeonfb: If no video memory, exit with error
	
	Nothing good will happen if we try to ioremap and use a zero-sized frame
	buffer.  I observed this problem on an ia64 sx1000 box, where the BIOS
	doesn't run the option ROM.  If we try to continue, radeonfb just gets
	hopelessly confused because the card isn't initialized correctly.
	
	Signed-off-by: Bjorn Helgaas <bjorn.helgaas@hp.com>
	Acked-by: Benjamin Herrenschmidt <benh@kernel.crashing.org>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<agx@sigxcpu.org>
	[PATCH] fbdev: Fix rivafb crashes on PPC
	
	 - fixes crashes when changing video modes/switching away from X on ppc
	 - fixes random crashes when scrolling in e.g. vi
	 - improves on the NV30 support
	 - reintroduces noaccel (not perfect but helps a lot for debugging)
	 - converts MODULE_PARM to module_param
	 - cleans up some printks, FB_ACCELF_TEXT cruft
	Most of this is taken from either XFree86 4.3 or BenH's 2.4 ppc tree.
	
	From: Antonino Daplas <adaplas@pol.net>
	 - adjust pixmap->scan_align to 1 and use cfb_* drawing functions
	   if FBINFO_HWACCEL_DISABLED is set
	
	Signed-off-by: Guido Guenter <agx@sigxcpu.org>
	Signed-off-by: Antonino Daplas <adaplas@pol.net>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<adaplas@hotpop.com>
	[PATCH] fbdev: Add __iomem annotations for savagefb
	
	Add __iomem annotations for savagefb
	
	Signed-off-by: Antonino Daplas <adaplas@pol.net>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<adaplas@hotpop.com>
	[PATCH] fbdev: Add __iomem annotations to intelfb
	
	- Add __iomem annotations to intelfb
	
	Signed-off-by: Antonino Daplas <adaplas@pol.net>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<adaplas@hotpop.com>
	[PATCH] fbcon: Fix endian bug in fbcon_putc (console mouse problem)
	
	The typecast (const unsigned short *) &c in fbcon_putc is not correct for
	big-endian machines.  This problem manifests as a black cursor that can be
	used to erase the console screen contents.  The correct fix is to use
	scr_writew instead.
	
	Signed-off-by: Antonino Daplas <adaplas@pol.net>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<penberg@cs.helsinki.fi>
	[PATCH] fbcon: Remove spurious casts
	
	This patch removes unnecessary casts from drivers/video/console/fbcon.c.
	Assignment from a void pointer does not require a cast and char type is
	promoted to int automatically.
	
	Signed-off-by: Pekka Enberg <penberg@cs.helsinki.fi>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<penberg@cs.helsinki.fi>
	[PATCH] fbcon: Replace logo_shown magic numbers with constants
	
	This patch replaces logo_shown magic numbers with constants in
	drivers/video/console/fbcon.c.
	
	Signed-off-by: Pekka Enberg <penberg@cs.helsinki.fi>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<arjanv@infradead.org>
	[PATCH] unexport raise_softirq
	
	The patch below unexports raise_softirq().  raise_softirq() is not the
	right api for drivers to use, instead raise_softirq_irqoff() is, and
	thankfully all in-kernel code is using that variant already.  To avoid
	future "accidents", unexport.
	
	Acked-by: Ingo Molnar <mingo@elte.hu>
	
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<arjanv@infradead.org>
	[PATCH] vmalloc_to_page helper
	
	After William did the remap_pfn_range change, a very common pattern became:
		page = page_to_pfn(vmalloc_to_page((void *)pos));
		if (remap_pfn_range(vma, start, page, PAGE_SIZE, PAGE_SHARED)) {
	
	the patch below adds a very simple helper, vmalloc_to_pfn() to simplify this
	a bit.
	
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<arjanv@infradead.org>
	[PATCH] remove unused code: dump_extended_fpu
	
	dump_extended_fpu() is used nowhere in the kernel; save a few bytes...
	
	Signed-off-by: <arjanv@infradead.org>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<arjanv@infradead.org>
	[PATCH] make filemap_fdatawrite_range() static
	
	The patch below marks filemap_fdatawrite_range static, it's not used
	outside mm/filemap.c.
	
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<kraxel@bytesex.org>
	[PATCH] v4l: bttv IR input update
	
	This is a update for the IR input modules for the bttv driver.  It adds IR
	support to more TV cards and has some some minor cleanups.
	
	It also removes all trailing whitespaces.  I've a script to remove them from
	my sources now, that should kill those no-op whitespace changes in my patches
	after merging this initial cleanup.
	
	Signed-off-by: Gerd Knorr <kraxel@bytesex.org>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<kraxel@bytesex.org>
	[PATCH] v4l: bttv whitespace cleanup
	
	The patch just removes all trailing whitespaces, there are no actual code
	changes.  I've a script to remove them from my sources now, that should kill
	those no-op whitespace changes in my patches after merging this initial
	cleanup.
	
	Signed-off-by: Gerd Knorr <kraxel@bytesex.org>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<kraxel@bytesex.org>
	[PATCH] v4l: i2c whitespace cleanup
	
	The patch just removes all trailing whitespaces, there are no actual code
	changes.  I've a script to remove them from my sources now, that should kill
	those no-op whitespace changes in my patches after merging this initial
	cleanup.
	
	Signed-off-by: Gerd Knorr <kraxel@bytesex.org>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<kraxel@bytesex.org>
	[PATCH] v4l: IR whitespace cleanup
	
	The patch just removes all trailing whitespaces, there are no actual code
	changes.  I've a script to remove them from my sources now, that should kill
	those no-op whitespace changes in my patches after merging this initial
	cleanup.
	
	Signed-off-by: Gerd Knorr <kraxel@bytesex.org>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<kraxel@bytesex.org>
	[PATCH] v4l: msp3400 update
	
	This is a update for the msp3400 module.  Changes:
	
	 * switch over to 2.6-ish insmod options.
	 * use kthread for thread management.
	 * add support for v4l2 audio ioctls.
	 * merge a number of changes from the ivtv project.
	 * add suspend/resume functions.
	
	The patch also removes all trailing whitespaces.  I've a script to remove them
	from my sources now, that should kill those no-op whitespace changes in my
	patches after merging this initial cleanup.
	
	Signed-off-by: Gerd Knorr <kraxel@bytesex.org>
	
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<kraxel@bytesex.org>
	[PATCH] v4l: tuner update
	
	This is an update for the v4l tuner modules (tuner.o + tda9887.o).
	Changes:
	
	  * fix two tuner config entries.
	  * switch insmod options to new 2.6-ish style.
	  * add suspend/resume functions.
	
	The patch also removes all trailing whitespaces.  I've a script to remove them
	from my sources now, that should kill those no-op whitespace changes in my
	patches after merging this initial cleanup.
	
	Signed-off-by: Gerd Knorr <kraxel@bytesex.org>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<kraxel@bytesex.org>
	[PATCH] v4l: videobuf whitespace cleanup
	
	The patch just removes all trailing whitespaces, there are no actual code
	changes.  I've a script to remove them from my sources now, that should kill
	those no-op whitespace changes in my patches after merging this initial
	cleanup.
	
	Signed-off-by: Gerd Knorr <kraxel@bytesex.org>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<kraxel@bytesex.org>
	[PATCH] v4l: videodev whitespace cleanup
	
	The patch just removes all trailing whitespaces, there are no actual code
	changes.  I've a script to remove them from my sources now, that should kill
	those no-op whitespace changes in my patches after merging this initial
	cleanup.
	
	Signed-off-by: Gerd Knorr <kraxel@bytesex.org>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<kraxel@bytesex.org>
	[PATCH] v4l: config cleanups
	
	Cleanup the video4linux driver configuration by using "select" instead of
	"default if ...".
	
	Signed-off-by: Gerd Knorr <kraxel@bytesex.org>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<paulmck@us.ibm.com>
	[PATCH] RCU: rcu_assign_pointer() removal of memory barriers
	
	This patch adds the rcu_assign_pointer() API that helps reduce the need for
	explicit memory barriers in code that uses RCU.  This API buries the required
	memory barriers in a macro that also does the assignment.  This has been
	tested successfully on i386 and ppc64.
	
	Signed-off-by: <paulmck@us.ibm.com>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<paulmck@us.ibm.com>
	[PATCH] RCU: use rcu_assign_pointer()
	
	This patch uses the rcu_assign_pointer() API to eliminate a number of explicit
	memory barriers from code using RCU.  This has been tested successfully on
	i386 and ppc64.
	
	Signed-off-by: <paulmck@us.ibm.com>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<paulmck@us.ibm.com>
	[PATCH] RCU: eliminating explicit memory barriers from SysV IPC
	
	This patch uses the rcu_assign_pointer() API to eliminate a number of explicit
	memory barriers from the SysV IPC code that uses RCU.  It also restructures
	the ipc_ids structure so that the array size is stored in the same memory
	block as the array itself (see the new struct ipc_id_ary).  This prevents the
	race that the earlier code was subject to, where a reader could see a mismatch
	between the size and the actual array.  With the size stored with the array,
	the possibility of mismatch is eliminated -- with out the need for careful
	ordering and explicit memory barriers.  This has been tested successfully on
	i386 and ppc64.
	
	Signed-off-by: <paulmck@us.ibm.com>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<hch@lst.de>
	[PATCH] remove dead exports in sounds/oss
	
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<hch@lst.de>
	[PATCH] unexport getnstimeofday
	
	This recently added function is only used by the posix timers code, no need
	to be exported.
	
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<hch@lst.de>
	[PATCH] unexport kick_process
	
	This isn't exactly the kind of interface modules should use.
	
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<hch@lst.de>
	[PATCH] remove page_follow_link
	
	All filesystems have been switched to page_follow_link_light
	
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<hch@lst.de>
	[PATCH] unexport sys_lseek
	
	Fortunately dvb stopped using it in their firmware loader
	
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<hch@lst.de>
	[PATCH] remove ext2 xatts exports
	
	I think Andreas exported them to allow modular xattr handlers, but with
	James rework these aren't possible anymore, and we never had them anyway.
	
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<hch@lst.de>
	[PATCH] parport: kill dead code and exports
	
	There's lots of exports in parport that aren't used by any drivers.  Behind
	many of them there's actually dead code.
	
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<hch@lst.de>
	[PATCH] unexport vc_cons_allocated
	
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<hch@lst.de>
	[PATCH] mark pi_unclaim static
	
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<hch@lst.de>
	[PATCH] unexport set_selection and paste_selection
	
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<hch@lst.de>
	[PATCH] unexport firmware_class
	
	it's marked static already, and there's no point in exporting it
	
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<james4765@gmail.com>
	[PATCH] ramdisk.txt update
	
	General cleanup and updating of ramdisk.txt.
	
	Signed-off by: Jim Nelson <james4765@gmail.com>
	
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<dhowells@redhat.com>
	[PATCH] Unexport some RxRPC symbols
	
	Remove some of the exports on RxRPC symbols that aren't currently used (and
	most probably won't be) by external modules.
	
	Signed-off-by: David Howells <dhowells@redhat.com>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<axboe@suse.de>
	[PATCH] kill excessive cdrom prints
	
	Don't know where this came from, but dumping this on every open gets boring
	really quickly.
	
	Signed-off-by: Jens Axboe <axboe@suse.de>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<arjan@infradead.org>
	[PATCH] unexport add_timer_on()
	
	add_timer_on() isn't used by modules (in fact it's only used ONCE, in
	workqueue.c) and it's not even a good api for drivers, in fact, the comment
	for it says
	
	 * This is not very scalable on SMP. Double adds are not possible.
	
	Signed-off-by: Arjan van de Ven <arjan@infradead.org>
	Acked-by: Ingo Molnar <mingo@elte.hu>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<petero2@telia.com>
	[PATCH] Fix incorrect Mt Rainier detection
	
	cdrom_is_mrw() can incorrectly think that a drive is Mt Rainier capable,
	because if forgets to check if the "GET CONFIGURATION" command returns the
	MRW feature number.  According to the MMC spec, the drive shall return all
	feature numbers >= the starting feature number, so even if the drive
	doesn't support Mt Rainier, it can return some data that makes
	cdrom_is_mrw() incorrectly think the drive is MRW capable.
	
	This problem stops me from mounting DVD+RW discs in R/W mode on my laptop,
	because it makes cdrom_open_write() call cdrom_mrw_open_write() which fails
	because the drive isn't really MRW capable.
	
	The fix is to make sure the returned feature number is the correct one for
	Mt Rainier.
	
	Signed-off-by: Peter Osterlund <petero2@telia.com>
	Acked-by: Jens Axboe <axboe@suse.de>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<juhl-lkml@dif.dk>
	[PATCH] add a bunch of missing files to Documentation/00-INDEX
	
	Add a bunch of entries to Documentation/00-INDEX that are currently missing
	(and removes the entry for one file that no longer exist).
	
	Patch has already been OK'ed by Paul G.
	
	Signed-off-by: Jesper Juhl <juhl-lkml@dif.dk>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<werner@almesberger.net>
	[PATCH] make buffer head argument of buffer_##name "const"
	
	Allow the buffer_foo() predicates to take a (const struct buffer_head *).
	
	I've checked that the argument of test_bit is indeed "const" on all
	architectures.
	
	Signed-off-by: Werner Almesberger <werner@almesberger.net>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<james4765@gmail.com>
	[PATCH] ftape has no maintainer
	
	After tracking down the original author of the ftape sources, I found out
	that he no longer had interest in maintaining it.
	
	Signed-off-by: James Nelson <james4765@gmail.com>
	
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<james4765@gmail.com>
	[PATCH] ftape documentation fixes
	
	Description: Cleanup and update to Documentation/ftape.txt
	
	Signed-off by: James Nelson <james4765@gmail.com>
	
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<pluto@ds14.agh.edu.pl>
	[PATCH] signal.c: gcc-3.4 fix
	
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<tglx@linutronix.de>
	[PATCH] Lock initializer unifying (Core)
	
	To make spinlock/rwlock initialization consistent all over the kernel,
	this patch converts explicit lock-initializers into spin_lock_init() and
	rwlock_init() calls.
	
	Currently, spinlocks and rwlocks are initialized in two different ways:
	
	  lock = SPIN_LOCK_UNLOCKED
	  spin_lock_init(&lock)
	
	  rwlock = RW_LOCK_UNLOCKED
	  rwlock_init(&rwlock)
	
	this patch converts all explicit lock initializations to
	spin_lock_init() or rwlock_init(). (Besides consistency this also helps
	automatic lock validators and debugging code.)
	
	The conversion was done with a script, it was verified manually and it
	was reviewed, compiled and tested as far as possible on x86, ARM, PPC.
	
	There is no runtime overhead or actual code change resulting out of this
	patch, because spin_lock_init() and rwlock_init() are macros and are
	thus equivalent to the explicit initialization method.
	
	Signed-off-by: Thomas Gleixner <tglx@linutronix.de>
	Acked-by: Ingo Molnar <mingo@elte.hu>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<tglx@linutronix.de>
	[PATCH] Lock initializer unifying (Network drivers)
	
	To make spinlock/rwlock initialization consistent all over the kernel,
	this patch converts explicit lock-initializers into spin_lock_init() and
	rwlock_init() calls.
	
	Currently, spinlocks and rwlocks are initialized in two different ways:
	
	  lock = SPIN_LOCK_UNLOCKED
	  spin_lock_init(&lock)
	
	  rwlock = RW_LOCK_UNLOCKED
	  rwlock_init(&rwlock)
	
	this patch converts all explicit lock initializations to
	spin_lock_init() or rwlock_init(). (Besides consistency this also helps
	automatic lock validators and debugging code.)
	
	The conversion was done with a script, it was verified manually and it
	was reviewed, compiled and tested as far as possible on x86, ARM, PPC.
	
	There is no runtime overhead or actual code change resulting out of this
	patch, because spin_lock_init() and rwlock_init() are macros and are
	thus equivalent to the explicit initialization method.
	
	Signed-off-by: Thomas Gleixner <tglx@linutronix.de>
	Acked-by: Ingo Molnar <mingo@elte.hu>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<hch@lst.de>
	[PATCH] fix show_refcnt return value type
	
	module_attribute.show is defined to return ssize_t
	
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<hch@lst.de>
	[PATCH] remove invoke_softirq
	
	This was used by the early irqstacks implementation on s390 and has been
	replaced by __ARCH_HAS_DO_SOFTIRQ now.
	
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<hch@lst.de>
	[PATCH] remove mousedrivers.sgml
	
	It's been totally obsoleted by the input layer
	
	Acked-by: Alan Cox <alan@redhat.com>
	
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<colin@colino.net>
	[PATCH] fix via-pmu.c compilation without CONFIG_PMAC_PBOOK
	
	This patch fixes via-pmu.c compilation when CONFIG_PMAC_PBOOK is not set.
	Looks like the #endif was one line too late.
	
	Signed-off-by: Colin Leroy <colin@colino.net>
	Acked-by: Benjamin Herrenschmidt <benh@kernel.crashing.org>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<wli@holomorphy.com>
	[PATCH] remove itimer_ticks and itimer_next
	
	These two variables are long, long dead. This patch removes them.
	
	Signed-off-by: William Irwin <wli@holomorphy.com>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<axboe@suse.de>
	[PATCH] cfq v2 switch bug
	
	Fix online switching issue with cfq v2.  It does deferred clearing of
	e->elevator_data, which screws up the current io scheduler.  It does not
	have to, so just remove it.
	
	Signed-off-by: Jens Axboe <axboe@suse.de>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<manfred@colorfullife.com>
	[PATCH] handle posix message queues with /proc/sys disabled
	
	register_sysctl_table() fails if sysctl support is not compiled into the
	kernel.  The POSIX message queue subsystem aborted it's initialization if
	register_sysctl_table() fails, and that causes an oops in sys_mq_open().
	The patch fixes that by ignoring failures from register_sysctl_table().
	
	Signed-off-by; Manfred Spraul <manfred@colorfullife.com>
	Signed-off-by: Adrian Bunk <bunk@stusta.de>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<axboe@suse.de>
	[PATCH] issues with online scheduler switching
	
	There are two issues with online io scheduler switching that this patch
	addresses.  The first is pretty simple - it concerns racing with scheduler
	removal on switch.  elevator_find() does not grab a reference to the io
	scheduler, so before elevator_attach() is run it could go away.  Add
	elevator_get() to solve that.
	
	Second issue is the flushing out of requests that is needed before
	switching can be problematic with requests that aren't allocated in the
	block layer (such as requests on the stack of a process).  The problem is
	that we don't know when they will have finished, and most io schedulers
	need to access the elevator structures on io completion.  This can be fixed
	by adding an intermedia step that switches to noop, since it doesn't need
	to touch anything but the request_queue.  The queue drain can then safely
	be split into two operations - one that waits for file system requests, and
	one that waits for the queue to completely empty.  Requests arriving after
	the first drain will get stuck in a seperate queue list.
	
	Signed-off-by: Jens Axboe <axboe@suse.de>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<kraxel@bytesex.org>
	[PATCH] bttv subdev fix
	
	- Make bttv check the device_register return value.
	
	- Yet another unchecked return value fixed.
	
	Signed-off-by: Gerd Knorr <kraxel@bytesex.org>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<olh@suse.de>
	[PATCH] remove double newline from sysrq action_msg
	
	__handle_sysrq already prints a newline, so the action_msg string doesnt
	need yet another newline.
	
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<cw@f00f.org>
	[PATCH] Remove build warning from drivers/char/random.c on 32-bit platforms
	
	Remove build warning from drivers/char/random.c on 32-bit platforms.
	
	Signed-off-by: Chris Wedgwood <cw@f00f.org>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<chrisw@osdl.org>
	[PATCH] error out on execve with no binfmts
	
	Early calls to userspace can invoke an execve() before any binfmt handlers
	are registered.  Properly return an error in this case rather than 0.
	On at least one arch (x86_64) without this patch, the system will double
	fault on early attempts to call_usermodehelper.
	
	Signed-off-by: Chris Wright <chrisw@osdl.org>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<stelian@popies.net>
	[PATCH] sonypi: module related fixes
	
	 * use module_param() instead of MODULE_PARM() and __setup()
	 * use MODULE_VERSION()
	
	Signed-off-by: Stelian Pop <stelian@popies.net>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<stelian@popies.net>
	[PATCH] sonypi: replace homebrew queue with kfifo
	
	Signed-off-by: Stelian Pop <stelian@popies.net>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<stelian@popies.net>
	[PATCH] sonypi: power management related fixes
	
	 * switch from a sysdev to a platform device
	 * drop old style PM code
	 * use pci_get_device()/pci_dev_put() instead of pci_find_device()
	
	Patch originaly from Dmitry Torokhov <dtor@mail.ru>.
	
	Signed-off-by: Stelian Pop <stelian@popies.net>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<stelian@popies.net>
	[PATCH] sonypi: rework input support
	
	 * feed most of special keys through the input subsystem
	 * initialize two separate input devices: a mouse like one for
	   the jogdial and a keyboard like one for the special keys
	 * add support for SONYPI_EVENT_FNKEY_RELEASED
	
	Many people participated in a way or another to this patch, 
	including Daniel K. <daniel@cluded.net>, Bastien Nocera <hadess@hadess.net>,
	Dmitry Torokhov <dtor@mail.ru> and Vojtech Pavlik <vojtech@suse.cz>.
	
	Signed-off-by: Stelian Pop <stelian@popies.net>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<stelian@popies.net>
	[PATCH] sonypi: make CONFIG_SONYPI depend on CONFIG_INPUT
	
	Signed-off-by: Stelian Pop <stelian@popies.net>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<stelian@popies.net>
	[PATCH] sonypi: don't suppose the bluetooth subsystem is initialy off
	
	Leave the choice to the user.
	
	Signed-off-by: Stelian Pop <stelian@popies.net>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<stelian@popies.net>
	[PATCH] sonypi: whitespace and coding style fixes
	
	Signed-off-by: Stelian Pop <stelian@popies.net>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<stelian@popies.net>
	[PATCH] sonypi: bump up the version number
	
	Signed-off-by: Stelian Pop <stelian@popies.net>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<martin.wilck@fujitsu-siemens.com>
	[PATCH] skip sync_arb_IDs on P4/Xeon
	
	The "Synchronize Arbitration IDs with APIC IDs" IPI does not make sense
	on Pentium 4 and Xeon because they don't have an APIC bus where
	arbitration IDs would be needed. 
	
	The Intel Developers manual (Vol.  3, Ch.  8.6.1) says this IPI is
	unsupported on P4/Xeon.  Using it may, according to Intel, lead to
	unpredictable results.
	
	Signed-off-by: Martin Wilck <martin.wilck@fujitsu-siemens.com>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<sfr@canb.auug.org.au>
	[PATCH] ppc64 iSeries pci cleanups
	
	This merges two files (iSeries_IoMmTable.[ch]) into iSeries_pci.c.  This
	allowed quite a few more things to become declared static.
	
	It then does some fairly mechanical cleanups in iSeries_pci.c (replacing
	studly caps, removing the last of the PCIFR() macros and removing a
	couple of empty or unused routines).  There are no semantic changes. 
	
	Signed-off-by: Stephen Rothwell <sfr@canb.auug.org.au>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<acme@conectiva.com.br>
	[SKBUFF] remove skb->mac.raw setting after hdlc_type_trans
	
	Arnaldo Carvalho de Melo <acme@conectiva.com.br> :
	[dscc4.c sets skb->mac.raw after hdlc_type_trans]
	
	>> 	Francois, is this really what is intended? I left it as
	
	
	In the pre-eth_type_trans area, yes :o/ I did not test dscc4 in
	a bridged setup. Please fix the driver in your patch.
	
	
	
	Signed-off-by: Arnaldo Carvalho de Melo <acme@conectiva.com.br>
	Signed-off-by: Francois Romieu <romieu@fr.zoreil.com>
	Signed-off-by: David S. Miller <davem@redhat.com>

<acme@conectiva.com.br>
	[SKBUFF] introduce x25_type_trans
	
	Signed-off-by: Arnaldo Carvalho de Melo <acme@conectiva.com.br>
	Signet-off-by: David S. Miller <davem@redhat.com>

<wensong@linux-vs.org>
	[IPVS]: Update version to 1.2.1
	
	Signed-off-by: David S. Miller <davem@davemloft.net>

<olh@suse.de>
	[PATCH] rmmod ohci1394 hangs
	
	this sequence of commands will hang the final rmmod.
	
		init=/bin/bash --login
		mount proc
		modprove -v ohci1394
		rmmod ohci1394
		modprobe -v ohci1394
		rmmod ohci1394  ->  hangs
	
	knodemgrd_0 exits on the first rmmod, but leaves nodemgr_serialize in down
	state.
	
	This fixes it for me.
	
	Signed-off-by: Olaf Hering <olh@suse.de>
	Acked-by: Ben Collins <bcollins@debian.org>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<akpm@osdl.org>
	[PATCH] acpi: better encapsulate eisa_set_level_irq()
	
	From: Bjorn Helgaas <bjorn.helgaas@hp.com>
	
	Move the "only do this once" stuff from acpi_register_gsi() into
	eisa_set_level().
	
	Signed-off-by: Bjorn Helgaas <bjorn.helgaas@hp.com>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Greg Kroah-Hartman <greg@kroah.com>

<akpm@osdl.org>
	[PATCH] PCI: propagate pci_enable_device() errors
	
	From: Bjorn Helgaas <bjorn.helgaas@hp.com>
	
	Jeff Garzik pointed out that I should have propagated the error returned
	from pci_enable_device() rather than making up -ENODEV.
	
	Propagate pci_enable_device() error returns rather than using -ENODEV.
	
	Signed-off-by: Bjorn Helgaas <bjorn.helgaas@hp.com>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Greg Kroah-Hartman <greg@kroah.com>

<akpm@osdl.org>
	[PATCH] PCI: remove unconditional PCI ACPI IRQ routing
	
	From: Bjorn Helgaas <bjorn.helgaas@hp.com>
	
	Now that PCI interrupts are routed in pci_enable_device(), remove the
	unconditional routing previously done in pci_acpi_init().
	
	This has the potential to break drivers that don't use pci_enable_device()
	correctly, so I also added a "pci=routeirq" kernel option that restores the
	previous behavior.  I intend to remove that option, along with all the code
	below, in a month or so.
	
	Signed-off-by: Bjorn Helgaas <bjorn.helgaas@hp.com>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Greg Kroah-Hartman <greg@kroah.com>

<akpm@osdl.org>
	[PATCH] PCI: add hook for PCI resource deallocation
	
	From: Kenji Kaneshige <kaneshige.kenji@jp.fujitsu.com>
	
	This patch adds a hook 'pcibios_disable_device()' into pci_disable_device()
	to call architecture specific PCI resource deallocation code.  It's a
	opposite part of pcibios_enable_device().  We need this hook to deallocate
	architecture specific PCI resource such as IRQ resource, etc..  This patch
	is just for adding the hook, so 'pcibios_disable_device()' is defined as a
	null function on all architecture so far.
	
	I tested this patch on i386, x86_64 and ia64.  But it has not been tested
	on other architectures because I don't have these machines.
	
	Signed-off-by: Kenji Kaneshige <kaneshige.kenji@jp.fujitsu.com>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Greg Kroah-Hartman <greg@kroah.com>

<akpm@osdl.org>
	[PATCH] PCI: Changed pci_find_device to pci_get_device
	
	From: Hanna Linder <hannal@us.ibm.com>
	
	Another simple patch to complete the /i386 conversion to pci_get_device.  I
	was able to compile and boot this patch to verify it didn't break anything
	(on my T22).
	
	Signed-off-by: Hanna Linder <hannal@us.ibm.com>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Greg Kroah-Hartman <greg@kroah.com>

<trini@kernel.crashing.org>
	[PATCH] Fix ppc32 compile
	
	D'oh.  Something got cut-off there on Randy's end.  Obviously correct
	fix follows.
	
	Signed-off-by: Tom Rini <trini@kernel.crashing.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<ak@muc.de>
	[PATCH] Fix x86-64 genapic build
	
	The x86-64 genapic patch that was recently merged missed some definitions
	and doesn't compile at all.
	
	This fixes it by adding the missing defines for genapic
	
	Signed-off-by: Andi Kleen <ak@muc.de>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<davem@nuts.davemloft.net>
	[VLAN]: Revert vlan_dev_hard_start_xmit part of Ben Greear's changes
	
	They are questionable at best.  Based upon commentary
	by Tommy Christensen.
	
	Signed-off-by: David S. Miller <davem@davemloft.net>

<akpm@osdl.org>
	[TG3]: Use mmiowb in tg3.c
	
	From: Jesse Barnes <jbarnes@engr.sgi.com>
	
	This patch originally from Greg Banks.  Some parts of the tg3 driver depend
	on PIO writes arriving in order.  This patch ensures that in two key places
	using the new mmiowb macro.  This not only prevents bugs (the queues can be
	corrupted), but is much faster than ensuring ordering using PIO reads
	(which involve a few round trips to the target bus on some platforms).
	
	Arthur has another patch that uses mmiowb in tg3 that he posted earlier as
	well.
	
	Signed-off-by: Greg Banks <gnb@sgi.com>
	Signed-off-by: Jesse Barnes <jbarnes@sgi.com>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: David S. Miller <davem@davemloft.net>

<akpm@osdl.org>
	[TG3]: Use mmiowb in tg3_poll
	
	From: <akepner@sgi.com>
	
	Returning from tg3_poll() without flushing the PIO write which reenables
	interrupts can result in lower cpu utilization and higher throughput.  So
	use a memory barrier, mmiowb(), instead of flushing the write with a PIO
	read.
	
	Signed-off-by: Arthur Kepner <akepner@sgi.com>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: David S. Miller <davem@davemloft.net>

<davem@nuts.davemloft.net>
	[TG3]: Bump driver version and reldate
	
	Signed-off-by: David S. Miller <davem@davemloft.net>

<akpm@osdl.org>
	[X25]: Stop x25_destroy_socket timer looping
	
	From: Andrew Hendry <ahendry@tusc.com.au>
	
	The sk_timer.data for the x.25 destroy_socket timer went missing at some
	stage, causing a timer loop where x25_destroy_socket would keep setting up
	timers to call itself.  This patch puts the sk_timer.data back.
	
	Signed-off-by: Andrew Hendry <ahendry@tusc.com.au>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: David S. Miller <davem@davemloft.net>

<akpm@osdl.org>
	[ETHERTAP]: Add missing newline to debug printk
	
	From: Andrew Hendry <ahendry@tusc.com.au>
	
	Very trivial, ethertap debug missing a newline.
	
	Signed-off-by: Andrew Hendry <ahendry@tusc.com.au>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: David S. Miller <davem@davemloft.net>

<akpm@osdl.org>
	[X25]: Stop /proc/net/x25/route infinitely reading
	
	From: Andrew Hendry <ahendry@tusc.com.au>
	
	route add --x25 0/0 eth0
	cat /proc/net/x25/route
	reads the single routing entry forever.
	
	This patch makes x25_get_route_idx behave the same as x25_get_socket_idx
	which works correctly.
	
	Signed-off-by: Andrew Hendry <ahendry@tusc.com.au>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: David S. Miller <davem@davemloft.net>

<akpm@osdl.org>
	[X25]: Dont log unknown frame type when receiving clear confirm
	
	From: Andrew Hendry <ahendry@tusc.com.au>
	
	There is no need to log unknown

<akpm@osdl.org>
	[NETFILTER]: Avoid warning on CONNTRACK_STAT_INC in destroy_conntrack()
	
	From: Rusty Russell <rusty@rustcorp.com.au>
	
	ip_conntrack_put can be called in any context in theory: in particular,
	MASQUERADE will can call it (via ip_ct_selective_cleanup) when an interface
	comes up with a different address.
	
	Move the CONNTRACK_STAT_INC inside the lock: it needs preemption disabled.
	
	Signed-off-by: Rusty Russell <rusty@rustcorp.com.au>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: David S. Miller <davem@davemloft.net>

<len.brown@intel.com>
	[PNP] handler more than 16 IRQs
	
	Signed-off-by: David Shaohua Li <shaohua.li@intel.com>
	Signed-off-by: Len Brown <len.brown@intel.com>

<aia21@cantab.net>
	NTFS: Remove unused function fs/ntfs/runlist.c::ntfs_rl_merge().  (Adrian Bunk)
	
	Signed-off-by: Adrian Bunk <bunk@stusta.de>
	Signed-off-by: Anton Altaparmakov <aia21@cantab.net>

<bzolnier@trik.(none)>
	[ide] PIO bugfix
	
	We need to k[un]map_atomic() the current page not the first page
	of the scatterlist segment.  Fixes OOPS when using HIGHMEM.
	
	Big thanks to Randy Dunlap for a lot of debugging/testing.
	
	Signed-off-by: Bartlomiej Zolnierkiewicz <bzolnier@gmail.com>

<bzolnier@trik.(none)>
	[ide] remove hwif from /proc/ide/ as part of ide_unregister_hwif()
	
	Original patch from Mark Lord <lkml@rtr.ca>.
	
	Signed-off-by: Bartlomiej Zolnierkiewicz <bzolnier@gmail.com>

<bzolnier@trik.(none)>
	[ide] hpt34x: kill hpt34x.h
	
	Signed-off-by: Bartlomiej Zolnierkiewicz <bzolnier@gmail.com>

<bzolnier@trik.(none)>
	[ide] pmac: kill CONFIG_BLK_DEV_IDEDMA_PMAC_AUTO
	
	DMA is always used by default (->autodma is never checked).
	
	Signed-off-by: Bartlomiej Zolnierkiewicz <bzolnier@gmail.com>

<bzolnier@trik.(none)>
	[ide] setup-pci: small ide_get_or_set_dma_base() cleanup
	
	* hwif->dma_base is set in ->init_iops() for MMIO
	* if !dma_base then dma_base is really equal to zero
	* remove dead code from simplex check
	
	Signed-off-by: Bartlomiej Zolnierkiewicz <bzolnier@gmail.com>

<bzolnier@trik.(none)>
	[ide] setup-pci: simplify autodma logic
	
	Do not set hwif->autodma in ide_pci_setup_ports().
	All DMA capable PCI host drivers override it.
	
	Signed-off-by: Bartlomiej Zolnierkiewicz <bzolnier@gmail.com>

<rmk@flint.arm.linux.org.uk>
	[ARM] Use cpu_vm_mask to indicate whether the MM is mapped.

<bzolnier@trik.(none)>
	[ide] kill IDEPCI_FLAG_FORCE_MASTER
	
	cs5530 overrides hwif->autodma anyway.
	
	Signed-off-by: Bartlomiej Zolnierkiewicz <bzolnier@gmail.com>

<rmk@flint.arm.linux.org.uk>
	[ARM] Use cpu_vm_mask to determine whether to flush TLB/caches.
	
	Since bit 0 is only set when the MM is mapped onto the CPU, we can use
	this rather than comparing the MM pointer with current->active_mm.
	This simplifies the inline cache flushing and tlb code.

<bzolnier@trik.(none)>
	[ide] make destroy_proc_ide_interfaces static
	
	destroy_proc_ide_interfaces is only used inside ide-proc.c;
	so lets make it static.
	
	Signed-off-by: Arjan van de Ven <arjan@infradead.org>
	Signed-off-by: Bartlomiej Zolnierkiewicz <bzolnier@gmail.com>

<bzolnier@trik.(none)>
	[ide] ide-disk: enable stroke by default
	
	From: Jens Axboe <axboe@suse.de>
	
	Signed-off-by: Bartlomiej Zolnierkiewicz <bzolnier@gmail.com>

<castet.matthieu@free.fr>
	[WATCHDOG] i8xx_tco.c-request_region-patch
	
	Fix: in i8xx_tco.c, during the initialisation, the driver accesses io
	without checking if the port is free.

<rmk@flint.arm.linux.org.uk>
	[ARM] Add disable_irq_nosync() and CPU number headings

<rmk@flint.arm.linux.org.uk>
	[ARM] Remove extraneous spaces.

<rmk@flint.arm.linux.org.uk>
	[ARM] include/asm-arm/arch-integrator/time.h is unused, remove it.

<rmk@flint.arm.linux.org.uk>
	[ARM] Fix wrong variable name in icside.c

<iwamoto@valinux.co.jp>
	[PATCH] direct IO write memory leak fix
	
	It seems that O_DIRECT write sometimes leaks memory.
	
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<pavel@ucw.cz>
	[PATCH] Add typechecking to suspend types and powerdown types
	
	This adds typechecking to suspend types and powerdown types.  This should
	solve at least part of suspend type confusion.  There should be no code
	changes generated by this one.
	
	Acked-by: Patrick Mochel <mochel@digitalimplant.org>
	
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<akpm@osdl.org>
	[PATCH] key_init ordering fix
	
	The data structures which are set up by key_init() are used by exec().  And
	we're using exec() super-early via the hotplug events from
	do_basic_setup():driver_init().
	
	So call key_init() directly, prior to driver_init().
	
	Cc: David S. Miller <davem@davemloft.net>
	Cc: David Howells <dhowells@redhat.com>
	
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<akpm@osdl.org>
	[PATCH] swapper_space warning suppression
	
	Suppress page allocation warnings arising from radix_tree_node_alloc()
	allocations on behalf of swapper_space: these are expected under heavy load.
	
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<mporter@kernel.crashing.org>
	[PATCH] ppc32: fix ppc4xx_progress warnings
	
	The patch fixes these warnings by doing two things:
	   1) Add the argument to the printk.
	   2) Rearrange the ifdef to eliminate the unused variable
	      and function warnings.
	
	Signed-off-by: Scott Anderson <sanders@mvista.com>
	Signed-off-by: Matt Porter <mporter@kernel.crashing.org>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<benh@kernel.crashing.org>
	[PATCH] ppc32: Fix boot on PowerMac
	
	Tom's recent irq patch broke PowerMac (and possibly others).  I think he
	forgot that PReP, CHRP and PowerMac are all built together in a single
	kernel image, thus all of those arch_initcall's will end up beeing called,
	even on the wrong machine...
	
	Signed-off-by: Benjamin Herrenschmidt <benh@kernel.crashing.org>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<sfr@canb.auug.org.au>
	[PATCH] ppc64 iSeries: fix for generic irq changes
	
	The generic irq patches broke pci irqs on ppc64 iSeries.
	
	Signed-off-by: Stephen Rothwell <sfr@canb.auug.org.au>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<olof@austin.ibm.com>
	[PATCH] ppc64: setup cpu_sibling_map on iSeries
	
	Nathan Lynch pointed this out: The CPU sibling map is never initialized on
	iSeries.  This makes the scheduler very unhappy if CONFIG_SCHED_SMT is
	enabled, causing an oops in find_busiest_group during boot.
	
	Below patch adds the expected init.
	
	Signed-off-by: Olof Johansson <olof@austin.ibm.com>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<benh@kernel.crashing.org>
	[PATCH] ppc64: Enable maple IDE fixup
	
	Now that pci_get_legacy_ide_irq() support has been merged, it's time to
	enable use of it by the Maple platform code.
	
	Signed-off-by: Benjamin Herrenschmidt <benh@kernel.crashing.org>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<ak@muc.de>
	[PATCH] x86_64: Fix safe_smp_processor_id after genapic
	
	genapic broke early safe_smp_processor_id(), especially when you got a
	WARN_ON or oops early it would loops forever in show_trace.  The reason was
	that the x86_cpu_to_apicid array wasn't correctly initialized.
	
	This patch fixes this by just testing for this case.
	
	Orginally from James Cleverdon
	Acked-by: Andi Kleen <ak@muc.de> 
	
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<ak@muc.de>
	[PATCH] x86_64: Fix warning in genapic
	
	Straightforward patch to remove a warning in genapic about a unused
	function.
	
	Independently done by Chris Wright too.
	
	Signed-off-by: Andi Kleen <ak@muc.de>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<takata@linux-m32r.org>
	[PATCH] m32r: fix a typo of delay.c
	
	This patch fixes a typo of arch/m32r/lib/delay.c.  It is required to fix a
	compile error for non-CONFIG_ISA_DUAL_ISSUE configuration.
	
	NOTE:
	
	  The m32r has a kind of ISA (instruction set architecture) like a 2-way
	  VLIW.  Originally the m32r has two types of 16-bit/32-bit instructions.
	  Only 16-bit instruction pair can be executed in parallel on a m32r chip
	  with dual issuing support (e.g.  M32700).
	
	  According to the insturction dual issuing of the m32r, a
	  programmer/compiler can explicitly put two 16-bit instructions into an
	  instruction word, which are to be executed in parallel.
	
	  ex. Assembly coding style of two 16-bit instruncions; insn A and B:
	
	    1) insn A
	       insn B              ; sequential execution (implicit)
	
	    2) insn A -> insn B	   ; sequential execution (explicit)
	
	    3) insn A || insn B	   ; parallel execution
	
	Signed-off-by: Hirokazu Takata <takata@linux-m32r.org>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<blaisorblade_spam@yahoo.it>
	[PATCH] uml: fix mainline lazyness about TTY layer patch
	
	While changing the TTY layer, an API parameter was removed, so it was
	removed by almost all calls, changing their prototype.  But one use of one
	such function was not updated, breaking UML compilation.  This is the fix.
	
	Signed-off-by: Paolo 'Blaisorblade' Giarrusso <blaisorblade_spam@yahoo.it>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<cmm@us.ibm.com>
	[PATCH] ext3 block reservation patch set -- ext3 preallocation cleanup
	
	Cleans up the old ext3 preallocation code carried from ext2 but turned off.
	
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<cmm@us.ibm.com>
	[PATCH] ext3 block reservations
	
	rbtree implementation and other changes From: Stephen Tweedie <sct@redhat.com>
	contributions From: Badari Pulavarty <pbadari@us.ibm.com> and probably me.
	
	This is the ext3 block reservation patch.  It improves the layout of ext3
	files by establishing, for each inode, reserved areas of the disk in which
	only that file can allocate blocks.  Those reserved areas are managed in an
	rbtree, via the in-core inode.
	
	It's a bit like ext2 preallocation only stronger in that it can span
	already-allocated blocks, including the per-blockgroup inode tables and
	bitmaps.
	
	The patch fixes ext3's worst performance problem: disastrous layout when
	multiple files are being concurrently grown.
	
	It increases the size of the inode by rather a lot.  A todo item is to
	dynamically allocate the `struct reserve_window_node', so we don't need to
	carry this storage for inodes which aren't opened for writing.
	
	The feature is enabled by mounting with the "reservation" mount option. 
	Reservations default to "off".
	
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<akpm@osdl.org>
	[PATCH] ext3 reservation: default to on
	
	Enable the reservation code by default.  So reservations default to "on".
	They can be disabled by mounting with the "noreservation" mount option.
	
	
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<sct@redhat.com>
	[PATCH] ext3: online resizing
	
	The patch below adds online resize capability to ext3 based on Andreas
	patch for 2.4 and fixed up by Stephen.
	
	The patch also removes s_debts:
	
	s_debts is currently not used by ext3 (it is created, destroyed and checked
	but never set).  Remove it for now.
	
	Resurrecting this will require adding it back in changed form.  In existing
	form it's already unsafe wrt.  byte-tearing as it performs unlocked byte
	increment/decrement on words which may be being accessed simultaneously on
	other CPUs.  It is also the only in-memory dynamic table which needs to be
	extended by online-resize, so locking it will require care.
	
	
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<adaplas@hotpop.com>
	[PATCH] fbdev: Convert MODULE_PARM to module_param in i810fb
	
	Convert MODULE_PARM to module_param in i810fb
	
	Signed-off-by: Antonino Daplas <adaplas@pol.net>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<adaplas@hotpop.com>
	[PATCH] fbdev: Remove module parameter 'disabled' from savagefb
	
	Remove module parameter 'disabled' from savagefb
	
	Signed-off-by: Antonino Daplas <adaplas@pol.net>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<adaplas@hotpop.com>
	[PATCH] fbdev: Convert MODULE_PARM to module_param in intelfb
	
	fbdev: Convert MODULE_PARM to module_param in intelfb
	
	Signed-off-by: Antonino Daplas <adaplas@pol.net>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<adaplas@hotpop.com>
	[PATCH] fbdev: Convert MODULE_PARM to module_param in neofb
	
	Convert MODULE_PARM to module_param in neofb
	
	Signed-off-by: Antonino Daplas <adaplas@pol.net>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<adaplas@hotpop.com>
	[PATCH] fbdev: Fix io access in neofb
	
	  - Fix IO access in neofb
	  - Use readl/writel
	  - add __iomem annotations
	
	Signed-off-by: Antonino Daplas <adaplas@pol.net>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<adaplas@hotpop.com>
	[PATCH] fbdev: Add __iomem annotations to sstfb
	
	Add __iomem annotations to sstfb
	
	Signed-off-by: Antonino Daplas <adaplas@pol.net>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<adaplas@hotpop.com>
	[PATCH] fbdev: Add __iomem annotations to tdfxfb
	
	Add __iomem annotations to tdfxfb
	
	Signed-off-by: Antonino Daplas <adaplas@pol.net>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<adaplas@hotpop.com>
	[PATCH] fbdev: Do not memset the framebuffer memory in asiliantfb
	
	Do not memset the framebuffer memory in asiliantfb
	
	Signed-off-by: Antonino Daplas <adaplas@pol.net>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<adaplas@hotpop.com>
	[PATCH] fbdev: Add __iomem annotations to cyber2000fb
	
	Add __iomem annotations to cyber2000fb
	
	Signed-off-by: Antonino Daplas <adaplas@pol.net>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<adaplas@hotpop.com>
	[PATCH] fbdev: Add __iomem annotations to pm2fb
	
	Add __iomem annotations to pm2fb
	
	Signed-off-by: Antonino Daplas <adaplas@pol.net>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<adaplas@hotpop.com>
	[PATCH] fbdev: Add __iomem annotations to hgafb
	
	Add __iomem annotations to hgafb
	
	Signed-off-by: Antonino Daplas <adaplas@pol.net>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<adaplas@hotpop.com>
	[PATCH] fbdev: Add __iomem annotations to cirrusfb
	
	Add __iomem annotations to cirrusfb
	
	Signed-off-by: Antonino Daplas <adaplas@pol.net>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<adaplas@hotpop.com>
	[PATCH] fbdev: Add __iomem annotations to vfb
	
	Add __iomem annotations to vfb
	
	Signed-off-by: Antonino Daplas <adaplas@pol.net>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<adaplas@hotpop.com>
	[PATCH] fbdev: Check if cursor image has changed in intelfb
	
	Check if cursor image has changed in intelfb
	
	Signed-off-by: Antonino Daplas <adaplas@pol.net>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<adaplas@hotpop.com>
	[PATCH] fbdev: Maintainership
	
	Accepted Geert's offer to maintain the framebuffer layer.
	
	Signed-off-by: Antonino Daplas <adaplas@pol.net>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<dtor_core@ameritech.net>
	[PATCH] ik8.c: export power_status parameter through sysfs
	
	I8K: Switch to using module_param, allow switching 'power_status' through
	sysfs.
	
	Signed-off-by: Dmitry Torokhov <dtor@mail.ru>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<dan@debian.org>
	[PATCH] Unwind information fix for the vsyscall DSO
	
	When working on GDB support I found a typo.  I assume the comment is
	correct.  If you step to this particular instruction and backtrace, GDB
	gets lost.
	
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<rml@novell.com>
	[PATCH] make dnotify a configure-time option
	
	make dnotify configurable, via CONFIG_DNOTIFY.  CONFIG_EMBEDDED is required
	for disabling dnotify.
	
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<akpm@osdl.org>
	[PATCH] convert pipefs to fs_initcall()
	
	Normal initcalls which call out to userspace may need to create pipes.
	
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<marcel@holtmann.org>
	[PATCH] Fix deprecated MODULE_PARM for CAPI subsystem
	
	The MODULE_PARM is deprecated now and should be replaced by module_param()
	or module_param_named().
	
	Signed-off-by: Marcel Holtmann <marcel@holtmann.org>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<james4765@gmail.com>
	[PATCH] Documentation/cpqarray.txt update
	
	General cleanup of Documentation/cpqarray.txt.  Removal of old and obsolete
	references, removed references to an external patch.
	
	Signed-off-by: James Nelson <james4765@gmail.com>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<james4765@gmail.com>
	[PATCH] Documentation/mkdev.ida removal
	
	This file is no longer reqired - the MAKEDEV program makes the ida/ nodes
	automatically.
	
	Signed-off-by: James Nelson <james4765@gmail.com>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<torvalds@ppc970.osdl.org>
	Make x86 semaphore routines use register calling convention.
	
	This avoids a bug where the compiler would overwrite the
	stackframe that the caller also considered to be a register
	save area.
	
	It also shrinks the code segment by a tiny amount by moving
	the failure case argument setup into the slow path. This not
	only makes the fast path smaller, but it makes it easier on
	gcc (gcc is not very good at generating code that uses fixed
	register names).

<chrisw@osdl.org>
	[PATCH] uninline __sigqueue_alloc
	
	Christoph suggests letting the compiler choose.  No real compelling reason
	to inline anyhow.  I had some vmlinux size numbers suggesting inline was
	better, but re-running them on newer kernel is giving different results,
	favoring uninline.  Best let compiler choose.  Un-inline __sigqueue_alloc.
	
	Signed-off-by: Chris Wright <chrisw@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<davej@redhat.com>
	[CPUFREQ] Fix x86-64 compile.
	
	Signed-off-by: Dave Jones <davej@redhat.com>

<davej@redhat.com>
	[CPUFREQ] Remove config.h includes from ondemand driver.
	
	Adrian Bunk noticed the duplicate, but we don't actually
	need this include at all.
	
	Signed-off-by: Dave Jones <davej@redhat.com>

<greg@kroah.com>
	USB: fix up serial object reference count bug on error path.
	
	Thanks to Chris Rankin <rankincj@yahoo.com> for pointing this out.
	
	Signed-off-by: Greg Kroah-Hartman <greg@kroah.com>

<rmk@flint.arm.linux.org.uk>
	[ARM] etherh: add ethtool support.

<rmk@flint.arm.linux.org.uk>
	[ARM] etherh: report errors when trying to parse MAC address.

<rmk+lkml@arm.linux.org.uk>
	[PATCH] 8390.c: Use mdelay(10) rather than udelay(10*1000)
	
	ARM udelay can't cope with >2ms delays.
	
	Signed-off-by: Russell King <rmk@arm.linux.org.uk>
	Signed-off-by: Jeff Garzik <jgarzik@pobox.com>

<nico@cam.org>
	[PATCH] fix smc91x compilation error
	
	It looks like this bit got mismerged (pci.h removed but DMA arguments
	convertion missing).
	
	Signed-off-by: Nicolas Pitre <nico@cam.org>
	Signed-off-by: Jeff Garzik <jgarzik@pobox.com>

<sfeldma@pobox.com>
	[PATCH] e100: update maintainer
	
	My intel.com address will bounce.
	
	Signed-off-by: Scott Feldman <sfeldma@pobox.com>
	Signed-off-by: Jeff Garzik <jgarzik@pobox.com>

<benh@kernel.crashing.org>
	[PATCH] amd8111e: Fix identation of amd8111e_rx_poll()
	
	This patch does an indentation fix to amd8111e_rx_poll() which was
	incorrectly shifting left in the middle of a while() loop, thus
	rendering the function difficult to read. There is no actual code
	change.
	
	Signed-off-by: Benjamin Herrenschmidt <benh@kernel.crashing.org>
	Signed-off-by: Jeff Garzik <jgarzik@pobox.com>

<benh@kernel.crashing.org>
	[PATCH] amd8111e: Add support for ppc64 eval board
	
	This patch adds a few memory barriers, cleans up a little bit the
	use of the "status" field in the rx & tx routines, and adds probing
	for the external PHY to the driver.
	
	Signed-off-by: Benjamin Herrenschmidt <benh@kernel.crashing.org>
	Signed-off-by: Jeff Garzik <jgarzik@pobox.com>

<rmk@flint.arm.linux.org.uk>
	[ARM] etherh: add __iomem annotations.

<nacc@us.ibm.com>
	[PATCH] scsi/ahci: replace schedule_timeout() with msleep()/ssleep()
	
	Description: Uses msleep() / ssleep() [as appropriate] instead of
	schedule_timeout() to guarantee the task delays as expected.
	
	Signed-off-by: Nishanth Aravamudan <nacc@us.ibm.com>
	Signed-off-by: Jeff Garzik <jgarzik@pobox.com>

<rddunlap@osdl.org>
	[PATCH] via-rhine: references __init code during resume
	
	Fix __init section usage:
	rhine_resume calls enable_mmio, so latter cannot be __devinit;
	Error: ./drivers/net/via-rhine.o .text refers to 0000000000000925 R_X86_64_PC32
	.init.text+0xfffffffffffffffc
	
	Signed-off-by: Randy Dunlap <rddunlap@osdl.org>
	Signed-off-by: Jeff Garzik <jgarzik@pobox.com>

<rmk@flint.arm.linux.org.uk>
	[ARM] Add initial __iomem annotations to ARM io.h headers.

<rmk@flint.arm.linux.org.uk>
	[ARM] s3c2410: DMA uses __iomem pointers.

<rmk@flint.arm.linux.org.uk>
	[ARM] Add __iomem annotations to ARM amba drivers.

<marcel@holtmann.org>
	[Bluetooth] Fix deprecated MODULE_PARM for PCCARD drivers
	
	The MODULE_PARM is deprecated now and for the Bluetooth PCCARD drivers
	it should be replaced by module_param() and module_param_array().
	
	Signed-off-by: Marcel Holtmann <marcel@holtmann.org>

<marcel@holtmann.org>
	[Bluetooth] Send HCI_Reset for new Microsoft dongle
	
	The new Microsoft Wireless Transceiver for Bluetooth 2.0 is based on
	a Broadcom chip with the HID proxy support. To initialize these kind
	of devices correctly it is necessary to send HCI_Reset as the first
	command.
	
	Signed-off-by: Marcel Holtmann <marcel@holtmann.org>

<marcel@holtmann.org>
	[Bluetooth] Add security callback to the core
	
	To give higher layers like RFCOMM the possibility to use the Bluetooth
	security mechanisms, they need a way to get feedback from the HCI core 
	layer when they succeeded or failed. This patch introduces a callback
	structure that can be used for this kind of notification.
	
	Signed-off-by: Marcel Holtmann <marcel@holtmann.org>

<tobias.lorenz@gmx.net>
	[libata sata_promise] s/sata/ata/
	
	100% cosmetic:  rename various symbols with 'sata' in them to 'ata',
	in preparation for addition of support for a PATA controller.
	
	Signed-off-by: Tobias Lorenz <tobias.lorenz@gmx.net>
	Signed-off-by: Jeff Garzik <jgarzik@pobox.com>

<rmk@flint.arm.linux.org.uk>
	[SERIAL] Clean up serial_core.c write functions.
	
	Since the tty layer now takes care of user space writes,
	__uart_user_write() and associated temporary buffer and temporary
	buffer semaphore have all become unnecessary.  There's also little
	point in having __uart_kern_write() separate from uart_write(), so
	combine the two together.
	
	Adrian Bunk kindly provided the patch to remove __uart_user_write().
	The rest of the work is rmk's.
	
	Signed-off-by: Adrian Bunk
	Signed-off-by: Russell King <rmk@arm.linux.org.uk>

<rmk@flint.arm.linux.org.uk>
	[SERIAL] 8250: Fix resource handling.
	
	serial8250_request_std_resource() is now responsible for claiming
	the standard resources, _and_ calling ioremap if necessary.
	serial8250_release_std_resource() performs the complementary function
	in its entirety.
	serial8250_*_rsa_resource() perform the similar operations for RSA
	ports, with the exception that RSA ports can only be mapped into IO
	space.

<rmk@flint.arm.linux.org.uk>
	[SERIAL] 8250: move basic initialisation of 8250 ports.
	
	This moves the basic initialisation of 8250 ports from
	serial8250_register_ports() into serial8250_isa_init_ports()

<rmk@flint.arm.linux.org.uk>
	[SERIAL] Re-order 8250 serial driver initialisation/finalisation.
	
	Only register the 8250 serial driver with the device model after
	registering and setting up our internal uart ports.  Do the reverse
	on module finalisation.

<rmk@flint.arm.linux.org.uk>
	[SERIAL] 8250: Add platform device for ISA 8250-compatible devices.
	
	Add a platform device for ISA 8250-compatible serial devices listed
	in the table in include/asm-*/serial.h.  Arrange for unregistered
	serial devices to be owned by this device.
	
	This enables power management for ISA 8250 devices, and starts to
	opens the way for architectures to dynamically provide their own
	lists of 8250 devices via platform device(s).

<rmk@flint.arm.linux.org.uk>
	[SERIAL] 8250: add probe and remove device driver methods.
	
	This change allows platform devices named "serial8250" to provide
	lists of serial ports to the 8250 driver at runtime, in addition to
	the hard coded table in include/asm-*/serial.h.
	
	The next step is to deprecate the tables in serial.h.

<rmk@flint.arm.linux.org.uk>
	[SERIAL] 8250: prevent ports with zero clocks being registered.

<matthew@wil.cx>
	[PATCH] stifb bugfixes
	
	 - Fix "sti= parameter ignored by stifb" bug (Stuart Brady)
	 - Fix the STI crash with HCRX-24 in 32bpp mode (Helge Deller)

<matthew@wil.cx>
	[PATCH] kernel-parameters update for PA-RISC
	
	 - Add the PARISC tag (Thibaut Varene)
	 - Mark some existing PA-RISC specific entries with it (Thibaut Varene)
	 - Document pdcchassis (Thibaut Varene)

<rmk@flint.arm.linux.org.uk>
	[SERIAL] Undo "get_legacy_serial_ports" patch for PPC.
	
	This patch conflicts with work to properly integrate the device model
	into the serial layer, and provide architectures with a *clean* way
	to tell 8250.c about their serial ports at run time.

<dwm@austin.ibm.com>
	ppc64: install outside of source tree
	
	Rationale:
		When building outside source tree, install.sh is looked for in the
	        obj side.
	
	Status:  tested on ppc64 builds
	
	Signed-off-by: Doug Maxey <dwm@austin.ibm.com>
	Signed-off-by: Sam Ravnborg <sam@ravnborg.org>

<trini@kernel.crashing.org>
	kconfig: Fix menuconfig on Solaris
	
	The following two bits are needed to get it working (not as colorful as on
	Linux, but it functions) for me.  First, unless CURS_MACROS is defined,
	scroll(x) doesn't get expanded to wscrl(x, 1).  I did some quick
	grepping on Cygwin and Linux (debian/unstable) and didn't see
	CURS_MACROS show up anywhere else, but to be safe I put it inside of
	__sun__.  Next this uses libcurses instead of libncurses otherwise we
	get a bunch of undefined refs to w32attrset, w32addch, acs32map and few
	more.
	
	Signed-off-by: Tom Rini <trini@kernel.crashing.org>
	Signed-off-by: Sam Ravnborg <sam@ravnborg.org>

<bunk@stusta.de>
	kbuild: Documentation/kbuild/makefiles.txt: check_gcc -> cc-option
	
	It's not good to show the obsolete check_gcc in an example.
	
	Signed-off-by: Adrian Bunk <bunk@stusta.de>
	Signed-off-by: Sam Ravnborg <sam@ravnborg.org>

<torvalds@ppc970.osdl.org>
	amd8111e network driver: fix silly typo
	
	That's "cpu", not "cpy".

<kaos@sgi.com>
	kbuild: Include useful absolute symbols in kallsyms
	
	Some absolute symbols are useful, they can even appear in back traces.
	Tweak kallsyms to retain the useful absolute symbols.
	
	This list is from ia64, add absolute symbols from other architectures
	as required.
	
	Signed-off-by: Keith Owens <kaos@sgi.com>
	Signed-off-by: Sam Ravnborg <sam@ravnborg.org>

<sam@mars.ravnborg.org>
	m32r: misc kbuild cleanups
	
	o Remove unused LDFLAGS_BLOB assignement (from Brian Gerst)
	o Use implicit rule for vmlinux.lds (from Al viro)
	
	Signed-off-by: Sam Ravnborg <sam@ravnborg.org>

<trini@kernel.crashing.org>
	kbuild: additional warning fixes on Solaris 9
	
	A coworker of mine give them a look-over and spotted a few
	places where I missed changing some casts.
	
	Signed-off-by: Tom Rini <trini@kernel.crashing.org>
	Signed-off-by: Sam Ravnborg <sam@ravnborg.org>

<sam@mars.ravnborg.org>
	kbuild: allow architectures to specify defconfig file with KBUILD_DEFCONFIG
	
	For some architectures is does not make sense to maintain a single default
	configuration - arm is a good example here.
	KBUILD_DEFCONFIG is introduced allowing relevant architectures to point out
	a configuration kept in arch/$(ARCH)/configs as the configuration
	to be used when executing 'make defconfig'.
	This patch selects versatile_defconfig as the default configuration for arm.
	
	The reason to keep defconfig is that is has proved valuable in many testing
	scenarios when one are doing a cross architecture build of the kernel to
	do a simple compile-time check of some changes.
	
	Signed-off-by: Sam Ravnborg <sam@ravnborg.org>

<mmelchior@xs4all.nl>
	[libata ahci] fix rather serious (and/or embarassing) bugs
	
	- Add definition for SActive register
	- Add most interrupt sources to default interrupt mask
	- Write low 32 bits of FIS address to PxFB, where they belong
	- Set command active bit in PxSACT before setting command issue bit in PxCI
	- Announce Sub Class Code in driver info message [IDE, SATA or RAID]
	
	and additionally, from me [jgarzik]:
	- ignore ports-implemented bitmap for now; it's a write-only register
	  that silly BIOSen initialize incorreclty
	
	Signed-off-by: Matthijs Melchior <mmelchior@xs4all.nl>
	Signed-off-by: Jeff Garzik <jgarzik@pobox.com>

<jgarzik@pobox.com>
	[libata ahci] bump version to 1.00

<sam@mars.ravnborg.org>
	Do not recompile if localversion changes
	
	Changing localversion causes a few files to be recompiled, namely those who
	include <version.h>. Replace <version.h> with <utsname.h> in a few places.
	Long term solution is to split up <version.h> in two files.
	
	Signed-off-by: Sam Ravnborg <sam@ravnborg.org>

<james4765@verizon.net>
	Patch to arch/sparc/Kconfig [1 of 5]
	
	Fixes x86-specific help in SPARC32 SMP support help.
	
	From: Jim Nelson <james4765@verizon.net>
	Acked-by: William Lee Irwin III <wli@holomorphy.com>
	Signed-off-by: Sam Ravnborg <sam@ravnborg.org>

<james4765@verizon.net>
	More patches to arch/sparc/Kconfig [3 of 5]
	
	Fixes x86-specific bootloader help in serial console.
	
	From: Jim Nelson <james4765@verizon.net>
	Acked-by: William Lee Irwin III <wli@holomorphy.com>
	Signed-off-by: Sam Ravnborg <sam@ravnborg.org>

<james4765@verizon.net>
	More patches to arch/sparc/Kconfig [5 of 5]
	
	Fixes x86-specific bootloader help in printer config.
	
	From: Jim Nelson <james4765@verizon.net>
	Acked-by: William Lee Irwin III <wli@holomorphy.com>
	Signed-off-by: Sam Ravnborg <sam@ravnborg.org>

<james4765@verizon.net>
	More patches to arch/sparc/Kconfig [4 of 5]
	
	Makes sun4 default to "N" - most SPARC32 systems did not use these.
	
	From: Jim Nelson <james4765@verizon.net>
	Acked-by: William Lee Irwin III <wli@holomorphy.com>
	Signed-off-by: Sam Ravnborg <sam@ravnborg.org>

<james4765@verizon.net>
	Re: More patches to arch/sparc/Kconfig [2 of 5]
	
	Fixes typo in help in openpromfs.
	
	From: Jim Nelson <james4765@verizon.net>
	Acked-by: William Lee Irwin III <wli@holomorphy.com>
	Signed-off-by: Sam Ravnborg <sam@ravnborg.org>

<torvalds@ppc970.osdl.org>
	Make "atomic_dec_and_lock()" a macro.
	
	We rename the actual architecture-specific low-level implementation
	to have a prepended underscore: "_atomic_dec_and_lock()".
	
	This extra macro indirection is so that we can make the macro do
	the lock context counting. That will be the next patch.

<torvalds@ppc970.osdl.org>
	Add sparse checker rules for conditional lock functions: trylock
	and atomic_dec_and_lock.
	
	This means that we now have all of the spinlock context counting
	infrastructure in place, and you can check-compile the kernel with 
	sparse -Wcontext.

<rmk@flint.arm.linux.org.uk>
	[SERIAL] 8250_acorn: Convert to use serial8250_{un,}register_port.

<rmk@flint.arm.linux.org.uk>
	[ARM] No need for rpc_map_io to be public.

<rmk@flint.arm.linux.org.uk>
	[ARM] riscpc: add iomd, keyboard and acornfb platform devices.
	
	- Add iomd, keyboard and acornfb platform devices.
	- Convert rpckbd to use centrally registered platform device.
	- Convert acornfb to use a platform device.

<rmk@flint.arm.linux.org.uk>
	[SERIAL] 8250: Warn when ports with zero base_baud are registered.

<rmk@flint.arm.linux.org.uk>
	[SERIAL] serial_cs: Convert to use serial8250_{un,}register_port.

<rmk@flint.arm.linux.org.uk>
	[SERIAL] 8250_pnp: Convert to use serial8250_{un,}register_port.

<rmk@flint.arm.linux.org.uk>
	[SERIAL] Don't use UPF_AUTOPROBE, fix two build problems.
	
	The curse of the missing __devexit_p() returns, and asm-*/ obviously
	marks the end of the comment.

<rmk@flint.arm.linux.org.uk>
	[SERIAL] 8250_acpi: Convert to use serial8250_{un,}register_port.

<torvalds@ppc970.osdl.org>
	Annotate scheduler locking behaviour.
	
	This annotates the scheduler routines for locking, telling
	what locks a function releases or acquires, allowing sparse
	to check the lock usage (and documenting it at the same time).

<torvalds@ppc970.osdl.org>
	Lock-annotate some kernel functions as an example of how it works.
	
	In particular, a function that is called with a lock held, and
	releases it only to re-acquire it needs to be annotated as such,
	since otherwise sparse will complain about an unexpected unlock,
	even though "globally" the lock is constant over the call.

<torvalds@evo.osdl.org>
	Annotate UP spinlock stubs with lock annotations.
	
	This way you can do a checking run on UP too - even if the
	locks don't actually _matter_, they should still be right,
	I'd hope.

<rmk@flint.arm.linux.org.uk>
	[SERIAL] Don't detect console availability using port->ops.
	
	Use !iobase && !membase rather than !ops for console port
	availability.

<rmk@flint.arm.linux.org.uk>
	[SERIAL] Fix deadlock on removal of 8250 module.
	
	We must unregister all serial ports before driver_unregister()
	can complete.  This means that we must unregister all ports in
	serial8250_remove, including our legacy ISA ports.  We flag this
	special cleanup operation by setting serial8250_isa_devs to NULL
	and not handling our own platform device any differently from
	any others.

<nico@org.rmk.(none)>
	[ARM PATCH] 2175/1: add reference for problem worked around by patch #1824/1
	
	Patch from Nicolas Pitre
	
	Signed-off-by: Nicolas Pitre 

<ben-linux@org.rmk.(none)>
	[ARM PATCH] 2176/1: S3C2410 - fixes for reset and idle
	
	Patch from Ben Dooks
	
	This patch fixes the following problems:
	
	- panic() in reset should be warning print, so that the
	  system can then be soft-reset if this ever happens
	
	- arch_idle() can now be over-ridden for purposes of
	  implementing dyanmic voltage scaling (DVS) or any
	  other form of idling
	
	Signed-off-by: Ben Dooks 

<guido.barzini@com.rmk.(none)>
	[ARM PATCH] 2177/1: Trivial: contents of mach-h720x/Kconfig should be
	 conditional on ARCH_H720X
	
	Patch from G N Barzini
	
	Currently under "System Type" you are always offered "h720x
	Implementations" regardless of the system type selected. The fix for
	this in the other Kconfig files seems to be enclose their contents
	conditional in 'if ARCH_FOO'/'endif'. This patch does that.

<buytenh@org.rmk.(none)>
	[ARM PATCH] 2178/1: mnfd (move negated) emulation is busted on big-
	 endian
	
	Patch from Lennert Buytenhek
	
	When you issue the mnfd opcode to negate a double, nwfpe is supposed
	to flip the most significant bit of your double, which is the sign
	bit.  However, on big endian systems, it ended up flipping the most
	significant bit of the least significant sub-u32, which is one of the
	mantissa bits.
	
	On my system this was manifesting itself as sed regression tests
	failing, and ntpd/ntpdate consistently adjusting the system clock
	into the wrong direction.
	
	In pretty much all of NWFPE, doubles are stored in u64s and
	manipulations on those doubles are done by using u64 bitops.  But
	for negation and fabs() it was poking into one of the sub-u32s
	directly instead of XORing the u64 with 0x8000000000000000 resp.
	ANDing with 0x7fffffffffffffff.
	
	Since on big-endian, 'native u64 order' means that the most
	significant byte (containing bits 63-56) is kept at the lowest
	byte address, the sign bit is the MSB of the first sub-u32,
	instead of the MSB of the second one as is the case on little
	endian.
	
	Signed-off-by: Lennert Buytenhek 

<davis_g@com.rmk.(none)>
	[ARM PATCH] 2179/1: gcc-4.0 static declaration of 'meminfo' follows non-
	 static declaration build error
	
	Patch from George G. Davis
	
	Building kernels with recent gcc-4.0-20041024 snapshot results in
	"static declaration of 'meminfo' follows non-static declaration"
	build error. Since the "extern struct meminfo meminfo" definition
	is not required, this patch removes it to fix the build.
	
	Signed-off-by: George G. Davis 

<torvalds@ppc970.osdl.org>
	Make sparse pick up the gcc internal include directory automatically.
	
	m68k used to do this by hand, but it really ends up being needed
	for any environment that does cross-builds, so just do it
	unconditionally.
	
	This should mean that you never need to cross-build sparse or
	have any other hacks for checking a cross-built environment.

<davis_g@com.rmk.(none)>
	[ARM PATCH] 2181/1: Fix gcc-4.0 static declaration of '__clz_tab'
	 follows non-static declaration build error
	
	Patch from George G. Davis
	
	Building kernels with recent gcc-4.0-20041024 snapshot results in
	"static declaration of '__clz_tab' follows non-static declaration"
	build error. Since the "extern const UQItype __clz_tab[]" definition
	is not required, this patch removes it to fix the build.
	
	Signed-off-by: George G. Davis 

<davem@nuts.davemloft.net>
	[SPARC64]: Do free_initmem() poisioning.
	
	Just like on x86
	
	Signed-off-by: David S. Miller <davem@davemloft.net>

<davem@nuts.davemloft.net>
	[SPARC64]: Update defconfig.

<davem@nuts.davemloft.net>
	[SPARC64]: Add __must_check to user copy routines.
	
	Signed-off-by: David S. Miller <davem@davemloft.net>

<davem@nuts.davemloft.net>
	[SPARC64]: Fix IRQ setting in sunsu serial driver.
	
	up->irq was just duplicating up->port.irq so
	delete the former and only use the latter.  We
	were not initializing up->port.irq so this would
	cause port shutdown crashes when synchronize_irq()
	was called.
	
	Based upon a bug report and patch from
	RChan <rspchan@starhub.net.sg>
	
	Signed-off-by: David S. Miller <davem@davemloft.net>

<Liam.Girdwood@com.rmk.(none)>
	[ARM PATCH] 2085/1: PXA SSP driver
	
	Patch from Liam Girdwood
	
	This patch adds support the PXA250, 255, 26x and 27x SSP ports. It
	provides a generic core for simple IO-based SSP applications and allows
	easy port setup for DMA access.
	
	Depends on register definitions in patch 2084/1
	
	Signed-off-by: Liam Girdwood 
	

<Liam.Girdwood@com.rmk.(none)>
	[ARM PATCH] 2084/1: PXA SSP, I2S and other misc register defs
	
	Patch from Liam Girdwood
	
	Adds some PXA register and bit definitions:-
	  o SSP ports
	  o I2S
	  o AC97_SYSCLK (Mainstone)
	  o I2C Alternate function and direction
	  o ASSP and NSSP Clock enables
	
	Signed-off-by: Liam Girdwood 
	

<rmk@flint.arm.linux.org.uk>
	[ARM] Remove duplicate includes from ARM files.
	
	This set of changes came from a larger patch by Adrian Bunk.

<matthew@wil.cx>
	[PATCH] parisc: arch/parisc/kernel/perf_asm.S
	
	Indentation and comment cleanup
	
	Committed-by: Grant Grundler <grundler@parisc-linux.org>

<matthew@wil.cx>
	[PATCH] parisc: unwind fixes
	
	- fix unwind table search so it works reliably
	- add special case handling for ret_from_kernel_thread and _switch_to_ret
	- tidy up the code a bit
	- Fix sp falling in an unmapped kernel page
	- Sparse annotations
	
	Committed-by: Randolph Chung <tausq@parisc-linux.org>

<matthew@wil.cx>
	[PATCH] parisc: spinlock fixes
	
	 - Fix SMP f_list corruption problem.
	
	   This was rather subtle.  It turns out that gcc was doing a small
	   amount of reordering around the file_lock because it doesn't see our
	   spinlock implementation as being a barrier.  To fix this I
	
	   - Added the appropriate barriers to all the spinlocks.
	   - Removed the atomic opencoded spinlock and redid it as a proper one.
	
	   SMP now seems stable on a 2xA500 and has survived a 10 hour 35 loop
	   make -j 4 kernel compile without showing any problems (previously, it
	   usually fell over in the first loop).
	
	 - Since we have one or two users who don't want SMP, make the
	   code base compile for UP again ...
	
	 - missing parenthesis for pointer dereferencing
	
	Committed-by: James Bottomley <jejb@parisc-linux.org>
	Committed-by: Thibaut Varene <varenet@parisc-linux.org>

<matthew@wil.cx>
	[PATCH] parisc: debuglock fixes
	
	 - pdc_printf from Randolph Chung
	 - implement memory barriers in debuglocks
	
	Committed-by: Thibaut Varene <varenet@parisc-linux.org>

<matthew@wil.cx>
	[PATCH] parisc: fix 64-bit gcc 3.3 compiles
	
	Remove gcc alias directive to fix gcc-3.3.4 64-bit kernels
	
	Committed-by: Carlos O'Donell <carlos@parisc-linux.org>

<matthew@wil.cx>
	[PATCH] parisc: register usage documentation update
	
	Register usage documentation update
	
	Committed-by: Randolph Chung <tausq@parisc-linux.org>

<matthew@wil.cx>
	[PATCH] parisc: remove unused header file
	
	Remove unused asm/som.h (Olaf Hering)
	
	Committed-by: Matthew Wilcox <willy@parisc-linux.org>

<matthew@wil.cx>
	[PATCH] parisc: make atomic_t 32-bit
	
	Make atomic_t an int instead of a long to match the other architectures
	
	Committed-by: Matthew Wilcox <willy@parisc-linux.org>

<matthew@wil.cx>
	[PATCH] parisc: make __kernel_clock_t long
	
	fix __kernel_clock_t definition so that e.g. proper process times are returned
	to userspace
	
	Committed-by: Randolph Chung <tausq@parisc-linux.org>

<matthew@wil.cx>
	[PATCH] parisc: fix HPUX compile problem
	
	Fix compile error when HPUX support is enabled
	
	Committed-by: Randolph Chung <tausq@parisc-linux.org>

<matthew@wil.cx>
	[PATCH] parisc: assembly fixes and comments
	
	Add comments and references for relied-upon translations
	Add some extra comment to space_check
	Add support for prober and probew in our non-access TLB fault emulation path
	Force sr2 to 0 in syscall_restore
	
	Committed-by: Carlos O'Donell <carlos@parisc-linux.org>

<geert@linux-m68k.org>
	[PATCH] m68k: HP300 core updates
	
	Update of HP300 core support to use bootinfo etc. (from Kars de Jong)
	
	Signed-off-by: Kars de Jong <jongk@linux-m68k.org>
	Signed-off-by: Geert Uytterhoeven <geert@linux-m68k.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<geert@linux-m68k.org>
	[PATCH] m68k: HP300 DIO
	
	HP300 DIO bus updates from Kars de Jong:
	  - Removed kludges for internal HPIB, no need to handle it as a DIO device
	  - Removed dio_scodetoviraddr() and introduced dio_scodetophysaddr() instead,
	    to be able to support DIO-II
	  - Removed trailing white space
	  - Changed error return code of dio_find() from 0 to -1, since select code 0
	    is a valid select code
	  - Added support for DIO-II
	  - Fixed problem with DIO_ENCODE_ID()
	
	Signed-off-by: Kars de Jong <jongk@linux-m68k.org>
	Signed-off-by: Geert Uytterhoeven <geert@linux-m68k.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<geert@linux-m68k.org>
	[PATCH] m68k: HP300 LANCE
	
	HP300 LANCE updates from Kars de Jong:
	  - Updated HP LANCE driver to use the new DIO semantics
	  - If only HP LANCE or MVME147 LANCE is selected, enable compile-time
	    choice of LANCE register access. If both are defined, go through the
	    function pointer
	  - Added support for CONFIG_NET_POLL_CONTROLLER
	  - Fixed problem with disabling board interrupts in hplance_close() which
	    caused the driver to lock up
	
	Signed-off-by: Kars de Jong <jongk@linux-m68k.org>
	Signed-off-by: Geert Uytterhoeven <geert@linux-m68k.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<geert@linux-m68k.org>
	[PATCH] m68k: HP300 fb
	
	HP300 frame buffer device updates from Kars de Jong:
	  - Updated to use the new DIO semantics
	  - Added support for DIO-II boards
	  - Added support for 8 bit Catseye boards
	  - Fixed colour map support
	  - Added fb_blank() implementation
	  - Added fb_fillrect() implementation
	  - Added fb_sync() implementation
	
	Signed-off-by: Kars de Jong <jongk@linux-m68k.org>
	Signed-off-by: Geert Uytterhoeven <geert@linux-m68k.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<geert@linux-m68k.org>
	[PATCH] m68k: M68k I/O for generic 8250 on HP300
	
	M68k I/O updates from Kars de Jong and Jochen Friedrich:
	  - To be able to use the generic 8250 driver on the HP300, added dummy
	    implementations of inb(), inb_p(), outb() and outb_p()
	  - Added implementations of readb(), writeb(), readl(), and writel() for the
	    8250 driver
	
	Signed-off-by: Kars de Jong <jongk@linux-m68k.org>
	Signed-Off-By: Jochen Friedrich <jochen@scram.de>
	Signed-off-by: Geert Uytterhoeven <geert@linux-m68k.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<geert@linux-m68k.org>
	[PATCH] m68k: HP300 8250 serial for DCA and APCI ports
	
	Created HP300 8250 driver which supports DCA and APCI ports. Support for APCI
	is still experimental and unfinished (no support for interrupts).
	Console support should be okay though (from Kars de Jong)
	
	Signed-off-by: Kars de Jong <jongk@linux-m68k.org>
	Signed-off-by: Geert Uytterhoeven <geert@linux-m68k.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<geert@linux-m68k.org>
	[PATCH] m68k: HP300 config
	
	HP300 configuration updates from Kars de Jong:
	  - Updated help for CONFIG_HP300
	  - DIO support defaults to y
	  - HP DCA support depends on SERIAL_8250
	  - Added HP APCI option
	  - Removed HP DCA from SERIAL_CONSOLE dependencies
	
	Signed-off-by: Kars de Jong <jongk@linux-m68k.org>
	Signed-off-by: Geert Uytterhoeven <geert@linux-m68k.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<geert@linux-m68k.org>
	[PATCH] m68k: HP300 SCSI chip is 98265A
	
	HP300: Fix typos in the DIO output. The SCSI chip is a 98265A, not a 98625A.
	NetBSD has this already fixed.
	
	Signed-off-by: Jochen Friedrich <jochen@scram.de>
	Signed-off-by: Geert Uytterhoeven <geert@linux-m68k.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<geert@linux-m68k.org>
	[PATCH] m68k: hades-pci.c: replace pci_find_device() with pci_get_device()
	
	As pci_find_device() is going away I have replaced this call with
	pci_get_device().
	
	Signed-off-by: Hanna Linder <hannal@us.ibm.com>
	Signed-off-by: Geert Uytterhoeven <geert@linux-m68k.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<geert@linux-m68k.org>
	[PATCH] m68k: HP300: Convert DIO bus and its drivers to the new driver model
	
	HP300: Convert DIO bus and its drivers to the new driver model (from Jochen
	Friedrich).
	
	Signed-off-by: Jochen Friedrich <jochen@scram.de>
	Signed-off-by: Kars de Jong <jongk@linux-m68k.org>
	Signed-off-by: Geert Uytterhoeven <geert@linux-m68k.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<geert@linux-m68k.org>
	[PATCH] m68k: fix incorrect config comment in check_bugs()
	
	M68k: Fix incorrect config comment in check_bugs()
	
	Signed-off-by: Geert Uytterhoeven <geert@linux-m68k.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<geert@linux-m68k.org>
	[PATCH] m68k: missing/superfluous config.h
	
	M68k: Add missing and remove superfluous #include <linux/config.h>
	
	Signed-off-by: Geert Uytterhoeven <geert@linux-m68k.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<geert@linux-m68k.org>
	[PATCH] m68k: Sun-3 Makefile: join short multi-line
	
	Sun-3 Makefile: join short multi-line
	
	Signed-off-by: Geert Uytterhoeven <geert@linux-m68k.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<geert@linux-m68k.org>
	[PATCH] m68k: MVME167 serial: Replace bottom half handler with task queue handler
	
	MVME167 serial: Fix compilation by replacing the bottom half handler with a
	task queue handler, based on the Cyclades driver (from Kars de Jong)
	
	Signed-off-by: Geert Uytterhoeven <geert@linux-m68k.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<geert@linux-m68k.org>
	[PATCH] m68k: Add 43 missing syscalls
	
	M68k: Add 43 missing syscalls (up to 2.6.9)
	
	Signed-off-by: Geert Uytterhoeven <geert@linux-m68k.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<geert@linux-m68k.org>
	[PATCH] m68k: Update defconfig for 2.6.9
	
	M68k: Update defconfig for 2.6.9
	
	Signed-off-by: Geert Uytterhoeven <geert@linux-m68k.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<geert@linux-m68k.org>
	[PATCH] m68k: Add defconfig for Amiga
	
	M68k: Add defconfig for Amiga (based on the Debian config)
	
	Signed-off-by: Geert Uytterhoeven <geert@linux-m68k.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<geert@linux-m68k.org>
	[PATCH] m68k: Add defconfig for Apollo
	
	M68k: Add defconfig for Apollo (derived from the Debian config for HP9000/300)
	
	Signed-off-by: Geert Uytterhoeven <geert@linux-m68k.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<geert@linux-m68k.org>
	[PATCH] m68k: Add defconfig for Atari
	
	M68k: Add defconfig for Atari (based on the Debian config)
	
	Signed-off-by: Geert Uytterhoeven <geert@linux-m68k.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<geert@linux-m68k.org>
	[PATCH] m68k: Add defconfig for BVME4000 and BVME6000
	
	M68k: Add defconfig for BVME4000 and BVME6000 (based on the Debian config)
	
	Signed-off-by: Geert Uytterhoeven <geert@linux-m68k.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<geert@linux-m68k.org>
	[PATCH] m68k: Add defconfig for HP9000/300 and HP9000/400
	
	M68k: Add defconfig for HP9000/300 and HP9000/400 (based on the Debian config)
	
	Signed-off-by: Geert Uytterhoeven <geert@linux-m68k.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<geert@linux-m68k.org>
	[PATCH] m68k: Add defconfig for Macintosh
	
	M68k: Add defconfig for Macintosh (based on the Debian config)
	
	Signed-off-by: Geert Uytterhoeven <geert@linux-m68k.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<geert@linux-m68k.org>
	[PATCH] m68k: Add defconfig for MVME147
	
	M68k: Add defconfig for MVME147 (based on the Debian config)
	
	Signed-off-by: Geert Uytterhoeven <geert@linux-m68k.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<geert@linux-m68k.org>
	[PATCH] m68k: Add defconfig for MVME162, MVME166, and MVME167
	
	M68k: Add defconfig for MVME162, MVME166, and MVME167 (based on the Debian
	config)
	
	Signed-off-by: Geert Uytterhoeven <geert@linux-m68k.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<geert@linux-m68k.org>
	[PATCH] m68k: Add defconfig for Q40 and Q60
	
	M68k: Add defconfig for Q40 and Q60 (based on the Debian config)
	
	Signed-off-by: Geert Uytterhoeven <geert@linux-m68k.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<geert@linux-m68k.org>
	[PATCH] m68k: Add defconfig for Sun 3
	
	M68k: Add defconfig for Sun 3 (based on the Debian config)
	
	Signed-off-by: Geert Uytterhoeven <geert@linux-m68k.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<geert@linux-m68k.org>
	[PATCH] m68k: Add defconfig for Sun 3x
	
	M68k: Add defconfig for Sun 3x (derived from the Debian config for Sun 3)
	
	Signed-off-by: Geert Uytterhoeven <geert@linux-m68k.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<geert@linux-m68k.org>
	[PATCH] m68k: Disable SERIO_I8042
	
	M68k: Disable SERIO_I8042
	
	Signed-off-by: Geert Uytterhoeven <geert@linux-m68k.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<geert@linux-m68k.org>
	[PATCH] m68k: Reiserfs: Add missing #include <linux/sched.h>
	
	Reiserfs: Add missing #include <linux/sched.h>
	
	Signed-off-by: Geert Uytterhoeven <geert@linux-m68k.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<geert@linux-m68k.org>
	[PATCH] m68k: Sun 3: Fix modular XFS by exporting vmalloc_end
	
	Sun 3: Fix modular XFS by exporting vmalloc_end
	
	Signed-off-by: Geert Uytterhoeven <geert@linux-m68k.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<geert@linux-m68k.org>
	[PATCH] m68k: Remove duplicate includes
	
	M68k: Remove duplicate includes (from Adrian Bunk)
	
	Signed-off-by: Geert Uytterhoeven <geert@linux-m68k.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<torvalds@ppc970.osdl.org>
	Undo totally broken m68k patch.
	
	Note to self: any m68k patch that touches a SMP file is
	likely not worth it.
	
	Cset exclude: geert@linux-m68k.org[torvalds]|ChangeSet|20041101000206|42067

<hirofumi@mail.parknet.co.jp>
	[PATCH] FAT: remove incorrect BUG_ON()
	
	This is valid state if file was accessed by multiple processes at the
	same time.
	
	Signed-off-by: OGAWA Hirofumi <hirofumi@mail.parknet.co.jp>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<hirofumi@mail.parknet.co.jp>
	[PATCH] FAT: fix VFAT_IOCTL_READDIR_BOTH ioctl
	
	If "utf8" option was specified and app uses VFAT_IOCTL_READDIR_BOTH
	ioctl, utf8_wcstombs() is used. utf8_wcstombs() doesn't add the nul
	terminate. Then fat_ioctl_filldir() uses a wrong length of name by
	strlen().
	
	This patch passes the correct length to fat_ioctl_filldir(), and
	doesn't use nul terminate anymore.
	
	Many helps by Alex Villacs Lasso. Thanks.
	
	Signed-off-by: OGAWA Hirofumi <hirofumi@mail.parknet.co.jp>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<davem@nuts.davemloft.net>
	[SPARC64]: Add dummy pci_get_legacy_ide_irq() routine.
	
	Signed-off-by: David S. Miller <davem@davemloft.net>

<matthew@wil.cx>
	[PATCH] Use optimised byteswap again
	
	Looks like Al's patch to sparsify the byteorder code prevented use of the
	assembler-optimised code.  Not that I can blame him -- three underscores
	are C-coded and two underscores are assembly-optimised.

<gerg@snapgear.com>
	[PATCH] m68knommu: add hardware defines for the ColdFire 527x CPU family
	
	Add SIM hardware module definitions for the ColdFire 527x CPU family.
	
	Signed-off-by: Greg Ungerer <gerg@snapgear.com>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<gerg@snapgear.com>
	[PATCH] m68knommu: new CPU support strings in setup
	
	Change 5280 and 5282 CPU support to be generic 528x family.
	Also add support for the new 527x ColdFire family.
	
	Signed-off-by: Greg Ungerer <gerg@snapgear.com>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<gerg@snapgear.com>
	[PATCH] m68knommu: update syscall table to be inline with other architectures
	
	Update the m68knommu system call table to be in line with all
	other architectures. There is really no reason this needs to
	be different from any other architecture.
	
	Signed-off-by: Geert Uytterhoeven <geert@linux-m68k.org>
	Signed-off-by: Greg Ungerer <gerg@snapgear.com>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<gerg@snapgear.com>
	[PATCH] m68knommu: build real lib udelay() function
	
	Build the new m68knommu lib function udelay().
	
	Signed-off-by: Greg Ungerer <gerg@snapgear.com>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<gerg@snapgear.com>
	[PATCH] m68knommu: new board support nad missing sections for linker script
	
	Couple of updates for ther m68knommu linker script.
	
	. Add support for the Freescale M5271EVB and M5275EVB boards
	. Add support for the Sneha CPU16B board
	. Changes to use the generic 528x define to 5280 and 5282 base boards
	. Add the missing param section
	. Align the ramfs section on a 4k (pseudo page size) boundary
	
	
	Signed-off-by: Greg Ungerer <gerg@snapgear.com>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<gerg@snapgear.com>
	[PATCH] m68knommu: create real lib udelay() function
	
	Create a real non-inlined function for m68knommu udelay().
	We can save a little code space this way (and on most uClinux
	patforms this is a problem).
	
	Signed-off-by: Greg Ungerer <gerg@snapgear.com>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<gerg@snapgear.com>
	[PATCH] m68knommu: new CPU and board options for configuration
	
	A few updates to the m68knommu configuration:
	
	. Made the Morotola 5280 and 5282 support be a common 528x family
	. Add support for selecting the 527x ColdFire family (5270/5271/5274/5275)
	. Add support for selecting Freescale M5271EVB board
	. Add support for selecting Freescale M5275EVB board
	. Add support for selecting Sneha CPU16B board
	. Add support for selecting Feith SCALES and CANCAM boards
	. Fix some gramatical errors in help lines
	
	Signed-off-by: Greg Ungerer <gerg@snapgear.com>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<gerg@snapgear.com>
	[PATCH] m68knommu: update syscall definitions to match new syscall table
	
	Update the m68knommu system call definitions to match the modified
	syscall table. This will bring it into line with other architectures.
	
	Signed-off-by: Greg Ungerer <gerg@snapgear.com>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<gerg@snapgear.com>
	[PATCH] m68knommu: fix calculation overflow in udelay() on fast CPU's
	
	Re-work the udelay() function. On fast ColdFire CPU's we are
	overflowing in the calculation and getting totally bogus
	results.
	
	On old 68k and ColdFire CPU's we have no 32*32->64 multiply
	instruction. So we resort to a mul/shift calculation similar
	to what ARM uses.
	
	Signed-off-by: Greg Ungerer <gerg@snapgear.com>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<gerg@snapgear.com>
	[PATCH] m68knommu: clock definitions for 527x ColdFire CPU's
	
	Add clock rate definitions for newly support ColdFire 527x family
	of CPU's. And switch to the generic 528x define for the 5280 and
	5282 CPU's.
	
	Signed-off-by: Greg Ungerer <gerg@snapgear.com>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<gerg@snapgear.com>
	[PATCH] m68knommu: fix do_signal() to properly use get_signal_to_deliver()
	
	Completely rework m68knommu do_signal() signal handling code.
	Changed to use get_signal_to_deliver() properly, and remove
	un-neccessary local signal type checks.
	
	Signed-off-by: Greg Ungerer <gerg@snapgear.com>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<gerg@snapgear.com>
	[PATCH] m68knommu: makefile support for new CPU and board types
	
	Add build support for new CPU families and boards. Specifically for
	the 527x ColdFire family, and the generic 528x CPU family.
	Also made the switch to -O1, gives smaller code on m68k and ColdFire
	platforms.
	
	Signed-off-by: Greg Ungerer <gerg@snapgear.com>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<gerg@snapgear.com>
	[PATCH] m68knommu: checksum.h needs linux/in6.h
	
	Need to include linux/in6.h in m68knommu checksum.h to get
	a clean compile. All other architectures to this too.
	
	Signed-off-by: Greg Ungerer <gerg@snapgear.com>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<rmk@flint.arm.linux.org.uk>
	[SERIAL] 8250: Return interrupt handler status.
	
	Thomas Koeller points out that we're always returning IRQ_HANDLED
	from our interrupt handler, even if we find no interrupt work to
	be done.

<aia21@cantab.net>
	NTFS: Fix stupid bug in fs/ntfs/attrib.c::ntfs_attr_find() that resulted in
	      a NULL pointer dereference in the error code path when a corrupt
	      attribute was found.
	
	Thanks to Domen Puncer for the bug report.
	
	Signed-off-by: Anton Altaparmakov <aia21@cantab.net>

<janitor@at.rmk.(none)>
	[SERIAL] replace schedule_timeout() with msleep/msleep_interruptible()
	
	Use msleep()/msleep_interruptible() [as appropriate]
	instead of schedule_timeout() to guarantee the task delays
	as expected.
	
	Signed-off-by: Nishanth Aravamudan
	Signed-off-by: Maximilian Attems
	Signed-off-by: Russell King <rmk@arm.linux.org.uk>

<rmk@flint.arm.linux.org.uk>
	[SERIAL] 8250_gsc: Convert to use serial8250_{un,}register_port.

<rmk@flint.arm.linux.org.uk>
	[ARM] mtd: update mapping drivers.
	
	This updates dc21285.c, integrator-flash.c and sa1100-flash.c map
	drivers.

<shaggy@austin.ibm.com>
	JFS: use alloc_metapage for consistency
	
	We defind alloc_metapage, but instead of using it, the potential callers
	are calling mempool_alloc directly.  Since we have and use the function,
	free_metapage, we should be consistent and use alloc_metapage.
	
	This patch also changes the argument to alloc_metapage so that the
	caller passes gfp_mask directly, rather than a less descriptive flag.
	
	Signed-off-by: Dave Kleikamp <shaggy@austin.ibm.com>

<matthias@net.rmk.(none)>
	[ARM PATCH] 2183/1: GPIO84:81 for PXA26x defines
	
	Patch from Matthias Burghardt
	
	Adds bit definitions for PXA26x\'s GPIO lines 81 to 84 and their alternate functions

<shaggy@austin.ibm.com>
	JFS: make some symbols static
	
	The patch below makes some JFS symbols that are only used inside the
	file they are defined in static.
	
	Signed-off-by: Adrian Bunk <bunk@stusta.de>
	Signed-off-by: Dave Kleikamp <shaggy@austin.ibm.com>

<teanropo@cc.jyu.fi>
	[PATCH] Don't initialize /dev/pg0 to be always busy
	
	Without this patch my HP CD-Writer doesn't work.
	With this applied everything is fine.
	
	Signed-off-by: Tero Roponen <teanropo@cc.jyu.fi>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<acme@conectiva.com.br>
	[NET] add missing includes and forward decls to filter.h
	
	Signed-off-by: Arnaldo Carvalho de Melo <acme@conectiva.com.br>
	Signed-off-by: David S. Miller <davem@redhat.com>

<aia21@cantab.net>
	NTFS: Add MODULE_VERSION() to fs/ntfs/super.c.
	
	Signed-off-by: Anton Altaparmakov <aia21@cantab.net>

<marcel@holtmann.org>
	[Bluetooth] Fix connection hash bug
	
	When calling hci_conn_hash_del() the acl_num value is incremented,
	but it must be decremented.
	
	Signed-off-by: Marcel Holtmann <marcel@holtmann.org>

<acme@conectiva.com.br>
	[NET] add missing include to divert.h
	
	Signed-off-by: Arnaldo Carvalho de Melo <acme@conectiva.com.br>
	Signed-off-by: David S. Miller <davem@redhat.com>

<bzolnier@trik.(none)>
	[ide] remove more dead ide exports
	
	From: Christoph Hellwig <hch@lst.de>
	
	Signed-off-by: Bartlomiej Zolnierkiewicz <bzolnier@gmail.com>

<bzolnier@trik.(none)>
	[ide] obsolete /proc/ide/hd?/settings
	
	Majority of these settings is also available through ioctls.
	We will deal with the rest during deprecation period.
	
	Signed-off-by: Bartlomiej Zolnierkiewicz <bzolnier@gmail.com>

<bzolnier@trik.(none)>
	[ide] obsolete some command line parameters
	
	"hdx=autotune", "hdx=noautotune":
	* should be handled by host drivers needing them
	
	"idex=autotune", "idex=noautotune":
	* should die
	
	"idex=ata66":
	* should be handled by host drivers needing it
	
	"idex=dma":
	* works only for: cs5220.c, generic.c, hpt366.c, triflex.c
	* DMA should be used by default
	
	"idex=reset", "idex=serialize":
	* host drivers should set these settings when needed
	
	"idex=base[,ctl[,irq]]":
	* host drivers should auto-detect correct settings
	* ordering should be controlled by user-space
	
	"ide0=four":
	* should be handled by ide-generic driver
	
	Signed-off-by: Bartlomiej Zolnierkiewicz <bzolnier@gmail.com>

<bzolnier@trik.(none)>
	[ide] obsolete "enable DMA by default" config options
	
	CONFIG_IDEDMA_PCI_AUTO and CONFIG_IDEDMA_ICS_AUTO
	
	Host drivers should deal with broken hardware themselves.
	Warn if DMA support is enabled but "enable DMA by default" is not.
	
	Signed-off-by: Bartlomiej Zolnierkiewicz <bzolnier@gmail.com>

<matthew@wil.cx>
	[PATCH] parisc: Merge head64.S and head.S
	
	Merge head64.S and head.S
	Cleanup 64-bit sp manipulations
	
	Committed-by: Kyle McMartin <kyle@parisc-linux.org>
	Committed-by: Randolph Chung <tausq@parisc-linux.org>

<matthew@wil.cx>
	[PATCH] parisc: small debug cleanup in power.c
	
	small debug cleanup
	
	Committed-by: Randolph Chung <tausq@parisc-linux.org>

<matthew@wil.cx>
	[PATCH] parisc: add HP copyright to perf counters
	
	add HP copyright
	
	Committed-by: Grant Grundler <grundler@parisc-linux.org>

<matthew@wil.cx>
	[PATCH] parisc: Fix 64-bit linking
	
	add some more BL macros and b,l in appropriate places in entry.S to
	expand the range of our jumps and work around the 64 bit binutils problem
	where it will allow the jump ranges to go beyond their permitted limits
	without complaining.
	
	Committed-by: James Bottomley <jejb@parisc-linux.org>

<matthew@wil.cx>
	[PATCH] parisc: Kconfig debugging options
	
	PA-RISC does have spinlock debugging and doesn't have the frame pointer
	option.  USERMODE had been added twice to spinlock debugging, so remove that.
	
	Committed-by: Randolph Chung <tausq@parisc-linux.org>
	Committed-by: Matthew Wilcox <willy@parisc-linux.org>

<matthew@wil.cx>
	[PATCH] parisc: make install
	
	Add a make install target
	
	Committed-by: Matthew Wilcox <willy@parisc-linux.org>

<matthew@wil.cx>
	[PATCH] parisc: Fix N-class SMP
	
	Fix N class SMP
	
	The main fixes are:
	
	 - memory barriers to our space and control register moves
	 - fix for the N class merced bus problem which can't have more than
	   one PxTLB broadcast outstanding at once
	 - make smp_call_function() wait until the function completes
	
	This now boots and runs on a 32MB N4000 in Fort Collins with 2 cpus
	and discontig mem support.
	
	Committed-by: James Bottomley <jejb@parisc-linux.org>
	Committed-by: Randolph Chung <tausq@parisc-linux.org>

<matthew@wil.cx>
	[PATCH] parisc: update a500_defconfig
	
	Enable SMP on A500 by default
	
	Committed-by: Paul Bame <bame@parisc-linux.org>

<matthew@wil.cx>
	[PATCH] parisc: Initialise restart_block
	
	Calling sys_restart_syscall without having taking a signal
	across a syscall leaves the restart_block uninitialized,
	allowing malicious user code to crash the kernel.
	
	FIX:
	
	Define INIT_THREAD_INFO such that restart_block.fn is set to
	the default do_not_restart_syscall.
	
	Committed-by: Carlos O'Donell <carlos@parisc-linux.org>

<matthew@wil.cx>
	[PATCH] parisc: Add user_space macro
	
	Add user_space macro, to determine if we are in a user
	versus kernel space.
	
	Committed-by: Carlos O'Donell <carlos@parisc-linux.org>

<matthew@wil.cx>
	[PATCH] parisc: Light-weight syscall support
	
	Add light-weight-syscall support to parisc. The first LWS is atomic CAS.
	
	Committed-by: Carlos O'Donell <carlos@parisc-linux.org>

<akpm@osdl.org>
	[PATCH] sysfs backing store - prepare sysfs_file_operations helpers
	
	From: Maneesh Soni <maneesh@in.ibm.com>
	
	o The following patch provides dumb helpers to access the corresponding
	  kobject, attribute or binary attribute given a dentry and prepare the
	  sysfs_file_operation methods for using sysfs_dirents.
	
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Greg Kroah-Hartman <greg@kroah.com>

<akpm@osdl.org>
	[PATCH] fix oops with firmware loading
	
	From: Maneesh Soni <maneesh@in.ibm.com>
	
	My fault, a bad typo in fs/sysfs/bin.c.
	
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Greg Kroah-Hartman <greg@kroah.com>

<akpm@osdl.org>
	[PATCH] sysfs backing store - add sysfs_direct structure
	
	From: Maneesh Soni <maneesh@in.ibm.com>
	
	o This patch introduces the new sysfs_dirent data structure. The sysfs_dirent
	  is added to the dentry corresponding to each of the element which can be
	  represented in sysfs like, kobject (directory), text or binary attributes
	  (files), attribute groups (directory) and symlinks.
	
	o It uses dentry's d_fsdata field to attach the corresponding sysfs_dirent.
	
	o The sysfs_dirents are maintained in a tree of all the sysfs entries using the
	  s_children and s_sibling list pointers.
	
	o This patch also changes how we access attributes and kobjects in
	  file_operations from a given dentry, basically introducing one more level of
	  indirection.
	
	o The sysfs_dirents are freed and the sysfs_dirent tree is updated accordingly
	  upon the deletion of corresponding dentry. The sysfs dirents are kept alive
	  as long as there is corresponding dentry around. The are freed when the
	  dentry is finally out of dcache using the ->d_iput() method.
	
	o This also fixes the dentry leaks in case of error paths after sysfs has
	  got a newly alocated (and hashed) dentry from sysfs_get_dentry() by
	  d_drop()'ing the dentry.
	
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Greg Kroah-Hartman <greg@kroah.com>

<akpm@osdl.org>
	[PATCH] sysfs backing store: use sysfs_dirent based tree in file removal
	
	From: Maneesh Soni <maneesh@in.ibm.com>
	
	o This patch uses the sysfs_dirent based tree while removing sysfs files
	  and directories. This avoids holding dcache_lock by not using dentry
	  based vfs tree. Thus simplyfying the removal logic in sysfs.
	
	o It uses two helper routines sysfs_get_name(), to get the name for
	  sysfs element and sysfs_drop_dentry() to delete the dentry given a
	  sysfs_dirent.
	
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Greg Kroah-Hartman <greg@kroah.com>

<akpm@osdl.org>
	[PATCH] sysfs backing store: use sysfs_dirent based tree in dir file operations
	
	From: Maneesh Soni <maneesh@in.ibm.com>
	
	o This patch implements the sysfs_dir_operations file_operations strucutre for
	  sysfs directories. It uses the sysfs_dirent based tree for ->readdir() and
	  ->lseek() methods instead of simple_dir_operations which use dentry based
	  tree.
	
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Greg Kroah-Hartman <greg@kroah.com>

<akpm@osdl.org>
	[PATCH] sysfs backing store: stop pinning dentries/inodes for leaf entries
	
	From: Maneesh Soni <maneesh@in.ibm.com>
	
	o This patch stops the pinning of non-directory or leaf dentries and inodes.
	  The leaf dentries and inodes are created during lookup based on the
	  entries on sysfs_dirent tree. These leaves are removed from the dcache
	  through the VFS dentry ageing process during shrink dcache operations. Thus
	  reducing about 80% of sysfs lowmem needs.
	
	o This implments the ->lookup() for sysfs directory inodes and allocates
	  dentry and inode if the lookup is successful and avoids the need of
	  allocating and pinning of dentry and inodes during the creation of
	  corresponding sysfs leaf entry. As of now the implementation has not
	  required negative dentry creation on failed lookup. As sysfs is still a
	  RAM based filesystem, negative dentries are not of any use IMO.
	
	o The leaf dentry allocated after successful lookup is connected to the
	  existing corresponding sysfs_dirent through the d_fsdata field.
	
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Greg Kroah-Hartman <greg@kroah.com>

<akpm@osdl.org>
	[PATCH] Fix race in sysfs_read_file() and sysfs_write_file()
	
	From: Simon Derr <Simon.Derr@bull.net>
	
	- fixes the race between threads by adding a semaphore in sysfs_buffer
	
	- allocates the buffer upon call to pread().  We still call again
	  fill_read_buffer() if the file is "rewinded" to offset zero.
	
	- fixes the comparison in flush_read_buffer().
	
	Signed-off-by: Simon Derr <simon.derr@bull.net>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Greg Kroah-Hartman <greg@kroah.com>

<akpm@osdl.org>
	[PATCH] Possible race in sysfs_read_file() and sysfs_write_file()
	
	From: Simon Derr <Simon.Derr@bull.net>
	
	Add a `needs_read_fill' field in sysfs_buffer so that reading after a write in
	a sysfs file returns valid data.
	
	(instead of the data that have been written, that may be invalid or at the
	wrong offset)
	
	Signed-off-by: Simon Derr <simon.derr@bull.net>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Greg Kroah-Hartman <greg@kroah.com>

<akpm@osdl.org>
	[PATCH] Fix deadlocks on dpm_sem
	
	From: Paul Mackerras <paulus@samba.org>
	
	Currently the device_pm_foo() functions are rather prone to deadlocks
	during suspend/resume.  This is because the dpm_sem is held for the
	duration of device_suspend() and device_resume() as well as device_pm_add()
	and device_pm_remove().  If for any reason you get a device addition or
	removal triggered by a device's suspend or resume code, you get a deadlock.
	 (The classic example is a USB host adaptor resuming and discovering that
	the mouse you used to have plugged in has gone away.)
	
	This patch fixes the problem by using a separate semaphore, called
	dpm_list_sem, to cover the places where we need the device pm lists to be
	stable, and by being careful about how we traverse the lists on suspend and
	resume.  I have analysed the various cases that can occur and I am
	confident that I have handled them all correctly.  I posted this patch
	together with a detailed analysis 10 days ago.
	
	Signed-off-by Paul Mackerras <paulus@samba.org>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Greg Kroah-Hartman <greg@kroah.com>

<dtor_core@ameritech.net>
	[PATCH] Driver core: export device_attach
	
	Driver core: make device_attach() global and export it and
	             driver_attach() so subsystems can have finer
	             control over binding process.
	
	Signed-off-by: Dmitry Torokhov <dtor@mail.ru>
	Signed-off-by: Greg Kroah-Hartman <greg@kroah.com>

<dtor_core@ameritech.net>
	[PATCH] Driver core: add driver_probe_device
	
	Driver core: rename bus_match into driver_probe_device and export
	             it so subsystems can bind an individual device to a
	             specific driver without getting involved with driver
	             core internals.
	
	Signed-off-by: Dmitry Torokhov <dtor@mail.ru>
	Signed-off-by: Greg Kroah-Hartman <greg@kroah.com>

<kay.sievers@vrfy.org>
	[PATCH] kobject: fix hotplug bug with seqnum
	
	On Sat, Oct 30, 2004 at 04:54:29AM +0200, Kay Sievers wrote:
	> On Sat, Oct 30, 2004 at 02:25:23AM +0200, Kay Sievers wrote:
	> > On Sat, Oct 30, 2004 at 02:00:45AM +0200, Kay Sievers wrote:
	> > > On Fri, Oct 29, 2004 at 06:13:19PM -0500, Greg KH wrote:
	> > > > On Fri, Oct 29, 2004 at 11:28:56PM +0200, Kay Sievers wrote:
	> > > > > > But there might still be a problem.  With this change, the sequence
	> > > > > > number is not sent out the kevent message.  Kay, do you think this is an
	> > > > > > issue?  I don't think we can get netlink messages out of order, right?
	> > > > >
	> > > > > Right, especially not the events with the same DEVPATH, like "remove"
	> > > > > beating an "add". But I'm not sure if the number isn't useful. Whatever
	> > > > > we may do with the hotplug over netlink in the future, we will only have
	> > > > > /sbin/hotplug for the early boot and it may be nice to know, what events
	> > > > > we have already handled...
	> > > > >
	> > > > > > I'll hold off on applying this patch until we figure this out...
	> > > > >
	> > > > > How about just reserving 20 bytes for the number (u64 will never be
	> > > > > more than that), save the pointer to that field, and fill the number in
	> > > > > later?
	> > > >
	> > > > Ah, something like this instead?  I like it, it's even smaller than the
	> > > > previous patch.  Compile tested only...
	> > >
	> > > I like that. How about the following. It will keep the buffer clean from
	> > > random chars, cause the kevent does not have the vector and relies on
	> > > the '\0' to separate the strings from each other.
	> > > I've tested it. The netlink-hotplug message looks like this:
	> > >
	> > > recv(3, "remove@/class/input/mouse2\0ACTION=remove\0DEVPATH=/class/input/mouse2\0SUBSYSTEM=input\0SEQNUM=961                 \0", 1024, 0) = 113
	> >
	> > Hmm, these trailing spaces are just bad, sorry. I'll better pass the
	> > envp array over to send_uevent() and clean up the keys while copying
	> > the env values into the skb buffer. This will make the event payload
	> > more safe too. So your first version looks better.
	>
	> How about this? We copy over key by key into the skb buffer and the
	> netlink message can get the envp array without depending on a single
	> continuous buffer.
	>
	> The netlink message looks nice like this now:
	>
	> recv(3, "
	>   add@/devices/pci0000:00/0000:00:1d.1/usb3/3-2/3-2:1.0\0
	>   HOME=/\0
	>   PATH=/sbin:/bin:/usr/sbin:/usr/bin\0
	>   ACTION=add\0
	>   DEVPATH=/devices/pci0000:00/0000:00:1d.1/usb3/3-2/3-2:1.0\0
	>   SUBSYSTEM=usb\0
	>   SEQNUM=991\0
	>   DEVICE=/proc/bus/usb/003/008\0
	>   PRODUCT=46d/c03e/2000\0
	>   TYPE=0/0/0\0
	>   INTERFACE=3/1/2\0
	> ", 1024, 0) = 268
	
	Here is an improved version that uses skb_put() to fill the skb buffer,
	instead of trimming the buffer to the final size after we've copied over
	all keys.
	
	
	Signed-off-by: Kay Sievers <kay.sievers@vrfy.org>
	Signed-off-by: Greg Kroah-Hartman <greg@kroah.com>

<dtor_core@ameritech.net>
	[PATCH] Driver core: add driver symlink to device
	
	Driver core: when binding device to a driver create "driver"
	             symlink in device's directory. Rename serio's
	             "driver" attribute to "drvctl" (write-only)
	
	Signed-off-by: Dmitry Torokhov <dtor@mail.ru>
	Signed-off-by: Greg Kroah-Hartman <greg@kroah.com>

<kay.sievers@vrfy.org>
	[PATCH] take me home, hotplug_path[]
	
	Move hotplug_path[] out of kmod.[ch] to kobject_uevent.[ch] where
	it belongs now. At some time in the future we should fix the remaining bad
	hotplug calls (no SEQNUM, no netlink uevent):
	
	  ./drivers/input/input.c (no DEVPATH on some hotplug events!)
	  ./drivers/pnp/pnpbios/core.c
	  ./drivers/s390/crypto/z90main.c
	
	Signed-off-by: Kay Sievers <kay.sievers@vrfy.org>
	Signed-off-by: Greg Kroah-Hartman <greg@kroah.com>

<aia21@cantab.net>
	NTFS: Make several functions and variables static.  (Adrian Bunk)
	
	Signed-off-by: Adrian Bunk <bunk@stusta.de>
	Signed-off-by: Anton Altaparmakov <aia21@cantab.net>

<clameter@sgi.com>
	[PATCH] fix IBM cyclone clock and some cleanup
	
	 - fix broken IBM cyclone time interpolator support
	 - add support for cyclic timers through an addition of a mask
	   in the timer interpolator structure
	 - Allow time_interpolator_update() and time_interpolator_get_offset()
	   to be invoked without an active time interpolator
	   (necessary since the cyclone clock is initialized late in ACPI
	   processing)
	 - remove obsolete function time_interpolator_resolution()
	 - add a mask to all struct time_interpolator setups in the
	   kernel
	 - Make time interpolators work on 32bit platforms
	
	Signed-off-by: Christoph Lameter <clameter@sgi.com>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<dlsy@snoqualmie.dp.intel.com>
	[PATCH] PCI: Updated patch to add ExpressCard support
	
	This patch adds ExpressCard support to pciehp driver.  It also includes
	the code that implements _OSC method call in driver/pci/pci-acpi.c for
	use by the drivers.
	
	
	Signed-off-by: Dely Sy <dely.l.sy@intel.com>
	Signed-off-by: Greg Kroah-Hartman <greg@kroah.com>

<dlsy@snoqualmie.dp.intel.com>
	[PATCH] PCI: Updated patch to fix adapter speed mismatch for 2.6 kernel
	
	After doing more testing, I found that I couldn't use quirk to set the flag
	to identify the chipset, for there are platforms that have other bridge
	chip with PCI-X hotpluggable slots in the same system.  Therefore, I use
	the vendor id and device id to identify the bridge chip that needs the
	workaround. The code doing the workaround remains unchanged.
	
	
	Signed-off-by: Dely Sy <dely.l.sy@intel.com>
	Signed-off-by: Greg Kroah-Hartman <greg@kroah.com>

<nacc@us.ibm.com>
	[PATCH] pci/quirks: replace schedule_timeout() with msleep()
	
	Description: Use msleep() instead of schedule_timeout() to guarantee the
	task delays as expected.
	
	Signed-off-by: Nishanth Aravamudan <nacc@us.ibm.com>
	Signed-off-by: Greg Kroah-Hartman <greg@kroah.com>

<lmendez19@austin.rr.com>
	[PATCH] hid-core: add two devices to device blacklist
	
	This patch adds the Delorme Earthmate usb gps and the Cypress hid->com
	rs232 adapter to hid-core's device blacklist.
	
	Signed-off-by: Lonnie Mendez <lmendez19@austin.rr.com>
	Signed-off-by: Greg Kroah-Hartman <greg@kroah.com>

<stern@rowland.harvard.edu>
	[PATCH] UHCI: Workaround for broken remote wakeup
	
	This patch adds a workaround for host controllers that don't properly
	support remote wakeup.  That includes Intel controllers (on certain badly
	designed motherboards) and a recent Genesys Logic controller.  Although
	the UHCI driver avoids suspending the Intel-based controllers, this
	workaround will handle things about as well.
	
	In the not-too-distant future I will have to revamp most of the root-hub
	suspend/resume code in the UHCI driver.  For now, please apply the patch.
	
	
	
	Signed-off-by: Alan Stern <stern@rowland.harvard.edu>
	Signed-off-by: Greg Kroah-Hartman <greg@kroah.com>

<arjan@fenrus.demon.nl>
	[PATCH] USB: remove dead code in usb video
	
	Hi,
	
	Patch below removes somem dead, never used code from the usbvideo driver,
	including a function that uses interruptible_sleep_on_timeout() oddly.
	
	Signed-off-by: Arjan van de Ven <arjan@fenrus.demon.nl>
	Signed-off-by: Greg Kroah-Hartman <greg@kroah.com>

<david-b@pacbell.net>
	[PATCH] usbcore and system sleep states
	
	This patch makes usbcore behave better with system sleep states, fixing
	some PM/PCI integration problems as well as some PM/USB ones.
	
	 - PCI HCDs should behave better, even if they don't support PCI PM;
	   tested with both ACPI and APM suspend cycles, and swsusp.
	
	 - Systems that advertise ACPI S1 support don't necessarily support the
	   PCI D1 or D2 states for their USB controllers.  (Examples include
	   Centrino laptops.)  This patch makes them suspend into D3hot, which
	   always works (and won't take much longer to resume, either).
	
	 - Handle the "go into deeper suspend" transition the way PCI drivers
	   are supposed to.
	
	 - Understand that USB only has one suspend state:  if the device is
	   suspended, it can't do any better.
	
	 - Export some symbols to HCDs, so they can reuse more of the existing
	   usbcore framework.
	
	Plus minor related cleanups.
	
	The PCI D1/D2 state issue is a variant of an earlier problem, with the
	same root cause:  the PM core thinking there's a one-to-one mapping
	between system states (roughly:  ACPI S0/S1/S3/S4) and PCI states that
	a given device can support (only D0 is required, D3hot is common).
	That same issue comes up again with USB.
	
	Signed-off-by: David Brownell <dbrownell@users.sourceforge.net>
	Signed-off-by: Greg Kroah-Hartman <greg@kroah.com>

<david-b@pacbell.net>
	[PATCH] PCI: make pci_save_state() only happen when no suspend()
	
	Recent PCI changes are killing USB Power Management, and maybe more.
	
	The root cause is a change to the PCI suspend code from back in May,
	saving a copy of pci config space after the PCI driver did.  That
	was OK until a recent change made it overwrite the copy that the
	PCI device driver would later restore ... net result for USB is
	that DMA would always be disabled after resume.
	
	This patch restores the long-documented behavior of PCI driver
	suspend/resume calls (drivers are responsible for saving and
	restoring config space state), and also removes a superfluous line
	from the USB suspend logic.
	
	Signed-off-by: Benjamin Herrenschmidt <benh@kernel.crashing.org>
	Signed-off-by: David Brownell <dbrownell@users.sourceforge.net>
	Signed-off-by: Greg Kroah-Hartman <greg@kroah.com>

<david-b@pacbell.net>
	[PATCH] EHCI suspend/resume updates
	
	This patch much improves suspend/resume behavior of EHCI, as tested with
	"echo suspend > /sys/power/state" and "echo disk > /sys/power/state".
	
	 - Quiescing the controller has to handle a case where the software has
	   finished shutting down periodic and async schedules, but the hardware
	   hasn't yet finished its part.
	
	 - When suspending the root hub, be more by-the-book so that resumes
	   behave better.
	
	 - When resuming after suspend-to-disk, or in general when no port is
	   suspended, the driver re-uses the initialization logic.  That logic
	   needed to understand that resources don't need re-allocation, and
	   that a few things need to be reset to the default state.
	
	 - More code paths needed to notice a suspended controller, and stop
	   right away.
	
	 - To shut down the controller, start with the root hub ports and
	   work up from there.
	
	Tested by writing "suspend" or "disk" to /sys/power/state; several
	systems resumed OK, at least given the associated usbcore patches.
	
	Signed-off-by: David Brownell <dbrownell@users.sourceforge.net>
	Signed-off-by: Greg Kroah-Hartman <greg@kroah.com>

<david-b@pacbell.net>
	[PATCH] OHCI suspend/resume updates (minor)
	
	This marks the controller as running at the end of a "resume" path used
	when the controller lost power, or was otherwise reset (not a real resume).
	
	Signed-off-by: David Brownell <dbrownell@users.sourceforge.net>
	Signed-off-by: Greg Kroah-Hartman <greg@kroah.com>

<david-b@pacbell.net>
	[PATCH] usbcore, diagnostic tweaks
	
	Minor updates for better diagnostics from usbcore:
	
	 - Only print ep0 maxpacket when it's not what we first tried
	
	 - have khubd say when it's looking at a hub
	
	 - When warning about synchronous control or bulk timeouts,
	   report the program that triggered the message.
	
	Signed-off-by: David Brownell <dbrownell@users.sourceforge.net>
	Signed-off-by: Greg Kroah-Hartman <greg@kroah.com>

<stern@rowland.harvard.edu>
	[PATCH] UHCI: Convert remainder to bitwise-and
	
	This patch, suggested by Karsten Wiese, converts a few remainder ('%')
	operations in the UHCI driver to bitwise-and ('&').  It's not a huge
	change, but this is a common idiom in C and it will save a few bytes with
	some compilers.  Also one of the changes is in an inner loop, so it might
	help a little bit.
	
	
	
	From: Karsten Wiese <annabellesgarden@yahoo.de>
	Signed-off-by: Alan Stern <stern@rowland.harvard.edu>
	Signed-off-by: Greg Kroah-Hartman <greg@kroah.com>

<stern@rowland.harvard.edu>
	[PATCH] USB: Dequeuing of root-hub URBs
	
	This patch fixes a tiny SMP-type hole in root-hub synchronization.
	Although the HCD glue layer properly unlinks root-hub status URBs
	synchronously, it doesn't do so for URBs sent to endpoint 0.  This patch
	copies some code from usb_kill_urb, to make such unlinks wait until the
	host controller driver has finished handling the URB.  This behavior is
	required for hcd_endpoint_disable to work correctly.
	
	The patch also renames usb_rh_status_dequeue to usb_rh_urb_dequeue (to
	better describe its updated function) and declares the routine static.
	
	
	
	Signed-off-by: Alan Stern <stern@rowland.harvard.edu>
	Signed-off-by: Greg Kroah-Hartman <greg@kroah.com>

<bunk@stusta.de>
	[APPLETALK]: Remove an unused function
	
	Signed-off-by: Adrian Bunk <bunk@stusta.de>
	Signed-off-by: David S. Miller <davem@davemloft.net>

<bunk@stusta.de>
	[IRDA]: Remove an unused function in net/irda/qos.c
	
	Signed-off-by: Adrian Bunk <bunk@stusta.de>
	Signed-off-by: David S. Miller <davem@davemloft.net>

<bunk@stusta.de>
	[AX25]: Remove an unused function in ax25_route.c
	
	Signed-off-by: Adrian Bunk <bunk@stusta.de>
	Signed-off-by: David S. Miller <davem@davemloft.net>

<bunk@stusta.de>
	[NETFILTER]: Remove an unused function in ipt_tcpmss.c
	
	Signed-off-by: Adrian Bunk <bunk@stusta.de>
	Signed-off-by: David S. Miller <davem@davemloft.net>

<david-b@pacbell.net>
	[PATCH] USB: fix ohci_restart warning
	
	With 2.6.10 getting warning about ohci_restart() defined
	and not used if !CONFIG_PM.
	
	Signed-off-by: Stephen Hemminger <shemminger@osdl.org>
	Signed-off-by: David Brownell <dbrownell@users.sourceforge.net>
	Signed-off-by: Greg Kroah-Hartman <greg@kroah.com>

<tglx@linutronix.de>
	[PATCH] Lock initializer unifying Batch 2 (USB)
	
	To make spinlock/rwlock initialization consistent all over the kernel,
	this patch converts explicit lock-initializers into spin_lock_init() and
	rwlock_init() calls.
	
	Currently, spinlocks and rwlocks are initialized in two different ways:
	
	  lock = SPIN_LOCK_UNLOCKED
	  spin_lock_init(&lock)
	
	  rwlock = RW_LOCK_UNLOCKED
	  rwlock_init(&rwlock)
	
	this patch converts all explicit lock initializations to
	spin_lock_init() or rwlock_init(). (Besides consistency this also helps
	automatic lock validators and debugging code.)
	
	The conversion was done with a script, it was verified manually and it
	was reviewed, compiled and tested as far as possible on x86, ARM, PPC.
	
	There is no runtime overhead or actual code change resulting out of this
	patch, because spin_lock_init() and rwlock_init() are macros and are
	thus equivalent to the explicit initialization method.
	
	That's the second batch of the unifying patches.
	
	Signed-off-by: Thomas Gleixner <tglx@linutronix.de>
	Acked-by: Ingo Molnar <mingo@elte.hu>
	Signed-off-by: Greg Kroah-Hartman <greg@kroah.com>

<tgraf@suug.ch>
	[PKT_SCHED]: Add generic classifier routines.
	
	Adds generic routines used by classifier to:
	 - bind/unbind to classes
	 - configure action/police/indev
	 - dump action/police
	
	Signed-off-by: Thomas Graf <tgraf@suug.ch>
	Signed-off-by: David S. Miller <davem@davemloft.net>

<tgraf@suug.ch>
	[PKT_SCHED]: cls_fw: Cleanup fw_classify
	
	Cleans up fw_classify by using the generic routines and
	adds a additional but unneeded continue to document that
	an action may overrule the filter's match result.
	
	Signed-off-by: Thomas Graf <tgraf@suug.ch>
	Signed-off-by: David S. Miller <davem@davemloft.net>

<tgraf@suug.ch>
	[PKT_SCHED]: cls_fw: Use generic routines to configure action/policer
	
	Adds a new function fw_change_attr using the new generic routines which
	can be used to change attribute but also to initially set them to avoid
	duplicated code.
	
	Signed-off-by: Thomas Graf <tgraf@suug.ch>
	Signed-off-by: David S. Miller <davem@davemloft.net>

<tgraf@suug.ch>
	[PKT_SCHED]: cls_fw: Use generic routines to dump action/policer
	
	Signed-off-by: Thomas Graf <tgraf@suug.ch>
	Signed-off-by: David S. Miller <davem@davemloft.net>

<tgraf@suug.ch>
	[PKT_SCHED]: cls_fw: Whitespace/ifdef fixes
	
	Signed-off-by: Thomas Graf <tgraf@suug.ch>
	Signed-off-by: David S. Miller <davem@davemloft.net>

<tgraf@suug.ch>
	[PKT_SCHED]: cls_fw: Break is not enough to stop walking
	
	break is not enough to escape from the walking loops, since
	multiple encapsulated loops are used to traverse the hash tables.
	
	Signed-off-by: Thomas Graf <tgraf@suug.ch>
	Signed-off-by: David S. Miller <davem@davemloft.net>

<acme@conectiva.com.br>
	[PATCH] USB: add id for Siemens x65 series of mobiles to pl2303 driver
	
	[PL2303] add id for Siemens x65 series of mobiles
	
	Tested with CX65 and S65 models
	
	Signed-off-by: Arnaldo Carvalho de Melo <acme@conectiva.com.br>
	Signed-off-by: Greg Kroah-Hartman <greg@kroah.com>

<tgraf@suug.ch>
	[PKT_SCHED]: cls_fw: CONFIG_NET_CLS_IND is not dependant on CONFIG_NET_CLS_ACT
	
	Signed-off-by: Thomas Graf <tgraf@suug.ch>
	Signed-off-by: David S. Miller <davem@davemloft.net>

<bunk@stusta.de>
	[PATCH] USB stv680.c: remove an unused function
	
	The patch below removes an unused function from
	drivers/usb/media/stv680.c
	
	
	Signed-off-by: Adrian Bunk <bunk@stusta.de>
	Signed-off-by: Greg Kroah-Hartman <greg@kroah.com>

<bunk@stusta.de>
	[PATCH] USB ohci-dbg.c: remove an unused function
	
	The patch below removes an unused function from
	drivers/usb/host/ohci-dbg.c
	
	
	
	
	Signed-off-by: Adrian Bunk <bunk@stusta.de>
	Signed-off-by: Greg Kroah-Hartman <greg@kroah.com>

<stern@rowland.harvard.edu>
	[PATCH] UHCI: Use a sane timeout for device initialization
	
	This patch changes the device initialization code for the UHCI driver to
	use a more meaningful timeout than simply waiting for 1000 loop
	iterations.  It also causes the code to fail when a timeout occurs rather
	than proceed blindly.
	
	
	Signed-off-by: Alan Stern <stern@rowland.harvard.edu>
	Signed-off-by: Greg Kroah-Hartman <greg@kroah.com>

<hadi@znyx.com>
	[NETFILTER]: ipt mutex locks access
	
	Signed-off-by: Harald Welte <laforge@netfilter.org>
	Signed-off-by: David S. Miller <davem@davemloft.net>

<hadi@cyberus.ca>
	[PKT_SCHED]: Add iptables action.
	
	Signed-off-by: jamal <hadi@cyberus.ca>
	Signed-off-by: David S. Miller <davem@davemloft.net>

<bunk@stusta.de>
	[SCTP]: Remove an unused function in outqueue.c
	
	Signed-off-by: Adrian Bunk <bunk@stusta.de>
	Signed-off-by: David S. Miller <davem@davemloft.net>

<herbert@gondor.apana.org.au>
	[XFRM]: Move xfrm4_rcv export to its site
	
	Signed-off-by: Herbert Xu <herbert@gondor.apana.org.au>
	Signed-off-by: David S. Miller <davem@davemloft.net>

<herbert@gondor.apana.org.au>
	[IPSEC]: Make  ah4/esp4/ipcomp depend on INET
	
	As it is someone could disable INET and still enable ah4/esp4/ipcomp.
	This patch adds the dependency on INET to prevent this.
	
	Signed-off-by: Herbert Xu <herbert@gondor.apana.org.au>
	Signed-off-by: David S. Miller <davem@davemloft.net>

<herbert@gondor.apana.org.au>
	[TCP]: Modularize tcpdiag
	
	This is the first step in fixing the tcpdiag/modular ipv6 issue.
	We modularise tcpdiag in the obvious way.
	
	Next we can move out the IPv6-specific stuff.
	
	Signed-off-by: Herbert Xu <herbert@gondor.apana.org.au>
	Signed-off-by: David S. Miller <davem@davemloft.net>

<arjan@infradead.org>
	[NET]: Unexport call_netdevice_notifiers()
	
	Signed-off-by: Arjan van de Van <arjan@infradead.org>
	Signed-off-by: David S. Miller <davem@davemloft.net>

<tgraf@suug.ch>
	[PKT_SCHED]: cls_route: Use generic routines for class binding and police config/dump
	
	Signed-off-by: Thomas Graf <tgraf@suug.ch>
	Signed-off-by: David S. Miller <davem@davemloft.net>

<tgraf@suug.ch>
	[PKT_SCHED]: cls_rsvp*: Use generic routines for class binding and police config/dump
	
	Signed-off-by: Thomas Graf <tgraf@suug.ch>
	Signed-off-by: David S. Miller <davem@davemloft.net>

<tgraf@suug.ch>
	[PKT_SCHED]: cls_tcindex: Use generic routines for class binding and police config/dump
	
	Signed-off-by: Thomas Graf <tgraf@suug.ch>
	Signed-off-by: David S. Miller <davem@davemloft.net>

<tgraf@suug.ch>
	[PKT_SCHED]: cls_u32: Use generic routines for class binding and police config/dump
	
	Signed-off-by: Thomas Graf <tgraf@suug.ch>
	Signed-off-by: David S. Miller <davem@davemloft.net>

<matthew@wil.cx>
	[PATCH] parisc: add copyright to sba_iommu
	
	add copyright for knaresh - he did initial work for pa8800 support on 2.4
	
	Committed-by: Grant Grundler <grundler@parisc-linux.org>

<matthew@wil.cx>
	[PATCH] parisc: better stack traces
	
	In parisc_terminate(), do the stack trace from the faulting location
	instead of from the current (i.e. parisc_terminate()) location.
	
	Committed-by: Randolph Chung <tausq@parisc-linux.org>

<matthew@wil.cx>
	[PATCH] parisc: fix ptrace
	
	Make ptrace work again
	
	someone (not naming names) forgot that %cr30 is the *thread* register
	not the task register.
	
	Committed-by: James Bottomley <jejb@parisc-linux.org>

<matthew@wil.cx>
	[PATCH] parisc: signal race fixes
	
	Signal race fixes
	
	Committed-by: Carlos O'Donell <carlos@parisc-linux.org>
	Committed-by: James Bottomley <jejb@parisc-linux.org>

<matthew@wil.cx>
	[PATCH] parisc: support get/put_unaligned
	
	We need to include asm-generic/uaccess.h for the new
	get/put_unaligned macros
	
	Committed-by: James Bottomley <jejb@parisc-linux.org>

<matthew@wil.cx>
	[PATCH] parisc: _raw_write_trylock
	
	Need a _raw_write_trylock() for the out of line spinlock code to compile
	
	... nothing in the kernel actually uses this, of course ...
	
	Committed-by: James Bottomley <jejb@parisc-linux.org>

<matthew@wil.cx>
	[PATCH] parisc: remove K_STW_PIC and K_LDW_PIC
	
	There is no pure assembly inline syscall for userspace to include. Thus
	remove the definitions of K_STW_PIC and K_LDW_PIC.
	
	Committed-by: Carlos O'Donell <carlos@parisc-linux.org>

<matthew@wil.cx>
	[PATCH] parisc: Remove isr verification
	
	Remove isr verification printf. This is not needed, and was never needed,
	we always have access to the page if we made it past the security check
	in traps.c
	
	Committed-by: Carlos O'Donell <carlos@parisc-linux.org>

<arjan@infradead.org>
	[TCP]: Unexport sysctl_tcp_tw_recycle
	
	Unexport sysctl_tcp_tw_recycle; nothing is using it in modules (it's quite
	internal to the ipv4 code after all); as a bonus item it gets rid of an
	ifdef...
	
	Signed-off-by: Arjan van de Ven <arjan@infradead.org>
	Signed-off-by: David S. Miller <davem@davemloft.net>

<herbert@gondor.apana.org.au>
	[XFRM]: Fix build failures without CONFIG_INET
	
	Signed-off-by: Herbert Xu <herbert@gondor.apana.org.au>
	Signed-off-by: David S. Miller <davem@davemloft.net>

<Michael.Waychison@Sun.COM>
	[TG3]: Fix fiber hw autoneg bounces
	
	We've recently noticed that the autonegotiation cleanup made a while
	back (between tg3 3.8 and 3.9) has issues which make the link bounce up
	and down.
	
	I've traced it to be caused by the tg3_timer 1 second work noticing that
	MAC_STATUS_LNKSTATE_CHANGED was set, which driver would see as the link
	going down.
	
	Upon further inspection, it appears that we don't wait long enough
	between setting SG_DIG_CTRL and reading the SG_DIG_STATUS for the result.
	
	The following patch (from a quasi recent bk tree) makes this code path
	wait up to 200ms for the link to establish.  In my testing, I'm seeing
	it take around 20ms for the negotiation to complete.
	
	I haven't had the chance to test how this patch affects the case where
	the switch doesn't have autoneg enabled, although I suspect fallback
	should work correctly.
	
	Please consider applying, thanks,
	
	Signed-off-by: Mike Waychison <michael.waychison@sun.com>
	Signed-off-by: David S. Miller <davem@davemloft.net>

<davem@nuts.davemloft.net>
	[TG3]: Use ioremap_nocache().
	
	Noticed by Andi Kleen.
	
	Signed-off-by: David S. Miller <davem@davemloft.net>

<davem@nuts.davemloft.net>
	[TG3]: Bump driver version and reldate.
	
	Signed-off-by: David S. Miller <davem@davemloft.net>

<shemminger@osdl.org>
	[NETFILTER]: Fix build without INET.
	
	Signed-off-by: Stephen Hemminger <shemminger@osdl.org>
	Signed-off-by: David S. Miller <davem@davemloft.net>

<mingo@elte.hu>
	[NET]: Fix unbalanced local_bh_enable() in dev_queue_xmit()
	
	Signed-off-by: Ingo Molnar <mingo@elte.hu>
	Signed-off-by: David S. Miller <davem@davemloft.net>

<chas@relax.cmf.nrl.navy.mil>
	[ATM]: [ambassador] fix <irq> type and printk warning (from Randy Dunlap <rddunlap@osdl.org>)
	
	Signed-off-by: Chas Williams <chas@cmf.nrl.navy.mil>
	Signed-off-by: David S. Miller <davem@davemloft.net>

<chas@relax.cmf.nrl.navy.mil>
	[ATM]: [drivers] add missing pci_tbl exports (pointed out by Adam

<len.brown@intel.com>
	[ACPI] ACPIPNP handle IRQ resource value of 0 (David Shaohua Li)
	
	Signed-off-by: Len Brown <len.brown@intel.com>

<len.brown@intel.com>
	[ACPI] fix x86_64 build warnings in video.c (Luming Yu)
	
	Signed-off-by: Len Brown <len.brown@intel.com>

<acme@conectiva.com.br>
	[NET] add missing include to inet.h
	
	Signed-off-by: Arnaldo Carvalho de Melo <acme@conectiva.com.br>
	Signed-off-by: David S. Miller <davem@redhat.com>

<acme@conectiva.com.br>
	[NET] add missing include to inetdevice.h
	
	Signed-off-by: Arnaldo Carvalho de Melo <acme@conectiva.com.br>
	Signed-off-by: David S. Miller <davem@redhat.com>

<acme@conectiva.com.br>
	[NET] add missing include to icmp.h
	
	Signed-off-by: Arnaldo Carvalho de Melo <acme@conectiva.com.br>
	Signed-off-by: David S. Miller <davem@redhat.com>

<acme@conectiva.com.br>
	[NET] add missing include to iw_handler.h
	
	Signed-off-by: Arnaldo Carvalho de Melo <acme@conectiva.com.br>
	Signed-off-by: David S. Miller <davem@redhat.com>

<len.brown@intel.com>
	[ACPI] correct compiled-in acpi_dbg_level default
	
	Signed-off-by: Len Brown <len.brown@intel.com>

<len.brown@intel.com>
	[ACPI] fix return values for ACPI_FUNCTION_TRACE
	http://bugzilla.kernel.org/show_bug.cgi?id=3336
	
	Signed-off-by: Len Brown <len.brown@intel.com>

<len.brown@intel.com>
	[ACPI] Remove default PNPACPI driver binding to legacy ACPI devices.
	
	This conflicted with PNP-aware and ACPI-aware drivers,
	and required that its exclude-list carry vendor-specific
	driver names, which we can't possibly maintain.
	
	Signed-off-by: David Shaohua Li <shaohua.li@intel.com>
	Signed-off-by: Len Brown <len.brown@intel.com>

<rmk@flint.arm.linux.org.uk>
	[SERIAL] Add support for Dell PCI Remote Access Card III.

<rmk@flint.arm.linux.org.uk>
	[SERIAL] Add ALPHA_KLUDGE_MCR from include/linux/serialP.h

<rmk@flint.arm.linux.org.uk>
	[SERIAL] 8250: Remove two warnings.

<bzolnier@elka.pw.edu.pl>
	[PATCH] libata PIO bugfix
	
	Untested but based on working IDE fix.
	
	We need to kmap()/kunmap() the current page
	not the first page of the scatterlist segment.
	
	Signed-off-by: Bartlomiej Zolnierkiewicz <bzolnier@gmail.com>
	Signed-off-by: Jeff Garzik <jgarzik@pobox.com>

<jbarnes@sgi.com>
	[IA64-SGI] remove duplicate INVALID_* defines from arch.h
	
	When I did the sparse stuff, I noticed some duplicate INVALID_* defines.  This
	patch removes one set of them and adds the proper include file to sn_sal.h.
	 
	Signed-off-by: Jesse Barnes <jbarnes@sgi.com>
	Signed-off-by: Tony Luck <tony.luck@intel.com>

<jbarnes@sgi.com>
	[IA64-SGI] remove redundant macros
	
	This patch removes some redundant nasid conversion macros from arch.h and
	updates callers to use the version they were defined to instead.
	 
	Signed-off-by: Jesse Barnes <jbarnes@sgi.com>
	Signed-off-by: Tony Luck <tony.luck@intel.com>

<jbarnes@sgi.com>
	[IA64-SGI] move nic_t to asm/sn/types.h
	
	Somehow nic_t crept into arch.h.  Move it to types.h where it belongs (it
	depends on u64, so pull in linux/types.h too).
	 
	Signed-off-by: Jesse Barnes <jbarnes@sgi.com>
	Signed-off-by: Tony Luck <tony.luck@intel.com>

<steiner@sgi.com>
	[IA64-SGI] Delete unused variable (master_node_bedrock_address)
	
	Delete master_node_bedrock_address. It is no longer needed.
	
	Signed-off-by: Jack Steiner <steiner@sgi.com>
	Signed-off-by: Tony Luck <tony.luck@intel.com>

<t-kochi@bq.jp.nec.com>
	[IA64] cleanup CPU drift print
	
	This patch skips printing drift information of a cpu where
	ITC drift information is not supported by SAL.  Without this,
	bogus value (-1ppm) is printed on boot.
	 
	 CPU 1: base freq=200.007MHz, ITC ratio=10/2, ITC freq=1000.035MHz+/--1ppm
	  
	is now
	   
	 CPU 1: base freq=200.007MHz, ITC ratio=10/2, ITC freq=1000.035MHz
	    
	Signed-off-by: Takayoshi Kochi <t-kochi@bq.jp.nec.com>
	Signed-off-by: Tony Luck <tony.luck@intel.com>

<jbarnes@sgi.com>
	[IA64-SGI] update sn2_defconfig
	
	Update sn2_defconfig to reflect some new options:
	o enable MCA debugging of more than just TLB errors
	o enable tmpfs xattr support
	o enable kernel userspace events
	o defaults for other new options
	 
	Signed-off-by: Jesse Barnes <jbarnes@sgi.com>
	Signed-off-by: Tony Luck <tony.luck@intel.com>

<tony.luck@intel.com>
	[IA64] tiger_defconfig update for 2.6.10-rc1
	
	Enable MCA_RECOVERY, TMPFS_XATTR, and other
	miscellaneous config options.
	
	Signed-off-by: Tony Luck <tony.luck@intel.com>

<tony.luck@intel.com>
	[IA64] promote configs/generic_defconfig to defconfig
	
	arch/ia64/defconfig should be one that is usable by the
	largest cross-section of the ia64 community.  Replace
	old version with an updated version of generic_defconfig.
	Change suggested by Jesse Barnes.
	
	Signed-off-by: Tony Luck <tony.luck@intel.com>

<nico@org.rmk.(none)>
	[ARM PATCH] 2187/1: fix lacking capability in pxa_gpio_mode()
	
	Patch from Nicolas Pitre
	
	This allows to set the default state of GPIOs before they're enabled 
	as output, eliminating spurious level transitions.
	
	Signed-off-by: Nicolas Pitre 

<davis_g@com.rmk.(none)>
	[ARM PATCH] 2188/1: Add missing MODULE_LICENSE declaration in PXA Lubbock PCMCIA driver
	
	Patch from George G. Davis
	
	The Lubbock PCMCIA socket driver, drivers/pcmcia/pxa2xx_lubbock.c,
	lacks a MODULE_LICENSE declaration. This patch merely adds the missing
	MODULE_LICENSE declaration to eliminate tainted kernel warnings when
	this driver is built as a module. I have intentionally not used the
	Dual MPL/GPL license in this case because 1) current linux-2.6.10-rc1
	PXA PCMCIA drivers use only the GPL license, 2) the original source
	files on which the PXA PCMCIA drivers are based, i.e. the SA11xx PCMCIA
	drivers, state: "If you wish to allow the use of your version of this
	file only under the terms of the GPL and not to allow others to use your
	version of this file under the MPL, indicate your decision by deleting
	the provisions above and replace them with the notice and other
	provisions required by the GPL."
	
	
	Signed-off-by:: George G. Davis 

<ben-linux@org.rmk.(none)>
	[ARM PATCH] 2189/1: S3C2410 - select pclk as source for timer if none specified for machine
	
	Patch from Ben Dooks
	
	Select the PCLK based TIMER4 to provide the system timer tick
	if there is no machine specific timer setup specified. This
	should make it easier to add new machines, as well as cut down
	on the code required in time.c when they are added.
	
	Signed-off-by: Ben Dooks 

<ben-linux@org.rmk.(none)>
	[ARM PATCH] 2190/1: S3C2410 - fix compile for S3C2440 CPUs
	
	Patch from Ben Dooks
	
	Fixes mis-labelled timer variables, and incldes the
	clock header to allow the code to compile. This
	was not caught on previous rounds as all the
	s3c2440 machine support is pending the finalisation
	of the new s3c2440 uart driver (arriving soon)
	
	Signed-off-by: Ben Dooks 

<rmk@flint.arm.linux.org.uk>
	[SERIAL] Fix PPC64 for recent serial changes
	
	- linux/8250.h is replaced by linux/serial_8250.h
	- we now pass serial port information via a platform device.

<peterc@gelato.unsw.edu.au>
	[PATCH] standalone sys_ni.c for not-implemented syscalls
	
	Sticking the not-implemented syscall stuff in sys.c is a pain because the
	cond_syscall()s explode when certain prototypes are in scope.  And we need
	those prototypes' header files for the C code in sys.c.
	
	Fix all that up by moving all the sys_ni_syscall code into its own .c file.
	
	Signed-off-by: Peter Chubb <peterc@gelato.unsw.edu.au>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<mporter@kernel.crashing.org>
	[PATCH] ppc32: 40x and Book E debug: core support
	
	This patch updates the 40x and Book E Debug exception handling paths to
	handle kernel space debug events.  It also fixes up the in-kernel ppc32
	kgdb stub to work properly.
	
	Signed-off-by: Matt Porter <mporter@kernel.crashing.org>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<mporter@kernel.crashing.org>
	[PATCH] ppc32: 40x and Book E debug: 4xx platform support
	
	This patch adds support to the 40x and 44x platform code for initializing
	debug events and using the in-kernel kgdb stub.
	
	Signed-off-by: Matt Porter <mporter@kernel.crashing.org>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<trini@kernel.crashing.org>
	[PATCH] ppc32: fix early request_irq
	
	Here's a patch which backs out the fix Randy Vinson came up with, and makes
	i8259_init() and openpic_hookup_cascade() use setup_irq (tested on LoPEC). 
	This also converts the rest of the request_irq callers that were expecting the
	old behavior (psurge SMP, chrp xmon, 85xx, some 82xx).  This is more untested,
	but looks correct.  I've left 8xx alone in this as it needs other changes
	before it would make sense.
	
	Signed-off-by: Tom Rini <trini@kernel.crashing.org>
	Acked-by: Ingo Molnar <mingo@elte.hu>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<yanmin.zhang@intel.com>
	[PATCH] x86_64: Fix 32bit aio setup
	
	Kernel 2.6.9-rc3-mm3 has a bug in function sys32_io_setup in file
	arch/x86_64/ia32/sys_ia32.c.  Local variable ctx64 is not initiated before
	sys32_io_setup calls sys_io_setup.  If ctx64 is not zero, and sys_io_setup
	will return -EINVAL.  Generic function compat_sys_io_setup has not the bug.
	
	Here is the patch against 2.6.9-rc3-mm3. Just use compat_sys_io_setup to
	replace sys32_io_setup.
	
	Signed-off-by: Zhang Yanmin <yanmin.zhang@intel.com>
	Signed-off-by: Andi Kleen <ak@suse.de>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<ak@suse.de>
	[PATCH] x86_64: Update cpuid feature tables.
	
	Add missing AMD CPUID feature bits.
	
	Fix wrong definition for AMD HTVALID flag.
	
	Signed-off-by: Andi Kleen <ak@suse.de>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<ak@suse.de>
	[PATCH] x86_64: Report SSE3 on AMD CPUs
	
	From: Mark Langsdorf
	
	Report SSE3 on AMD CPUs in /proc/cpuinfo
	
	Signed-off-by: Andi Kleen <ak@suse.de>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<ak@suse.de>
	[PATCH] x86_64: Fix compat_timer_t
	
	Fix type of compat_timer_t
	
	Pointed out by Matthew Wilcox
	
	Signed-off-by: Andi Kleen <ak@suse.de>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<ak@suse.de>
	[PATCH] x86_64: Defconfig update
	
	Update defconfig
	
	At the request of willy: add UHCI
	
	Signed-off-by: Andi Kleen <ak@suse.de>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<ak@suse.de>
	[PATCH] x86_64: Fix e820 overflow.
	
	Originally from Venkatesh Pallipadi for i386
	
	An e820 map with more than 18 entries would overflow into the EDID area in the
	zero page.  Fix this.
	
	This is a x86-64 port of Venka's i386 version.
	
	Signed-off-by: Andi Kleen <ak@suse.de>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<ak@suse.de>
	[PATCH] x86_64: Add early exception handler
	
	Add an early exception handler on x86-64 to get better debugging output for
	crashes before traps_init. 
	
	Requires earlyconsole.
	
	Signed-off-by: Andi Kleen <ak@suse.de>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<ak@suse.de>
	[PATCH] x86_64: Fix some readl/writel warnings
	
	Fix lots of readl/writel warnings in arch/x86_64
	
	Signed-off-by: Andi Kleen <ak@suse.de>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<ak@suse.de>
	[PATCH] x86_64: Fix make all
	
	From: Olaf Hering <olh@suse.de>
	
	make all fails while building a helper app:
	
	arch/x86_64/boot/tools/build.c:36:22: asm/boot.h: No such file or directory
	
	This patch fixes it for me.
	
	Signed-off-by: Andi Kleen <ak@suse.de>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<ak@suse.de>
	[PATCH] x86_64: Fix CONFIG_X86_MCE
	
	Fix CONFIG_X86_MCE to really enable/disable the MCE code
	
	Signed-off-by: Andi Kleen <ak@suse.de>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<ak@suse.de>
	[PATCH] x86_64: add nmi button support
	
	Ported from i386
	
	Support a sysctl to raise an oops with an NMI
	
	Signed-off-by: Andi Kleen <ak@suse.de>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<ak@suse.de>
	[PATCH] x86_64: Don't wait on panic
	
	Don't wait for a response from other CPUs on panic
	
	Signed-off-by: Andi Kleen <ak@suse.de>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<ak@suse.de>
	[PATCH] x86_64: Poison initdata
	
	Due to popular request
	
	Unconditionally poison __init code after bootup.
	
	Poison initdata too.
	
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<ak@suse.de>
	[PATCH] x86_64: Add 32bit quota support
	
	[untested, but other 64bit ports seem to get away with it]
	
	sys_quotactl seems to be 32/64bit clean, enable it for 32bit.
	
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<ak@suse.de>
	[PATCH] x86_64: Fix setup asm constraints
	
	Fix some asm constraints in setup.
	
	Signed-off-by: Andi Kleen <ak@suse.de>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<ak@suse.de>
	[PATCH] x86_64: Auto enable HPET on Summit
	
	From: James Cleverdon
	
	Switch to HPET timer automatically mode on Summit 2
	
	Signed-off-by: Andi Kleen <ak@suse.de>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<ak@suse.de>
	[PATCH] x86_64: Fallback to swiotlb for dma_alloc_coherent
	
	From: Suresh B Siddha
	
	Coresponding change to IA64 code is in, so this can be merged too.
	
	- fallback to swiotlb for consistent DMA mappings
	- fix a memory leak in dma_alloc_coherent
	
	Signed-off-by: Suresh Siddha <suresh.b.siddha@intel.com>
	Signed-off-by: Andi Kleen <ak@suse.de>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<long.pu@intel.com>
	[PATCH] x86_64: Use compat readdir and aio functions
	
	This patch replaced some sys32 syscall functions of X86_64 with the
	corresponding compat version.
	
	Signed-off-by: Pu Long  <long.pu@intel.com>
	Signed-off-by: Andi Kleen <ak@suse.de>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<ak@suse.de>
	[PATCH] x86_64: Remove bogus __initdata in wakeup path
	
	Found by Randy Dunlap
	
	Don't mark use_sysenter __initdata, it is used on suspend
	
	Signed-off-by: Andi Kleen <ak@suse.de>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<suresh.b.siddha@intel.com>
	[PATCH] x86-64: fix sibling map again
	
	Recent x86-64 sibling map fix for clustered mode by James
	(http://linux.bkbits.net:8080/linux-2.6/cset@414b34a6jkiHQ5AnhA269av76y3ZAw?nav=index.html)
	is not the recommended way of fixing it.
	
	That patch assumes BIOS for non-clustered systems accept the HW assigned
	value.  Why make this assumption when we can fix it in a better
	fashion(which is also used by x86 kernel's today)
	
	Basically use HW assigned apic_id's(returned by cpuid) for non clustered
	systems and for clustered use BIOS provided apic_id's.  Appended patch does
	this.
	
	Note: Similar issue was earlier disussed in context of x86 approx an year
	back and James then backed out his changes.
	http://www.ussg.iu.edu/hypermail/linux/kernel/0312.2/0167.html
	
	Signed-off-by: Suresh Siddha <suresh.b.siddha@intel.com>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<ak@suse.de>
	[PATCH] x86_64: set -fno-strict-aliasing for early boot code
	
	The boot decompressor is miscompiled by recent gcc 4.0s without this patch.
	
	Signed-off-by: Andi Kleen <ak@suse.de>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<ak@suse.de>
	[PATCH] Print real error when initramfs gunzip failed
	
	Print the real error when initramfs gunzip failed.  gunzip already sets up
	message correctly.
	
	Signed-off-by: Andi Kleen <ak@suse.de>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<ak@suse.de>
	[PATCH] Add panic blinking to 2.6
	
	This patch readds the panic blinking that was in 2.4 to 2.6.  This is
	useful to see when you're in X that the machine has paniced 
	
	It addresses previously criticism.
	It should work now when the keyboard interrupt is off.
	It doesn't fully emulate the handler, but has a timeout
	for this case.
	
	Signed-off-by: Andi Kleen <ak@suse.de>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<takata@linux-m32r.org>
	[PATCH] m32r: Fix ELF_CORE_COPY_REGS macro to generate  a correct "core" file
	
	This patch fixes ELF_CORE_COPY_REGS() macro in order to dump register
	information into "core" files correctly, because both parameters pr_reg and
	regs are passed as pointers to "elf_gregset_t" and "struct pt_regs",
	respectively.
	
	I've tested it by using a native m32r GNU debugger.
	
	Signed-off-by: Hirokazu Takata <takata@linux-m32r.org>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<takata@linux-m32r.org>
	[PATCH] m32r: remove rep_nop()
	
	Remove rep_nop() from include/asm-m32r/processor.h, because REP NOP (PAUSE)
	is a x86 specific instuction.
	
	Instead of rep_nop(), barrier() should be used for cpu_relax()
	as well as other architecuture.
	
		* include/asm-m32r/processor.h:
		- Change not to include "cachectl.h".
		- Remove rep_nop() and redefine cpu_relax() as barrier().
	
		* arch/m32r/kernel/smpboot.h:
		- Use cpu_relax() instead of rep_nop().
	
	Signed-off-by: Hirokazu Takata <takata@linux-m32r.org>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<takata@linux-m32r.org>
	[PATCH] m32r: remove old ELF relocation types
	
	Remove old relocation type definitions from include/asm-m32r/elf.h.  These
	ELF relocations are obsolete and no longer used.
	
		* include/asm-m32r/elf.h:
		- Remove old relocation types.
	
	Signed-off-by: Hirokazu Takata <takata@linux-m32r.org>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<aherrman@de.ibm.com>
	[PATCH] s390: make zfcp compile again.
	
	Make zfcp compile again after the SPI-5 constants and the interface to
	suspend I/O to scsi devices got added.
	
	Signed-off-by: Martin Schwidefsky <schwidefsky@de.ibm.com>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<shemminger@osdl.org>
	[PATCH] loop: convert to module_param
	
	Convert loopback device to new module_param to get rid of warning.
	
	Signed-off-by: Stephen Hemminger <shemminger@osdl.org>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<shemminger@osdl.org>
	[PATCH] rd: convert to module_param and add module alias
	
	Convert Ramdisk block device to module_param to get rid of warning.  Add
	module alias to cause correct autoloading.
	
	Signed-off-by: Stephen Hemminger <shemminger@osdl.org>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<aia21@cam.ac.uk>
	[PATCH] fs/buffer.c exports for NTFS
	
	I renamed the functions to more descriptive names:
	
		create_buffers -> alloc_page_buffers
		__set_page_buffers -> attach_page_buffers
	
	And I added a EXPORT_SYMBOL_GPL for alloc_page_buffers and made
	attach_page_buffers static inline and moved it to <linux/buffer_head.h>.
	
	Signed-off-by: Anton Altaparmakov <aia21@cantab.net>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<akpm@osdl.org>
	[PATCH] ext3_bread() cleanup
	
	- remove unused local
	
	- whitespace
	
	- put_bh() is faster than brelse()
	
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<dhowells@redhat.com>
	[PATCH] key management: fix locking problem and move __key_check() out of line
	
	The attached patch fixes a locking problem in key_lookup() and moves
	__key_check() out of line.
	
	Signed-Off-By: David Howells <dhowells@redhat.com>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<penberg@cs.helsinki.fi>
	[PATCH] radeonfb: more initializer fixes
	
	Use 8-bit palette entries for radeonfb and avoid zero-initialization as
	suggested by Geert Uytterhoeven.
	
	Signed-off-by: Pekka Enberg <penberg@cs.helsinki.fi>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<miles@gnu.org>
	[PATCH] v850: Work around include-definition-loop problem in <asm-v850/posix_types.h>
	
	Signed-off-by: Miles Bader <miles@gnu.org>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<miles@gnu.org>
	[PATCH] v850: Add definitions for memcpy_fromio and memcpy_toio
	
	Signed-off-by: Miles Bader <miles@gnu.org>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<miles@gnu.org>
	[PATCH] v850: Add __param linker section
	
	Signed-off-by: Miles Bader <miles@gnu.org>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<miles@gnu.org>
	[PATCH] v850: Fix misnamed variable in ptrace.c
	
	Signed-off-by: Miles Bader <miles@gnu.org>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<miles@gnu.org>
	[PATCH] v850: signal handling race fix
	
	Signed-off-by: Miles Bader <miles@gnu.org>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<bjorn.helgaas@hp.com>
	[PATCH] HPET init/add fixes
	
	Cleanup/bugfix HPET driver:
	
	    - hpet_init() could return failure with driver still registered with ACPI
	    - driver add() functions were marked __init, but can be called any time
	      until driver is unregistered (not a real problem until HPETs can be
	      hotplugged)
	    - time interpolator registration now done in driver add() path, so we can
	      support removal of HPETs someday
	    - physical MMIO address should be printed, not ioremapped address
	
	Signed-off-by: Bjorn Helgaas <bjorn.helgaas@hp.com>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<james4765@gmail.com>
	[PATCH] Documentation/digiboard.txt update
	
	Remove obsolete Documentation/digiboard.txt file - driver was obsoleted by
	the digiecpa driver.
	
	Signed-off-by: James Nelson <james4765@gmail.com>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<james4765@gmail.com>
	[PATCH] Documentation/00-INDEX.txt update
	
	Remove reference to to-be-deleted file in Documentation/00-INDEX.
	
	Signed-off-by: <james4765@gmail.com>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<james4765@gmail.com>
	[PATCH] MAINTAINERS update
	
	Fix reference to digiboard maintenance status - the digiecpa driver
	obsoleted the original driver.
	
	Signed-off-by: James Nelson <james4765@gmail.com>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<james4765@gmail.com>
	[PATCH] Documentation/digiecpa.txt update
	
	Update status of digiecpa driver & fix broken links in
	Documentation/digiecpa.txt.
	
	Signed-off-by: James Nelson <james4765@gmail.com>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<james4765@gmail.com>
	[PATCH] digiecpa MAINTAINERS update
	
	Update status of digiecpa driver in MAINTAINERS.
	
	Signed-off-by: James Nelson <james4765@gmail.com>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<james4765@gmail.com>
	[PATCH] computone: Documentation/computone.txt update
	
	Minor cleanup and status update to Documentation/computone.txt.
	
	Signed-off-by: James Nelson <james4765@gmail.com>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<james4765@gmail.com>
	[PATCH] computone: MAINTAINERS update
	
	Update status of Computone Intelliport driver in MAINTAINERS.
	
	Signed-off-by: James Nelson <james4765@gmail.com>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<james4765@gmail.com>
	[PATCH] floppy: Updates to Documentation/floppy.txt
	
	Cleanup and update to Documentation/floppy.txt.  Fix one incorrect option
	in listing.
	
	Signed-off-by: James Nelson <james4765@gmail.com>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<jbarnes@engr.sgi.com>
	[PATCH] document mmiowb and readX_relaxed a bit more in deviceiobook.tmpl
	
	This is a small patch to deviceiobook.tmpl to describe the new mmiowb
	routine a bit more completely.  I've also updated it to provide pointers to
	drivers that do write flushing, use mmiowb, and use the readX_relaxed
	routines.
	
	Acked-by: Grant Grundler <grundler@parisc-linux.org>
	Signed-off-by: Jesse Barnes <jbarnes@sgi.com>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<rmk+lkml@arm.linux.org.uk>
	[PATCH] saa7111.c: fix VIDEO_MODE_SECAM
	
	VIDEO_MODE_SECAM was incorrectly writing the contents of cached register 14
	back to hardware register 8, rather than using cached register 8.
	
	Signed-off-by: Russell King <rmk@arm.linux.org.uk>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<colin@colino.net>
	[PATCH] therm_adt746x: gradually change fan speed and start both fans on Albooks
	
	Here's the patch that supercedes the one I asked you to drop.  It changes
	the fan speed logic so that the fans will go incrementally fast instead of
	using just two steps.  Also, it starts and stops both fans instead of just
	one on Powerbooks 15" and 17" (functionality asked by most of the Albooks
	users on Debian's ML, and justified by the fact that fan 1 and fan 2 do not
	correspond to CPU and GPU, as we previously thought).
	
	Signed-off-by: Colin Leroy <colin@colino.net>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<matthew@wil.cx>
	[PATCH] parisc: use fixups for exception support
	
	Revamp exceptions support to use fixup sections
	
	Committed-by: Randolph Chung <tausq@parisc-linux.org>

<matthew@wil.cx>
	[PATCH] parisc: export global fixup routines
	
	export global fixup routines
	
	Committed-by: Randolph Chung <tausq@parisc-linux.org>

<matthew@wil.cx>
	[PATCH] parisc: Add memory clobber to userspace syscall wrapper
	
	Add memory clobber to userspace syscall wrapper provided by kernel,
	this matches glibc definition.
	
	Committed-by: Carlos O'Donell <carlos@parisc-linux.org>

<matthew@wil.cx>
	[PATCH] parisc: Fix LBA/SBA bugs
	
	 - Fix Astro/Elroy LMMIO space reporting in /proc/iomem.
	 - Output in /proc/iomem include PCI bus number and "Extra LMMIO" range.
	 - LBA now reports proper addresses routed down from SBA.
	 - add mercury_cfg_ops. This fixes the tg3 init delay problem.
	   PDC took ~20ms per PCI cfg write. tg3 performs ~1600 writes (~30 seconds
	   per NIC) during init. Alternative is the relocate PDC to host ram.
	   But that would burn ~4MB of RAM. This is cheaper.
	 - add PCI_F_EXTEND to asm/pci.h - replaces private definitions
	
	Committed-by: Grant Grundler <grundler@parisc-linux.org>

<matthew@wil.cx>
	[PATCH] parisc: fix CONFIG_DISCONTIGMEM support
	
	fix CONFIG_DISCONTIGMEM support
	
	Committed-by: Randolph Chung <tausq@parisc-linux.org>

<matthew@wil.cx>
	[PATCH] parisc: new memcpy routines
	
	 - new memcpy routine, replaces memcpy, bcopy, copy_{from,to,in}_user
	   implementations
	 - workaround gcc-3.0 limitations for asm()
	 - Pip and Rufus pointed out the flaw in the current misaligned memcopy
	   routines.  Randolph now owes lots of Milk bones.
	 - updates to work with testsuite
	 - sparse annotations
	 - Improve copy performance for small and unaligned copies
	 - Enable merge optimization for non-PA20 builds too
	
	Committed-by: Randolph Chung <tausq@parisc-linux.org>
	Committed-by: James Bottomley <jejb@parisc-linux.org>

<matthew@wil.cx>
	[PATCH] parisc: register cpus with sysfs
	
	register cpus with sysfs
	
	Committed-by: Randolph Chung <tausq@parisc-linux.org>

<matthew@wil.cx>
	[PATCH] parisc: dump the stack on a BUG()
	
	dump the stack on a BUG()
	
	Committed-by: Randolph Chung <tausq@parisc-linux.org>

<matthew@wil.cx>
	[PATCH] parisc: Stop exporting the old memcpy symbols
	
	Stop exporting the old memcpy symbols
	
	Committed-by: Randolph Chung <tausq@parisc-linux.org>

<matthew@wil.cx>
	[PATCH] parisc: remove lcopy_*_user
	
	remove the now unused lcopy_*_user routines
	
	Committed-by: Randolph Chung <tausq@parisc-linux.org>

<matthew@wil.cx>
	[PATCH] parisc: fix PTRACE_GETEVENTMSG
	
	PTRACE_GETEVENTMSG was not 64-bit clean, fix it
	
	Committed-by: Randolph Chung <tausq@parisc-linux.org>

<matthew@wil.cx>
	[PATCH] parisc: new syscalls
	
	Add new syscalls:
	tkill, waitid, fadvise64_64, set_tid_address, tgkill, mbind,
	[sg]et_mempolicy, {,l,f}{set,get,list,remove}xattr,
	timer_{create,settime,gettime,getoverrun,delete},
	clock_{settime,gettime,getres,nanosleep}
	
	Committed-by: Matthew Wilcox <willy@parisc-linux.org>

<matthew@wil.cx>
	[PATCH] parisc: fix security hole
	
	The default interruption handler "handle_interruption" does not properly
	check to see if the faulting space is the same as the users space.
	The problem lies in the fact that if a fault happens on the gateway we
	will not deliver signals to the process, the process will not die, and we
	may continue handling the same fault in a loop forever.  Any malicious
	user code can crash the kernel by jumping into the gateway page at an
	inopportune address.
	
	The solution is to check if the user has the right privilege and if the
	spaces match, both faulting and currently active. The best action is to
	force the process back to it's own space of execution at address zero, and
	let it take a SIGSEGV. The process can never recover from this because it
	happens immediately after the return from the interrupt via rfi or rfir.
	
	Committed-by: Carlos O'Donell <carlos@parisc-linux.org>

<matthew@wil.cx>
	[PATCH] parisc: superio cleanup
	
	Superio cleanup
	
	Committed-by: Grant Grundler <grundler@parisc-linux.org>

<matthew@wil.cx>
	[PATCH] parisc: checksum improvements
	
	Small tweaks to the checksumming routines
	Fix a corner case in csum_partial
	
	Committed-by: Randolph Chung <tausq@parisc-linux.org>

<benh@kernel.crashing.org>
	[PATCH] fbdev: workaround for broken X servers
	
	XFree (and X.org) has both always been broken in their conversion of the DPMS
	blanking mode when passing to the kernel ioctl FBIOBLANK (in fbdev mode).
	
	This patch makes sure that at least the value passed by userland stays in the
	legal range, which has the side effect that an X DPMS POWERDOWN request will
	result as an fbdev VESA_POWERDOWN request at the fbdev level now, instead of
	an out-of-range value.
	
	Signed-off-by: Benjamin Herrenschmidt <benh@kernel.crashing.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<benh@kernel.crashing.org>
	[PATCH] atyfb: Fix power management
	
	The new atyfb has the return value for the Power Management routine
	wrong. This prevents sleep from working on PowerBooks with mach64
	video chips. This fixes it.
	
	Signed-off-by: Benjamin Herrenschmidt <benh@kernel.crashing.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<aia21@cantab.net>
	NTFS: Modify fs/ntfs/aops.c::mark_ntfs_record_dirty() so it allocates
	      buffers for the page if they are not present and then marks the
	      buffers belonging to the ntfs record dirty.  This causes the buffers
	      to become busy and hence they are safe from removal until the page
	      has been written out.
	
	Signed-off-by: Anton Altaparmakov <aia21@cantab.net>

<axboe@suse.de>
	[PATCH] fix SCSI bounce limit
	
	Just had a case with a gdth adapter not working in a 16GB box. Seems to
	me that the SCSI bounce decision is completely screwy - it returns the
	device dma mask, if it is set only and the box doesn't have an iommu. So
	if we can't get the mask, we allow any io. Not so good. I think the
	logic should be more as follows:
	
		if (isa)
			return bounce_above_isa;
		if (has_iommu)
			return bounce_nothing;
	
		if (we_know_device_dma_mask)
			return mask;
		else
			return default_to_32bit;
	
	Patch corrects scsi_calculate_bounce_limit() to actually work partly
	sanely.
	
	Signed-off-by: Jens Axboe <axboe@suse.de>
	Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

<yoshfuji@linux-ipv6.org>
	[IPV6]: Do not purge default routes by RA.
	
	Signed-off-by: Hideaki YOSHIFUJI <yoshfuji@linux-ipv6.org>
	Signed-off-by: David S. Miller <davem@davemloft.net>

<herbert@gondor.apana.org.au>
	[TCP]: Modular ipv6 support in tcpdiag
	
	This patch allows tcpdiag to support ipv6 work as a module when itself
	is also a module.
	
	I was planning for a more extensible method but now I think the effort
	would be better directed at a new generic socket netlink interface than
	the TCP-specific tcpdiag.
	
	Signed-off-by: Herbert Xu <herbert@gondor.apana.org.au>
	Signed-off-by: David S. Miller <davem@davemloft.net>

<tommy.christensen@tpack.net>
	[NET]: Move local_bh_enable back in dev_queue_xmit
	
	Based upon a patch from Herbert Xu:
	
	> Hi Ingo:
	> 
	> Your recent fix to dev_queue_xmit moved the local_bh_disable to
	> include stuff like skb_linearize and skb_checksum_help.  These
	> are potentially expensive operations.  Since they don't need to
	> run with preempt off, we could simply move the local_bh_enable
	> up instead.
	
	No, this breaks the normal return path.
	
	How about this instead?
	
	Signed-off-by: Tommy S. Christensen <tommy.christensen@tpack.net>
	Signed-off-by: David S. Miller <davem@davemloft.net>

<sam@mars.ravnborg.org>
	kbuild: Prefer Kbuild as name of the kbuild files
	
	The kbuild syntax is unique and does only have very few things in common with
	usual Makefile syntax. So to avoid confusion make the filename 'Kbuild' be
	the preferred name as replacement for 'Makefile'.
	No global renaming planned to take place for now, but new stuff expected to use
	the new 'Kbuild' filename.
	
	Signed-off-by: Sam Ravnborg <sam@ravnborg.org>

<sam@mars.ravnborg.org>
	kconfig: drop usage of shared libraries
	
	Drop usage of shared libraries.
	It breaks on several non-i386 build environemnts - especially the ones popular for embedded development.
	This is a minimal version.
	Based on idea from Bertrand Marquis and patch from Dan Kegel.
	
	Signed-off-by: Sam Ravnborg <sam@ravnborg.org>

<sam@mars.ravnborg.org>
	ppc: fix building arch/ppc/boot/lib/ with make O=
	
	arch/ppc/boot/lib/ reuses zlib_inflate from lib/zlib_inflate but kbuild
	does not support two different places utilising the same .o file. It results
	in recompile for each build because options to compiler changes etc.
	So the trick used here is to make a copy of the required .c files.
	
	Acked-by: Tom Rini <trini@kernel.crashing.org>
	Signed-off-by: Sam Ravnborg <sam@ravnborg.org>

<adobriyan@mail.ru>
	kernel-doc: support for comma-separated members in structs and unions
	
	Fix the following warnings
	
	$ make sgmldocs
	...
	Warning(include/linux/skbuff.h:283): No description found for parameter 'len,data_len,mac_len,csum'
	Warning(include/linux/skbuff.h:283): No description found for parameter 'local_df,cloned,pkt_type,ip_summed'
	Warning(include/linux/skbuff.h:283): No description found for parameter 'protocol,security'
	...
	Warning(include/linux/skbuff.h:283): No description found for
	parameter 'head,*data,*tail,*end'
	...
	
	by adding support for comma-separated members in structs and unions.
	
	Signed-off-by: Alexey Dobriyan <adobriyan@mail.ru>
	Signed-off-by: Sam Ravnborg <sam@ravnborg.org>

<adobriyan@mail.ru>
	kernel-doc: print arrays in declarations correctly
	
	Do not convert arrays into pointers while generating documentation for them.
	
	I.e, print
	
	struct sk_buff {
		char cb[40];
	};
	
	as "char cb[40]", not "char * cb".
	
	Signed-off-by: Alexey Dobriyan <adobriyan@mail.ru>
	Signed-off-by: Sam Ravnborg <sam@ravnborg.org>

<adobriyan@mail.ru>
	kernel-doc: don't print ... twice in variadic functions
	
	Signed-off-by: Alexey Dobriyan <adobriyan@mail.ru>
	Signed-off-by: Sam Ravnborg <sam@ravnborg.org>

<azarah@nosferatu.za.org>
	kbuild: check timestamps on files for initramfs
	
	  Add a comment to gen_initramfs_list.sh output that contains the
	  numeric mtime of the last modified file in the source directory,
	  or the mtime of the source list.  This should cause the initramfs
	  image to be rebuild if a file in the source directory changed, or
	  the source list (if that was used rather than a directory as source).
	
	
	Signed-off-by: Martin Schlemmer <azarah@nosferatu.za.org>
	Signed-off-by: Sam Ravnborg <sam@ravnborg.org>

<tony.luck@intel.com>
	[IA64] implement pcibios_resource_to_bus and pcibios_bus_to_resource
	
	Patch from Matthew Wilcox:
	  Since some ia64 platforms have non-identity-mapped PCI busses, we need
	  to implement pcibios_resource_to_bus and pcibios_bus_to_resource.
	  Also clean up some >80 column comments and delete an unnecessary parameter
	  to pcibios_fixup_device_resources().
	
	Signed-off-by: Tony Luck <tony.luck@intel.com>

<tony.luck@intel.com>
	[IA64-SGI] Do not disable interrupts in ia64_sn_plat_specific_err_print
	
	ia64_sn_plat_specific_err_print() ends up calling vfree() which
	requires IPI which can deadlock if interrupts are disabled.  Do not
	disable interrupts in ia64_sn_plat_specific_err_print().
	 
	Signed-off-by: Keith Owens <kaos@sgi.com>
	Signed-off-by: Tony Luck <tony.luck@intel.com>

<maneesh@in.ibm.com>
	[PATCH] sysfs: fix sysfs backing store error path confusion
	
	o sysfs_new_dirent to retrun 0 if kmalloc fails. Thanks to Milton Miller
	  for spotting this.
	
	Signed-off-by: Maneesh Soni <maneesh@in.ibm.com>
	Signed-off-by: Greg Kroah-Hartman <greg@kroah.com>

<bunk@stusta.de>
	[PATCH] small sysfs cleanups
	
	The patch below does the following cleanups for the sysfs code:
	- remove the unused global function sysfs_mknod
	- make some structs and functions static
	
	Please check whether this patch is correct, or whether some of the
	things I made static should be used globally in the forseeable future.
	
	
	Signed-off-by: Adrian Bunk <bunk@stusta.de>
	Signed-off-by: Greg Kroah-Hartman <greg@kroah.com>

<tgraf@suug.ch>
	[PKT_SCHED]: tcf_action: copy generic stats via TCA_ACT_STATS
	
	Dumps the statistic common to all action modules via the newly
	introduced TLV type TCA_ACT_STATS in tcf_action_copy_stats but
	allows the corresponding module to dump its own statistic by
	implementing the get_stats callback.
	
	Signed-off-by: Thomas Graf <tgraf@suug.ch>
	Signed-off-by: David S. Miller <davem@davemloft.net>

<tgraf@suug.ch>
	[PKT_SCHED]: gact: use gnet_stats for action stats
	
	Signed-off-by: Thomas Graf <tgraf@suug.ch>
	Signed-off-by: David S. Miller <davem@davemloft.net>

<tgraf@suug.ch>
	[PKT_SCHED]: ipt: use gnet_stats for action stats
	
	Signed-off-by: Thomas Graf <tgraf@suug.ch>
	Signed-off-by: David S. Miller <davem@davemloft.net>

<tgraf@suug.ch>
	[PKT_SCHED]: mirred: use gnet_stats for action stats
	
	Signed-off-by: Thomas Graf <tgraf@suug.ch>
	Signed-off-by: David S. Miller <davem@davemloft.net>

<tgraf@suug.ch>
	[PKT_SCHED]: pedit: use gnet_stats for action stats
	
	Signed-off-by: Thomas Graf <tgraf@suug.ch>
	Signed-off-by: David S. Miller <davem@davemloft.net>

<tgraf@suug.ch>
	[PKT_SCHED]: police: use gnet_stats for action policer stats
	
	Signed-off-by: Thomas Graf <tgraf@suug.ch>
	Signed-off-by: David S. Miller <davem@davemloft.net>

<tgraf@suug.ch>
	[PKT_SCHED]: police: use gnet_stats for old policer stats
	
	Transforms old policer to use generic statistic via TCA_STATS2
	and maintain backward compatibility via TCA_STATS. Adds a new
	API for classifiers to invoke the dumping process.
	
	Signed-off-by: Thomas Graf <tgraf@suug.ch>
	Signed-off-by: David S. Miller <davem@davemloft.net>

<tgraf@suug.ch>
	[PKT_SCHED]: cls_*: use tcf_police_dump_stats to dump via new gnet_stats API
	
	Signed-off-by: Thomas Graf <tgraf@suug.ch>
	Signed-off-by: David S. Miller <davem@davemloft.net>

<greg@kroah.com>
	USB: fix up pl2303 device ids that ended up getting duplicated.
	
	Signed-off-by: Greg Kroah-Hartman <greg@kroah.com>

<davem@nuts.davemloft.net>
	[GNET_STATS]: Export gnet_stats_start_copy_compat to modules.
	
	Signed-off-by: David S. Miller <davem@davemloft.net>

<nigel.croxon@hp.com>
	[IA64-HP] Fix for bits_wanted in sba_iommu.c
	
	bits_wanted is expanded to bytes using the wrong shift value
	(when iovp_shift != PAGE_SHIFT), resulting in an explosion of
	used iommu resources.
	
	This potentially results in mistakenly running out of DMA mapping
	resources when the system is under *heavy* i/o load.
	
	Signed-off-by: Nigel Croxon <nigel.croxon@hp.com>
	Signed-off by: Alex Williamson <alex.williamson@hp.com>
	Signed-off-by: Tony Luck <tony.luck@intel.com>

<stern@rowland.harvard.edu>
	[PATCH] dummy_hcd: minor fixups
	
	Although this is the first patch in a series of six, it's not closely
	related to the others.  This includes a whole bunch of simple cleanups
	for the dummy-hcd driver, all of which fall into the following categories:
	
		Convert explicit container_of() to type-safe inline functions,
	
		Minimize reliance on global variables.
	
	
	Signed-off-by: Alan Stern <stern@rowland.harvard.edu>
	Signed-off-by: Greg Kroah-Hartman <greg@kroah.com>

<stern@rowland.harvard.edu>
	[PATCH] dummy-hcd: Refactor startup and shutdown
	
	This patch reorganizes the startup and shutdown code in the dummy-hcd
	driver to make it consistent with all the other host controller drivers.
	For example, the platform device representing the HC hardware is
	allocated separately and given as an argument to the probe() and remove()
	routines, as it would be for a real device.
	
	This paves the way to making widespread and uniform changes in all the
	HCDs at once.  Please apply.
	
	
	Signed-off-by: Alan Stern <stern@rowland.harvard.edu>
	Signed-off-by: Greg Kroah-Hartman <greg@kroah.com>

<lmendez19@austin.rr.com>
	[PATCH] usb-serial: add interrupt out support and improved debug messages
	
	This patch adds equal support for interrupt out transfers to the usb serial
	core to match the current interrupt in support.  It also improves a few
	debug messages, nothing major.
	
	Signed-off-by: Lonnie Mendez <lmendez19@austin.rr.com>
	Signed-off-by: Greg Kroah-Hartman <greg@kroah.com>

<david-b@pacbell.net>
	[PATCH] USB: fix bug
	
	Delete the second pci_set_master(), not the first one.
	
	
	Signed-off-by: Greg Kroah-Hartman <greg@kroah.com>

<david-b@pacbell.net>
	[PATCH] USB: clean up error messages
	
	Neither requests to suspended devices nor control request stalls should
	ever log fault messages, they happen routinely; this stops such logging.
	There's also a better message for control/bulk timeout -- but after the
	HCD finishes unlinking the URB, not from 'swapper' in the timer callback!
	
	Signed-off-by: David Brownell <dbrownell@users.sourceforge.net>
	Signed-off-by: Greg Kroah-Hartman <greg@kroah.com>

<stern@rowland.harvard.edu>
	[PATCH] usbcore: Make the core release hcd structures
	
	This patch contains changes to usbcore making the core responsible for
	deallocating memory for usb_hcd structures, rather than calling back into
	the host controller drivers.  This solves a long-standing oops, since the
	drivers may have been unloaded from memory by the time the release routine
	is called.  (There probably are some Bugzilla entries caused by this, but
	I don't know which ones.)
	
	To really fix this up properly will require merging the HCD "glue" layer
	into the higher core structures.  As things stand now, a usb_hcd contains
	a usb_bus member, and the usb_bus is associated with a class_device: when
	the class_device is released the usb_hcd gets deallocated.  It's awkward
	in that neither the usb_hcd nor the usb_bus has its own reference count,
	and the class_device is created when the bus is registered (not when it is
	initialized).
	
	Signed-off-by: Alan Stern <stern@rowland.harvard.edu>
	Signed-off-by: Greg Kroah-Hartman <greg@kroah.com>

<stern@rowland.harvard.edu>
	[PATCH] USB PCI drivers: hcd release changes
	
	This patch removes the code for deallocating the usb_hcd structure from
	the three PCI-based host controller drivers.  It also moves the embedded
	struct usb_hcd member to the front of the larger driver-specific
	structures, as required for the core to do its work.  Please apply.
	
	
	Signed-off-by: Alan Stern <stern@rowland.harvard.edu>
	Signed-off-by: Greg Kroah-Hartman <greg@kroah.com>

<stern@rowland.harvard.edu>
	[PATCH] Non-PCI OHCI drivers: remove hcd release
	
	This patch changes the non-PCI-based OHCI-related host controller drivers,
	removing the code that frees the driver-specific hcd structures.
	Unfortunately I am not able to test it, because I don't have the necessary
	hardware.
	
	Signed-off-by: Alan Stern <stern@rowland.harvard.edu>
	Signed-off-by: Greg Kroah-Hartman <greg@kroah.com>

<stern@rowland.harvard.edu>
	[PATCH] dummy-hcd: removal hcd release
	
	This patch removes the hcd release code from the final host controller
	driver, dummy-hcd.  Please apply.
	
	
	Signed-off-by: Alan Stern <stern@rowland.harvard.edu>
	Signed-off-by: Greg Kroah-Hartman <greg@kroah.com>

<stern@rowland.harvard.edu>
	[PATCH] usbcore: add comment to updated hcd.h
	
	On Fri, 29 Oct 2004, David Brownell wrote:
	
	> Could you add a comment there that the HCD is
	> now _required_ to return a pointer that usbcore
	> can pass to kfree?  Since that's a layering
	> violation (in anticipation of later changes to
	> make it not be one!), it's surprising ... and
	> in any case, the memory lifecycle is no longer
	> described just by the calls in this header!
	
	That's a reasonable request, and here's an extra patch to add the comment.
	
	Signed-off-by: Alan Stern <stern@rowland.harvard.edu>
	Signed-off-by: Greg Kroah-Hartman <greg@kroah.com>

<herbert@gondor.apana.org.au>
	[NETLINK]: Hash sockets by pid if not multicast.
	
	Collaborative work between David S. Miller and
	Herbert Xu.
	
	Signed-off-by: Herbert Xu <herbert@gondor.apana.org.au>
	Signed-off-by: David S. Miller <davem@davemloft.net>

<david-b@pacbell.net>
	[PATCH] USB: ohci, remove pre-byteswapped constants
	
	This is the first of several patches from Dale Farnsworth,
	laying groundwork for a patch that supports OHCI on more
	chips (IBM STB04xxx and FreeScale MPC52xx).
	
	
	Replace pre-byteswapped constants for in-memory data structures in ohci.h
	with cpu-native constants, to help support "big-endian OHCI" hardware.
	
	Signed-off-by: Dale Farnsworth <dale@farnsworth.org>
	Signed-off-by: David Brownell <dbrownell@users.sourceforge.net>
	Signed-off-by: Greg Kroah-Hartman <greg@kroah.com>

<david-b@pacbell.net>
	[PATCH] USB: ohci, hooks for big-endian registers
	
	This is the second of the patches from Dale Farnsworth to
	support OHCI implementations that use big-endian byte sex
	for registers ... all register accesses changed, that's why
	it's so large.  (It also includes part of an update from
	his third patch, so that it compiles/runs by itself.)
	
	This patch adds support to the OHCI code for big-endian controllers,
	maintaining the existing little-endian support.  This is done using
	the following transforms:
	
	        ohci_readl(p)   --> ohci_readl(ohci, p)
		writel(v, p)    --> ohci_writel(ohci, v, p)
	
		cpu_to_le16(v)  --> cpu_to_hc16(ohci, v)
		cpu_to_le16p(v) --> cpu_to_hc16p(ohci, v)
		cpu_to_le32(v)  --> cpu_to_hc32(ohci, v)
		cpu_to_le32p(v) --> cpu_to_hc32p(ohci, v)
	
		le16_to_cpu(v) --> hc16_to_cpu(ohci, v)
		le16_to_cpup(v) --> hc16_to_cpup(ohci, v)
		le32_to_cpu(v) --> hc32_to_cpu(ohci, v)
		le32_to_cpup(v) --> hc32_to_cpup(ohci, v)
	
		OHCI_FRAME_NO(ohci->hcca) --> ohci_frame_no(ohci)
	
	There's no runtime penalty except for systems configured to handle
	both byteorders at the same time.
	
	Signed-off-by: Dale Farnsworth <dale@farnsworth.org>
	Signed-off-by: David Brownell <dbrownell@users.sourceforge.net>
	Signed-off-by: Greg Kroah-Hartman <greg@kroah.com>

<david-b@pacbell.net>
	[PATCH] USB: usb gadget drivers, minor tweaks
	
	This has minor patches to the ethernet, file_storage, and zero
	gadget drivers.
	
	 - Use longer "manufacturer" strings; CONFIG_LOCALVERSION would overflow.
	
	 - Remove compile warning on file_storage with non-net2280
	
	 - Oops fix in ethernet gadget, on boards that don't report VBUS
	
	Signed-off-by: David Brownell <dbrownell@users.sourceforge.net>
	Signed-off-by: Greg Kroah-Hartman <greg@kroah.com>

<david-b@pacbell.net>
	[PATCH] USB: usb gadget serial driver v2.0
	
	This patch updates the serial gadget driver:
	
	 - The bulk is Al Borcher's version 2.0 updates:
	
	     * Use the new utilities to build config descriptors from tables.
	
	     * Add CDC ACM support, which brings lots of goodness including
	       interop with Windows.
	
	     * Work better given PXA 25x hardware automagic.
	
	 - I have a few minor tweaks.
	
	     * Match the recent tty API change:  from_user is gone!!
	
	     * Define new product ID for the CDC ACM version, so Windows
	       registry won't get confused by the non-ACM version.
	
	     * Add OTG descriptor
	
	     * Allocates packet buffers more efficiently on platforms like
	       OMAP: use kmalloc not the dma-coherent allocator.
	
	Al has some docs on how to talk to Windows this, including an INF file.
	
	Signed-off-by: David Brownell <dbrownell@users.sourceforge.net>
	Signed-off-by: Greg Kroah-Hartman <greg@kroah.com>

<david-b@pacbell.net>
	[PATCH] USB: ohci-omap, updates for omap1510/5910 and innovator
	
	On OMAP-1510 the 48MHz DPLL used by USB is now set up earlier in
	the boot process.  On Innovator, both host ports work by default.
	(Although USB2 conflicts with ttyS2, which you might prefer.)
	
	Signed-off-by: David Brownell <dbrownell@users.sourceforge.net>
	Signed-off-by: Greg Kroah-Hartman <greg@kroah.com>

<herbert@gondor.apana.org.au>
	[NET]: Neighbour table entries counter needs to be atomic_t
	
	It is updated outside of locks, so...
	
	Signed-off-by: Herbert Xu <herbert@gondor.apana.org.au>
	Signed-off-by: David S. Miller <davem@davemloft.net>

<noodles@earth.li>
	[PATCH] USB: add KC2190 support for usbnet.
	
	The patch below adds support for the KC2190 usb-to-usb networking
	device; the version I have reports itself as:
	
	Bus 001 Device 003: ID 050f:0190 KC Technology, Inc.
	
	I was under the impression that support for this had been added a long
	time ago, but searching through old kernel versions all I could find was
	a comment about the chip, with no support. Patch is against 2.6.9 but is
	pretty minimal.
	
	I don't have a Windows box around to test interoperability with that
	driver, but the patch appears to make it work perfectly between 2 Linux
	boxes.
	
	
	Signed-off-by: Jonathan McDowell <noodles@earth.li>
	Signed-off-by: Greg Kroah-Hartman <greg@kroah.com>

<lmendez19@austin.rr.com>
	[PATCH] cypress_m8: add usb-serial driver 'cypress_m8' to kernel tree
	
	This patch adds the cypress_m8 usb-serial driver for the Delorme Earthmate usb gps and the Cypress hid->com rs232 adapter to the kernel tree.
	
	Signed-off-by: Lonnie Mendez <lmendez19@austin.rr.com>
	Signed-off-by: Greg Kroah-Hartman <greg@kroah.com>

<greg@kroah.com>
	USB: fix sparse warnings in cypress_m8 driver
	
	Signed-off-by: Greg Kroah-Hartman <greg@kroah.com>

<Matt_Domsch@dell.com>
	[NET]: Zero out SIOCGIFHWADDR buffer if dev->addr_len is zero.
	
	This preserves 2.4.x behavior.
	
	Signed-off-by: David S. Miller <davem@davemloft.net>

<Andries.Brouwer@cwi.nl>
	[PATCH] avoid semi-infinite loop when mounting bad ext2
	
	The routine ext2_readdir() will, when reading a directory page
	returns an error, try the next page, without reporting the
	error to user space. That is bad, and the patch below changes that.
	
	In my case the filesystem was damaged, and ext2_readdir wanted
	to read 60000+ pages and wrote as many error messages to syslog
	("attempt to access beyond end"), not what one wants.
	
	[no doubt a similar patch is appropriate for ext3]

<yasuyuki.kozakai@toshiba.co.jp>
	[NETFILTER]: Fix multiple bugs in ipv6header match
	
	This patch fixes following bugs in ip6t_ipv6header.c
	
	- The cast of the pointer to the next IPv6 extension header is wrong.
	- The logical operation is wrong. These fixes intends
	
		- soft mode without invert flag "!"
			match if the packet contains all of the specified headers.
	
		- soft mode with invert flag "!"
			match if the packet DOESN'T contain all of the specified
			headers.
	
		- strict mode without invert flag "!"
			match if the packet contains JUST ONLY the specified headers.
			if the packet doesn't contain some specified headers or
			contains unspecified headers, the packet doesn't match with
			rule.
	
		- strict mode with invert flag "!"
			NOT MATCH if the packet contains JUST ONLY the specified
			headers. Otherwise, match. So, if the packet contains some
			specified headers and DOESN'T contain other specified headers,
			the packet MATCHES with rule.
	
	Signed-off-by: Yasuyuki KOZAKAI <yasuyuki.kozakai@toshiba.co.jp>
	Signed-off-by: Patrick McHardy <kaber@trash.net>

<yasuyuki.kozakai@toshiba.co.jp>
	[NETFILTER]: introduce skb_header_pointer() to ipv6header match
	
	Signed-off-by: Yasuyuki KOZAKAI <yasuyuki.kozakai@toshiba.co.jp>
	Signed-off-by: Patrick McHardy <kaber@trash.net>

<yasuyuki.kozakai@toshiba.co.jp>
	[NETFILTER]: Make eui64 match usuable in FORWARD chain
	
	Signed-off-by: Yasuyuki KOZAKAI <yasuyuki.kozakai@toshiba.co.jp>
	Signed-off-by: Patrick McHardy <kaber@trash.net>

<paulus@samba.org>
	[PATCH] PPC64 mmu_context_init needs to run earlier
	
	Using idr_get_new_above in init_new_context lets us get rid of an
	awkward init function which wasn't running early enough in boot
	anyway.
	
	Signed-off-by: Nathan Lynch <nathanl@austin.ibm.com>
	Signed-off-by: Paul Mackerras <paulus@samba.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<davem@nuts.davemloft.net>
	[TCP]: Fix tcp_diag build with ipv6 completely disabled.
	
	Signed-off-by: David S. Miller <davem@davemloft.net>

<len.brown@intel.com>
	[ACPI] remove obsolete blacklist entries (Andi Kleen)
	http://bugzilla.kernel.org/show_bug.cgi?id=3164
	
	Signed-off-by: Len Brown <len.brown@intel.com>

<aia21@cantab.net>
	NTFS: Fix stupid bug in fs/ntfs/attrib.c::ntfs_external_attr_find() in the
	      error handling code path that resulted in a BUG() due to trying to
	      unmap an extent mft record when the mapping of it had failed and it
	      thus was not mapped.  (Thanks to Ken MacFerrin for the bug report.)
	
	Signed-off-by: Anton Altaparmakov <aia21@cantab.net>

<aia21@cantab.net>
	NTFS: Drop the runlist lock after the vcn has been read in
	      fs/ntfs/lcnalloc.c::__ntfs_cluster_free().
	
	Signed-off-by: Anton Altaparmakov <aia21@cantab.net>

<axboe@suse.de>
	[PATCH] add READ_BUFFER_CAPACITY as read-ok command
	
	Patch is from Daniel Drake <dsd@gentoo.org>
	
	Signed-off-by: Jens Axboe <axboe@suse.de>
	Signed-off-by: Daniel Drake <dsd@gentoo.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<axboe@suse.de>
	[PATCH] queue congestion threshold hysteresis
	
	We need to open the gap between congestion on/off a little bit, or we
	risk burning many cycles continually putting processes on a wait queue
	only to wake them up again immediately. This was observed with CFQ at
	least, which showed way excessive sys time.
	
	Patch is from Arjan.
	
	Signed-off-by: Jens Axboe <axboe@suse.de>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<trini@kernel.crashing.org>
	ppc32: Update MPC8xx code to quasi functional
	
	From: Dan Malek <dan@embeddededge.com>
	Signed-off-by: Robert P. J. Day <rpjday@mindspring.com>
	Signed-off-by: Tom Rini <trini@kernel.crashing.org>

<kay.sievers@vrfy.org>
	[PATCH] add the physical device and the bus to the hotplug environment
	
	Add the sysfs path of the physical device to the hotplug event of class
	and block devices. This should solve the userspace issue not to know if
	the device is a virtual one and the "device" symlink will never be created,
	but we sit there and wait for it to show up not knowing when we should
	give up.
	
	Also the bus name is added to the hotplug event, so we don't need to
	reverse lookup in the /sys/bus/* directory which bus our physical
	device belongs to. This is e.g. the value matched against the BUS= key,
	that may be used in an udev rule.
	
	This is a PCI network card:
	  ACTION=add
	  SUBSYSTEM=net
	  DEVPATH=/class/net/eth0
	  PHYSDEVPATH=/devices/pci0000:00/0000:00:1e.0/0000:02:01.0
	  PHYSDEVBUS=pci
	  INTERFACE=eth0
	  SEQNUM=827
	  PATH=/sbin:/bin:/usr/sbin:/usr/bin
	  HOME=/
	
	This is a IDE CDROM:
	  ACTION=add
	  SUBSYSTEM=block
	  DEVPATH=/block/hdc
	  PHYSDEVPATH=/devices/pci0000:00/0000:00:1f.1/ide1/1.0
	  PHYSDEVBUS=ide
	  SEQNUM=1017
	  PATH=/sbin:/bin:/usr/sbin:/usr/bin
	  HOME=/
	
	This is an USB-stick partition:
	  ACTION=add
	  SUBSYSTEM=block
	  DEVPATH=/block/sda/sda1
	  PHYSDEVPATH=/devices/pci0000:00/0000:00:1d.1/usb3/3-1/3-1:1.0/host1/target1:0:0/1:0:0:0
	  PHYSDEVBUS=scsi
	  SEQNUM=1032
	  PATH=/sbin:/bin:/usr/sbin:/usr/bin
	  HOME=/
	
	
	Signed-off-by: Kay Sievers <kay.sievers@vrfy.org>
	Signed-off-by: Greg Kroah-Hartman <greg@kroah.com>

<tj@home-tj.org>
	[PATCH] driver-model: comment fix in bus.c
	
	 df_01_driver_attach_comment_fix.patch
	
	bus_match() was renamed to driver_probe_device() but the comment for
	device_attach() wasn't updated.  This patch updates it.
	
	
	Signed-off-by: Tejun Heo <tj@home-tj.org>
	Signed-off-by: Greg Kroah-Hartman <greg@kroah.com>

<tj@home-tj.org>
	[PATCH] driver-model: bus_recan_devices() locking fix
	
	 df_02_bus_rescan_devcies_fix.patch
	
	 bus_rescan_devices() eventually calls device_attach() and thus
	requires write locking the corresponding bus.  The original code just
	called bus_for_each_dev() which only read locks the bus.  This patch
	separates __bus_for_each_dev() and __bus_for_each_drv(), which don't
	do locking themselves, out from the original functions and call them
	with read lock in the original functions and with write lock in
	bus_rescan_devices().
	
	
	Signed-off-by: Tejun Heo <tj@home-tj.org>
	Signed-off-by: Greg Kroah-Hartman <greg@kroah.com>

<tj@home-tj.org>
	[PATCH] driver-model: sysfs_release() dangling pointer reference fix
	
	 df_03_sysfs_release_fix.patch
	
	Some attributes are allocated dynamically (e.g. module and device
	parameters) and are usually deallocated when the assoicated kobject is
	released.  So, it's not safe to access attr after putting the kobject.
	
	
	Signed-off-by: Tejun Heo <tj@home-tj.org>
	Signed-off-by: Greg Kroah-Hartman <greg@kroah.com>

<tj@home-tj.org>
	[PATCH] driver-model: kobject_add() error path reference counting fix
	
	 df_04_kobject_add_ref_fix.patch
	
	In kobject_add(), @kobj wasn't put'd properly on error path.  This
	patch fixes it.
	
	
	Signed-off-by: Tejun Heo <tj@home-tj.org>
	Signed-off-by: Greg Kroah-Hartman <greg@kroah.com>

<tj@home-tj.org>
	[PATCH] driver-model: device_add() error path reference counting fix
	
	 df_05_device_add_ref_fix.patch
	
	 In device_add(), @dev wan't put'd properly when it has zero length
	bus_id (error path).  Fixed.
	
	
	Signed-off-by: Tejun Heo <tj@home-tj.org>
	Signed-off-by: Greg Kroah-Hartman <greg@kroah.com>

<torvalds@evo.osdl.org>
	x86: regparm calling convention for exceptions and interrupts.
	
	This clarifies more of the x86 caller/callee stack ownership
	issues by making the exception and interrupt handler assembler
	interfaces use register calling conventions.
	
	System calls still use the stack.
	
	Tested with "crashme" on UP/SMP.

<greg@kroah.com>
	kevent: fix build error if CONFIG_KOBJECT_UEVENT is not selected.
	
	Thanks to Serge Hallyn <serue@us.ibm.com> for pointing this out.
	
	Signed-off-by: Greg Kroah-Hartman <greg@kroah.com>

<rml@novell.com>
	[PATCH] kobject_uevent: fix init ordering
	
	Looks like kobject_uevent_init is executed before netlink_proto_init and
	consequently always fails.  Not cool.
	
	Attached patch switches the initialization over from core_initcall (init
	level 1) to postcore_initcall (init level 2).  Netlink's initialization
	is done in core_initcall, so this should fix the problem.  We should be
	fine waiting until postcore_initcall.
	
	Also a couple white space changes mixed in, because I am anal.
	
	Signed-Off-By: Robert Love <rml@novell.com>
	Signed-off-by: Greg Kroah-Hartman <greg@kroah.com>

<rml@novell.com>
	[PATCH] kobject_uevent: add MAINTAINER entry
	
	Attached patch adds a MAINTAINER entry for the kernel event layer.
	
	
	Signed-Off-By: Robert Love <rml@novell.com>
	Signed-off-by: Greg Kroah-Hartman <greg@kroah.com>

<zaitcev@redhat.com>
	[PATCH] USB: Patch for ub
	
	This is a relatively small changeset, to address small nagging problems.
	Andrew pointed me at the double registration specifically, so I had to do
	something about it. At least now Fabio's box won't collapse if he configures
	UB by mistake. Also, a few people complained that the help text was
	misleading.
	
	I have not done anything about the oops on disconnect which happens to
	Martin Schlemmer. It's next. After that I can get to Peter Jones' CD
	burning patch and doing resets.
	
	- Fix double kobject registration and eventual oops on unplug if a device
	  is not cooperating.
	- Add a reference to usb-storage into the configuration help.
	- Just upping timeouts fixes my ZIP drive.
	- Max out the diag (trace) file size.
	- Set capacity to zero in case the media is absent. It works in 2.4.10-rc1.
	  Either Al fixed the block layer, or the whole thing was a bug in ub.c
	  (and sd.c) and a big misunderstanding.
	
	Signed-off-by: Pete Zaitcev <zaitcev@redhat.com>
	Signed-off-by: Greg Kroah-Hartman <greg@kroah.com>

<tali@admingilde.org>
	[PATCH] fix wrong kfifo_init buffer size argument
	
	kfifo_alloc tries to round up the buffer size to the next power of two.
	
	But it accidently uses the original size when calling kfifo_init,
	which will BUG.
	
	Acked-by: Stelian Pop <stelian@popies.net>
	
	Signed-off-by: Martin Waitz <tali@admingilde.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<len.brown@intel.com>
	[ACPI] enable VIA quirk to fix audio interrupt on VIA_8233_5
	http://bugzilla.kernel.org/show_bug.cgi?id=3175
	
	Signed-off-by: David Shaohua Li <shaohua.li@intel.com>
	Signed-off-by: Len Brown <len.brown@intel.com>

<len.brown@intel.com>
	[ACPI] keep processor driver loaded even if acpi_disabled
	
	for benefit of powernow-k8 driver which depends on it
	but runs even if acpi is disabled.
	
	Signed-off-by: Andi Kleen <ak@suse.de>
	Signed-off-by: Len Brown <len.brown@intel.com>

<torvalds@ppc970.osdl.org>
	Make "unlock_buffer()" use the optimized "smp_mb__after_clear_bit()".
	
	"clear_buffer_locked()" is just a nicer name for a clear-bit, and
	on x86 (and others) we don't need any expensive memory barriers
	after that.

<akpm@osdl.org>
	[PATCH] PG_writeback: fix waitqueue_active memory barrier
	
	The spin_unlock() in rotate_reclaimable_page() is not a sufficient memory
	barrier.
	
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<maneesh@in.ibm.com>
	[PATCH] fix kernel BUG at fs/sysfs/dir.c:20!
	
	On Thu, Nov 04, 2004 at 12:52:38PM -0800, Greg KH wrote:
	> Hi,
	>
	> I get the following BUG in the sysfs code when I do:
	> 	- plug in a usb-serial device.
	> 	- open the port with 'cat /dev/ttyUSB0'
	> 	- unplug the device.
	> 	- stop the 'cat' process with control-C
	>
	> This used to work just fine before your big sysfs changes.
	
	There is a similar problem reported by s390 people where we see parent
	kobject (directory) going away before child kobject (sub-directory). It
	seems kobject code is able to handle this, but not the sysfs. What could
	be happening that in sysfs_remove_dir() of parent directory, we try to
	remove its contents. It works well with the regular files as it is the
	final removal for sysfs_dirent corresponding to the files. But in case
	of sub-directory we are doing an extra sysfs_put().  Once while removing
	parent and the other one being the one from when sysfs_remove_dir() is
	called for the child.
	
	The following patch worked for the s390 people, I hope same will work in
	this case also.
	
	
	o Do not remove sysfs_dirents corresponding to the sub-directory in
	  sysfs_remove_dir(). They will be removed in the sysfs_remove_dir() call
	  for the specific sub-directory.
	
	Signed-off-by: Maneesh Soni <maneesh@in.ibm.com>
	Signed-off-by: Greg Kroah-Hartman <greg@kroah.com>

<Andries.Brouwer@cwi.nl>
	[PATCH] don't divide by zero on bad ext2 fs
	
	Experimented a bit more with mounting a bad ext2 filesystem.
	
	An immediate crash was caused by zero EXT2_BLOCKS_PER_GROUP(sb).
	The patch below (relative to 2.6.9) adds a few checks to make sure
	that things we divide by are not zero.

<len.brown@intel.com>
	[ACPI] disable PNPBIOS if ACPI, even without PNPACPI
	
	Signed-off-by: Len Brown <len.brown@intel.com>

<len.brown@intel.com>
	[ACPI] delete duplicated code resulting from auto-merge

<jt@bougret.hpl.hp.com>
	[PATCH] Wireless Extension dropped patchlet
	
		This tiny bit of the last WE-17 patch was lost between me and
	you. I initially decided to wait to resubmit, but Chris Wedgwood
	reported that the MadWifi driver needs it. Sorry for not having pushed
	harder.
		I recreated this patch, and tested with 2.6.10-rc1, and Chris
	tested it with MadWifi. Would you mind pushing that up to Linus ?
	
	Changelog :
		o remove unneeded const
		o spelling + comments
	
	Signed-off-by: Jean Tourrilhes <jt@hpl.hp.com>
	Signed-off-by: Jeff Garzik <jgarzik@pobox.com>

<rmk@flint.arm.linux.org.uk>
	[ARM] sa11x0: use ID of -1 for single devices.

<rmk@flint.arm.linux.org.uk>
	[ARM] Optimise cache_is_xxx() macros.
	
	Add CONFIG_CPU_CACHE_VIVT and CONFIG_CPU_CACHE_VIPT and use
	these to conditionalise cache_is_xxx().  This allows unnecessary
	cache handling code to be removed by the compiler.

<aia21@cantab.net>
	NTFS: Rewrite handling of multi sector transfer errors.  We now do not set
	      PageError() when such errors are detected in the async i/o handler           fs/ntfs/aops.c::ntfs_end_buffer_async_read().  All users of mst           protected attributes now check the magic of each ntfs record as they           use it and act appropriately.  This has the effect of making errors
	      granular per ntfs record rather than per page which solves the case
	      where we cannot access any of the ntfs records in a page when a
	      single one of them had an mst error.  (Thanks to Ken MacFerrin for
	      the bug report.)
	
	Signed-off-by: Anton Altaparmakov <aia21@cantab.net>

<aia21@cantab.net>
	NTFS: Fix error handling in fs/ntfs/quota.c::ntfs_mark_quotas_out_of_date()
	      where we failed to release i_sem on the $Quota/$Q attribute inode.
	
	Signed-off-by: Anton Altaparmakov <aia21@cantab.net>

<aia21@cantab.net>
	NTFS: Fix bug in handling of bad inodes in fs/ntfs/namei.c::ntfs_lookup().
	
	Signed-off-by: Anton Altaparmakov <aia21@cantab.net>

<matthias@net.rmk.(none)>
	[ARM PATCH] 2185/1: Bit definitions for PXA PWER
	
	Patch from Matthias Burghardt
	
	Adds bit definitions for PXA Power Manager Wake-Up Enable Register (PWER) to pxa-regs.h
	
	Signed-off-by: Matthias Burghardt
	Signed-off-by: Nicolas Pitre
	Signed-off-by: Russell King

<matthias@net.rmk.(none)>
	[ARM PATCH] 2191/1: bugfix for PXA SSP
	
	Patch from Matthias Burghardt
	
	In ssp_init dev->port is not yet initialized. Thus it cannot be used as an argument for request_mem_region. This patch fixes that.

<ben-linux@org.rmk.(none)>
	[ARM PATCH] 2193/1: S3C2410 - fix wake mask for IRQEINT[0..3], and IRQ_RTC
	
	Patch from Ben Dooks
	
	Fix incorrect bit masking of the wake maskes for 
	IRQs EINT0 through EINT3 and IRQ_RTC
	
	Signed-off-by: Ben Dooks 
	Signed-off-by: Russell King

<aia21@cantab.net>
	NTFS: Minor cleanup of fs/ntfs/debug.c.
	
	Signed-off-by: Anton Altaparmakov <aia21@cantab.net>

<ben-linux@org.rmk.(none)>
	[ARM PATCH] 2199/1: S3C2410 - fix warning in include/asm-arm/arch-s3c2410/dma.h
	
	Patch from Ben Dooks
	
	Make addr_reg an `void __iomem *` instead of an unsigned long.
	
	Signed-off-by: Ben Dooks 
	Signed-off-by: Russell King

<nico@org.rmk.(none)>
	[ARM PATCH] 2203/1: trivial asm optimization for csum code
	
	Patch from Nicolas Pitre
	
	Signed-off-by: Nicolas Pitre 
	Signed-off-by: Russell King

<peterc@au.rmk.(none)>
	[ARM PATCH] 2205/1: Fix compilation for IXDP425: typo in mach-ixp4xx/common.c
	
	Patch from Peter Chubb
	
	Fix a simple typo.

<jelenz@edu.rmk.(none)>
	[ARM PATCH] 2206/1: convert locomo to use platform_get_resource\platform_get_irq
	
	Patch from John Lenz
	
	Similar to sa1111.c, convert the locomo_probe function to use
	the platform_get_resource\platform_get_irq instead of accessing
	the pdev->resources array directly.

<ben-linux@org.rmk.(none)>
	[ARM PATCH] 2208/1: S3C2410 - pm updates and fixes
	
	Patch from Ben Dooks
	
	This fixes the following with s3c24xx power management:
	
	- debugging needs UARTs enabled, to re-enabled UART clocks,
	  save their state over suspend, and add this to the current
	  documentation
	
	- update the documentation on pm initialisation
	
	- fix bug reported by Dimitry Andric where __raw_writel()
	  has arguments the wrong way around
	
	- fix typo (lower-case letter in S3C2410_GATSTUs2_OFFRESET)
	  from Dimitry Andric
	
	- apply Arnaud Patard's patch for pm call types
	
	- move bits of resume code to use printk(KERN_DEBUG) as they
	  are potentially before the UART resume, and are not critical
	  if the system fails to re-start.
	
	Signed-off-by: Ben Dooks 
	Signed-off-by: Russell King

<nico@org.rmk.(none)>
	[ARM PATCH] 2192/1: small optimization to {read|write}sl routines
	
	Patch from Nicolas Pitre
	
	Fold two tests in one.
	
	Signed-off-by: Nicolas Pitre 
	Signed-off-by: Russell King

<rmk@flint.arm.linux.org.uk>
	[ARM] Fix double compare with zero instructions.
	
	Accessing register index -1 causes vfp_get_double() to enter an
	infinite loop.  Use VFP_REG_ZERO (value 16) and provide code to
	emulate a sixteenth register which always returns 0.0

<catalin.marinas@com.rmk.(none)>
	[ARM] Versatile: patch-2.6.9-icst307
	
	Patch from Catalin Marinas
	
	Add ICS307 clock support

<catalin.marinas@com.rmk.(none)>
	[ARM] Versatile: patch-2.6.9-common
	
	Patch from Catalin Marinas
	
	Common changes for Versatile PB and AB

<torvalds@ppc970.osdl.org>
	usb: don't "unsuspend" ports that aren't suspended
	
	It apparently really confuses some things (Apple keyboard
	internal hub for one, but possibly others).

<torvalds@ppc970.osdl.org>
	Fix USB debugging build.
	
	Too much cut-and-paste, hidden by the fact that without debugging,
	"dev_dbg()" doesn't even look at its arguments.

<catalin.marinas@com.rmk.(none)>
	[ARM] Versatile: patch-2.6.9-ab / patch-2.6.9-pb
	
	Patch from Catalin Marinas
	
	Versatile/AB code after splitting core.c
	Versatile/PB code after splitting core.c

<tony.luck@intel.com>
	[IA64] Allocate syscall #1270 for waitid syscall.
	
	Signed-off-by: Tony Luck <tony.luck@intel.com>

<rmk@flint.arm.linux.org.uk>
	[ARM] Versatile: Remove CONFIG_MMC ifdef blocks
	
	These are no longer necessary since MMC support is now merged.

<ben-linux@org.rmk.(none)>
	[ARM PATCH] 2210/1: S3C2410 - export symbols from arch/arm/mach-s3c2410/gpio.c
	
	Patch from Ben Dooks
	
	Added missing exports of the functions in gpio.c
	
	Thanks to Dimitry Andric for pointing this out
	
	Signed-off-by: Ben Dooks 
	Signed-off-by: Russell King

<ben-linux@org.rmk.(none)>
	[ARM PATCH] 2211/1: S3C2410 - fix idcode of S3C2410A
	
	Patch from Ben Dooks
	
	Fix IDCODE for S3C2410A to add missing zero in hex number
	
	Thanks to Russell King for pointing this out
	
	Signed-off-by: Ben Dooks 
	Signed-off-by: Russell King

<bzolnier@trik.(none)>
	[ide] shrink hw_regs_t
	
	sata_[misc,scr] and priv are write-only
	
	Signed-off-by: Bartlomiej Zolnierkiewicz <bzolnier@gmail.com>

<ben-linux@org.rmk.(none)>
	[ARM PATCH] 2209/1: OMAP - only offer OMAP systems if CONFIG_ARCH_OMAP
	
	Patch from Ben Dooks
	
	Ensure that TI OMAP systems are only offered if
	the system is configured for TI OMAP.
	
	Signed-off-by: Ben Dooks 
	Signed-off-by: Russell King

<bzolnier@trik.(none)>
	[ide] ns87415: PA-RISC update
	
	From: Grant Grundler <grundler@parisc-linux.org>
	(minor changes by me - bart)
	
	Move Superio (NatSem 87560) IDE hacks into the ns87415 driver
	instead of exporting IDE data structures.
	
	To date, only PA-RISC port is known to use the 87560 chip.
	
	Signed-off-by: Bartlomiej Zolnierkiewicz <bzolnier@gmail.com>

<bzolnier@trik.(none)>
	[ide] ns87415: small cleanup
	
	ide_hwif_setup_dma() calls pci_set_master() if necessary.
	pci_set_master() (indirectly via pcibios_set_master()) sets
	PCI_LATENCY_TIMER to a "reasonable" value.
	
	Signed-off-by: Grant Grundler <grundler@parisc-linux.org>
	Signed-off-by: Bartlomiej Zolnierkiewicz <bzolnier@gmail.com>

<tony@com.rmk.(none)>
	[ARM PATCH] 2194/1: Change OMAP serial port init to use autodetection
	
	Patch from Tony Lindgren
	
	This patch changes OMAP serial ports to use the standard 8250
	autodetection.
	
	Signed-off-by: Tony Lindgren 
	Signed-off-by: Russell King

<tony@com.rmk.(none)>
	[ARM PATCH] 2195/1: Updates to OMAP clock framework
	
	Patch from Tony Lindgren
	
	This patch by Tuukka Tikkanen updates the OMAP clock framework.
	It also contains a patch by Juha Yrjl to enable 216MHz rate
	on 16xx.
	
	Signed-off-by: Tony Lindgren 
	Signed-off-by: Russell King

<bzolnier@trik.(none)>
	[ide] remove some cruft from ide.h
	
	From: Chris Wedgwood <cw@f00f.org>
	(minor changes by me - bart)
	
	Remove some accumulated (unused) cruft from ide.h
	
	Signed-off-by: Bartlomiej Zolnierkiewicz <bzolnier@gmail.com>

<bzolnier@trik.(none)>
	[ide] (partially) unify hdreg.h & ata.h
	
	Signed-off-by: Chris Wedgwood <cw@f00f.org>
	Signed-off-by: Bartlomiej Zolnierkiewicz <bzolnier@gmail.com>

<bzolnier@trik.(none)>
	[ide] remove debugging delay from CS5520 driver
	
	From: Alan Cox <alan@lxorguk.ukuu.org.uk>
	
	Signed-off-by: Bartlomiej Zolnierkiewicz <bzolnier@gmail.com>

<johnpol@2ka.mipt.ru>
	[PATCH] w1/w1_family: replace schedule_timeout() with msleep_interruptible()
	
	Description: Use msleep_interruptible() instead of schedule_timeout() to
	guarantee the task delays as expected.
	
	Signed-off-by: Nishanth Aravamudan <nacc@us.ibm.com>
	Signed-off-by: Evgeniy Polyakov <johnpol@2ka.mipt.ru>
	Signed-off-by: Greg Kroah-Hartman <greg@kroah.com>

<johnpol@2ka.mipt.ru>
	[PATCH] w1/w1: replace schedule_timeout() with msleep_interruptible()
	
	Description: Use msleep_interruptible() instead of schedule_timeout() to
	guarantee the task delays as expected.
	
	Signed-off-by: Nishanth Aravamudan <nacc@us.ibm.com>
	Signed-off-by: Evgeniy Polyakov <johnpol@2ka.mipt.ru>
	Signed-off-by: Greg Kroah-Hartman <greg@kroah.com>

<johnpol@2ka.mipt.ru>
	[PATCH] w1/dscore: replace schedule_timeout() with msleep_interruptible()
	
	Description: Uses msleep_interruptible() instead of schedule_timeout()
	to guarantee the task delays as expected.
	
	Signed-off-by: Nishanth Aravamudan <nacc@us.ibm.com>
	Signed-off-by: Evgeniy Polyakov <johnpol@2ka.mipt.ru>
	Signed-off-by: Greg Kroah-Hartman <greg@kroah.com>

<johnpol@2ka.mipt.ru>
	[PATCH] w1/w1_int: replace schedule_timeout() with msleep_interruptible()
	
	Description: Use msleep_interruptible() instead of schedule_timeout() to
	guarantee the task delays as expected.
	
	Signed-off-by: Nishanth Aravamudan <nacc@us.ibm.com>
	Signed-off-by: Evgeniy Polyakov <johnpol@2ka.mipt.ru>
	Signed-off-by: Greg Kroah-Hartman <greg@kroah.com>

<torvalds@ppc970.osdl.org>
	usb: remove totally bogus OHCI iomem casts
	
	The __iomem attribute was correctly set, and trying to
	remove it just causes more problems.

<jthiessen@penguincomputing.com>
	[PATCH] I2C: lm85.c driver update
	
	Signed off by: Justin Thiessen <jthiessen@penguincomputing.com
	Signed-off-by: Greg Kroah-Hartman <greg@kroah.com>

<arjan@infradead.org>
	[PATCH] I2C: remove dead code from i2c
	
	i2c-core.c has a few never used functions, patch below removes these dead
	functions.
	
	Signed-off-by: Arjan van de Ven <arjan@infradead.org>
	Signed-off-by: Greg Kroah-Hartman <greg@kroah.com>

<khali@linux-fr.org>
	[PATCH] I2C: New LM63 chip driver
	
	This is a new I2C chip driver named lm63, which supports National
	Semiconductor's LM63 hardware monitoring chip. The LM63 is similar to
	the LM86 (which we do support through our lm90 driver) with additional
	monitoring and control of a single fan. It is obviously aimed at the CPU
	and high-end graphics adapters markets. This new driver is very similar
	in nature to the lm83 and lm90 driver so I don't have much to add.
	
	I developed the driver on a request from Hard Data Ltd. which are using
	Tyan S4882 boards where four LM63 chips are used (one for each CPU).
	Tyan provided remote access to a test system so that I could test my
	driver on real LM63 chips.
	
	
	Signed-off-by: Jean Delvare <khali@linux-fr.org>
	Signed-off-by: Greg Kroah-Hartman <greg@kroah.com>

<bunk@stusta.de>
	[PATCH] i2c it87.c: remove an unused function
	
	The patch below removes an unused function from drivers/i2c/chips/it87.c
	
	
	Signed-off-by: Adrian Bunk <bunk@stusta.de>
	Signed-off-by: Greg Kroah-Hartman <greg@kroah.com>

<khali@linux-fr.org>
	[PATCH] I2C: New PC8736x chip driver
	
	This is my port of the pc87360 driver. It supports the hardware
	monitoring functions of the National Semiconductor PC8736x Super-I/O
	family. The PC87360, PC87363 and PC87364 only do fan monitoring and
	control. The PC87365 and PC87366 additionally have voltage and
	temperature monitoring.
	
	The driver was ported upon request from Wincor-Nixdorf, and tested by
	Rolf Mller there. I wish to thank Rolf for his very efficient
	cooperation.
	
	Please apply,
	thanks.
	
	Signed-off-by: Jean Delvare <khali@linux-fr.org>
	Signed-off-by: Greg Kroah-Hartman <greg@kroah.com>

<greg@kroah.com>
	I2C: fix MODULE_PARAM warning in pc87360.c driver
	
	Signed-off-by: Greg Kroah-Hartman <greg@kroah.com>

<greg@kroah.com>
	W1: fix build warnings due to msleep changes.
	
	Signed-off-by: Greg Kroah-Hartman <greg@kroah.com>

<greg@kroah.com>
	PCI: remove kernel log message about drivers not calling pci_disable_device()
	
	Signed-off-by: Greg Kroah-Hartman <greg@kroah.com>

<len.brown@intel.com>
	[ACPI] Allow limiting idle C-States.
	
	Useful to workaround C3 ipw2100 packet loss,
	reducing noise or boot issues on some models.
	http://bugme.osdl.org/show_bug.cgi?id=3549
	
	For static processor driver, boot cmdline:
	processor.acpi_cstate_limit=2
	
	For processor module, /etc/modprobe.conf:
	options processor acpi_cstate_limit=2
	
	For manual processor module load:
	# modprobe processor acpi_cstate_limit=2
	
	From kernel or kernel module:
	#include <linux/acpi.h>
	acpi_set_cstate_limit(2);
	
	Inspired by patches from Jos Delbar and Andi Kleen
	Signed-off-by: Len Brown <len.brown@intel.com>

<bunk@stusta.de>
	[PATCH] PCI: kill old PCI changelog
	
	There's not much value in shipping a changelog who's last update was
	five years ago.
	
	
	Signed-off-by: Adrian Bunk <bunk@stusta.de>
	Signed-off-by: Greg Kroah-Hartman <greg@kroah.com>

<matthew@wil.cx>
	[PATCH] PCI: add pci_fixup_early
	
	Port Ivan's early PCI fixups patch to 2.6.10-rc1.  Also fix some indentation
	to make it less than 80 columns.
	
	From: Ivan Kokshaysky <ink@jurassic.park.msu.ru>
	Signed-off-by: Greg Kroah-Hartman <greg@kroah.com>

<tglx@linutronix.de>
	[PATCH] Lock initializer unifying Batch 2 (PCI)
	
	To make spinlock/rwlock initialization consistent all over the kernel,
	this patch converts explicit lock-initializers into spin_lock_init() and
	rwlock_init() calls.
	
	Currently, spinlocks and rwlocks are initialized in two different ways:
	
	  lock = SPIN_LOCK_UNLOCKED
	  spin_lock_init(&lock)
	
	  rwlock = RW_LOCK_UNLOCKED
	  rwlock_init(&rwlock)
	
	this patch converts all explicit lock initializations to
	spin_lock_init() or rwlock_init(). (Besides consistency this also helps
	automatic lock validators and debugging code.)
	
	The conversion was done with a script, it was verified manually and it
	was reviewed, compiled and tested as far as possible on x86, ARM, PPC.
	
	There is no runtime overhead or actual code change resulting out of this
	patch, because spin_lock_init() and rwlock_init() are macros and are
	thus equivalent to the explicit initialization method.
	
	That's the second batch of the unifying patches.
	
	Signed-off-by: Thomas Gleixner <tglx@linutronix.de>
	Acked-by: Ingo Molnar <mingo@elte.hu>
	Signed-off-by: Greg Kroah-Hartman <greg@kroah.com>

<akpm@osdl.org>
	bk-kbuild utsname fix
	
	sound/core/info.c:31: sound/utsname.h: No such file or directory
	sound/core/info.c: In function `snd_info_version_read':
	sound/core/info.c:965: parse error before `CONFIG_SND_VERSION'
	sound/core/info.c:962: warning: unused variable `kernel_version'
	
	
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by Sam Ravnborg <sam@ravnborg.org>

<dlsy@snoqualmie.dp.intel.com>
	[PATCH] PCI: ASPM patch for
	
	This is the ASPM patch against 2.6.10-rc1-mm2.
	
	As mentioned in my last email, this patch has a slight difference than
	the one for 2.6.10-rc1,  because the irqbalance quirk was moved from
	drivers/pci/quirks.c in 2.6.10-rc1 to arch/i386/kernel/quirks.c in
	2.6.10-rc1-mm2.
	
	Signed-off-by: Dely Sy <dely.l.sy@intel.com>
	Signed-off-by: Greg Kroah-Hartman <greg@kroah.com>

<jonsmirl@gmail.com>
	[PATCH] PCI: add PCI ROMs to sysfs
	
	Linus has requested that the sysfs rom attribute be changed to require
	enabling before it works. echo "0" to the attribute to disable,
	echoing anything else enables the rom output. The concern is that
	something like a file browser could inadvertently read the attribute
	and change the state of the hardware without the user's knowledge.
	
	The attached patch includes the previous patch plus the enabling logic.
	
	[root@smirl 0000:02:02.0]#
	[root@smirl 0000:02:02.0]# cat rom
	cat: rom: Invalid argument
	[root@smirl 0000:02:02.0]# echo "1" >rom
	[root@smirl 0000:02:02.0]# hexdump -C -n 20 rom
	00000000  55 aa 60 e9 d6 01 00 00  00 00 00 00 00 00 00 00  |U.`.............|
	00000010  00 00 00 00                                       |....|
	00000014
	[root@smirl 0000:02:02.0]# echo "0" >rom
	[root@smirl 0000:02:02.0]# hexdump -C -n 20 rom
	hexdump: rom: Invalid argument
	[root@smirl 0000:02:02.0]#
	
	
	
	
	Signed-off-by: Jon Smirl <jonsmirl@gmail.com>
	Signed-off-by: Greg Kroah-Hartman <greg@kroah.com>

<hannal@us.ibm.com>
	[PATCH] cyclades.c: replace pci_find_device
	
	As pci_find_device is going away I've replaced it with pci_get_device.
	If someone with this hardware could test it I would appreciate it.
	
	
	Signed-off-by: Hanna Linder <hannal@us.ibm.com>
	Signed-off-by: Greg Kroah-Hartman <greg@kroah.com>

<blaisorblade_spam@yahoo.it>
	Kbuild: avoid backup localversion files
	
	Avoid including as localversion-files the *~ files, i.e. backup files. If I
	have localversion-a and localversion-a~, I don't want both to be used. Nor I
	want to use localversion*~ anyway.
	
	Don't code that as $(wildcard localversion*[^~]) as that would exclude
	"localversion" from the wildcard expansion result, because it requires at
	least one character after localversion to exist in the name file. I.e.,
	
	Signed-off-by: Paolo 'Blaisorblade' Giarrusso <blaisorblade_spam@yahoo.it>

<adobriyan@mail.ru>
	kernel-doc: Print preprocessor directives correctly.
	
	Print preprocessor directives (usually "#ifdef CONFIG_SOMETHING" and "#endif")
	in structs definitions correctly (-text, -html, sgmldocs, htmldocs, pdfdocs,
	mandocs).
	
	Correctly means:
	 - on the separate line
	 - starting from column 0
	 - not glued to the type of the next member
	 - not breeding if members are separated by comma
	 - not imitating pointers to functions ("#if defined(CONFIG_X)...")
	 - not giving bogus warnings because of this imitation
	
	Signed-off-by: Alexey Dobriyan <adobriyan@mail.ru>
	Signed-off-by: Sam Ravnborg <sam@ravnborg.org>

<bzolnier@trik.(none)>
	[ide] apply undecoded slave fixup only for ide-cs
	
	From: Alan Cox <alan@lxorguk.ukuu.org.uk>
	(some changes by me - bart)
	
	We add probe_hwif_init_with_fixup (seperate naming as requested by
	Bartlomiej). This runs a fixup on present interfaces before attaching
	the drives. In order to be useful we need also an _with_fixup version
	of ide_register_hw function. 
	
	The sometimes troublesome undecoded slave detector is moved to its own
	function and exported so that ide-cs and the upcoming delkin_cb can both
	use it (along with any arch specific cf/pcmcia drivers I don't know
	about). The non-relevant checks for this scenario are removed.
	
	Signed-off-by: Bartlomiej Zolnierkiewicz <bzolnier@gmail.com>

<bzolnier@trik.(none)>
	[ide] siimage: fix the various SI3112 hangs
	
	From: Alan Cox <alan@lxorguk.ukuu.org.uk>
	(some changes by me - bart)
	
	The current driver looks at fields before it is safe to, we move the
	mod15rm bug handler to be a fixup and this ensures the probe has been
	completed before we use the ident data.
	
	Signed-off-by: Bartlomiej Zolnierkiewicz <bzolnier@gmail.com>

<davem@nuts.davemloft.net>
	[SUNGEM]: Use CONFIG_PPC_PMAC throughout.
	
	Fixes some build failures ala bugme bugzilla #3706
	
	Signed-off-by: David S. Miller <davem@davemloft.net>

<tgraf@suug.ch>
	[PKT_SCHED]: Initialize lists of builtin qdiscs.
	
	Signed-off-by: Thomas Graf <tgraf@suug.ch>
	Signed-off-by: David S. Miller <davem@davemloft.net>

<tgraf@suug.ch>
	[PKT_SCHED]: Builtin qdiscs should avoid all qdisc_destroy() processing.
	
	None of the code in __qdisc_destroy should be applied to a builtin qdisc
	or am I missing something?
	
	The patch below prevents builtin qdiscs from being destroyed and
	fixes a refcnt underflow whould lead to a bogus list unlinking
	and dev_put.
	
	Signed-off-by: Thomas Graf <tgraf@suug.ch>
	Signed-off-by: David S. Miller <davem@davemloft.net>

<tgraf@suug.ch>
	[PKT_SCHED]: Remove old estimator code, no longer used.
	
	Signed-off-by: Thomas Graf <tgraf@suug.ch>
	Signed-off-by: David S. Miller <davem@davemloft.net>

<kaber@trash.net>
	[PKT_SCHED]: Fix rcu_assign_pointer fallout, use it in the right place
	
	The patch 'RCU: use rcu_assign_pointer()'
	http://linux.bkbits.net:8080/linux-2.6/diffs/net/sched/sch_api.c@1.39?nav=index.html|src/net/|src/net|src/net/sched|related/net/sched/sch_api.c|cset@1.2287
	changed a list_add_tail to list_add_tail_rcu in qdisc_create. It's
	dev->qdisc not dev->qdisc_list that is protected by RCU, this patch
	reverts that change. It also removes a misleading comment and replaces
	the smp_wmb in qdisc_create_dflt by rcu_assign_pointer in dev_activate
	to document more clearly what is protected.
	
	Signed-off-by: David S. Miller <davem@davemloft.net>

<acme@conectiva.com.br>
	[IPV6]: Fix mca_sfcount[] refcounting in error path.
	
	Signed-off-by: Arnaldo Carvalho de Melo <acme@conectiva.com.br>
	Signed-off-by: David S. Miller <davem@davemloft.net>

<alan@lxorguk.ukuu.org.uk>
	[PATCH] moxa - dead code removal
	
	Moxa is short the final cleanup from the tty changes so has extra wakeup
	calls that can go

<len.brown@intel.com>
	[ACPI] ACPICA 20041105 from Bob Moore
	
	Implemented support for FADT revision 2.  This was an
	interim table (between ACPI 1.0 and ACPI 2.0) that adds
	support for the FADT reset register.
	
	Implemented optional support to allow uninitialized LocalX
	and ArgX variables in a control method.  The variables
	are initialized to an Integer object with a value
	of zero.  This support is enabled by setting the
	acpi_gbl_enable_interpreter_slack flag to TRUE,
	which is default unless booted with "acpi=strict".
	
	Implemented support for Integer objects for the SizeOf
	operator.  Either 4 or 8 is returned, depending on the
	current integer size (32-bit or 64-bit, depending on the
	parent table revision).
	
	Fixed a problem in the implementation of the SizeOf and
	ObjectType operators where the operand was resolved to
	a value too early, causing incorrect return values for
	some objects.
	
	Fixed some possible memory leaks during exceptional conditions.

<kaber@trash.net>
	[PKT_SCHED]: pedit: Convert jiffies values to USER_HZ when dumping
	
	Signed-off-by: Patrick McHardy <kaber@trash.net>
	Signed-off-by: David S. Miller <davem@davemloft.net>

<kaber@trash.net>
	[PKT_SCHED]: mirred: Convert jiffies values to USER_HZ when dumping
	
	Signed-off-by: Patrick McHardy <kaber@trash.net>
	Signed-off-by: David S. Miller <davem@davemloft.net>

<kaber@trash.net>
	[PKT_SCHED]: gact: Convert jiffies values to USER_HZ when dumping
	
	Signed-off-by: Patrick McHardy <kaber@trash.net>
	Signed-off-by: David S. Miller <davem@davemloft.net>

<kaber@trash.net>
	[PKT_SCHED]: ipt: Convert jiffies values to USER_HZ when dumping
	
	Signed-off-by: Patrick McHardy <kaber@trash.net>
	Signed-off-by: David S. Miller <davem@davemloft.net>

<kaber@trash.net>
	[NETFILTER]: Don't use skb_header_pointer in amanda conntrack helper
	
	Fixes broken packets, noticed by Matthias Andree <matthias.andree@gmx.de>
	
	Signed-off-by: Patrick McHardy <kaber@trash.net>
	Signed-off-by: David S. Miller <davem@davemloft.net>

<patrick@tykepenguin.com>
	[DECNET]: Route RCU fix
	
	This patch fixes a missing _bh in the 23 August locking update. 
	Without this any attempt to read from /proc/net/decnet_cache causes a
	'scheduling while atomic' crash.
	
	Signed-off-by: Patrick Caulfield <patrick@tykepenguin.com>
	Signed-off-by: David S. Miller <davem@davemloft.net>

<patrick@tykepenguin.com>
	[DECNET]: Fix return codes
	
	This patch fixes the return codes from sendmsg/recvmsg when a signal happens.
	Instead of always returning ERESTARTSYS (which confuses X11 rather badly) it
	should return EINTR for non-blocking operations.
	
	Signed-off-by: Patrick Caulfield <patrick@tykepenguin.com>
	Signed-off-by: David S. Miller <davem@davemloft.net>

<herbert@gondor.apana.org.au>
	[NET]: Get rid of unused global counter in neighbour
	
	This patch gets rid of an unused global counter in neighbour.c.
	
	Signed-off-by: Herbert Xu <herbert@gondor.apana.org.au>
	Signed-off-by: David S. Miller <davem@davemloft.net>

<kaber@trash.net>
	[PKT_SCHED]: Fix device leaks in mirred action
	
	When a mirred action is created it takes two references to the
	device (dev_get_by_index + dev_hold), but only drops one when
	it gets destroyed. It also leaks a reference when a mirred action
	is replaced.
	
	Signed-off-by: Patrick McHardy <kaber@trash.ne>
	Signed-off-by: David S. Miller <davem@davemloft.net>

<herbert@gondor.apana.org.au>
	[NETLINK]: Fix pid rover code.
	
	I'm not setting the rover pointer at all.  Here's a patch to
	fix that.
	
	Signed-off-by: Herbert Xu <herbert@gondor.apana.org.au>
	Signed-off-by: David S. Miller <davem@davemloft.net>

<james4765@verizon.net>
	[PATCH] hw_random: Remove changelog from hw_random.txt
	
	Remove pre-merge changelog from Documentation/hw_random.txt
	
	Signed-off-by: James Nelson <james4765@gmail.com>
	Signed-off-by: Jeff Garzik <jgarzik@pobox.com>

<miltonm@realtime.net>
	[PATCH] net/Kconfig: undo duplicate patch application
	
	Signed-off-by: Jeff Garzik <jgarzik@pobox.com>

<miltonm@realtime.net>
	[PATCH] hamradio/hdlcdrv: undo duplicat patch application
	
	Signed-off-by: Jeff Garzik <jgarzik@pobox.com>

<mroos@linux.ee>
	[PATCH] ata.h undefined types in USB
	
	This is todays BK on a x86:
	
	  CC [M]  drivers/usb/storage/freecom.o
	In file included from include/linux/hdreg.h:4,
	                 from drivers/usb/storage/freecom.c:32:
	include/linux/ata.h:197: error: parse error before "u32"
	...
	and so on for tens of lines.
	
	Signed-off-by: Jeff Garzik <jgarzik@pobox.com>

<jgarzik@pobox.com>
	Remove silly comment from linux/ata.h.
	
	XFER_xxx is not necessarily "legacy IDE 'stuff'"

<marcel@holtmann.org>
	[Bluetooth] Use usb_kill_urb() for synchronous unlink
	
	The usb_unlink_urb() for synchronous unlink is deprecated and should
	be replaced by usb_kill_urb().
	
	Signed-off-by: Marcel Holtmann <marcel@holtmann.org>

<marcel@holtmann.org>
	[Bluetooth] Add function for triggering a link key change
	
	This patch adds the hci_conn_change_link_key() function that allows
	to trigger a link key change for an existing connection.
	
	Signed-off-by: Marcel Holtmann <marcel@holtmann.org>

<sam@mars.ravnborg.org>
	kconfig: fix xconfig and gconfig
	
	Patch that disabled use of loadable modules broke qconf and gconf.
	Fixed by disabling this also for these targets.
	
	Signed-off-by: Sam Ravnborg <sam@ravnborg.org>

<marcel@holtmann.org>
	[Bluetooth] Support responses with zero SCID
	
	According to the Bluetooth specification there is no need to fill in
	the SCID on a failing response. Without a SCID the L2CAP core can't
	find the corresponding request for it. In the case of the zero SCID
	the signal identifier should be used to match the response to its
	request.
	
	Signed-off-by: Marcel Holtmann <marcel@holtmann.org>

<marcel@holtmann.org>
	[Bluetooth] Make some functions static
	
	This patch makes some needlessly global functions static.
	
	Signed-off-by: Adrian Bunk <bunk@stusta.de>
	Signed-off-by: Marcel Holtmann <marcel@holtmann.org>

<torvalds@ppc970.osdl.org>
	Revert x86-64 flexmap code for now
	
	For some as-yet unclear reason, it seems to break legacy
	32-bit apps on x86-64.
	
	Cset exclude: ak@suse.de[torvalds]|ChangeSet|20041102230307|11901

<torvalds@ppc970.osdl.org>
	Remove stale 0-byte files
	
	They happen with "bk cset -x" - it only undoes the data
	changes, not the metadata updates.

<rmk@flint.arm.linux.org.uk>
	[ARM] Eliminate include/asm-arm/arch-*/serial.h
	
	Convert all platform serial tables to use a serial8250 platform device
	rather than declaring a static table in
	include/asm-arm/arch-*/serial.h.  This change integrates patches from
	Sascha Hauser to update H720x serial support, and Tony Lindgren to
	update OMAP serial support.

<sascha@de.rmk.(none)>
	[ARM] Update h720x for timer changes.
	
	Patch from Sascha Hauser
	
	Update H720x for system timer changes.

<sascha@de.rmk.(none)>
	[ARM PATCH] 1956/2: Re: Motorola i.MX serial driver
	
	Patch from Sascha Hauer
	
	Here is an updated version of the patch:
	
	- updated the patch according to Russell's comments
	- added proper sysrq handling
	- update rx counter
	
	Sascha Hauer

<rmk@flint.arm.linux.org.uk>
	[ARM] Update mach-types.

<linux@rainbow-software.org>
	[PATCH] make cdu31a work on at least one system
	
	I've got a Sony CDU33A drive with COR334 controller.  The Linux cdu31a
	driver was not updated for 2.6 kernel so it does not work.
	
	Here are patches that try to make the driver working with 2.6
	kernel:
	  - fix the timeout values in header file
	  - Make the driver work in 2.6.X
	  - Added workaround to fix hard lockups on eject
	  - Fixed door locking problem after mounting empty drive
	  - Set double-speed drives to double speed by default
	  - Removed all readahead things - not needed anymore
	
	It does work on my system. I also know that it's still broken - it uses 
	cli(), MODULE_PARM and it's also not very fast (I _never_ reached full
	300KB/s with it, but I know that it's possible in Windows) and probably 
	many other things (I'm new to Linux kernel) - so I'm waiting for comments.

<torvalds@ppc970.osdl.org>
	Do EFI partitions only on ia64.
	
	Yes, they might be useful somewhere else too, but the EFI
	discovery code is so fragile that it's not worth the bother.
	
	EFI people informed.

<torvalds@ppc970.osdl.org>
	aio: remove incorrect initialization of "nr_pages"
	
	We should not claim to have filled in the ring_pages[] array
	until we actually _do_ fill it in. It will confuse the code
	that frees the structure if we claim there are pages there
	that don't exist.
	
	Noted by Darrick Wong.

<torvalds@ppc970.osdl.org>
	pc110 touchpad driver: be more polite
	
	The PC110 touchpad driver used to just assume that the hardware
	exists, even though in fact the hw is extremely rare indeed, and
	just requesting all the resources might stomp on some _other_
	hardware.
	
	Try to minimize the damage by realizing that the touchpad hw only
	exists on old ISA-only hardware, and if we have found a PCI device,
	we should not try to load the touchpad driver.
	
	Verified to fix things for Andries Brouwer. 

<elf@com.rmk.(none)>
	[ARM PATCH] 2213/1: lh7a40x serial.h cleanup
	
	Patch from Marc Singer
	
	As requested, this patch removes the
	include/asm-arm/arch-lh7a40x/serial.h header.
	
	

<ben-linux@org.rmk.(none)>
	[ARM PATCH] 2214/1: S3C2410 - add missing RTCCON defs
	
	Patch from Ben Dooks
	
	Add missing RTCCON definitions
	
	Signed-off-by: Ben Dooks 
	
	Signed-off-by: Russell King

<sfrench@smft41.(none)>
	[CIFS] Add cifs serverino mount parm to allow use of inode numbers reported from
	the server (rather than generated by the client).  Some apps require inode
	numbers to persist or inode numbers of hardlinked files to match and 
	this requires trusting the servers inode number.
	
	Signed-off-by: Steve French (sfrench@us.ibm.com)
	
	

<bjorn.helgaas@hp.com>
	[PATCH] fix HPET time_interpolator registration
	
	Fixup after mid-air collision between Christoph adding
	time_interpolator.mask, and me removing a static time_interpolator struct
	from hpet.
	
	Signed-off-by: Bjorn Helgaas <bjorn.helgaas@hp.com>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<wenxiong@us.ibm.com>
	[PATCH] icom makefile fix
	
	The new icom.o isn't in drivers/serial/Makefile.
	
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<wenxiong@us.ibm.com>
	[PATCH] "PORT_ICOM" defination for icom adapter
	
	"PORT_ICOM" is not defined.
	
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<akpm@osdl.org>
	[PATCH] unexport lock_page()
	
	It's static inline.  Weird.
	
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<drizzd@aon.at>
	[PATCH] sparc32: revert sys_setaltroot
	
	Description: revert sys_setaltroot
	
	Signed-off-by: Clemens Buchacher <drizzd@aon.at>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<apw@shadowen.org>
	[PATCH] bootmem use NODE_DATA
	
	Whilst looking at simplifying the implmentation of i386 initialisation code
	I noticed the following.  This change allows these routines to be used in
	both node based and flat memory models which allows more of the init code
	to be common in these models.
	
	Convert the default non-node based bootmem routines to use NODE_DATA(0).
	This is semantically and functionally identical in any non-node
	configuration as NODE_DATA(x) is defined as below.
	
	#define NODE_DATA(nid)          (&contig_page_data)
	
	For the node cases (CONFIG_NUMA and CONFIG_DISCONTIG_MEM) we can use these
	non-node forms where all boot memory is defined on node 0.
	
	Signed-off-by: Andy Whitcroft <apw@shadowen.org>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<vrajesh@umich.edu>
	[PATCH] prio_tree: fix prio_tree_expand corner case
	
	Currently we use prio_tree_root->index_bits to optimize the height of both
	the initial heap-and-radix indexed levels of a prio_tree as well as the
	heap-and-size indexed overflow-sub-trees.  Please see the accompanying
	prio_tree documentation patch for further details.
	
	When index_bits is increased in prio_tree_expand we shuffle the initial
	heap-and-radix indexed levels to make sure that vmas are placed in the tree
	at appropriate places.  Similarly, since the overflow-sub-trees' heights
	also depend on prio_tree_root->index_bits we should shuffle all the
	overflow-sub-trees when index_bits changes.  However, I missed to take care
	of this in my implementation.
	
	Recently Stefan Hornburg (Racke) reported the problem and patiently tested
	the trace patches.  Hugh Dickins produced the trace patches that helped to
	detect the bug.  Moreover, Hugh reduced the crash test case to few lines of
	code.  Thanks to both of them.
	
	The easy fix is to disable prio_tree_expand code completely.  That may lead
	to skewed trees in some common cases.  Hence, this patch takes a different
	approach.
	
	This patch fixes the problem by not optimizing the height of the
	overflow-sub-trees using prio_tree_root->index_bits.  Now all
	overflow-sub-trees use full BITS_PER_LONG bits of size_index to place the
	vmas (that have the same start_vm_pgoff) in an overflow-sub-tree.
	
	This may result in skewed overflow-sub-trees because all bits in vm_pgoff
	above prio_tree_root->index_bits will be 0 (zero).  However, processes
	rarely map many vmas with the same start_vm_pgoff and different
	end_vm_pgoff.  Therefore, such skewed sub-trees should be very rare.
	
	Signed-off-by: Rajesh Venkatasubramanian <vrajesh@umich.edu>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<vrajesh@umich.edu>
	[PATCH] prio_tree: add Documentation/prio_tree.txt
	
	Add prio_tree.c documentation.
	
	Signed-off-by: Rajesh Venkatasubramanian <vrajesh@umich.edu>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<jbarnes@engr.sgi.com>
	[PATCH] fix find_next_best_node()
	
	If NUMA is enabled, find_next_best_node is responsible for helping build
	the zonelist for each pgdat in the system.  However, if one sets
	PENALTY_FOR_NODE_WITH_CPUS to a large value in an attempt to prefer nodes
	w/o CPUs, the local node is erroneously placed after all nodes w/o CPUs in
	the pgdat's zonelist.  This small patch fixes that by just checking if the
	local node is part of the zonelist yet, and if not, returns it first.
	
	Signed-off-by: Jesse Barnes <jbarnes@sgi.com>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<hugh@veritas.com>
	[PATCH] tmpfs: CONFIG_TMPFS=n mount fix
	
	My tmpfs superblock changes in 2.6.9 messed up mount -t tmpfs when
	CONFIG_TMPFS is not enabled: it wrongly claimed to succeed, and left the
	directory unusable, giving "Not a directory" errors thereafter.
	
	Signed-off-by: Hugh Dickins <hugh@veritas.com>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<hch@lst.de>
	[PATCH] more hardirq.h consolidation
	
	PREEMPT_BITS, SOFTIRQ_BITS, PREEMPT_SHIFT, SOFTIRQ_SHIFT and HARDIRQ_SHIFT
	are the same for all architectures (and chaning them in future ports
	doesn't make a lot of sense), so move them to <linux/hardirq.h>.
	
	Make the HARDIRQ_BITS definition guarded by #ifndef HARDIRQ_BITS instead of
	CONFIG_GENERIC_HARDIRQS so we have a saner way to override it once ports
	with lots of irq sources are changed to use the generic hardirq framework.
	
	Ingo, maybe we should change the default for it back to 8 as that's what
	most ports use?
	
	Signed-off-by: Christoph Hellwig <hch@lst.de>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<trini@kernel.crashing.org>
	[PATCH] ppc32: CPM2 bug
	
	Rune has determined that:
	res6 should be 94 bytes long.
	
	However... It does work @ 92 bytes because the compiler alligns the next
	struct (pci_cpm2_t) on a int boundary anyways (no packing specified fo
	the structs)
	
	I tested it with a module that pronted out the address of the PCI struct
	that follows the sit_cpm2_t struct.
	
	Imap = 0xF0000000
	With res6[92]
	im-pci is @  0xf0010430
	
	With res6[94]
	im-pci is @  0xf0010430
	
	So we're saved by the compiler.
	
	Here's the patch
	
	Signed-off-by: Rune Torgersen <runet@innovsys.com>
	Signed-off-by: Tom Rini <trini@kernel.crashing.org>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<trini@kernel.crashing.org>
	[PATCH] ppc32: Add support for Sandpoint X2
	
	Adrian Cox has modified the Sandpoint code to once again work on the older
	X2 version of the board.  The older version has a number of are on the
	older version.
	
	Signed-off-by: Adrian Cox <adrian@humboldt.co.uk>
	Signed-off-by: Tom Rini <trini@kernel.crashing.org>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<benh@kernel.crashing.org>
	[PATCH] Fix pmac_zilog as console
	
	pmac_zilog wasn't properly updating port->timeout, thus broke with serial
	console.  I'm not sure if that timeout thing was added recently or not,
	since the driver used to work fine.  This patch fixes that, and adds some
	proper SYSRQ support.  By default, BREAK is used for sysrq, though some
	Apple zilog's seem to have non-working BREAK detection logic, thus the
	driver has a #define option you can manually enable when debugging to do
	SYSRQ with ctrl-O instead (like pSeries virtual consoles).
	
	Signed-off-by: Benjamin Herrenschmidt <benh@kernel.crashing.org>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<trini@kernel.crashing.org>
	[PATCH] ppc32: Fixup <asm/time.h> includes
	
	include/asm-ppc/time.h has a slightly odd include list which means that
	some files include <asm/time.h> and also hope to get others that they
	really shouldn't be.  This makes <asm/time.h> use <linux/types.h> (time_t)
	and <linux/rtc.h> (struct rtc_time) instead of <linux/mc16818rtc.h>, and
	fixes up the fallout from the change.
	
	Compile-tested on lite5200, walnut and defconfig, along with by-hand'ing
	everything else that included <asm/time.h>.
	
	Signed-off-by: Tom Rini <trini@kernel.crashing.org>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<mporter@kernel.crashing.org>
	[PATCH] ppc32: add PPC440GX L2C error handler
	
	This patch adds an L2-Cache error handler.  In addition, it reenables setup
	of the L2 cache based on erratum L2C0_1 now that we have been reassured
	that there are no more faulty parts being shipped.  If there is a problem,
	the error handler will report it.
	
	Signed-off-by: Eugene Surovegin <ebs@ebshome.net>
	Signed-off-by: Matt Porter <mporter@kernel.crashing.org>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<sfr@canb.auug.org.au>
	[PATCH] ppc64: iSeries iommu cleanups
	
	This patch just does some cleanups of iSeries_iommu.c
		remove lots of unneeded includes
		use list_for_each_entry
		white space
		formatting
	No semantic changes.
	
	Signed-off-by: Stephen Rothwell <sfr@canb.auug.org.au>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<olof@austin.ibm.com>
	[PATCH] ppc64: VIO iommu table property parsing wrong
	
	With current firmware, the ibm,my-dma-window property now contains two
	panes for VSCSI server nodes.  This breaks the current tests in the setup
	code.
	
	There's a bunch of references to pre-GA firmware bugs.  That's a while ago,
	so we can remove the workarounds without breaking anyone.
	
	Signed-off-by: Olof Johansson <olof@austin.ibm.com>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<anton@samba.org>
	[PATCH] ppc64: Add option for oprofile to backtrace through spinlocks
	
	Now that spinlocks are always out of line, oprofile needs to backtrace
	through them.  The following patch adds this but also adds the ability to
	turn it off (via the backtrace_spinlocks option in oprofilefs).
	
	The backout option is included because the backtracing here is best effort.
	 On ppc64 the performance monitor exception is not an NMI, we get them only
	when interrupts are enabled.  This means we can receive a profile hit that
	is inside a spinlock when our PC is somewhere completely
	
	In this patch we check to make sure the PC of the performance monitor
	exception as well as the current PC is inside the spinlock region.  If so
	then we find the callers PC.  If this is not true we play it safe and leave
	the tick inside the lock region.
	
	Also, now that we execute the SLB handler in real mode we have to adjust
	the address range that we consider as valid real mode addresses.  Otherwise
	the SLB miss handler will end up as unknown kernel profile hits.
	
	Signed-off-by: Anton Blanchard <anton@samba.org>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<paulus@samba.org>
	[PATCH] ppc64: iommu fixes, round 3
	
	This patch is from John Rose <johnrose@austin.ibm.com>.
	
	This patch changes the following iommu-related things:
	
	- Renames the [i,p]series versions of iommu_devnode_init(), to keep
	  things logically separate where possible.
	
	- Moves iommu_free_table() to generic iommu.c
	
	- Creates of_cleanup_node(), which will directly precede the dynamic
	  removal of any device node
	
	Signed-off-by: John Rose <johnrose@austin.ibm.com>
	Signed-off-by: Paul Mackerras <paulus@samba.org>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<paulus@samba.org>
	[PATCH] ppc64: iSeries_pci.c use for_each_pci_dev()
	
	This patch is from Hanna Linder.
	
	As pci_find_device is going away using the new for_each_pci_dev macro.  If
	someone with a PPC64 system could test it I would appreciate it.
	
	Signed-off-by: Hanna Linder <hannal@us.ibm.com>
	Signed-off-by: Maximilian Attems <janitor@sternwelten.at>
	Signed-off-by: Paul Mackerras <paulus@samba.org>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<paulus@samba.org>
	[PATCH] ppc64: pmac_pci.c replace pci_find_device with pci_get_device
	
	This patch is from Hanna Linder.
	
	As pci_find_device is going away using the new for_each_pci_dev macro.
	
	Signed-off-by: Hanna Linder <hannal@us.ibm.com>
	Signed-off-by: Maximilian Attems <janitor@sternwelten.at>
	Signed-off-by: Paul Mackerras <paulus@samba.org>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<paulus@samba.org>
	[PATCH] ppc64: pSeries_pci.c use for_each_pci_dev()
	
	This patch is from Hanna Linder.
	
	As pci_find_device is going away using the new for_each_pci_dev macro.
	
	Signed-off-by: Hanna Linder <hannal@us.ibm.com>
	Signed-off-by: Maximilian Attems <janitor@sternwelten.at>
	Signed-off-by: Paul Mackerras <paulus@samba.org>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<paulus@samba.org>
	[PATCH] ppc64: pSeries_iommu.c use for_each_pci_dev
	
	This patch is from Hanna Linder.
	
	As pci_find_device is going away using the new for_each_pci_dev macro.
	
	Signed-off-by: Hanna Linder <hannal@us.ibm.com>
	Signed-off-by: Maximilian Attems <janitor@sternwelten.at>
	Signed-off-by: Paul Mackerras <paulus@samba.org>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<paulus@samba.org>
	[PATCH] ppc64: u3_iommu.c use for_each_pci_dev()
	
	This patch is from Hanna Linder.
	
	As pci_find_device is going away I've replaced it with pci_get_device
	and pci_dev_put.
	
	Signed-off-by: Hanna Linder <hannal@us.ibm.com>
	Signed-off-by: Maximilian Attems <janitor@sternwelten.at>
	Signed-off-by: Paul Mackerras <paulus@samba.org>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<macro@linux-mips.org>
	[PATCH] UP local APIC bootstrap cleanup
	
	Here is a patch to do some cleanup to code affected by the recent change to
	the bootstrap code responsible for enabling the local APIC.  It adds a
	message about how to get the APIC enabled if previously disabled by the
	BIOS to aid people expecting the former behavior.  It removes some
	P4-specific code that's become dead as a result of the change.  Finally it
	improves a couple of inaccurate comments.
	
	This has been agreed to be reasonable.
	
	Signed-off-by: "Maciej W. Rozycki" <macro@linux-mips.org>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<macro@linux-mips.org>
	[PATCH] x86, x86_64: Only handle system NMIs on the BSP
	
	 While discussing races in the NMI handler's trailer fiddling with RTC
	registers, I've discovered we incorrectly attempt to handle NMIs coming
	from the system (memory errors, IOCHK# assertions, etc.) with all
	processors even though the interrupts are only routed to the bootstrap
	processor.  If one of these events coincides with a NMI watchdog tick it
	may even be handled multiple times in parallel.
	
	Here is a fix that makes application processors ignore these events.  They
	no longer access the NMI status bits at I/O port 0x61 which has also the
	advantage of removing the contention on the port when the I/O APIC NMI
	watchdog makes all processors arrive at the handler at the same time.
	
	Signed-off-by: Maciej W. Rozycki <macro@linux-mips.org>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<blaisorblade_spam@yahoo.it>
	[PATCH] ptrace POKEUSR: add comment about the DR7 check.
	
	The DR7 register on i386/x86_64 has a special meaning, so there is a
	special check to do.  Since the code is rather difficult, I added an
	explaination about it.  Also, while studying the i386 Intel Manual, I saw
	that x86_64, even on 32bit emulation, allows using values which are
	disallowed on i386.  It's almost obvious that what it allows is setting a
	8-byte wide data watchpoint (in fact I double checked the AMD manuals, just
	in case, and this is true; I couldn't find a mention of this in my Intel
	manuals).
	
	But since the original ia32 emulation code has this comment:
	
		/* You are not expected to understand this ... I don't neither. */
	
	I am dubious that the code in ptrace32.c is wrong: does x86_64 supports
	8byte-wide watchpoints in 32-bit emulation?  I've checked the AMD manual
	Vol.  2 (no.  24593), which says that to set the length to 8 bits "long
	mode must be enabled".  This means, actually, that the current code is
	safe, notwithstanding the comment (which I removed).
	
	Signed-off-by: Paolo 'Blaisorblade' Giarrusso <blaisorblade_spam@yahoo.it>
	Cc: Roland McGrath <roland@redhat.com>, Andi Kleen <ak@suse.de>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<ak@suse.de>
	[PATCH] x86_64: Add p4 clockmod
	
	Add links for p4-clockmod driver in x86-64 cpufreq.
	
	AK: Made it dependent on EMBEDDED because the driver is only
	useful in some special situations and should be normally not used.
	
	Signed-off-by: "Venkatesh Pallipadi" <venkatesh.pallipadi@intel.com>
	Signed-off-by: Andi Kleen <ak@suse.de>
	Cc: <davej@redhat.com>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<ak@suse.de>
	[PATCH] x86-64: Fix broken NMI change
	
	Fix an obviously broken change someone did to the x86-64 NMI handler.
	reason would get used uninitialized, causing random misbehaviour in the NMI
	handler and gcc rightly complained about it.
	
	Signed-off-by: Andi Kleen <ak@suse.de>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<clameter@sgi.com>
	[PATCH] mmtimer driver update: add SHub interrupt support
	
	- mmtimer: add support for the use of hardware timers on SGI SHubs (sn
	  subarch) via the posix timer interface.
	
	- Allows the scheduling of up to 3 hardware interrupts per node to
	  deliver signals to processes running on those nodes.
	
	- Periodic timers in user space capable of supporting intervals down to
	  10us (<10us supported but will usually result in excessive overruns).
	
	- Scheduling accuracy of 40ns.  (However, typically it takes at least a
	  few usecs for an interrupt to be forwarded to a signal in user space.)
	
	- Add missing SHub information to include/asm-ia64/sn/shub_mmr.h
	
	- Reserve timer interrupt used in include/asm-ia64/sn/intr.h
	
	Signed-off-by: Christoph Lameter <clameter@sgi.com>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<takata@linux-m32r.org>
	[PATCH] m32r: fix arch/m32r/lib/memset.S
	
	This patch fixes arch/m32r/lib/memset.S.
	
	Signed-off-by: Hirokazu Takata <takata@linux-m32r.org>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<takata@linux-m32r.org>
	[PATCH] m32r: fix for use of Mappi PCC
	
	Here is a patch to fix compile errors for an Mappi evaluation board.  -
	Just change from CONFIG_M32RPCC to CONFIG_M32R_PCC.
	
	Thanks to Naoto Sugai for reporting.
	
	Signed-off-by: Hirokazu Takata <takata@linux-m32r.org>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<blaisorblade_spam@yahoo.it>
	[PATCH] uml: fix ptrace() hang on 2.6.9 host due to host changes
	
	From: Gerd Knorr <kraxel@bytesex.org>,
	      Paolo 'Blaisorblade' Giarrusso <blaisorblade_spam@yahoo.it>
	
	Uml was using kill(pid, SIGKILL) instead of ptrace(PTRACE_KILL, pid), which
	used to work, while being probably undocumented.  Due to the changes in
	2.6.9 to the ptrace(2) semantics, with the introduction of TASK_TRACED by
	Roland McGrath, this does not more work, so this patch should fix it.
	
	With help of Gerd Knorr report and analysis, and its early fix of this
	problem.  He fixed the problem by sending SIGCONT to the child processes
	after SIGKILL.  Which IMHO should not be needed (I think this is a
	regression, which he already reported).
	
	I improved his one, by replacing the SIGCONT hack with using PTRACE_KILL
	instead.
	
	Signed-off-by: Paolo 'Blaisorblade' Giarrusso <blaisorblade_spam@yahoo.it>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<blaisorblade_spam@yahoo.it>
	[PATCH] uml - some comments about forcing /bin/bash
	
	Changes a comment about forcing /bin/bash as shell for the UML Makefile.
	
	Signed-off-by: Paolo 'Blaisorblade' Giarrusso <blaisorblade_spam@yahoo.it>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<blaisorblade_spam@yahoo.it>
	[PATCH] uml: add startup check for mmap(...PROT_EXEC...) from /tmp.
	
	This adds a check that /tmp is not mounted noexec.  UML needs to be able to do
	PROT_EXEC mmaps of temp files.  Previously, a noexec /tmp would cause an early
	mysterious UML crash.  (Actually, not /tmp but $TMP, which often is the same).
	
	Signed-off-by: Paolo 'Blaisorblade' Giarrusso <blaisorblade_spam@yahoo.it>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<blaisorblade_spam@yahoo.it>
	[PATCH] uml: fix syscall auditing
	
	Correct the entry_exit parameter for syscall_trace when tracing syscalls.  It
	was the reverse of the needed value.  (i.e.  it was 1 on entry and 0 on exit).
	
	Signed-off-by: Paolo 'Blaisorblade' Giarrusso <blaisorblade_spam@yahoo.it>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<blaisorblade_spam@yahoo.it>
	[PATCH] uml: fix symbol conflict in linking
	
	Since arch/um/kernel/tt/unmap_fin.o is linked statically, it could contain
	some symbols also contained in the rest of vmlinux; on some systems, this
	actually happens (due to some glibc differences).
	
	Since that file *must* be linked statically and then relinked (its code must
	remap the whole .text area except the section it is contained in during UML
	startup), we cannot change this.  So, we use objcopy to turn all symbols into
	local ones except for switcheroo(), which is the only function actually
	defined in the source (the other ones are brought in during linking).
	
	This shouldn't hurt other systems, while improving the behaviour on affected
	ones (there is still another issue I'm trying to fix).  And it is logically
	always needed (i.e., without this UML has just happened to work until now).
	
	Signed-off-by: Paolo 'Blaisorblade' Giarrusso <blaisorblade_spam@yahoo.it>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<blaisorblade_spam@yahoo.it>
	[PATCH] uml: cleanup header names
	
	Rename headers with the same name to avoid specifying the complete path for
	including them.
	
	Signed-off-by: Paolo 'Blaisorblade' Giarrusso <blaisorblade_spam@yahoo.it>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<blaisorblade_spam@yahoo.it>
	[PATCH] uml: remove useless inclusion
	
	Avoid including some unused headers.
	
	Signed-off-by: Paolo 'Blaisorblade' Giarrusso <blaisorblade_spam@yahoo.it>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<blaisorblade_spam@yahoo.it>
	[PATCH] uml: no duplicate current_thread definition
	
	From: Paolo 'Blaisorblade' Giarrusso <blaisorblade_spam@yahoo.it>
	      Jeff Dike <jdike@addtoit.com>
	
	Currently there are two distinct definitions of current_thread_info (which has
	its usual meaning) and current_thread (which is the same thing); so define the
	second to be the first (for UML compatibility).  If needed, a search & replace
	\<current_thread\> to current_thread_info and removing current_thread can be
	done (that would be a separate, low-priority patch, however).
	
	Also, since the involved headers include each other very deeply, we must fix
	somehow this recursive inclusion or things won't compile.
	
	Jeff Dike noted that this can be done easily, since the nasty chain of
	includes can be broken by eliminating an include of current.h, and implemented
	this.
	
	Signed-off-by: Paolo 'Blaisorblade' Giarrusso <blaisorblade_spam@yahoo.it>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<blaisorblade_spam@yahoo.it>
	[PATCH] uml: mconsole_proc simplify and partial fix
	
	From: Gerd Knorr <kraxel@bytesex.org>, and me, Paolo Giarrusso
	
	This is a rewrite of the mconsole_proc function.
	
	The old code had the problem that the kernel crashed after calling
	"uml_mconsole proc <somefile>" a few times.  I havn't tracked what exactly
	causes the problem, I guess trying to access the procfs without actually
	mounting it somewhere causes some corruption of kernel data structures.
	
	The new code simply openes /proc/<file> via sys_open().  That simplifies the
	function alot.  It also doesn't crash any more ;)
	
	Also, from Paolo Giarrusso: When printing the content of a file through the
	"proc" command, make it begin on his own line.
	
	PROBLEMS:
	
	Drawback is that it only works when procfs is actually mounted below /proc.
	And within UML, often this is false, because when building honeypots we mount
	HPPFS under /proc to avoid the hacker recognizing he's attacking a UML
	instance.
	
	One suggestion I've received to fix the later issue was to mount the procfs
	within a kernel thread with a private namespace, but I havn't tried that so
	far.
	
	Instead, we'd like to fix the actual code of the mconsole_proc function.  From
	"Anthony Brock" Anthony_Brock (at) ous (dot) edu comes a comment, suggesting
	where the bug lays (as noted in the source): removing part of the code (it
	seems the symlink lookup) there are no more crashes.
	
	Signed-off-by: Paolo 'Blaisorblade' Giarrusso <blaisorblade_spam@yahoo.it>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<blaisorblade_spam@yahoo.it>
	[PATCH] uml: catch EINTR in generic_console_write
	
	Make generic_console_write() catch the EINTR error code and retry doing the
	calls accordingly.
	
	Signed-off-by: Paolo 'Blaisorblade' Giarrusso <blaisorblade_spam@yahoo.it>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<blaisorblade_spam@yahoo.it>
	[PATCH] uml: remove SIGPROF from change_signals
	
	From: Paolo 'Blaisorblade' Giarrusso <blaisorblade_spam@yahoo.it>
	      Jeff Dike <jdike@addtoit.com>
	
	Since local_irq_save() and local_irq_disable() should match (apart from saving
	the flags), get/set_signals must match [un]block_signals, i.e. 
	change_signals; since get/set_signals don't enable/disable SIGPROF (and this
	behaviour is safe as explained in the comment the patch adds, since the
	profiling code does not interact with the kernel code), not even
	change_signals must toggle it.
	
	Signed-off-by: Paolo 'Blaisorblade' Giarrusso <blaisorblade_spam@yahoo.it>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<blaisorblade_spam@yahoo.it>
	[PATCH] uml: use kallsyms when dumping stack
	
	This patch makes UML use print_symbol() when dumping the stack.  It is not yet
	complete (the i386 version uses the frame pointers to walk the stack, for
	instance), but should be at least enough.
	
	Also, it uses bust_spinlock() when dumping errors to help them reach the
	console.  This appears not to be enough - however I analyzed the UML console
	code, and it seems that UML console don't get flushed *at all* when exiting.
	
	Signed-off-by: Paolo 'Blaisorblade' Giarrusso <blaisorblade_spam@yahoo.it>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<blaisorblade_spam@yahoo.it>
	[PATCH] uml: revert compile-only changes for other ones
	
	I'm reverting the compile-time fixes to replace them with a bigger change,
	which also happens to fix the compilation problem.  The change is in next
	patches.
	
	Signed-off-by: Paolo 'Blaisorblade' Giarrusso <blaisorblade_spam@yahoo.it>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<blaisorblade_spam@yahoo.it>
	[PATCH] uml: fix sysemu test at startup
	
	From: Paolo 'Blaisorblade' Giarrusso <blaisorblade_spam@yahoo.it>
	      Bodo Stroesser <bodo.stroesser@fujitsu-siemens.com>
	      Jeff Dike <jdike@addtoit.com>
	
	Currently, the test for the SYSEMU support on the host is completely wrong, as
	Bodo noticed.  We should change the syscall result (inserting the host pid)
	and check if it is received correctly by the guest.  What we actually do,
	without this patch, is to overwrite the syscall number.
	
	This went unnoticed because we only check that the getpid() syscall from the
	child does not return its pid.  We don't check that it returns the correct
	value.
	
	Also, override the result portably, using the PT_SYSCALL_RET_OFFSET macro
	which abstract away the host stack frame layout (took from Jeff Dike code).
	
	Signed-off-by: Paolo 'Blaisorblade' Giarrusso <blaisorblade_spam@yahoo.it>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<blaisorblade_spam@yahoo.it>
	[PATCH] uml: more careful test startup
	
	From: Paolo 'Blaisorblade' Giarrusso <blaisorblade_spam@yahoo.it>
	      Bodo Stroesser <bodo.stroesser@fujitsu-siemens.com>
	
	While testing the host ptrace(2) features, we modify the stack frame of a test
	child which is doing a syscall (namely getpid).  Either we override the
	syscall number or the return value, which become the parent's pid, or we
	don't, and the return value is the child's pid.
	
	Actually, we only compared the return value with the child's pid, so we did
	not notice a bug where the return value happened to be different from both.
	So I added a stricter test here.
	
	Signed-off-by: Paolo 'Blaisorblade' Giarrusso <blaisorblade_spam@yahoo.it>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<blaisorblade_spam@yahoo.it>
	[PATCH] uml: use PTRACE_SYSEMU also for TT mode
	
	From: Jeff Dike <jdike@addtoit.com>
	      Paolo 'Blaisorblade' Giarrusso<blaisorblade_spam@yahoo.it>
	
	As Jeff Dike noted, even if SYSEMU was originally written for use in SKAS
	mode, there is nothing SKAS specific in SYSEMU, so use it for TT mode, too.
	
	SYSEMU simply allows one to ptrace(PTRACE_SYSEMU) a process, that will stop
	on the syscall entry path like with PTRACE_SYSCALL, but with the difference
	that it makes sure that the syscall execution is totally skipped and that
	the child will see the return value set by the ptracer when the child was
	stopped.
	
	We even hope that the SYSEMU patch can be merged in mainline sooner than
	SKAS.
	
	Signed-off-by: Paolo 'Blaisorblade' Giarrusso <blaisorblade_spam@yahoo.it>
	Cc: Roland McGrath <roland@redhat.com>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<blaisorblade_spam@yahoo.it>
	[PATCH] uml: Lots of little fixes by Jeff Dike.
	
	From: Jeff Dike <jdike@addtoit.com>
	
	This is a large set of small fixes and other changes:
	
	Fixed a file descriptor leak in the network driver when changing an IP
	address.
	
	The port channel now sets SO_REUSEADDR.
	
	Added some initcall and exitcall definitions to arch/um/include/init.h
	so that they can be used from userspace code.
	
	Fixed the error handling in run_helper.
	
	Added the log() facility to mem_user.c.
	
	Fixed a problem with recursive segfaults not being handled correctly.
	
	tty_log_fd and umid aren't added to the command line any more.
	
	Fixed some prints.
	
	Signed-off-by: Paolo 'Blaisorblade' Giarrusso <blaisorblade_spam@yahoo.it>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<blaisorblade_spam@yahoo.it>
	[PATCH] uml: clear errno in CATCH_EINTR
	
	To avoid silly messages coming out during debugging or when things break,
	after that we've read in CATCH_EINTR that errno == EINTR, clear it, so that
	it's 0 in next iteration.
	
	Signed-off-by: Paolo 'Blaisorblade' Giarrusso <blaisorblade_spam@yahoo.it>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<blaisorblade_spam@yahoo.it>
	[PATCH] uml: re-add linux Makefile target - fixes to the old version.
	
	We have re-added the "linux" target which just creates a hardlink to vmlinux. 
	It was noted (sorry for forgetting who said this) that "make ARCH=um" will
	leave an old "linux" file, since the target is not listed in .PHONY.
	
	Using a symlink, instead of an hard link, was suggested because the hard link
	does not get updated with make vmlinux.  But mv linux $destpath (the most
	meaningful installation command) is broken, so I instead added linux to
	.PHONY.  Obviously, linux will not be rebuilt on "make vmlinux ARCH=um", but
	this makes sense (if people use the new way, don't use old tricks).  Anyway,
	we remove "linux" in any case.
	
	Signed-off-by: Paolo 'Blaisorblade' Giarrusso <blaisorblade_spam@yahoo.it>
	Acked-by: Jeff Dike <jdike@addtoit.com>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<blaisorblade_spam@yahoo.it>
	[PATCH] uml: add missing newline in help string
	
	Add missing newline in help string for "nosysemu" param.  Run ./vmlinux --help
	before and after to see the difference.  Trivial - must go in.
	
	Signed-off-by: Paolo 'Blaisorblade' Giarrusso <blaisorblade_spam@yahoo.it>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<jdike@addtoit.com>
	[PATCH] uml: update atomic.h so UML builds cleanly
	
	The comment should be self-explanatory.  This works around a pile of
	nasty-looking build output.
	
	Signed-off-by: Jeff Dike <jdike@addtoit.com>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<jdike@addtoit.com>
	[PATCH] uml: handle signal api
	
	This first patch lays some groundwork needed by the others.
	
	From: Bodo Stroesser - Change the interface to handle_signal so that it
	doesn't take the system call return value as an argument and eliminate
	its return value.
	
	kern_do_signal also now doesn't return immediately after determining that
	there is no signal to deliver.
	
	Signed-off-by: Jeff Dike <jdike@addtoit.com>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<jdike@addtoit.com>
	[PATCH] uml: sysenter is syscall
	
	From: Bodo Stroesser - Change is_syscall to check for sysenter and also that
	we are actually executing a system call.
	
	Signed-off-by: Jeff Dike <jdike@addtoit.com>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<jdike@addtoit.com>
	[PATCH] uml: generic singlestep syscall
	
	From: Bodo Stroesser - Make singlestep_syscall generic rather than being
	restricted to tt mode.
	
	Signed-off-by: Jeff Dike <jdike@addtoit.com>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<jdike@addtoit.com>
	[PATCH] uml: generic singlestepping
	
	From: Bodo Stroesser - Make singlestepping() generic.
	
	Signed-off-by: Jeff Dike <jdike@addtoit.com>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<jdike@addtoit.com>
	[PATCH] uml: clear singlestep
	
	The patch syscall-security-3 is wrong (provided by me, sorry).  I missed,
	that singlestepping_skas() used to reset PT_DTRACE.  This was handled
	differently in tt and skas.  With syscall-security-3 applied, a process in
	SKAS that singlestepped once continues to singlestep until the next
	systemcall occurs, even if it is resumed with PTRACE_CONT or
	PTRACE_SYSCALL.
	
	This fix unifies the usage of PT_DTRACE in TT and SKAS.  PT_DTRACE now is
	set by ptrace(PTRACE_SINGLESTEP,...) and reset by singlestepping() and it
	is evaluated in kern_do_signal().
	
	Signed-off-by: Bodo Stroesser <bstroesser@fujitsu-siemens.com>
	Signed-off-by: Jeff Dike <jdike@addtoit.com>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<jdike@addtoit.com>
	[PATCH] uml: dont check NR_syscalls
	
	Remove an unnecessary and even dangerous check in is_syscall()
	The bug was inserted by my patch syscall-security-1.
	
	Signed-off-by: Bodo Stroesser <bstroesser@fujitsu-siemens.com>
	Signed-off-by: Jeff Dike <jdike@addtoit.com>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<jdike@addtoit.com>
	[PATCH] uml: set DTRACE correctly
	
	From: Bodo Stroesser - Set PTRACE_DTRACE and singlestep_syscall correctly. 
	Pass out TRACESYSGOOD and make sure the parent gets notified in
	ptrace_syscall.
	
	Signed-off-by: Jeff Dike <jdike@addtoit.com>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<hunold@linuxtv.org>
	[PATCH] v4l: mxb driver and i2c helper cleanup
	
	The attached patch cleans up my Video4Linux "MXB" driver and the i2c helper
	chipset drivers used by that cards.
	
	I ran Lindent on the files and fixed some other coding style violations,
	which makes the patch rather big.
	
	But besides the MODULE_PARM => module_param there have been no crucial
	changes.
	
	- [V4L] mxb: replace MODULE_PARM with module_param
	
	- [V4L] saa7111: replace MODULE_PARM with module_param
	
	- [V4L] tda9840: replace MODULE_PARM with module_param, re-indent code
	  with Lindent, remove unnecessary header includes, code simplification
	
	- [V4L] tea6415c: replace MODULE_PARM with module_param, re-indent code
	  with Lindent, remove unnecessary header includes, code simplification
	
	- [V4L] tea6420: replace MODULE_PARM with module_param, re-indent code
	  with Lindent, remove unnecessary header includes, code simplification
	
	Signed-off-by: Michael Hunold <hunold@linuxtv.org>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<hunold@linuxtv.org>
	[PATCH] v4l: keep tvaudio driver away from saa7146
	
	The attached patch keeps the tvaudio i2c helper module away from any
	saa7146 based framegrabber.  All saa7146 drivers have their dedicated i2c
	helper modules and don't work together with tvaudio, so keep it away
	alltogether.  This will make mixed-card configurations work.
	
	The patch was discussed and ack'ed by Gerd Knorr.
	
	- don't attach tvaudio module on saa7146 i2c busses
	
	Signed-off-by: Michael Hunold <hunold@linuxtv.org>
	Acked-by: Gerd Knorr <kraxel@bytesex.org>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<stelian@popies.net>
	[PATCH] meye: module related fixes
	
	- use module_param() instead of MODULE_PARM() and __setup()
	
	- use MODULE_VERSION()
	
	Signed-off-by: Stelian Pop <stelian@popies.net>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<stelian@popies.net>
	[PATCH] meye: replace homebrew queue with kfifo
	
	Signed-off-by: Stelian Pop <stelian@popies.net>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<stelian@popies.net>
	[PATCH] meye: picture depth is in bits not in bytes
	
	Signed-off-by: Stelian Pop <stelian@popies.net>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<stelian@popies.net>
	[PATCH] meye: do lock properly when waiting for buffers
	
	Signed-off-by: Stelian Pop <stelian@popies.net>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<stelian@popies.net>
	[PATCH] meye: implement non blocking access using poll()
	
	Signed-off-by: Stelian Pop <stelian@popies.net>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<stelian@popies.net>
	[PATCH] meye: cleanup init/exit paths
	
	Signed-off-by: Stelian Pop <stelian@popies.net>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<stelian@popies.net>
	[PATCH] meye: the driver is no longer experimental and depends on PCI
	
	Signed-off-by: Stelian Pop <stelian@popies.net>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<stelian@popies.net>
	[PATCH] meye: module parameters documentation fixes
	
	Signed-off-by: Stelian Pop <stelian@popies.net>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<stelian@popies.net>
	[PATCH] meye: add v4l2 support
	
	Signed-off-by: Stelian Pop <stelian@popies.net>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<stelian@popies.net>
	[PATCH] meye: whitespace and coding style cleanups
	
	Signed-off-by: Stelian Pop <stelian@popies.net>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<stelian@popies.net>
	[PATCH] meye: bump up the version number
	
	Signed-off-by: Stelian Pop <stelian@popies.net>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<stelian@popies.net>
	[PATCH] meye: cache the camera settings in the driver
	
	Retrieving the current settings from the camera does not work very well, we
	need to cache the values in the driver.
	
	Signed-off-by: Stelian Pop <stelian@popies.net>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<stelian@popies.net>
	[PATCH] sonypi: documentation fixes
	
	In the latest round of updates for the sonypi driver, I fergot to send the
	attached patch which fixes the driver documentation.
	
	The patch contains mostly whitespace fixes and some additional information
	regarding the input layer usage.
	
	Signed-off-by: Stelian Pop <stelian@popies.net>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<stelian@popies.net>
	[PATCH] videodev2.h patchlet
	
	The following patchlet to videodev2.h brings in the "__user" definition from
	linux/compiler.h, making it suitable for inclusion in both kernel or user
	code.
	
	Signed-off-by: Stelian Pop <stelian@popies.net>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<arjan@infradead.org>
	[PATCH] remove journal callback code from jbd
	
	With the demise of intermezzo, the journal callback stuff in jbd is
	entirely unused (neither ext3 nor ocfs2 use it), and thus will only bitrot
	and bloat the kernel with code and datastructure growth.  If intermezzo
	ever gets resurrected this will be the least of the problems they have to
	face (both with generic kernel as jbd).
	
	Signed-off-by: Arjan van de Ven <arjan@infradead.org>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<adaplas@hotpop.com>
	[PATCH] fbcon: Do not touch hardware if vc_mode != KD_TEXT
	
	The frambuffer console is still writing to the graphics hardware even if the
	hardware is not owned anymore by the console.  This can lead to crashes with
	some hardware.
	
	A trace of the source indicates that it comes from almost anywhere, anytime.
	
	The fix is to return immediately if vc_mode != KD_TEXT.  The test is placed in
	the following functions if not already present.
	
	fbcon_cursor()
	fbcon_putcs()
	fbcon_clear()
	fbcon_bmove()
	fbcon_blank()
	
	Signed-off-by: Antonino Daplas <adaplas@pol.net>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<adaplas@hotpop.com>
	[PATCH] fbdev: Fix access to ROM in aty128fb
	
	Fix access to ROM in aty128fb.  Found by sparse.
	
	Signed-off-by: Antonino Daplas <adaplas@pol.net>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<adaplas@hotpop.com>
	[PATCH] fbdev: Fix IO access in rivafb
	
	Fix IO access in rivafb:
	- change NV_RD*/WR* macros to use read*/write* family
	- use NV_RD*/WR* to access IO memory
	- add __iomem annotations
	
	Signed-off-by: Antonino Daplas <adaplas@pol.net>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<adaplas@hotpop.com>
	[PATCH] fbcon: Add box drawing glyphs to 6x11 font
	
	From: David Lazar <david@panzer.utcluj.ro>
	
	I've tried to use the 6x11 (mac console) font on the framebuffer console (on
	the x86 architecture), and I've noticed that the font didn't have the correct
	box drawing glyphs.  As a result I've used as a model the 8x16 font and edited
	the glyphs for all 256 US ASCII characters, so that they display correctly.
	
	Signed-off-by: Antonino Daplas <adaplas@pol.net>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<adaplas@hotpop.com>
	[PATCH] fbdev: Fix source copy bug in neofb
	
	Fix copy system-io copy bug.
	
	Signed-off-by: Antonino Daplas <adaplas@pol.net>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<adaplas@hotpop.com>
	[PATCH] fbcon/fbdev: Remove fbcon-specific fields from struct fb_info
	
	The following fields in struct fb_info is specific only to fbcon:
	- struct timer_ cursor_timer
	- int currcon
	
	Remove them from struct fb_info and place them in fbcon_par so they become
	invisible from the drivers.
	
	Signed-off-by: Antonino Daplas <adaplas@pol.net>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<adaplas@hotpop.com>
	[PATCH] fbdev: atyfb_base.c requires atyfb_cursor()
	
	atyfb_base.c requires atyfb_cursor, but it is only available for linking if
	CONFIG_FB_ATY_CT=y.  This patch moves the .o file to the CONFIG_FB_ATY rule.
	
	Signed-off-by: Olaf Hering <olh@suse.de>
	Signed-off-by: Antonino Daplas <adaplas@pol.net>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<syrjala@sci.fi>
	[PATCH] fbdev: Fix atyfb cursor problems
	
	Fix atyfb cursor problems:
	- oops with noaccel option
	- CONFIG_FB_ATY_CT dependency problem
	
	Signed-off-by: Ville Syrjala <syrjala@sci.fi>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<adaplas@hotpop.com>
	[PATCH] fbdev: Set correct mclk/xclk values for aty in ibook
	
	The first iBook needs special mclk/xclk values, or the screen will show only
	garbage.  A patch like this went into 2.4.23.  It stopped working after
	2.6.10-rc1.
	
	http://linux.bkbits.net:8080/linux-2.4/cset@3f966ca7mqKxZorh7Uw2SBAuVbv3mA
	
	It was discussed here:
	http://marc.theaimsgroup.com/?t=106345749200001&r=1&w=4
	
	Signed-off-by: Olaf Hering <olh@suse.de>
	Signed-off-by: Antonino Daplas <adaplas@pol.net>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<adaplas@hotpop.com>
	[PATCH] fbdev: Check for intialized flag before registration in matroxfb
	
	In matroxfb_set_par, a flag is set to nonzero which is checked after
	register_framebuffer().  If this flag is zero, the driver will initialize
	the hardware.
	
	This is necessary because info->currcon (previously checked by matroxfb)
	has been removed from struct fb_info.
	
	Signed-off-by: Antonino Daplas <adaplas@pol.net>
	Acked-by: Petr Vandrovec <VANDROVE@vc.cvut.cz>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<adaplas@hotpop.com>
	[PATCH] fbcon: "Do not touch hardware if vc_mode != KD_TEXT: fix
	
	Sigh, this patch uncovered a can of worms.  I tested different combinations,
	those with/without xxxfb_blank implementation, framebuffers in directcolor
	or truecolor, etc. I find that there is a problem unblanking if the hardware
	has no xxxfb_blank() implementation, and also that the generic fb_blank() in
	fbmem.c is problematic with drivers in directcolor or pseudocolor mode when
	called by an fb application such as X.
	
	Display blanking is implemented in three ways:
	
	    1. using the drivers blanking implementation - info->fbops->fb_blank()
	    2. clearing the screen with the console erase character - fbcon_blank()
	    3. setting the color map to all black - fb_blank()
	
	The third method is problematic for these reasons:
	
	    - Setting the colormap to all black will not work in truecolor mode
	    - In directcolor or pseudocolor, it will overwrite the fb application's
	      color map, producing wrong colors.
	
	So, remove the generic implementation in fb_blank() and just return -EINVAL
	if there is no hardware implementation.  This will be only used by apps doing
	an FBIO_BLANK ioctl, and is a more robust approach.
	
	Other changes:
	
	- Consolidated all tests and created an inlined helper function to check if
	  the framebuffer console is inactive or not.
	- fix unblanking if driver has no xxxfb_blank() hook.
	
	I'm probably missing a few more things, but this patch should be generally
	correct. Please apply after the entire patch series to avoid rejects.
	
	Signed-off-by: Antonino Daplas <adaplas@pol.net>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<hch@lst.de>
	[PATCH] remove two leftover <asm/linux_logo.h> files
	
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<sylvain.meyer@worldonline.fr>
	[PATCH] fbdev: intelfb code cleanup
	
	- fix problems in the  __iomem annotation
	- remove builtinmodes.c
	- remove INTEL_*_PARAM and use module_param instead
	- remove intelfb_find_mode() and associated functions and use generic
	  fb_find_mode() instead
	- trivial documentation fix
	
	Signed-off-by: Sylvain Meyer <sylvain.meyer@worldonline.fr>
	Acked-by: "Antonino A. Daplas" <adaplas@hotpop.com>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<adaplas@hotpop.com>
	[PATCH] fbcon: Another fix for fbcon generic blanking code
	
	If the driver has no fb_blank hook, then the generic method is to clear the
	screen and then disallow writes to the framebuffer.  However, if the
	console is leaving graphics mode (KD_GRAPHICS), it would update the screen
	first, then unblank.  However, since writes to the framebuffers are
	disallowed, the update failes, and upon unblank, the screen is left empty
	except for the flashing cursor.  (This happens, for example when switching
	from X to console).
	
	The fix is to allow writes to the framebuffer even if the console is
	blanked.  To imitate a blank screen, the get_color() function will return
	the attributes of the erase character (black on black) if the console is
	blanked and if the driver has no fb_blank hook.
	
	I think this fixes the rest of the major bugs in the blanking code.  
	
	Signed-off-by: Antonino Daplas <adaplas@pol.net>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<rusty@rustcorp.com.au>
	[PATCH] Don't ignore try_stop_module return
	
	Since 2.6.4 we've been ignoring the failure of try_stop_module: it will
	normally fail if the module reference count is non-zero.  This would have
	been mainly unnoticed, since "modprobe -r" checks the usage count before
	calling sys_delete_module(), however there is a race which would cause a
	hang in this case.
	
	Signed-off-by: Rusty Russell <rusty@rustcorp.com.au>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<pluto@pld-linux.org>
	[PATCH] /proc/kcore - enable/disable.
	
	The presence of /proc/kcore is supposed to be configurable.
	
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<sonic_amiga@rambler.ru>
	[PATCH] VIA8231 support for parallel port driver
	
	This patch allows the kernel to configure port's mode without help of BIOS.
	 It is needed on my machine because its firmware simply ignores the
	parallel port leaving in unidirectional SPP mode.
	
	Notes on usage:
	
	To configure the port you need to:
	
	- if parport_pc driver is compiled as a module: specify parport_pc
	  init_mode=[spp|ps2|epp|ecp|ecpepp] in /etc/modules file (for Debian
	  Linux).
	
	- if the driver is linked statically with the kernel: specify
	  parport_init_mode=[spp|ps2|epp|ecp|ecpepp] in kernel's arguments.
	
	This patch is intended for use primarily on Pegasos machines but it will
	work on any computer with VIA8231 south bridge.  In this case it will
	override BIOS setting if you tell the driver to configure the port.  BIOS
	setting will be honored if you omit init_mode parameter.  Technical
	details:
	
	1.  On Pegasos standard port settings (set by OpenFirmware) are: IRQ=7,
	    DMA=3, base address=0x3BC, mode is unidirectional SPP.
	
	2.  The patch changes only port mode, all other settings are preserved.
	     So if you have a PC with VIA8231 and use driver to configure the port
	    you'll still be able to change IRQ, DMA and base address in BIOS and
	    these settings will be kept.
	
	3.  One exclusion: if you tell the driver to turn on EPP mode (specify
	    epp or ecpepp value) and if default base address is 0x3BC (this is the
	    case on Pegasos) the port will be moved to 0x378.  EPP port can't have
	    0x3BC as the base.
	
	Known problems:
	
	1.  ECP+EPP mode is strange, it doesn't work even on several PC's i
	    tested with Linux.  ECP mode is detected and EPP is not.  So if you get
	    the same thing, it's not my fault.  I just have no time to deal with
	    it, current result is enough for me.
	
	2.  Not all devices work on Pegasos, i tried my Genuis-HR6 parallel
	    port scanner and parallel ZIP drive and both of them don't work.  ZIP
	    drive is detected properly but then suddenly gets offline.  Scanner
	    does not answer any command at all.  Without the patch the same thing
	    happens.  Obviously Pegasos has some more problems which are not
	    discovered and not fixed yet.
	
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<jbaron@redhat.com>
	[PATCH] fix alt-sysrq deadlock
	
	The sysrq code is taking a spinlock from both interrupt and process context
	in an unsafe and deadlocky manner.
	
	Move all those inlined functions out of sysrq.h, into sysrq.c then withdraw
	all those exported-to-modules helper functions then remove
	__sysrq_trylock_table() altogether and then use spin_lock_irqsave() in the
	appropriate places.
	
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<mru@inprovide.com>
	[PATCH] SysRq-n changes RT tasks to normal
	
	Teach sysrq-N to switch all rt-policy tasks to SCHED_OTHER.  For recovering
	from (and diagnosing) userspace bugs.
	
	Acked-by: Ingo Molnar <mingo@elte.hu>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<Markus.Lidel@shadowconnect.com>
	[PATCH] fix bug in i2o_iop_systab_set where address is used instead  of length
	
	- Fixed bug in i2o_iop_systab_set where address is used instead of length
	
	Signed-off-by: Markus Lidel <Markus.Lidel@shadowconnect.com>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<arjan@infradead.org>
	[PATCH] remove unused lookup_mnt export
	
	lookup_mnt() is entirely unused outside of deep vfs internals, remove the
	export since it's quite a low level interface anyway
	
	Signed-off-by: Arjan van de Ven <arjan@infradead.org>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<prasanna@in.ibm.com>
	[PATCH] kprobes: Minor i386 changes required for porting kprobes to x86_64
	
	- Kprobes structure has been modified to support copying of original
	  instruction as required by the architecture.  On x86_64 normal pages we
	  get from kmalloc or vmalloc are not executable.  Single-stepping an
	  instruction on such a page yields an oops.  So instead of storing the
	  instruction copies in their respective kprobe objects, we allocate a
	  page, map it executable, and store all the instruction copies there and
	  store the pointer of the copied instruction in the specific kprobes
	  object.
	
	- jprobe_return_end is moved into inline assembly to avoid compiler
	  optimization.
	
	- arch_prepare_kprobe() now returns an integer,since
	  arch_prepare_kprobe() might fail on other architectures.
	
	- added arch_remove_kprobe() routine, since other architectures requires
	  it.
	
	Signed-off-by: Prasanna S Panchamukhi <prasanna@in.ibm.com>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<prasanna@in.ibm.com>
	[PATCH] kprobes: kprobes ported to x86_64
	
	Adopted from i386 architecture.
	
	Kprobes:
	
	Helps developers to trap at almost any kernel code address, specifying a
	handler routine to be invoked when the breakpoint is hit.  Useful for
	analysing the Linux kernel by collecting debugging information
	non-disruptively.  Employs single-stepping out-of-line to avoid probe
	misses on SMP and may be especially useful in aiding debugging elusive
	races and problems on live systems.  More elaborate dynamic tracing tools
	can be built over the kprobes interface.
	
	Sample usage:
		To place a probe on __blockdev_direct_IO:
		static int probe_handler(struct kprobe *p, struct pt_regs *)
		{
			... whatever ...
		}
		struct kprobe kp = {
			.addr = __blockdev_direct_IO,
			.pre_handler = probe_handler
		};
		register_kprobe(&kp);
	
	Jprobes:
	
	A special kprobe type which can be placed on function entry points, and
	employs a simple mirroring principle to allow seamless access to the
	arguments of a function being probed.  The probe handler routine should
	have the same prototype as the function being probed.
	
	The way it works is that when the probe is hit, the breakpoint handler
	simply irets to the probe handler's rip while retaining register and stack
	state corresponding to the function entry.  After it is done, the probe
	handler calls jprobe_return() which traps again to restore processor state
	and switch back to the probed function.  Linus noted correctly at KS that
	we need to be careful as gcc assumes that the callee owns arguments.  We
	save and restore enough stack bytes to cover argument space.
	
	Sample Usage:
		static int jip_queue_xmit(struct sk_buff *skb, int ipfragok)
		{
			... whatever ...
			jprobe_return();
			return 0;
		}
	
		struct jprobe jp = {
			{.addr = (kprobe_opcode_t *) ip_queue_xmit},
			.entry = (kprobe_opcode_t *) jip_queue_xmit
		};
		register_jprobe(&jp);
	
	Signed-off-by: Prasanna S Panchamukhi <prasanna@in.ibm.com>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<janitor@sternwelten.at>
	[PATCH] VFS maintainer email address updates
	
	viro has moved.
	
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<hch@lst.de>
	[PATCH] remove dead kernel_map_pages export
	
	Signed-off-by: Christoph Hellwig <hch@lst.de>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<hch@lst.de>
	[PATCH] remove dead exports from random.c
	
	Signed-off-by: Christoph Hellwig <hch@lst.de>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<hch@lst.de>
	[PATCH] unexport do_settimeofday
	
	Signed-off-by: Christoph Hellwig <hch@lst.de>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<kas@fi.muni.cz>
	[PATCH] Minor fix of RCU documentation
	
	The attached patch fixes an incorrect example in Documentation/RCU/listRCU.txt
	- the "original" lock-based code should not call RCU functions, of course.
	
	Signed-Off-By: Jan "Yenya" Kasprzak <kas@fi.muni.cz>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<james4765@verizon.net>
	[PATCH] documentation: Remove drivers/char/README.computone
	
	Remove deprecated file in drivers/char.
	
	Signed-off-by: James Nelson <james4765@gmail.com>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<james4765@verizon.net>
	[PATCH] documentation: Remove drivers/char/README.cyclomY
	
	Remove obsolete file from drivers/char.
	
	Signed-off-by: James Nelson <james4765@gmail.com>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<james4765@verizon.net>
	[PATCH] documentation: Remove drivers/char/README.ecpa
	
	Remove unneeded file from drivers/char.
	
	Signed-off-by: James Nelson <james4765@gmail.com>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<james4765@verizon.net>
	[PATCH] documentation: Remove drivers/char/README.scc
	
	Remove unneeded file in drivers/char.  
	
	Signed-off-by: James Nelson <james4765@gmail.com>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<james4765@gmail.com>
	[PATCH] tipar: Documentation/tipar.txt cleanup
	
	Minor cleanup of Documentation/tipar.txt.
	
	Signed-off-by: James Nelson <james4765@gmail.com>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<james4765@gmail.com>
	[PATCH] ramdisk: Correction to Documentation/kernel-parameters.txt
	
	Remove deleted module option in Documentation/kernel-parameters.txt
	
	Signed-off-by: James Nelson <james4765@gmail.com>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<trini@kernel.crashing.org>
	[PATCH] Fix building of samba userland
	
	After 2.6.8.1, samba userland would no longer build with current
	kernel headers, as it needs some of the samba kernel headers to work,
	yet they included <linux/fs.h> outside of __KERNEL__.
	
	Signed-off-by: Tom Rini <trini@kernel.crashing.org>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<marcel@holtmann.org>
	[PATCH] Use add_hotplug_env_var() in firmware loader
	
	The add_hotplug_env_var() function is available and so use it in the
	firmware class code.
	
	Signed-off-by: Marcel Holtmann <marcel@holtmann.org>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<trini@kernel.crashing.org>
	[PATCH] Add __KERNEL__ to <linux/crc-ccitt.h>
	
	The following adds a __KERNEL__ check to <linux/crc-ccitt.h>.  The problem
	is that the ppp package includes <linux/ppp_defs.h> via <net/ppp_defs.h>,
	which in turn gets <linux/crc-ccitt.h>.
	
	Signed-off-by: Tom Rini <trini@kernel.crashing.org>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<apw@shadowen.org>
	[PATCH] fix pnpbios fault message
	
	When your plug-n-play BIOS is truly broken and generates a fault during
	use, we report this and suggest disabling it.  The message produced
	suggests using "nobiospnp" to achive this, the correct option is
	"pnpbios=off".  This patch upates the message.
	
	Signed-off-by: Andy Whitcroft <apw@shadowen.org>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<olh@suse.de>
	[PATCH] fix initcall_debug on ppc64/ia64
	
	ia64 and ppc64 have function descriptors.  Booting with initcall_debug will
	print the descriptor address, not the address and name of the actual
	function.  Another indirection is required.
	
	Tested on ppc, ppc64 and ia64.
	
	Signed-off-by: Olaf Hering <olh@suse.de>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<paulus@samba.org>
	[PATCH] Check character flags in ppp_async ldisc
	
	Although it was checking the per-character error flags supplied by the
	driver for ordinary characters, the ppp_async line discipline code wasn't
	checking the flags for special characters, such as the flag and escape
	characters (~ and }).  This patch adds that check.
	
	Signed-off-by: Paul Mackerras <paulus@samba.org>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<vandrove@vc.cvut.cz>
	[PATCH] Add argument-less ppdev ioctls to compat_ioctl.h
	
	ppdev's ioctls are not available for 32bit apps on 64bit systems.  There
	are four ioctls which take no argument at all (so they are compatible
	between 32bit and 64bit), these numbers do not clash with any other ioctl
	code, and so I see no reason why not applying patch below.
	
	It solves problem VMware users are faced on 64bit systems if they want to
	use direct access to the parallel port.
	
	Signed-off-by: Petr Vandrovec <vandrove@vc.cvut.cz>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<petero2@telia.com>
	[PATCH] fix bttv oops in btcx_riscmem_free
	
	Signed-off-by: Peter Osterlund <petero2@telia.com>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<Andries.Brouwer@cwi.nl>
	[PATCH] minix_clear_inode fix
	
	The patch below fixes two flaws in minix_clear_inode.
	
	The first is that it tests bh which is never initialized.  (&bh is a
	parameter of minix_V1_raw_inode, but that routine can fail and return
	before it has set bh)
	
	The second is that generic_delete_inode() goes BUG() in case inode->i_state
	!= I_CLEAR.  Clearly, it is expected that inode->i_sb->s_op->delete_inode
	does a clear_inode() at some point.  But minix_delete_inode() calls
	minix_free_inode() and that routine can print an error and return early,
	before calling clear_inode().
	
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<dtor_core@ameritech.net>
	[PATCH] panic_blink and i8042 unloading
	
	At unload i8042 sets panic_blink to 0.  This will cause problems if kernel
	panics later as it will just use it assuming that the pointer is correct.
	
	Signed-off-by: Dmitry Torokhov <dtor@mail.ru>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<torvalds@ppc970.osdl.org>
	fbdev: fix compile of rivafb on __BIG_ENDIAN
	
	Typo introduced by latest cleanups by Antonino

<marcel@holtmann.org>
	[Bluetooth] Some trivial s/int/unsigned int/
	
	In http://janitor.kernelnewbies.org/TODO, Jeff Garzik states:
	
	"unsigned int" is preferred to "int", it generates better asm code
	on all platforms except sh5.
	
	Signed-off-by: Carlo Perassi <carlo@linux.it>
	Signed-off-by: Marcel Holtmann <marcel@holtmann.org>

<adaplas@hotpop.com>
	[PATCH] rivafb: big-endian IO access fixes
	
	In big endian machines, the read*/write* accessors do a byteswap for an
	inherently little endian PCI bus.  However, rivafb puts the hardwire in big
	endian register access, thus the byteswap is not needed. So for 16- and
	32-bit access, instead of read*/write*, use __raw_read*/__raw_write* for all
	archs.
	
	Signed-off-by: Antonino Daplas <adaplas@pol.net>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<greg@kroah.com>
	I2C: remove probe_range from I2C sensor drivers, as it's not used.
	
	Signed-off-by: Greg Kroah-Hartman <greg@kroah.com>

<greg@kroah.com>
	I2C: remove ignore_range from I2C sensor drivers, as it's not used.
	
	Signed-off-by: Greg Kroah-Hartman <greg@kroah.com>

<greg@kroah.com>
	I2C: remove normal_isa_range from I2C sensor drivers, as it's not used.
	
	Signed-off-by: Greg Kroah-Hartman <greg@kroah.com>

<greg@kroah.com>
	I2C: fix i2c_detect to allow NULL fields in adapter address structure.
	
	Signed-off-by: Greg Kroah-Hartman <greg@kroah.com>

<greg@kroah.com>
	I2C: moved from all sensor drivers from normal_i2c_range to normal_i2c
	
	Signed-off-by: Greg Kroah-Hartman <greg@kroah.com>

<greg@kroah.com>
	I2C: delete normal_i2c_range logic from sensors as there are no more users.

<jthiessen@penguincomputing.com>
	[PATCH] I2C: fix lm85.c build warnings
	
	Signed-off-by: Justin Thiessen <jthiessen@penguincomputing.com>
	Signed-off-by: Greg Kroah-Hartman <greg@kroah.com>

<khali@linux-fr.org>
	[PATCH] I2C: Check for unregistered adapter in i2c_del_adapter
	
	The patch adds a check at the beginning of i2c_del_adapter in case
	someone attempts to remove an adapter that was never added in the first
	place. This sounds like a good safety, as doing so will lead to an oops
	at the moment. Also, I have a need for it in the latest version of my
	i2c-amd756-s4882 patch. I need to remove the original adapter and
	install the virtual ones instead, but I have no way to know if the
	original adapter was succesfully added beforehand or not.
	
	
	Signed-off-by: Jean Delvare <khali@linux-fr.org>
	Signed-off-by: Greg Kroah-Hartman <greg@kroah.com>

<bunk@stusta.de>
	[PATCH] i2c/busses/ : make some code static
	
	The patch below makes some needlessly global code under i2c/busses/
	static.
	
	
	Signed-off-by: Adrian Bunk <bunk@stusta.de>
	Signed-off-by: Greg Kroah-Hartman <greg@kroah.com>

<ben-linux@fluff.org>
	[PATCH] S3C2410 i2c updates
	
	This patch integrates several fixes to the s3c2410 i2c
	driver
	
	Shannon Holland:
	
		- write IICCON in configuration code
		- add handling for s3c2410 i2c errata
		- fix clock rate divisor calculation
	
	Ben Dooks:
	
		- s3c2440 detection
		- s3c2440 IICLC register setup
		- add __exit to the module exit
		- remove return from exit code
	
	Signed-off-by: Ben Dooks <ben-linux@fluff.org>
	Signed-off-by: Shannon Holland <holland@loser.net>
	Signed-off-by: Greg Kroah-Hartman <greg@kroah.com>

<khali@linux-fr.org>
	[PATCH] I2C: add Tyan S4882 driver
	
	Signed-off-by: Jean Delvare <khali@linux-fr.org>
	Signed-off-by: Greg Kroah-Hartman <greg@kroah.com>

<torvalds@ppc970.osdl.org>
	wait_task_stopped() must not just return 0 when it has
	released the tasklist_lock.
	
	Since it released the lock, the process lists may not
	be valid any more, and we must repeat the loop rather than
	continue with the next parent.
	
	Use -EAGAIN to show this condition (separate from the
	normal -EFAULT that may happen if rusage information could
	not be copied to user space).

<prasanna@in.ibm.com>
	[PATCH] kprobes: Minor changes for sparc64
	
	Minor changes required to port kprobes for sparc64.
	
	- arch_prepare_kprobe() returns an integer.
	
	- added arch_remove_kprobe().
	
	- changes to access copy of original instruction, since kprobe_opcode_t
	  insn[MAX_INSN_SIZE] is moved from struct kprobe to a struct
	  arch_specific_insn.
	
	Signed-off-by: Prasanna S Panchamukhi <prasanna@in.ibm.com>
	Cc: "David S. Miller" <davem@davemloft.net>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<ncunningham@linuxmail.org>
	[PATCH] Fix dm_io.c oops in low memory conditions.
	
	If you call drivers/md/dm-io.c:resize_pool on an empty pool and
	mempool_create is unable to make the pool, the condition is not handled
	correctly, resulting in an oops in mempool_destroy.
	
	Trivial fix.

<yoshfuji@linux-ipv6.org>
	[IPV6] Fix unresolved symbol timer_bug_msg.
	
	Closed: Bug#3717 (by John Goerzen <goerzen@complete.org>)
	Signed-off-by: Hideaki YOSHIFUJI <yoshfuji@linux-ipv6.org>

<len.brown@intel.com>
	[ACPI] ibm ACPI 0.8 by Chris Wright and Borislav Deianov
	
	Signed-off-by: Len Brown <len.brown@intel.com>

<len.brown@intel.com>
	[ACPI] acpi_pci_irq_enable() now returns 0 on success.
	This bubbles all the way up to pci_enable_device().
	This allows IRQ0 to be used as a legal PCI device IRQ.
	
	The ES7000 uses an interrupt source override to assign pin20 to IRQ0.
	Then platform_rename_gsi assigns pin0 a high-numbered IRQ -- available
	for PCI devices.  But IRQ0 needs to be a legal PCI IRQ in the lookup code
	to make it as far as the re-name code. 
	
	Signed-off-by: Natalie Protasevich <Natalie.Protasevich@UNISYS.com>
	Signed-off-by: Len Brown <len.brown@intel.com>

<len.brown@intel.com>
	fix non-ACPI IOAPIC build

<davis_g@com.rmk.(none)>
	[ARM PATCH] 2182/1: apcs-32 and alignment-traps command line options are deprecated in gcc-4.0
	
	Patch from George G. Davis
	
	Recent gcc-4.0 and gcc-csl-arm-branch tool chains no longer include support
	for apcs-32 and alignment-traps command line options. This patch tests
	for presence of these deprecated c/l options and uses new gcc-4.0 c/l
	options instead if they are not supported by the current toolchain.
	
	Signed-off-by: George G. Davis 
	Signed-off-by: Russell King

<ben-linux@org.rmk.(none)>
	[ARM PATCH] 2215/1: S3C2410 - i2c registers for s3c2440a
	
	Patch from Ben Dooks
	
	Added S3C2440_IICLC register definitions
	
	Signed-off-by: Ben Dooks 
	Signed-off-by: Russell King

<dave.jiang@com.rmk.(none)>
	[ARM PATCH] 2216/1: Update iop3xx timers to new update process times scheme
	
	Patch from Dave Jiang
	
	Updates the timer irqs to call the new update process time scheme
	
	Signed-off-by: Dave Jiang
	Signed-off-by: Russell King

<aia21@cantab.net>
	NTFS: - Add mapping of unmapped buffers to all remaining code paths, i.e.
	        fs/ntfs/aops.c::ntfs_write_mst_block(), mft.c::ntfs_sync_mft_mirror(),
	        and write_mft_record_nolock().  From now on we require that the
	        complete runlist for the mft mirror is always mapped into memory.
	      - Add creation of buffers to fs/ntfs/mft.c::ntfs_sync_mft_mirror().
	      - Do not check for the page being uptodate in mark_ntfs_record_dirty()
	        as we now call this after marking the page not uptodate during mft
	        mirror synchronisation (fs/ntfs/mft.c::ntfs_sync_mft_mirror()).
	      - Improve error handling in fs/ntfs/aops.c::ntfs_{read,write}_block().
	
	Signed-off-by: Anton Altaparmakov <aia21@cantab.net>

<aia21@cantab.net>
	NTFS: - Fix creation of buffers in fs/ntfs/mft.c::ntfs_sync_mft_mirror().
	        Cannot just call fs/ntfs/aops.c::mark_ntfs_record_dirty() since
	        this also marks the page dirty so we create the buffers by hand
	        and set them uptodate.
	      - Revert the removal of the page uptodate check from
	        fs/ntfs/aops.c::mark_ntfs_record_dirty() as it is no longer called
	        from fs/ntfs/mft.c::ntfs_sync_mft_mirror().
	
	Signed-off-by: Anton Altaparmakov <aia21@cantab.net>

<aia21@cantab.net>
	NTFS: Disable the file size changing code from
	      fs/ntfs/aops.c::ntfs_prepare_write() for now as it is not safe.
	
	Signed-off-by: Anton Altaparmakov <aia21@cantab.net>

<icampbell@com.rmk.(none)>
	[ARM PATCH] 2219/2:  Ignore IRQ_NONE for edge triggered interrupts
	
	Patch from Ian Campbell
	
	As discussed on the ARM Linux kernel mailing list. With edge triggered interrupts it is impossible to avoid spurious interrupts and so it makes sense to just ignore IRQ_NONE return values in this case. 
	
	Signed-off-by: Ian Campbell 
	Signed-off-by: Russell King

<rmk@flint.arm.linux.org.uk>
	[ARM] rtctime tweaks
	
	- if alarm operations are NULL, don't allow alarm ioctls to succeed.
	- if ops->ioctl is NULL, don't try to call NULL function.
	- only display the alarm times in /proc/rtc if we successfully read
	  the alarm time.

<greg@kroah.com>
	[PATCH] kobject: fix double kobject_put() in error path of kobject_add()
	
	This fixes a problem introduced in the previous set of driver model
	changes that has been seen by a lot of people (most notibly the greater
	than 256 pty users, but others might also be hitting this without
	realizing it.)
	
	Also add a comment so we don't try to "fix" this again.
	
	Signed-off-by: Greg Kroah-Hartman <greg@kroah.com>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<sfrench@smft41.(none)>
	[CIFS] level 261 findfirst part one (will help with returning stable
	server inode numbers from Windows servers)
	
	Signed-of-by: Steve French (sfrench@us.ibm.com)

<ajgrothe@yahoo.com>
	[CRYPTO]: Add Anubis support.
	
	Signed-off-by: Aaron Grothe <ajgrothe@yahoo.com>
	Signed-off-by: James Morris <jmorris@redhat.com>
	Signed-off-by: David S. Miller <davem@davemloft.net>

<mark@mtfhpc.demon.co.uk>
	[SPARC]: In cg3 driver, access control reg using byte not long IOs.
	
	Signed-off-by: David S. Miller <davem@davemloft.net>

<davem@nuts.davemloft.net>
	[SPARC64]: Update defconfig.
	
	Signed-off-by: David S. Miller <davem@davemloft.net>

<rmk@flint.arm.linux.org.uk>
	[ARM] Add static partitioning information to flash_platform_data.

<rmk@flint.arm.linux.org.uk>
	[ARM] Add SA1100 generic flash infrastructure.

<rmk@flint.arm.linux.org.uk>
	[ARM] Add Assabet flash device partitioning and location data.

<chas@cmf.nrl.navy.mil>
	[ATM]: [atmtcp] fix refcounting and vcc search
	
	Signed-off-by: Chas Williams <chas@cmf.nrl.navy.mil>
	Signed-off-by: David S. Miller <davem@davemloft.net>

<hch@lst.de>
	[NET]: Remove dead exports from net/core/dev.c
	
	Signed-off-by: Christoph Hellwig <hch@lst.de>
	Signed-off-by: David S. Miller <davem@davemloft.net>

<ben-linux@org.rmk.(none)>
	[ARM PATCH] 2220/1: S3C2410 - regs-dsc.h fixes
	
	Patch from Ben Dooks
	
	The following fixes are included:
	
	 - fix the addresses of S3C2440_DSCx (off by 4)
	 - SCK0/SCK1 definitions the wrong way around
	 - renable ENABLE to DISABLE
	
	Signed-off-by: Ben Dooks 
	Signed-off-by: Russell King

<ben-linux@org.rmk.(none)>
	[ARM PATCH] 2217/2: S3C2410 - pm updates
	
	Patch from Ben Dooks
	
	This patch does the following:
	
	 - Save S3C2410_DCLKCON over sleep
	 - Save all non-SDRAM memory bank config
	 - Fix bug in setting PLL before clock divisor
	 - Save all IRQ level controlls
	 - Restore IRQ masks _after_ configuration restored
	 - No debug until core registers restored
	
	This patch also moves the pm save/restore list code
	into the header, for other parts of arch/arm/mach-s3c2410
	to use. Note, this is not a general invite for external
	code to use these functions.
	
	Also applied patch from Dimitry Andric to fix up the
	spelling/typos in Documentation/arm/Samsung-S3C24XX/Suspend.txt
	
	Signed-off-by: Ben Dooks 
	
	Signed-off-by: Dimitry Andric 
	Signed-off-by: Russell King

<ben-linux@org.rmk.(none)>
	[ARM PATCH] 2224/1: S3C2410 - s3c2440 power management device
	
	Patch from Ben Dooks
	
	Add a system device for the s3c2440 called s3c2440-core
	to allow power management hooks for s3c2440 specific
	registers to be added.
	
	Signed-off-by: Ben Dooks 
	Signed-off-by: Russell King

<benh@kernel.crashing.org>
	[SUNZILOG]: Update timeout when setting termios.
	
	Signed-off-by: David S. Miller <davem@davemloft.net>

<akpm@osdl.org>
	[BLUETOOTH]: Lock initializer unifying
	
	From: <tglx@linutronix.de>
	
	To make spinlock/rwlock initialization consistent all over the kernel,
	this patch converts explicit lock-initializers into spin_lock_init() and
	rwlock_init() calls.
	
	Currently, spinlocks and rwlocks are initialized in two different ways:
	
	  lock = SPIN_LOCK_UNLOCKED
	  spin_lock_init(&lock)
	  
	  rwlock = RW_LOCK_UNLOCKED
	  rwlock_init(&rwlock)
	
	this patch converts all explicit lock initializations to
	spin_lock_init() or rwlock_init(). (Besides consistency this also helps
	automatic lock validators and debugging code.)
	
	The conversion was done with a script, it was verified manually and it
	was reviewed, compiled and tested as far as possible on x86, ARM, PPC.
	
	There is no runtime overhead or actual code change resulting out of this
	patch, because spin_lock_init() and rwlock_init() are macros and are
	thus equivalent to the explicit initialization method.
	
	That's the second batch of the unifying patches.
	
	Signed-off-by: Thomas Gleixner <tglx@linutronix.de>
	Acked-by: Ingo Molnar <mingo@elte.hu>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: David S. Miller <davem@davemloft.net>

<dave.jiang@com.rmk.(none)>
	[ARM PATCH] 2222/1: iop3xx timer routine cleanup
	
	Patch from Dave Jiang
	
	Clean up iop3xx timer routines and move to xtime_lock/timer_tick schemes
	dependent on patch 2216/1
	
	Signed-off-by: Dave Jiang
	Signed-off-by: Russell King

<akpm@osdl.org>
	[NET]: Lock initializer unifying
	
	From: <tglx@linutronix.de>
	
	To make spinlock/rwlock initialization consistent all over the kernel,
	this patch converts explicit lock-initializers into spin_lock_init() and
	rwlock_init() calls.
	
	Currently, spinlocks and rwlocks are initialized in two different ways:
	
	  lock = SPIN_LOCK_UNLOCKED
	  spin_lock_init(&lock)
	  
	  rwlock = RW_LOCK_UNLOCKED
	  rwlock_init(&rwlock)
	
	this patch converts all explicit lock initializations to
	spin_lock_init() or rwlock_init(). (Besides consistency this also helps
	automatic lock validators and debugging code.)
	
	The conversion was done with a script, it was verified manually and it
	was reviewed, compiled and tested as far as possible on x86, ARM, PPC.
	
	There is no runtime overhead or actual code change resulting out of this
	patch, because spin_lock_init() and rwlock_init() are macros and are
	thus equivalent to the explicit initialization method.
	
	That's the second batch of the unifying patches.
	
	Signed-off-by: Thomas Gleixner <tglx@linutronix.de>
	Acked-by: Ingo Molnar <mingo@elte.hu>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: David S. Miller <davem@davemloft.net>

<dave.jiang@com.rmk.(none)>
	[ARM PATCH] 2223/1: convert serial UART to platform device on iop3xx
	
	Patch from Dave Jiang
	
	Converting IOP321 UART to platform device
	Remove asm/arch/serial.h dependency
	
	Signed-off-by: Dave Jiang
	Signed-off-by: Russell King

<Matt_Domsch@dell.com>
	[PATCH] EFI GPT: reduce alternate header probing
	
	EFI partitioning scheme was reading the last reported sector of the
	block device to look for the alternate GPT header, before it had
	confirmed that it should.  This causes problems for devices with the
	following problems:  a) those who misreport their size (typically
	off-by-one), and b) those who fail when asked to read a block
	outside their range.
	
	This patch moves the test for the Protective Master Boot Record (PMBR)
	ahead of the tests for the Primary and Alternate GPT headers.  If the
	PMBR is not valid, the disk is assumed to not be a GPT disk.  This can
	be overridden with the 'gpt' kernel command line option.  If the
	Primary GPT header is not valid, the Alternate GPT header is not
	probed automatically unless the 'gpt' kernel command line option is
	passed.  If the both the PMBR and Primary GPT header are valid, then
	the Alternate GPT header at the end of the disk is probed.
	
	Also re-enables CONFIG_EFI_PARTITION for all architectures.
	
	Signed-off-by: Matt Domsch <Matt_Domsch@dell.com>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<greg@kroah.com>
	[PATCH] timer: fix up problem where two sysdev_class devices had the same name.
	
	Thanks to Kay Sievers for reporting this. 
	
	Was caused by a change from Venkatesh Pallipadi as seen at:
	  http://linux.bkbits.net:8080/linux-2.5/cset@41810e4aGZ0E5bn_hMb4JgIY5u90zA
	
	Signed-off-by: Greg Kroah-Hartman <greg@kroah.com>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<benh@kernel.crashing.org>
	[PATCH] ppc64: Fix G5 low level i2c code
	
	The code in pmac_low_i2c.c is a low level synchronous version of the i2c keywest
	driver for use by platform code early during boot or during sleep/wakeup cycles
	to communicate with some motherboard chips, typically clock chips.
	It wasn't used on g5 until now, which is good because it wasn't 64 bits clean :)
	
	This patch fixes it, and also remove the use of udelay() since it can be used for
	synchronizing the HW timebase, and so must operate when it's frozen (and our
	implementation of udelay uses that timebase).
	
	Signed-off-by: Benjamin Herrenschmidt <benh@kernel.crashing.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<benh@kernel.crashing.org>
	[PATCH] ppc64: Add HW CPU timebase sync
	
	This implements support for doing a HW synchronization of the CPU
	timebases on SMP G5 machines.
	
	 When the proper clock chips are found on i2c, they are used to stop the
	timebase clock source during the synchronization process.  This replaces
	the software sync algorithm we used so far and provides slightly more
	precise results.
	
	Signed-off-by: Benjamin Herrenschmidt <benh@kernel.crashing.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<Andries.Brouwer@cwi.nl>
	[PATCH] ext2 docs update
	
	Removed barrier - it is not an ext2 option.
	
	Corrected the distinction between kernel-selected defaults and values
	read from the filesystem.
	
	Fixed some typos.  Shortened line length to 80.

<Andries.Brouwer@cwi.nl>
	[PATCH] ufs docs update
	
	Added the hp and 5xbsd flavors of ufstype.

<Andries.Brouwer@cwi.nl>
	[PATCH] wierd typos
	
	I have directories full of typo corrections - don't know
	whether you want them. Below some wierds.

<Andries.Brouwer@cwi.nl>
	[PATCH] propogate typos

<Andries.Brouwer@cwi.nl>
	[PATCH] recieve typos

<Andries.Brouwer@cwi.nl>
	[PATCH] don't divide by 0 when trying to mount ext3
	
	Not surprisingly, the ext3 code crashes in the same way
	the ext2 code does when dividing by zero.

<Andries.Brouwer@cwi.nl>
	[PATCH] new Solaris partition ID
	
	Sun tells me:
	
	  For many years both Solaris x86 and Linux have used the same fdisk
	  partition id of 0x82.  Solaris uses that identifier to allocate disk
	  space which is then further subdivided by the Solaris VTOC (Volume
	  Table of Contents) and Linux uses that id as the identifier for its
	  swap partition.
	
	  The new release of Solaris should be out early next year. Solaris
	  will begin using a partition id of 0xbf.  We will continue to support
	  the older partition id value of 0x82 for compatibility reasons.
	
	  Solaris's fdisk program has been enhanced to allow system administrators
	  to switch back and forth between the new and old identifier without any
	  loss of data.
	
	So, this may be useful to some people a few months from now.

<Andries.Brouwer@cwi.nl>
	[PATCH] remove explicit k_name use in atmel_cs.c, bt3c_cs.c

<gerg@snapgear.com>
	[PATCH] m68knommu: move ColdFire PIT timer to common code directory
	
	Move the PIT timer code from the 5282 specific platform directory
	to the common ColdFire platform code directory (5307). Freescale
	are using the PIT timer on other devices now (at least the 523x and
	527x families), so put it near the other common timer code so they
	can all use it easily.
	
	Signed-off-by: Greg Ungerer <gerg@snapgear.com>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<gerg@snapgear.com>
	[PATCH] m68knommu: new device support for ColdFire FEC ethernet driver
	
	A big update to the ColdFire FEC ethernet driver.
	This has been in the works for a while (and thus tested for
	a while too). Fundamentally through there is 3 important
	changes:
	
	. support 528x and 527x device families
	. allow for multiple FEC devices to be present (for example 2 on the 5274/5)
	. support the Kendein 8721 PHY
	
	Signed-off-by: Greg Ungerer <gerg@snapgear.com>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<gerg@snapgear.com>
	[PATCH] m68knommu: kernel startup code for Freescale M5271EVB board
	
	Kernel startup code specific to the Freescale M5271EVB board.
	
	Signed-off-by: Greg Ungerer <gerg@snapgear.com>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<gerg@snapgear.com>
	[PATCH] m68knommu: update defconfig
	
	Updated default configuration for the m68knommu architectures.
	Adds newly created CPU and clock configurations.
	
	Signed-off-by: Greg Ungerer <gerg@snapgear.com>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<gerg@snapgear.com>
	[PATCH] m68knommu: 527x platform support Makefile
	
	Makefile to support building the Freescale 527x platform support.
	
	Signed-off-by: Greg Ungerer <gerg@snapgear.com>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<gerg@snapgear.com>
	[PATCH] m68knommu: build PIT timer for 527x and 528x CPUs
	
	Build the PIT timer code in for 528x and 527x CPU targets.
	
	Signed-off-by: Greg Ungerer <gerg@snapgear.com>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<gerg@snapgear.com>
	[PATCH] m68knommu: use linux/delay.h instead of asm/delay.h
	
	Include linux/delay.h instead of asm/delay.h in ColdFire vector
	handling code.
	
	Signed-off-by: Greg Ungerer <gerg@snapgear.com>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<gerg@snapgear.com>
	[PATCH] m68knommu: get flash based boot args for SCALES and CAMcam boards
	
	Removed unused include of asm/delay.h.
	Add support for getting boot args from dedicated flash segment
	on the SCALES and CANcam boards.
	
	Signed-off-by: Greg Ungerer <gerg@snapgear.com>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<gerg@snapgear.com>
	[PATCH] m68knommu: dynamic RAM sizing for Motorola 5206e platform
	
	Determine the DRAM size dynamically for the MOTOROLA 5206e platform.
	We can just read back the SDRAM register configuration bits to 
	determine what the RAM size really is.
	
	Signed-off-by: Greg Ungerer <gerg@snapgear.com>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<gerg@snapgear.com>
	[PATCH] m68knommu: hardware configuration for Freescale 527x family of CPUs
	
	Create basic hardware configuration and setup code for the newly
	added Freescale 527x family of CPU's (5270/5271/5274/5275).
	
	Signed-off-by: Greg Ungerer <gerg@snapgear.com>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<sfrench@smft41.(none)>
	[CIFS] level 261 findfirst part 2
	
	Signed-off-by: Steve French (sfrench@us.ibm.com)

<gerg@snapgear.com>
	[PATCH] m68knommu: add kernel startup code for the Freescale M5275EVB board
	
	Add kernel startup code for the Freescale 5275EVB board.
	
	Signed-off-by: Greg Ungerer <gerg@snapgear.com>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<gerg@snapgear.com>
	[PATCH] m68knommu: move ColdFire 5282 config code to common 528x config code
	
	Move the ColdFire 5282 specific CPU configuration code into the common
	528x CPU platform directory. It can be used for all members of the
	528x CPU family.
	
	Signed-off-by: Greg Ungerer <gerg@snapgear.com>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<gerg@snapgear.com>
	[PATCH] m68knommu: move ColdFire 5282 Makefile to common 528x Makefile
	
	Move the ColdFire 5282 specific platform Makefile into the common
	528x CPU platform directory.
	
	Signed-off-by: Greg Ungerer <gerg@snapgear.com>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<gerg@snapgear.com>
	[PATCH] m68knommu: move ColdFire M5282EVB kernel startup code to common 528x platform directory
	
	Move the M5282EVB kernel startup code from the 5282 specific platform
	directory to a common 528x platform directory. All ColdFire 582x
	CPU cores are the same, just minor peripheral differences. Renaming
	the sub-directory to match the proper board name (M5282EVB), not
	use the generic MOTOROLA.
	
	Signed-off-by: Greg Ungerer <gerg@snapgear.com>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<gerg@snapgear.com>
	[PATCH] m68knommu: remove unused include of delay.h in ColdFire 5407 configuration code
	
	Remove unused include of asm/delay.h from ColdFire 5407 configuration
	code.
	
	Signed-off-by: Greg Ungerer <gerg@snapgear.com>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<gerg@snapgear.com>
	[PATCH] m68knommu: use correct register offsets for ColdFire 527x FEC ethernet
	
	The ColdFire 527x and 528x use the same FEC ethernet register offsets.
	Conditionally use the correct structure.
	
	Signed-off-by: Greg Ungerer <gerg@snapgear.com>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<gerg@snapgear.com>
	[PATCH] m68knommu: move ColdFire 5282 definitions to common 528x include
	
	Move the ColdFire 5282 specific register definitions into a common
	528x definition include. They can be used for all members of the
	528x CPU family.
	
	Signed-off-by: Greg Ungerer <gerg@snapgear.com>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<gerg@snapgear.com>
	[PATCH] m68knommu: add kernel startup code for the ColdFire 5272 Feith CANcam board
	
	Kernel startup code specific to the Coldfire 5272 based CANcam board.
	
	Signed-off-by: Greg Ungerer <gerg@snapgear.com>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<ysato@users.sourceforge.jp>
	[PATCH] H8/300 inline cleanup
	
	Eliminate useless clobber.
	
	Signed-off-by: Yoshinori Sato <ysato@users.sourceforge.jp>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<ysato@users.sourceforge.jp>
	[PATCH] H8/300 build error fix
	
	Because reference of fls becomes error.
	
	Signed-off-by: Yoshinori Sato <ysato@users.sourceforge.jp>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<ysato@users.sourceforge.jp>
	[PATCH] H8/300 vmlinux.lds update
	
	Signed-off-by: Yoshinori Sato <ysato@users.sourceforge.jp>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<ysato@users.sourceforge.jp>
	[PATCH] fix "extern inline"
	
	Signed-off-by: Yoshinori Sato <ysato@users.sourceforge.jp>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<herbert@gondor.apana.org.au>
	[IPV6]: Close small race in ip6_del_rt
	
	There is a small SMP race in ip6_del_rt where we maybe dereferencing a dst
	that has been freed.  This patch fixes it.
	
	Signed-off-by: Herbert Xu <herbert@gondor.apana.org.au>
	Signed-off-by: David S. Miller <davem@davemloft.net>

<kaber@trash.net>
	[PKT_SCHED]: Mark some functions static in tc actions/act_api
	
	Signed-off-by: Patrick McHardy <kaber@trash.net>
	Signed-off-by: David S. Miller <davem@davemloft.net>

<kaber@trash.net>
	[PKT_SCHED]: Fix scheduler/classifier module unload race.
	
	This patch fixes an scheduler/classifier module unload race.
	struct Qdisc_ops which includes the owner field is also part
	of the module's memory, so ops might already be freed when
	try_module_get(ops->owner) is called outside of the locked
	section.
	
	Signed-off-by: Patrick McHardy <kaber@trash.net>
	Signed-off-by: David S. Miller <davem@davemloft.net>

<arjan@infradead.org>
	[NET]: Mark __{lock,release}_sock() static.
	
	Signed-off-by: Arjan van de Ven <arjan@infradead.org>
	Signed-off-by: David S. Miller <davem@davemloft.net>

<ralf@linux-mips.org>
	[AX25]: Fix cb lookup
	
	Ax AX.25 connection is identified only by it's source and destination,
	not by the device it's routed through, so fix the connection block
	lookup to ignore the device of a connection.  This fixes dying connections
	in case of an AX.25 routing flap.
	
	Signed-off-by: David S. Miller <davem@davemloft.net>

<rusty@rustcorp.com.au>
	[NETFILTER]: Fix find_appropriate_src() to actually work.
	
	We try to bind to the same source port when sending packets from the
	same source IP/source port to the outside world.  Normally, this is
	simple, since we always try to keep the same source port anyway, but
	there are cases where that is not available.
	
	This is a requirement for the Kegel Peer-to-Peer NAT paper:
	
		http://alumnus.caltech.edu/~dank/peer-nat.html
	
	Unfortunately, our current implementation is useless.  It looks up a
	hash to see if this srcip/srcpt has been used, but instead of
	returning the mapping to use, it simply returns that same srcip/srcpt.
	This is clearly wrong.  As pointed out by Krisztian Kovacs.
	
	Also, we are no longer using the netfilter-special list iterators, so
	we can split src_cmp, in_range and the actual result manipulation for
	much clearer code.
	
	Signed-off-by: Rusty Russell <rusty@rustcorp.com.au>
	Signed-off-by: David S. Miller <davem@davemloft.net>

<kaber@trash.net>
	[PKT_SCHED]: Unline inner qdiscs immediately in qdisc_destroy()
	
	Before the RCU change distruction of the qdisc and all inner
	qdiscs happend immediately and under the rtnl semaphore. This
	made sure nothing holding the rtnl semaphore could end up with
	invalid memory. This is not true anymore, inner qdiscs found on
	dev->qdisc_list can be suddenly destroyed by the RCU callback.
	nothing can find them until they get destroyed.
	
	This also makes semantics sane again, an inner qdiscs should not
	be user-visible once the containing qdisc has been destroyed. The
	second part (locking in qdisc_lookup) is not really required, but
	currently the only purpose of qdisc_tree_lock seems to be to protect
	dev->qdisc_list, which is also protected by the rtnl. The rtnl is
	especially relied on for making sure nobody frees a qdisc while it
	is used in user-context, so qdisc_tree_lock looks unnecessary. I'm
	currently reviewing all qdisc locking, if this turns out to be right
	I will remove qdisc_tree_lock entirely in a follow-up patch, but for
	now I left it in for consistency.
	
	Signed-off-by: Patrick McHardy <kaber@trash.net>
	Signed-off-by: David S. Miller <davem@davemloft.net>

<yoshfuji@linux-ipv6.org>
	[IPV6] introduce lightweight IPv6 address comparison function.
	
	It is not optimal to use ipv6_addr_cmp() for simple address
	comparison, which checks if two addresses are equal.
	Based on idea from Dave Craig <dwcraig@qualcomm.com>.
	
	Signed-off-by: Hideaki YOSHIFUJI <yoshfuji@linux-ipv6.org>

<yoshfuji@linux-ipv6.org>
	[IPV6] Use ipv6_addr_equal() where appropriate.
	
	Signed-off-by: Hideaki YOSHIFUJI <yoshfuji@linux-ipv6.org>

<davem@nuts.davemloft.net>
	Cset exclude: herbert@gondor.apana.org.au|ChangeSet|20041110052404|08839

<aia21@cantab.net>
	NTFS: 2.1.22 - Many bug and race fixes and error handling improvements.
	
	- Cleanup fs/ntfs/aops.c::ntfs_{read,write}page() since we know that a
	  resident attribute will be smaller than a page which makes the code
	  simpler.  Also make the code more tolerant to concurrent ->truncate.
	
	Signed-off-by: Anton Altaparmakov <aia21@cantab.net>

<ben-linux@org.rmk.(none)>
	[ARM PATCH] 2225/1: S3C2410 - export symbol from s3c2440-dsc.c
	
	Patch from Ben Dooks
	
	Added symbol export to the file, and cleaned up the
	un-necessary include files
	
	Signed-off-by: Ben Dooks 
	Signed-off-by: Russell King

<nico@org.rmk.(none)>
	[ARM PATCH] 2154/2: XIP kernel for ARM
	
	Patch from Nicolas Pitre
	
	This patch allows for the kernel to be configured for XIP.
	A lot of people are using semi hacked up XIP patches already so
	it is a good idea to have a generic and clean implementation 
	supporting all ARM targets. The patch isn't too intrusive.
	
	It involves:
	
	- modifying the kernel entry code to map separate .text and .data
	  sections in the initial page table, as well as relocating
	  .data to ram when needed
	
	- modifying the linker script to account for the different VMA and
	  LMA for .data, as well as making sure that .init.data gets
	  relocated to ram
	
	- adding the final kernel mapping with a new MT_ROM mem type
	
	- distinguishing between XIP and non-XIP for bootmem and memory
	  resource declaration
	
	- and adding proper target handling to Makefiles.
	
	While at it, this also cleans up the kernel boot code a bit
	so the kernel can now be compiled for any address in ram,
	removing the need for a relation between kernel address and
	start of ram.  Also throws in some more comments.
	
	And finally the _text, _etext, _end and similar variables are now
	declared extern void instead of extern char, or even extern int.
	That allows for operations on their address directly without any
	cast, and trying to reference them by mistake would yield an 
	error which is a good thing.
	
	Tested both configurations: XIP and non XIP, the later 
	producing a kernel for execution from ram just as before.
	
	Signed-off-by: Nicolas Pitre 
	Signed-off-by: Russell King

<nico@org.rmk.(none)>
	[ARM PATCH] 2160/1: allow modules to work with XIP kernel
	
	Patch from Nicolas Pitre
	
	This should be applied on top of patch #2154/1.
	
	This maps the XIP kernel in the same virtual area as used for kernel
	modules instead of the previous arbitrary location.  Doing so has the
	advantage of having a well defined kernel address not conflicting
	with the different definitions for VMALLOC_END, as well as making
	modules loadable without any indirect long branch calls.  The work
	on XIPable MTD also requires this with code marked __xipram for the
	same reason.
	
	This of course reduces the space available for kernel modules from
	16MB to either 14MB or 12MB depending on the size of the resulting 
	kernel but that shouldn't be a real issue at all, given that the
	whole purpose behind XIP is to execute as much stuff from flash, 
	which is better achieved by compiling drivers in the kernel directly.
	
	Signed-off-by: Nicolas Pitre 
	Signed-off-by: Russell King

<dino@in.ibm.com>
	[PATCH] Fix do_wait race
	
	Only set the flag in the cases when the exit state is not either
	TASK_DEAD or TASK_ZOMBIE.
	
	(TASK_DEAD or TASK_ZOMBIE will either race or we'll return the 
	information, so no need to note them).
	
	I confirmed that this fixes the problem and I also ran some LTP tests
	
	Signed-off-by: Dinakar Guniguntala <dino@in.ibm.com>
	Signed-off-by: Sripathi Kodi <sripathik@in.ibm.com>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<tytso@mit.edu>
	[PATCH] Licencing of drivers/char/rocket.c
	
	On Tue, Nov 09, 2004 at 01:38:11PM -0600, Jason.Jorgensen@comtrol.com wrote:
	     On Tuesday, November 09, 2004 10:58 AM, Theodore Ts'o <tytso@mit.edu> wrote:
	    > I developed the Rocketport device driver under contract of Comtrol,
	    > with the understanding that the resulting device driver would be
	    > released under the GPL.  So I believe the correct way of resolving the
	    > conflicting copyright statements is to delete the following lines.
	    > 
	    > It would be good to get positive confirmation from Comtrol as well
	    > that this is their understanding as well. 
	   
	     You are absolutely correct. That notice slipped by us and should not be in
	     there. 
	   
	     If someone with access to the mainline source could remove that for us we
	     would appreciate it.
	
	Cc: Keith.Hammerbeck@comtrol.com, Steve.Erler@comtrol.com
	Acked-by: Jason.Jorgensen@comtrol.com
	Signed-off-by: "Theodore Ts'o" <tytso@thunk.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<chrisw@osdl.org>
	[PATCH] binfmt_elf: handle partial reads gracefully
	
	Make sure kernel reads full size of elf data.  Error out if mmap fails
	when mapping any sections of the executable.  Make sure interpreter
	string is NULL terminated. 
	
	Signed-off-by: Chris Wright <chrisw@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<len.brown@intel.com>
	Merge

<davidm@hpl.hp.com>
	[IA64] speedup ptrace by avoiding kernel-stack walk
	
	This patch changes the syscall entry path to store the
	current-frame-mask (CFM) in pt_regs->cr_ifs.  This just takes one
	extra instruction (a "dep" to clear the bits other than 0-37) and is
	free in terms of cycles.
	
	The advantage of doing this is that it lets ptrace() avoid having to
	walk the stack to determine the end of the user-level backing-store of
	a process which is in the middle of a system-call.  Since this is what
	strace does all the time, this speeds up strace quite a bit (by ~50%).
	More importantly, it makes the syscall vs. non-syscall case much more
	symmetric, which is always something I wanted.
	
	Note that the change to ivt.S looks big but this is just a rippling
	effect of instruction-scheduling to keep syscall latency the same.
	All that's really going on there is that instead of storing 0 into
	cr_ifs member we store the low 38 bits of ar.pfs.
	
	Signed-off-by: David Mosberger <davidm@hpl.hp.com>
	Signed-off-by: Tony Luck <tony.luck@intel.com>

<tlnguyen@snoqualmie.dp.intel.com>
	[PATCH] PCI: pci-mmconfig fix
	
	Here I have attached pci mmconfig fix for 2.6.9 kernel.
	
	This will fix the flush error in pci_mmcfg_write.
	
	When pci_mmcfg_write is used to program the PMCSR in the Power
	Management Capability structure of PCI config space in the PCI Express
	device to a different power state, the dummy readl to flush the previous
	write violates the transition delay specified in the PCI power
	management spec. Please see PCI Power Management Spec. 1.2 Table 5-6.
	For example, while changing the power state of the device through PMCSR
	register, a transition delay of 10msec is required before any access can
	be made to the device.
	
	Since the configuration write access for PCI Express is non posted,
	flushing is not necessary and  it will be safe to remove the dummy
	readl.
	
	This patch will remove dummy readl function implemented in
	"pci_mmcfg_write" and use set_fixmap_nocahe instead of set_fixmap.
	
	Signed-off-by: Sundarapandian Durairaj <sundarapandian.duraijai@intel.com>
	Signed-off-by: T. Long Nguyen <tom.l.nguyen@intel.com>
	Signed-off-by: Greg Kroah-Hartman <greg@kroah.com>

<hannal@us.ibm.com>
	[PATCH] zr36120.c: Convert pci_find_device to pci_dev_present
	
	--On Thursday, September 30, 2004 10:27:48 AM +0200 Gerd Knorr <kraxel@bytesex.org> wrote:
	>> The whole driver is CONFIG_BROKEN anyway... I only verified my changes
	>> didn't add new compiler errors. What part should I remove? Just this check?
	>
	> pci/quirks.c does these checks and sets the flags.
	> Replacing with a check for "pci_pci_problems & PCIPCI_TRITON" should do.
	>
	> bttv does simliar things in bttv_check_chipset() (bttv-cards.c),
	> you might want to have a look there ...
	>
	
	Thanks a lot for your help. Is this what you were thinking?
	
	Signed-off-by: Hanna Linder <hannal@us.ibm.com>
	Signed-off-by: Greg Kroah-Hartman <greg@kroah.com>

<hannal@us.ibm.com>
	[PATCH] ide.c: replace pci_find_device with pci_dev_present
	
	As pci_find_device is going away it needs to be replaced. In this case the dev
	returned from pci_find_device was not being used so pci_dev_present was the
	appropriate replacement.
	
	This has been compile and boot tested on a T22.
	
	Signed-off-by: Hanna Linder <hannal@us.ibm.com>
	Signed-off-by: Greg Kroah-Hartman <greg@kroah.com>

<hannal@us.ibm.com>
	[PATCH] scx200_wdt.c: replace pci_find_device with pci_dev_present
	
	Patch to replace the soon to be defunct pci_find_device with the
	new function pci_dev_present. I found 8 .c files (outside of /drivers/net)
	that used pci_find_device without the dev it returned. therefore it
	was replaceable with the new function.
	
	
	Signed-off-by: Hanna Linder <hannal@us.ibm.com>
	Signed-off-by: Greg Kroah-Hartman <greg@kroah.com>

<hannal@us.ibm.com>
	[PATCH] ibmphp_core.c: replace pci_get_device with pci_dev_present
	
	This can be converted to pci_dev_present as the dev returned is never used.
	Compile tested.
	
	Signed-off-by: Hanna Linder <hannal@us.ibm.com>
	Signed-off-by: Greg Kroah-Hartman <greg@kroah.com>

<len.brown@intel.com>
	[ACPI] handle out of spec EC bit width
	http://bugzilla.kernel.org/show_bug.cgi?id=1744
	
	Signed-off-by: Luming Yu <luming.yu@intel.com>
	Signed-off-by: Len Brown <len.brown@intel.com>

<len.brown@intel.com>
	[ACPI] migrate to seq_file() interface
	http://bugzilla.kernel.org/show_bug.cgi?id=3333
	
	Signed-off-by: David Shaohua Li <shaohua.li@intel.com>
	Signed-off-by: Len Brown <len.brown@intel.com>

<len.brown@intel.com>
	[ACPI] automatic workaround for NFORCE timer-override BIOS bug
	http://bugzilla.kernel.org/show_bug.cgi?id=3551
	
	Signed-off-by: Andi Kleen <ak@suse.de>
	Signed-off-by: Len Brown <len.brown@intel.com>

<len.brown@intel.com>
	[ACPI] clean up the NFORCE BIOS bug workaround
	delete now obsolete dmi_scan entries
	fix build for ACPI & !IOAPIC
	
	Signed-off-by: Len Brown <len.brown@intel.com>

<fenghua.yu@intel.com>
	[IA64] add cpu_relax() in the body of spin loops
	
	This patch adds cpu_relax() in the body of spin loops in
	smp_call_function(), smp_call_function_single(), and
	ia64_mca_wakeup_ipi_wait().
	
	Signed-off-by: Fenghua Yu <fenghua.yu@intel.com>
	Signed-off-by: Tony Luck <tony.luck@intel.com>

<len.brown@intel.com>
	[ACPI] fix warnings for 64-bit video build (Luming Yu)

<len.brown@intel.com>
	Cset exclude: torvalds@ppc970.osdl.org|ChangeSet|20041111002817|28673
	Cset exclude: acme@conectiva.com.br[torvalds]|ChangeSet|20041111002501|29509

<akpm@osdl.org>
	[PATCH] netpoll: fix null ifa_list pointer dereference
	
	This fixes a bug where netpoll can dereference a null ifa_list pointer when
	not supplied an IP address at module load and the interface is up but no IP
	is configured.
	
	Bonus: unrelated netif_running cleanup
	
	Signed-off by: Jeff Moyer <jmoyer@redhat.com>
	Signed-off by: Matt Mackall <mpm@selenic.com>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Jeff Garzik <jgarzik@pobox.com>

<akpm@osdl.org>
	[PATCH] E1000 stop working after resume
	
	Obviously pci_enable_device should be called after pci_restore_state.
	
	Signed-off-by: Li Shaohua <shaohua.li@intel.com>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Jeff Garzik <jgarzik@pobox.com>

<akpm@osdl.org>
	[PATCH] ixgb: fix ixgb_intr looping checks
	
	This patch undoes a change that we believe will impact performance
	adversely, by creating possibly too long a delay between servicing
	completions.  The comment pretty much explains it.  We need to call both
	cleanup routines each pass through the loop, this time we have a comment
	explaining why.
	
	Signed-off-by: Jesse Brandeburg <jesse.brandeburg@intel.com>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Jeff Garzik <jgarzik@pobox.com>

<akpm@osdl.org>
	[PATCH] Fix for 802.3ad shutdown issue
	
	The patch below fixes a problem with shutting down 802.3ad bonds on the 2.6
	kernel.  Taking the interface down or removing the module causes a stack
	dump if spinlock debugging is enabled.  This patch was generated from the
	2.6.9 kernel.
	
	This patch has been peer reviewed by our Linux software engineering team,
	and the fix has been verified by our test labs.
	
	Signed-off-by: Mitch Williams <mitch.a.williams@intel.com>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Jeff Garzik <jgarzik@pobox.com>

<matthew@wil.cx>
	[PATCH] compat syscalls naming standardisation
	
	On PA-RISC, we have a unified syscall table for 32 and 64 bit that uses
	macros to generate the appropriate syscall names (native vs compat).  For
	this to work, we need consistent compat syscall names.  Unfortunately, some
	recent additions drop the 'sys_'.
	
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<jbarnes@engr.sgi.com>
	[PATCH] remove contention on profile_lock
	
	profile_hook unconditionally takes a read lock on profile_lock if kernel
	profiling is enabled.  The lock protects the profile_hook notifier chain
	from being written while it's being called.  The routine profile_hook is
	called in a very hot path though: every timer tick on every CPU.  As you
	can imagine, on a large system, this makes the cacheline containing
	profile_lock pretty hot.  Since oprofile was the only user of the
	profile_hook, I removed the notifier chain altogether in favor of a simple
	function pointer with the help of John Levon.  This removes all of the
	contention in the hot path since the variable is very seldom written and
	simplifies things a little to boot.
	
	Acked-by: John Levon <levon@movementarian.org>
	Signed-off-by: Jesse Barnes <jbarnes@sgi.com>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<suparna@in.ibm.com>
	[PATCH] Fix O_SYNC speedup for generic_file_write_nolock
	
	The O_SYNC speedup patches missed the generic_file_xxx_nolock cases, which
	means that pages weren't actually getting sync'ed in those cases.  This
	patch fixes that. 
	
	Signed-off-by: Suparna Bhattacharya <suparna@in.ibm.com>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<mgreer@mvista.com>
	[PATCH] ppc32: add setup_indirect_pci_nomap() routine
	
	This patch adds a routine that sets up indirect pci config space access but
	doesn't ioremap the config space addr/data registers.
	
	Signed-off-by: Mark Greer <mgreer@mvista.com>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<galak@somerset.sps.mot.com>
	[PATCH] ppc32: dded MPC8555/8541 security block infrastructure
	
	This patch adds OCP, interrupt, and memory offset details for the security
	block on MPC8555/8541 to support drivers.
	
	Signed-off-by: Kumar Gala <kumar.gala@freescale.com>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<galak@somerset.sps.mot.com>
	[PATCH] ppc32: fix rheap warning
	
	Here is patch that fixes a compile warning with rheap
	
	Signed-off-by: Kumar Gala <kumar.gala@freescale.com>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<galak@somerset.sps.mot.com>
	[PATCH] ppc32: updated reporting of CPU rev & freq for e500 CPUs
	
	Fixes up the reporting of the e500 core revision.  Additionally, it changes
	the reporting of CPU frequency to match what other PPC systems do.
	
	Signed-off-by: Kumar Gala <kumar.gala@freescale.com>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<galak@somerset.sps.mot.com>
	[PATCH] ppc32: add performance counters to cpu_spec
	
	Adds the number of performance monitor counters each PowerPC processor has
	to the cpu table.  Makes oprofile support a bit cleaner since we dont need
	a case statement on processor version to determine the number of counters.
	
	Signed-off-by: Kumar Gala <kumar.gala@freescale.com>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<mgreer@mvista.com>
	[PATCH] ppc32: remove CONFIG_SERIAL_CONSOLE_BAUD
	
	No longer needed.
	
	Signed-off-by: Mark Greer <mgreer@mvista.com>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<paulus@samba.org>
	[PATCH] Update ppc list addresses in MAINTAINERS
	
	The linuxppc mailing lists that were at lists.linuxppc.org have moved to
	ozlabs.org.  This patch updates the MAINTAINERS file to reflect that.
	
	Signed-off-by: Paul Mackerras <paulus@samba.org>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<galak@somerset.sps.mot.com>
	[PATCH] ppc32: remove __setup_cpu_8xx
	
	Remove __setup_cpu_8xx and its initialization in cpu_specs table since it
	hasn't every done anything.  This is at Tom Rini's suggestion.
	
	Signed-off-by: Kumar Gala <kumar.gala@freescale.com>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<galak@somerset.sps.mot.com>
	[PATCH] ppc32: remove zero initializations in cpu_specs
	
	Remove initializations to zero in cpu_specs table at Tom Rini's suggestion.
	
	Signed-off-by: Kumar Gala <kumar.gala@freescale.com>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<sfr@canb.auug.org.au>
	[PATCH] ppc64: iSeries combine some MF code
	
	This patch just moves mf_proc.c into mf.c inanticipation of more cleanup to
	come.  So mf_proc.c ceases to exist
	
	Signed-off-by: Stephen Rothwell <sfr@canb.auug.org.au>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<sfr@canb.auug.org.au>
	[PATCH] ppc64: iSeries remove trailing white space
	
	Nothing more than removing trailing white space from mf.c.
	
	Signed-off-by: Stephen Rothwell <sfr@canb.auug.org.au>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<sfr@canb.auug.org.au>
	[PATCH] ppc64: iSeries remove some Studly Caps
	
	This patch changes the externally referenced names in mf.c to not use Study
	Caps and removes a couple of no longer used functions.
	
	Signed-off-by: Stephen Rothwell <sfr@canb.auug.org.au>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<sfr@canb.auug.org.au>
	[PATCH] ppc64: iSeries more MF cleanup
	
	This patch starts the improvement of the style of the MF code:
		- remove a union that is used where casts suffice
		- add a helper function (signal_ce_msg_simple) and use it
		- replace some painful code that converts a byte array to
		  a couple of u32's and then shifts and masks the bytes back out.
	
	Signed-off-by: Stephen Rothwell <sfr@canb.auug.org.au>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<sfr@canb.auug.org.au>
	[PATCH] ppc64: iSeries remove more Studly Caps from MF code
	
	Signed-off-by: Stephen Rothwell <sfr@canb.auug.org.au>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<sfr@canb.auug.org.au>
	[PATCH] ppc64: iSeries last of the cleanups fo the MF code
	
	This last patch is a bit if a mess because it mainly consists of combining
	some single use small functions into their callers and rearranging some other
	code.
	
	Some intermediate variables are introduced and some code is restructured to
	improve its readablility (and hopefully maintainability).
	
	Overall there are no semantic changes.
	
	Signed-off-by: Stephen Rothwell <sfr@canb.auug.org.au>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<anton@samba.org>
	[PATCH] ppc64: Bump MAX_HWIFS in IDE code
	
	When fully configured, some POWER5 boxes can have much more than 4 IDE
	interfaces.  Increase the limit to reflect this.
	
	Signed-off-by: Anton Blanchard <anton@samba.org>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<anton@samba.org>
	[PATCH] ppc64: Fix for cpu hotplug + NUMA
	
	It was possible to hotplug add a new cpu that was larger than numnode.
	This meant we had a cpu with a node id that didnt have any NODE_DATA()
	backing it.
	
	The following patch catches this in numa_setup_cpu and forces the node to
	0.  We also make a pass through all cpus at boot to look for the maximum
	node id - this catches the case at boot.  As for hotplug, since the node
	doesnt have any memory backing it (otherwise the node would have been
	onlined) then we can assume the machine isnt configured for performance and
	just force the cpu into node 0.
	
	Signed-off-by: Anton Blanchard <anton@samba.org>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<anton@samba.org>
	[PATCH] ppc64: Small OF fixes
	
	A few small fixes:
	
	- Check for the model property before using it. Also check for the
	  correct property name for nighthawk.
	- Check for the existence of freeze-time-base before using it to
	  synchronize timebases instead of making it conditional on !LPAR
	
	Signed-off-by: Anton Blanchard <anton@samba.org>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<dhowells@redhat.com>
	[PATCH] fix page size assumption in fork()
	
	The attached patch fixes fork to get rid of the assumption that THREAD_SIZE
	>= PAGE_SIZE (on the FR-V the smallest available page size is 16KB).
	
	Signed-Off-By: David Howells <dhowells@redhat.com>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<dhowells@redhat.com>
	[PATCH] EXT3 compiler warning fix
	
	The attached patch fixes an uninitialised variable warning in ext3.  The
	compiler is wrong in this case because it can't analyse the code sufficiently.
	
	Signed-Off-By: David Howells <dhowells@redhat.com>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<dhowells@redhat.com>
	[PATCH] Make /proc/kcore conditional on CONFIG_MMU
	
	The attached patch makes the presence of /proc/kcore conditional on CONFIG_MMU
	being configured on.
	
	Signed-Off-By: David Howells <dhowells@redhat.com>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<pluto@pld-linux.org>
	[PATCH] x86: optimize stack pointer access (reduce register usage)
	
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<akpm@osdl.org>
	[PATCH] x86_64: ia32_aout-build-fix
	
	arch/x86_64/ia32/ia32_aout.c: In function `load_aout_binary':
	arch/x86_64/ia32/ia32_aout.c:400: error: `IA32_STACK_TOP' undeclared (first use in this function)
	
	Cc: <ak@muc.de>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<mikael.starvik@axis.com>
	[PATCH] CRIS: configuration and Build
	
	Configuration and build updates for 2.6.9.
	
	Signed-off-by: Mikael Starvik <starvik@axis.com>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<mikael.starvik@axis.com>
	[PATCH] CRIS: update simple drivers
	
	Updates for 2.6.9 in basic character based drivers.
	
	Signed-off-by: Mikael Starvik <starvik@axis.com>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<mikael.starvik@axis.com>
	[PATCH] CRIS: ethernet driver
	
	Use generic MII interface.
	
	Signed-off-by: Mikael Starvik <starvik@axis.com>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<mikael.starvik@axis.com>
	[PATCH] CRIS: IDE driver
	
	Updated IDE driver for Linux 2.6.9.
	
	Signed-off-by: Mikael Starvik <starvik@axis.com>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<mikael.starvik@axis.com>
	[PATCH] CRIS: Add USB host driver
	
	USB host driver for CRIS.
	
	Signed-off-by: Mikael Starvik <starvik@axis.com>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<mikael.starvik@axis.com>
	[PATCH] CRIS: Core kernel updates
	
	Added profiler.
	Optimized MMU refill handling.
	Improved multiple interrupt handling.
	
	Signed-off-by: Mikael Starvik <starvik@axis.com>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<mikael.starvik@axis.com>
	[PATCH] CRIS: Console setup handling
	
	Handled console setup arguments on kernel command line.
	
	Signed-off-by: Mikael Starvik <starvik@axis.com>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<mikael.starvik@axis.com>
	[PATCH] CRIS: Move drivers
	
	Move drivers from arch/cris/arch-v10/drivers/ to drivers/.
	
	Signed-off-by: Mikael Starvik <starvik@axis.com>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<mikael.starvik@axis.com>
	[PATCH] CRIS: Update Makefiles
	
	Update Makefiles under drivers/ to compile CRIS drivers.
	
	Signed-off-by: Mikael Starvik <starvik@axis.com>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<mikael.starvik@axis.com>
	[PATCH] CRIS: Update MAINTAINERS
	
	Changed maintainer for CRIS architecture to Mikael Starvik.
	
	Signed-off-by: Mikael Starvik <starvik@axis.com>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<blaisorblade_spam@yahoo.it>
	[PATCH] uml: use sys_getpid bypassing glibc (fixes UML on Gentoo)
	
	From: Bodo Stroesser <bstroesser@fujitsu-siemens.com>,
	      Paolo 'Blaisorblade' Giarrusso <blaisorblade_spam@yahoo.it>
	Cc: Ulrich Drepper <drepper@redhat.com>
	
	Using NPTL, getpid() sometimes delivers the wrong pid, since it uses the
	one buffered in TLS from previous calls.  This buffered pid isn't
	discarded, when a child is created by a clone().
	
	So, as a workaround, UML should use a direct kernel call to bypass the lib.
	
	Also, I (Paolo) went replacing all remaining calls of getpid() with
	os_getpid(), to make sure they use the syscall and not the normal glibc
	definition.
	
	Signed-off-by: Bodo Stroesser <bstroesser@fujitsu-siemens.com>
	Signed-off-by: Paolo 'Blaisorblade' Giarrusso <blaisorblade_spam@yahoo.it>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<seto.hidetoshi@jp.fujitsu.com>
	[PATCH] futex_wait hang fix
	
	NPTL has 3 control counters (total/wake/woken).
	so NPTL can know:
	  "how many threads enter to wait"(total),
	  "how many threads receive wake signal"(wake),
	  and "how many threads exit waiting"(woken).
	
	Abstraction of pthread_cond_wait and pthread_cond_signal are:
	
	A01 pthread_cond_wait {
	A02   timeout = 0;
	A03   lock(counters);
	A04     total++;
	A05     val = get_from(futex);
	A06   unlock(counters);
	A07
	A08   sys_futex(futex, FUTEX_WAIT, val, timeout);
	A09
	A10   lock(counters);
	A11     woken++;
	A12   unlock(counters);
	A13 }
	
	B01 pthread_cond_signal {
	B02   lock(counters);
	B03   if(total>wake) { /* if there is waiter */
	B04     wake++;
	B05     update_val(futex);
	B06     sys_futex(futex, FUTEX_WAKE, 1);
	B07   }
	B08   unlock(counters);
	B09 }
	
	What we have to notice is:
	    FUTEX_WAKE could be called before FUTEX_WAIT have called (at A07).
	In such case, FUTEX_WAKE will fail if there is no thread in waitqueue.
	
	However, since pthread_cond_signal do not only wake++ but also
	update_val(futex), next FUTEX_WAIT will fail with -EWOULDBLOCK because the val
	passed to WAIT is now not equal to updated val.  Therefore, as the result, it
	seems that the WAKE wakes the WAIT.
	
	===
	
	The bug will appear if 2 pair of wait & wake called at (nearly)once:
	
	   * Assume 4 threads, wait_A, wait_B, wake_X, and wake_Y
	   * counters start from [total/wake/woken]=[0/0/0]
	   * the val of futex starts from (0), update means inclement of the val.
	   * there is no thread in waitqueue on the futex.
	
	[simulation]
	
	wait_A: calls pthread_cond_wait:
	    total++, prepare to call FUTEX_WAIT with val=0.
	    # status: [1/0/0] (0) queue={}(empty) #
	
	wake_X: calls pthread_cond_signal:
	    no one in waitqueue, just wake++ and update futex val.
	    # status: [1/1/0] (1) queue={}(empty) #
	
	wait_B: calls pthread_cond_wait:
	    total++, prepare to call FUTEX_WAIT with val=1.
	    # status: [2/1/0] (1) queue={}(empty) #
	
	wait_A: calls FUTEX_WAIT with val=0:
	    after queueing, compare val. 0!=1 ... this should be blocked...
	    # status: [2/1/0] (1) queue={A} #
	
	wait_B: calls FUTEX_WAIT with val=1:
	    after queueing, compare val. 1==1 ... OK, let's schedule()...
	    # status: [2/1/0] (1) queue={A,B} (B=sleeping) #
	
	wake_Y: calls pthread_cond_signal:
	    A is in waitqueue ... dequeue A, wake++ and update futex val.
	    # status: [2/2/0] (2) queue={B} (B=sleeping) #
	
	wait_A: end of FUTEX_WAIT with val=0:
	    try to dequeue but already dequeued, return anyway.
	    # status: [2/2/0] (2) queue={B} (B=sleeping) #
	
	wait_A: end of pthread_cond_wait:
	    woken++.
	    # status: [2/2/1] (2) queue={B} (B=sleeping) #
	
	This is bug:
	   wait_A: wakeup
	   wait_B: sleeping
	   wake_X: wake A
	   wake_Y: wake A again
	
	if subsequent wake_Z try to wake B:
	
	wake_Z: calls pthread_cond_signal:
	    since total==wake, do nothing.
	    # status: [2/2/1] (2) queue={B} (B=sleeping) #
	
	If wait_C comes, B become to can be woken, but C...
	
	This bug makes the waitqueue to trap some threads in it all time.
	
	====
	
	>  - According to man of futex:
	>      "If the futex was not equal to the expected value, the operation
	>       returns -EWOULDBLOCK."
	>    but now, here is no description about the rare case:
	>      "returns 0 if the futex was not equal to the expected value, but
	>       the process was woken by a FUTEX_WAKE call."
	>    this behavior on rare case causes the hang which I found.
	
	So to avoid this problem, my patch shut up the window that you said:
	
	 > The patch certainly looks sensible - I can see that without the patch,
	 > there is a window in which this process is pointlessly queued up on the
	 > futex and that in this window a wakeup attempt might do a bad thing.
	
	=====
	
	In short:
	There is an un-documented behavior of futex_wait. This behavior misleads
	NPTL to wake a thread doubly, as the result, causes an application hang.
	
	Signed-off-by: Hidetoshi Seto <seto.hidetoshi@jp.fujitsu.com>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<kolya@MIT.EDU>
	[PATCH] ext3 umount hang
	
	When an ext3 partition is mounted and then quickly unmounted, the journal
	thread never gets around to checking the JFS_UNMOUNT flag (it immediately
	goes into a loop waiting for a new sequence number), causing the umount
	process to hang in journal_kill_thread().
	
	The problem can be easily reproduced by roughly the following steps:
	
		dd if=/dev/zero of=/tmp/qf bs=1024k count=10
		yes | mke2fs -j /tmp/qf
		losetup /dev/loop0 /tmp/qf
		mkdir /mnt/qf
		mount -t ext3 /dev/loop0 /mnt/qf ; umount /mnt/qf
	
	The patch below moves the check for JFS_UNMOUNT to the beginning of the
	journal thread loop, thereby preventing this race condition.
	
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<breuerr@mc.net>
	[PATCH] sparc32: fix for HyperSPARC DMA errors
	
	I found a solution for the HyperSPARC DMA problems in 2.6.  This allows my
	SS20 with HyperSPARCs to boot to single user.  It's not efficient, but I
	hope it points out whats needed for a proper fix.  Seems that the iotlb
	entries need to flushed to ram or uncached since the iommu changes between
	2.5.60 and 2.5.70.
	
	The second part seems to be needed to allow consistent sbus dma mappings to
	be cached on HyperSPARC.  I have also tested this change on 2.4.27 with no
	noticeable difference.
	
	Acked-by: William Irwin <wli@holomorphy.com>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<green@linuxhacker.ru>
	[PATCH] "Bad" naming of structures and functions in ext3 reservation code
	
	The patch below renames struct reserve_window_node* and rsv_window_add()
	function to struct ext3_reserve_window_node* and ext3_rsv_window_add().
	
	This eases the task of having several ext3-derived filesystem drivers (with
	different capabilities) in kernel.
	
	
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<okir@suse.de>
	[PATCH] statfs compat functions can return EOVERFLOW on NFS
	
	A while ago, we fixed a problem in statfs on 64bit system that caused it
	to return EOVERFLOW when the number of files reported by the underlying
	file system was -1 (which happens for NFS for instance). The problematic
	code was this:
	
	        if (sizeof ubuf->f_blocks == 4) {
	                if ((kbuf->f_blocks | kbuf->f_bfree |
	                     kbuf->f_bavail | kbuf->f_files | kbuf->f_ffree) &
	                    0xffffffff00000000ULL)
	                        return -EOVERFLOW;
			...
		}
	
	The problem was fixed by explicitly allowing f_files and f_ffree to be -1.
	
	The same problem exists in fs/compat.c, and the attached patch fixes it
	in a similar manner.
	
	Signed-Off-By: Olaf Kirch <okir@suse.de>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<trini@kernel.crashing.org>
	[PATCH] Fix CPM2 uart driver device number brain damage
	
	The following patch against 2.6.10-rc1 fixes the brain damage that was
	found in the CPM2 uart driver.  Previously, if 8250 was configured in, it
	would use one set of numbers (which at the time didn't conflict with
	anything, but have since been officially given to the Motorola i.MX driver)
	and if 8250 wasn't in, it would masquerade as it.  The following switches
	us over to 204/46...49 (Which is still unclaimed).
	
	Signed-off-by: Tom Rini <trini@kernel.crashing.org>
	Cc: <rmk@arm.linux.org.uk>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<kraxel@bytesex.org>
	[PATCH] v4l: yet another video-buf interface update
	
	This is one more interface fix for the video-buf.c module, the first
	attempt on that wasn't that clever.  Instead of passing the driver private
	data through all function calls I've just made that an element of the
	videobuf_queue struct which is passed around everythere _anyway_.
	
	That removes some reduncancy, should be less error prone and gain me some
	points on rusty's interface design scala ;)
	
	It also fixes the tvtime crashes which where caused by overviewing one
	place to fixup in the first attempt.
	
	Signed-off-by: Gerd Knorr <kraxel@bytesex.org>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<kraxel@bytesex.org>
	[PATCH] v4l: add video-buf-dvb.c
	
	Adds a new helper module for simple dvb budget cards without hardware
	filtering capabilities (which just pass the complete transport stream via
	DMA and let the dvb core sort everything else).  Will initially be used by
	saa7134 + cx88 drivers.
	
	Signed-off-by: Gerd Knorr <kraxel@bytesex.org>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<kraxel@bytesex.org>
	[PATCH] v4l: bttv update
	
	This is an update for the bttv driver, changes:
	
	  * adapt to video-buf changes.
	  * convert to new-style insmod options.
	  * drop some obsolete junk.
	
	Signed-off-by: Gerd Knorr <kraxel@bytesex.org>
	Signed-off-by: Adrian Bunk <bunk@stusta.de>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<kraxel@bytesex.org>
	[PATCH] v4l: saa7134 update
	
	This is a update for the saa7134 driver, changes:
	
	 * adapt to the video-buf changes.
	 * add new cards.
	 * split mpeg encoder card support to separare module
	   (saa7134-empress), as preparation for the dvb support
	   which also uses the MPEG capabilities of the card.
	 * started working on dvb support (not functional yet, also
	   marked 'BROKEN').
	 * convert insmod options to new-style.
	
	The patch also removes all trailing whitespaces.  I've a script to remove
	them from my sources now, that should kill those no-op whitespace changes
	in my patches after merging this initial cleanup.
	
	Signed-off-by: Gerd Knorr <kraxel@bytesex.org>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<kraxel@bytesex.org>
	[PATCH] v4l: cx88 update
	
	This is a cx88 driver update, changes:
	
	 * adapt to video-buf changes.
	 * add support for a new card.
	 * use the new video-buf-dvb module.
	
	The dvb stuff doesn't build yet as it depends on some cutting-edge code
	from the linuxtv cvs and is tagged as 'BROKEN' because of that.
	
	The patch also removes all trailing whitespaces.  I've a script to remove
	them from my sources now, that should kill those no-op whitespace changes
	in my patches after merging this initial cleanup.
	
	Signed-off-by: Gerd Knorr <kraxel@bytesex.org>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<kraxel@bytesex.org>
	[PATCH] v4l: saa7146 update
	
	Adapt saa7134 driver to video-buf changes.
	
	Signed-off-by: Gerd Knorr <kraxel@bytesex.org>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<kraxel@bytesex.org>
	[PATCH] v4l: tuner modparam
	
	Convert leftover insmod options to new-style.
	
	Signed-off-by: Gerd Knorr <kraxel@bytesex.org>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<kraxel@bytesex.org>
	[PATCH] v4l: ir-common modparam
	
	Convert the ir-common module to new-style insmod options.
	
	Signed-off-by: Gerd Knorr <kraxel@bytesex.org>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<kraxel@bytesex.org>
	[PATCH] v4l: v4l1-compat modparam
	
	Convert v4l1-compat module to new-style insmod options.
	
	Signed-off-by: Gerd Knorr <kraxel@bytesex.org>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<kraxel@bytesex.org>
	[PATCH] v4l: msp3400 fix
	
	Fix for the msp3400 module: make the initial carrier scan (after loading
	the driver) work.
	
	Signed-off-by: Gerd Knorr <kraxel@bytesex.org>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<kraxel@bytesex.org>
	[PATCH] media/video/bw-qcam.c: remove an unused function
	
	The patch below removes an unused function from media/video/bw-qcam.c
	
	Signed-off-by: Adrian Bunk <bunk@stusta.de>
	Signed-off-by: Gerd Knorr <kraxel@bytesex.org>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<axboe@suse.de>
	[PATCH] direct-IO: handle EOF
	
	The direct-io code currently returns -EIO if someone tries to read past the
	end of a block device.  Change it to shorten the read and to return the
	number of bytes which were actually read.
	
	Signed-off-by: Jens Axboe <axboe@suse.de>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<adaplas@hotpop.com>
	[PATCH] fbdev: Fix IO access in rivafb (part 2)
	
	Convert direct pointer manipulation to NV_RD*/NV_WR* in nv_driver.c
	
	Signed-off-by: Antonino Daplas <adaplas@pol.net>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<adaplas@hotpop.com>
	[PATCH] fbdev: Fix mode handling in rivafb if with no EDID
	
	The current code in rivafb will not accept modes other than 640x480-60 if
	the the EDID block is absent.
	
	This patch changes the behavior to the opposite, if without an EDID, rivafb
	will accept all modelines coming from userspace (2.4 behavior).
	
	Signed-off-by: Antonino Daplas <adaplas@pol.net>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<adaplas@hotpop.com>
	[PATCH] fbdev: Use soft_cursor in i810fb
	
	The hardware cursor implementation in i810fb broke sometime during 2.6. 
	Until this is fixed, temporarily use soft_cursor().
	
	Signed-off-by: Antonino Daplas <adaplas@pol.net>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<adaplas@hotpop.com>
	[PATCH] fbdev: Set color depth to 8 if in pseudocolor in vesafb.
	
	Set color depth to 8 if in pseudocolor in vesafb.  The CLUT size,
	previously saved as {red|green|blue}.length, is now private to vesafb.
	
	Signed-off-by: Antonino Daplas <adaplas@pol.net>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<adaplas@hotpop.com>
	[PATCH] fbcon: Split set_con2fb_map()
	
	The function set_con2fb_map() is getting very big.  Split it into its
	component functions.
	
	Signed-off-by: Antonino Daplas <adaplas@pol.net>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<adaplas@hotpop.com>
	[PATCH] fbdev: Introduce FB_BLANK_* constants
	
	The VESA_* constants in fb.h used for power management of the display is
	confusing to use.  The constants seems to be meant for userspace, because
	within the kernel (vt and fbdev), the constants have to be incremented by
	1.  Implementation of fb_blank() varies from driver to driver:
	
	- if-else on blank/!blank
	
	- switch case on hardcoded numbers
	
	- switch case on the constants + 1
	
	- switch -1, case  on constants as is
	
	- switch case on the constants as is (broken)
	
	To make usage clearer, new constants are defined in fb.h:
	
	FB_BLANK_UNBLANK  = VESA_UNBLANKING = 0;
	FB_BLANK_NORMAL = VESA_UNBLANKING + 1 = 1;
	FB_BLANK_VSYNC_SUSPEND = VESA_VSYNC_SUSPEND + 1 = 2;
	FB_BLANK_HSYNC_SUSPEND = VESA_HSYNC_SUSPEND + 1 = 3;
	FB_BLANK_POWERDOWN = VESA_POWERDOWN + 1 = 4;
	
	Other changes:
	
	- generic blanking code in fbcon.c (for drivers without an fb_blank hook)
	  which either sets the palette to all black, or clear the screen with
	  black.
	
	- make fb_display an unexportable symbol
	
	Signed-off-by: Antonino Daplas <adaplas@pol.net>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<adaplas@hotpop.com>
	[PATCH] fbdev: Convert drivers to use the new FB_BLANK_* constants
	
	This patch converts most drivers to use the new FB_BLANK_* constants.
	These drivers have correct fb_blank() implementations.
	
	Signed-off-by: Antonino Daplas <adaplas@pol.net>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<adaplas@hotpop.com>
	[PATCH] fbdev: Fix broken fb_blank() implementation.
	
	This patch fixes some of the drivers' fb_blank() implementation which got
	the usage of the VESA_* constants incorrectly and converts them to use the
	new FB_BLANK-* constants.
	
	I'm not sure if what I did is correct for all drivers, so maintainers,
	please review.
	
	(Note: For most of the drivers, FB_BLANK_NORMAL is treated as
	FB_BLANK_UNBLANK, but returns a nonzero so fbcon will do a soft_blank).
	
	Signed-off-by: Antonino Daplas <adaplas@pol.net>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<neilb@cse.unsw.edu.au>
	[PATCH] md: fix problem with md/linear for devices larger than 2 terabytes
	
	Some size fields were "int" instead of "sector_t".
	
	Signed-off-by: Neil Brown <neilb@cse.unsw.edu.au>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<neilb@cse.unsw.edu.au>
	[PATCH] md: fix raid6 problem
	
	Sometimes it didn't read all (working) drives before a parity calculation.
	
	Signed-off-by: Neil Brown <neilb@cse.unsw.edu.au>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<neilb@cse.unsw.edu.au>
	[PATCH] md: delete unplug timer before shutting down md array
	
	As the unplug timer can potentially fire at any time, and and it access
	data that is released by the md ->stop function, we need to del_timer_sync
	before releasing that data.
	
	(After much discussion, we created blk_sync_queue() for this)
	
	Signed-off-by: Neil Brown <neilb@cse.unsw.edu.au>
	Contributions from Jens Axboe <axboe@suse.de>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<neilb@cse.unsw.edu.au>
	[PATCH] md: "Faulty" personality
	
	The 'faulty' personality provides a layer over any block device in which
	errors may be synthesised.
	
	A variety of errors are possible including transient and persistent read
	and write errors, and read errors that persist until the next write.
	
	There error mode can be changed on a live array.
	
	Accessing this personality requires mdadm 2.8.0 or later.
	
	Signed-off-by: Neil Brown <neilb@cse.unsw.edu.au>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<James4765@gmail.com>
	[PATCH] md: Documentation/md.txt update
	
	Updates to Documentation/md.txt - included some extra info I found out
	while digging deeper into init/do_mounts_md.c
	
	Signed-off-by: James Nelson <James4765@gmail.com>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<rddunlap@osdl.org>
	[PATCH] convert MODULE_PARM() to module_param() family
	
	Convert MODULE_PARM() to module_param().
	
	Signed-off-by: Randy Dunlap <rddunlap@osdl.org>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<rddunlap@osdl.org>
	[PATCH] more MODULE_PARM conversions
	
	Convert MODULE_PARM() to module_param().
	
	Signed-off-by: Randy Dunlap <rddunlap@osdl.org>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<domen@coderock.org>
	[PATCH] lib/parser: fix %% parsing
	
	Code looks like it intended to parse "%%" in pattern string as "%".  Fix
	it, so it really does that.
	
	Compile and run tested.
	
	Signed-off-by: Domen Puncer <domen@coderock.org>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<arjan@infradead.org>
	[PATCH] make cdev_get static, unexport
	
	- cdev_get is only used in fs/char_dev.c; move it up, make it static and
	  unexport it.
	
	- cdev_put is used in one more place (fs/file_table.c) but never in
	  modules; unexport it.
	
	Signed-off-by: Arjan van de Ven <arjan@infradead.org>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<arjan@infradead.org>
	[PATCH] unexport task_nice
	
	task_nice() was exported for binfmt_elf, however that's no longer modular. 
	normalize_rt_tasks() is used by the sysreq code only, which isn't modular.
	
	Signed-off-by: Arjan van de Ven <arjan@infradead.org>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<akpm@osdl.org>
	[PATCH] limit CONFIG_LEGACY_PTY_COUNT
	
	Limit the number of legacy ptys to 256.  pty_line_name() isn't capable of
	generating more than 256 unique names.
	
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<ben-linux@org.rmk.(none)>
	[ARM PATCH] 2226/1: S3C2410 - dma system device
	
	Patch from Ben Dooks
	
	Add sysfs class and devices for s3c24xx-dma code, and
	add simple pm suspend code to ensure all channels are
	stopped before suspending
	
	Signed-off-by: Ben Dooks
	Signed-off-by: Russell King

<ben-linux@org.rmk.(none)>
	[ARM PATCH] 2227/1: S3C2410 - export dma symbols to modules
	
	Patch from Ben Dooks
	
	Added EXPORT_SYMBOL() to appropriate routines
	
	(should be applied after Patch 2226/1)
	
	Signed-off-by: Ben Dooks
	Signed-off-by: Russell King

<ebrower@gmail.com>
	[SPARC]: Remove unnecessary pm_idle comment.
	
	Signed-off-by: David S. Miller <davem@davemloft.net>

<ben-linux@org.rmk.(none)>
	[ARM PATCH] 2228/1: S3C2410 - dma register updates
	
	Patch from Ben Dooks
	
	Add register definitions for channel hardware
	sources, and update for s3c2440 extra bits.
	
	(should be applied after #2226/1 and #2227/1)
	
	Signed-off-by: Ben Dooks
	Signed-off-by: Russell King

<nico@org.rmk.(none)>
	[ARM PATCH] 2230/1: fix generic_fls declaration mismatch
	
	Patch from Nicolas Pitre
	
	The declaration of generic_fls recently changed from
	extern inline to static inline.
	
	Signed-off-by: Nicolas Pitre
	Signed-off-by: Russell King

<breuerr@mc.net>
	[CG14]: Fix NULL sbus_dev handling and colormap setup.
	
	Signed-off-by: David S. Miller <davem@davemloft.net>

<hch@lst.de>
	[NET]: Remove net_init.c ifdef clutter.
	
	Signed-off-by: David S. Miller <davem@davemloft.net>

<stevef@stevef95.austin.ibm.com>
	[CIFS] cifs readdir fixes part 1
	
	Signed-off-by: Steve French (sfrench@us.ibm.com)

<kaber@trash.net>
	[PKT_SCHED]: Fix overflow on 64bit in times reported to userspace.
	
	This patch fixes on overflow in tc actions times reported to
	userspace on 64 bit architectures. struct tcf_t only contains
	32-bit timestamps, but they are initialized to jiffies. When
	jiffies is larger than 2^32-1 only the low 32 bit are saved,
	and the diff between jiffies and the current timestamp becomes
	very large. This happens immediately after boottime since jiffies
	is initialized to 2^32-300. It was invisible until now because
	only the lower 32bit were reported to userspace, but with the
	USER_HZ conversion the reported times start somewhere around
	4294967s.
	
	This patch extends the timestamps to 64bit. It breaks userspace
	compatibility for actions, but considering that most of this is
	not even in iproute yet this should be acceptable.
	
	Signed-off-by: Patrick McHardy <kaber@trash.net>
	ACK'd by: Jamal Hadi Salim <hadi@cyberus.ca>
	Signed-off-by: David S. Miller <davem@davemloft.net>

<torvalds@ppc970.osdl.org>
	Revert recent EDD changes to use EXTENDED READ comand and CONFIG_EDD_SKIP_MBR
	
	It seems to result in unexplained memory corruption. Matt is working on it.
	
	Cset exclude: Matt_Domsch@dell.com[torvalds]|ChangeSet|20041020153622|50713

<greg@kroah.com>
	PCI Hotplug: fix up remaining MODULE_PARAM usage in pci hotplug drivers
	
	Signed-off-by: Greg Kroah-Hartman <greg@kroah.com>

<jdittmer@ppp0.net>
	[PATCH] fakephp: introduce pci_bus_add_device
	
	fakephp needs to add newly discovered devices to the global pci list.
	Therefore seperate out the appropriate chunk from pci_bus_add_devices
	to pci_bus_add_device to add a single device to sysfs, procfs
	and the global device list.
	
	Signed-off-by: Jan Dittmer <jdittmer@ppp0.net>
	Signed-off-by: Greg Kroah-Hartman <greg@kroah.com>

<jdittmer@ppp0.net>
	[PATCH] fakephp: add pci bus rescan ability
	
	This adds the ability to rescan the pci bus for newly inserted,
	reprogrammed or previously disabled pci devices.
	To initiate a rescan you need to write '1' to any of the
	/sys/bus/pci/slots/*/power control files. No known pci devices
	will be touched.
	Additionally this fixes a bug, when someone tries to disable
	a device with subfunctions. The subfunctions will be disabled first now.
	
	Short demo:
	 # modprobe fakephp
	 # ls /sys/bus/pci/slots | grep "0000:04"
	0000:04:02.0
	0000:04:02.1
	0000:04:02.2
	0000:04:03.0
	0000:04:03.1
	 # echo -n 0 > /sys/bus/pci/slots/0000\:04\:02.0/power
	 # ls /sys/bus/pci/slots | grep "0000:04"
	0000:04:03.0
	0000:04:03.1
	 # echo -n 1 > /sys/bus/pci/slots/0000\:03\:01.0/power
	 # ls /sys/bus/pci/slots | grep "0000:04"
	0000:04:02.0
	0000:04:02.1
	0000:04:02.2
	0000:04:03.0
	0000:04:03.1
	 # lspci | grep "0000:04"
	0000:04:02.0 Multimedia audio controller: Creative Labs SB Audigy (rev 03)
	0000:04:02.1 Input device controller: Creative Labs SB Audigy MIDI/Gameport (rev 03)
	0000:04:02.2 FireWire (IEEE 1394): Creative Labs SB Audigy FireWire Port
	0000:04:03.0 SCSI storage controller: Adaptec AHA-3960D / AIC-7899A U160/m (rev 01)
	0000:04:03.1 SCSI storage controller: Adaptec AHA-3960D / AIC-7899A U160/m (rev 01)
	
	Signed-off-by: Jan Dittmer <jdittmer@ppp0.net>
	Signed-off-by: Greg Kroah-Hartman <greg@kroah.com>

<david-b@pacbell.net>
	[PATCH] USB: usb network Kconfig updates
	
	This makes the "USB Network Adapter" support into a submenu, shrinking
	the main USB menu and simplifying the individual adapter entries.
	
	It also lists more of the devices supported: four more AX8817X products
	and (Linux-based) Gumstix.
	
	Signed-off-by: David Brownell <dbrownell@users.sourceforge.net>
	Signed-off-by: Greg Kroah-Hartman <greg@kroah.com>

<david-b@pacbell.net>
	[PATCH] USB: usb PM updates, PCI glue (1/4)
	
	Updates the PCI glue for HCDs:
	
	 - There's now just one code path to suspend. CONFIG_USB_SUSPEND mostly
	   means bypassing the "idle the root hub" part, and it uses the same
	   D1/D2 logic when necessary.
	
	 - Though usbcore is moving away from device->power.power_state, it still
	   needs to be initialized correctly (else pmcore can get confused).
	
	 - Disable the device on init path failures.
	
	The first two address real bugs, the third was just something I noticed
	while fixing the second.
	
	Signed-off-by: David Brownell <dbrownell@users.sourceforge.net>
	Signed-off-by: Greg Kroah-Hartman <greg@kroah.com>

<david-b@pacbell.net>
	[PATCH] USB: usb PM updates, root hub stuff (2/4)
	
	Makes usbcore handle some suspend scenarios more consistently, especially
	when talking with root hubs.
	
	 - Use usb_device->state, not device->power.power_state.  (The driver model
	   power_state is still needed for interfaces.)  With USB_SUSPEND=n, there
	   are also cases where the HCD_STATE_SUSPENDED needs to be used instead
	   of testing for USB_STATE_SUSPENDED.
	
	 - Updates usb_device->state for root hubs during suspend/resume.
	
	 - Fixes a locking bug (extra "up") that got merged recently, affecting
	   CONFIG_USB_SUSPEND.
	
	 - Recover one of the "HC died" cases better.
	
	 - Root hub timer updates, handling various suspend transitions more
	   consistently:  don't duplicate earlier submit checks, only work
	   when hub is configured, address various submit/resume races.
	
	Together, these help hubs work better regardless of whether USB_SUSPEND
	has been enabled (that's the only way USB_STATE_SUSPENDED appears), and
	whether or not the HCD is marked as suspended (or maybe Alan would
	want to call that "half suspended").
	
	Signed-off-by: David Brownell <dbrownell@users.sourceforge.net>
	Signed-off-by: Greg Kroah-Hartman <greg@kroah.com>

<david-b@pacbell.net>
	[PATCH] USB: usb PM updates, OHCI (3/4)
	
	These OHCI updates go along with usbcore changes to avoid power_state
	(mostly for sysfs) and leave usbcore handling usb_device state (except
	for quick-disconnect on STD resume).
	
	 - detect and ignore a root hub status polling call made during
	   suspend without USB_RESUME (it'd act like CardBus eject...)
	
	 - detect and ignore a superfluous root hub resume call made in
	   some cases with USB_RESUME
	
	 - use irqsave spinlock calls in timer callback paths
	
	 - don't expect usbcore to understand "disconnect the root hub"
	
	 - avoid some pointless delays/faults
	
	So it should fix a lot of the problems folk have been having with
	OHCI in the latest 2.6.10-rc1-bk kernels.
	
	Signed-off-by: David Brownell <dbrownell@users.sourceforge.net>
	Signed-off-by: Greg Kroah-Hartman <greg@kroah.com>

<luca.risolia@studio.unibo.it>
	[PATCH] USB: SN9C10x driver updates
	
	SN9C10x driver updates.
	
	The most important change is the addition of the "SN9C10x" vendor-specific
	pixel format, which is used by the applications or libraries to get "raw"
	compressed data from the SN9C10x controllers. This also means that V4L2 should
	be smart enough for the decompression to be handled in userland. You can
	consider this patch as a further response to the discussion we had on the lkml
	about the submission of the PWC driver including decompression in kernelspace,
	which is present in the Alan Cox's tree.
	
	Changes: (+ new, - removed, * cleanup, @ bugfix)
	
	@ Fix VIDIOC_TRY_FMT ioctl
	@ Fix SOF/EOF problems with TAS5130D1B image sensor
	@ Fix VIDIOC_ENUM_FMT ioctl
	* Replace wait_event_interruptible() with wait_event_timeout()
	* Use msecs_to_jiffies() for timeouts in jiffies
	* Use usb_make_path() on VIDIOC_QUERYCAP for device path in the usb tree
	* read() returns buf.bytesused instead of buf.length on success
	- Remove brightness control from PAS106B and PAS202BCB, since it has no effect
	  on the active pixel area (it's just for window border lines)
	+ Implement VIDIOC_G_PARM and VIDIOC_S_PARM ioctl's
	+ Add DAC magnitude, DAC sign, green balance and exposure controls for PAS106B
	  and PAS202BCB image sensors
	+ Add an additional pixel format for compressed video: V4L2_PIX_FMT_SN9C10X
	+ VIDIOC_S_JPEGCOMP and VIDIOC_G_JPEGCOMP are used to set or get the current
	  compression quality
	+ New documentation note in "Notes for V4L2 application developers" paragraph
	  about video formats and compressed data.
	+ Documentation updates about the new features
	
	Signed-off-by: Luca Risolia <luca.risolia@studio.unibo.it>
	Signed-off-by: Greg Kroah-Hartman <greg@kroah.com>

<bunk@stusta.de>
	[PATCH] USB: misc USB gadget cleanups
	
	On Tue, Nov 09, 2004 at 08:42:43AM -0800, Greg KH wrote:
	> On Sun, Nov 07, 2004 at 03:20:39PM -0700, David Brownell wrote:
	> > On Sunday 07 November 2004 13:30, Adrian Bunk wrote:
	> > > The patch below makes some needlessly global USB gadget functions
	> > > static.
	> >
	> > It looks fine except for the one config descriptor utility
	> > (just strike those bits from the patch).  Those are exported
	> > to support composite devices ... for "multi-function" devices.
	>
	> Care to send me a patch with the correct parts in it?  :)
	>...
	
	
	USB gadget: make 4 needlessly global functions static.
	
	
	Signed-off-by: Adrian Bunk <bunk@stusta.de>
	Signed-off-by: Greg Kroah-Hartman <greg@kroah.com>

<phil@ipom.com>
	[PATCH] USB Storage: Add unusual_devs entry for iPod
	
	This patch adds an unusual_devs.h entry for the Apple iPod as it
	reports one too many sectors. The patch was submitted by
	Avi Kivity <avi@argo.co.il> and re-diffed by me.
	
	Greg, please apply.
	
	Signed-off-by: Avi Kivity <avi@argo.co.il>
	Signed-off-by: Phil Dibowitz <phil@ipom.com>
	Signed-off-by: Greg Kroah-Hartman <greg@kroah.com>

<phil@ipom.com>
	[PATCH] USB Storage: unusual_devs entry for yakumo
	
	This adds an unusual devs entry for Yakumo Mega-Image 47 - it suffers
	from the residue problem.
	Patch originally submitted by Bjoern Paetzel <kolrabi@kolrabi.de>
	and I rediff'd it.
	
	From: Bjoern Paetzel <kolrabi@kolrabi.de>
	Signed-off-by: Phil Dibowitz <phil@ipom.com>
	Signed-off-by: Greg Kroah-Hartman <greg@kroah.com>

<greg@kroah.com>
	USB: fix up sparse lock warning in whiteheat driver
	
	Yeah, the locking is still all fucked up, but at least it's
	not _obviously_ wrong anymore.  It still needs to be fixed 
	properly one of these days...
	
	Signed-off-by: Greg Kroah-Hartman <greg@kroah.com>

<greg@kroah.com>
	USB: fix up locking bugs in kl5kusb105.c that sparse found
	
	Signed-off-by: Greg Kroah-Hartman <greg@kroah.com>

<len.brown@intel.com>
	[ACPI] remove acpi_ksyms.c
	
	Signed-off-by: Adrian Bunk <bunk@stusta.de>
	Signed-off-by: Len Brown <len.brown@intel.com>

<greg@kroah.com>
	Cset exclude: david-b@pacbell.net|ChangeSet|20041112030233|28853
	
	Revert this patch, as a later patch contains it already.
	As requested by David Brownell.
	
	Signed-off-by: Greg Kroah-Hartman <greg@kroah.com>

<david-b@pacbell.net>
	[PATCH] USB: usb PM updates, EHCI (4/4)
	
	These EHCI updates go along with usbcore changes to avoid power_state.
	
	 - Reinitialize one more register on resume-after-poweroff; and
	   for controllers that need it, each port.
	
	 - Avoid some pointless delays/faults
	
	 - Defer re-enabling IRQS on resume path, to make it work with APM on a
	   ThinkPad T40.  (From: Nickolai Zeldovich <nickolai@cs.stanford.edu>)
	
	Signed-off-by: David Brownell <dbrownell@users.sourceforge.net>
	Signed-off-by: Greg Kroah-Hartman <greg@kroah.com>

<greg@kroah.com>
	USB: fix locking bug found by sparse in ehci-sched.c
	
	Signed-off-by: Greg Kroah-Hartman <greg@kroah.com>

<greg@kroah.com>
	USB: fix 2 locking bugs in usbtest.c as found by sparse
	
	Signed-off-by: Greg Kroah-Hartman <greg@kroah.com>

<greg@kroah.com>
	USB: fix endian warnings as found by sparse in the rio500.c driver
	
	Signed-off-by: Greg Kroah-Hartman <greg@kroah.com>

<greg@kroah.com>
	USB: fix sparse warnings in tiglusb.c driver
	
	Signed-off-by: Greg Kroah-Hartman <greg@kroah.com>

<greg@kroah.com>
	USB: fix endian bug found by sparse in freecom usb-storage driver.
	
	Signed-off-by: Greg Kroah-Hartman <greg@kroah.com>

<alborchers@steinerpoint.com>
	[PATCH] USB: io_edgeport locking, flow control, and misc fixes
	
	[PATCH] io_edgeport locking, flow control, and misc fixes
	
	- Updated to version 2.7.
	
	- Added locking to protect the circular buffer, txCredits, rxBytesAvail,
	  and read_in_progress.
	
	- With these locking fixes tests running 8 ports at 115200 bps on
	  SMP now runs for hours without problems; before these changes this
	  test would cause out of memory errors or oopses within minutes.
	
	- Removed the RELEVANT_IFLAG macro which mistakenly filtered out the
	  software flow control stty flags.
	
	- Added support for mark and space parity.
	
	- Added a private read_in_progress flag rather than using (urb->status
	  == -EINPROGRESS).
	
	- Low latency is now a module parameter, it is on by default.
	
	- Added edge_tty_recv to pass data to the tty flip buffers.
	
	- Cleared the write_urb pointer after freeing it, to prevent oops on
	  failed open.
	
	- Cleared the txfifo.fifo pointer after freeing it, to prevent double
	  free on failed open.
	
	- Simplified rounding the baud rate divisor.
	
	- Added some error messages.
	
	Signed-off-by: Al Borchers <alborchers@steinerpoint.com>
	Signed-off-by: Greg Kroah-Hartman <greg@kroah.com>

<alborchers@steinerpoint.com>
	[PATCH] USB: revised usbserial open/close unbalanced get/put
	
	Here is a new version of the patch to usb-serial.c to fix
	the unbalanced kref and module get/put in serial_open and
	serial_close when there are errors.  This version works
	correctly when try_module_get fails and now "rmmod --wait"
	works correctly.
	
	
	* If the low level usb serial open fails, the kref and
	  module use counts are decremented once in open.  Before,
	  they were mistakenly decremented again in close.
	
	* If try_module_get fails, the module use count is not
	  changed.  Before, the module use count was mistakenly
	  decremented.  Now "rmmod --wait" works correctly.
	
	* The tty->driver_data pointer is never set to NULL once
	  the port is open.  Before there was a small window when
	  it was mistakenly set to NULL for an already open port.
	
	Signed-off-by: Al Borchers <alborchers@steinerpoint.com>
	Signed-off-by: Greg Kroah-Hartman <greg@kroah.com>

<greg@kroah.com>
	USB: fix up endian issues found by sparse in io_edgeport.c driver
	
	Signed-off-by: Greg Kroah-Hartman <greg@kroah.com>

<greg@kroah.com>
	USB: fix endian issues found by sparse in mct_u232 driver
	
	Signed-off-by: Greg Kroah-Hartman <greg@kroah.com>

<len.brown@intel.com>
	[ACPI] remove acpi_ksyms.c
	
	Signed-off-by: Adrian Bunk <bunk@stusta.de>
	Signed-off-by: Len Brown <len.brown@intel.com>

<len.brown@intel.com>
	[ACPI] add #ifdef ACPI_FUTURE_USAGE
	
	Signed-off-by: Adrian Bunk <bunk@stusta.de>
	Signed-off-by: Len Brown <len.brown@intel.com>

<dave.jiang@com.rmk.(none)>
	[ARM PATCH] 2231/1: remove unused file in iop321 port
	
	Patch from Dave Jiang
	
	Remove nolonger used file from arch/arm/mach-iop3xx/mm-321.c
	
	Signed-off-by: Dave Jiang
	Signed-off-by: Russell King

<ben-linux@org.rmk.(none)>
	[ARM PATCH] 2232/2: S3C2410 - RTC driver
	
	Patch from Ben Dooks
	
	S3C2410/S3C2440 RTC driver using arch/arm/common/rtctime.c as
	a base. Supports alarm, and periodic IRQ from 1 to 64Hz
	
	Signed-off-by: Ben Dooks
	Signed-off-by: Russell King

<agx@sigxcpu.org>
	[PATCH] rivafb: stricter memory ordering
	
	The more relaxed memory ordering od the __raw_{write,read}b broke things
	on ppc in the recent rivafb cleanups.
	
	[ Uglyness alert: only the 8-bit accesses are more strongly serialized. 
	  The 16- and 32-bit ones have always been relaxed. Gaah. ]
	
	Signed-off-by: Guido Guenther <agx@sigxcpu.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<greg@kroah.com>
	I2C: fix up some out of date Documentation
	
	Signed-off-by: Greg Kroah-Hartman <greg@kroah.com>

<greg@kroah.com>
	I2C: fix up rtc8564 which should not have been changed in my previous cleanups.
	
	This fixes a reported oops.
	
	Signed-off-by: Greg Kroah-Hartman <greg@kroah.com>

<david-b@pacbell.net>
	[PATCH] driver core: shrink struct device a bit
	
	This patch removes two fields from "struct device" that are duplicated
	in "struct dev_pm_info":  power_state (which should probably vanish)
	and "saved_state".  There were only two "real" uses of saved_state;
	both are now switched over to use dev_pm_info.
	
	Signed-off-by: David Brownell <dbrownell@users.sourceforge.net>
	Signed-off-by: Greg Kroah-Hartman <greg@kroah.com>

<miltonm@bga.com>
	[PATCH] fix sysfs backing store error path confusion
	
	On Nov 3, 2004, at 3:42 PM, Greg KH wrote:
	
	|On Tue, Nov 02, 2004 at 10:03:34AM -0600, Maneesh Soni wrote:
	||On Tue, Nov 02, 2004 at 02:46:58AM -0600, Milton Miller wrote:
	|||sysfs_new_dirent returns ERR_PTR(-ENOMEM) if kmalloc fails but the callers
	|||were expecting NULL.
	||
	||Thanks for spotting this. But as you said, I will prefer to change the callee.
	||How about this patch?
	..
	||-		return -ENOMEM;
	||+		return NULL;
	|
	|Actually, this needs to be a 0, not NULL, otherwise the compiler
	|complains with a warning.  I've fixed it up and applied it.
	|
	|thanks,
	|
	|greg k-h
	
	I wondered why greg thought the type was wrong.   After it was merged I
	realized that the wrong function was changed.  Here's an attempt to fix
	both errors.
	
	
	Signed-off-by: Greg Kroah-Hartman <greg@kroah.com>

<anil.s.keshavamurthy@intel.com>
	[PATCH] Add KOBJ_ONLINE
	
	I am trying to fix the current ACPI container.ko and processor.ko to use
	kobject_hotplug() for notification. For this I would be requiring the
	KOBJ_ONLINE definitions to be added to kobject_action.
	
	Signed-off-by: Anil Keshavamurty <anil.s.keshavamurthy@intel.com>
	Signed-off-by: Greg Kroah-Hartman <greg@kroah.com>

<maneesh@in.ibm.com>
	[PATCH] sysfs: fix duplicate driver registration error
	
	o Do not release existing directory if the new directory happens to be a
	  duplicate directory. Thanks to Kay Sievers for the testcase.
	
	Signed-off-by: Maneesh Soni <maneesh@in.ibm.com>
	Signed-off-by: Greg Kroah-Hartman <greg@kroah.com>

<kay.sievers@vrfy.org>
	[PATCH] add the driver name to the hotplug environment
	
	Add the name of the device's driver to the hotplug environment of class
	and block devices.
	
	  ACTION=add
	  DEVPATH=/block/sda
	  SUBSYSTEM=block
	  SEQNUM=986
	  PHYSDEVPATH=/devices/pci0000:00/0000:00:1d.1/usb3/3-1/3-1:1.0/host0/target0:0:0/0:0:0:0
	  PHYSDEVBUS=scsi
	  PHYSDEVDRIVER=sd
	
	Signed-off-by: Kay Sievers <kay.sievers@vrfy.org>
	Signed-off-by: Greg Kroah-Hartman <greg@kroah.com>

<kay.sievers@vrfy.org>
	[PATCH] add the bus name to the hotplug environment
	
	Add the name of the bus and the driver to the hotplug event for
	/sys/devices/*. With this addition, userspace knows what it can
	expect from sysfs to show up, instead of waiting for a timeout
	for devices without a bus.
	
	  ACTION=add
	  DEVPATH=/devices/pci0000:00/0000:00:1d.1/usb3/3-1
	  SUBSYSTEM=usb
	  SEQNUM=978
	  PHYSDEVBUS=usb
	  PHYSDEVDRIVER=usb
	
	Signed-off-by: Kay Sievers <kay.sievers@vrfy.org>
	Signed-off-by: Greg Kroah-Hartman <greg@kroah.com>

<kay.sievers@vrfy.org>
	[PATCH] print hotplug SEQNUM as unsigned
	
	Signed-off-by: Kay Sievers <kay.sievers@vrfy.org>
	Signed-off-by: Greg Kroah-Hartman <greg@kroah.com>

<greg@kroah.com>
	[PATCH] driver core: fix up some missed power_state changes from David's patch
	
	Signed-off-by: Greg Kroah-Hartman <greg@kroah.com>

<rmk@flint.arm.linux.org.uk>
	[ARM] Fix IMX build error post sys_timer merge.

<rmk@flint.arm.linux.org.uk>
	[ARM] Remove unused 'mclk' element from MMC platform structure.

<greg@kroah.com>
	sysfs: fix odd patch error
	
	Signed-off-by: Greg Kroah-Hartman <greg@kroah.com>

<khali@linux-fr.org>
	[PATCH] I2C: Missing newlines in debug messages
	
	As discussed on IRC, this simple patch fixes broken debug messages
	missing their trailing newlines. I just applied something similar to
	CVS, and will prepare patches for 2.4 as well.
	
	Signed-off-by: Jean Delvare <khali@linux-fr.org>
	Signed-off-by: Greg Kroah-Hartman <greg@kroah.com>

<lmendez19@austin.rr.com>
	[PATCH] usb-serial: free interrupt_out_buffer in cleanup routines
	
	This patch frees interrupt_out_buffer in the cleanup routines.
	
	Signed off by: Lonnie Mendez <lmendez19@austin.rr.com>
	Signed-off-by: Greg Kroah-Hartman <greg@kroah.com>

<paubert@iram.es>
	[PATCH] I2C: Recent I2C "dead code removal" breaks pmac sound.
	
	> Put the function back, and change the pmac.h file to delete the #define,
	> and replace the snd_pmac_keywest_write function with a real call to
	> i2c_smbus_write_block_data so things like this don't happen again.
	>
	> Care to write a patch to do this?
	
	It follows, along with an update of the include/linux/i2c.h to only
	declare functions that actually exist, but grepping the whole sound
	subtree shows that at least sound/oss/dmasound/tas_common.h defines
	a few inline functions that call i2c_smbus_write_{byte,block}_data.
	
	
	[I2C part]
	Ressuscitate i2c_smbus_write_block_data since it's actually
	used. Update include/linux/i2c.h to reflect the existing
	functions.
	
	[Sound part]
	Remove snd_pmac_keywest_write* wrapper macros and directly
	call the i2c_smbus_* functions instead.
	
	Signed-off-by: Gabriel Paubert <paubert@iram.es>
	Signed-off-by: Greg Kroah-Hartman <greg@kroah.com>
	
	
	===== include/linux/i2c.h 1.41 vs edited =====

<alborchers@steinerpoint.com>
	[PATCH] USB: io_ti new devices, circular buffer, flow control, misc fixes
	
	- Updated to version 0.7.
	
	- Added support for Edgeport 4s, 221c, 22c, 21c, 1, 1i, Watchports,
	  Plus Power Port HP4CD, and Plus Power Port PCI.
	
	- Added a circular write buffer and locking to protect it.  This fixes
	  OPOST processing problems.
	
	- Rewrote TIChase to wait for the circular buffer to drain, to wait
	  up to the closing wait time, and to wait for the last character out.
	
	- Fixed hardware flow control by having it stop and restart reads
	  and set and clear tty->hw_stopped.
	
	- Removed the RELEVANT_IFLAG macro which mistakenly filtered out the
	  software flow control stty flags.
	
	- Added a semaphore to to protect num_ports_open to fix a race
	  during simultaneous opens--two opens could both try to submit
	  the interrupt urb, an error.
	
	- Added a separate write_urb_in_use flag rather than relying
	  on (urb->status == -EINPROGRESS).
	
	- Added edge_tty_recv to pass data to the tty flip buffers.
	
	- Freed memory on failed startup.
	
	- Added low latency as a module parameter, it is on by default.
	
	- Added closing wait as a module parameter, it is 40 seconds by default.
	
	- Simplified rounding the baud rate divisor.
	
	- Added some error messages.
	
	Signed-off-by: Al Borchers <alborchers@steinerpoint.com>
	Signed-off-by: Greg Kroah-Hartman <greg@kroah.com>

<thockin@google.com>
	[PATCH] PCI: small PCI probe patch for odd 64 bit BARs
	
	On Thu, Nov 11, 2004 at 09:54:19AM -0800, Greg KH wrote:
	> I'll wait till you test this on 2.6 before applying it.
	
	OK.  Tested now on real hardware in 32 bit and 64 bit kernels.  32 bit
	found another dumbness, that we can fix up.
	
	Some PCI bridges default their UPPER prefetch windows to an unused state
	of base > limit.  We should not use those values if we find that.  It
	might be nice to reprogram them to 0, in fact.
	
	Yes, BIOS should fix that up, but apparently, some do not.
	
	
	Signed-Off-By: Tim Hockin <thockin@google.com>
	Signed-off-by: Greg Kroah-Hartman <greg@kroah.com>

<hannal@us.ibm.com>
	[PATCH] chrp_pci.c: replace pci_find_device with for_each_pci_dev
	
	Signed-off-by: Hanna Linder <hannal@us.ibm.com>
	Signed-off-by: Greg Kroah-Hartman <greg@kroah.com>

<hannal@us.ibm.com>
	[PATCH] gemini_pci.c: replace pci_find_device with for_each_pci_dev
	
	Signed-off-by: Hanna Linder <hannal@us.ibm.com>
	Signed-off-by: Greg Kroah-Hartman <greg@kroah.com>

<hannal@us.ibm.com>
	[PATCH] matroxfb_base.c: convert pci_find_device to pci_get_device
	
	As pci_find_device is going away I've replaced it with pci_get_device.
	
	Signed-off-by: Hanna Linder <hannal@us.ibm.com>
	Signed-off-by: Greg Kroah-Hartman <greg@kroah.com>

<hannal@us.ibm.com>
	[PATCH] lopec.c: replace pci_find_device with pci_get_device
	
	As pci_find_device is going away I have replaced this call with
	pci_get_device.
	
	Signed-off-by: Hanna Linder <hannal@us.ibm.com>
	Signed-off-by: Greg Kroah-Hartman <greg@kroah.com>

<hannal@us.ibm.com>
	[PATCH] k2.c: replace pci_find_device with pci_get_device
	
	As pci_find_device is going away I have replaced this call with
	pci_get_device.
	
	Signed-off-by: Hanna Linder <hannal@us.ibm.com>
	Signed-off-by: Greg Kroah-Hartman <greg@kroah.com>

<hannal@us.ibm.com>
	[PATCH] cmipci.c: convert pci_find_device to pci_get_device
	
	As pci_find_device is going away I've replaced it with pci_get_device.
	
	
	Signed-off-by: Hanna Linder <hannal@us.ibm.com>
	Signed-off-by: Greg Kroah-Hartman <greg@kroah.com>

<hannal@us.ibm.com>
	[PATCH] drm_drv.h: replace pci_find_device
	
	As pci_find_device is going away I've replaced it with pci_get_device.
	for_each_pci_dev is a macro wrapper around pci_get_device.
	
	
	Signed-off-by: Hanna Linder <hannal@us.ibm.com>
	Signed-off-by: Greg Kroah-Hartman <greg@kroah.com>

<hannal@us.ibm.com>
	[PATCH] sis-agp.c: replace pci_find_device with pci_get_device
	
	As pci_find_device is going away soon I have converted this file to use
	pci_get_device instead. for_each_pci_dev is a macro wrapper around
	pci_get_device.
	
	Signed-off-by: Hanna Linder <hannal@us.ibm.com>
	Signed-off-by: Greg Kroah-Hartman <greg@kroah.com>

<hannal@us.ibm.com>
	[PATCH] pci-gart.c: replace pci_find_device with pci_get_device
	
	As pci_find_device is going away I've replaced it with pci_get_device.
	
	
	Signed-off-by: Hanna Linder <hannal@us.ibm.com>
	Signed-off-by: Greg Kroah-Hartman <greg@kroah.com>

<hannal@us.ibm.com>
	[PATCH] ret_mb_a_pci.c: replace pci_find_device with pci_get_device
	
	As pci_find_device is going away I've replaced it with pci_get_device.
	
	
	Signed-off-by: Hanna Linder <hannal@us.ibm.com>
	Signed-off-by: Greg Kroah-Hartman <greg@kroah.com>

<hannal@us.ibm.com>
	[PATCH] pci_iommu.c: replace pci_find_device with pci_get_device
	
	As pci_find_device is going away I've replaced it with pci_get_device.
	
	Signed-off-by: Hanna Linder <hannal@us.ibm.com>
	Signed-off-by: Greg Kroah-Hartman <greg@kroah.com>

<hannal@us.ibm.com>
	[PATCH] isa.c: replace pci_find_device with pci_get_device
	
	As pci_find_device is going away I've replaced it with pci_get_device.
	
	Signed-off-by: Hanna Linder <hannal@us.ibm.com>
	Signed-off-by: Greg Kroah-Hartman <greg@kroah.com>

<hannal@us.ibm.com>
	[PATCH] ebus.c: replace pci_find_device with pci_get_device
	
	Signed-off-by: Hanna Linder <hannal@us.ibm.com>
	Signed-off-by: Greg Kroah-Hartman <greg@kroah.com>

<hannal@us.ibm.com>
	[PATCH] fixups-dreamcast.c: replace pci_find_device with pci_get_device
	
	As pci_find_device is going away I've replaced it with pci_get_device
	and pci_dev_put.
	
	
	Signed-off-by: Hanna Linder <hannal@us.ibm.com>
	Signed-off-by: Greg Kroah-Hartman <greg@kroah.com>

<hannal@us.ibm.com>
	[PATCH] sandpoint.c: replace pci_find_device with pci_get_device
	
	As pci_find_device is going away I've replaced it with pci_get_device.
	
	
	Signed-off-by: Hanna Linder <hannal@us.ibm.com>
	Signed-off-by: Greg Kroah-Hartman <greg@kroah.com>

<hannal@us.ibm.com>
	[PATCH] prpmc750.c: replace pci_find_device with pci_get_device
	
	As pci_find_device is going away I've replaced it with pci_get_device.
	
	
	Signed-off-by: Hanna Linder <hannal@us.ibm.com>
	Signed-off-by: Greg Kroah-Hartman <greg@kroah.com>

<hannal@us.ibm.com>
	[PATCH] mcpn765.c: replace pci_find_device with pci_get_device
	
	As pci_find_device is going away I've replaced it with pci_get_device
	and pci_dev_put.
	
	
	Signed-off-by: Hanna Linder <hannal@us.ibm.com>
	Signed-off-by: Greg Kroah-Hartman <greg@kroah.com>

<hannal@us.ibm.com>
	[PATCH] pcore.c: replace pci_find_device with pci_get_device
	
	As pci_find_device is going away I've replaced it with pci_get_device
	and pci_dev_put.
	
	
	Signed-off-by: Hanna Linder <hannal@us.ibm.com>
	Signed-off-by: Greg Kroah-Hartman <greg@kroah.com>

<hannal@us.ibm.com>
	[PATCH] pmac_pci.c: replace pci_find_device with pci_get_device
	
	As pci_find_device is going away I've replaced it with pci_get_device.
	
	
	Signed-off-by: Hanna Linder <hannal@us.ibm.com>

<hannal@us.ibm.com>
	[PATCH] pplus.c: replace pci_find_device with pci_get_device
	
	Signed-off-by: Hanna Linder <hannal@us.ibm.com>
	Signed-off-by: Greg Kroah-Hartman <greg@kroah.com>

<hannal@us.ibm.com>
	[PATCH] prep_pci.c: replace pci_find_device with pci_get_device
	
	Signed-off-by: Hanna Linder <hannal@us.ibm.com>
	Signed-off-by: Greg Kroah-Hartman <greg@kroah.com>

<rmk@flint.arm.linux.org.uk>
	[ARM] Add platform_device-based partition and map information.
	
	This adds platform_device-based partition and map information for
	badge4, cerf, collie, h3600, hackkit and shannon SA1100 machine
	types.

<greg@kroah.com>
	USB: fix sparse warnings in io_ti.c
	
	Signed-off-by: Greg Kroah-Hartman <greg@kroah.com>

<greg@kroah.com>
	USB: fix up a bunch of sparse bitwise warnings in the ohci driver
	
	This all because of stupid hardware implementations that can't decide
	which endian form they want to run the chip in...
	
	Signed-off-by: Greg Kroah-Hartman <greg@kroah.com>

<rmk@flint.arm.linux.org.uk>
	[ARM] Remove broken SA1100 machine support.
	
	This removes a bunch of SA1100 machine support files which have been
	unable to be built for a while, due to missing out on updates.
	
	Warning of removal had been posted to the ARM kernel mailing list,
	and this cset represents those which did not attract any interest.

<rmk@flint.arm.linux.org.uk>
	[MTD] sa1100: add driver model support and remove static flash probing
	
	This prepares the SA1100 flash driver to accept platform data via
	the driver model.

<rmk@flint.arm.linux.org.uk>
	[MTD] sa1100: split out sub-device init/destruction.

<jgarzik@pobox.com>
	[libata] remove dependence on PCI
	
	Most of this work was done by "Mat Loikkanen" <Mat.Loikkanen@synopsys.com>.
	
	* use struct device rather than struct pci_dev
	* use generic DMA routines (dma_xxx) and generic struct device
	  routines (dev_xxx)
	* isolate PCI-specific helpers inside CONFIG_PCI

<rmk@flint.arm.linux.org.uk>
	[MTD] sa1100: consolidate mtd and partition destructors.

<stevef@stevef95.austin.ibm.com>
	cifs readdir fixes part 2
	
	Signed-off-by:  Steve French (sfrench@us.ibm.com)

<rmk@flint.arm.linux.org.uk>
	[MTD] sa1100: add container structure for one logical flash device.

<rmk@flint.arm.linux.org.uk>
	[MTD] sa1100: more driver model integration and consolidation.
	
	- combine sa1100_locate_partitions with sa1100_mtd_probe.
	- set device driver data in the probe method, and use this to get
	  at our driver private information in the other methods.

<rmk@flint.arm.linux.org.uk>
	[MTD] sa1100: remove static partitioning information.
	
	Use partitioning information passed in via the platform device
	instead.  This means that individual machine files in
	arch/arm/mach-sa1100 can contain their partitioning information.

<rmk@flint.arm.linux.org.uk>
	[MTD] sa1100: Use set_vpp functions provided by machine support code.

<rmk@flint.arm.linux.org.uk>
	[MTD] sa1100: Obtain flash device location from platform device.
	
	Remove static flash device location definitions since they're now
	obsolete.  Additionally, dynamically allocate driver private data
	structures.

<kaber@coreworks.de>
	[NETFILTER]: Handle nonlinear skbs in ip_queue/ip6_queue
	
	Signed-off-by: Patrick McHardy <kaber@trash.net>

<kaber@coreworks.de>
	[NET]: Move rx timestamp functions to net/core/dev.c
	
	Signed-off-by: Patrick McHardy <kaber@trash.net>

<kaber@coreworks.de>
	[NETFILTER]: Enable rx timestamps in ip_queue/ip6_queue
	
	Signed-off-by: Patrick McHardy <kaber@trash.net>

<kaber@coreworks.de>
	[NETFILTER]: associate locally generated icmp errors with conntrack of original packet
	
	Signed-off-by: Patrick McHardy <kaber@trash.net>

<ben-linux@org.rmk.(none)>
	[ARM PATCH] 2238/1: S3C2410 - pm.h remove init code if not used
	
	Patch from Ben Dooks
	
	Remove s3c2410_pm_init() if CONFIG_PM is not set.
	
	Signed-off-by: Ben Dooks
	Signed-off-by: Russell King

<ben-linux@org.rmk.(none)>
	[ARM PATCH] 2239/1: S3C2410 - add iPAQ rx3715 machine
	
	Patch from Ben Dooks
	
	Add machine entry and support for the HP iPAQ rx3715
	into arch/arm/mach-s3c2410, as well as updating the
	default configuration for the s3c2410 to include it.
	
	Signed-off-by: Ben Dooks
	Signed-off-by: Russell King

<kaber@coreworks.de>
	[NETFILTER]: Fix invalid tcp/udp checksums within NATed icmp errors
	
	Signed-off-by: Patrick McHardy <kaber@trash.net>

<rmk@flint.arm.linux.org.uk>
	[SERIAL] Add sparse __iomem annotations.

<rmk@flint.arm.linux.org.uk>
	[SERIAL] serial driver fixes
	
	Patch from Alan Cox, expanded to cover ARM drivers by Russell King.
	
	- define SUPPORT_SYSRQ early
	- ensure consistent include ordering
	- use proper helper functions for flip buffer handling
	- remove deadlock on overrun

<ben-linux@org.rmk.(none)>
	[ARM PATCH] 2237/1: S3C2410 - new serial driver - update serial_core.h (4/4)
	
	Patch from Ben Dooks
	
	Add PORT_S3C2440 to include/linux/serial_core.h
	
	Signed-off-by: Ben Dooks
	Signed-off-by: Russell King

<Matt_Domsch@dell.com>
	[PATCH] EDD: fix too short array
	
	Bingo...  edd_devices[] was too short.  When we keep more than 6
	signatures, it overruns the end.  Also, I rewrote edd_num_devices to be
	clearer about its goal. 
	
	This patch is necessary even after the last edd.S patch was reverted.
	
	Thanks to Christian Kujau for testing and narrowing it down enough to
	debug this. 
	
	It still doesn't explain why Christian's BIOS reports more devices than
	he has, that's still up in the air, so don't re-apply the edd.S patch
	just reverted. 
	
	Signed-off-by: Matt Domsch <Matt_Domsch@dell.com>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<jgarzik@pobox.com>
	[libata] bump versions, add MODULE_VERSION() tags
	
	Also remove dep on CONFIG_EXPERIMENTAL for libata itself,
	and several libata drivers.

<jgarzik@pobox.com>
	Parenthize nth_page() macro arg, in linux/mm.h.

<agx@sigxcpu.org>
	[PATCH] rivafb: clean up ordering constraints
	
	I had another look at the ugly rivafb memory ordering requirements.
	
	It seems P{V,C}IO areas are only accessed using VGA_{RD,WR}8 macros. 
	NV_{RW,WR}08 are never actually used directly.  So this patch makes at
	least usage consistent: VGA_{RD,WR}8 to access "I/O areas" in an ordered
	way.  NV_* for the rest.
	
	Signed-off-by: Guido Guenther <agx@sigxcpu.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<torvalds@ppc970.osdl.org>
	ppc: fix up pmac IDE driver for driver core changes
	
	device power state is in "dev.power.power_state" now, rather than
	in "dev.power_state".

<torvalds@ppc970.osdl.org>
	usb: edgeport serial driver uses CMSPAR, which not all architectures support
	
	If CMSPAR doesn't exist, just #define it to zero. That makes the
	code automatically DTRT.

<sfrench@smft41.(none)>
	[CIFS] cifs readdir changes part 3
	
	Signed-off-by: Steve French (sfrench@us.ibm.com)

<Andries.Brouwer@cwi.nl>
	[PATCH] remove if !PARTITION_ADVANCED condition in defaults
	
	Many people are being bitten by the fact that if they select
	CONFIG_PARTITION_ADVANCED in order to get some additional support,
	they suddenly lose support for the MSDOS_PARTITION type.
	
	Moreover, everybody needs MSDOS_PARTITION - also people not on i386,
	since it is the type used on smart media and compact flash and
	similar cards.
	
	So, the below advises people "Say Y here" for MSDOS_PARTITION,
	and does not change the default choices when PARTITION_ADVANCED
	is selected.

<Andries.Brouwer@cwi.nl>
	[PATCH] add __initdata in floppy.c

<Andries.Brouwer@cwi.nl>
	[PATCH] __devinit in sound/oss/es1371.c
	
	It is forbidden to refer from __devinit to __init.  (Unless one argues
	that in the given situation hotplugging is actually impossible.  Too
	ugly.)
	
	However, es1371_probe() is __devinit and referred to __initdata initvol[]
	and to __init src_init().

<Andries.Brouwer@cwi.nl>
	[PATCH] __init for inflate.c
	
	In do_mounts_rd.c and initramfs.c there are many references
	from .text to .text.init because of the inclusion of lib/inflate.c.
	The below adds INIT markup in lib/inflate.c.

<Andries.Brouwer@cwi.nl>
	[PATCH] __init in i386/kernel/cpu/nexgen.c

<Andries.Brouwer@cwi.nl>
	[PATCH] __devinit in pci/generic.c
	
	Routines referred to from __devinitdata.

<Andries.Brouwer@cwi.nl>
	[PATCH] __devinit in ide/pci/rz1000.c

<Andries.Brouwer@cwi.nl>
	[PATCH] __init and i386 timers
	
	The i386 timers use a struct timer_opts that has a field init
	pointing at a __init function. The rest of the struct is not __init.
	
	Nothing is wrong, but if we want to avoid having references to init stuff
	in non-init sections, some reshuffling is needed.
	
	The below replaces
	
	struct timer_opts {
		int (*init)(char *override);
		... more ...
	};
	
	by the two structs
	
	struct timer_opts {
		... more ...
	};
	
	struct init_time_opts {
		int (*init)(char *override);
		struct timer_opts *opts;
	};
	
	where the second is __initdata.

<Andries.Brouwer@cwi.nl>
	[PATCH] __init in scsi/scsi_devinfo.c

<Andries.Brouwer@cwi.nl>
	[PATCH] __devinit in parport_pc.c

<Andries.Brouwer@cwi.nl>
	[PATCH] __init in mm/slab.c
	
	The below removes an __initdata
	(for initarray_generic that is referenced in non-init code).

<Andries.Brouwer@cwi.nl>
	[PATCH] __init in reboot.c

<Andries.Brouwer@cwi.nl>
	[PATCH] __initdata in dm.c

<Andries.Brouwer@cwi.nl>
	[PATCH] no __init in serial/8250.c
	
	Referenced in non-init context.

<Andries.Brouwer@cwi.nl>
	[PATCH] no __initdata in netfilter
	
	Stuff marked initdata that is referenced in non-init context.

<rddunlap@osdl.org>
	[PATCH] scsi/mesh: module_param corrections
	
	Correct MODULE_PARM to module_param (somehow I changed the
	macro parameters but not the macro invocation).
	
	Signed-off-by: Randy Dunlap <rddunlap@osdl.org>
	Signed-off-by: Randy Dunlap <torvalds@osdl.org>

<davem@nuts.davemloft.net>
	[APPLETALK]: Missing file add in recent commit.
	
	This fixes up ChangeSet 1.2086.1.75
	
	Signed-off-by: David S. Miller <davem@davemloft.net>

<bunk@stusta.de>
	[NET]: No reason for pktgen.c to include pci.h
	
	Signed-off-by: Adrian Bunk <bunk@stusta.de>
	Signed-off-by: David S. Miller <davem@davemloft.net>

<hch@lst.de>
	[PATCH] fix sata_svw compile
	
	Current BK doesn't compile with the G5 defconfig because the last
	libata updated missed to change sata_svw to the new conventions.
	
	Signed-off-by: Jeff Garzik <jgarzik@pobox.com>

<rmk@flint.arm.linux.org.uk>
	[ARM] Fix Acorn SCSI drivers to use ecard_{request,release}_resources

<rmk@flint.arm.linux.org.uk>
	[ARM] ecard: dumpirq state on unrecognised interrupts as well.

<rmk@flint.arm.linux.org.uk>
	[ARM] icside: use MMIO for board specific registers.

<rmk@flint.arm.linux.org.uk>
	[ARM] icside: use MMIO for IDE registers.

<rmk@flint.arm.linux.org.uk>
	[ARM] rapide: use MMIO for IDE registers.

<jejb@mulgrave.(none)>
	make osst compile again after st structure changes
	
	In a recent patch, all the ST_ typedefs were removed from st.h.  One of
	the side effects of this makes osst no longer compile.  This patch
	replaces all of the typedef uses from st.h with their struct
	equivalents.
	
	Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

<sfrench@smft41.(none)>
	[CIFS] CIFS readdir fixes part 4
	
	Signed-off-by: Steve French (sfrench@us.ibm.com)

<ben-linux@org.rmk.(none)>
	[ARM PATCH] 2240/1: S3C2410 - clock device id update
	
	Patch from Ben Dooks
	
	Clock code now uses the supplied device to check for
	the id of the clock, so uart clocks are now simply
	"uart" instead of "uart0", "uart1" and "uart2"
	
	Signed-off-by: Ben Dooks
	Signed-off-by: Russell King

<ben-linux@org.rmk.(none)>
	[ARM PATCH] 2235/1: S3C2410 - new serial driver - core updates (2/4)
	
	Patch from Ben Dooks
	
	Update the arch/arm/mach-s3c2410 core files for the
	new serial port bits, and fix the bugs with s3c2440
	handling.
	
	Signed-off-by: Ben Dooks
	Signed-off-by: Russell King

<ben-linux@org.rmk.(none)>
	[ARM PATCH] 2236/1: S3C2410 - new serial driver - machine updates (3/4)
	
	Patch from Ben Dooks
	
	Update the s3c2410 machines for the new serial handling,
	as well as add the clock sources the bast and vr1000
	rely on.
	
	Signed-off-by: Ben Dooks
	Signed-off-by: Russell King

<axboe@suse.de>
	[PATCH] warn once for unknown SCSI command
	
	Warn once for each unknown command sent through SG_IO or the old SCSI
	command ioctl.
	
	Signed-off-by: Jens Axboe <axboe@suse.de>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<axboe@suse.de>
	[PATCH] minor io scheduler documentation fixes
	
	Correct wrong paths and add link to deadline documentation.
	
	Patch from Christian Kujau <evil@g-house.de>
	
	Signed-off-by: Jens Axboe <axboe@suse.de>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<axboe@suse.de>
	[PATCH] allow arch override of BIOVEC_PHYS_MERGEABLE
	
	This patch is from the Xen crew - it allows override of deciding whether
	two given pages can be considered physically contigous or not. This is
	similar to how we handle iommu and virtual merging.
	
	Signed-off-by: Jens Axboe <axboe@suse.de>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<viro@parcelfarce.linux.theplanet.co.uk>
	[PATCH] tcx compile fix (typo)
	
	Spot the typo.
	
	Signed-off-by: Al Viro <viro@parcelfarce.linux.theplanet.co.uk>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<viro@parcelfarce.linux.theplanet.co.uk>
	[PATCH] missing braces in macros (asm-alpha/mmzone.h)
	
	Signed-off-by: Al Viro <viro@parcelfarce.linux.theplanet.co.uk>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<alexn@dsv.su.se>
	[PATCH] x86_64: assign_irq_vector should not be marked __init
	
	This box crashed at startup today and I noticed that some modules will
	need to have assign_irq_vector() available although it is marked as
	__init.
	
	Looks like it was done for i386 in but not x86_64...
	
	Signed-off-by: Alexander Nyberg <alexn@dsv.su.se>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<axboe@suse.de>
	[PATCH] Mark as_init and as_exit as init and exit functions
	
	Mark as_init and as_exit as init and exit functions, and make them static.
	
	Signed-off-by: Chris Wright <chris@osdl.org>
	Signed-off-by: Jens Axboe <axboe@suse.de>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<axboe@suse.de>
	[PATCH] Mark cfq_exit as an exit function
	
	Mark cfq_exit function as and exit function, and make it static.
	
	Signed-off-by: Chris Wright <chris@osdl.org>
	Signed-off-by: Jens Axboe <axboe@suse.de>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<axboe@suse.de>
	[PATCH] Mark deadline_init and deadline_exit as init and exit functions
	
	Mark deadline_init and deadline_exit as init and exit functions, and
	make them static.
	
	Signed-off-by: Chris Wright <chris@osdl.org>
	Signed-off-by: Jens Axboe <axboe@suse.de>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<sfrench@smft41.(none)>
	[CIFS] Improve SMB transact2 error checking and fix typo in warning message
	
	Signed-off-by: Steve French (sfrench@us.ibm.com)

<acme@conectiva.com.br>
	[NET] Assign inet transport sockets to the right module
	
	This is another case where when all the protocols use sk->sk_prot
	we can remove another member from struct sock, sk->sk_owner, instead
	using the sk->sk_prot->owner, i.e. this property is not per socket
	instance, but per protocol.
	
	Signed-off-by: Arnaldo Carvalho de Melo <acme@conectiva.com.br>
	Signed-off-by: David S. Miller <davem@davemloft.net>

<gerg@snapgear.com>
	[PATCH] m68knommu: add 527x and 528x support to ColdFire UART definitions
	
	Add conditional support for the 527x and 528x UART hardware to the common
	ColdFire serial port header.
	
	Signed-off-by: Greg Ungerer <gerg@snapgear.com>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<gerg@snapgear.com>
	[PATCH] m68knommu: add 527x and 528x support to ColdFire DMA definitions
	
	Add support for the 527x ColdFire family, and change the 5282
	support to be the generic 528x family in ColdFire DMA support
	defines.
	
	Signed-off-by: Greg Ungerer <gerg@snapgear.com>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<gerg@snapgear.com>
	[PATCH] m68knommu: move definition of kernel stack size
	
	Move definition of kernel stack size so that asm files can use it.
	Patch submitted by Philippe De Muyter <phdm@macqel.be>.
	
	Signed-off-by: Greg Ungerer <gerg@snapgear.com>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<gerg@snapgear.com>
	[PATCH] m68knommu: update comments in ColdFire PIT timer include
	
	Update PIT timer comments to reflect the fact that it is also used
	in the new ColdFire 527x family of processors.
	
	Signed-off-by: Greg Ungerer <gerg@snapgear.com>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<gerg@snapgear.com>
	[PATCH] m68knommu: kernel startup code for the ColdFire 5272 Feith SCALES board
	
	Kernel startup code specific to the ColdFire 5272 based Feith
	SACLES board.
	
	Signed-off-by: Greg Ungerer <gerg@snapgear.com>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<gerg@snapgear.com>
	[PATCH] m68knommu: add ColdFire 528x CPU reset code
	
	Add ColdFire 528x specific CPU reset code.
	
	Signed-off-by: Greg Ungerer <gerg@snapgear.com>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<gerg@snapgear.com>
	[PATCH] m68knommu: include 527x and 528x SIM hardware defines in common ColdFire SIM header
	
	Include the 527x and 528x family SIM module hardware definitions in the
	generic SIM include. All ColdFire specific code just includes the generic
	sim include without regard to which actuall ColdFire family member we
	are compiling for.
	
	Signed-off-by: Greg Ungerer <gerg@snapgear.com>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<gerg@snapgear.com>
	[PATCH] m68knommu: move senTec board supoprt to common 528x ColdFire directory
	
	Move ColdFire 5282 based senTec board startup code to the common
	528x directory.
	
	Signed-off-by: Greg Ungerer <gerg@snapgear.com>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<torvalds@ppc970.osdl.org>
	x86: only single-step into signal handlers if the tracer
	asked for it.

<torvalds@ppc970.osdl.org>
	Linux 2.6.10-rc2

<viro@parcelfarce.linux.theplanet.co.uk>
	[PATCH] alpha sysrq compile fix
	
	missing extern declaration in -Werror land...  Add the proper
	declaration to sysrq.h.

<viro@parcelfarce.linux.theplanet.co.uk>
	[PATCH] sparse: add -m64 to CHECKFLAGS on alpha and sparc64
	
	Get the sizes right, and thus avoid complaints about big constants etc.

<jamie@shareable.org>
	[PATCH] revert recent futex_wait fix
	
	The patch was wrong.  Back it out, and add some commentary explaining why we
	need to run queue_me() prior to the get_user().
	
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<jgarzik@pobox.com>
	[libata] fix DocBook bugs

<ben-linux@org.rmk.(none)>
	[ARM PATCH] 2234/3: S3C2410 - new serial driver (1/4)
	
	Patch from Ben Dooks
	
	S3C2410/S3C2440 new serial driver
	
	this patch includes the following
	
	- clock selection using clock core
	- handling for both 2410 and 2440 uarts
	- uart suspend/resume support
	- Dimitry Andric's fix for un-initialised spinlocks
	- Herbert Poetzl's fixes for the following
	-> break character recognition
	-> Magic-SYSRQ handling
	-> Uart software flow control (IrDA console)
	
	Updated to include rmk's comments from Patch #2234/1
	and fix a few checks for serial clocks, as well as
	merging fixes from rmk that had taken time to go
	through the biteepr to release.
	
	Signed-off-by: Ben Dooks
	Signed-off-by: Russell King

<rmk@flint.arm.linux.org.uk>
	[SERIAL] s3c2410: remove duplicate include

<ben-linux@org.rmk.(none)>
	[ARM PATCH] 2241/1: S3C2410 - default configuration update
	
	Patch from Ben Dooks
	
	updates to the default configuration to change the
	following:
	
	- use S3C2410 internal rtc instead of PC style rtc
	- add mtd support for nand
	- add mtd support for nor (and bast nor mapping)
	
	Signed-off-by: Ben Dooks
	Signed-off-by: Russell King

<ben-linux@org.rmk.(none)>
	[ARM PATCH] 2242/1: BAST - default configuration update
	
	Patch from Ben Dooks
	
	Updates for the Simtec BAST (EB2410ITX) default configuration
	to fix the following:
	
	- add mtd support for NAND and NOR
	- remove PC style parallel port (does not build)
	- use S3C2410 core RTC for time
	- remove non-bast S3C2410 machines
	
	Signed-off-by: Ben Dooks
	Signed-off-by: Russell King

<ben-linux@org.rmk.(none)>
	[ARM PATCH] 2243/1: BAST - move pm init to init_machine
	
	Patch from Ben Dooks
	
	Move the pm code to use the machine's init_machine
	code, instead of an late_initcall(). This change is
	as-per the documentation, and means we do not need to
	check for machine type in the init code.
	
	Thanks to Dimitry Andric for pointing this out
	
	Signed-off-by: Ben Dooks
	Signed-off-by: Russell King

<ben-linux@org.rmk.(none)>
	[ARM PATCH] 2246/1: S3C2410 - rename i2c depending on 2410/2440
	
	Patch from Ben Dooks
	
	Ensure the i2c platform device has the correct name if the
	system is an s3c2440.
	
	Signed-off-by: Ben Dooks
	Signed-off-by: Russell King

<ben-linux@org.rmk.(none)>
	[ARM PATCH] 2247/1: S3C2410 - serial low-level updates
	
	Patch from Ben Dooks
	
	Move the configuration for the UART to use for the low-level
	messages generated by the uncompressor out of the kernel debug
	section, which means the system builds properly without having
	kernel debug enabled.
	
	Also remove the use of including <config/xxx.h> headers,
	and the default configuration updates
	
	Signed-off-by: Ben Dooks
	Signed-off-by: Russell King

<bgerst@quark.didntduck.org>
	[PATCH] Regparm for x86 machine check handlers
	
	The patch to change traps and interrupts to the fastcall convention
	missed the machine check handlers.
	
	Signed-off-by: Brian Gerst <bgerst@didntduck.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<kernel@linuxace.com>
	[NETFILTER]: revert MASQUERADE optimization for mostly static IPs
	
	Signed-off-by: Phil Oester <kernel@linuxace.com>
	Signed-off-by: Patrick McHardy <kaber@trash.net>

<davem@nuts.davemloft.net>
	[AF_UNIX]: Serialize dgram read using semaphore just like stream.
	
	Signed-off-by: David S. Miller <davem@davemloft.net>

<davem@nuts.davemloft.net>
	[IPV6]: Temp fix for ipv6 link-local address problem.
	
	Make sure loopback_dev, if up, has the ipv6 bits
	for it setup before the addrconf netdev notifier
	is registered.
	
	Signed-off-by: David S. Miller <davem@davemloft.net>

<herbert@gondor.apana.org.au>
	[NETLINK]: Fix mc_list operations
	
	While doing the 2.4 version of the netlink patch, I noticed a bug
	in my mc_list code.  First of all it wasn't holding the table lock
	when adding nodes to the list.  It also didn't take the node off
	the list when multicast is switched off.
	
	Signed-off-by: Herbert Xu <herbert@gondor.apana.org.au>
	Signed-off-by: David S. Miller <davem@davemloft.net>

<rusty@rustcorp.com.au>
	[NETFILTER]: Cleanup find_appropriate_src() Fix
	
	The fix to find_appropriate_src left a stupid test, which has no
	effect but is incoherent at best.  It covers a corner case: if a
	previous connection from this source was mapped onto a different IP
	address (because it was explicitly told to), should the next one be
	mapped that was as well, if no explicit rule says to remap the src IP?
	
	I think the answer is yes: unless the user explicitly tells us to map
	into a particular range, we should follow the Kegel draft.
	
	Signed-off-by: Rusty Russell <rusty@rustcorp.com.au>
	Signed-off-by: David S. Miller <davem@davemloft.net>

<rusty@rustcorp.com.au>
	[NETFILTER]: Fix stack leakage in iptables
	
	Found running netfilter code under valgrind: we return some
	uninitialized stack to userspace (needs root).  Almost certainly
	harmless, but this suppressed the valgrind complaint, and
	doesn't hurt.
	
	Signed-off-by: Rusty Russell <rusty@rustcorp.com.au>
	Signed-off-by: David S. Miller <davem@davemloft.net>

<kaber@trash.net>
	[SCTP]: Fix inetaddr notifier chain corruption
	
	Signed-off-by: Patrick McHardy <kaber@trash.net>
	Signed-off-by: David S. Miller <davem@davemloft.net>

<Andries.Brouwer@cwi.nl>
	[PATCH] fix appletalk locking
	
	Just tried the new toy. It works.

<mchan@broadcom.com>
	[TG3]: 5753 support and a bug fix.
	
	Add support for 5753 chips which is mostly just adding
	in the appropriate PCI ids and recognizing that these
	chips do not use GPIO2 for Vaux switching.
	
	Also do not set DMA read water mark on PCI Express.
	In such configurations these bits are reserved.
	
	Signed-off-by: David S. Miller <davem@davemloft.net>

<davem@nuts.davemloft.net>
	[TG3]: Update driver version and reldate.
	
	Signed-off-by: David S. Miller <davem@davemloft.net>

<herbert@gondor.apana.org.au>
	[IPV6]: Fix xfrm6_tunnel_check_size mtu calc.
	
	OK, let's make it the same as IPv4.  This is still broken
	as the calculation is wrong.  However, to fix it properly
	we need to store the MTUs inside the dst's.  I'll get
	around to that sooner or later.
	
	Signed-off-by: Herbert Xu <herbert@gondor.apana.org.au>
	Signed-off-by: David S. Miller <davem@davemloft.net>

<ak@suse.de>
	[PATCH] x86-64: Fix get_user_pages access to vsyscall page
	
	The current kernel oopses on x86-64 when gdb steps into the vsyscall page. 
	This patch fixes it.
	
	I also removed the bogus NULL checks of *_offset and replaced them with
	proper _none checks.  I made them BUGs because vsyscall pages should be
	always mapped.
	
	Signed-off-by: Andi Kleen <ak@suse.de>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<piggin@cyberone.com.au>
	[PATCH] mm: tune the page allocator thresholds
	
	without patch:
	      pages_min   pages_low   pages_high
	dma        4          8          12
	normal   234        468         702
	high     128        256         384
	
	with patch:
	      pages_min   pages_low   pages_high
	dma       17         21          25
	normal   939       1173        1408
	high     128        160         192
	
	without patch:
	                             | GFP_KERNEL        | GFP_ATOMIC
	allocate immediately         |   9 dma, 469 norm |  9 dma, 469 norm
	allocate after waking kswapd |   5 dma, 234 norm |  3 dma,  88 norm
	allocate after synch reclaim |   5 dma, 234 norm |  n/a
	
	with patch:
	                             | GFP_KERNEL         | GFP_ATOMIC
	allocate immediately         |  22 dma, 1174 norm | 22 dma, 1174 norm
	allocate after waking kswapd |  18 dma,  940 norm |  6 dma,  440 norm
	allocate after synch reclaim |  18 dma,  940 norm |  n/a
	
	So the buffer between GFP_KERNEL and GFP_ATOMIC allocations is:
	
	2.6.8      | 465 dma, 117 norm, 582 tot = 2328K
	2.6.10-rc  |   2 dma, 146 norm, 148 tot =  592K
	patch      |  12 dma, 500 norm, 512 tot = 2048K
	
	Which is getting pretty good.
	
	kswap starts at:
	2.6.8     477 dma, 496 norm, 973 total
	2.6.10-rc   8 dma, 468 norm, 476 total
	patched    17 dma, 939 norm, 956 total
	
	So in terms of total pages, that's looking similar to 2.6.8.
	
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<hugh@veritas.com>
	[PATCH] low discontig highmem_start_page
	
	In the case of i386 CONFIG_DISCONTIGMEM CONFIG_HIGHMEM without highmem,
	highmem_start_page was wrongly initialized (from a NULL zone_mem_map),
	causing __change_page_attr to BUG on boot.
	
	Signed-off-by: Hugh Dickins <hugh@veritas.com>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<hugh@veritas.com>
	[PATCH] tmpfs free_inodes leak
	
	When new_inode failed, shmem_get_inode forgot to restore free_inodes.
	
	Signed-off-by: Hugh Dickins <hugh@veritas.com>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<trini@kernel.crashing.org>
	[PATCH] ppc32: Fix Motorola Sandpoint builds
	
	Motorola Sandpoint builds broke recently, as part of the pci_find_device
	-> pci_get_device change.  The following is the trivial fix.
	
	Signed-off-by: Tom Rini <trini@kernel.crashing.org>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<scheel@vnet.ibm.com>
	[PATCH] ppc64: iSeries legacy model emulation of PURR
	
	Here's a patch to extend the current Linux on Power support for PURR to
	legacy IBM iSeries servers (pre-Power5 processor models).  This patch
	enables the reporting of timebase metrics to reflect physical processor
	utilization in a system running multiple logical partitions which share the
	same physical processors.
	
	The patch simply uses existing user interfaces for Linux IBM Power5 based
	servers to report data already collected by the hypervisor.  The values
	reported with each call are running values in units of the system timebase.
	 The calculation of physical processor utilization results from two samples
	(purr1 and purr2) differing by a know interval (time) such that:
	
	    physical utilization = (purr2 - purr1) / (time * number of procs *
	timebase)
	
	where the number of procs and timebase can be obtained from /proc/cpuinfo.
	
	Applications have been written to the interface already defined and these
	applications have value back on the legacy iSeries models.
	
	Signed-off by: Jeff Scheel (scheel at vnet.ibm.com)
	Signed-off-by: Stephen Rothwell <sfr@canb.auug.org.au>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<david@gibson.dropbear.id.au>
	[PATCH] ppc64: Kill unused KRANGE_{START,END} macros
	
	Remove KRANGE_{START,END} macros from ppc64 code.  These were not used
	anywhere.  Further KRANGE_END was misleading, since it implied a limit on
	the linear mapping range based on the pagetable structure, whereas in fact
	the linear mapping does not use a (Linux) pagetable at all.
	
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<anton@samba.org>
	[PATCH] ppc64: ratelimit some rtas errors
	
	Use printk_ratelimit() in rtc code to avoid flooding the kernel log buffer
	with errors.  Also use rtas_get_error_log_max() instead of duplicating it
	in __fetch_rtas_last_error.
	
	Signed-off-by: Anton Blanchard <anton@samba.org>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<anton@samba.org>
	[PATCH] ppc64: Use pci_device_to_OF_node
	
	PCI_GET_DN() doesnt check to see if ->sysdata has been initialised
	correctly - we should instead use pci_device_to_OF_node.  Leave
	PCI_GET_DN() in the one performance critical case (iommu table lookup in
	pci DMA functions).  In this case ->sysdata is guaranteed to have been
	initialised by the iommu setup code.
	
	Signed-off-by: Anton Blanchard <anton@samba.org>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<anton@samba.org>
	[PATCH] ppc64: avoid 32bit only syscalls in unistd.h
	
	Steve Munroe points out that ppc64 glibc builds stubs for a number of 32bit
	only syscalls.  While none of them exist in the kernel syscall table, their
	existence in unistd.h means glibc still tries to use them then falls back
	onto the 64bit safe versions.
	
	Signed-off-by: Anton Blanchard <anton@samba.org>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<anton@samba.org>
	[PATCH] ppc64: reduce ifdef clutter in arch/ppc64/kernel/sysfs.c
	
	From: Christoph Hellwig <hch@lst.de>
	
	Reduce ifdef clutter in arch/ppc64/kernel/sysfs.c
	
	Signed-off-by: Anton Blanchard <anton@samba.org>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<anton@samba.org>
	[PATCH] ppc64: pci cleanup
	
	Cleanup ppc64 pci code.
	
	Signed-off-by: Anton Blanchard <anton@samba.org>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<anton@samba.org>
	[PATCH] ppc64: remove phb_set_model
	
	phb_set_model does a lot of work just to set up a text string that almost
	nothing uses.  Replace this all with an is_python() check.
	
	Signed-off-by: Anton Blanchard <anton@samba.org>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<anton@samba.org>
	[PATCH] ppc64: make fixup_winbond_82c105 pseries specific
	
	The winbond irq fixup is pSeries specific. Move it into pSeries_pci.c
	and check for PLATFORM_PSERIES.
	
	Signed-off-by: Anton Blanchard <anton@samba.org>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<anton@samba.org>
	[PATCH] ppc64: remove duplication in pci_alloc_*
	
	We duplicated the code in pci_alloc_pci_controller twice and had an ifdef for
	iseries as well, just to select between kmalloc and bootmem memory.  Change
	this so we instead pass the allocation into a common function -
	pci_setup_pci_controller.
	
	Also use a spinlock around the host_list and global_phb_number code since we
	now can modify it at runtime via hotplug.
	
	Signed-off-by: Anton Blanchard <anton@samba.org>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<anton@samba.org>
	[PATCH] ppc64: OF overrides for pci_probe_only, pci_assign_all_buses
	
	Allow pci_probe_only and pci_assign_all_buses to be modified via OF
	properties.
	
	Signed-off-by: Anton Blanchard <anton@samba.org>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<anton@samba.org>
	[PATCH] ppc64: remove BUG()s in pcibios_fixup_bus
	
	BUG() on missing IO or memory resources in pcibios_fixup_bus is rude, remove
	it.  Also use list_for_each_entry.
	
	Signed-off-by: Anton Blanchard <anton@samba.org>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<anton@samba.org>
	[PATCH] ppc64: get_phb_reg_prop only required on python PCI machines
	
	get_phb_reg_prop was only used for python PCI machines, so remove it from
	common code and call it from there.
	
	Signed-off-by: Anton Blanchard <anton@samba.org>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<anton@samba.org>
	[PATCH] ppc64: alloc_bootmem returns void *
	
	As Andrew points out, there is no need for casts since alloc_bootmem
	returns void*.
	
	Signed-off-by: Anton Blanchard <anton@samba.org>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<anton@samba.org>
	[PATCH] ppc64: cleanups hpte_init_native, kill warning for !PSERIES builds
	
	From: Christoph Hellwig <hch@lst.de>
	
	This splits out a small helper that checks whether tlb batching should be
	enabled from hpte_init_native, thus cleaning up the ifdef hell and killing
	a warning for pmac builds.
	
	Signed-off-by: Anton Blanchard <anton@samba.org>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<paulus@samba.org>
	[PATCH] PPC64 call ibm,os-term only if its available
	
	This patch is from Olaf Hering.
	
	The rtas property 'ibm,os-term' is not available on JS20, a panic will print:
	
	unable to mount root filesystem on /dev/hda
	Kernel panic - not syncing: Attempted to kill init!
	 <0>ibm,os-term call failed -1
	Rebooting in 42 seconds..
	
	Signed-off-by: Olaf Hering <olh@suse.de>
	Signed-off-by: Paul Mackerras <paulus@samba.org>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<paulus@samba.org>
	[PATCH] PPC64 rtasd: window when error_log_cnt could get zeroed
	
	This patch is from Jake Moilanen <moilanen@austin.ibm.com>.
	
	There appears to be a hole that if we get an log_error() call, that we could
	zero out our error log count in nvram. 
	
	When rtasd() starts up, it turns on the logging via 'no_more_logging = 0'.  If
	we get a log_error() call after that is set but before nvram_read_error_log
	has actually read nvram to set error_log_cnt, the log_error() call will write
	back to nvram a uninitialized error_log_cnt value, and wipe out our sequence
	number.
	
	To close the hole, simply move the 'no_more_logging = 0' till after nvram sets
	error_log_cnt but before pSeries_log_error is called.
	
	I also changed the 'no_more_logging' variable to be 'no_logging' since it's
	not only used when we stop logging now.  I also removed the "volatile" part of
	no_more_logging, since it's unneeded.  
	
	Signed-off-by: Jake Moilanen <moilanen@austin.ibm.com>
	Signed-off-by: Paul Mackerras <paulus@samba.org>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<sfr@canb.auug.org.au>
	[PATCH] ppc64 iSeries: don't share request queues in viocd
	
	This patch fixes the virtual cdrom driver to not share a single request
	queue.  Sharing the queue causes an oops if you remove the module and more
	than one cdrom exists.
	
	Signed-off-by: Stephen Rothwell <sfr@canb.auug.org.au>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<sfr@canb.auug.org.au>
	[PATCH] ppc64: add missing braces to rtc driver
	
	This patch fixes the PPC64 rtc driver where a pair of braces was missing.
	Not a big bug, but a bug none the less.  Also, while I was there, use C99
	initialisers.
	
	Signed-off-by: Stephen Rothwell <sfr@canb.auug.org.au>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<fenghua.yu@intel.com>
	[PATCH] add cpu_relax() in spin loops & clean up barrier()
	
	The patch adds cpu_relax() in the body of some spin loops for 2.6.9.  The
	patch also removes redundant barrier() code after cpu_relax() on ia32.
	
	In the PAUSE instruction section, IA32 SDM claims "it is recommended that a
	PASUE instruction be placed in all spin-wait loops".  And x86_64 SDM says
	that PAUSE instruction is same as legacy mode in IA-32e mode operation.
	
	This patch is against 2.6.9 (kernel.org).  It was tested on ia32 and
	x86_64.
	
	Acked-by: Andi Kleen <ak@muc.de>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<macro@linux-mips.org>
	[PATCH] i386: apic_printk() used before initialized
	
	Both detect_init_APIC() and init_apic_mappings() it's called from are
	invoked early, before the command line has been processed.  Therefore its
	meaningless to call apic_printk() from them as that depends on
	apic_verbosity which is initialized from the command line.
	
	I could move apic_verbosity initialization to parse_cmdline_early(), but I
	think that would be an overkill, the point being we are initerested in
	feedback from detect_init_APIC() anyway.  Without that it's hard to tell
	what's really going on as it's been the case with the recent report of the
	local APIC being non-functional despite the whole setup being apparently
	correct.  So I converted these calls to ordinary printk() invocations.  The
	init_apic_mappings() are less interesting, so I've made them output at the
	debug level.
	
	While at it I've made some obvious nearby formatting clean-up.
	
	Signed-off-by: Maciej W. Rozycki <macro@linux-mips.org>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<rddunlap@osdl.org>
	[PATCH] x86_64 hpet: fix function warning
	
	put function prototype outside of #ifdef block, to fix:
	arch/x86_64/kernel/time.c:941: warning: implicit declaration of
	function `oem_force_hpet_timer'
	
	Signed-off-by: Randy Dunlap <rddunlap@osdl.org>
	Cc: <ak@muc.de>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<ysato@users.sourceforge.jp>
	[PATCH] H8/300: /proc/cpuinfo typo fix
	
	Signed-off-by: Yoshinori Sato <ysato@users.sourceforge.jp>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<ysato@users.sourceforge.jp>
	[PATCH] H8/300: signal handling update
	
	Signed-off-by: Yoshinori Sato <ysato@users.sourceforge.jp>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<ysato@users.sourceforge.jp>
	[PATCH] H8/300: read{b,w,l} / write{b,w,l} error fix
	
	read{b,w,l} and write{b,w,l} compile error fix.
	
	Signed-off-by: Yoshinori Sato <ysato@users.sourceforge.jp>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<ysato@users.sourceforge.jp>
	[PATCH] H8/300: vmlinux.lds.S update
	
	- duplicate define section delete.
	
	- fix CONFIG_ROMKERNEL.
	
	Signed-off-by: Yoshinori Sato <ysato@users.sourceforge.jp>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<takata@linux-m32r.org>
	[PATCH] m32r: update for m32r-g00ff
	
	This patchset was originally from NIIBE Yutaka.
	
	These patch update the m32r kernel for a new bootloader "m32r-g00ff".  The
	"m32r-g00ff" has been written and developed by NIIBE Yutaka, and released
	under the GPL from http://www.gniibe.org/.
	
	So far, it supports two types of booting operations,
	CF boot and Network boot (HTTP boot).
	
	 * CF boot - boot from CompactFlash or Microdrive(TM)
	   We can boot a kernel from CF device.
	   To make use of m32r-g00ff, we just put a first stage IPL(initial program
	   loader) into a flash memory, and a secondary bootloader into CF media device.
	   Currently, LILO-21.4.4 can be used to write m32r-g00ff into the boot sector
	   of CF device on a cross development environment.
	
	 * HTTP boot - boot via network with HTTP protocol
	   By using m32r-g00ff, we can download and boot a kernel image from 
	   a web-server.  The m32r-g00ff downloads a kernel image from a given URL,
	   resolving the webserver's IP address by DNS.
	   As a preparation, we just place a secondary bootloader binary and
	   a kernel image on the webserver.
	
	- Position-independent zImage support;
	  this aims at removing constraints of zImage(vmlinuz)'s location.
	
	Signed-off-by: NIIBE Yutaka <gniibe@fsij.org>
	Signed-off-by: Hirokazu Takata <takata@linux-m32r.org>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<takata@linux-m32r.org>
	[PATCH] m32r: CF boot support for Mappi2
	
	- Update io_mappi2.c to access a CF device as an IDE disk device
	  for Mappi2 eva board.
	
	- Please set CONFIG_M32R_CFC=n, when you use m32r-g00ff for CF boot.
	
	Signed-off-by: NIIBE Yutaka <gniibe@fsij.org>
	Signed-off-by: Hirokazu Takata <takata@linux-m32r.org>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<takata@linux-m32r.org>
	[PATCH] m32r: update defconfig files
	
	Signed-off-by: Hirokazu Takata <takata@linux-m32r.org>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<takata@linux-m32r.org>
	[PATCH] m32r: update dot.gdbinit files
	
	This patch is for updating GDB initalization files (dot.gdbinit*) 
	for all m32r target boards.
	
	Currently, part of dot.gdbinit* files are maintained by using
	a "gen_gdbinit" script.
	http://www.linux-m32r.org/eng/download.html#othertools
	
	Signed-off-by: Hirokazu Takata <takata@linux-m32r.org>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<jdike@addtoit.com>
	[PATCH] uml: signal bug fix
	
	This patch fixes a bug introduced in the last batch of signal fixes.  The
	system call return value should only be reset if called diectly from a
	system call, i.e.  sigsuspend.  The fixes added earlier caused any
	interrupted non-zero system call return to be reset, confusing fork and
	vfork, among others.
	
	Signed-off-by: Jeff Dike <jdike@addtoit.com>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<jdike@addtoit.com>
	[PATCH] uml: 64-bit cleanups in the system calls
	
	64-bit cleanup - this fixes the return values of the system calls to be longs.
	
	Signed-off-by: Jeff Dike <jdike@addtoit.com>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<jdike@addtoit.com>
	[PATCH] uml: 64-bit type cleanups
	
	64-bit cleanliness - Fix the number of bits of the time_t field in the COW
	header to be 32 and change an int to a longs.
	
	Signed-off-by: Jeff Dike <jdike@addtoit.com>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<jdike@addtoit.com>
	[PATCH] uml: don't rule out syscall_nr == 0
	
	From: Bodo Stroesser <bstroesser@fujitsu-siemens.com>
	
	Change the valid system call numbers to reflect the possibility that we could
	have __NR_restart_syscall.
	
	Signed-off-by: Jeff Dike <jdike@addtoit.com>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<jdike@addtoit.com>
	[PATCH] uml: redundant code removal from signal delivery
	
	From: Bodo Stroesser <bstroesser@fujitsu-siemens.com>
	
	Change the do_signal interface to eliminate its argument.  Also, remove the
	calls from the system call handlers since they are redundant.  In all cases,
	pending signals are checked for in the interrupt handler.
	
	Temporarily, do_signal passes the current error to kern_do_signal.
	
	Signed-off-by: Jeff Dike <jdike@addtoit.com>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<jdike@addtoit.com>
	[PATCH] uml: redundant argument removal from handle_signal
	
	From: Bodo Stroesser <bstroesser@fujitsu-siemens.com>
	
	Change the interface to handle_signal so that it doesn't take the system call
	return value as an argument and eliminate its return value.
	
	kern_do_signal also now doesn't return immediately after determining that
	there is no signal to deliver.
	
	Signed-off-by: Jeff Dike <jdike@addtoit.com>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<jdike@addtoit.com>
	[PATCH] uml: handle_signal simplification
	
	From: Bodo Stroesser <bstroesser@fujitsu-siemens.com>
	
	Move the signal delivery code around to eliminate a couple of temporary
	variables.
	
	Signed-off-by: Jeff Dike <jdike@addtoit.com>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<jdike@addtoit.com>
	[PATCH] uml: fix setting of interrupted syscall return value
	
	From: Bodo Stroesser <bstroesser@fujitsu-siemens.com>
	
	handle_signal now checks whether it is being called from a system call
	invocation.
	
	Signed-off-by: Jeff Dike <jdike@addtoit.com>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<jdike@addtoit.com>
	[PATCH] uml: make signal frame construction more resemble x86
	
	From: Bodo Stroesser <bstroesser@fujitsu-siemens.com>
	
	This makes the UML signal frame construction interface somewhat more similar
	to x86 than before.  Also, some small code cleanup, and checking for errors
	before changing the signal mask in the SA_NODEFER case.
	
	Signed-off-by: Jeff Dike <jdike@addtoit.com>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<jdike@addtoit.com>
	[PATCH] uml: fix signal mask on delivery error
	
	From: Bodo Stroesser <bstroesser@fujitsu-siemens.com>
	
	If the user stack limit is reached or the signal stack assigned with
	sigaltstack() is invalid when a user signal handler with SA_ONSTACK has to be
	started, the signal mask of the interrupted user program is modified.  This
	happens because the mask, that should be used with the handler only, is
	written to "current->blocked" even if the handler could not be started.  But
	without a handler, no rewrite of the original mask at sys_sigreturn will be
	done.
	
	A slightly different case is sys_sigsuspend(), where the mask is already
	modified when kern_do_signal() is started.  "*oldset" and "current->blocked"
	are not equal here and thus current->blocked has to be set to *oldset, if an
	error occurs in handle_signal().
	
	For both cases I've written small tests, and with the patch the result is OK. 
	This issue is relevant for other architectures too (e.g.  i386, I've seen).
	
	Signed-off-by: Jeff Dike <jdike@addtoit.com>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<jdike@addtoit.com>
	[PATCH] uml: Don't delay segfaults
	
	From: Bodo Stroesser <bstroesser@fujitsu-siemens.com>
	
	This one covers the fact, that the SIGSEGV signal, which is created by
	force_sigsegv() in case of an error in handle_signal(), is not delivered to
	the user immediately.  In the worst case it even could be masked if a
	sigprocmask() systemcall follows immediately after return from kernel.  The
	patch is relevant for other architectures, too.
	
	Signed-off-by: Jeff Dike <jdike@addtoit.com>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<jdike@addtoit.com>
	[PATCH] uml: fix definitions of pte_unmap_*
	
	Some definitions of pte_unmap_* macros were written for HIGHPTE, which UML
	doesn't support.
	
	Signed-off-by: Jeff Dike <jdike@addtoit.com>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<jdike@addtoit.com>
	[PATCH] uml: LFS 64-bit cleanups
	
	Add ARCH_USER_CFLAGS so the arches can modify USER_CFLAGS.  We now take
	__ARCH_WANT_OLD_STAT and __ARCH_WANT_STAT64 from the base arch so that the
	LFS-64 code gets included or excluded automatically.
	
	Signed-off-by: Jeff Dike <jdike@addtoit.com>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<jdike@addtoit.com>
	[PATCH] uml: Remove unused declaration
	
	Remove an unused declaration of time_stamp().
	
	Signed-off-by: Jeff Dike <jdike@addtoit.com>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<jdike@addtoit.com>
	[PATCH] uml: remove some dead code
	
	Bodo pointed out that arch/um/kernel/skas/exec_user.c is dead code, so this
	removes it.
	
	Signed-off-by: Jeff Dike <jdike@addtoit.com>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<jdike@addtoit.com>
	[PATCH] uml: defconfig update
	
	Update defconfig.
	
	Signed-off-by: Jeff Dike <jdike@addtoit.com>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<schwidefsky@de.ibm.com>
	[PATCH] s390: core changes
	
	From: Stefan Bader <shbader@de.ibm.com>
	From: Martin Schwidefsky <schwidefsky@de.ibm.com>
	
	s390 core changes:
	 - Store correct set of registers to core dumps.
	 - Fix make install with separate obj directory.
	 - Regenerate default configuration.
	
	Signed-off-by: Martin Schwidefsky <schwidefsky@de.ibm.com>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<schwidefsky@de.ibm.com>
	[PATCH] s390: common i/o layer
	
	From: Cornelia Huck <cohuck@de.ibm.com>
	From: Thomas Spatzier <tspat@de.ibm.com>
	
	common i/o layer changes:
	 - Prevent double unregister of ccw devices.
	 - Move unregister out of the subchannel remove function, to
	   avoid live-lock due to hotplug if the root device is currently
	   indisposed.
	 - Delete pending timer after a machine check.
	 - Revert change to allocate qdio queues and SLIBS in DMA memory.
	 - Decrement ccw_device_init_count only after ccw_device_register is done.
	 - Remove unnecessary check in ccw_hotplug.
	
	Signed-off-by: Martin Schwidefsky <schwidefsky@de.ibm.com>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<schwidefsky@de.ibm.com>
	[PATCH] s390: dasd driver
	
	From: Stefan Weinhuber <wein@de.ibm.com>
	
	dasd driver changes:
	 - Fix parameter parsing to allow sequences of devices, ranges
	   and keywords.
	
	Signed-off-by: Martin Schwidefsky <schwidefsky@de.ibm.com>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<schwidefsky@de.ibm.com>
	[PATCH] s390: 3270 console
	
	3270 console driver changes:
	 - Add error handling in 3270 device startup.
	 - Do halt_io if startup has been interrupted.
	 - Fix reference counting in tty timers.
	 - Simplify set_timer functions.
	
	Signed-off-by: Martin Schwidefsky <schwidefsky@de.ibm.com>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<schwidefsky@de.ibm.com>
	[PATCH] s390: monreader docu
	
	From: Gerald Schaefer <geraldsc@de.ibm.com>
	
	Docu for the z/VM monitor record read access feature.
	
	Signed-off-by: Martin Schwidefsky <schwidefsky@de.ibm.com>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<schwidefsky@de.ibm.com>
	[PATCH] s390: crypto driver
	
	From: Eric Rossman <edrossma@us.ibm.com>
	
	s390 crypto driver changes:
	 - Small cleanup: misc -> crypto, header file defines,
	   variable names and a printk message.
	
	Signed-off-by: Martin Schwidefsky <schwidefsky@de.ibm.com>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<schwidefsky@de.ibm.com>
	[PATCH] s390: zfcp host adapter
	
	From: Andreas Herrmann <aherrman@de.ibm.com>
	
	zfcp host adapter change:
	 - Avoid usage of unregister debug feature.
	 - Avoid race when unregistering debug feature.
	 - Corrected some log messages for WKA ports.
	 - Don't pass NULL pointer to debug_register_view and debug_set_level.
	 - Some coding style cleanup.
	 - Fix race between scsi_add_device and deregistration of the adapter.
	 - Shorten & rename zfcp_els/zfcp_els_handler.
	 - Remove unused code for unused ELS commands.
	 - Evaluate response instead of request in adisc handler.
	 - Allocate qdio queue structures below 2GB.
	 - Remove ifdefs around ioctl32.h.
	 - Use CONFIG_COMPAT instead of CONFIG_S390_SUPPORT.
	 - Use semaphore in zfcp_ccw_shutdown.
	 - Strip down debug_register/debug_unregister.
	
	Signed-off-by: Martin Schwidefsky <schwidefsky@de.ibm.com>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<schwidefsky@de.ibm.com>
	[PATCH] s390: zfcp read-only lun sharing
	
	From: Volker Sameske <sameske@de.ibm.com>
	
	zfcp host adapter:
	 - Add read-only lun sharing feature.
	
	Signed-off-by: Martin Schwidefsky <schwidefsky@de.ibm.com>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<schwidefsky@de.ibm.com>
	[PATCH] s390: zfcp act enhancements
	
	From: Andreas Herrmann <aherrman@de.ibm.com>
	From: Maxim Shchetynin <maxim@de.ibm.com>
	
	zfcp host adapter changes:
	 - Add access control enhancements.
	 - Add event callbacks.
	
	Signed-off-by: Martin Schwidefsky <schwidefsky@de.ibm.com>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<shaggy@austin.ibm.com>
	[PATCH] radix_tree_delete() fix
	
	I was looking through the radix tree code and came across what I think
	is a bug in radix_tree_delete.
	
		for (idx = 0; idx < RADIX_TREE_TAG_LONGS; idx++) {
			if (pathp[0].node->tags[tag][idx]) {
				tags[tag] = 1;
				nr_cleared_tags--;
				break;
			}
		}
	
	The above loop should only be executed if tags[tag] is zero.  Otherwise,
	when walking up the tree, we can decrement nr_cleared_tags twice or more
	for the same value of tag, thus potentially exiting the outer loop too
	early.
	
	Ensure that nr_cleared_tags is only decremented once for each tag.
	
	Signed-off-by: Dave Kleikamp <shaggy@austin.ibm.com>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<neilb@cse.unsw.edu.au>
	[PATCH] kNFSd: fix d_find_alias brokenness
	
	10 weeks ago,
	  http://linux.bkbits.com:8080/linux-2.5/cset@415b3380pxf4sB97gM8ujLqDxi6GfQ
	
	The patch was mostly right, and fixed a real problem, but missed a bit.
	
	It passed the job of checking if an inode had a current alias off to
	d_find_alias instead of open-coding it in d_alloc_anon.  However there is one
	case where d_alloc_anon would not return the right dentry.  That case being
	when the inode was for the root of the filesystem.
	
	The root is a special case because it is not hashed.  All other dentries that
	are not hashed are quite un-interesting: There are "unlinked" but not yet
	closed.  The root of a filesystem is unhashed, but is interesting.
	
	Allowing d_find_alias to return an unhashed alias for a directory solves this
	problem.  It is safe because callers of d_find_alias on a directory inode
	either have a name for the inode already (so finding an unlinked directory by
	mistake is impossible) or will soon be looking for a name and will drop the
	dentry if a name is not found.
	
	Signed-off-by: Neil Brown <neilb@cse.unsw.edu.au>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<bunk@stusta.de>
	[PATCH] kill lockd_syms.c
	
	The patch below kills lockd_syms.c.
	
	Signed-off-by: Adrian Bunk <bunk@stusta.de>
	Acked-by: Trond Myklebust <trond.myklebust@fys.uio.no>
	Acked-by: Neil Brown <neilb@cse.unsw.edu.au>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<juerg@paldo.org>
	[PATCH] Don't remove /sys in initramfs
	
	Using the "resume" kernel parameter together with an initramfs revealed a
	bug that causes removal of the /sys directory in the initramfs' tmpfs,
	making the system unbootable.
	
	The source of the problem is that the try_name() function removes the /sys
	directory unconditionally, instead of removing it only when it has been
	created by try_name().
	
	The attached patch only removes /sys if it has been created before.
	
	Signed-off-by: Juerg Billeter <juerg@paldo.org>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<akpm@osdl.org>
	[PATCH] sound_alloc_dmap memory allocation warning suppression
	
	alloc_pages() failures are expected here.  Manually prevent warnings.
	
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<ysato@users.sourceforge.jp>
	[PATCH] CONFIG_UNIX98_PTY=n warning fix
	
	ptmx_open() only exists if CONFIG_UNIX98_PTYS.
	
	Signed-off-by: Yoshinori Sato <ysato@users.sourceforge.jp>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<paulus@samba.org>
	[PATCH] Fix pmac_zilog.c so it compiles again
	
	It seems that pmac_zilog.c got missed in the dev.power_state to
	dev.power.power_state conversion.  This patch makes that change, and also
	fixes a problem where it would not compile if CONFIG_MAGIC_SYSRQ was set but
	CONFIG_SERIAL_CORE_CONSOLE was not.
	
	Signed-off-by: Paul Mackerras <paulus@samba.org>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<paulus@samba.org>
	[PATCH] Do power_state conversion for mesh.c
	
	This patch changes dev.power_state to dev.power.power_state in
	drivers/scsi/mesh.c, and fixes an uninitialized variable use in a printk.
	
	Signed-off-by: Paul Mackerras <paulus@samba.org>
	Cc: James Bottomley <James.Bottomley@steeleye.com>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<paulus@samba.org>
	[PATCH] Add __iomem annotations to drivers/scsi/mac53c94.c
	
	This patch adds __iomem annotations to drivers/scsi/mac53c94.c, and changes
	one use of st_le32 to writel.
	
	Signed-off-by: Paul Mackerras <paulus@samba.org>
	Cc: James Bottomley <James.Bottomley@steeleye.com>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<paulus@samba.org>
	[PATCH] power_state and __iomem for mediabay.c
	
	This patch does the power_state -> power.power_state conversion for
	drivers/macintosh/mediabay.c and makes it use void __iomem * for ioremap
	cookies.  Once the IDE code is converted to not use unsigned long for MMIO
	register addresses, I will be able to remove a few casts from here.
	
	Signed-off-by: Paul Mackerras <paulus@samba.org>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<paulus@samba.org>
	[PATCH] __iomem annotations for swim3.c
	
	This patch adds __iomem annotations to drivers/block/swim3.c.
	
	Signed-off-by: Paul Mackerras <paulus@samba.org>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<paulus@samba.org>
	[PATCH] Multilink fix for ppp_generic.c
	
	I released ppp-2.4.3 yesterday, with much improved support for multilink
	operation - when the first link is terminated, its pppd no longer exits
	immediately, but keeps running in order to keep the ppp interface up while
	there are other links still in the bundle.
	
	However, this shows up a bug in the kernel ppp driver, which is that there is
	no way for the pppd controlling the bundle to know when the last link in the
	bundle is terminated.  This patch provides such a way: with this patch, pppd
	will get an EOF when reading from the /dev/ppp instance for the bundle when
	there are no channels connected.
	
	The change does not affect older versions of pppd or normal non-multilink
	operation (I have tested to make sure of that).
	
	Signed-off-by: Paul Mackerras <paulus@samba.org>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<roland@topspin.com>
	[PATCH] cdev_init: zero out cdev before kobject_init()
	
	Right now, cdev_init() works in a way that is not very intuitive.  If a
	driver passes an uninitialized struct cdev to cdev_init(), then an
	uninitialized struct kobject will be passed to kobject_init(), which does
	kset_get() on kobj->kset, which probably points off into space and causes
	an oops.  Drivers can work around this by zeroing out their struct cdev in
	advance (and indeed most if not all of the things passed to cdev_init()
	come from BSS) but I think it makes more sense for cdev_init() to live up
	to its name and actually work on an uninitialized cdev.
	
	Signed-off-by: Roland Dreier <roland@topspin.com>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<Andries.Brouwer@cwi.nl>
	[PATCH] dm_init unresolved reference to _exits
	
	drivers/md/dm.c dm_int refers to _exits which is defined as __exitdata. 
	With CONFIG_HOTPLUG=n, __exitdata is discarded.
	
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<agk@redhat.com>
	[PATCH] device-mapper: dm-crypt fix for zero-length key
	
	dm-crypt fix for zero-length key.
	
	Signed-Off-By: Christophe Saout <christophe@saout.de>
	Signed-Off-By: Alasdair G Kergon <agk@redhat.com>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<agk@redhat.com>
	[PATCH] device-mapper: Fix some DMERR macro usage
	
	Fix some DMERR macro usage. It already adds : and \n.
	
	Signed-Off-By: Alasdair G Kergon <agk@redhat.com>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<agk@redhat.com>
	[PATCH] device-mapper: Add DM_TARGET_MSG
	
	Add DM_TARGET_MSG ioctl so data can be passed to a dm target after its table
	has been loaded.
	
	Signed-Off-By: Alasdair G Kergon <agk@redhat.com>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<agk@redhat.com>
	[PATCH] device-mapper: Allow referencing by device number
	
	Currently userspace code using the dm ioctls must refer to a mapped device by
	either its name or its uuid.  But in some circumstances you know neither of
	those directly.
	
	This patch lets you reference devices by their major/minor numbers as an
	alternative.
	
	Signed-Off-By: Alasdair G Kergon <agk@redhat.com>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<sylvain.meyer@worldonline.fr>
	[PATCH] fbdev: Add vram option to intelfb
	
	- add vram option to reserve more memory than stolen by BIOS if needed
	- fix intelfbhw_pan_display typo
	- add __initdata annotations
	
	Signed-off-by: Sylvain Meyer <sylvain.meyer@worldonline.fr>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<adaplas@hotpop.com>
	[PATCH] fbdev: Fix for using >16 pixel wide font in fb console
	
	From: Jani Jaakkola <jjaakkol@cs.Helsinki.FI>:
	
	The first one was that fbcon_set_font() used one byte padding for fonts having
	width 16 <= width < 24, which was wrong since the pieces of code actually
	using the font did not use any padding.  This is fixed in the included patch
	and also fbcon_set_font() is made a little cleaner.  After the patch the
	following font is not garbled in fb console:
	http://www.cs.helsinki.fi/u/jjaakkol/psf/bitstream_vera_sans_mono_roman.16x30.psf
	
	The other bug is that fonts having height == 32 crash the kernel.  I have no
	fix for this (at least not yet), but it can be reproduced with font:
	http://www.cs.helsinki.fi/u/jjaakkol/psf/bitstream_vera_sans_mono_roman.17x32.psf.
	
	Signed-off-by: Antonino Daplas <adaplas@pol.net>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<adaplas@hotpop.com>
	[PATCH] fbdev: Support for bigger than 16x32 fonts in softcursor
	
	Fix crash if font font is bigger than 16x32 by dynamically allocating buffer
	based on font dimensions instead of statically allocating at 64 bytes.
	
	Signed-off-by: Antonino Daplas <adaplas@pol.net>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<adaplas@hotpop.com>
	[PATCH] fbdev: Support for bigger than 16x32 fonts in rivafb cursor
	
	- Add support for fonts bigger thatn 16x32 by dynamically allocating buffer
	  based on font dimensions instead of statically allocating at 64 bytes.
	
	- use softcursor if cursor size exceeds 32x32.
	
	- fix rivafb_cursor if cursor width is not divisible by 2
	
	Signed-off-by: Antonino Daplas <adaplas@pol.net>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<adaplas@hotpop.com>
	[PATCH] fbcon: Disable fbcon cursor if vt softcursor is enabled
	
	Problem reported by Gerd Knorr:
	
	  (1) boot with vesafb (thats what I'm using, maybe it shows on other
	      framebuffers and/or vgacon as well).
	  (2) login into one terminal, then type "echo -ne '\033[?17;15;239c'".
	      You should have a nice, yellow and *not* blinking cursor block.
	      That is what I have in my .profile because I can't stand the
	      blinking cursors.
	  (3) Switch to another terminal.  The cursor goes into blinking
	      underscore mode now (i.e. the default cursor).
	  (4) Switch back to the first terminal.  Now you have a yellow block
	      with the last two pixel lines (i.e. the underscore) blinking.
	
	This bug is caused by both fbcon_cursor and vt softcursor being active at
	the same time.
	
	Fix:
	
	- Disable fbcon_cursor if vt softcursor is active (vc->vc_cursor_type &
	  0x10) != 0.
	
	- Recheck/reload fbcon cursor for each vt switch
	
	Signed-off-by: Antonino Daplas <adaplas@pol.net>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<adaplas@hotpop.com>
	[PATCH] fbdev: Allow mode change even if EDID block is not found
	
	- use symbol_get() to check for the presence of i2c
	
	- allow mode changing even if EDID block is not found (no I2C support)
	
	- fix crashes on chipsets that do not have i2c support
	
	- shorten string in info->fix.id
	
	- trivial chip name changes
	
	Signed-off-by: Antonino Daplas <adaplas@pol.net>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<adaplas@hotpop.com>
	[PATCH] fbdev: Fix cursor in doublescan mode in atyfb
	
	fix hw cursor in doublescan modes
	
	Signed-off-by: Alexander Kern <alex.kern@gmx.de>
	Signed-off-by: Antonino Daplas <adaplas@pol.net>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<adaplas@hotpop.com>
	[PATCH] fbdev: Fix typo in atyfb
	
	Fix typo, and decrease amount of output
	
	Signed-off-by: Alexander Kern <alex.kern@gmx.de>
	Signed-off-by: Antonino Daplas <adaplas@pol.net>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<adaplas@hotpop.com>
	[PATCH] fbdev: Change the find_mode behavior
	
	let find_mode search for nearest refresh rate
	
	Signed-off-by: Alexander Kern <alex.kern@gmx.de>
	Signed-off-by: Antonino Daplas <adaplas@pol.net>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<Markus.Lidel@shadowconnect.com>
	[PATCH] i2o: changed code with BUG() to BUG_ON()
	
	- changed code with BUG() to use BUG_ON() which could be optimized by some
	  platforms (original from Milton Miller)
	
	Signed-off-by: Markus Lidel <Markus.Lidel@shadowconnect.com>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<Markus.Lidel@shadowconnect.com>
	[PATCH] i2o: remove unused code and make needlessly global code static
	
	- remove unused code
	- make needlessly global code static
	
	Signed-off-by: Adrian Bunk <bunk@stusta.de>
	Signed-off-by: Markus Lidel <Markus.Lidel@shadowconnect.com>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<Markus.Lidel@shadowconnect.com>
	[PATCH] i2o: changed old queueing code with wait_event API
	
	- removed old queueing code and replaced it with new wait_event API
	
	Signed-off-by: Markus Lidel <Markus.Lidel@shadowconnect.com>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<Markus.Lidel@shadowconnect.com>
	[PATCH] i2o: converted SPIN_LOCK_UNLOCKED into spin_lock_init()
	
	- changed initialization of spin locks from SPIN_LOCK_UNLOCKED into
	  spin_lock_init()
	
	Signed-off-by: Markus Lidel <Markus.Lidel@shadowconnect.com>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<miles@gnu.org>
	[PATCH] Remove duplicate safe_for_read(READ_BUFFER) entry in scsi_ioctl.c
	
	Signed-off-by: Miles Bader <miles@gnu.org>
	Cc: James Bottomley <James.Bottomley@steeleye.com>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<jejb@titanic.il.steeleye.com>
	Fix badness in scsi_lib.c
	
	From: Mike Christie <mikenc@us.ibm.com>
	
	> Oct 26 23:32:55 mina kernel: Unable to handle kernel paging request at 
	> virtual address 6b6b6c7b
	> Oct 26 23:32:55 mina kernel:  printing eip:
	> Oct 26 23:32:55 mina kernel: f882b8ce
	> Oct 26 23:32:55 mina kernel: *pde = 00000000
	> Oct 26 23:32:55 mina kernel: Oops: 0000 [#1]
	> Oct 26 23:32:55 mina kernel: PREEMPT
	> Oct 26 23:32:55 mina kernel: Modules linked in: sd_mod usb_storage 
	> ide_cd cdrom sg scsi_mod rd
	> Oct 26 23:32:55 mina kernel: CPU:    0
	> Oct 26 23:32:55 mina kernel: EIP:    0060:[<f882b8ce>]    Not tainted VLI
	> Oct 26 23:32:55 mina kernel: EFLAGS: 00010296   (2.6.10-rc1-mm1y)
	> Oct 26 23:32:55 mina kernel: EIP is at 
	> scsi_block_when_processing_errors+0xe/0xe0 [scsi_mod]
	> Oct 26 23:32:55 mina kernel: eax: 00000000   ebx: 6b6b6b6b   ecx: 
	> f88ef640   edx: ec5b6578
	> Oct 26 23:32:55 mina kernel: esi: e9baa4b8   edi: c17e9268   ebp: 
	> e9677f0c   esp: e9677eb4
	> Oct 26 23:32:55 mina kernel: ds: 007b   es: 007b   ss: 0068
	> Oct 26 23:32:55 mina kernel: Process fdisk (pid: 2891, 
	> threadinfo=e9676000 task=ea0c61f0)
	> Oct 26 23:32:55 mina kernel: Stack: 00000000 00000001 00000000 00000000 
	> 00000000 00000000 00000000 00000000
	> Oct 26 23:32:55 mina kernel:        00000000 00000000 00000003 e9677ef0 
	> c17e9268 0000006b c17e9268 e9677f0c
	> Oct 26 23:32:55 mina kernel:        c0159761 c17e93e4 00000000 e9b98780 
	> e9baa4b8 c17e9268 e9677f24 f88ef6a8
	> Oct 26 23:32:55 mina kernel: Call Trace:
	> Oct 26 23:32:55 mina kernel:  [<c01056cf>] show_stack+0x7f/0xa0
	> Oct 26 23:32:55 mina kernel:  [<c0105876>] show_registers+0x156/0x1c0
	> Oct 26 23:32:55 mina kernel:  [<c0105af6>] die+0x156/0x2e0
	> Oct 26 23:32:55 mina kernel:  [<c011628d>] do_page_fault+0x36d/0x69c
	> Oct 26 23:32:55 mina kernel:  [<c01051ed>] error_code+0x2d/0x38
	> Oct 26 23:32:55 mina kernel:  [<f88ef6a8>] sd_release+0x68/0xa0 [sd_mod]
	> Oct 26 23:32:55 mina kernel:  [<c0184c03>] blkdev_put+0x183/0x1b0
	> Oct 26 23:32:55 mina kernel:  [<c01784ad>] __fput+0x14d/0x160
	> Oct 26 23:32:55 mina kernel:  [<c0176797>] filp_close+0x57/0x90
	> Oct 26 23:32:55 mina kernel:  [<c01768e3>] sys_close+0x113/0x240
	> Oct 26 23:32:55 mina kernel:  [<c0104ff1>] sysenter_past_esp+0x52/0x71
	> Oct 26 23:32:55 mina kernel: Code: 0c 8b 43 04 8b 00 89 5c 24 04 c7 04 
	> 24 e4 d1 83 f8 89 44 24 08 e8 d3 21 8f c7 8d 76 00 55 89 e5 57 56 53 83 
	> ec 4c 8b 75 08 8b 1e <8b> 83 10 01 00 00 a8 08 74 7c fc 31 c0 8d 7d b4 
	> b9 05 00 00 00
	
	
	The problem with using shost_for_each_device wrt to the above oops is
	that scsi_forget_host sets the state to SDEV_CANCEL, so that when
	scsi_host_cancel iterates over the devices using shost_for_each_device
	it cannot get a handle to the sdev (scsi_device_get fails becuase the
	state is set to SDEV_CANCEL). And, __scsi_iterate_devices does not clear
	the next pointer if this happens, so I think this is needed to fix just
	the refcount bug in shost_for_each_device.
	
	Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

<ben-linux@org.rmk.(none)>
	[ARM PATCH] 2248/1: S3C2410 - missing serial config in arch/arm/mach-s3c2410/Kconfig
	
	Patch from Ben Dooks
	
	Add patch that should have been in 2247/1, defining
	CONFIG_S3C2410_LOWLEVEL_UART_PORT
	
	Signed-off-by: Ben Dooks
	Signed-off-by: Russell King

<dwmw2@shinybook.infradead.org>
	RS library spelling fixes.
	
	Originally from Joe Perches <joe@perches.com>
	Signed-off-by: Thomas Gleixner <tglx@linutronix.de>
	Signed-off-by: David Woodhouse <dwmw2@infradead.org>
	

<dwmw2@shinybook.infradead.org>
	MTD: Intel flash chip driver locking fixes.
	
	Cleanups and fixes in preparation for XIP support -- fix unbalanced use
	of get_chip() and put_chip(), and clean up the code a little in 
	preparation for what's to come.
	
	Signed-off-by: Nicolas Pitre <nico@cam.org>
	Signed-off-by: David Woodhouse <dwmw2@infradead.org>

<dwmw2@shinybook.infradead.org>
	MTD: DiskOnChip drivers should no longer require old docecc code.
	
	Signed-off-by: Thomas Gleixner <tglx@linutronix.de>
	Signed-off-by: David Woodhouse <dwmw2@infradead.org>

<dwmw2@shinybook.infradead.org>
	MTD map/device driver cleanups -- remove bogus __iomem casts
	
	Signed-off-by: Thomas Gleixner <tglx@linutronix.de>
	Signed-off-by: David Woodhouse <dwmw2@infradead.org>

<dwmw2@shinybook.infradead.org>
	MTD: Fix suspend/resume on Intel flash chip driver
	
	We weren't correctly resetting our idea of the chip's state on suspend
	in all circumstances. Fix that.
	
	Signed-off-by: David Woodhouse <dwmw2@infradead.org>

<dwmw2@shinybook.infradead.org>
	MTD NAND drivers: cleanup MODULE_PARAM and bogus __iomem casts.
	
	Signed-off-by: Thomas Gleixner <tglx@linutronix.de>
	Signed-off-by: David Woodhouse <dwmw2@infradead.org>

<dwmw2@shinybook.infradead.org>
	MTD: DiskOnChip driver fixes: MODULE_PARAM and __iomem, and fix RS init
	
	Signed-off-by: Thomas Gleixner <tglx@linutronix.de>
	Signed-off-by: David Woodhouse <dwmw2@infradead.org>

<dwmw2@shinybook.infradead.org>
	MTD: Fix oops after erase in NFTL/INFTL (DiskOnChip translation layers)
	
	Fix kernel NULL pointer dereference at mtd_erase_callback+6 when trying
	to insmod INFTL or NFTL modules.
	
	Signed-off-by: Kalev Lember <kalev@colleduc.ee>
	Signed-off-by: David Woodhouse <dwmw2@infradead.org>

<dwmw2@shinybook.infradead.org>
	MTD: Fix Pb1550 board NAND driver to not read write-only registers
	
	Signed-off-by: Pete Popov <ppopov@embeddedalley.com>
	Signed-off-by: David Woodhouse <dwmw2@infradead.org>
	

<dwmw2@shinybook.infradead.org>
	MTD: Compile fix for the typo fix in ixp2000 map driver.
	
	Signed-off-by: Deepak Saxena <dsaxena@plexity.net>
	Signed-off-by: David Woodhouse <dwmw2@infradead.org>

<dwmw2@shinybook.infradead.org>
	MTD: Avoid false positives in CFI probe due to floating data bus
	
	Signed-off-by: Russell King <rmk@arm.linux.org.uk>
	Signed-off-by: David Woodhouse <dwmw2@infradead.org> 

<dwmw2@shinybook.infradead.org>
	MTD: Fix detection of hardware partitions in Intel flash chips
	
	Determine it from the CFI query data instead of hard-coding it.
	
	Signed-off-by: Nicolas Pitre <nico@cam.org>
	Signed-off-by: David Woodhouse <dwmw2@infradead.org>

<brking@us.ibm.com>
	[PATCH] sg: Fix oops of sg_cmd_done and sg_release race
	
	The following patch fixes a race condition in sg of sg_cmd_done racing
	with sg_release. I've seen this bug hit several times on test machines
	and the following patch fixes it. The race is that if srp->done is set
	and the waiting thread gets a spurious wakeup immediately afterwards,
	then the waiting thread can end up executing and completing, then getting
	closed, freeing sfp before the wake_up_interruptible is called, which
	then will result in an oops. The oops is fixed by locking around the
	setting srp->done to 1 and the wake_up, and also locking around the
	checking of srp->done, which guarantees that the wake_up_interruptible
	will always occur before the sleeping thread gets a chance to run.
	
	Signed-off-by: Brian King <brking@us.ibm.com>
	Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

<rct@gherkin.frus.com>
	[PATCH] sym53c500_cs driver update
	
	The attached minor patch to linux/drivers/scsi/pcmcia/sym53c500_cs.c
	allows interrupt sharing, which is evidently a "must have" feature for
	at least G4 PowerBooks (ppc architecture).  The other user of the New
	Media Bus Toaster reports that his powerbook consistently assigns the
	yenta CardBus controller IRQ to whatever card he inserts.
	
	Signed-off-by: Bob Tracy <rct@frus.com>
	Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

<bunk@stusta.de>
	[PATCH] SCSI_QLOGIC_1280_1040 dependencies
	
	On Sat, Oct 23, 2004 at 11:55:20AM +1000, Eyal Lebedinsky wrote:
	> Should the second line be indented?
	>
	> Qlogic QLA 1240/1x80/1x160 SCSI support (SCSI_QLOGIC_1280) [M/n/?] m
	> Qlogic QLA 1020/1040 SCSI support (SCSI_QLOGIC_1280_1040) [N/y/?] (NEW) y
	
	Correct, SCSI_QLOGIC_1280_1040 should depend on SCSI_QLOGIC_1280.
	
	The patch below does this.
	
	Additionally, it prevents the case that both drivers are built
	statically and both support the 1020/1040.
	
	Signed-off-by: Adrian Bunk <bunk@stusta.de>
	Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

<markh@osdl.org>
	[PATCH] 2.6 aacraid: Interrupt function cleanup
	
	This patch updates the adapter health check function and cleans up some
	unused interrupt related functions and macros.
	
	Signed-off-by: Mark Haverkamp <markh@osdl.org>
	Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

<dwmw2@shinybook.infradead.org>
	JFFS2: locking fixes
	
	We weren't correctly holding a lock when adding raw nodes to the 
	per-inode list.
	
	Signed-off-by: Artem Bityuckiy <dedekind@infradead.org>
	Signed-off-by: David Woodhouse <dwmw2@infradead.org>

<Kai.Makisara@kolumbus.fi>
	[PATCH] "mt-st tell" fails in 2.6.10-rc1
	
	On Tue, 2 Nov 2004, Marc Thomas wrote:
	> I've noticed that in 2.6.10-rc1 the "mt tell" command (from mt-st) fails to
	> report SCSI tape position, returning "No such device". Other tape (read)
	> operations appear to be ok. It worked fine in 2.6.9-rc4.
	
	The patch at the end of this message should fix this (passes basic tests).
	Someone added the ioctl to reset the SCSI device but the error handling
	is not quite correct. The code in 2.6.10-rc1 allows st_ioctl to continue
	unless reset succeeded. The fix allows continuation only if
	scsi_nonblockable_ioctl() does not handle the ioctl (returns -ENODEV).
	retval is cleared because the following code assumes it is zero unless set
	to something else.
	
	Signed-off-by: Kai Makisara <kai.makisara@kolumbus.fi>
	Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

<dwmw2@shinybook.infradead.org>
	JFFS2: Remove redundant 'ino' arg from jffs2_get_inode_nodes()
	
	We had it already in the inocache structure we were being passed
	
	Signed-off-by: Artem Bityuckiy <dedekind@infradead.org>
	Signed-off-by: David Woodhouse <dwmw2@infradead.org>

<dwmw2@shinybook.infradead.org>
	JFFS2: make sync() actually work by providing ->sync_fs method.
	
	Signed-off-by: David Woodhouse <dwmw2@infradead.org>

<markh@osdl.org>
	[PATCH] 2.6 aacraid: rx check health function update
	
	This patch updates the rx check health function.  My previous only
	updated the rkt check health code.  This and the previous patch should
	fix the kmalloc return checking bug:
	
	http://bugme.osdl.org/show_bug.cgi?id=3699
	
	Signed-off-by: Mark Haverkamp <markh@osdl.org>
	Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

<dwmw2@shinybook.infradead.org>
	JFFS2: jffs2_fs_i.h needs <asm/semaphore.h>
	
	... and should include it directly rather than hoping it's been done.
	
	Signed-off-by: David Woodhouse <dwmw2@infradead.org>

<akpm@osdl.org>
	[PATCH] megaraid 2.20.4.1 Driver
	
	From: "Bagalkote, Sreenivas" <sreenib@lsil.com>
	
	We are releasing megaraid 2.20.4.1 driver. This version fixes two issues -
	
	- Handle IOCTL command timeouts properly
	
	- Replace incorrectly introduced pci_dma_sync_{sg,single}_for_cpu with
	  correct pci_dma_sync_{sg,single}_for_device.
	
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

<akpm@osdl.org>
	Remove duplicate safe_for_read(READ_BUFFER)
	
	From: Miles Bader <miles@gnu.org>
	
	Signed-off-by: Miles Bader <miles@gnu.org>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

<cp@absolutedigital.net>
	[PATCH] Documentation/kernel-parameters.txt: scsi param updates
	
	This patch updates Documentation/kernel-parameters.txt with the proper
	SCSI LUNs params and adds a description for 'max_luns'.
	
	Signed-off-by: Cal Peake <cp@absolutedigital.net>
	Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

<g.liakhovetski@gmx.de>
	[PATCH] tmascsim: (resend updated) track_queue_full
	
	Use scsi_track_queue_full(), don't lie about driver's queueing
	abilities.
	
	Signed-off-by: Guennadi Liakhovetski <g.liakhovetski@gmx.de>
	Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

<stern@rowland.harvard.edu>
	[PATCH] sd.c: adjust READ_CAPACITY for broken devices
	
	A number of USB mass storage devices return the wrong value in response to
	READ CAPACITY: They give the total number of blocks rather than the
	highest block number.  Currently the usb-storage driver tries to adjust
	for this by altering the contents of the reply buffer.  That's not a very
	good idea because it prevents users from seeing what the device actually
	has to say; it violates the principle that a transport should do nothing
	more than transfer data.
	
	This patch moves the responsibility for adjusting the capacity to the sd
	driver instead, by adding a new device flag.  After this has been merged
	the corresponding change (to set the flag) will be made to the usb-storage
	driver.
	
	Signed-off-by: Alan Stern <stern@rowland.harvard.edu>
	Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

<g.liakhovetski@gmx.de>
	[PATCH] refactor tmscsim inititalization code
	
	Streamline EEPROM handling code
	
	The patch below is a fixed (and slightly reworked) patch from Christoph.
	Thanks to Chiaki Ishikawa for fixes and tests.
	
	Original author: Christoph Hellwig
	Signed-off-by: Guennadi Liakhovetski <g.liakhovetski@gmx.de>
	Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

<bunk@stusta.de>
	[PATCH] SCSI: aha1542.c: make some code static
	
	The patch below makes some needlessly global code static.
	
	Signed-off-by: Adrian Bunk <bunk@stusta.de>
	Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

<bunk@stusta.de>
	[PATCH] SCSI atp870u.c: make a needlessly global function
	
	The patch below makes the function is870 which has no external users
	static.
	
	Signed-off-by: Adrian Bunk <bunk@stusta.de>
	Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

<bunk@stusta.de>
	[PATCH] SCSI dc395x.c: make a function static
	
	The patch below makes the needlessly global function adapter_init_chip
	static.
	
	Signed-off-by: Adrian Bunk <bunk@stusta.de>
	Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

<bunk@stusta.de>
	[PATCH] SCSI: fdomain.c: make a struct static
	
	The patch below makes a needlessly global struct static.
	
	Signed-off-by: Adrian Bunk <bunk@stusta.de>
	Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

<dwmw2@shinybook.infradead.org>
	JFFS2: fix printk argument type warning
	
	fs/jffs2/gc.c:832: warning: signed size_t format, different type arg 
	(arg 3)
	
	Signed-off-by: Randy Dunlap <rddunlap@osdl.org>
	Signed-off-by: David Woodhouse <dwmw2@infradead.org>

<bunk@stusta.de>
	[PATCH] SCSI qla1280: some firmware files cleanups
	
	- make all this needlessly global code static
	- remove the unused firmware_version variables
	
	Signed-off-by: Adrian Bunk <bunk@stusta.de>
	Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

<lenehan@twibble.org>
	[PATCH] SCSI dc395x.c: store pci device pointer
	
	Store the PCI device pointer into the adapter control block. This is
	used in the pci_map_*/pci_unmap_* calls and previously it would have
	been set to NULL. This appears to be no problem for x86 but is a
	problem for sparc64.
	
	Signed-off-by: Jamie Lenehan <lenehan@twibble.org>
	Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

<lenehan@twibble.org>
	[PATCH] SCSI dc395x.c: Fix type for irq and io ports
	
	Store the port and irq in unsigned long and unsigned int's instead of
	as u16's and u8's. The later was fine on x86 but not on sparc64.
	
	Signed-off-by: Jamie Lenehan <lenehan@twibble.org>
	Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

<lenehan@twibble.org>
	[PATCH] SCSI dc395x.c: Call pci_disable during cleanup.
	
	Call pci_disable_device if initialisation fails and during cleanup.
	
	Signed-off-by: Jamie Lenehan <lenehan@twibble.org>
	Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

<Andries.Brouwer@cwi.nl>
	[PATCH] net: scheduling policing fix
	
	Missing goto.
	
	Acked by Thomas Graf

<dwmw2@shinybook.infradead.org>
	MTD: some cleanups
	
	The patch below makes the following cleanups for code under drivers/mtd/ :
	- make some needlessly global code static
	
	Signed-off-by: Adrian Bunk <bunk@stusta.de>
	Signed-off-by: David Woodhouse <dwmw2@infradead.org>

<dwmw2@shinybook.infradead.org>
	MTD: Fix memory leak in FTL translation layer.
	
	Signed-off-by: David Woodhouse <dwmw2@infradead.org>

<jbarnes@sgi.com>
	[IA64] fix phys. address conversion in ia64_pal_tr_read
	
	The palinfo module may call ia64_pal_tr_read using an IPI.  If the processor
	receiving the IPI is idle, the call will fail since the idle process stack is
	in region 5 and ia64_pal_tr_read uses __pa rather than ia64_tpa.  This small
	patch fixes the problem by making it use ia64_tpa instead.
	
	Signed-off-by: Jesse Barnes <jbarnes@sgi.com>
	Signed-off-by: Tony Luck <tony.luck@intel.com>

<hch@lst.de>
	[IA64] remove dead wood from asm-ia64/hardirq.h
	
	syscall_count, ksoftirqd_task, local_syscall_count, local_ksoftirqd_task
	and local_nmi_count are totally unused (and gone from other
	architectures aswell)
	
	nmi_count() is a stub only used once in arch/ia64/kernel/irq.c, so we
	can use 0 directly there.  I suspect it was added to keep irq.c in sync
	with i386, but even the CONFIG_GENERIC_HARDIRQS code (<hint>which IA64
	needs to be converted to</hint>) leaves /proc/interrupts output to the
	architecture because it's so different over the architectures.
	
	Signed-off-by: Christoph Hellwig <hch@lst.de>
	
	Deleted the code to print "NMI:" and a row of zeroes from irq.c -Tony
	
	Signed-off-by: Tony Luck <tony.luck@intel.com>

<jejb@titanic.il.steeleye.com>
	SCSI: Fix Bug 3753 (multiple definition of ST_partstat)
	
	Fix a missed piece of junk from a typedef conversion in st.h
	
	Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

<tglx@linutronix.de>
	[PATCH] Lock initializer unifying Batch 2 (SCSI)
	
	To make spinlock/rwlock initialization consistent all over the kernel,
	this patch converts explicit lock-initializers into spin_lock_init() and
	rwlock_init() calls.
	
	Currently, spinlocks and rwlocks are initialized in two different ways:
	
	  lock = SPIN_LOCK_UNLOCKED
	  spin_lock_init(&lock)
	
	  rwlock = RW_LOCK_UNLOCKED
	  rwlock_init(&rwlock)
	
	this patch converts all explicit lock initializations to
	spin_lock_init() or rwlock_init(). (Besides consistency this also helps
	automatic lock validators and debugging code.)
	
	The conversion was done with a script, it was verified manually and it
	was reviewed, compiled and tested as far as possible on x86, ARM, PPC.
	
	There is no runtime overhead or actual code change resulting out of this
	patch, because spin_lock_init() and rwlock_init() are macros and are
	thus equivalent to the explicit initialization method.
	
	That's the second batch of the unifying patches.
	
	Signed-off-by: Thomas Gleixner <tglx@linutronix.de>
	Acked-by: Ingo Molnar <mingo@elte.hu>
	Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

<ben-linux@org.rmk.(none)>
	[ARM PATCH] 2251/1: S3C2410 - system timer rename [cosmetic]
	
	Patch from Ben Dooks
	
	Correct the name used when registering the system
	tick interrupt from S32410 to S3C2410.
	
	Signed-off-by: Dimitry Andric
	
	Signed-off-by: Ben Dooks
	Signed-off-by: Russell King

<stevef@stevef95.austin.ibm.com>
	[CIFS] smb transact2 cleanup
	
	Signed-of-by: Steve French (sfrench@us.ibm.com)

<jgarzik@pobox.com>
	[libata ahci] minor fixes
	
	Add support for ioctl handling.
	Remove incorrect comment.

<axboe@suse.de>
	[PATCH] io context leak on queue drain
	
	If the drain flag is set on the queue, get_request() needs to drop the
	acquired iocontext to avoid leaks.
	
	Signed-off-by: Jens Axboe <axboe@suse.de>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<dhowells@redhat.com>
	[PATCH] Fork fix fix
	
	The attached patch fixes the fork fix to avoid the divide-by-zero error I'd
	previously fixed, but without using any sort of conditional.
	
	Signed-off-by: David Howells <dhowells@redhat.com>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<chrisw@osdl.org>
	[PATCH] binfmt_elf: handle p_filesz == 0 on PT_INTERP section
	
	Jakub Jelinek points out that current fix has an underflow problem
	if elf_ppnt->p_filesz == 0.  Fix that up, and also stop overwriting
	interpreter buffer, simply check that it's NULL-terminated.
	
	From: Jakub Jelinek <jakub@redhat.com>
	Signed-off-by: Chris Wright <chrisw@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<chrisw@osdl.org>
	[PATCH] setup_arg_pages can insert overlapping vma
	
	Florian Heinz built an a.out binary that could map bss from 0x0 to
	0xc0000000, and setup_arg_pages() would be unhappt in insert_vma_struct
	because the arg pages overlapped.  This just checks before inserting,
	and bails out if it would overlap.
	
	Signed-off-by: Chris Wright <chrisw@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<chrisw@osdl.org>
	[PATCH] a.out: error check on set_brk
	
	It's possible for do_brk() to fail during set_brk() when exec'ing and
	a.out.  This was noted with Florian's a.out binary and overcommit set to
	0. 
	
	Capture this error and terminate properly.
	
	Signed-off-by: Chris Wright <chrisw@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<davem@nuts.davemloft.net>
	[SPARC64]: Couple of do_sparc64_fault fixes.
	
	1) Use in_atomic() for atomicity check.
	2) Add mmap_sem deadlock on bad kernel access
	   prevention just as on i386
	3) Use VM_FAULT_* macros instead of magic constants.
	
	Signed-off-by: David S. Miller <davem@davemloft.net>

<davem@nuts.davemloft.net>
	[SPARC64]: Two io_remap_page_range() fixes.
	
	1) BUG on presence of existing mappings just
	   as remap_pfn_range does
	2) Perform TLB flush while holding page_table_lock
	
	Signed-off-by: David S. Miller <davem@davemloft.net>

<davem@nuts.davemloft.net>
	[SPARC64]: Do not set VM_LOCKED on I/O mapped areas.
	
	Use VM_RESERVED instead.
	
	Signed-off-by: David S. Miller <davem@davemloft.net>

<davem@nuts.davemloft.net>
	[SPARC64]: Update defconfig.
	
	Signed-off-by: David S. Miller <davem@davemloft.net>

<marcel@holtmann.org>
	[Bluetooth] Update copyright information
	
	The initial firmware loading routine for the Broadcom based chips was
	written by Maxim Krasnyansky and so he also owns a copyright for this
	driver.
	
	Signed-off-by: Marcel Holtmann <marcel@holtmann.org>

<marcel@holtmann.org>
	[Bluetooth] Correct locking for zero SCID responses
	
	The l2cap_get_chan_by_ident() function must lock the socket with the
	bh_lock_sock() function on success.
	
	Signed-off-by: Marcel Holtmann <marcel@holtmann.org>

<marcel@holtmann.org>
	[Bluetooth] Add support for L2CAP secure mode
	
	The secure mode requests an authentication and enables the encryption
	for that connection. After the successful execution of these procedures
	it triggers the generation of a new link key.
	
	Signed-off-by: Marcel Holtmann <marcel@holtmann.org>

<marcel@holtmann.org>
	[Bluetooth] Check for L2CAP reliability
	
	The L2CAP sockets can now set LM_RELIABLE flag and get notification
	when a reliability problem with the ACL connection is detected. The
	Bluetooth qualification tests require this functionality.
	
	Signed-off-by: Maxim Krasnyansky <maxk@qualcomm.com>
	Signed-off-by: Marcel Holtmann <marcel@holtmann.org>

<ak@suse.de>
	[PATCH] x86-64: fix boot crash on VIA systems
	
	quirk_via_irqpic cannot be __devinit because it runs at
	pci_enable_device() time now.
	
	This fixes a boot time crash on a VIA x86-64 machine.
	
	Signed-off-by: Andi Kleen <ak@suse.de>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<linux-dev@morknet.de>
	[PATCH] Make dss1_divert ISDN module work on SMP again
	
	When I switched my installation from kernel 2.4 to 2.6 I recognized that
	the ISDN module dss1_divert was marked incompilable (config option
	CONFIG_CLEAN_COMPILE must be turned off). 
	
	The compile problem was the obsolete using of kernel 2.4 critical
	sections.  I replaced the cli() stuff with spinlocks as explained in the
	Documentation/spinlocks.txt file.  After that the module compiles and
	runs as expected. 
	
	Signed-off-by: Steffen A. Mork <linux-dev@morknet.de>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<sfrench@smft41.(none)>
	CIFS: additional smb trans2 cleanup
	
	Signed-off-by: Steve French (sfrench@us.ibm.com)

<jgarzik@pobox.com>
	[libata docs] add chapter on libata driver API

<bzolnier@trik.(none)>
	[ide] update CRISv10 IDE driver
	
	Signed-off-by: Mikael Starvik <starvik@axis.com>
	Signed-off-by: Bartlomiej Zolnierkiewicz <bzolnier@gmail.com>

<bzolnier@trik.(none)>
	[ide] no need to alloc sg_table in CRISv10 IDE driver
	
	Signed-off-by: Bartlomiej Zolnierkiewicz <bzolnier@gmail.com>

<bzolnier@trik.(none)>
	[ide] update documentation for ide params
	
	From: Magnus Damm <magnus.damm@gmail.com>
	
	This patch removes ide parameters marked as obsolete in the source and
	adds documentation for "ide=". I think I got it right, the important
	part for me is "ide=nodma".
	
	Signed-off-by: Bartlomiej Zolnierkiewicz <bzolnier@gmail.com>

<bzolnier@trik.(none)>
	[ide] "ide=nodma" printout fix
	
	From: Magnus Damm <magnus.damm@gmail.com>
	
	This simple patch changes the output from this:
	..
	ide_setup: ide=nodmaIDE: Prevented DMA
	..
	to this:
	..
	ide_setup: ide=nodma : Prevented DMA
	..
	
	Signed-off-by: Bartlomiej Zolnierkiewicz <bzolnier@gmail.com>

<bzolnier@trik.(none)>
	[ide] remove RICOH CD-R/RW MP7083A from DMA blacklist
	
	From: Srihari Vijayaraghavan <sriharivijayaraghavan@yahoo.com.au>
	
	I have tested my RICOH CD-R/RW with this patch (on CD reading/writing),
	and it works just fine with DMA enabled.
	
	Signed-off-by: Bartlomiej Zolnierkiewicz <bzolnier@gmail.com>

<bzolnier@trik.(none)>
	[ide] small IDE cleanups
	
	The patch below does the following small cleanups in the IDE code:
	- make some needlessly global code static
	- remove two unused functions from pdc202xx_new.c
	
	Signed-off-by: Adrian Bunk <bunk@stusta.de>
	Signed-off-by: Bartlomiej Zolnierkiewicz <bzolnier@gmail.com>

<bzolnier@trik.(none)>
	[ide] fix /proc/ide/hd?/settings to not spam logs
	
	On Thu, 11 Nov 2004 17:10:21 +0100, Jens Axboe <axboe@suse.de> wrote:
	> On Thu, Nov 11 2004, Alan Cox wrote:
	> > > +   printk(KERN_WARNING "Warning: /proc/ide/hd?/settings interface is "
	> > > +                       "obsolete, and will be removed soon!\n");
	> > > +
	> >
	> > The above should be rate limited or on the write case moved to after
	> > the capable() check. A program polling these settings now makes a nasty
	> > noise and wipes the logs. A user can also do it intentionally.
	> 
	> Or just print it once...
	
	Signed-off-by: Bartlomiej Zolnierkiewicz <bzolnier@gmail.com>

<linux-dev@morknet.de>
	[PATCH] fix dss1_divert fixes
	
	As noted by Bartlomiej, this makes the spinlock be a proper lock rather
	than just a local lock to each user.
	
	Signed-off-by: Steffen A. Mork <linux-dev@morknet.de>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<stevef@stevef95.austin.ibm.com>
	[CIFS] Improve SMB buffer allocation make SMB sending more efficient part 1
	
	Signed-off-by: Steve French (sfrench@us.ibm.com)

<herbert@gondor.apana.org.au>
	[IPV4/IPV6]: Remove frag_list check from output path.
	
	I've removed the frag_list check before fragmenting and we'll
	rely on dev_queue_xmit to fix things up if necessary.  Any
	functions in between should do the right thing since they need
	to handle non-linear skb's anyway.  Well that's the theory :)
	
	Signed-off-by: Herbert Xu <herbert@gondor.apana.org.au>
	Signed-off-by: David S. Miller <davem@davemloft.net>

<davem@nuts.davemloft.net>
	[IPV6]: Set sk_prot early enough in inet6_create()
	
	It needs to be before the sk_set_owner() call
	else we OOPS.
	
	Signed-off-by: David S. Miller <davem@davemloft.net>

<sfrench@smft41.(none)>
	[CIFS} cifs readdir part 5
	
	Signed-off-by: Steve French (sfrench@us.ibm.com)

<torvalds@ppc970.osdl.org>
	Fix floppy driver lock-up when you have an irq storm.
	
	It happens with misconfigured interrupts (and no floppy
	controller).
	
	We should probably also make floppy use the irq probing
	mechanism, which handles that situation more gracefully.

<adaplas@hotpop.com>
	[PATCH] rivafb: fix broken burst length calculation
	
	As noted by Linus, the burst-length "log2()" calculations were broken by
	the cleanup.
	
	This reverts to the old code.

<andrew@walrond.org>
	[PATCH] fbdev: Fix rivafb breakage (typo introduced by NV IO access cleanups)
	
	Fix typo introduced during changes to use NV_ macros,
	which caused screen corruption when using rivafb
	
	Signed-off-by: Andrew Walrond <andrew@walrond.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<torvalds@ppc970.osdl.org>
	Fix reading /proc/<pid>/mem when parent dies.
	
	We should not touch "self_exec_id" here. The parent changed,
	not we.

<eranian@hpl.hp.com>
	[IA64] perfmon: enable interrupts around semaphore call
	
	fix a problem in pfm_handle_work() where a task may
	go to sleep in down_interruptible() with interrupts
	disabled. This may happen only for a monitored thread
	for which the PFM_FL_NOTIFY_BLOCK flag is set. The fix
	re-enables interrupts around the semaphore call. It is safe
	to do so because pfm_handle_work() is called from
	do_notify_user() which is called only when the task is about
	to leave the kernel, i.e., no risk of stack overflow because
	of interrupt nesting.
	
	fix a debug printk warning in pfm_write_pmcs()
	
	signed-off-by: Stephane Eranian <eranian@hpl.hp.com>
	ack-by: David Mosberger <davidm@hpl.hp.com>
	Signed-off-by: Tony Luck <tony.luck@intel.com>

<patrick@tykepenguin.com>
	[DECNET]: Remove DECNET_SIOCGIFCONF.
	
	It's only purpose seems to be to break ifconfig. It often gets enabled by
	default by distributors who like to set everything on, and it just confuses
	people.
	
	The functionality is available via netlink anyway - which is what anyone using
	DECnet will be using for configuration.
	
	Signed-off-by: Patrick Caulfield <patrick@tykepenguin.com>
	Signed-off-by: David S. Miller <davem@davemloft.net>

<rddunlap@osdl.org>
	[SCTP]: Fix printk arg type
	
	fix printk argument type warning:
	net/sctp/socket.c:2672: warning: format argument is not a pointer (arg 5)
	
	
	Signed-off-by: Randy Dunlap <rddunlap@osdl.org>
	Signed-off-by: David S. Miller <davem@davemloft.net>

<Ian.Pratt@cl.cam.ac.uk>
	[IPV4]: Missing pskb_may_pull in icmp_filter.
	
	Signed-off-by: David S. Miller <davem@davemloft.net>

<lnville@tuxdriver.com>
	[VLAN]: change_mtu should return 0 on success.
	
	Signed-off-by: John W. Linville <linville@tuxdriver.com>
	Signed-off-by: David S. Miller <davem@davemloft.net>

<ben-linux@org.rmk.(none)>
	[ARM PATCH] 2249/1: S3C2410 - update help for arch/arm/Kconfig.debug
	
	Patch from Ben Dooks
	
	Update help-text to show the new option for controlling
	where the low-level debug messgaes go.
	
	Signed-off-by: Ben Dooks
	Signed-off-by: Russell King

<ben-linux@org.rmk.(none)>
	[ARM PATCH] 2256/1: S3C2410 - dma load fixes
	
	Patch from Ben Dooks
	
	Fix pair of bugs in dma loading code
	
	1) no need to error if loading onto stopped channel
	2) irq code prints error if buffer done callback
	   fully reloads the channel.
	
	Signed-off-by: Ben Dooks
	Signed-off-by: Russell King

<shemminger@osdl.org>
	[RANDOM]: Remove TCP MD4 code if not CONFIG_INET
	
	Signed-off-by: Stephen Hemminger <shemminger@osdl.org>
	Signed-off-by: David S. Miller <davem@davemloft.net>

<jmorris@redhat.com>
	[AF_UNIX]: Fix SELinux crashes with SOCK_SEQPACKET
	
	1) Don't call security_unix_may_send() hook during sendmsg() for 
	SOCK_SEQPACKET, and ensure that sendmsg() can only be called on a 
	connected socket so as not to bypass the security_unix_stream_connect() 
	hook.
	
	2) Return -EINVAL if sendto() is called on SOCK_SEQPACKET with an address 
	supplied.
	
	Signed-off-by: James Morris <jmorris@redhat.com>
	Signed-off-by: David S. Miller <davem@davemloft.net>

<ben-linux@org.rmk.(none)>
	[ARM PATCH] 2263/1: S3C2410 - gpio pin config fixes
	
	Patch from Ben Dooks
	
	Fix S3C2410_GPE3, S3C2410_GPE4 and S3C2410_GPE7
	pin functions, and add S3C2440 AC97 pin functions
	
	Signed-off-by: Ben Dooks
	Signed-off-by: Russell King

<dsaxena@net.rmk.(none)>
	[ARM PATCH] 2252/1: Fix IXP4XX timer interrupt implementation
	
	Patch from Deepak Saxena
	
	The current timer interrupt implementation can cause time to skip
	forward by ~65s and causes a 1 minute pause during bootup. The fix
	for this was found during 2.4 but got lost in the 2.6 transition.
	  
	Details @:
	  
	http://lists.arm.linux.org.uk/pipermail/linux-arm-kernel/2003-September/017171.html
	  
	
	Signed-off-by: Deepak Saxena
	Signed-off-by: Russell King

<dsaxena@net.rmk.(none)>
	[ARM PATCH] 2253/1: Fix IXP4xx PCI config cycle routines
	
	Patch from Deepak Saxena
	
	The IXP4xx PCI config cycle routines currently virtualize accesses
	to device 0:0 to map to the host bridge itself. This is technically
	incorrect b/c on certain boards we have an actual device wired to 0:0
	and the existing code will not see these.
	  
	
	Signed-off-by: Deepak Saxena
	 
	Signed-off-by: Russell King

<jejb@mulgrave.(none)>
	SCSI: fix USB forced remove oops
	
	Because of the changes to add the target in to the
	driver model, the cancellation method no-longer works
	correctly.
	
	Fix it by iterating using shost_for_each_device instead.
	
	Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

<dsaxena@net.rmk.(none)>
	[ARM PATCH] 2254/1: Fix ixp4xx-regs.h PCI config address typo
	
	Patch from Deepak Saxena
	
	There seems to be a typo that has creeped into
	include/asm/arch-ixp4xx/ixp4xx-regs.h. IXP4XX_EXP_CFG_BASE_VIRT and
	IXP4XX_PCI_CFG_BASE_VIRT were both defined to the same value. The patch
	changes PCI_CFG_BASE_VIRT to the value in the memory map comment.
	  
	
	Signed-off-by: Deepak Saxena
	Signed-off-by: Russell King

<dsaxena@net.rmk.(none)>
	[ARM PATCH] 2258/1: Add missing IXP2000 Makefile.boot file
	
	Patch from Deepak Saxena
	
	Signed-off-by: Deepak Saxena
	Signed-off-by: Russell King

<dsaxena@net.rmk.(none)>
	[ARM PATCH] 2262/1: Various IXP2000 typo fixes and comment cleanups
	
	Patch from Deepak Saxena
	
	Patch from Lennert Buytenhek
	
	Signed-off-by: Lennert Buytenhek
	
	Signed-off-by: Deepak Saxena
	Signed-off-by: Russell King

<dsaxena@net.rmk.(none)>
	[ARM PATCH] 2268/1: Update Documentation/arm/Booting
	
	Patch from Deepak Saxena
	
	One of the problems I have seen with several bootloaders is
	that they forget to disable network devices before jumping 
	into the kernel and we end up with kernel text being overwritten
	by random data before the in-kernel driver resets the devices.
	This patch adds a blurb to the ARM Bootloader documentation 
	reminding developers to quiesce all DMA capable devices before
	executing the kernel.
	
	Signed-off-by: Deepak Saxena
	Signed-off-by: Russell King

<davem@nuts.davemloft.net>
	[SPARC]: Fix serial console handling.
	
	Due to recent logic changes in uart_add_one_port(), the
	serial console was being registered twice.  To avoid
	this, so serial console init before we actually register
	the uarts ports with the core serial layer.
	
	Noticed by William Lee Irwin III <wli@holomorphy.com>
	
	Signed-off-by: David S. Miller <davem@davemloft.net>

<iod00d@hp.com>
	[IA64] perfmon: fix double end-of-comment in previous checkin
	
	Following trivial patch fixes what looks like a merge bug.
	
	Signed-off-by: Grant Grundler <iod00d@hp.com>
	Signed-off-by: Tony Luck <tony.luck@intel.com>

<rmk@flint.arm.linux.org.uk>
	[PCMCIA] Don't place Cardbus bridges into D3 state on suspend.
	
	Some laptops, notably IBM T22, refuse to suspend when the Cardbus
	bridge is placed into D3.  Therefore, comment out the call for the
	time being.

<sfrench@smft41.(none)>
	[CIFS] cifs readdir changes part 6 
	
	move cifs search specific file handle info into distinct struct, create new FindFirst SMB worker function
	
	Signed-off-by: Steve French (sfrench@us.ibm.com)

<akpm@osdl.org>
	[PATCH] fix kobject varargs bug
	
	From: Gerd Knorr <kraxel@bytesex.org>
	
	It uses the varargs list twice in a illegal way.  That doesn't harm on i386
	by pure luck, but blows things up on amd64 machines.
	
	Using var args list twice without calling va_start twice is illegal.
	
	Signed-off-by: Gerd Knorr <kraxel@bytesex.org>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Greg Kroah-Hartman <greg@kroah.com>

<maneesh@in.ibm.com>
	[PATCH] fix oops in sysfs_remove_dir()
	
	The following patch should avoid the sysfs_remove_dir() oops you are
	seeing while device removal. It anyway fixes the obvious error and is
	needed. But it will not make any change to the first error you are
	seeing while connecting the device.
	
	
	o Following patch avoids the sysfs_remove_dir() oops when it is passed
	  a kobject with NULL dentry.
	
	Signed-off-by: Maneesh Soni <maneesh@in.ibm.com>
	Signed-off-by: Greg Kroah-Hartman <greg@kroah.com>

<khali@linux-fr.org>
	[PATCH] I2C: Do not register useless smsc47m1
	
	While verifying my stack of patches against what you sent to Linus last
	week, I noticed this one. Looks like I simply forgot to send it to you,
	as I cannot find any trace of it in the lm_sensors mailing-list
	archives.
	
	The patch prevents an smsc47m1 device from being registered when no
	monitoring function is actually active within the chip. See this ticket
	for background:
	  http://secure.netroedge.com/~lm78/readticket.cgi?ticket=1801
	This is certainly better to explicitely fail in this case than leave the
	user with an empty sysfs directory (except for alarms), which tends to
	make him/her think of a driver bug, which it isn't (what it really is is
	a BIOS brokenness).
	
	Signed-off-by: Jean Delvare <khali@linux-fr.org>
	Signed-off-by: Greg Kroah-Hartman <greg@kroah.com>

<khali@linux-fr.org>
	[PATCH] I2C: Fixes to the i2c-amd756-s4882 driver
	
	While working on the 2.4 version of the i2c-amd756-s4882 driver, I
	noticed a few quirks on the 2.6 version I sent to you. The following
	patch attempts to fix them.
	
	Signed-off-by: Jean Delvare <khali@linux-fr.org>
	Signed-off-by: Greg Kroah-Hartman <greg@kroah.com>

<khali@linux-fr.org>
	[PATCH] I2C: Cleanups to the recent smbus functions removal
	
	This patch cleans up the recent removal of smbus functions proposed by
	Arjan and then fixed by Gabriel. Changes are as follow:
	
	1* Discard i2c_smbus_block_process_call, as it isn't used anywhere
	   either. I guess that Arjan missed it because it wasn't exported.
	
	2* Document the functions removal, so that people have at least an idea
	   that the functions can be restored later if needed.
	
	Signed-off-by: Jean Delvare <khali@linux-fr.org>
	Signed-off-by: Greg Kroah-Hartman <greg@kroah.com>

<paubert@iram.es>
	[PATCH] I2C: minor comment fix
	
	It seems so. BTW I hate wrong comments and happened to add one
	in my patch. To fix my blunder, can you apply the appended one
	line removal on top of Jean's patch.
	
	
	Signed-off-by: Gabriel Paubert <paubert@iram.es>
	Signed-off-by: Greg Kroah-Hartman <greg@kroah.com>

<thomas@plx.com>
	[PATCH] I2C: i2c-nforce2.c add support for nForce3 Pro 150 MCP
	
	This is the all new and improved version of the patch:
	- following the advise from Jean Delvare I removed the redundant definition
	  of the PCI IDs from the driver and just add them to the pci_ids.h file.
	- the patch is now created against linux 2.6.10-RC2.
	
	Signed-off-by: Thomas Leibold <thomas@plx.com>
	Signed-off-by: Greg Kroah-Hartman <greg@kroah.com>

<daniel.ritz@gmx.ch>
	[PATCH] USB: Add some help text for touchkitusb
	
	add some help text for touchkitusb. the howto there should also
	work for mtouchusb and other touchscreens using the input layer.
	
	Signed-off-by: Daniel Ritz <daniel.ritz@gmx.ch>
	Signed-off-by: Greg Kroah-Hartman <greg@kroah.com>

<petkan@nucleusys.com>
	[PATCH] USB: pegasus endian fixes
	
	big-endian related fixes;
	
	Signed-off-by: Petko Manolov <petkan@nucleusys.com>
	Signed-off-by: Greg Kroah-Hartman <greg@kroah.com>

<pmarques@grupopie.com>
	[PATCH] USB: add PID to ftdi_sio.c
	
	The attached patch fixes a bug introduced by myself (a brown paper bag
	one) when I posted the patch that introduced this same PID to the
	id_table_FT232BM array only and not the id_table_combined array.
	
	Signed-off-by: Paulo Marques <pmarques@grupopie.com>
	Signed-off-by: Greg Kroah-Hartman <greg@kroah.com>

<rl@hellgate.ch>
	[PATCH] USB: visor: Always do generic_startup
	
	generic_startup in visor.c was not called for some hardware, resulting
	in attempts to access memory that had never been allocated, which in
	turn caused the problem several people reported with recent (2.6.10ish)
	kernels.
	
	Signed-off-by: Roger Luethi <rl@hellgate.ch>
	Signed-off-by: Greg Kroah-Hartman <greg@kroah.com>

<twogood@users.sourceforge.net>
	[PATCH] Re: The "ipaq" module: Updated list of vendor/product IDs
	
	This patch for ipaq.h and ipaq.c in drivers/usb/serial/ has the
	following features:
	
	o Provides an updated table with all vendor/product IDs (except one [1])
	present in Microsoft ActiveSync 3.7.1, the latest version available for
	download.
	
	o Removes #defines with vendor and product IDs from ipaq.h [2]
	
	The table has been autogenerated from the file wceusbsh.inf (extracted
	from MSASYNC.EXE with cabextract). The scripts used to generate the
	table become available for download as part of the SynCE project
	(http://synce.sourceforge.net).
	
	[1] Vendor 0x45e (Microsoft) with device 0xCE is not included, because
	they are used when the device is turned off but still connected to the
	PC via USB. When the device is turned on, it changes vendor/product IDs
	to the more specific ones.
	
	[2] Not needed with an autogenerated device table
	
	
	Signed-off-by: David Eriksson <twogood@users.sourceforge.net>
	Signed-off-by: Ganesh Varadarajan <ganesh@veritas.com>
	Signed-off-by: Greg Kroah-Hartman <greg@kroah.com>

<phil@ipom.com>
	[PATCH] USB Storage: Unusual_dev entry for tekom/yakumo
	
	Here's another unusual_devs entry for the Tekom/Yakumo devices. While I
	was there I realized two of the tekom entries were out of order, so I
	fixed that as well.
	
	From: Paul Ortyl <ortylp@3miasto.net>
	Signed-off-by: Phil Dibowitz <phil@ipom.com>
	Signed-off-by: Greg Kroah-Hartman <greg@kroah.com>

<masaki-c@nict.go.jp>
	[PATCH] USB: new defice for usb serial pl2303
	
	 Add device ID to pl2303 usb serial driver for
	 1) I/O DATA USB-RSAQ3
	 2) ELECOM UC-SGT
	
	Signed-off-by: CHIKAMA Masaki <masaki-c@nict.go.jp>
	Signed-off-by: Greg Kroah-Hartman <greg@kroah.com>

<mdharm-usb@one-eyed-alien.net>
	[PATCH] USB Storage: fixes to usb-storage scanning thread
	
	This was originally patch as401 from Alan Stern.  This patch makes a couple
	of small changes to the new scanning thread.
	
	It changes the name to "usb-stor-scan", which was my original intention and
	makes more sense than the current name.
	
	It also removes the PF_NOFREEZE flag; if someone suspends their system
	immediately after plugging in a USB storage device then the scanning thread
	should be frozen along with everything else.  The delay will be restarted
	after the system wakes up.
	
	
	Signed-off-by: Alan Stern <stern@rowland.harvard.edu>
	Signed-off-by: Matthew Dharm <mdharm-usb@one-eyed-alien.net>
	Signed-off-by: Greg Kroah-Hartman <greg@kroah.com>

<mdharm-usb@one-eyed-alien.net>
	[PATCH] USB Storage: Force INQUIRY length to be 36
	
	This is patch as399, originally from Alan Stern.
	
	A recent change to the scsi_probe_lun() routine now allows host drivers to
	specify a device's INQUIRY length in a way that cannot be overridden by
	the value returned from the device.  This patch makes usb-storage set the
	length to 36; now buggy devices won't be able to cause trouble by saying
	that they have 37 bytes of INQUIRY data available.
	
	The only way this value could be changed is if someone creates a SCSI
	blacklist entry with the BLIST_INQUIRY_58 flag -- and no one would do that
	for a USB device (I hope)!
	
	Signed-off-by: Alan Stern <stern@rowland.harvard.edu>
	Signed-off-by: Matthew Dharm <mdharm-usb@one-eyed-alien.net>
	Signed-off-by: Greg Kroah-Hartman <greg@kroah.com>

<mdharm-usb@one-eyed-alien.net>
	[PATCH] USB Storage: Remove unnecessary state testing
	
	This patch started as as405 from Alan Stern.  It has been re-generated
	against the current tip of the BK tree.
	
	For quite a while we've had a bunch of state-transition testing code in the
	driver, to report if anything bad ever happens (like the SCSI midlayer
	trying to queue a second command before the first one finishes).  None of
	those tests triggered in a very long time; this aspect of the code appears
	to be extremely stable.
	
	So this patch removes all those tests for illegal values of us->sm_state.
	It turns out that sm_state was used only for one other purpose: to check
	whether a command had timed out and caused a SCSI abort.  That piece of
	information can easily be stored in a single new bitflag (which is called
	calling US_FLIDX_TIMED_OUT) and doing so makes us->sm_state completely
	unused.  Hence the patch removes it from the structure.
	
	
	Signed-off-by: Alan Stern <stern@rowland.harvard.edu>
	Signed-off-by: Matthew Dharm <mdharm-usb@one-eyed-alien.net>
	Signed-off-by: Greg Kroah-Hartman <greg@kroah.com>

<bunk@stusta.de>
	[PATCH] PCI Hotplug: remove unused drivers/pci/hotplug/pciehp_sysfs.c
	
	Remove unused the drivers/pci/hotplug/pciehp_sysfs.c
	
	Signed-off-by: Adrian Bunk <bunk@stusta.de>
	Signed-off-by: Greg Kroah-Hartman <greg@kroah.com>

<eike-hotplug@sf-tec.de>
	[PATCH] PCI Hotplug: clean up rpaphp_pci.c::rpaphp_find_pci_dev
	
	this patch improves rpaphp_find_pci_dev. First it uses the for_each_pci_dev
	macro instead of the while loop, making this hotplug safe (which is a good
	idea in a hotplug driver, isn't it?). Then it removes retval_dev. retval_dev
	is set to the found device when something is found, NULL otherwise. If
	nothing is found dev will be NULL at the end of the loop anyway and the
	found device if we found something, no need for retval_dev then. And a very
	small coding style fix.
	
	Signed-off-by: Rolf Eike Beer <eike-hotplug@sf-tec.de>
	Signed-off-by: Greg Kroah-Hartman <greg@kroah.com>

<rddunlap@osdl.org>
	[PATCH] PCI Hotplug: cpcihp_generic: fix module_param data type
	
	drivers/pci/hotplug/cpcihp_generic.c:214: warning: return from
	incompatible pointer type
	
	Signed-off-by: Randy Dunlap <rddunlap@osdl.org>
	Signed-off-by: Greg Kroah-Hartman <greg@kroah.com>

<eike-kernel@sf-tec.de>
	[PATCH] PCI: fix Documentation/pci.txt inconsistency
	
	Signed-off-by: Rolf Eike Beer <eike-kernel@sf-tec.de>
	Signed-off-by: Greg Kroah-Hartman <greg@kroah.com>

<sfrench@smft41.(none)>
	[CIFS] POSIX ACL support part 1
	
	Signed-off-by: Steve French (sfrench@us.ibm.com)

<ak@suse.de>
	[PATCH] x86_64: fix async IPIs
	
	Fix async IPI to not return before stack data is used.
	This can fix reboot crashes and apparently helps vmware.
	
	Signed-off-by: Andi Kleen <ak@suse.de>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<axboe@suse.de>
	[PATCH] 3ware bad queuecommand returns
	
	If your ->queuecommand() completes a command through done, it must not
	return non-zero to the mid layer so that it takes ownership of the
	command again.
	
	Signed-off-by: Jens Axboe <axboe@suse.de>
	
	corrected typo
	
	Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

<axboe@suse.de>
	[PATCH] ide-scsi bad queuecommand return
	
	ide-scsi completes a command but returns ownership to the mid layer.
	
	Signed-off-by: Jens Axboe <axboe@suse.de>
	Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

<axboe@suse.de>
	[PATCH] megaraid bad queuecommand return
	
	In case of scb allocation failure, mega_build_cmd() can return NULL scb
	but set busy, which causes a non-zero return from ->queuecommand() while
	the scsi command has been completed.   Just returning busy without calling
	done() should be enough for appropriate retries.
	
	Signed-off-by: Jens Axboe <axboe@suse.de>
	Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

<axboe@suse.de>
	[PATCH] ncr53c8xx bad queuecommand return
	
	One more case of returning non-zero with a completed command.
	
	Signed-off-by: Jens Axboe <axboe@suse.de>
	Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

<axboe@suse.de>
	[PATCH] nsp32 bad queuecommand return
	
	The driver appropriately returns SCSI_MLQUEUE_HOST_BUSY, but it has
	already completed the command. Just return 0 instead and let the mid
	layer handle it through scsi_done().
	
	Signed-off-by: Jens Axboe <axboe@suse.de>
	Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

<axboe@suse.de>
	[PATCH] aacraid bad queuecommand return
	
	aac_read() and aac_write() may complete a command but return -1, which
	is propagated through aac_scsi_cmd() to the mid layer through
	->queuecommand. If the command has been completed, it must return 0.
	
	Signed-off-by: Jens Axboe <axboe@suse.de>
	Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

<axboe@suse.de>
	[PATCH] megaraid2 bad queuecommand return
	
	If the command is already completed, megaraid_queue_command() must
	return 0.
	
	Signed-off-by: Jens Axboe <axboe@suse.de>
	Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

<axboe@suse.de>
	[PATCH] nsp_cs bad queuecommand return
	
	Return 0 from queuecommand, if the command has been completed already.
	
	Signed-off-by: Jens Axboe <axboe@suse.de>
	Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

<jeffm@novell.com>
	[PATCH] selinux: cache not freed if load_policy fails; reload BUG's
	
	If security_load_policy() fails on the first try, the cache is never cleaned
	up. When the policy is fixed and a reload is attempted, the old cache will
	still exist, causing a BUG() in kmem_cache_create().
	
	This patch adds a destroy operation to clean up the cache on failure.
	
	Signed-off-by: Jeff Mahoney <jeffm@novell.com>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<mingo@elte.hu>
	[PATCH] sched: fix ->nr_uninterruptible handling bugs
	
	PREEMPT_RT on SMP systems triggered weird (very high) load average
	values rather easily, which turned out to be a mainline kernel
	->nr_uninterruptible handling bug in try_to_wake_up().
	
	the following code:
	
	        if (old_state == TASK_UNINTERRUPTIBLE) {
	                old_rq->nr_uninterruptible--;
	
	potentially executes with old_rq potentially being != rq, and hence
	updating ->nr_uninterruptible without the lock held. Given a
	sufficiently concurrent preemption workload the count can get out of
	whack and updates might get lost, permanently skewing the global count. 
	Nothing except the load-average uses nr_uninterruptible() so this
	condition can go unnoticed quite easily.
	
	the fix is to update ->nr_uninterruptible always on the runqueue where
	the task currently is. (this is also a tiny performance plus for
	try_to_wake_up() as a stackslot gets freed up.)
	
	while fixing this bug i found three other ->nr_uninterruptible related
	bugs:
	
	 - the update should be moved from deactivate_task() into schedule(),
	   beacause e.g. setscheduler() does deactivate_task()+activate_task(),
	   which in turn may result in a -1 counter-skew if setscheduler() is
	   done on a task asynchronously, which task is still on the runqueue
	   but has already set ->state to TASK_UNINTERRUPTIBLE.
	
	   sys_sched_setscheduler() is used rarely, but the bug is real. (The
	   fix is also a small performance enhancement.)
	
	   The rules for ->nr_uninterruptible updating are the following: it
	   gets increased by schedule() only, when a task is moved off the
	   runqueue and it has a state of TASK_UNINTERRUPTIBLE. It is decreased
	   by try_to_wake_up(), by the first wakeup that materially changes the
	   state from TASK_UNINTERRUPTIBLE back to TASK_RUNNING, and moves the
	   task to the runqueue.
	
	 - on CPU-hotplug down we might zap a CPU that has a nonzero counter.
	   Due to the fuzzy nature of the global counter a CPU might hold a
	   nonzero ->nr_uninterruptible count even if it has no tasks anymore.
	   The solution is to 'migrate' the counter to another runqueue.
	
	 - we should not return negative counter values from the
	   nr_uninterruptible() function, since it accesses them without taking
	   the runqueue locks, so the total sum might be slightly above or
	   slightly below the real count.
	
	I tested the attached patch on x86 SMP and it solves the load-average
	problem. (I have tested CPU_HOTPLUG compilation but not functionality.) 
	I think this is a must-have for 2.6.10, because there are apps that go
	berzerk if load-average is too high (e.g. sendmail).
	
	Signed-off-by: Ingo Molnar <mingo@elte.hu>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<sfr@canb.auug.org.au>
	[PATCH] ppc64 iSeries: PURR emulation fix
	
	It appears that the PURR emulation patch was the victim of the renaming of
	a structure element.  The current BK kernel will not build for iSeries
	without this patch.
	
	Signed-off-by: Stephen Rothwell <sfr@canb.auug.org.au>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<rmk+lkml@arm.linux.org.uk>
	[PATCH] parport_pc CONFIG_PCI=n build fix
	
	The following patch fixes these build errors on machines with CONFIG_PCI=n:
	
	drivers/parport/parport_pc.c:3199: error: `parport_init_mode' undeclared (first use in this function)
	drivers/parport/parport_pc.c:3199: error: (Each undeclared identifier is reported only once
	drivers/parport/parport_pc.c:3199: error: for each function it appears in.)
	
	Signed-off-by: Russell King <rmk@arm.linux.org.uk>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<wli@holomorphy.com>
	[PATCH] parport_pc warning fixes
	
	Stomp a couple of warnings which several people have tried to fix.
	
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<takata@linux-m32r.org>
	[PATCH] m32r: Fix build error of  arch/m32r/mm/fault.c
	
	The modification of "Changes for arch/m32r/mm/fault.c@1.3" was
	prepared for enforce-a-gap-between-heap-and-stack.patch(*) of -mm tree,
	but it has not been merged into mainline.
	  (*) "heap-stack-gap for 2.6" (Sep. 25, 2004)
	       http://www.uwsg.iu.edu/hypermail/linux/kernel/0409.3/0435.html
	
	So, this patch is for withdrawing the previous arch/m32r/mm/fault.c.
	
	Signed-off-by: Hirokazu Takata <takata@linux-m32r.org>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<andrea@novell.com>
	[PATCH] fix for mpol mm corruption on tmpfs
	
	With the inline symlink shmem_inode_info structure is overwritten with data
	until vfs_inode, and that caused the ->policy to be a corrupted pointer
	during unlink.  It wasn't immediatly easy to see what was going on due the
	random mm corruption that generated a weird oops, it looked more like a
	race condition on freed memory at first.
	
	There's simply no need to set a policy for inodes, since the idx is always
	zero.  All we have to do is to initialize the data structure (the semaphore
	may need to run during the page allocation for the non-inline symlink) but
	we don't need to allocate the rb nodes.  This way we don't need to call
	mpol_free during the destroy_inode (not doable at all if the policy rbtree
	is corrupt by the inline symlink ;).
	
	An equivalent version of this patch based on a 2.6.5 tree with additional
	numa features on top of this (i.e.  interleaved by default, and that's
	prompted me to add a comment in the LNK init path), works fine in a numa
	simulation on my laptop (untested on the bare hardware).
	
	Signed-off-by: Andrea Arcangeli <andrea@novell.com>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<andrea@novell.com>
	[PATCH] mempolicy can select the wrong policy
	
	mempolicy.c code will return the wrong policy in some cases.
	
	Signed-off-by: Andrea Arcangeli <andrea@novell.com>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<prasanna@in.ibm.com>
	[PATCH] kprobes: dont steal interrupts from vm86
	
	This patch fixes the problem reported by Stas Sergeev, that kprobes steals
	the virtual-8086 exceptions.  This fix modifies kprobe_handler() to return
	0 when in virtual-8086 mode.
	
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<bjorn.helgaas@hp.com>
	[PATCH] Fix ia64 flush_tlb_page build error
	
	Fix ia64 build error: implicit declaration of function `flush_tlb_page'
	
	Signed-off-by: Bjorn Helgaas <bjorn.helgaas@hp.com>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<rddunlap@osdl.org>
	[PATCH] cdrom: handle SYSCTL without PROC_FS
	
	Fixes oops (reference to cdrom_root_table->child->) when CONFIG_SYSCTL=y
	and CONFIG_PROC_FS=n.
	
	Signed-off-by: Randy Dunlap <rddunlap@osdl.org>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<bjorn.helgaas@hp.com>
	[PATCH] early uart console support
	
	This adds an early polled-mode "uart" console driver, based on Andi Kleen's
	early_printk work.
	
	The difference is that this locates the UART device directly by its MMIO or
	I/O port address, so we don't have to make assumptions about how ttyS
	devices will be named.  After the normal serial driver starts, we try to
	locate the matching ttyS device and start a console there.
	
	Sample usage:
	    console=uart,io,0x3f8
	    console=uart,mmio,0xff5e0000,115200n8
	
	If the baud rate isn't specified, we peek at the UART to figure it out.
	
	Signed-off-by: Bjorn Helgaas <bjorn.helgaas@hp.com>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<bjorn.helgaas@hp.com>
	[PATCH] move HCDP/PCDP to early uart console
	
	This changes the HCDP/PCDP support to use the early uart console
	rather than using early_serial_setup().
	
	As a consequence, ia64 serial device names will now stay constant
	regardless of firmware console settings.  (A serial device selected as
	an EFI console device on HP ia64 boxes used to automatically become
	ttyS0.)
	
	This also removes the ia64 early-boot kludge of assuming legacy COM
	ports at 0x3f8 and 0x2f8.  For boxes that have legacy ports but no
	HCDP, "console=ttyS0" will still work, but the console won't start
	working until after the serial driver initializes and discovers the
	devices.
	
	WARNING:
	
	If you have an HP machine and you're using the MP serial console port
	(the connector labelled "console" on the 3-headed cable), this patch
	will break your console!
	
	HOW TO FIX IT:
	
	 1) The console device will change from /dev/ttyS0 to /dev/ttyS1,
	    ttyS2, or ttyS3, so:
	
	    1a) Edit /etc/inittab to add a getty entry for
	           /dev/ttyS1 (rx4640, rx5670, rx7620, rx8620, Superdome),
	           /dev/ttyS2 (rx1600), or
	           /dev/ttyS3 (rx2600).
	
	    1b) Edit /etc/securetty to add ttyS1, ttyS2, or ttyS3.
	
	    1c) Leave the existing ttyS0 entries in /etc/inittab and
	        /etc/securetty so you can still boot old kernels.
	
	 2) Edit /etc/elilo.conf to remove any "console=" arguments (see [1]).
	
	 3) Run elilo to install the bootloader with new configuration.
	
	 4) Reboot and use the EFI boot option maintenance menu to select
	    exactly one device for console output, input, and standard error.
	    Then do a cold reset so the changes take effect.
	
	    For the MP console, be careful to select the device with
	    "Acpi(HWP0002,700)/Pci(...)/Uart" in the path (see [2]).
	
	DETAILS:
	
	  - Prior to this patch, serial device names depended on the HCDP,
	    which in turn depends on EFI console settings.  After this patch,
	    the naming always stays the same, regardless of firmware settings.
	
	    For example, an rx1600 with a single built-in serial port plus
	    an MP has these ports:
	                                   Old             Old
	                  MMIO         (EFI console    (EFI console
	                 address        on builtin)     on MP port)      New
	                ==========      ==========      ==========     ======
	    builtin     0xff5e0000        ttyS0           ttyS1         ttyS0
	    MP UPS      0xf8031000        ttyS1           ttyS2         ttyS1
	    MP Console  0xf8030000        ttyS2           ttyS0         ttyS2
	    MP 2        0xf8030010        ttyS3           ttyS3         ttyS3
	    MP 3        0xf8030038        ttyS4           ttyS4         ttyS4
	
	  - If you want to have multiple devices in the EFI console path, you
	    can, but Linux won't be able to deduce which console to use, so it
	    will default to using VGA.  You can use "console=hcdp" (the UART
	    device from the EFI path) or "console=ttyS<n>" to select the
	    device directly.
	
	TROUBLESHOOTING:
	
	  - No kernel output after "Uncompressing Linux... done":
	
	        -> You're using an MP port as the console and specified
	           "console=ttyS0".  This port is now named something else.
	           Remove the "console=" option.
	
	        -> Multiple UARTs selected as EFI console devices, and you're
	           looking at the wrong one.  Make sure only one UART is
	           selected (use the EFI Boot Manager "Boot option maintenance"
	           menu).
	
	        -> You're physically connected to the MP port but have a
	           non-MP UART selected as EFI console device.  Either move
	           the console cable to the non-MP UART, or change the EFI
	           console path to the MP UART (the MP UART is the one with
	           "Acpi(HWP0002,700)/Pci(...)/Uart" in it.)
	
	  - Long pause (60+ seconds) between "Uncompressing Linux... done"
	    and start of kernel output:
	
	        -> No early console, probably because you used "console=ttyS<n>".
	           Remove the "console=" option.
	
	  - Kernel and init script output works fine, but no "login:" prompt:
	
	        -> Add getty entry to /etc/inittab for console tty.  Use the table
	           in (1a) above or look for the "Adding console on ttyS<n>" message
	           that tells you which device is the console.
	
	  - "login:" prompt, but can't login as root:
	
	        -> Add entry to /etc/securetty for console tty.
	
	[1] When the EFI console path contains exactly one device (either
	    serial or VGA), 2.6.6 and newer kernels default to that device
	    automatically.  So if you remove "console=" arguments, you can use
	    the same elilo configuration to boot any 2.6.6 or newer kernel
	    with or without this patch.
	
	    If you need to boot kernels older than 2.6.6 (including RHEL3 and
	    SLES9), keep an 'append="console=ttyS0"' line in those elilo.conf
	    stanzas.
	
	    Non-HP machines will still need "console=" for serial consoles
	    because they don't supply the HCDP table.
	
	[2] The HP management card (MP) causes confusion because it is always
	    active as an EFI console, even if it doesn't appear in the EFI
	    console path.  If your console path is set to a non-MP UART, and
	    you happen to be attached to the MP UART, everything works in EFI,
	    but the kernel will think the non-MP UART is the console, so you
	    won't see any kernel output.
	
	Signed-off-by: Bjorn Helgaas <bjorn.helgaas@hp.com>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<giuseppe@eppesuigoccas.homedns.org>
	[PATCH] gbefb.c build fix
	
	The current gbefb.c source cannot be compiled as module because of a small
	typo where "option" was written instead of "options" in two places.
	
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<akpm@osdl.org>
	[PATCH] vmscan: ignore swap token when in trouble
	
	The token-based thrashing control patches introduced a problem: when a task
	which doesn't hold the token tries to run direct-reclaim, that task is told
	that pages which belong to the token-holding mm are referenced, even though
	they are not.  This means that it is possible for a huge number of a
	non-token-holding mm's pages to be scanned to no effect.  Eventually, we give
	up and go and oom-kill something.
	
	So the patch arranges for the thrashing control logic to be defeated if the
	caller has reached the highest level of scanning priority.
	
	
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<neilb@cse.unsw.edu.au>
	[PATCH] md: Fix problem with unsigned variable going "negative" in linear.c
	
	We replace 'size' by 'start'.  'start' means exactly the same as
	'curr_offset - size', and the equivalence of the new code can be tested
	based on this.  The difference is that 'start' will never be negative and
	so can fit in a 'sector_t' while 'size' could be negative.
	
	Also make curr_offset sector_t, as it should have been.
	
	Signed-off-by: Neil Brown <neilb@cse.unsw.edu.au>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<hugh@veritas.com>
	[PATCH] mlock-vs-VM_IO hang fix
	
	With Andrea Arcangeli <andrea@novell.com>
	
	Fix a hang which occurs when mlock() encounters a mapping of /dev/mem.
	These have VM_IO set.  follow_page() keeps returning zero (not a valid pfn)
	and handle_mm_fault() keeps on returning VM_FAULT_MINOR (there's a pte
	there), so get_user_pages() locks up.
	
	The patch changes get_user_pages() to just bale out when it hits a VM_IO
	region.  make_pages_present() is taught to ignore the resulting -EFAULT.
	
	We still have two bugs:
	
	a) If a process has a VM_IO vma, get_user_pages() will bale early,
	   without having considered the vmas at higher virtual addresses.
	
	   As do_mlock() also walks the vma list this bug is fairly benign, but
	   get_user_pages() is doing the wrong thing there.
	
	b) The `len' argument to get_user_pages should be long, not int.  We
	   presently have a 16TB limit on 64-bit.
	
	Signed-off-by: Hugh Dickins <hugh@veritas.com>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<bunk@stusta.de>
	[PATCH] ISDN divert_init.c build fix
	
	drivers/isdn/divert/divert_init.c:25: error: conflicting types for 'printk'
	
	Signed-off-by: Adrian Bunk <bunk@fs.tum.de>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<trini@kernel.crashing.org>
	[PATCH] ppc32: Fix CONFIG_8260 and CONFIG_BLK_DEV_INITRD
	
	<alebas@televes.com> found that CONFIG_8260 and CONFIG_BLK_DEV_INITRD was
	broken as arch/ppc/syslib/m8260_setup.c was missing <linux/root_dev.h>.
	
	Signed-off-by: Tom Rini <trini@kernel.crashing.org>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<bunk@stusta.de>
	[PATCH] ST_partstat multiple definition
	
	drivers/scsi/osst.o(.bss+0x0): multiple definition of `ST_partstat'
	drivers/scsi/st.o(.bss+0x0): first defined here
	
	Signed-off-by: Adrian Bunk <bunk@fs.tum.de>
	Cc: James Bottomley <James.Bottomley@steeleye.com>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<akpm@osdl.org>
	[PATCH] x86 current_stack_pointer warning fix
	
	With newer gcc's:
	
	include/asm/thread_info.h:95: warning: unused variable `current_stack_pointer'
	
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<sfr@canb.auug.org.au>
	[PATCH] ppc64 iSeries: fix viodasd remove
	
	This patch just makes sure that we do not dereference a viodasd gendisk
	pointer after it has been freed.
	
	Signed-off-by: Stephen Rothwell <sfr@canb.auug.org.au>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<paulus@samba.org>
	[PATCH] ppc64: move emulate_step to arch/ppc64/lib
	
	This patch moves the emulate_step function, which is used in xmon's
	single-stepping code, out of xmon.c and into arch/ppc64/lib/sstep.c, so
	that kprobes can use it too.
	
	Signed-off-by: Paul Mackerras <paulus@samba.org>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<olof@austin.ibm.com>
	[PATCH] ppc64: Make pci_alloc_consistent() conform to API docs
	
	Documentation/DMA-mapping.txt says that pci_alloc_consistent() needs to
	return a mapping that is aligned by the closest larger order of two as the
	allocation.
	
	We're currently breaking this with our iommu code.  To fix this, add
	align_order arguments to the relevant functions and pass it down. 
	Specifying align_order of 0 gives same behaviour as previous.
	
	Signed-off-by: Olof Johansson <olof@austin.ibm.com>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<trini@kernel.crashing.org>
	[PATCH] x86_64: only single-step into signal handlers if the tracer asked for it
	
	Port of the i386 patch of the same name.
	
	Signed-off-by: Tom Rini <trini@kernel.crashing.org>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<clameter@sgi.com>
	[PATCH] mmtimer driver update
	
	- reduce processing in timer interrupt through the use of a tasklet
	- fix various race conditions
	- use the correct interrupt vector for the SN2 RTC
	
	Signed-off-by: Dimitri Sivanich <sivanich@sgi.com>
	Signed-off-by: Christoph Lameter <clameter@sgi.com>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<takata@linux-m32r.org>
	[PATCH] m32r: Kconfig.debug support
	
	This patch updates Kconfig and add Kconfig.debug for m32r.
	
	- arch/m32r/Kconfig: Move "Kernel hacking" menu to Kconfig.debug.
	
	- arch/m32r/Kconfig.debug: Newly added.
	
	- lib/Kconfig.debug: Add m32r arch.
	
	Signed-off-by: Hirokazu Takata <takata@linux-m32r.org>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<takata@linux-m32r.org>
	[PATCH] m32r: Fix a boot hang of UP kernel
	
	This patch fixes a hanging up at boot time of 2.6.10-rc2 m32r UP kernel.
	It was due to a lack of update_process_times() in time.c.
	
	Such a boot hang was caused only in UP systems, because
	update_process_times() had been executed correctly in
	smp_local_timer_interrupt() of arch/m32r/kernel/smp.c for SMP.
	
	arch/m32r/kernel/time.c:
	
	- UP: Fix do_timer_interrupt() to use update_process_times().
	- UP: Move profile_tick() into do_timer_interrupt().
	- Change __inline__ to inline.
	
	Signed-off-by: Hirokazu Takata <takata@linux-m32r.org>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<takata@linux-m32r.org>
	[PATCH] m32r: make zImage a default build target
	
	Here is a patch to update arch/m32r/Makefile for m32r.
	- Make zImage a default build target
	- Add zImage to targets marked with [*].

<takata@linux-m32r.org>
	[PATCH] m32r: io_xxxxx.c cleanups
	
	cleanups for arch/m32r/kernel/io*.c.
	
	- Fix ugly indentation.
	
	- Change __inline__ to inline.
	
	- Remove RCS ID strings.
	
	Signed-off-by: Hirokazu Takata <takata@linux-m32r.org>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<geert@linux-m68k.org>
	[PATCH] M68k: Update defconfigs for 2.6.10-rc1
	
	M68k: Update defconfigs
	
	Signed-off-by: Geert Uytterhoeven <geert@linux-m68k.org>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<geert@linux-m68k.org>
	[PATCH] M68k: Add 3 missing syscalls
	
	M68k: Add 3 missing syscalls (up to 2.6.10-rc1)
	
	Signed-off-by: Geert Uytterhoeven <geert@linux-m68k.org>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<geert@linux-m68k.org>
	[PATCH] 68851 MMU: Fix harmless typo in the MMU configuration code.
	
	68851 MMU: Fix harmless (CPU_68020 == MMU_68851 anyway) typo in the MMU
	configuration code.
	
	Signed-off-by: Geert Uytterhoeven <geert@linux-m68k.org>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<geert@linux-m68k.org>
	[PATCH] Sun-3: Fix link error
	
	Sun-3: Fix link error (we forgot to update vmlinux-sun3.lds during last update
	of vmlinux-std.lds)
	
	Signed-off-by: Geert Uytterhoeven <geert@linux-m68k.org>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<geert@linux-m68k.org>
	[PATCH] fm2fb: Update Steffen A. Mork's email address
	
	fm2fb: Update Steffen A. Mork's email address
	
	Signed-off-by: Steffen A. Mork <linux-dev@morknet.de>
	Signed-off-by: Geert Uytterhoeven <geert@linux-m68k.org>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<geert@linux-m68k.org>
	[PATCH] M68k I/O: Move HP300 I/O macros close to other I/O macros again
	
	M68k I/O: Move HP300 I/O macros close to other I/O macros again (after merge
	error in 2.6.10-rc2)
	
	Signed-off-by: Geert Uytterhoeven <geert@linux-m68k.org>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<geert@linux-m68k.org>
	[PATCH] M68k: Update defconfigs for 2.6.10-rc2
	
	M68k: Update defconfigs for 2.6.10-rc2
	
	Signed-off-by: Geert Uytterhoeven <geert@linux-m68k.org>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<blaisorblade_spam@yahoo.it>
	[PATCH] uml: update some copyrights
	
	Update/add some copyright notices.
	
	Signed-off-by: Paolo 'Blaisorblade' Giarrusso <blaisorblade_spam@yahoo.it>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<blaisorblade_spam@yahoo.it>
	[PATCH] uml: partial KBUILD_OUTPUT fix
	
	Start fixing KBUILD_OUTPUT support for UML.  These changes are trivial and
	no-ops when this feature is not enabled - the "hard part" of this support
	is under discussion because it's hard to do properly (UML uses both shipped
	and build-generated headers from a lot of different directories, and for
	good reasons).
	
	Signed-off-by: Paolo 'Blaisorblade' Giarrusso <blaisorblade_spam@yahoo.it>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<schwidefsky@de.ibm.com>
	[PATCH] s390: remove zfcp hba api callbacks
	
	From: Heiko Carstens <heiko.carstens@de.ibm.com>
	
	Remove the disputed hba api event callback code.
	
	Signed-off-by: Martin Schwidefsky <schwidefsky@de.ibm.com>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<hch@lst.de>
	[PATCH] allow NFS exports of EFS filesystems
	
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<stelian@popies.net>
	[PATCH] sonypi: return an error from sonypi_camera_command() if the camera isn't enabled
	
	The sonypi_camera_command() used to fail without returning an error code if
	the user fergot to enable the camera in the sonypi module (using the
	camera=1 module parameter).  This caused the meye driver to apparently load
	correctly but miserably fail later, when trying to access the camera for
	getting some data out of it.
	
	This patch adds an error code to sonypi_camera_command() and makes the meye
	driver check for it in the PCI probe routine.  If the function fails, a
	message is printed in the kernel logs reminding the user it should better
	RTFM.
	
	The patch also removes some sonypi_camera_command() commands (those
	supposed to return the current camera settings) which are unreliable.  The
	meye driver does not use them anyway.
	
	Signed-off-by: Stelian Pop <stelian@popies.net>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<oleg@tv-sign.ru>
	[PATCH] uninline do_trap(), remove get_cr2()
	
	Uninlining do_trap() saves 544 bytes in traps.o.  get_cr2() seems to be
	unused, remove it.
	
	Signed-off-by: Oleg Nesterov <oleg@tv-sign.ru>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<colin.lkml@colino.net>
	[PATCH] Switch therm_adt746x to new module_param
	
	This patch replaces MODULE_PARM to module_param for adt746x.
	
	Signed-off-by: Colin Leroy <colin@colino.net>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<pmeda@akamai.com>
	[PATCH] unlocked access to task->comm
	
	Looking at  get_task_comm patch:
	http://linus.bkbits.net:8080/linux-2.5/patch@1.1803.144.3
	
	There is one other place where task->comm is accessed outside current.
	There are two issues.  The code is trying to copy to temp space without
	task_lock.  It is not using temp space for actual user copy.
	
	Cc: Ralf Baechle <ralf@linux-mips.org>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<dsd@gentoo.org>
	[PATCH] Permit LOG_SENSE and LOG_SELECT in SG_IO command table
	
	This patch adds LOG_SENSE as a read-ok command.  cdrecord-prodvd uses this.
	 I also added LOG_SELECT as write-ok as this seems to fit in as well.
	
	Signed-off-by: Daniel Drake <dsd@gentoo.org>
	Acked-by: Jens Axboe <axboe@suse.de>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<neilb@cse.unsw.edu.au>
	[PATCH] knfsd: svcrpc: fqdn length fix
	
	Problem identified by Jan Kasprzak.
	
	Limit on domainname_max (currently 50) is too small.
	
	Just use the beginning of input buffer as scratch space for it, and save a
	little stack space while we're at it.
	
	Signed-off-by: J. Bruce Fields <bfields@citi.umich.edu>
	Signed-off-by: Neil Brown <neilb@cse.unsw.edu.au>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<magnus.damm@gmail.com>
	[PATCH] documentation: nohighio
	
	The kernel parameter "nohighio" seems to be gone in the code, but the
	parameter is still left in the documentation.
	
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<akpm@osdl.org>
	[PATCH] documentation: nmi_watchdog.txt update
	
	Acked-by: Maciej W. Rozycki <macro@linux-mips.org>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<bunk@stusta.de>
	[PATCH] remove outdated OSS Changelogs
	
	There's not much value in shipping Changelogs that weren't updated since at
	least 2.4.0.
	
	Signed-off-by: Adrian Bunk <bunk@stusta.de>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<roland@topspin.com>
	[PATCH] linux/mount.h: add atomic.h and spinlock.h #includes
	
	<linux/mount.h> uses atomic_t and spinlock_t, but doesn't include either
	<asm/atomic.h> or <linux/spinlock.h>, which means that any users of
	<linux/mount.h> have to include them.  This patch adds the necessary
	#includes to avoid this.
	
	Signed-off-by: Roland Dreier <roland@topspin.com>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<haroldo.gamal@infolink.com.br>
	[PATCH] smbfs: Bug #3758 - Broken symlinks on smbfs
	
	The patches attached here fixes the BUG #3758 - "Broken symlinks on smbfs
	with 2.6.10-rc[12]".  There are two patches, one to be applied over version
	2.6.9 and the other over 2.6.10-rc2.
	
	The old utilities (and the old driver) uses uid=0, gid=0, dmask=0 and
	fmask=0 to flag the lack of this parameters on the mount command line.
	When the user do not specify the uid, gid, fmask or dmask, the current
	driver will assign gid=root, gid=root, dmask=755, fmask=755.  This behavior
	is similar to the old 2.x samba versions.
	
	To make the driver see the permissions and ownership assigned on the
	server, "smbmount" and "smbmnt" utilities must be patched.  The patches is
	already available on the attached patches at Bug #3330 or Samba Bug #999.
	
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<jack@suse.cz>
	[PATCH] Minor fix of inequalities in the quota code
	
	Change inequalities for deciding when a user has cleaned up enough space to
	be below softlimit to match the ones for deciding when the softlimit has
	been exceeded.
	
	Signed-off-by: Jan Kara <jack@suse.cz>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<jack@suse.cz>
	[PATCH] Add missing DQUOT_OFF
	
	Attached patch adds missing DQUOT_OFF to the umount path of the root
	filesystem (it is only remounted read-only and so the usual path with
	DQUOT_OFF is not taken).
	
	Signed-off-by: Jan Kara <jack@suse.cz>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<blaisorblade_spam@yahoo.it>
	[PATCH] akpm has moved
	
	And I didn't feel a thing.
	
	Signed-off-by: Paolo 'Blaisorblade' Giarrusso <blaisorblade_spam@yahoo.it>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<ak@suse.de>
	[PATCH] x86_64: fix vsyscalls
	
	Fix incorrect alignment in the vsyscall variables that caused
	vsyscalls to be completely broken.
	
	This change should decrease system time during TPC-* tests
	considerably.
	
	Clean up the vmlinux.lds to make it easier readable
	
	Do some cleanups in the vsyscall code. 
	
	Align cacheline_aligned correctly on 128 byte cacheline systems.
	
	Signed-off-by: Andi Kleen <ak@suse.de>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<ak@suse.de>
	[PATCH] x86_64: fix interrupt routing with nosmp
	
	Fix interaction between nosmp and pcibios_fixup_irqs().
	
	Originally from Oleg Nesterov via i386
	
	   When we boot with nosmp we dont have all the mptable info, so
	   IO_APIC_get_PCI_irq_vector() doesnt work and devices just end up getting a
	   wrong interrupt.
	
	Signed-off-by: Andi Kleen <ak@suse.de>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<ak@suse.de>
	[PATCH] x86_64: fix early oops printing
	
	Fix early oopses
	
	Without this very early oopses crash recursively while trying
	to figure out the current CPU number.
	
	Based on a patch by James Cleverdon.
	
	Signed-off-by: Andi Kleen <ak@suse.de>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<ak@suse.de>
	[PATCH] x86_64: increase timer fallback threshold
	
	Increase time fallback threshold
	
	Otherwise ACPI triggers it too often.
	
	Signed-off-by: Andi Kleen <ak@suse.de>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<bgerst@didntduck.org>
	[PATCH] fastcall fixes for x86 smp interrupts
	
	I cross-checked the functions called by the BUILD_INTERRUPT macros and
	came up with this patch.  Even though some of these functions currently 
	take no args I made them all consistent.  Some functions in the Voyager 
	code that are not directly called from asm code become static.
	
	Signed-off-by: Brian Gerst <bgerst@didntduck.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<jmorris@redhat.com>
	[AF_UNIX]: Don't lose ECONNRESET in unix_seqpacket_sendmsg()
	
	The fix for SELinux w/SOCK_SEQPACKET had an error,
	noted by Alan Cox.  This fixes it.
	
	Signed-off-by: James Morris <jmorris@redhat.com>
	Signed-off-by: David S. Miller <davem@davemloft.net>

<janitor@at.rmk.(none)>
	[PCMCIA] replace schedule_timeout() with msleep()
	
	Use msleep() instead of schedule_timeout() to guarantee the
	task delays as expected.
	
	Signed-off-by: Nishanth Aravamudan
	Signed-off-by: Maximilian Attems
	Signed-off-by: Russell King <rmk@arm.linux.org.uk>

<bunk@de.rmk.(none)>
	[PCMCIA] make cardbus_type static
	
	Patch from Adrian Bunk
	
	Since there's no user outside this file, cardbus_type in
	drivers/pcmcia/yenta_socket.c can be made static.
	
	Signed-off-by: Adrian Bunk
	Signed-off-by: Russell King

<michal@info.rmk.(none)>
	[PCMCIA] Exclude uneeded code when ! CONFIG_PROC_FS
	
	Patch from Michal Rokos
	
	proc_pccard is declared twice, so remove the first declaration such
	that it is only in ifdef CONFIG_PROC_FS block.
	
	Signed-off-by: Russell King <rmk@arm.linux.org.uk>

<rmk@flint.arm.linux.org.uk>
	[ARM] Sparse fixes
	
	Clean up sparse warnings in rtctime.c and netwinder-hw.c

<rmk@flint.arm.linux.org.uk>
	[ARM] Add missing ecard_resource_flags() macro.

<rmk@flint.arm.linux.org.uk>
	[ARM] Fix VFP NaN flag handling.
	
	The special non-signalling NaN flag was escaping and setting some
	FPSCR exception enable flags.  Ensure that this flag is masked out
	before we update the FPSCR.

<hch@de.rmk.(none)>
	[ARM] kill unused call_irq()
	
	Patch from Christoph Hellwig
	
	These routine in arm is unused (in fact not even compiled).
	
	Instead of converting it to local_softirq_pending I'd suggest just
	removing it as below as it's been there totally unused for a long
	time.

<nico@org.rmk.(none)>
	[ARM PATCH] 2267/1: don't fiddle with GPDR/GAFR directly
	
	Patch from Nicolas Pitre
	
	This is preemption unsafe and rather not pretty.
	
	Signed-off-by: Nicolas Pitre
	Signed-off-by: Russell King

<viro@parcelfarce.linux.theplanet.co.uk>
	[PATCH] sparc io.h annotations and fixes
	
	 * annotations for sparc io.h
	 * missing memcpy_toio()/memcpy_fromio() added
	
	Signed-off-by: Al Viro <viro@parcelfarce.linux.theplanet.co.uk>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<viro@parcelfarce.linux.theplanet.co.uk>
	[PATCH] pcilynx iomem annotations
	
	Signed-off-by: Al Viro <viro@parcelfarce.linux.theplanet.co.uk>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<viro@parcelfarce.linux.theplanet.co.uk>
	[PATCH] tgafb iomem annotations
	
	Signed-off-by: Al Viro <viro@parcelfarce.linux.theplanet.co.uk>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<viro@parcelfarce.linux.theplanet.co.uk>
	[PATCH] iphase iomem annotations
	
	partially annotated
	
	Signed-off-by: Al Viro <viro@parcelfarce.linux.theplanet.co.uk>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<viro@parcelfarce.linux.theplanet.co.uk>
	[PATCH] 64bit portability fixes
	
	assorted 64bit issues - extraction of number passed in pointer, use of
	%zd for size_t, ssize_t instead of int as return value of ->read(), %p
	for pointers instead of casting to int and using %x.
	
	Signed-off-by: Al Viro <viro@parcelfarce.linux.theplanet.co.uk>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<viro@parcelfarce.linux.theplanet.co.uk>
	[PATCH] ad1889 annotations and fixes
	
	fixed leaks on failure exits in ->probe()

<viro@parcelfarce.linux.theplanet.co.uk>
	[PATCH] drivers/media annotations
	
	trivial iomem annotations
	
	Signed-off-by: Al Viro <viro@parcelfarce.linux.theplanet.co.uk>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<viro@www.linux.org.uk>
	[PATCH] (1/4) eicon iomem annotations and fixes
	
	 * adds new helpers ({GET,PUT}_{WORD,DWORD}) parallel to READ_WORD
	   et.al., but used on normal memory instead of iomem.  Instances of
	   READ_WORD and friends that are applied to vmalloc'ed memory and local
	   variables switched to new helpers.
	
	Signed-off-by: Armin Schindler <armin@melware.de>
	Signed-off-by: Al Viro <viro@parcelfarce.linux.theplanet.co.uk>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<viro@www.linux.org.uk>
	[PATCH] (2/4) eicon iomem annotations and fixes
	
	 * added __iomem to declarations of iomem pointers
	
	Signed-off-by: Armin Schindler <armin@melware.de>
	Signed-off-by: Al Viro <viro@parcelfarce.linux.theplanet.co.uk>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<viro@www.linux.org.uk>
	[PATCH] (3/4) eicon iomem annotations and fixes
	
	 * new helpers - READ_BYTE() and WRITE_BYTE().  On Linux they are
	   needed, since direct access to iomem pointers is not allowed (and
	   does not work on some architectures).
	 * memcpy() to/from iomem is not allowed on Linux (same story).
	
	Proper primitives are memcpy_toio() and memcpy_fromio().  Several places
	misused memcpy(); switched to memcpy_{to,from}io().
	
	Signed-off-by: Armin Schindler <armin@melware.de>
	Signed-off-by: Al Viro <viro@parcelfarce.linux.theplanet.co.uk>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<viro@www.linux.org.uk>
	[PATCH] (4/4) eicon iomem annotations and fixes
	
	 * s_4bri.c has a nasty typo - bogus & in qBri_cpu_trapped().
	
	   We have
		void *base;
	   followed by
		regs[0] = READ_DWORD((&base + offset) + 0x70);
	
	   which is *NOT* what is meant there - instead of access to memory
	   pointed to by base we get access to _stack_ at some offset from the
	   place where the local variable base lives.
	
	Signed-off-by: Armin Schindler <armin@melware.de>
	Signed-off-by: Al Viro <viro@parcelfarce.linux.theplanet.co.uk>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<akpm@osdl.org>
	[PATCH] x86_64: duplicated patch
	
	We ended up adding this patch twice.
	
	Cc: <ak@muc.de>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<agruen@suse.de>
	[PATCH] compat_sys_fcntl[64] contain superfluous, buggy test
	
	here is a fix to a previous ChangeSet from John; 32-bit emulation of flock(fd,
	F_GETLK, &lock) currently is broken.
	
	The ChangeSet:
	http://linux.bkbits.net:8080/linux-2.5/cset%404152257aJKu1UClRcfvhsK6IjGYSeQ?nav=index.html|ChangeSet@-12w
	from John Engel <jhe@us.ibm.com> fixes an off-by-one error and according
	to the ChangeSet comment, it also contains a fix to handle l_len < 0 which
	is now defined in POSIX 1003.1-2001 from the fcntl man page.
	
	Gordon Jin <gordon.jin@intel.com> reports that the added test causes
	compat_sys_fcntl[64] to fail: If fcntl(fd, F_GETLK, &lock) finds no
	conflicting lock it sets l_whence to F_UNLCK, leaves all the other fields
	unchanged, and returns 0.  The (f.l_start < 0) test wrongly converts this
	to an EINVAL result.
	
	The underlying sys_fcntl function which compat_sys_fcntl and
	compat_sys_fcntl64 invoke already handles POSIX behavior correctly.  The
	additional tests in the compat wrappers are not needed.
	
	Here is a test case; its expected result is:
	
	PASS
	get flock: l_type=1, l_whence=0, l_start=145, l_len=10
	
	#include <stdlib.h>
	#include <unistd.h>
	#include <fcntl.h>
	#include <errno.h>
	#include <stdio.h>
	
	int
	main(int argc, char *argv[])
	{
	    int fd;
	    struct flock fl;
	    char buf[255];
	
	    fl.l_type = F_WRLCK;
	    fl.l_whence = SEEK_END;
	    fl.l_start = -100;
	    fl.l_len = -10;
	    /*
	    fl.l_whence = SEEK_SET;
	    fl.l_start = 100;
	    fl.l_len = 10;
	    */
	
	    switch(fork()) {
		case -1:
		    perror("fork");
		    exit(-1);
	
		case 0:
		    fd = open("/tmp/testfile", O_RDWR|O_CREAT, 0600);
		    if (fd == -1) {
			perror("open");
			exit(-1);
		    }
	
		    if (write(fd, buf, 255) == -1) {
			perror("write");
			exit(-1);
		    }
		    if (fcntl(fd, F_SETLK, &fl) == -1) {
			perror("F_SETLK");
			exit(-1);
		    }
		    sleep(2);
		    break;
	
		default:
		    sleep(1);
		    fd = open("/tmp/testfile", O_RDWR|O_CREAT, 0600);
		    if (fd == -1) {
			perror("open");
			exit(-1);
		    }
	
		    if (fcntl(fd, F_SETLK, &fl) != -1 || errno != EAGAIN) {
			perror("F_SETLK");
			exit(1);
		    }
	
		    fl.l_type = F_WRLCK;
		    /*
		    fl.l_whence = SEEK_SET;
		    fl.l_start = 0;
		    fl.l_len = 0;
		    */
		    if (fcntl(fd, F_GETLK, &fl) == -1) {
			perror("F_GETLK");
			printf("FAIL\n");
			exit(-1);
		    }
		    printf("PASS\n");
		    printf("get flock: l_type=%d, l_whence=%d, l_start=%zd, "
		    	   "l_len=%zd\n", fl.l_type, fl.l_whence,
			   (size_t) fl.l_start, (size_t) fl.l_len);
		    break;
	    }
	    exit(0);
	}
	
	Signed-off-by: Andreas Gruenbacher <agruen@suse.de>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<alexander.kern@siemens.com>
	[PATCH] USB quirk section fix
	
	usb_early_handoff is referenced from __devinit and hence should be
	__devinitdata.
	
	Acked-by: Greg Kroah-Hartman <greg@kroah.com>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<viro@parcelfarce.linux.theplanet.co.uk>
	[PATCH] pc300 portability fixes
	
	64bit portability fixes - as it is, driver had been broken on all 64bit
	platforms except alpha.
	
	Signed-off-by: Al Viro <viro@parcelfarce.linux.theplanet.co.uk>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<viro@parcelfarce.linux.theplanet.co.uk>
	[PATCH] i2o iomem annotations
	
	Signed-off-by: Al Viro <viro@parcelfarce.linux.theplanet.co.uk>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<viro@parcelfarce.linux.theplanet.co.uk>
	[PATCH] cpqphp_nvram iomem annotations
	
	Signed-off-by: Al Viro <viro@parcelfarce.linux.theplanet.co.uk>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<viro@parcelfarce.linux.theplanet.co.uk>
	[PATCH] misc __user annotations
	
	Signed-off-by: Al Viro <viro@parcelfarce.linux.theplanet.co.uk>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<viro@parcelfarce.linux.theplanet.co.uk>
	[PATCH] more C99 initializers
	
	Signed-off-by: Al Viro <viro@parcelfarce.linux.theplanet.co.uk>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<viro@parcelfarce.linux.theplanet.co.uk>
	[PATCH] drivers/w1 iomem annotations
	
	Signed-off-by: Al Viro <viro@parcelfarce.linux.theplanet.co.uk>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<viro@parcelfarce.linux.theplanet.co.uk>
	[PATCH] sound/oss iomem annotations
	
	Signed-off-by: Al Viro <viro@parcelfarce.linux.theplanet.co.uk>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<viro@parcelfarce.linux.theplanet.co.uk>
	[PATCH] zoran fix
	
	direct dereferencing of ioremapped memory.
	
	Signed-off-by: Al Viro <viro@parcelfarce.linux.theplanet.co.uk>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<viro@parcelfarce.linux.theplanet.co.uk>
	[PATCH] imsttfb iomem annotations
	
	Signed-off-by: Al Viro <viro@parcelfarce.linux.theplanet.co.uk>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<viro@parcelfarce.linux.theplanet.co.uk>
	[PATCH] pcbit fix
	
	direct dereferencing of iomem pointer.
	[not sure who maintains that one, so no Cc]
	
	Signed-off-by: Al Viro <viro@parcelfarce.linux.theplanet.co.uk>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<viro@parcelfarce.linux.theplanet.co.uk>
	[PATCH] dpt_i2o partial iomem annotations
	
	Signed-off-by: Al Viro <viro@parcelfarce.linux.theplanet.co.uk>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<viro@parcelfarce.linux.theplanet.co.uk>
	[PATCH] 3w-9xxx iomem annotations
	
	Signed-off-by: Al Viro <viro@parcelfarce.linux.theplanet.co.uk>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<viro@parcelfarce.linux.theplanet.co.uk>
	[PATCH] ncr iomem annotations
	
	Signed-off-by: Al Viro <viro@parcelfarce.linux.theplanet.co.uk>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<viro@parcelfarce.linux.theplanet.co.uk>
	[PATCH] isdn_divert annotations
	
	missing __user annotations + removal of gratitious casts in LHS of
	assignments.
	
	Signed-off-by: Al Viro <viro@parcelfarce.linux.theplanet.co.uk>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<viro@parcelfarce.linux.theplanet.co.uk>
	[PATCH] fix for breakage introduced in hgafb.c
	
	ChangeSet "adaplas: [PATCH] fbdev: Add __iomem annotations to hgafb" had
	actually broken it - it not only added a (useless) cast in rowaddr(), it
	had also added a dereferencing.
	
	Since it is video memory and since we do memory transfers on the
	resulting "address"...  IOW, it's even exploitable - not that there had
	been a lot of HGA boxen out there, but... 
	
	This restores the intended behaviour.
	
	Signed-off-by: Al Viro <viro@parcelfarce.linux.theplanet.co.uk>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<adaplas@hotpop.com>
	[PATCH] fbdev: Fix screen corruption in neofb
	
	This patch fixes the screen corruption resulting from neofb cleanup.
	
	Signed-off-by: Antonino Daplas <adaplas@pol.net>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<adaplas@hotpop.com>
	[PATCH] fbdev: Fix lockup when switching to/from X/console
	
	- Do a set_par very late instead of during fbcon_blank by setting the
	  FBINFO_MISC_MODESWITCHLATE flag which should help prevent
	  lockups when switching from X
	- Shorten chipset names that were missed before
	- Do not validate modeline if monitor specifications are not available
	
	Signed-off-by: Antonino Daplas <adaplas@pol.net>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<adaplas@hotpop.com>
	[PATCH] fbdev: Add NV30 pci_id and cleanup of probe error returns
	
	From Guido Guenther <agx@sigxcpu.org>
	
	this patch against 2.6.10-rc2 finally detects rivafb on NV30 based power
	books by adding the pciid. Wolfram Quester tested it and reported it
	working. It also cleans up the error code reported from the probe
	function.
	
	From Antonino Daplas <adaplas@pol.net>
	- do not validate mode if monitor specifications are not available
	
	Signed-Off-By: Guido Guenther <agx@sigxcpu.org>
	Signed-off-by: Antonino Daplas <adaplas@pol.net>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<adaplas@hotpop.com>
	[PATCH] fbdev: Fix module_param in rivafb
	
	third argument in module_param is the sysfs permission not a default
	value.  This fixes things for rivafb in 2.6.10-rc2:
	
	Signed-Off-By: Guido Guenther <agx@sigxcpu.org>
	Signed-off-by: Antonino Daplas <adaplas@pol.net>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<benh@kernel.crashing.org>
	[PATCH] ppc64: Fix default command line
	
	The ppc64 kernel can be built with a default command line (CONFIG_CMDLINE)
	for cases where none is provided by the firmware.
	
	However, some OF implementation always pass a "bootargs" property that only
	contains the "0" terminating byte of a C string which caused us to think
	there was a command line, and not use the built-in one. This patch fixes it.
	
	Signed-off-by: Benjamin Herrenschmidt <benh@kernel.crashing.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<benh@kernel.crashing.org>
	[PATCH] ppc64: Fix typo when parsing isa "reg" properties
	
	This patch fixes a typo in the code that parse Open Firmware properties
	for devices under an "isa" node, the incorrect struct size was used when
	parsing the "reg" property of these.
	
	Signed-off-by: Benjamin Herrenschmidt <benh@kernel.crashing.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<benh@kernel.crashing.org>
	[PATCH] ppc64: pci_bus_to_host() simplification
	
	The pci_bus_to_host() inline function used on ppc64 to find the pci_contoller
	structure a give pci_bus resides on used to contain bogus tree walking code,
	which fortunately ended up never beeing necessary since "sysdata" always points
	to a device_node structure that has the proper "phb" field (even if it is not
	the device-node of the actual P2P, which happens during boot).
	
	Signed-off-by: Benjamin Herrenschmidt <benh@kernel.crashing.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<benh@kernel.crashing.org>
	[PATCH] ppc64: Fix early serial setup baud rate
	
	The "udbg" code used on ppc64 for early consoles including early serial
	console recently got a new "default speed" option. This was implemented
	as a switch case that missed a few important cases, one beeing necessary
	for a board beeing released soon.
	
	This patch fixes it by using the proper division to calculate the dll
	value for the uart instead of that bogus switch/case.
	
	Signed-off-by: Benjamin Herrenschmidt <benh@kernel.crashing.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<benh@kernel.crashing.org>
	[PATCH] del_timer() vs. mod_timer() SMP race
	
	We just spent some days fighting a rare race in one of the distro's who backported
	some of timer.c from 2.6 to 2.4 (though they missed a bit).
	
	The actual race we found didn't happen in 2.6 _but_ code inspection showed that a
	similar race is still present in 2.6, explanation below:
	
	Code removing a timer from a list (run_timers or del_timer) takes that CPU list
	lock, does list_del, then timer->base = NULL.
	
	It is mandatory that this timer->base = NULL is visible to other CPUs only after
	the list_del() is complete. If not, then mod timer could see it NULL, thus take it's
	own CPU list lock and not the one for the CPU the timer was beeing removed from the
	list, and thus the list_add in mod_timer() could race with the list_del() from
	run_timers() or del_timer().
	
	Our race happened with run_timers(), which _DOES_ contain a proper smp_wmb() in the
	right spot in 2.6, but didn't in the "backport" we were fighting with.
	
	However, del_timer() doesn't have such a barrier, and thus is subject to this race in
	2.6 as well. This patch fixes it.
	
	Signed-off-by: Benjamin Herrenschmidt <benh@kernel.crashing.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<sfrench@sambaltcdom.austin.ibm.com>
	[CIFS] cifs readdir changes part 7
	
	Signed-off-by: Steve French (sfrench@us.ibm.com)

<sds@epoch.ncsc.mil>
	[PATCH] SELinux: map Unix seqpacket sockets to appropriate security class
	
	This patch for SELinux fixes a bug in the mapping of socket types to
	security classes and ensures that Unix seqpacket sockets are mapped to an
	appropriate security class.  The Unix stream security class is re-used in
	this case as it has the same permission checking applied as for seqpacket. 
	
	Signed-off-by:  Stephen Smalley <sds@epoch.ncsc.mil>
	Signed-off-by:  James Morris <jmorris@redhat.com>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<Tim_T_Murphy@Dell.com>
	[PATCH] serial: add support for Dell Remote Access Card 4.
	
	Here's a patch to include Dell's 4th generation Remote Access Controller
	ids.
	
	Acked-by: Russell King <rmk@arm.linux.org.uk>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<pmeda@akamai.com>
	[PATCH] /proc/cmdline missing mmput
	
	Fix the mmput bug introduced while fixing cmdline race.
	
	Signed-off-by: Prasanna Meda <pmeda@akamai.com>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<rmk@arm.linux.org.uk>
	[PATCH] smc91c92_cs outw() fix
	
	The patch below fixes wrong arguments to outw in smc91c92_cs.c
	
	Signed-off-by: Russell King <rmk@arm.linux.org.uk>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<cp@absolutedigital.net>
	[PATCH] fix typo in init/Kconfig
	
	Patch below fixes a typo in init/Kconfig for option CC_ALIGN_FUNCTIONS.
	
	Signed-off-by: Cal Peake <cp@absolutedigital.net>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<kernel@obster.org>
	[PATCH] mc146818rtc.h include fix
	
	Prevents user-space including spinlock.h which breaks the build.
	
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<kraxel@bytesex.org>
	[PATCH] video-buf oops/crash fixes
	
	Some places which need adaption to the last video-buf API change where
	forgotten, this patches fixes them up.  Hope I really caught them all now.
	
	Signed-off-by: Gerd Knorr <kraxel@bytesex.org>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<kraxel@bytesex.org>
	[PATCH] v4l: disable unused function.
	
	#ifdef out a currently unused (in-kernel) function, lets see if any
	out-of-kernel users cry.  If not we can drop it altogether later on.
	
	Signed-off-by: Gerd Knorr <kraxel@bytesex.org>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<kraxel@bytesex.org>
	[PATCH] v4l: more modparam
	
	convert more modules to new-style insmod options.
	
	Signed-off-by: Gerd Knorr <kraxel@bytesex.org>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<kraxel@bytesex.org>
	[PATCH] tuner update
	
	Update for the tuner module: add support for a new tuner chip.
	
	Signed-off-by: Gerd Knorr <kraxel@bytesex.org>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<torvalds@evo.osdl.org>
	x86: clean up ptrace single-stepping, make PT_DTRACE exact.
	
	(This makes the naming of "DTRACE" purely historical, since
	on x86 it now means "single step in progress").

<torvalds@evo.osdl.org>
	x86: make TF handling at signals consistent.
	
	This depends on the previous ptrace single-step cleanup,
	and makes sure that signal handling does not lose TF events.
	
	This allows debuggers to trace programs that set TF on their
	own.

<torvalds@ppc970.osdl.org>
	acpi: don't disable PCI irq links that were active at boot.
	
	This fixes at least some interrupt polarity setup cases.
	The ACPI guys may want to eventually do this differently, but
	in the meantime this makes ACPI behaviour closer to non-ACPI
	behaviour, and fixes known problems.
	
	I'll further argue that this protects non-PCI devices that may
	just share the irq routing from being screwed, but that may or
	may not be an argument that everybody buys into.

<sam@mars.ravnborg.org>
	kbuild: Major update of Documentation/kbuild/modules.txt
	
	Included some of the information given to people developing external modules.
	This should answer the typical questions and lay a better ground for adding
	new information as needed.
	
	Signed-off-by: Sam Ravnborg <sam@ravnborg.org>

<cp@absolutedigital.net>
	fix typo in init/Kconfig
	
	Patch below fixes a typo in init/Kconfig for option CC_ALIGN_FUNCTIONS.
	
	Signed-off-by: Cal Peake <cp@absolutedigital.net>
	Signed-off-by: Sam Ravnborg <sam@ravnborg.org>

<dsaxena@net.rmk.(none)>
	[ARM PATCH] 2270/1: [Trivial] Remove reference to head-armv.S
	
	Patch from Deepak Saxena
	
	arch/arm/kernel/head-armv.S is now simply head.S.  This patches updates
	references in kernel comments.
	
	Signed-off-by: Deepak Saxena
	Signed-off-by: Russell King

<bjorn.helgaas@hp.com>
	[IA64] iosapic.c: don't direct interrupts to offline cpus
	
	Ignore offline CPUs when registering IOSAPIC interrupts.  We previously
	directed interrupts even to offline CPUs, which means that if you have some
	unused CPUs (e.g., you used "maxcpus="), some interrupts won't work.
	
	This really hurts because distro installs typically use "maxcpus=1".
	
	Patch by Alex Williamson.
	
	Signed-off-by: Bjorn Helgaas <bjorn.helgaas@hp.com>
	Signed-off-by: Tony Luck <tony.luck@intel.com>

<ben-linux@org.rmk.(none)>
	[ARM PATCH] 2272/1: S3C2410 - rtc should check for <0 on alarm set
	
	Patch from Ben Dooks
	
	Since alarm fields can be ints, there is the posibility
	that the alarm set code needs to check for <0 as a
	valid posibility for `any`
	
	Signed-off-by: Ben Dooks
	Signed-off-by: Russell King

<yoshfuji@linux-ipv6.org>
	[IPV6] Fix possible dead-lock in ipv6_create_tempaddr().
	
	If we need to obtain lock both ifp and ifp->idev, we need to do
	lock idev first to avoid dead-lock.
	
	Signed-off-by: Hideaki YOSHIFUJI <yoshfuji@linux-ipv6.org>

<yoshfuji@linux-ipv6.org>
	[IPV6] Fix a race when dad completed during shutting down its owner interface.
	
	Bug was noticed by Herbert Xu <herbert@gondor.apana.org.au>.
	
	Signed-off-by: Hideaki YOSHIFUJI <yoshfuji@linux-ipv6.org>

<yoshfuji@linux-ipv6.org>
	[IPV6] Stop DAD during shutting down the interface.
	
	Signed-off-by: Hideaki YOSHIFUJI <yoshfuji@linux-ipv6.org>

<manfred99@gmx.ch>
	[ATM]: Force -n option in gzip invocation.
	
	Signed-off-by: David S. Miller <davem@davemloft.net>

<manfred99@gmx.ch>
	[DECNET]: dn_neigh.c needs linux/module.h
	
	Signed-off-by: David S. Miller <davem@davemloft.net>

<torvalds@evo.osdl.org>
	acpi: disable PCI links at boot again, fix ELCR
	
	Len Brown convinced me that the problem with disabling
	PCI routing entries wasn't the disable as much as the
	fact that ELCR needs to be updated when removing the PCI
	routing. So this reverts the previous cset and updates
	ELCR as suggested by Len.

<sfrench@sambaltcdom.austin.ibm.com>
	[CIFS] cifs readdir rewrite part 8
	
	Signed-off-by: Steve French (sfrench@us.ibm.com)

<yoshfuji@linux-ipv6.org>
	[IPV6] Clean-up locking in ipv6_add_addr().
	
	Use addrconf_hash_lock instead of private lock.
	
	Signed-off-by: Hideaki YOSHIFUJI <yoshfuji@linux-ipv6.org>

<Brian.Haley@hp.com>
	[IPV6] improve ipv6_ifa_notify() readability.

<tony.luck@intel.com>
	[IA64] Add add_key, request_key, keyctl syscalls
	
	Signed-off-by: Tony Luck <tony.luck@intel.com>

<juhl-lkml@dif.dk>
	[SCTP]: Fix static inline declarations.
	
	Was using 'inline static int' for some strange reason.
	GCC now complains about this so...
	
	Signed-off-by: Jesped Juhl <juhl-lkml@dif.dk>
	Signed-off-by: David S. Miller <davem@davemloft.net>

<kaber@trash.net>
	[XFRM]: Fix endless loop in xfrm_policy_insert
	
	The patch 'Fix policy update bug when increasing
	priority of last policy' broke this, when a policy
	with lower priority than an existing policy is inserted
	xfrm_policy_insert loops forever.
	
	Signed-off-by: Patrick McHardy <kaber@trash.net>
	Signed-off-by: David S. Miller <davem@davemloft.net>

<len.brown@intel.com>
	[ACPI] survive a BIOS that erroneously supplies multiple MADTs
	http://bugzilla.redhat.com/beta2/show_bug.cgi?id=135449
	
	Signed-off-by: Len Brown <len.brown@intel.com>

<juhl-lkml@dif.dk>
	[PATCH] remove errornous semicolon in arch/i386/kernel/traps.c::do_general_protection
	
	Building with gcc -W revealed this warning:
	arch/i386/kernel/traps.c: In function `do_general_protection':
	arch/i386/kernel/traps.c:506: warning: empty body in an if-statement
	
	upon inspecting the code I see what looks like a mistakenly placed ";"
	
	        if (!fixup_exception(regs)) {
	                if (notify_die(DIE_GPF, "general protection fault", regs,
	                                error_code, 13, SIGSEGV) == NOTIFY_STOP);
	                        return;
	                die("general protection fault", regs, error_code);
	        }
	
	That ";" after the second if should go away so the return; before die()
	is not unconditional.
	
	Signed-off-by: Jesper Juhl <juhl-lkml@dif.dk>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<sfrench@sambaltcdom.austin.ibm.com>
	[CIFS] cifs readdir rewrite part 9 - fix unicode strlen to be more readable following Shaggy's suggestion
	
	Signed-off-by: Steve French (sfrench@us.ibm.com)

<sfrench@sambaltcdom.austin.ibm.com>
	[CIFS] POSIX ACL support part 2
	
	Signed-off-by: Steve French (sfrench@us.ibm.com)

<janitor@sternwelten.at>
	[VLAN]: Handler register_netdevice_notifier() errors.
	
	Signed-off-by: walter harms <wharms@bfs.de>
	Signed-off-by: Maximilian Attems <janitor@sternwelten.at>
	Signed-off-by: David S. Miller <davem@davemloft.net>

<janitor@sternwelten.at>
	[ATM]: Handle register_netdevice_notifier() errors in mpc.c
	
	Signed-off-by: walter harms <wharms@bfs.de>
	Signed-off-by: Maximilian Attems <janitor@sternwelten.at>
	Signed-off-by: David S. Miller <davem@davemloft.net>

<geert@linux-m68k.org>
	[DIO]: Fix typo in dio_resource_len()
	
	Signed-off-by: Geert Uytterhoeven <geert@linux-m68k.org>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: David S. Miller <davem@davemloft.net>

<herbert@gondor.apana.org.au>
	[NETFILTER]: Apply ipsec to ipt_REJECT packets.
	
	With help from Patrick McHardy.
	
	Signed-off-by: Herbert Xu <herbert@gondor.apana.org.au>
	Signed-off-by: David S. Miller <davem@davemloft.net>

<akpm@osdl.org>
	[PATCH] e100: early reset fix
	
	Gents, what do we think of the below fix?
	
	Thanks.
	
	My IBM A21P laptop is getting an IRQ storm at boot.
	
	IRQ #11 is shared between USB and e100, and USB is getting in there first.
	Consequently, when e100 initialises the hardware, that interrupt line is ready
	to go.  As soon as e100.c runs pci_set_master(), the interrupt hits the CPU.
	But of course the e100 driver isn't ready to handle the interrupt yet, so the
	system disables IRQ #11.
	
	This only happens on warm boots (/sbin/reboot).  Things work OK from power-on.
	 So I assume that the BIOS is failing to fully reset the NIC and that some
	sort of interrupt is internally pending.
	
	The patch rearranges e100_probe() so that we issue e100_hw_reset() prior to
	running pci_set_master(), and fixes the problem.
	
	Note that e100_probe() is now running e100_hw_reset() twice - I didn't remove
	the later call for general paranoia reasons.
	
	eepro100.c has the same lockup, and needs a similar fix.
	
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Jeff Garzik <jgarzik@pobox.com>

<akpm@osdl.org>
	[PATCH] tulip: make tulip_stop_rxtx() wait for DMA to fully stop
	
	From: "John W. Linville" <linville@tuxdriver.com>
	
	tulip_stop_rxtx() doesn't wait for DMA to fully stop like the function
	call name implies.
	
	This was submitted through my employer -- I am not the original author of this
	patch.  However, I passed it by Jeff Garizk and he expressed interest in
	having it upstream.
	
	Signed-off-by: Grant Grundler <iod00d@hp.com>
	Acked-by: Charlie Brett <charlie.brett@hp.com>
	Signed-off-by: John W. Linville <linville@tuxdriver.com>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Jeff Garzik <jgarzik@pobox.com>

<akpm@osdl.org>
	[PATCH] M68k: Update Atari defconfig (enable Ethernet and MII)
	
	From: Geert Uytterhoeven <geert@linux-m68k.org>
	
	M68k: Update Atari defconfig (enable Ethernet and MII)
	
	Signed-off-by: Geert Uytterhoeven <geert@linux-m68k.org>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Jeff Garzik <jgarzik@pobox.com>

<akpm@osdl.org>
	[PATCH] M68k HP Lance Ethernet: Fix leaks on probe/removal
	
	From: Geert Uytterhoeven <geert@linux-m68k.org>
	
	HP Lance Ethernet: There's tons of leaks in the hplcance probing code, and it
	doesn't release the memory region on removal either (from Christoph Hellwig)
	
	Signed-off-by: Geert Uytterhoeven <geert@linux-m68k.org>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Jeff Garzik <jgarzik@pobox.com>

<akpm@osdl.org>
	[PATCH] make ibmveth link always up
	
	From: Santiago Leon <santil@us.ibm.com>
	
	The attached patch makes the ibmveth driver indicate that its link is
	always up rather than always down, thus allowing the userspace side of
	booting to configure the network interface correctly.
	
	Signed-Off-By: Santiago Leon <santil@us.ibm.com>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Jeff Garzik <jgarzik@pobox.com>

<akpm@osdl.org>
	[PATCH] M68k: Update HP300 defconfig (enable DIO and HP Lance Ethernet)
	
	From: Geert Uytterhoeven <geert@linux-m68k.org>
	
	M68k: Update HP300 defconfig (enable DIO and HP Lance Ethernet)
	
	Signed-off-by: Geert Uytterhoeven <geert@linux-m68k.org>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Jeff Garzik <jgarzik@pobox.com>

<brazilnut@us.ibm.com>
	[PATCH] pcnet32: added pci_disable_device
	
	This patch adds pci_disable_device in the appropriate places to
	eliminate the following message when removing the module.
	
	pcnet32 0000:00:05.0: Device was removed without properly calling pci_disable_device(). This may need fixing.
	pcnet32 0000:02:05.0: Device was removed without properly calling pci_disable_device(). This may need fixing.
	
	Tested ia32.
	
	signed-off-by: Don Fry <brazilnut@us.ibm.com>
	Signed-off-by: Jeff Garzik <jgarzik@pobox.com>

<khali@linux-fr.org>
	[PATCH] I2C: More verbose w83l785ts driver
	
	This simple patch increases the verbosity of the w83l785ts hardware
	monitoring driver. I wrote it months ago in the hope it would help solve
	a reported problem [1]. Not sure whether it did (no news from user since
	July), but the extra debug info may help in the future and doesn't hurt
	otherwise, so let's have this in for every user (not that many AFAIK),
	just in case.
	
	
	[1] http://bugzilla.kernel.org/show_bug.cgi?id=2899
	
	Signed-off-by: Jean Delvare <khali@linux-fr.org>
	Signed-off-by: Greg Kroah-Hartman <greg@kroah.com>

<johnpol@2ka.mipt.ru>
	[PATCH] w1: do not stop and oops if netlink socket was not allocated.
	
	Do not panic if netlink socket was not created.
	This will allow only first device to broadcast it's slave updates.
	We need kernel connector here.
	
	Signed-off-by: Evgeniy Polyakov <johnpol@2ka.mipt.ru>
	Signed-off-by: Greg Kroah-Hartman <greg@kroah.com>

<johnpol@2ka.mipt.ru>
	[PATCH] w1: make W1_DS9490_BRIDGE available
	
	W1_DS9490R_BRIDGE kconfig typo.
	
	
	Signed-off-by: Adrian Bunk <bunk@stusta.de>
	Signed-off-by: Evgeniy Polyakov <johnpol@2ka.mipt.ru>
	Signed-off-by: Greg Kroah-Hartman <greg@kroah.com>

<johnpol@2ka.mipt.ru>
	[PATCH] drivers/w1/dscore: fix the inline mess
	
	Remove unneded inlines.
	
	Signed-off-by: Adrian Bunk <bunk@stusta.de>
	Signed-off-by: Evgeniy Polyakov <johnpol@2ka.mipt.ru>
	Signed-off-by: Greg Kroah-Hartman <greg@kroah.com>

<aris@cathedrallabs.org>
	[PATCH] i2c-elektor: get rid of cli/sti
	
	this patch get rid of cli()/sti(). while correcting this I found
	that when a process wakes by an interrupt, pcf_pending doesn't
	come back to 0 and next caller will return imediately. also,
	there are other drivers with the exact same problem. if you
	don't have any comments on this, I'll do the same for other
	drivers.
	
	
	[I2C] i2c-elektor: getting rid of cli()/sti() usage
	
	Signed-off-by: Aristeu Sergio Rozanski Filho <aris@cathedrallabs.org>
	Signed-off-by: Greg Kroah-Hartman <greg@kroah.com>

<aris@cathedrallabs.org>
	[PATCH] [2/2] i2c-elektor: adding missing casts
	
	[I2C] i2c-elektor: adding missing casts
	
	Signed-off-by: Aristeu Sergio Rozanski Filho <aris@cathedrallabs.org>
	Signed-off-by: Greg Kroah-Hartman <greg@kroah.com>

<jthiessen@penguincomputing.com>
	[PATCH] I2C: add adm1026 chip driver
	
	Here is the revised adm1026 driver port for kernel 2.6.10-rc2.  It takes into
	account Jean Delvare's and Mark Hoffman's comments and recommendations, and
	provides pretty much the entire feature set of the 2.4.X kernel driver, but
	in (hopefully) a manner compliant with the standards for the 2.6.X kernel
	lm_sensors drivers.
	
	As discussed in previous messages, control over the pwm output is provided
	via:
	
	pwm[1-3]                  {0-255}
	pwm[1-3]_enable           {0-2}  (off, manual, automatic fan control)
	
	Note that there is really only one pwm register and one enable bit.  pwm[2-3]
	and pwm[2-3]_enable are provided for the sake of a chip-indpendent interface,
	and are simply RW mirrors of pwm1 and pwm1_enable, respectively.
	
	Access to the DAC is provided via:
	
	analog_out            {0-2500} (millivolts)
	
	No way is currently provided to turn on DAC-mediated automatic fan control.
	See my previous email in this thread for the reasons why.
	
	Control over automatic fan "on" temperatures are provided by:
	
	temp[1-3]_auto_point1_temp     {-128000 - 127000}
	
	Hardware-determined hysteresis and range values are revealed in:
	
	temp[1-3]_auto_point1_temp_hyst   {temp[1-3]_auto_point1_temp - 6000}
	temp[1-3]_auto_point2_temp        {temp[1-3]_auto_point1_temp + 20000}
	
	Failsafe critical temperatures at which the fans go to maximum speed are
	controled via:
	
	temp[1-3]_crit_enable       {0-1}                 (off, on)
	temp[1-3]_crit              {-128000 - 127000}
	
	Again, there is really only one "enable critical-temperature-fan-maximization"
	bit.  temp[2-3]_crit_enable are simply RW mirrors of temp1_crit_enable
	
	These values override any values set for the pwm-mediated automatic fan
	control.
	
	VRM is now set via Rudolf Marek's functions.  VID is read from the assumed
	correct set of pins (GPIO11-GPIO15), and no longer a user-writable field.
	
	In keeping with Greg KH's changes,
	
	normal_i2c_range
	normal_isa_range
	
	have been removed,
	
	and
	
	normal_i2c
	
	has been updated to enumerate all addresses.  (Just adding 0x2d)
	
	Finally, the val-comparison-before-assignment bug has been corrected.
	
	Signed-off-by: Justin Thiessen <jthiessen@penguincomputing.com>
	Signed-off-by: Greg Kroah-Hartman <greg@kroah.com>

<greg@kroah.com>
	[PATCH] I2C: make fixup_fan_min static in adm1026 driver.
	
	Signed-off-by: Greg Kroah-Hartman <greg@kroah.com>

<dlsy@snoqualmie.dp.intel.com>
	[PATCH] PCI Hotplug: Add pci_enable_device() in hot-plug drivers
	
	Here is the patch to add pci_enable_device() to the two hot-plug
	drivers.  In 2.6.10-rc2, the unconditional PCI ACPI IRQ routing
	has been removed.  Without this patch, the drivers won't work in
	INTx mode with ACPI enabled.
	
	
	Signed-off-by: Dely Sy <dely.l.sy@intel.com>
	Signed-off-by: Greg Kroah-Hartman <greg@kroah.com>

<greg@kroah.com>
	[PATCH] PCI Hotplug: fix warning compile issue in cpqphp driver
	
	As pointed out by "O.Sezer" <sezeroz@ttnet.net.tr> in a patch to 2.4
	
	Signed-off-by: Greg Kroah-Hartman <greg@kroah.com>

<rl@hellgate.ch>
	[PATCH] USB visor: Don't count outstanding URBs twice
	
	Incrementing the outstanding_urbs counter twice for the same URB can't
	be good. No wonder Simon didn't get far syncing his Palm.
	
	Signed-off-by: Roger Luethi <rl@hellgate.ch>
	Signed-off-by: Greg Kroah-Hartman <greg@kroah.com>

<zaitcev@redhat.com>
	[PATCH] ub: flag day - major 180
	
	The major 180 has been allocated by LANANA. This is needed for people who
	insist on running 2.6 without udev (imagine that).
	
	
	From: Pete Zaitcev <zaitcev@redhat.com>
	Signed-off-by: Greg Kroah-Hartman <greg@kroah.com>

<zaitcev@redhat.com>
	[PATCH] ub: oops with preempt ("Sahara Workshop")
	
	I admit that the code should be locked properly instead, but the global plan
	is to drop all P3 tagged printks anyway. So let it be guarded for the moment.
	
	Signed-off-by: Pete Zaitcev <zaitcev@yahoo.com>
	Signed-off-by: Greg Kroah-Hartman <greg@kroah.com>

<david-b@pacbell.net>
	[PATCH] USB Gadget: add and use gadget_is_pxa27x()
	
	The UDC in Intel's "Bulverde" processors is incompatible with the
	one in their PXA 25x/26x/21x processors, and has different sorts
	of restrictions.  For example, it can implement real CDC Ethernet,
	while the earlier (PXA 25x etc) can't.
	
	
	This adds a gadget_is_pxa27x() function and uses it appropriately in the
	current set of gadget drivers.  (And moves an LH7A40X entry to the right
	place in "ether.c").
	
	From: Dmitry Krivoschokov <dkrivoschokov@dev.rtsoft.ru>
	Signed-off-by: David Brownell <dbrownell@users.sourceforge.net>
	Signed-off-by: Greg Kroah-Hartman <greg@kroah.com>

<david-b@pacbell.net>
	[PATCH] USB: fix Genesys GL880S EHCI
	
	This has two minor patches to make this driver work better with
	the Genesys GL880S:  don't report hardware port indicators (until
	the root hub code supports them); and patch the misreported number
	of ports (two, not four).
	
	Signed-off-by: David Brownell <dbrownell@users.sourceforge.net>
	Signed-off-by: Greg Kroah-Hartman <greg@kroah.com>

<david-b@pacbell.net>
	[PATCH] USB: usb_sg_*() unlink deadlock fix
	
	This would be rare with HCDs that maintain chains of DMA
	transfers, except if the HC dies in the middle of an I/O
	request; so no rush to merge this.  It'd happen in a PIO
	based HCD though ... :)
	
	
	Async unlink of an URB from an endpoint's I/O queue _normally_ involves a
	delay from handshaking with the host controller, to be sure the DMA queue
	is inactive.  So urb->complete() runs after usb_unlink_urb() returns, and
	from a different context.  But not always...
	
	The completion may run immediately whenever the HCD knows that HC isn't
	busy with the URB.  Maybe that HCD is in a HALT state, or the endpoint
	queue is is temporarily off-schedule (halted, or dead after PM resume
	from D3cold, etc) ... or maybe the HCD doesn't use DMA, so most unlinks
	just list_del_init() and return.
	
	This makes usb_sg_cancel() and sg_complete() drop the io->lock when they
	cancel active urbs, preventing potential self-deadlock when that completion
	handler runs immediately.
	
	Signed-off-by: David Brownell <dbrownell@users.sourceforge.net>
	Signed-off-by: Greg Kroah-Hartman <greg@kroah.com>

<david-b@pacbell.net>
	[PATCH] USB: "sparse -Wcontext" and USB HCDs ...
	
	This adds "sparse -Wcontext" annotations to the main HCDs, reflecting that
	they all need to drop their (schedule) lock while issuing URB completion
	callbacks.  (Some completion callbacks will resubmit that URB, relying on
	that to keep the endpoint queue from emptying and getting descheduled.)
	
	Signed-off-by: David Brownell <dbrownell@users.sourceforge.net>
	Signed-off-by: Greg Kroah-Hartman <greg@kroah.com>

<alborchers@steinerpoint.com>
	[PATCH] USB Gadget: gadget serial documentation
	
	This patch adds the gadget serial documentation.
	
	
	Signed-off-by: Al Borchers <alborchers@steinerpoint.com>
	Signed-off-by: Greg Kroah-Hartman <greg@kroah.com>

<armijn@uulug.nl>
	[PATCH] USB: add ati_remote.c device id
	
	please consider applying the attached patch which adds an identifier for
	another variant of the X10 RF remote. This one is very common everywhere
	in Europe where Aldi (a supermarket discounter) sells their PCs
	(Netherlands, Belgium, northern Germany, France, Spain, ...).
	Considering that they ship a few 100,000 PCs once or twice every year
	you can imagine there are quite a few of these remotes kicking around.
	
	I've tested with 2.6.10-rc2 and various versions of XMMS and lirc with
	the devinput driver. It does play well with lirc-0.7.0-pre8 but not so
	nice with 0.7.0. I don't know why, but according to some posts on the
	lirc list it seems to be in lirc.
	
	By the way, there seem to be even more variants of this device,
	according to:
	
	http://cvs.sourceforge.net/viewcvs.py/lirc/lirc/drivers/lirc_atiusb/lirc_atiusb.c
	
	From: Armijn Hemel <armijn@uulug.nl>
	Signed-off-by: Greg Kroah-Hartman <greg@kroah.com>

<david-b@pacbell.net>
	[PATCH] USB: ax8817x/usbnet, no GFP_KERNEL blocking in_irq
	
	This removes some nasty might_sleep() warnings.
	Worth fixing before 2.6.10-final IMO; we don't
	actually _know_ of oopses this bug caused ...
	
	The AX8817x link detection code was calling usb_submit_urb() with
	GFP_KERNEL in a completion handler (IRQ handler).  That's a no-no.
	
	Signed-off-by: David Brownell <dbrownell@users.sourceforge.net>
	Signed-off-by: Greg Kroah-Hartman <greg@kroah.com>

<dfries@mail.win.org>
	[PATCH] USB: fix for HID field index
	
	The problem I'm having is that the field index is always returned as 0
	when reading struct hiddev_usage_ref and I need something to
	distinguish the input data as the usage code is the same.  I looked
	through hid-core.c and hiddev.c and hiddev_hid_event is the only place
	I could see field->index being used.  It wasn't being initialized
	causing the input to always be returned as zero.
	
	Signed-off-by: David Fries <dfries@mail.win.org>
	Signed-off-by: Greg Kroah-Hartman <greg@kroah.com>

<greg@kroah.com>
	USB: fix dev_dbg() call in visor.c
	
	Turns out that this macro doesn't work in usb-serial drivers, I had forgotten
	about that :(
	
	Signed-off-by: Greg Kroah-Hartman <greg@kroah.com>

<markh@osdl.org>
	[PATCH] 2.6.9 aacraid: Support ROMB RAID/SCSI mode - Resend -
	
	Another patch from Mark Salyzyn's driver. Supports correct operation of
	ROMB (RAID on motherboard) SCSI/RAID.  Applies to the scsi-misc bk tree.
	
	Signed-off-by: Mark Haverkamp <markh@osdl.org>
	Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

<jejb@mulgrave.(none)>
	mptfusion: delete MPTSCSIH_DBG_TIMEOUT
	
	From: 	Moore, Eric Dean <Eric.Moore@lsil.com>
	
	This removes MPTSCSIH_DBG_TIMEOUT associated 
	code in the driver.
	
	Signed-off-by: Eric Moore <Eric.Moore@lsil.com>
	Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

<sfrench@sambaltcdom.austin.ibm.com>
	[CIFS] POSIX ACL support part 3
	
	Signed-off-by: Steve French (sfrench@us.ibm.com)

<jejb@mulgrave.(none)>
	mptfusion: streamline slave_alloc
	
	From: 	Moore, Eric Dean <Eric.Moore@lsil.com>
	
	This cleans up slave_xxx functions. 
	This patch previously submitted by hch@.
	
	Signed-off-by: Eric Moore <Eric.Moore@lsil.com>
	Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

<jejb@mulgrave.(none)>
	mptfusion: streamline queuecommand
	
	From: 	Moore, Eric Dean <Eric.Moore@lsil.com>
	
	This cleans up mptscsih_qcmd function.
	This patch previously submitted by hch@.
	
	Signed-off-by: Eric Moore <Eric.Moore@lsil.com>
	Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

<jejb@mulgrave.(none)>
	mptfusion: replace chip_type
	
	From: 	Moore, Eric Dean <Eric.Moore@lsil.com>
	
	This replaces chip_type with bus_type.
	
	Signed-off-by: Eric Moore <Eric.Moore@lsil.com>
	Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

<jejb@mulgrave.(none)>
	mptfusion: command line parameters
	
	This cleans up the command line parameters
	with individual parameters and descriptions.
	
	Signed-off-by: Eric Moore <Eric.Moore@lsil.com>
	Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

<jejb@mulgrave.(none)>
	mptfusion: resid cleanup
	
	From: 	Moore, Eric Dean <Eric.Moore@lsil.com>
	
	This cleanup returns residual for all completed
	scsi io.
	
	Signed-off-by: Eric Moore <Eric.Moore@lsil.com>
	Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

<jejb@mulgrave.(none)>
	mptfusion: kill fusion init called
	
	From: 	Moore, Eric Dean <Eric.Moore@lsil.com>
	
	The scsi early init problem is long gone, 
	so no need to work around it anymore.
	This patch previously submitted by hch@.
	
	Signed-off-by: Eric Moore <Eric.Moore@lsil.com>
	Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

<paulus@samba.org>
	[PATCH] ppc64: fix compilation with recent toolchains
	
	The ppc64 toolchains don't create dot symbols (i.e. a globally
	visible ".foo" symbol for the text of function foo) any more.
	
	This breaks the kernel compile because we refer to function text
	addresses in the system call table.
	
	Fortunately there is an option, -mcall-aixdesc, which restores the
	previous behaviour, and even more fortunately, old ppc64 toolchains
	understand the option as well as new ones.
	
	This patch adds -mcall-aixdesc to CFLAGS in arch/ppc64/Makefile.
	
	Signed-off-by: Paul Mackerras <paulus@samba.org>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<paulus@samba.org>
	[PATCH] ppc64: remove the volatile from cpus_in_xmon
	
	Remove the volatile from cpus_in_xmon, and put a barrier() in the loop that
	waits for the other cpus to come in to xmon.
	
	Signed-off-by: Paul Mackerras <paulus@samba.org>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<akpm@osdl.org>
	[PATCH] dont deprecate MODULE_PARM
	
	Let's revert this for now so all those warnings do not soil our 2.6.10
	release.  We'll get Rusty's kernel-wide-sweep fixup patches in for 2.6.11, and
	then we can put this warning back.
	
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<anton@samba.org>
	[PATCH] ppc64: linux,rtas* fixes
	
	Move the linux,rtas* properties into the /rtas node and make them 32bit.  Use
	rtas-size and avoid duplicating it in linux,rtas-size.
	
	Signed-off-by: Anton Blanchard <anton@samba.org>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<anton@samba.org>
	[PATCH] ppc64: Reserve kernel memory in kernel instead of wrapper
	
	Reserve the kernel memory (0 - klimit) in the kernel instead of the wrapper.
	Remove an old comment that incorrectly referred to klimit.
	
	Signed-off-by: Anton Blanchard <anton@samba.org>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<anton@samba.org>
	[PATCH] ppc64: linux,tce* changes
	
	Remove linux,has-tce-table since we can just look for linux,tce-base and
	linux,tce-size.  Make linux,tce-base store real addresses instead of virtual
	ones, the wrapper may not know the translation the kernel will use.
	
	Signed-off-by: Anton Blanchard <anton@samba.org>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<olof@austin.ibm.com>
	[PATCH] ppc64: Make early processor spinup based on physical ids
	
	This changes the early CPU spinup code to be based on physical CPU ID
	instead of logical.  This will make it possible to kexec off of a
	different cpu than 0, for example after it's been hot-unplugged.
	
	The booted cpu will still be mapped as logical cpu 0, since there's various
	stuff in the early boot that assumes logical boot cpuid is 0.
	
	Also, it expands the kexec boot param structure to allow the booted physical
	cpuid to be passed in.  This includes bumping the version number to 2 for
	backwards compat.
	
	Signed-off-by: Olof Johansson <olof@austin.ibm.com>
	Signed-off-by: Anton Blanchard <anton@samba.org>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<mporter@kernel.crashing.org>
	[PATCH] ppc32: Fix uninitialized PPC40x vars
	
	Fix more uninitialized variables in the PPC40x code.
	
	Signed-off-by: Matt Porter <mporter@kernel.crashing.org>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<trini@kernel.crashing.org>
	[PATCH] ppc32: Have the 8260 board-hook happen a bit later
	
	Borut Lukic <borutlukic@email.si> brought to my attention that in
	platform_init() on 8260 the board hook was being called too early to allow for
	overrides (e.g.  different memory sizings functions or rtc, or anything else).
	 This moves the call to the end of platform_init() and I suspect fixes some
	unnoticed yet bugs in a number of 8260 platforms.
	
	Signed-off-by: Tom Rini <trini@kernel.crashing.org>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<trini@kernel.crashing.org>
	[PATCH] ppc32: Fix __iomem warnings in TODC code
	
	A trivial fix for the __iomem warnings in arch/ppc/syslib/todc_time.c
	
	Signed-off-by: Randy Vinson <rvinson@mvista.com>
	Signed-off-by: Tom Rini <trini@kernel.crashing.org>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<benh@kernel.crashing.org>
	[PATCH] ppc32: Fix an IRQ issue with cpufreq
	
	The ppc32 PowerMac cpufreq code, when using the PMU to switch the
	frequency, would eventually lose interrupts.  The solution is to raise the
	CPU priority at the controller level.  It's also unnecessary to call the
	full PIC suspend/resume code in this case as the IO chip isn't reset,
	unlike the sleep code.
	
	Signed-off-by: Benjamin Herrenschmidt <benh@kernel.crashing.org>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<nanhai.zou@intel.com>
	[PATCH] ia64/x86_64/s390 overlapping vma fix
	
	IA64 is also vulnerable to the huge-vma-in-executable bug in 64 bit elf
	support, it just insert a vma of zero page without checking overlap, so user
	can construct a elf with section begin from 0x0 to trigger this BUGON().
	
	However, I think it's safe to check overlap before we actually insert a vma
	into vma list.  And I also feel check vma overlap everywhere is unnecessary,
	because invert_vm_struct will check it again, so the check is duplicated.
	It's better to have invert_vm_struct return a value then let caller check if
	it successes.  Here is a patch against 2.6.10.rc2-mm3 I have tested it on
	i386, x86_64 and ia64 machines.
	
	Signed-off-by: Tony Luck <tony.luck@intel.com>
	Signed-off-by: Zou Nan hai <Nanhai.zou@intel.com>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<dtor_core@ameritech.net>
	[PATCH] i8k: fix 'power_status' sysfs permissions
	
	Signed-off-by: Dmitry Torokhov <dtor@mail.ru>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<paulus@samba.org>
	[PATCH] ppc64: fix hang on legacy iSeries
	
	Recently we have uncovered a bug in the kernel exception exit path
	which can cause iSeries machines to hang with interrupts disabled,
	typically when unloading a module.  This patch fixes the bug and
	should go in 2.6.10.  Here is the detailed explanation:
	
	There are a couple of places in the exception exit path in entry.S
	where we disable interrupts and then later reenable them.  We
	hard-disable interrupts even on legacy iSeries (rather than
	soft-disabling them) because the final part of the exception exit path
	needs interrupts hard-disabled (even on legacy iSeries), because
	otherwise an incoming interrupt could trash SRR0 and SRR1 and cause us
	to lose state.
	
	The intention was that each path that hard-disabled interrupts would
	hard-enable them again, either explicitly or by executing an rfid
	instruction (return from interrupt, doubleword).  However there was
	one path where we didn't correctly hard-enable interrupts.  This meant
	we could end up calling schedule() with interrupts hard-disabled and
	then switch to the stopmachine thread (used in removing a module),
	which spins polling a variable until another cpu changes it.  Since
	local_irq_enable() etc. on legacy iSeries only soft-enable interrupts,
	we got into the stopmachine thread with interrupts hard-disabled, and
	the machine hung at that point.
	
	This patch fixes it by making sure that when we go to re-enable
	interrupts, the MSR value we are loading up actually does have the
	MSR.EE (external interrupt enable) bit set.  Stephen Rothwell has
	verified that this actually does fix the bug on iSeries.  The bug
	also potentially exists on pSeries (and this patch fixes it), but
	there it doesn't really matter, because schedule() will enable
	interrupts (and on pSeries that means hard-enabling them), and because
	the hypervisor doesn't mind you having interrupts hard-disabled for
	extended periods on pSeries.  Note that all these comments about
	pSeries also apply to POWER5 iSeries (i5) machines.
	
	While I was there I noticed that we were jumping to ret_from_except
	after calling do_IRQ on iSeries, rather than ret_from_except_lite,
	meaning that we will restore registers 14-31 twice, unnecessarily.  I
	changed it to jump to ret_from_except_lite instead, and Stephen
	checked that this change doesn't cause any breakage.
	
	Signed-off-by: Stephen Rothwell <sfr@canb.auug.org.au>
	Signed-off-by: Paul Mackerras <paulus@samba.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<axboe@suse.de>
	[PATCH] cfq-iosched: fix allocation increment race #3
	
	There is a stupid error in cfq-iosched that spews a warning on
	(typically) SMP systems because cfqq->allocated[rw] goes below zero. The
	error is that the increment on alloc happens outside of the queue lock.
	
	Signed-off-by: Jens Axboe <axboe@suse.de>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<axboe@suse.de>
	[PATCH] bio: fix leak in failure case in bio_copy_user()
	
	There's a leak in the error case in bio_copy_user().  If we fail
	allocating a page or adding a page to the bio, we will leak the bio map
	data. 
	
	Signed-off-by: Jens Axboe <axboe@suse.de>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<mingo@elte.hu>
	[PATCH] floppy boot-time detection fix
	
	When the FDC hardware is initialized, it sometimes generates a floppy
	interrupt right away - without being told to.  This interrupt can hit
	the detection code that executes right after the initialization code, in
	particular it can get intermixed with user_reset_fdc() that the
	detection code uses.  The fd driver is fundamentally single-threaded
	when it comes to handling events: an unexpected irq that arrives in the
	wrong moment can confuse the reset_fdc() code, which, with softirq and
	hardirq threading on, executes in keventd.
	
	In the stock kernel this stale irq doesnt seem to hit the detection code
	in the wrong moment, but i think under certain circumstances it may
	still happen.  One of the typical incarnations of the race was the
	following message:
	
	 reset set in interrupt, calling c0258400
	
	and googling for "reset set in interrupt, calling" does turn up a fair
	number of bootlogs (most of them 2.4 ones) that show such a detection
	failure, so i think upstream wants to have the fix too.
	
	the fix is simple: delay a bit after initialization, to make sure the
	stale irq does not interfere with the detection code. It will be safely
	ignored, since do_floppy is still NULL. It might look sloppy that i went
	for a delay, but delay i think it is better than waiting for the irq to
	occur, because i dont think there's a guarantee that fdc initialization
	triggers an interrupt, so waiting for it could hang the boot process. A
	delay OTOH is totally harmless.
	
	The attached patch implements this fix, which resolves the detection
	problem on my testbox.
	
	here's again how a failure looks like:
	
	 Floppy drive(s): fd0 is 1.44M
	 reset set in interrupt, calling c0258400
	 floppy0: no floppy controllers found
	
	and this is how it works with the fix:
	
	 Floppy drive(s): fd0 is 1.44M
	 FDC 0 is a post-1991 82077
	
	Signed-off-by: Ingo Molnar <mingo@elte.hu>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<jejb@mulgrave.(none)>
	support for 3PAR sparse SCSI LUNs
	
	From: 	Castor Fu <castor@3pardata.com>
	
	Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

<dsaxena@net.rmk.(none)>
	[ARM PATCH] 2255/1: Add IXDPG425 platform support
	
	Patch from Deepak Saxena
	
	New IXP425 based platform from Intel. This machine is similar to
	an ADI Coyote except for the addition of an on-board NEC ECHI
	controller. Patch also fixes issue with board setup for Coyote
	(and IXDPG425) that would cause the MTD driver to fail.
	
	Signed-off-by: Deepak Saxena
	Signed-off-by: Russell King

<dsaxena@net.rmk.(none)>
	[ARM PATCH] 2257/1: Add I2C device to IXDP2x01 platforms
	
	Patch from Deepak Saxena
	
	Signed-off-by: Deepak Saxena
	Signed-off-by: Russell King

<dsaxena@net.rmk.(none)>
	[ARM PATCH] 2259/1: Rip out ixp2000 IRQ_ERR_STATUS demultiplexing
	
	Patch from Lennert Buytenhek
	  
	There are thirteen different IRQs chained off IRQ_ERR_STATUS, one for
	each possible error class that the IXP can signal an interrupt for, but
	there are no in-tree users of these interrupts, and it doesn't make much
	sense to treat them as separate interrupts if we can just have one
	handler checking each of the thirteen errors in one go instead.
	  
	Besides that, the error interrupt handling can't even have been working
	properly in the first place as the chained handler was testing the wrong
	bits in the IRQ_ERR_STATUS register.
	  
	So this patch rips it all out.
	  
	
	Signed-off-by: Lennert Buytenhek
	Signed-off-by: Deepak Saxena
	Signed-off-by: Russell King

<dsaxena@net.rmk.(none)>
	[ARM PATCH] 2260/1: Rename IXP2000_IRQ_SWI to reduce user confusion
	
	Patch from Lennert Buytenhek
	
	IXP2000 interrupt source zero is a software-generated interrupt source,
	but it is not an SWI in the ARM sense of the word.  Rename the interrupt
	source to reduce any confusion.
	  
	
	Signed-off-by: Lennert Buytenhek
	Signed-off-by: Deepak Saxena
	Signed-off-by: Russell King

<dsaxena@net.rmk.(none)>
	[ARM PATCH] 2261/1: Cleanup use of ixp_reg_write in arch/arm/mach-ixp2000
	
	Patch from Lennert Buytenhek
	  
	Several files in this directory directly dereference pointers
	to on-chip I/O instead of using ixp_reg_write, making them
	susceptible to IXP2400 erratum #66. This changset fixes those.
	We do not touch any files that will only be built for IXP2800
	systems as the 2800 does not have this issue.
	  
	
	Signed-off-by: Lennert Buytenhek
	Signed-off-by: Deepak Saxena
	Signed-off-by: Russell King

<ben-linux@org.rmk.(none)>
	[ARM PATCH] 2273/1: S3C2410 - timex.h CLOCK_TICK_RATE fix
	
	Patch from Ben Dooks
	
	CLOCK_TICK_RATE is 12MHz on at least 2 s3c2410 based
	machines, or close to it. Although this doesn't seem
	to have any effect on loops_per_jiffie, it is best
	to try and be accurate.
	
	Signed-off-by: Ben Dooks
	Signed-off-by: Russell King

<peterc@au.rmk.(none)>
	[ARM PATCH] 2269/2: Updated Pleb-1 support patch for Linux 2.6
	
	Patch from Peter Chubb
	
	This patch REPLACES patch #2269/1
	
	Instead of using the almost-obsolete SMC9194 driver, use the new
	SMC91xx driver.
	
	Signed-off-by: Peter Chubb
	Signed-off-by: Russell King

<sfrench@sambaltcdom.austin.ibm.com>
	[CIFS] cifs readdir changes part 10 remove unneeded debug function
	
	Signed-off- by: Steve French (sfrench@us.ibm.com)

<sfrench@sambaltcdom.austin.ibm.com>
	[CIFS] fix ls -l warning on dirs when POSIX ACLs enabled. 
	Fixed by not returning -ERANCE error on null buffer on QueryACL 
	(getxattr for ACLs will null buffer, zero len queries size)
	
	Signed-off-by: Steve French (sfrench@us.ibm.com)

<rmk@flint.arm.linux.org.uk>
	[SERIAL] imx: remove two unnecessary includes

<rmk@flint.arm.linux.org.uk>
	[ARM] sa1111: don't reference dev->power.saved_state if CONFIG_PM is unset

<ben-linux@org.rmk.(none)>
	[ARM PATCH] 2275/1: S3C2410 - serial rx fifo full check
	
	Patch from Ben Dooks
	
	Check for the serial rx fifo full before checking
	for the fifo size.
	
	Signed-off-by: Ben Dooks
	Signed-off-by: Russell King

<rmk@flint.arm.linux.org.uk>
	[ARM] icside: ensure interfaces are probed and correctly setup.

<nico@org.rmk.(none)>
	[ARM PATCH] 2271/3: MMC for Mainstone/PXA27x
	
	Patch from Nicolas Pitre
	
	... with a bit of reorg to make the core code a bit more generic too.
	
	Signed-off-by: Nicolas Pitre
	Signed-off-by: Russell King

<viro@parcelfarce.linux.theplanet.co.uk>
	[PATCH] more sparc64 io.h annotations
	
	Prototypes annotated the same way they are on other platforms.  I'm not
	too fond of readb() taking const volatile void * (sic), but AFAICS
	that's the only way to tell cc(1) that both volatile and const pointers
	are acceptable here ;-/
	
	memcpy_toio/memcpy_fromio/memset_io made void - same as they are
	elsewhere.  And no, nobody had been insane enough to use the return
	values...
	
	Signed-off-by: Al Viro <viro@parcelfarce.linux.theplanet.co.uk>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<viro@parcelfarce.linux.theplanet.co.uk>
	[PATCH] fore200e iomem annotations
	
	Signed-off-by: Al Viro <viro@parcelfarce.linux.theplanet.co.uk>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<viro@parcelfarce.linux.theplanet.co.uk>
	[PATCH] sunzilog iomem annotations
	
	Signed-off-by: Al Viro <viro@parcelfarce.linux.theplanet.co.uk>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<viro@parcelfarce.linux.theplanet.co.uk>
	[PATCH] mesh iomem annotations
	
	Signed-off-by: Al Viro <viro@parcelfarce.linux.theplanet.co.uk>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<viro@parcelfarce.linux.theplanet.co.uk>
	[PATCH] tpam annotations and cleanups
	
	annotated, sanitized casts between pointers and numbers, switched the
	functions that took offsets in card memory to unsigned long (from the
	void *, which was absolutely wrong and lead to bogus casts from hell all
	over the place).
	
	Signed-off-by: Al Viro <viro@parcelfarce.linux.theplanet.co.uk>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<viro@www.linux.org.uk>
	[PATCH] (1/12) bw2 iomem annotations
	
	Signed-off-by: Al Viro <viro@parcelfarce.linux.theplanet.co.uk>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<viro@www.linux.org.uk>
	[PATCH] (2/12) cg14 iomem annotations
	
	Signed-off-by: Al Viro <viro@parcelfarce.linux.theplanet.co.uk>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<viro@www.linux.org.uk>
	[PATCH] (3/12) cg3 iomem annotations
	
	Signed-off-by: Al Viro <viro@parcelfarce.linux.theplanet.co.uk>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<viro@www.linux.org.uk>
	[PATCH] (4/12) cg6 iomem annotations
	
	Signed-off-by: Al Viro <viro@parcelfarce.linux.theplanet.co.uk>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<viro@www.linux.org.uk>
	[PATCH] (5/12) controlfb iomem annotations
	
	Signed-off-by: Al Viro <viro@parcelfarce.linux.theplanet.co.uk>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<viro@www.linux.org.uk>
	[PATCH] (6/12) hgafb iomem annotations
	
	switched from isa_...() to ioremap() + normal read*/write*
	
	Signed-off-by: Al Viro <viro@parcelfarce.linux.theplanet.co.uk>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<viro@www.linux.org.uk>
	[PATCH] (7/12) leo iomem annotations
	
	Signed-off-by: Al Viro <viro@parcelfarce.linux.theplanet.co.uk>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<viro@www.linux.org.uk>
	[PATCH] (8/12) offb iomem annotations
	
	Signed-off-by: Al Viro <viro@parcelfarce.linux.theplanet.co.uk>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<viro@www.linux.org.uk>
	[PATCH] (9/12) p9100 iomem annotations
	
	Signed-off-by: Al Viro <viro@parcelfarce.linux.theplanet.co.uk>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<viro@www.linux.org.uk>
	[PATCH] (10/12) platinumfb iomem annotations
	
	Signed-off-by: Al Viro <viro@parcelfarce.linux.theplanet.co.uk>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<viro@www.linux.org.uk>
	[PATCH] (11/12) tcx iomem annotations
	
	Signed-off-by: Al Viro <viro@parcelfarce.linux.theplanet.co.uk>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<viro@www.linux.org.uk>
	[PATCH] (12/12) valkyriefb iomem annotations

<viro@parcelfarce.linux.theplanet.co.uk>
	[PATCH] i2c iomem annotations
	
	Signed-off-by: Al Viro <viro@parcelfarce.linux.theplanet.co.uk>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<viro@parcelfarce.linux.theplanet.co.uk>
	[PATCH] pmac iomem annotations
	
	Signed-off-by: Al Viro <viro@parcelfarce.linux.theplanet.co.uk>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<viro@parcelfarce.linux.theplanet.co.uk>
	[PATCH] pmac sound iomem annotations
	
	Signed-off-by: Al Viro <viro@parcelfarce.linux.theplanet.co.uk>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<viro@parcelfarce.linux.theplanet.co.uk>
	[PATCH] pmac_zilog iomem annotations
	
	Signed-off-by: Al Viro <viro@parcelfarce.linux.theplanet.co.uk>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<viro@parcelfarce.linux.theplanet.co.uk>
	[PATCH] sunbpp iomem annotations
	
	Signed-off-by: Al Viro <viro@parcelfarce.linux.theplanet.co.uk>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<viro@parcelfarce.linux.theplanet.co.uk>
	[PATCH] misc sparc iomem annotations
	
	Signed-off-by: Al Viro <viro@parcelfarce.linux.theplanet.co.uk>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<viro@parcelfarce.linux.theplanet.co.uk>
	[PATCH] partial fc4 iomem annotations
	
	Signed-off-by: Al Viro <viro@parcelfarce.linux.theplanet.co.uk>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<viro@parcelfarce.linux.theplanet.co.uk>
	[PATCH] iomem annotations and isa_-ectomy: media/video/pms.c
	
	switched to ioremap() + normal iomem access primitives
	
	Signed-off-by: Al Viro <viro@parcelfarce.linux.theplanet.co.uk>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<viro@parcelfarce.linux.theplanet.co.uk>
	[PATCH] mtd/maps trivial annotations
	
	NULL noise removal, missing __iomem in a couple of declarations, removal
	of bogus cast to void * in iounmap() calls.
	
	Signed-off-by: Al Viro <viro@parcelfarce.linux.theplanet.co.uk>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<viro@parcelfarce.linux.theplanet.co.uk>
	[PATCH] misc iomem annotations
	
	Each chunk is independent from the rest, so it could've been split
	further, but IMO there's no point.
	
	Signed-off-by: Al Viro <viro@parcelfarce.linux.theplanet.co.uk>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<viro@parcelfarce.linux.theplanet.co.uk>
	[PATCH] isa_check_signature() finally gone
	
	last callers of isa_check_signature() switched to ioremap() +
	check_signature()
	
	Signed-off-by: Al Viro <viro@parcelfarce.linux.theplanet.co.uk>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<zecke@org.rmk.(none)>
	[ARM PATCH] 2276/1: [PATCH] SIMpad: make simpad.c compile
	
	Patch from Holger Hans Peter Freyther
	
	Fix compile of simpad.c ....
	
	Signed-off-by: Holger Hans Peter Freyther
	Signed-off-by: Russell King

<zecke@org.rmk.(none)>
	[ARM PATCH] 2277/1: [PATCH] SIMpad: fix warnings emitted by the compiler
	
	Patch from Holger Hans Peter Freyther
	
	Fix warnings emitted by the compiler for
	leds-simpad.c and sa1100_simpad.c
	
	Signed-off-by: Holger Hans Peter Freyther
	Signed-off-by: Russell King

<zecke@org.rmk.(none)>
	[ARM PATCH] 2278/1: [PATCH] SIMpad: add a default config
	
	Patch from Holger Hans Peter Freyther
	
	Add a default config file for simpad
	
	
	Signed-off-by: Holger Hans Peter Freyther
	Signed-off-by: Russell King

<zecke@org.rmk.(none)>
	[ARM PATCH] 2279/1: [PATCH] SIMpad: Add a mq200 device to the platform bus
	
	Patch from Holger Hans Peter Freyther
	
	The SIMpad uses the MediaQ 200 framebuffer device. There is no driver in the vanilla kernel for that device. But adding the device to the platform bus makes it possible to just drop the mq200 driver into the kernel and the display will work.
	Please consider applying the patch.
	
	
	
	Signed-off-by: Holger Hans Peter Freyther
	Signed-off-by: Russell King

<zecke@org.rmk.(none)>
	[ARM PATCH] 2280/1: [PATCH] SIMpad: Change maintainer to me
	
	Patch from Holger Hans Peter Freyther
	
	Line numbers could depend on 2279/1
	
	Change the maintainer of the SIMpad board to me. This change was discussed on the simpad linux mailinglist and was supported by the former maintainer of SIMpad. I'll subscribe and introduce myself shortly on the arm linux mailinglist and ask for SIMpad not to be removed.
	
	Signed-off-by: Holger Hans Peter Freyther
	Signed-off-by: Russell King

<viro@parcelfarce.linux.theplanet.co.uk>
	[PATCH] t128 iomem annotations and isa_-ectomy
	
	switched to ioremap() + normal iomem primitives.
	
	Signed-off-by: Al Viro <viro@parcelfarce.linux.theplanet.co.uk>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<viro@parcelfarce.linux.theplanet.co.uk>
	[PATCH] dtc iomem annotations and isa_-ectomy
	
	switched to ioremap() + normal iomem operations
	
	Signed-off-by: Al Viro <viro@parcelfarce.linux.theplanet.co.uk>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<viro@parcelfarce.linux.theplanet.co.uk>
	[PATCH] seagate iomem annotations, cleanup and isa_-ectomy
	
	 * switched to ioremap()
	 * switched to normal iomem operations
	 * killed a bunch of phys_to_virt()
	 * killed open-coded (and inferior) instances of memcpy_toio()/memcpy_fromio().
	 * fixed a dumb typo introduced in "kill off isa_check_signature()"
	   patch (sorry - missed the fact that it was not covered by
	   allmodconfig and didn't verify until after sending the patch in
	   question ;-/). 
	
	Signed-off-by: Al Viro <viro@parcelfarce.linux.theplanet.co.uk>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<viro@parcelfarce.linux.theplanet.co.uk>
	[PATCH] wd7000 iomem annotations and fixes
	
	direct dereferencing of iomem pointer (by memcmp())
	
	Signed-off-by: Al Viro <viro@parcelfarce.linux.theplanet.co.uk>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<viro@parcelfarce.linux.theplanet.co.uk>
	[PATCH] swim3 __user annotation
	
	Signed-off-by: Al Viro <viro@parcelfarce.linux.theplanet.co.uk>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<viro@parcelfarce.linux.theplanet.co.uk>
	[PATCH] misc drivers/atm iomem annotations and NULL noise removal
	
	Signed-off-by: Al Viro <viro@parcelfarce.linux.theplanet.co.uk>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<viro@parcelfarce.linux.theplanet.co.uk>
	[PATCH] iomem annotations and fixes + isa_-ectomy in msnd
	
	 * switched to ioremap() + normal operations
	 * split msnd_fifo_write() (and msnd_fifo_read()) into iomem and normal
	   versions (original was even worse - it used to do __user and __iomem
	   versions in the same code and in atomic context; when that bogosity
	   got fixed, the difference between these cases (now normal memory and
	   iomem) had been lost).
	
	Signed-off-by: Al Viro <viro@parcelfarce.linux.theplanet.co.uk>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<sfrench@sambaltcdom.austin.ibm.com>
	[CIFS] cifs readdir part 11.  Also renames unused /proc/fs/cifs/QuotaEnabled config switch to NewReaddirEnabled for turning on testing of new readdir code
	
	Signed-off-by: Steve French (sfrench@us.ibm.com)

<rmk@flint.arm.linux.org.uk>
	[SERIAL] Add missing definition for PORT_IMX.

<rmk@flint.arm.linux.org.uk>
	[ARM] ARMv6 always selects correct user operations at runtime.

<ben-linux@org.rmk.(none)>
	[ARM PATCH] 2284/1: S3C2410 - core device registration update
	
	Patch from Ben Dooks
	
	If one of the devices fails to register, do not
	remove any registered devices and continue registering
	in case any more devices register.
	
	Signed-off-by: Ben Dooks
	Signed-off-by: Russell King

<ben-linux@org.rmk.(none)>
	[ARM PATCH] 2285/1: S3C2410 - regs-sdi.h fixes
	
	Patch from Ben Dooks
	
	Fixes from Koen Martens to update the 
	register definitions for the MMC/SD/SDIO interface,
	tidied up for release with extra notes on what has
	been depreceated in later silicon.
	
	Signed-off-by: Koen Martens
	Signed-off-by: Ben Dooks
	Signed-off-by: Russell King

<phil@ipom.com>
	[PATCH] USB Storage: Add unusual_devs entry for another yakumo camera
	
	This adds an unusual devs entry for another Yakumo camera - it suffers
	from the residue problem.
	
	Originally reported by Michele Alzetta <michele.alzetta@aliceposta.it>.
	
	Greg, please apply.
	
	Signed-off-by: Phil Dibowitz <phil@ipom.com>
	Signed-off-by: Greg Kroah-Hartman <greg@kroah.com>

<marcel@holtmann.org>
	[PATCH] fix unnecessary increment in firmware_class_hotplug() and USB core
	
	>   This patch is to fix unnecessary increment of 'i' used to
	> specify an element of an arry 'envp[]' in firmware_class_hotplug().
	> The 'i' is already incremented in add_hotplug_env_var(), actually.
	
	you are right. The incrementation is wrong, but it doesn't have any
	negative effect. However the same applies for the usb_hotplug() function
	in drivers/usb/core/usb.c.
	
	Signed-off-by: Keiichiro Tokunaga <tokunaga.keiich@jp.fujitsu.com>
	Signed-off-by: Marcel Holtmann <marcel@holtmann.org>
	Signed-off-by: Greg Kroah-Hartman <greg@kroah.com>

<shemminger@osdl.org>
	[PATCH] usb_unlink_urb: ratelimit warning
	
	The warning about using unlink_urb needs to be rate limited, because
	if a driver is still doing it will overrun the system logs.
	
	Signed-off-by: Stephen Hemminger <shemminger@osdl.org>
	Signed-off-by: Greg Kroah-Hartman <greg@kroah.com>

<rddunlap@osdl.org>
	[PATCH] usb-storage should enable scsi disk in Kconfig
	
	Add comment/NOTE that USB_STORAGE probably needs BLK_DEV_SD also.
	Add a few device types to help text and reformat it.
	
	Signed-off-by: Randy Dunlap <rddunlap@osdl.org>
	Signed-off-by: Greg Kroah-Hartman <greg@kroah.com>

<ak@suse.de>
	[PATCH] PCI: Add sysfs file to map PCI busses to cpus
	
	Add sysfs file to map PCI busses to cpus
	
	Export the information from pcibus_to_cpumask() to sysfs. This
	is useful for some user space programs who want to optimize their IO
	using O_DIRECT.
	
	There was some indecision on whether it's more useful to report
	cpus or nodes here. In the end cpus was chosen because that is
	what the existing macros report.
	
	Signed-off-by: Andi Kleen <ak@suse.de>
	Signed-off-by: Greg Kroah-Hartman <greg@kroah.com>

<ak@suse.de>
	[PATCH] PCI: Disable mmconfig on AMD CPUs.
	
	Disable mmconfig on AMD CPUs.
	
	This patch fixes various problems on PCI Express boards, like the
	Nforce4. They have a MCFG table in ACPI, but not all devices can be
	accessed using MMCONFIG.  e.g. the CPU builtin PCI devices in the A64
	Northbridge can't.  Linux happily uses mmconfig for all PCI devices and
	that cause failures and memory corruption.
	
	Right solution apparently is to get more information from MCFG which is
	supposed to tell for which busses mmconfig is legal and for which ones
	not. But that would be a much more complicated patch and I don't have
	a specification of this enhanced table.
	
	This patch just disable MMCONFIG on all AMD CPUs. This is a kludge,
	but works around the problem for now.
	
	Patch for both i386 and x86-64
	
	Signed-off-by: Andi Kleen <ak@suse.de>
	Signed-off-by: Greg Kroah-Hartman <greg@kroah.com>

<greg@kroah.com>
	[PATCH] USB: fix oops in io_edgeport.c driver
	
	This fixes https://bugzilla.redhat.com/bugzilla/show_bug.cgi?id=128916
	
	Signed-off-by: Greg Kroah-Hartman <greg@kroah.com>

<akpm@osdl.org>
	[PATCH] e100 deadlock fix
	
	Revert my version of this fix and apply Scott's version, which was acked by
	the e100 maintainers.
	
	Also, initialise the spinlocks before calling e100_hw_reset(), so things don't
	instantly deadlock on SMP.
	
	Signed-off-by: Scott Feldman <sfeldma@pobox.com>
	Cc: Jeff Garzik <jgarzik@pobox.com>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<mtk-lkml@gmx.net>
	[PATCH] RLIMIT_MEMLOCK accounting of shmctl() SHM_LOCK is broken
	
	The accounting of shmctl() SHM_LOCK memory locks against the user
	structure is broken.  The check of the size of the to-be-locked region
	is based on the size of the segment as specified when it was created by
	shmget() (this size is *not* rounded up to a page boundary).
	
	Fix it by rounding the size properlt.  Also, tune up the spinlock
	coverage in there a little.
	
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<dtor_core@ameritech.net>
	[PATCH] v4l: fix permissions on module parameters exported via sysfs
	
	Fix permissions on module parameters exported via sysfs.
	
	Signed-off-by: Dmitry Torokhov <dtor@mail.ru>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<ak@suse.de>
	[PATCH] x86_64: Fix lost edge triggered irqs on UP kernel
	
	Patch from Petr Vandrovec <vandrove@vc.cvut.cz>
	
	Recently I've observed problems with IDE disks while running UP kernel on
	x86-64 - it complained a lot about lost irq from hda/hdc.  I tracked
	problem down to the problem that at enable_irq() code calls
	hw_resend_irq(), but on x86-64 hw_resend_irq() does something useful only
	when CONFIG_SMP is defined, on UP systems it does nothing.
	
	Due to this IRQ is lost - and when IDE retries command, it can again happen
	that IRQ is delivered before IDE code does enable_irq(), and again and
	again, unless due to drive being lazy finally once kernel does enable_irq()
	before drive prepares its answer, and things move forward ...  to next lost
	IRQ.
	
	Signed-off-by: Andi Kleen <ak@suse.de>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<adaplas@hotpop.com>
	[PATCH] fbdev: Fix crash if fb_set_var() called before register_framebuffer()
	
	The field info->modelist is initialized during register_framebuffer.  This
	field is also referred to in fb_set_var().  Thus a call to fb_set_var()
	before register_framebuffer() will cause a crash.  A few drivers do this,
	notably controlfb.  (This might fix reports of controlfb crashing in
	powermacs).
	
	Signed-off-by: Antonino Daplas <adaplas@pol.net>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<andrew.patterson@hp.com>
	[PATCH] cciss: Off-by-one error causing oops in CCISS_GETLUNIFO ioctl
	
	This patch fixes an an "off-by-one" error found in the CCISS_GETLUNIFO
	ioctl in the cciss driver.  It is cycling through the part table of the
	gendisk structure which is a zero-based array, not a one-based array.  This
	often causes an oops when referencing the out-of-bounds element.
	
	Signed-off by: Andrew Patterson <andrew.patterson@hp.com>
	
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<domen@coderock.org>
	[PATCH] video: semicolon bug in atyfb_base.c
	
	Indentiation and logic suggest this was wrong.
	
	Signed-off-by: Domen Puncer <domen@coderock.org>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<James.Bottomley@SteelEye.com>
	[PATCH] Change MCA maintainer
	
	Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<stevef@smfhome1.smfdom>
	[CIFS] Add setfacl support to cifs
	
	Signed-off-by: Steve French (sfrench@us.ibm.com)

<aris@cathedrallabs.org>
	[PATCH] i2c-ite: get rid of cli()/sti()
	
	I found only this one. Next time I'll try to make better grep
	expressions :^)
	
	[I2C] i2c-ite: get rid of cli()/sti()
	
	Signed-off-by: Aristeu Sergio Rozanski Filho <aris@cathedrallabs.org>
	Signed-off-by: Greg Kroah-Hartman <greg@kroah.com>

<khali@linux-fr.org>
	[PATCH] I2C: Add support for the nForce2 Ultra 400 to i2c-nforce2
	
	This simple patch adds support for the nForce2 Ultra 400 to i2c-nforce2.
	I just made a similar update on the 2.4/CVS version of the driver.
	
	Signed-off-by: Jean Delvare <khali@linux-fr.org>
	Signed-off-by: Greg Kroah-Hartman <greg@kroah.com>

<khali@linux-fr.org>
	[PATCH] I2C: macintoch/therm_* drivers cleanups
	
	This patch cleans the macintoch/therm_* drivers a bit. It removes
	useless IDs, cleans names (no white space), some coding style fixes as
	well, etc. It's exactly the same as what I posted yesterday as a
	candidate fix to bug #3823:
	http://bugzilla.kernel.org/show_bug.cgi?id=3823
	
	Although it isn't the proper fix for that bug, as you underlined, this
	still sounds like a sane set of cleanups for these drivers.
	
	Signed-off-by: Jean Delvare <khali@linux-fr.org>
	Signed-off-by: Greg Kroah-Hartman <greg@kroah.com>

<greg@kroah.com>
	USB: minor Makefile fix.
	
	This fixes http://bugme.osdl.org/show_bug.cgi?id=3813
	
	Signed-off-by: Greg Kroah-Hartman <greg@kroah.com>

<daniel.ritz@gmx.ch>
	[PATCH] USB touchkitusb: module_param to swap axes
	
	add a module parameter to swap the axes. many displays need this...
	
	Signed-off-by: Daniel Ritz <daniel.ritz@gmx.ch>
	Signed-off-by: Greg Kroah-Hartman <greg@kroah.com>

<magnus.damm@gmail.com>
	[IPV4]: Use schedule_timeout() instead of jiffies polling in ipconfig.
	
	Signed-off-by: David S. Miller <davem@davemloft.net>

<yoshfuji@linux-ipv6.org>
	[IPV6]: Fix races in ip6_route_{input,output}()
	
	We need to hold refcnt before releasing rt6_lock.
	
	Signed-off-by: Hideaki YOSHIFUJI <yoshfuji@linux-ipv6.org>
	Signed-off-by: David S. Miller <davem@davemloft.net>

<patrick@tykepenguin.com>
	[DECNET]: Typo in accept causes OOPS.
	
	Signed-off-by: Patrick Caulfield <patrick@tykepenguin.com>
	Signed-off-by: David S. Miller <davem@davemloft.net>

<juhl-lkml@dif.dk>
	[NET]: Fix inline keyword usage in skbuff.c
	
	Signed-off-by: Jesper Juhl <juhl-lkml@dif.dk>
	Signed-off-by: David S. Miller <davem@davemloft.net>

<rusty@rustcorp.com.au>
	[PATCH] Remove Futex Warning
	
	If we're waiting on a futex and we are woken up, it's either because
	someone did FUTEX_WAKE, we timed out, or have been signalled.  However, the
	WARN_ON(!signal_pending(current)) test is overzealous: with threads (a
	common use of futexes), we share the signal handler and the other
	thread might get to the signal before us.  In addition, exit_notify()
	can do a recalc_sigpending_tsk() on us, which will then clear our
	TIF_SIGPENDING bit, making signal_pending(current) return false.
	
	Returning EINTR is a little strange in this case, since this thread
	hasn't handled a signal.  However, with threads it's the best we can
	do: there's always a race where another thread could have been the
	actual one to handle the signal.
	
	Signed-off-by: Rusty Russell <rusty@rustcorp.com.au>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<sfrench@sambaltcdom.austin.ibm.com>
	[CIFS] cifs readdir rewrite fix resume key handling
	
	Signed-off-by: Steve French (sfrench@us.ibm.com)

<axboe@suse.de>
	[PATCH] cfq-iosched: kill show_status sysfs entry
	
	This is a debug entry that isn't of much use to the generic user or on a
	production system. Additionally it can also easy overflow the sysfs
	PAGE_SIZE limitation, if you have many processes doing io. So kill the
	entry.
	
	Signed-off-by: Jens Axboe <axboe@suse.de>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<bjorn.helgaas@hp.com>
	[IA64] Bigsur config: Add CONFIG_SERIAL_8250_ACPI so we can find serial devices
	
	In the absence of an HCDP, we used to assume there were legacy COM ports
	at 0x3f8 and 0x2f8, but I recently removed that assumption.
	 
	"console=ttyS0" still works (assuming you have CONFIG_SERIAL_8250_ACPI
	turned on so you can find the ttyS0 device), but the console doesn't
	start working until the serial driver initializes.  If you need an
	early console and you know where it lives, something like
	"console=uart,io,0x3f8" will start working very early.
	
	Signed-off-by: Bjorn Helgaas <bjorn.helgaas@hp.com>
	Signed-off-by: Tony Luck <tony.luck@intel.com>

<tony.luck@intel.com>
	[IA64] if idle doesn't halt, it should at least relax
	
	Asit Mallick pointed out that the ia64 idle loop needs a
	"hint @pause" instruction in the cases where we don't
	actually halt the cpu.
	
	Acked-by: Fenghua Yu <fenghua.yu@intel.com>
	Signed-off-by: Tony Luck <tony.luck@intel.com>

<len.brown@intel.com>
	[ACPI] fix build errors resulting from auto-merge
	
	Signed-off-by: Len Brown <len.brown@intel.com>

<greg@kroah.com>
	PCI: fix build warning in pci-sysfs.c
	
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Greg Kroah-Hartman <greg@kroah.com>

<greg@kroah.com>
	USB: move a internal usbfs only structure out of a public header file.
	
	Signed-off-by: Greg Kroah-Hartman <greg@kroah.com>

<stevef@smfhome.smfdom>
	[CIFS] CIFS buffer management improvements part 1
	
	Signed-off-by: Steve French (sfrench@us.ibm.com)

<stevef@smfhome.smfdom>
	[CIFS] minor cleanup to cifs buffer allocation code
	
	Signed-off-by: Steve French (sfrench@us.ibm.com)

<sfeldma@pobox.com>
	[PKTGEN]: Clean error count before each run.
	
	Signed-off-by: Scott Feldman <sfeldma@pobox.com>
	Signed-off-by: David S. Miller <davem@davemloft.net>

<mitch@sfgoth.com>
	[NET]: Missing security_*() check in net/compat.c
	
	While looking at the SCM passing code in net/core/scm.c I noticed that there's
	a 32-bit compat implementation of scm_detach_fds()'s called 
	scm_detach_fds_compat() living in net/compat.c.  While these two functions
	are mostly the same the latter does not include the call to the
	security_file_receive() hook which is almost certainly a bug.
	
	Signed-off-by: Mitchell Blank Jr <mitch@sfgoth.com>
	Signed-off-by: James Morris <jmorris@redhat.com>
	Signed-off-by: David S. Miller <davem@davemloft.net>

<stevef@smfhome.smfdom>
	[CIFS] fix size of cifs small buffers to just barely fit within slab limit
	(which appears to be 116 bytes), otherwise they take 1 page each.
	Add them to cifs debug counters and optionally use them for SMBClose.
	
	Signed-off-by: Steve French (sfrench@us.ibm.com)

<stevef@smfhome.smfdom>
	[CIFS] Set inode number properly on new cifs_readdir code to Windows servers
	
	Signed-off-by: Steve French (sfrench@us.ibm.com)

<johnpol@2ka.mipt.ru>
	[PATCH] W1: check nls in return path.
	
	Check netlink socket being non NULL in error return path.
	
	Signed-off-by: Evgeniy Polyakov <johnpol@2ka.mipt.ru>
	Signed-off-by: Greg Kroah-Hartman <greg@kroah.com>

<len.brown@intel.com>
	[ACPI] platform_rename_gsi() is no longer limited to ACPI specific code,
	so call it ioapic_renumber_irq().
	
	A note to google:
	GSI is a Global System Interrupt -- a flat, linear, global IRQ number.
	
	Suggested-by: Linus Torvalds
	Signed-off-by: Len Brown <len.brown@intel.com>

<stevef@smfhome.smfdom>
	[CIFS] fix error mapping on getfacl to windows and old samba servers to map to EOPNOTSUPP
	so the kernel's fall back mechanism works
	
	Signed-off-by: Steve French (sfrench@us.ibm.com)

<shemminger@osdl.org>
	[UDP]: Select handling of bad checksums.
	
	Alternate workaround for blocking usage of select() by UDP applications.
	The problem is Linux optimizes the UDP receive checksum path so that checksum
	validation is not performed until the application read. This is a performance win
	but can cause applications that do select with blocking file descriptors to get false
	positives if the received message has a checksum error.
	There is a long running thread about this on LKML.
	
	This patch makes these applications work, but keeps the one-pass performance gain
	for those applications smart enough to use non-blocking file descriptors with
	select/poll. There is still a possibility to get a false positive if application does
	select on non-blocking fd then makes it blocking before doing the receive, but that
	is unlikely.
	
	Tested by injecting bad packets with SOCK_RAW.
	
	Signed-off-by: Stephen Hemminger <shemminger@osdl.org>
	Signed-off-by: David S. Miller <davem@davemloft.net>

<len.brown@intel.com>
	[ACPI] fix IRQ assignment regression with CONFIG_PNPACPI=y
	http://bugzilla.kernel.org/show_bug.cgi?id=3762
	
	Signed-off-by: Len Brown <len.brown@intel.com>

<tgraf@suug.ch>
	[GNET_STATS]: kernel-api doc for gnet stats/estimator
	
	Signed-off-by: Thomas Graf <tgraf@suug.ch>
	Signed-off-by: David S. Miller <davem@davemloft.net>

<len.brown@intel.com>
	[ACPI] fix reboot on poweroff regression due to enabled wakeup GPEs
	http://bugzilla.kernel.org/show_bug.cgi?id=3669
	
	Signed-off-by: David Shaohua Li <shaohua.li@intel.com>
	Signed-off-by: Len Brown <len.brown@intel.com>

<len.brown@intel.com>
	[ACPI] IPMI must supply the address of its GPE handler to install or remove it
	
	Signed-off-by: Len Brown <len.brown@intel.com>

<stevef@smfhome.smfdom>
	[CIFS] Update Kconfig to make CIFS POSIX ACLs dependent on xattrs and 
	fix related ifdef in fs/cifs/xattr.c
	
	Signed-off-by: Steve French (sfrench@us.ibm.com)

<stevef@smfhome.smfdom>
	[CIFS] Add missing quote to cifs kconfig item
	
	Signed-off-by: Steve French (sfrench@us.ibm.com)

<stevef@smfhome.smfdom>
	[CIFS] Make new cifs readdir code the default and rename the proc entry 
	to /proc/fs/cifs/ReenableOldCifsReaddirCode (which is off by default,
	causing the new cifs_readdir2 code to be executed by default)
	
	Signed-off-by: Steve French (sfrench@us.ibm.com)

<nico@org.rmk.(none)>
	[ARM PATCH] 2287/1: remove bogus EXPORT_SYMBOL(*)
	
	Patch from Nicolas Pitre
	
	Those functions are marked __init and called from __init context
	as well.  They have no business with modules what so ever.
	
	Signed-off-by: Nicolas Pitre
	Signed-off-by: Russell King

<tony@com.rmk.(none)>
	[ARM PATCH] 2201/1: OMAP timer 1/2: Clean-up MPU timer
	
	Patch from Tony Lindgren
	
	This patch by Tuukka Tikkanen & me cleans up the OMAP MPU timer
	code to allow adding 32KHz timer support. Functionality is the
	same as earlier.
	
	Signed-off-by: Tony Lindgren 
	Signed-off-by: Russell King

<rmk@flint.arm.linux.org.uk>
	[ARM] omap: remove unnecessary linux/device.h include.

<zecke@org.rmk.(none)>
	[ARM PATCH] 2283/1: SA1100 USB Config options
	
	Patch from Holger Hans Peter Freyther
	
	arch/arm/mach-sa1100/KConfig had options for USB client. The related code was removed early in 2.6. releases.
	I think it is appropriate to remove the Config options for it itself, as they're void.
	
	
	
	Signed-off-by: Holger Hans Peter Freyther
	Signed-off-by: Russell King

<nico@org.rmk.(none)>
	[ARM PATCH] 2288/1: unlink MMC DMA on driver exit
	
	Patch from Nicolas Pitre
	
	Signed-off-by: Nicolas Pitre
	Signed-off-by: Russell King

<len.brown@intel.com>
	Cset exclude: len.brown@intel.com[lenb]|ChangeSet|20041109085620|42985

<len.brown@intel.com>
	[ACPI] disable LAPIC at reboot and poweroff if Linux forced it on
	http://bugzilla.kernel.org/show_bug.cgi?id=3643
	
	Signed-off-by: Alexey Y Starikovskiy <alexey.y.starikovskiy@intel.com>
	Signed-off-by: Ingo Molnar <mingo@elte.hu>
	Signed-off-by: Len Brown <len.brown@intel.com>

<len.brown@intel.com>
	[ACPI] update C-state limiting patch
	
	Now "max_cstate=" instead of "acpi_cstate_limit="
	Delete redundant static cstate flags .c2 and .c3
	
	http://bugme.osdl.org/show_bug.cgi?id=3549
	   
	   For static processor driver, boot cmdline:
	   processor.max_cstate=2
	   
	   For processor module, /etc/modprobe.conf:
	   options processor max_cstate=2
	   or
	   # modprobe processor max_cstate=2
	   
	   From kernel or kernel module:
	   #include <linux/acpi.h>
	   acpi_set_cstate_limit(2);
	 
	Suggested-by: Pavel Machek
	Signed-off-by: Len Brown <len.brown@intel.com>

<stevef@stevef95.austin.ibm.com>
	[CIFS] Fix endianness bug in new cifs_readdir2 in calculating dir entry name length. Fix "badness in" message on rmmod cifs caused by rename of 
	/proc/fs/cifs/NewReaddirEnabled config switch (pointed out by Shaggy).   
	
	Fix improper clearing of UNIX_BASIC_INFO cifs struct. 
	Pointed out by Stefan Rompf.
	
	Signed-off-by: David Kleikamp (shaggy@austin.ibm.com)
	Signed-off-by: Steve French (sfrench@us.ibm.com)

<ralf@linux-mips.org>
	[PATCH] MIPS updates
	
	 o General updates of MIPS to 2.6.10-rc2
	 o Remove the Baget platform due to lack of maintenance over several years.
	   Some of the drivers remain and will be removed in a separate patch.
	 o Remove the HP Laserjet platform.  No user reports ever and no patches from
	   the original submitters made this port a neat hack - and a directory full
	   of clutter.
	 o SMP support for the PMC-Sierra.
	
	Signed-Off-By: Ralf Baechle <ralf@linux-mips.org>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<jeremy@goop.org>
	[PATCH] Buffer overrun in arch/x86_64/sys_ia32.c:sys32_ni_syscall()
	
	With Chris Wright <chrisw@osdl.org>
	
	struct task_struct.comm is defined to be 16 chars, but
	arch/x86_64/sys_ia32.c:sys32_ni_syscall() and sys32_vm86_warning() copy it
	into a static 8 byte buffer, which will surely cause problems.  This patch
	makes lastcomm[] the right size, and makes sure it can't be overrun.  Since
	the code also goes to the effort of getting a local copy of current in "me",
	we may as well use it for printing the message.
	
	Signed-off-by: Chris Wright <chrisw@osdl.org>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<neilb@cse.unsw.edu.au>
	[PATCH] md: fix careless bug in raid10
	
	raid10 performs resync by reading all blocks, comparing to look for The
	requires re-tasking a bio that was used to read, so that it can be re-used
	for write.  So a number of fields need to be reset.
	
	The bi_bdev field was not being reset.  However when using on a partition
	of a device, it gets changed by generic_make_request.
	
	This patch simply resets bi_bdev to the correct value.
	
	Signed-off-by: Neil Brown <neilb@cse.unsw.edu.au>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<neilb@cse.unsw.edu.au>
	[PATCH] md: fix jiffies handling in md.c
	
	Use time_after_eq instead of >=
	
	From: Michal Schmidt <xschmi00@stud.feec.vutbr.cz>
	Signed-off-by: Neil Brown <neilb@cse.unsw.edu.au>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<pavel@ucw.cz>
	[PATCH] swsusp kconfig: Change in wording
	
	Vadim says:
	
	I was reading through the kernel/power/Kconfig file, and noticed that
	the wording was slightly unclear. I poked at it a bit, hopefully making
	the description a tad more straightforward, but you be the judge. :)
	Diffed against 2.6.10-rc2.
	
	From: Vadim Lobanov <vlobanov@speakeasy.net>
	Signed-off-by: Vadim Lobanov <vlobanov@speakeasy.net>
	Signed-off-by: Pavel Machek <pavel@suse.cz>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<takata@linux-m32r.org>
	[PATCH] media: Update drivers/media/video/arv.c
	
	Here is a patch to update AR camera device driver.
	
	drivers/media/video/arv.c:
	
	- Remove warnings; use module_param() instead of MODULE_PARM(), because
	  MODULE_PARM() is deprecated.
	
	- Fix white-space damages.
	
	Signed-off-by: Hirokazu Takata <takata@linux-m32r.org>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<kkeil@suse.de>
	[PATCH] i4l: fix deadlock in CAPI code, reenable SMP
	
	This patch fix a deadlock in CAPI device driver registration code and
	reenable SMP for the activ AVM cards., also some minor cleanup and fixes.
	
	Signed-off-by: Karsten Keil <kkeil@suse.de>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<hirofumi@mail.parknet.co.jp>
	[PATCH] cont_prepare_write() fix
	
	When cont_prepare_write() is padding out the "hole" with zeroed pages it
	doesn't increase i_size at the same time.  If writeback comes in during the
	execution of cont_prepare_write(), block_write_full_page() will think that
	these pages are outside i_size and will just clean the page without writing
	it.
	
	Fix that up by using generic_commit_write(), which will advance i_size for
	each page as it is dirtied.
	
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<nathans@sgi.com>
	[PATCH] Fix an XFS direct I/O deadlock
	
	Here's a patch which fixes the deadlock Brad Fitzpatrick reported here:
	http://lkml.org/lkml/2004/11/14/98
	
	The meat of the problem is a locking order reversal between the XFS I/O
	lock and the inode semaphore (i_sem).  When we mix a number of threads
	doing both direct reads and writes, we hit an ABBA deadlock after a while
	because direct-io.c is taking and dropping i_sem after the XFS read path
	has already taken its I/O lock.  This is the wrong way around from XFS's
	point of view, in particular its the opposite order to the XFS write path. 
	So this patch changes the logic for direct reads in the DIO_OWN_LOCKING
	case (i.e.  XFS-only case), but leaves things as is for the other two types
	of locking.
	
	Not real pretty, but fixes up the lock ordering and deadlock.
	
	Oh, I have tested direct reads and writes on ext3 and block devices as
	well, to ensure they still function correctly with the change (i.e.  they
	don't regress, should be a no-op there) which covers the other locking
	cases in __blockdev_direct_IO.
	
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<akpm@osdl.org>
	[PATCH] generic_make_request stack savings
	
	Move this error-handling into a separate function so that its sizeable stack
	utilisation is avoided - generic_make_request() can be called recursively by
	stacking drivers.
	
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<rusty@rustcorp.com.au>
	[PATCH] Fix parameter handling in ibm_acpi.c
	
	You can't call module_param et al inside a function.  It doesn't make
	sense, and it doesn't work.
	
	Signed-off-by: Rusty Russell <rusty@rustcorp.com.au>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<rusty@rustcorp.com.au>
	[PATCH] Fix occasional stop_machine() lockup with > 2 CPUs
	
	Stephen Rothwell noted a case where one CPU was sitting in userspace, one
	in stop_machine() waiting for everyone to enter stopmachine().  This can
	happen if migration occurs at exactly the wrong time with more than 2 CPUS.
	 Say we have 4 CPUS:
	
	1) stop_machine() on CPU 0creates stopmachine() threads for CPUS 1, 2
	   and 3, and yields waiting for them to migrate to their CPUs and
	   ack.
	
	2) stopmachine(2) gets rebalanced (probably on exec) to CPU 1.
	
	3) stopmachine(2) calls set_cpus_allowed on CPU 1, sleeps awaiting
	   migration thread.
	
	4) stopmachine(1) calls set_cpus_allowed on CPU 0, moves onto CPU1 and
	   starts spinning.
	
	Now the migration thread never runs, and we deadlock.  The simplest
	solution is for stopmachine() to yield until they are all in place.
	
	Signed-off-by: Rusty Russell <rusty@rustcorp.com.au>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<avvisi@spalletti.it>
	[PATCH] Add PCI-quirks for ASUS M6Ne notebook
	
	Added M6Ne PCI IDs in asus_hides_smbus_hostbridge() function
	
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<tglx@linutronix.de>
	[PATCH] yenta_socket.c: Fix missing pci_disable_dev
	
	Simple fix to make pci_enable/disable symetric and avoid the warning on
	module unload.
	
	Signed-off-by: Thomas Gleixner <tglx@linutronix.de>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<daniel.ritz@gmx.ch>
	[PATCH] yenta: don't enable read prefetch on older o2 bridges.
	
	It turns out that just blindly enabling read prefetch is wrong for the
	older (and buggy) oz6833 bridge.  fixed in the attached patch.
	
	- don't touch the oz6832/6833
	- more verbose
	- only set the read prefetch and the write burst bits
	
	it broke on some old laptop with a cardbus tulip.
	
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<efalk@google.com>
	[PATCH] Documentation for IDE and CDROM ioctls
	
	I've written two document files, and packaged them as a patch.
	
	Two things caught my eye while I was writing this up:
	
	The header comments for CDROMREADRAW, CDROMREADMODE1, and CDROMREADMODE2
	disagree with the actual source code.  The header comments imply that a
	cdrom_read structure is used to pass data, but the source code actually
	reads a cdrom_msf structure and then overwrites it with raw data.  I'm not
	sure if there's a bug in the header comments, in the driver source, or I
	misread something.
	
	The CDROM_LOCKDOOR ioctl seems to lock/unlock all doors on all drives,
	because it uses a global variable.
	
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<efalk@google.com>
	[PATCH] fix typo in cdrom.c
	
	Bug in dvd_read_manufact found by inspection.
	
	Cc: Jens Axboe <axboe@suse.de>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<marc.leeman@gmail.com>
	[PATCH] make number of ramdisks Kconfigurable
	
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<rddunlap@osdl.org>
	[PATCH] eth1394: use SET_NETDEV_DEV() for udev
	
	Use SET_NETDEV_DEV() so that the device works correctly with udev.
	
	Signed-off-by: Randy Dunlap <rddunlap@osdl.org>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<stevef@smfhome.smfdom>
	add direct mount options to optionally bypass the page cache on reads and writes

<bjorn.helgaas@hp.com>
	[PATCH] DAC960: Don't look at PCI_Device->irq before calling pci_enable_device().
	
	The DAC960 driver looks at PCI_Device->irq before calling
	pci_enable_device(), which means it requests the wrong IRQ and hangs.
	This fixes it. 
	
	Thanks to Johannes Rommel for reporting the problem and testing the fix.
	
	Signed-off-by: Bjorn Helgaas <bjorn.helgaas@hp.com>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<stevef@stevef95.austin.ibm.com>
	[CIFS] zero more of SMB param area on SMB allocation
	
	Signed-off-by: Steve French (sfrench@us.ibm.com)

<sfrench@sambaltcdom.austin.ibm.com>
	[CIFS] fix spelling of CONFIG_CIFS_EXPERIMENTAL ifdef in direct i/o write
	
	Signed-off-by: Steve French (sfrench@us.ibm.com)

<akpm@osdl.org>
	[PATCH] revert the "dio handle eof" fix
	
	This recent fix isn't quite right: it is causing smaller-than-expected I/Os to
	be submitted when extending files, which causes AIO-based writes to oops.
	
	So just revert it - the bug was really over in blockdev_get_blocks() anyway.
	
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<akpm@osdl.org>
	[PATCH] blkdev_get_blocks(): handle eof
	
	For reasons which escape me, blockdev_get_blocks() is returning -EIO if the
	mapping request straddles the end of the disk.  This causes reads which
	straddle end-of-disk to return -EIO.
	
	Fix it up so that it correctly trims the returned result down to match the
	size of the device, for both reads and writes.
	
	If a write attempt is fully beyond end-of-device then return -EIO.  We never
	get this far anyway, because generic_write_checks() will return -ENOSPC if all
	of the write lies outside a blockdev's i_size.
	
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<viro@parcelfarce.linux.theplanet.co.uk>
	[PATCH] Work around devices with bogus media change indication on the first open
	
	What that patch does is making the first open _always_ assume that we need to
	revalidate/reread partition table and kills partition-parsing in
	register_disk(); instead we just have it do open/close and let the
	revalidation path in open do the job.
	
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<schwidefsky@de.ibm.com>
	[PATCH] s390: core changes
	
	From: Martin Schwidefsky <schwidefsky@de.ibm.com>
	From: Ulrich Weigand <uweigand@de.ibm.com>
	
	s390 core changes:
	 - Remove defines for kernel_stack_size and async_stack_size.
	 - Reserve system call number for kexec.
	 - Add cc-option check for new gcc option packed-stack.
	 - Fix race on no_hz_cpu_mask in stop_hz_timer.
	 - Fix ptrace to make it send a SIGTRAP before the first instruction
	   of a single stepped signal handler is executed.
	 - Use force_sig_info with a full siginfo structure for illegal operation.
	 - Remove verbatim copy of si_codes from asm-s390/siginfo.h. Use the
	   generic definitions.
	 - Regenerate default configuration.
	
	Signed-off-by: Martin Schwidefsky <schwidefsky@de.ibm.com>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<schwidefsky@de.ibm.com>
	[PATCH] s390: common i/o layer
	
	From: Cornelia Huck <cohuck@de.ibm.com>
	From: Steffen Thoss <thoss@de.ibm.com>
	
	common i/o layer changes:
	 - Delay re-registration of a subchannel with a different subchannel id
	   until the ccw device removal triggered from the subchannels remove
	   function has completed.
	 - Fix check when to call unreg_rereg.
	 - Fix get_disc_cdev_by_devno.
	 - Activate the time delay disablement facility. This saves a few cycles
	   in millicode processing.
	 - Don't ifdef reset of busy start time.
	
	Signed-off-by: Martin Schwidefsky <schwidefsky@de.ibm.com>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<schwidefsky@de.ibm.com>
	[PATCH] s390: dcss segments
	
	From: Carsten Otte <cotte@de.ibm.com>
	
	dcss segment interface changes:
	 - Add check when loading segments to avoid out of range mappings.
	 - Add code to check for segment_load returning -ERANGE.
	 - Rename segment_info to segment_type.
	 - Restore previous segment state if reload fails.
	 - Add segment_modify_shared() to change shared attributes of a dcss
	   segment and use it in the dcss block device driver.
	 - Add support for contiguous EW/EN multipart segments.
	
	Signed-off-by: Martin Schwidefsky <schwidefsky@de.ibm.com>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<schwidefsky@de.ibm.com>
	[PATCH] s390: dasd driver
	
	From: Horst Hummel <horst.hummel@de.ibm.com>
	From: Stefan Weinhuber <wein@de.ibm.com>
	
	dasd driver changes:
	 - Introduce "fixbuffers" dasd option that uses buffer pages for
	   the dasd i/o similar to bounce buffers.
	 - Fix I/O errors when using XRC.
	 - Increment retry counter again if notifier callback is called with CIO_GONE.
	
	Signed-off-by: Martin Schwidefsky <schwidefsky@de.ibm.com>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<schwidefsky@de.ibm.com>
	[PATCH] s390: z/VM monitor stream
	
	From: Gerald Schaefer <geraldsc@de.ibm.com>
	
	z/VM monitor stream changes:
	 - Add monitor control element to deal with end-of-frame records.
	
	Signed-off-by: Martin Schwidefsky <schwidefsky@de.ibm.com>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<schwidefsky@de.ibm.com>
	[PATCH] s390: network driver
	
	From: Thomas Spatzier <tspat@de.ibm.com>
	From: Peter Tiedemann <ptiedem@de.ibm.com>
	
	network driver changes:
	 - qeth: return -EINVAL if an skb is too large.
	 - qeth: don't call netif_stop_queue after cable pull. Drop the
	   packets instead.
	 - qeth: fix race between SET_IP and SET_MC kernel thread by removing
	   SET_MC thread and let the SET_IP thread do multicast requests as well.
	 - qeth: make it compile without CONFIG_VLAN.
	 - ctc: avoid compiler warnings.
	 - lcs: write package sequence number to skb->cb.
	
	Signed-off-by: Martin Schwidefsky <schwidefsky@de.ibm.com>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<schwidefsky@de.ibm.com>
	[PATCH] s390: qeth network driver
	
	From: Thomas Spatzier <tspat@de.ibm.com>
	
	network driver changes:
	 - qeth: Handle both VLAN_FRAME and INCLUDES_VLAN_TAG in qdio header.
	 - qeth: Always save IP addresses registered on a card when going offline.
	 - qeth: Check size of printk buffer to 4K for ipa_takeover, vipa & rxip.
	
	
	From: Thomas Spatzier <tspat@de.ibm.com>,
	      Heiko Carstens <heiko.carstens@de.ibm.com>
	
	Thomas created the patch below which removes the hardcoded 3900 bytes
	limit as suggested by Jeff Garzik. Please apply.
	
	network driver changes:
	 - qeth: Calculate end of sysfs data buffer correctly.
	
	Signed-off-by: Martin Schwidefsky <schwidefsky@de.ibm.com>
	Signed-off-by: Heiko Carstens <heiko.carstens@de.ibm.com>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<anton@samba.org>
	[PATCH] Allow multiple cpus in irq affinity call
	
	The generic irq affinity code limits us to a single cpu target regardless
	of what the architecture supports.  If required this should be done in the
	architecture specific ->set_affinity call.
	
	With this patch ppc64 is able to select all cpus affinity again.
	
	Signed-off-by: Anton Blanchard <anton@samba.org>
	Acked-by: Ingo Molnar <mingo@elte.hu>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<mingo@elte.hu>
	[PATCH] acpi_processor_idle() latency fix
	
	We check need_resched() _before_ disabling preemption.  This opens up the
	following scenario:
	
	 swapper:	!need_resched()
	 [IRQ context]
			wakes up a task
			marks idle task as need-resched
	
	 swapper:	acpi_processor_idle(); // sleeps until next irq
	
	instant 1msec latency introduced...
	
	normally default_idle() is safe because it re-checks need_resched with
	interrupts disabled before it truly halts the CPU.  But
	acpi_processor_idle() doesnt seem to be doing this!  Your trace clearly
	shows a missed preemption due to ACPI.  I'm wondering why no-one has
	triggered this before, it's a really bad bug that should be fixed in
	2.6.10.
	
	Signed-off-by: Ingo Molnar <mingo@elte.hu>
	Cc: "Brown, Len" <len.brown@intel.com>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<geert@linux-m68k.org>
	[PATCH] M68k Ethernet drivers depend on NET_ETHERNET
	
	M68k Ethernet drivers depend on NET_ETHERNET instead of NETDEVICES
	
	Signed-off-by: Geert Uytterhoeven <geert@linux-m68k.org>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<geert@linux-m68k.org>
	[PATCH] M68k HP Lance Ethernet depends on DIO bus support
	
	HP Lance Ethernet depends on DIO bus support
	
	Signed-off-by: Geert Uytterhoeven <geert@linux-m68k.org>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<icampbell@arcom.com>
	[PATCH] Avoid deadlock in smc91x driver
	
	This patch avoids a deadlock on rtnl_sem in smc_close() when bringing down
	an smc91x interface.  The semaphore is already held by devinet_ioctl() and
	the pending work queue contains linkwatch_event() (scheduled by
	netif_carrier_off()) which also wants rtnl_sem hence it is unsafe to call
	flush_scheduled_work().
	
	The solution is to track whether we have any pending work of our own and
	wait for that instead of flushing the entire queue.
	
	I also fixed a typo 'ence' -> 'Hence' and renamed smc_detect_phy to
	smc_phy_detect in order to follow the same pattern as the other smc_phy_*
	functions.
	
	Signed-off-by: Ian Campbell <icampbell@arcom.com>
	Signed-off-by: Nicolas Pitre <nico@cam.org>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<pmeda@akamai.com>
	[PATCH] sys_set/getpriority PRIO_USER semantics fix and optimisation
	
	This change brings the semantics equivalent to 2.4 and also to what the man
	page says; Also optimises by avoiding unneeded lookup in uid cache, when
	who is same as the current->uid.
	
	sys_set/getpriority is rewritten in 2.5/2.6, perhaps while transitioning to
	the pid maps.  It has now semantical bug, when uid is zero.  Note that akpm
	also fixed refcount leak and locking in the new functions in changeset
	http://linus.bkbits.net:8080/linux-2.5/cset@1.1608.10.84
	
	Signed-off-by: <pmeda@akamai.com>
	Acked-by: Ingo Molnar <mingo@elte.hu>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<mporter@kernel.crashing.org>
	[PATCH] Fix warnings in ibm_emac driver
	
	This patch fixes annoying warnings in ibm_emac driver.
	
	Signed-off-by: Eugene Surovegin <ebs@ebshome.net>
	Signed-off-by: Matt Porter <mporter@kernel.crashing.org>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<adaplas@hotpop.com>
	[PATCH] fbdev: fix wrong colors at 16 bpp in tridentfb
	
	Timothy Lee reports:
	
	Hardware: CyberBlade/i1 on VIA Epia-800
	
	Problem Description:  When the framebuffer is set to 16 bpp, console's text
	colours are incorrect.  For example, white becomes yellow, black becomes blue, etc.
	
	Steps to reproduce:
	1. Load tridentfb
	2. Use "setterm -n -depth 16" to request 16 bpp framebuffer
	
	The problem arose from the fact that each psuedo palette entry should be
	32-bit in size, even under 16-bit display mode.
	
	Signed-off-by: Antonino Daplas <adaplas@pol.net>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<joe.korty@ccur.com>
	[PATCH] fix uninitialized variable in waitid(2)
	
	Specify an initial value signal_struct's field stop_state whenever a
	signal_struct variable is created.
	
	Bug was discovered through the occasional failure of telnet(1) to connect.
	
	Signed-off-by: Joe Korty <joe.korty@ccur.com>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<rddunlap@osdl.org>
	[PATCH] VISWS: prevent APM
	
	Prevent X86_VISWS config from building APM support.  APM isn't supported
	and it won't build if attempted.  Also disable P4THERMAL for VISWS.
	
	Signed-off-by: Randy Dunlap <rddunlap@osdl.org>
	Acked-by: Andrey Panin <pazke@donpac.ru>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<manfred@colorfullife.com>
	[PATCH] proc_pid_status() oops fix
	
	proc_pid_status dereferences pointers in the task structure even if the
	task is already dead.  This is probably the reason for the oops described
	in
	
	http://bugme.osdl.org/show_bug.cgi?id=3812
	
	The attached patch removes the pointer dereferences by using pid_alive()
	for testing that the task structure contents is still valid before
	dereferencing them.  The task structure itself is guaranteed to be valid -
	we hold a reference count.
	
	Signed-Off-By: Manfred Spraul <manfred@colorfullife.com>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<ben-linux@org.rmk.(none)>
	[ARM PATCH] 2290/1: S3C2410 - timer usec fixes
	
	Patch from Ben Dooks
	
	A simple divide is not enough for the s3c2410 default
	timer code, due to most clocks not being a nice multiple
	of usecs.
	
	This update changes the calculation of the usec to use
	multipliers and shifts to effect a fast divide by a non-integer
	number.
	
	Original patch by Dimitry Andric, updated by Ben Dooks
	
	Signed-off-by: Dimitry Andric
	
	Signed-off-by: Ben Dooks
	Signed-off-by: Russell King

<greg@kroah.com>
	[PATCH] Driver Core: restore comment in kobject_uevent.c
	
	Signed-off-by: Kay Sievers <kay.sievers@vrfy.org>
	Signed-off-by: Greg Kroah-Hartman <greg@kroah.com>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<greg@kroah.com>
	[PATCH] sysfs: fix sysfs_dir_close memory leak
	
	sysfs_dir_close did not free the "cursor" sysfs_dirent used for keeping
	track of position in the list of sysfs_dirent nodes.  Consequently,
	doing a "find /sys" would leak a sysfs_dirent for each of the 1140
	directories in my /sys tree, or about 36kB each time.
	
	
	From: "Adam J. Richter" <adam@yggdrasil.com>
	Signed-off-by: Greg Kroah-Hartman <greg@kroah.com>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<greg@kroah.com>
	[PATCH] Add documentation about why the in-kernel api is the way it is.
	
	Signed-off-by: Greg Kroah-Hartman <greg@kroah.com>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<jbarnes@engr.sgi.com>
	[PATCH] correct copyright in arch/ia64/kernel/domain.c
	
	Ok, here we go (finally).  A patch to correct the cut-and-paste
	copyright in arch/ia64/kernel/domain.c.  Both Silicon Graphics, Inc. 
	and myself (yes personally) hold the copyright on this file.
	
	Signed-off-by: Jesse Barnes <jbarnes@sgi.com>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<torvalds@ppc970.osdl.org>
	Linux 2.6.10-rc3

<rmk@flint.arm.linux.org.uk>
	[ARM] Ensure user ops pass 64-bit constants in even,odd registers.
	
	Always pass values to get_user and put_user in an even numbered
	register, and optionally the next odd numbered register.  This
	ensures that we are compatible with compiler enhancements.

<rmk@flint.arm.linux.org.uk>
	[ARM] Add per_cpu data area to linker script.

<rmk@flint.arm.linux.org.uk>
	[SERIAL] Ensure correct units for close_delay and closing_wait.
	
	Use milliseconds internally for these delays, and convert them
	to centiseconds at the interface boundary to the ioctl
	configuration controls.

<davem@nuts.davemloft.net>
	[SPARC64]: Fix SMP cpu bringup bug when bigkernel.
	
	We have to load the bigkernel second TLB entry on
	secondary processors before we move over the use
	the kernel trap table.  Otherwise we can take a
	TLB miss somewhere in the post-4MB area and the
	TLB handler is not prepared to service that.
	
	The case that usually occurs is the prom_set_trap_table
	call made by trampoline.S, since p1275buf usually sits
	very near the end of the kernel image.  It worked by
	luck most of the time as long as p1275buf sits within
	a single page since earlier code running in trampoline.S
	forced that TLB entry to be loaded by the OBP TLB miss
	handler.
	
	This was not fun to figure out.
	
	Signed-off-by: David S. Miller <davem@davemloft.net>

<elf@com.rmk.(none)>
	[ARM PATCH] 2293/1: Corrections to build for LPD7a400
	
	Patch from Marc Singer
	
	Some typos prevent the 2.6.10-rc2 kernel from building for the
	LPD7A400.  This patch fixes them.  It also removes CONFIG_FIQ which
	shouldn't be necessary and doesn't compile.
	
	Signed-off-by: Marc Singer
	Signed-off-by: Russell King

<zecke@org.rmk.(none)>
	[ARM PATCH] 2294/1: SA1100 ide.h change superseed 2282/1
	
	Patch from Holger Hans Peter Freyther
	
	As proposed in 2282 asm-arm/arch-sa1100/ide.h is not included anymore from asm-arm/ide.h. 
	If arch-sa1100/ide.h is included we abort with #error.
	If lart.c is compiled we kindly warn that ide needs fixing for this board.
	
	
	Signed-off-by: Holger Hans Peter Freyther
	Signed-off-by: Russell King

<gandalf@wlug.westbo.se>
	[PATCH] Fix ALSA resume
	
	Some time ago, a patch was merged that removed pci_save_state() and
	pci_restore_state() from various ALSA drivers. That patch also added
	pci_restore_state() to sound/core/init.c but didn't add pci_save_state()
	anywhere. This is needed since the core pci handling doesn't do this for
	us anymore.
	
	My laptop doesn't resume (gets what I assume is an ACPI timeout and
	hangs solid) without this small obvious patch.
	
	Signed-off-by: Martin Josefsson <gandalf@wlug.westbo.se>
	Fixed-by: Takashi Iwai <tiwai@suse.de>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<elf@com.rmk.(none)>
	[ARM PATCH] 2296/1: Corrections to build for LPD7a404
	
	Patch from Marc Singer
	
	A missing exten prevented the 2.6.10-rc2 kernel from building for the
	LPD7A404.  This patch adds it.
	
	Signed-off-by: Marc Singer
	Signed-off-by: Russell King

<elf@com.rmk.(none)>
	[ARM PATCH] 2297/1: SMC91x patch (#2) for LPD7a40x CardEngines
	
	Patch from Marc Singer
	
	Add support for the LPD7a40x implementation of the SMC91x ethernet
	controller. This patch exists to work around a mismatch between the
	way the LH7a40x CPUs handle chip selects and what the ethernet
	controller expects.
	
	This patch has been revised to eliminate masking of interrupts.  The
	concessions are that 
	
	  a) the ISR must perform an IOBARRIER before the first access to the
	     chip, just in case the interrupt occurred while the driver was
	     writing to the chip
	  b) other drivers that use the same chip select region as the SMC
	     chip must perform a similar IOBARRIER at the top of their ISRs.
	
	Signed-off-by: Marc Singer
	Signed-off-by: Russell King

<davem@nuts.davemloft.net>
	[SPARC]: Fix syscall return value errno comparison.
	
	This was hosing all restart block handling.
	
	Noticed by Richard Mortimer.
	
	Signed-off-by: David S. Miller <davem@davemloft.net>

<marcel@holtmann.org>
	[Bluetooth] Use separate inquiry data structure
	
	The inquiry results can return different fields and so create one
	data structure that has place for every of these. Missing fields
	are filled with default values.
	
	Signed-off-by: Marcel Holtmann <marcel@holtmann.org>

<marcel@holtmann.org>
	[Bluetooth] Track the class of device value
	
	The class of device is only available from an inquiry response or
	from the connection request. In the case of an incoming connection
	the value can be taken from the request and stored in the hci_conn
	structure. For an outgoing connection the value from the inquiry
	cache is used or it is set to zero.
	
	Signed-off-by: Marcel Holtmann <marcel@holtmann.org>

<marcel@holtmann.org>
	[Bluetooth] Use module parameter for ISOC alternate setting
	
	The module parameter for the ISOC transfers now chooses the value
	of the alternate setting.
	
	Signed-off-by: Marcel Holtmann <marcel@holtmann.org>

<jejb@mulgrave.(none)>
	aic7xxx: fix compiler warning from dma mask assignement
	
	Promote all the mask quantites to being u64 so that
	they never cause truncation warnings.
	
	Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

<dvrabel@com.rmk.(none)>
	[ARM PATCH] 2298/1: Fix minor typo in ixp4xx_wdt
	
	Patch from David Vrabel
	
	Fix a minor typo in the MODULE_AUTHOR string in ixp4xx_wdt.
	
	Signed-off-by: David Vrabel
	Signed-off-by: Russell King

<dougg@torque.net>
	[PATCH] extracting resid from struct scsi_cmnd
	
	    - during successful command completion place resid from SCSI
	      LLDs into request::data_len so that block SG_IO ioctl reports
	      resid
	
	Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

<jejb@mulgrave.(none)>
	SCSI: spi_transport set_signalling is buggy
	
	From: 	Matthew Wilcox <matthew@wil.cx>
	
	Looks like you got the test backwards.  It would only call set_signalling
	if type was SPI_SIGNAL_UNKNOWN.
	
	Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

<mike.miller@hp.com>
	[PATCH] cciss: cciss_ioctl return code fix
	
	This patches fixes the return code from cciss_ioctl. Without this some
	block layer (BLK*) ioctls do not work. Please consider this for inclusion.
	
	Thanks to Jens Axboe for pointing this out.
	
	Signed-off-by: Mike Miller <mike.miller@hp.com>
	Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

<sfrench@sambaltcdom.austin.ibm.com>
	[CIFS] cleanup various warning/debug messages
	
	Signed-off-by: Steve French (sfrench@us.ibm.com)

<sfrench@sambaltcdom.austin.ibm.com>
	[CIFS] add debug message for trusted and security xattrs
	
	Signed-off-by: Steve French (sfrench@us.ibm.com)

<aherrman@de.ibm.com>
	[PATCH] zfcp: act enhancements corrections
	
	- corrects errors introduced in open_unit_handler
	  with last patch submission for act enhancements,
	- changes formatting and some log-messages in act
	  enhancments code,
	- removes junk lines
	- corrected Kconfig dependency for zfcp
	- do not wait for SBALs when creating ELS requests
	
	Signed-off-by: Andreas Herrmann <aherrman@de.ibm.com>
	Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

<herbert@13thfloor.at>
	[PATCH] normalise wall_to_monotonic for i386 and m32r
	
	Fix the non-normalized wall_to_monotonic for i386 and m32r (The other archs
	seem to get it right)
	
	Signed-off-by: Herbert Poetzl <herbert@13thfloor.at>
	Signed-off-by: George Anzinger <george@mvista.com>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<santil@us.ibm.com>
	[PATCH] fix buffer starvation race in ibmveth
	
	There's a chance that the receive buffers are being consumed at the same
	rate as they are being replenished in ibmveth_replenish_task()... 
	Meanwhile, the calls to schedule_replenishing() from ibmveth_poll() won't
	schedule another replenishing cycle (because the not_replenishing flag is
	zero), starving the buffers and making the adapter unable to receive
	packets unless the module is reloaded...  Here's a small patch that will
	fix it by scheduling another replenishing task after toggling the
	not_replenishing flag.
	
	Signed-Off-By: Santiago Leon <santil@us.ibm.com>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<fenghua.yu@intel.com>
	[PATCH] Add cpu_relax in idle spin loop for no-hlt kernel option
	
	If given no-hlt kernel option, ia32 idle loop turns out to be a spin loop. 
	Add cpu_relax() in this spin loop because IA32 SDM recommends that a PAUSE
	instruction be put in all spin loops.
	
	Signed-off-by: Fenghua Yu <fenghua.yu@intel.com>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<benh@kernel.crashing.org>
	[PATCH] remove some PowerMac cruft from USB
	
	The PowerMac specific sleep code in the OHCI USB driver used to call
	disable/enable irq, which is no longer necessary and actually clashes with
	the calls to free/request_irq that the common OHCI code now does, thus
	causing WARN_ON's to trigger each time a PowerBook is woken up from sleep.
	
	Signed-off-by: Benjamin Herrenschmidt <benh@kernel.crashing.org>
	Cc: David Brownell <david-b@pacbell.net>
	Cc: Greg KH <greg@kroah.com>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<romieu@fr.zoreil.com>
	[PATCH] r8169: new PCI id
	
	The D-Link DGE-528T gigabit adapter is based on the 8169 chipset (reported
	by Andreas Tauscher <ta@lonestar-bbs.de>, checked in the sources of a
	driver for this adapter).
	
	Signed-off-by: Francois Romieu <romieu@fr.zoreil.com>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<geert@linux-m68k.org>
	[PATCH] M68k: Update defconfigs for 2.6.10-rc3
	
	M68k: Update defconfigs for 2.6.10-rc3
	
	Signed-off-by: Geert Uytterhoeven <geert@linux-m68k.org>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<axboe@suse.de>
	[PATCH] cfq-iosched: bad accounting on non-fs requests
	
	Current cfq can cause hangs with non-fs requests, because the accounting
	goes bad.  This fixes it.
	
	Signed-off-by: Jens Axboe <axboe@suse.de>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<shaohua.li@intel.com>
	[PATCH] eepro100 resume failure
	
	Fix eepro100 driver suspend/resume issue.
	
	Signed-off-by: Li Shaohua<shaohua.li@intel.com>
	Cc: Jeff Garzik <jgarzik@pobox.com>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<paulus@samba.org>
	[PATCH] PPC64: close firmware stdin
	
	We recently found a problem that was causing memory corruption during boot
	on IBM POWER5 machines.  The problem was that the if you have a USB
	keyboard and it is set to the input device for the firmware, it will still
	be active when the kernel is started.  That means that the OHCI controller
	has pointers to various memory areas that it polls for transfers to do. 
	When we start using that same memory in the kernel, bad things can happen. 
	(This isn't a problem on powermacs because the Apple OF implements a
	"quiesce" call which turns off all the devices it is using.)
	
	This patch fixes the problem by calling the Open Firmware "close" method
	for the input device.  Stephen Rothwell and I have verified that doing this
	fixes the problem on the POWER5 machine where we observed it.  I verified
	that this patch doesn't cause any problems on powermacs.
	
	I think this patch should go into 2.6.10 since it fixes a nasty memory
	corruption bug that can cause rather subtle and hard-to-diagnose problems
	during boot.  (The symptom on the POWER5 machine with the particular kernel
	that we were using was that reading /proc/net/tcp would oops, due to one of
	the pointers in tcp_ehash being corrupted.)
	
	Signed-off-by: Paul Mackerras <paulus@samba.org>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<mike.miller@hp.com>
	[PATCH] cciss: cciss_ioctl return code fix
	
	This patches fixes the return code from cciss_ioctl.  Without this some
	block layer (BLK*) ioctls do not work.
	
	Thanks to Jens Axboe for pointing this out.
	
	Signed-off-by: Mike Miller <mike.miller@hp.com>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<trini@kernel.crashing.org>
	[PATCH] ppc32: fix Motorola PReP (PowerstackII Utah) PCI IRQ map
	
	The PCI IRQ map for the old Motorola PowerStackII (Utah) boards was
	incorrect, but this breakage wasn't exposed until 2.5, and finally fixed
	until recently by Sebastian Heutling <sheutlin@gmx.de>.
	
	Signed-off-by: Christian Kujau <evil@g-house.de>
	Signed-off-by: Tom Rini <trini@kernel.crashing.org>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<tiwai@suse.de>
	[PATCH] alsa: fix sleep in atomic during prepare callback
	
	Fixed the sleep in spinlock during prepare callback.  This happened only on
	Nforce chips.
	
	Signed-off-by: Takashi Iwai <tiwai@suse.de>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<tiwai@suse.de>
	[PATCH] alsa: add pci_disable_device() to removal and error paths
	
	pci_disable_device() is called properly in the removal and error paths. 
	Also, the pci_set_master() is added to the resume callbacks if missing
	(just to be sure).
	
	Signed-off-by: Takashi Iwai <tiwai@suse.de>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<tiwai@suse.de>
	[PATCH] alsa: fix iomem mmap
	
	The patch adds the definition vm_private_data again to
	snd_pcm_lib_mmap_iomem().  It got lost during the rewrite of the mmap
	stuff.
	
	Signed-off-by: Martin Langer <martin-langer@gmx.de>
	Signed-off-by: Takashi Iwai <tiwai@suse.de>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<kernel-stuff@comcast.net>
	[PATCH] ohci1394.c - Correct kmalloc usage in interrupt
	
	alloc_dma_rcv_ctx is called in interrupt and Kernel Spinlock debugging code
	cribs about it via "Debug: sleeping function called in interrupt context". 
	See sample stack traces below.
	
	The patch below corrects ohci1394.c to use GFP_ATOMIC instead of
	GFP_KERNEL.  Tested to work fine with 2 different Camcorder devices for
	fairly long periods and connect/disconnects.
	
	Signed-off-by: Parag Warudkar <kernel-stuff@comcast.net>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<matthew@wil.cx>
	[PATCH] Blacklist devices that falsely claim an echo buffer
	
	A particular type of DVD is wrongly claiming to have an echo buffer
	(but only if a DVD is inserted).  This confuses domain validation, so
	only look for an echo buffer if the device supports ppr (this is all
	SCSI3 and above devices plus LVD SCSI2 devices).
	
	Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

<alan@lxorguk.ukuu.org.uk>
	[PATCH] Intel/Cyrix typo
	
	Self explanatory.. Based on a report on l/k
	
	Signed-off-by: Alan Cox <alan@redhat.com>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<Andries.Brouwer@cwi.nl>
	[PATCH] restore BLKRRPART semantics
	
	In 2.6.8 the code for the BLKRRPART ioctl was changed
	to return EIO when no partitions were found, such as
	on an empty disk. This breaks some partitioning programs
	and is also confusing: "Input/Output error" while in fact
	nothing was wrong with this brand new all blank disk.
	
	This restores old behaviour.

<sfrench@sambaltcdom.austin.ibm.com>
	[CIFS] Increase size of small SMB pool (and decrease number) and 
	do not zero the beginning of the header twice.
	
	Signed-off-by: Steve French (sfrench@us.ibm.com)

<sfrench@sambaltcdom.austin.ibm.com>
	[CIFS] parse ipv6 addresses on mount (ipv6 support for cifs part 2)
	
	Signed-off-by: Steve French (sfrench@us.ibm.com)

<jgarzik@pobox.com>
	[libata] only DMA map data for DMA commands (fix >=4GB bug)
	
	libata made the assumption that (for PIO commands in this case)
	it could modify DMA memory at the kernel-virtual address, after
	mapping this.  This is incorrect, and fails on e.g. platforms that
	copy DMA memory back and forth (swiotlb on Intel EM64T and IA64).
	
	Remove this assumption by ensuring that we only call the DMA mapping
	routines if we really are going to use DMA for data xfer.
	
	Also:  remove a bogus WARN_ON() in ata_sg_init_one() which caused
	bug reports (but no problems).

<torvalds@ppc970.osdl.org>
	Revert double patch application.
	
	Heh. usually these come through Andrew, but this time it was all me.
	
	Noted by BenH.
	
	Cset exclude: paulus@samba.org[torvalds]|ChangeSet|20041207181541|44524

<hunold@linuxtv.org>
	[PATCH] dvb: documentation update
	
	Start of a big DVB update.
	
	
	The reasons for revamping the DVB frontend architecture:
	
	Just as analog TV cards, DVB cards need some sort of tuner to tune to the
	desired frequency of the digital transponder.  Tuning alone doesn't give you a
	digital DVB datastream, however, you need a demodulator as well.  The
	combination of tuner and demodulator is called frontend in the DVB world.
	Tuner and demodulator are both accessed via the serial i2c bus on all DVB
	cards out there.  So, technically a frontend consists of two i2c helper
	chipsets.
	
	In former times when there was only a handful of different DVB cards, the
	frontend was encapsulated in one tin box.  Some people had the idea that there
	should be one "frontend driver" instead of dedicated tuner and demodulator
	drivers.  A bad idea.
	
	As time went on, different manufacturers used the same tuner and demodulator
	combination, but used a different wiring for the tuner or did other technical
	changes.  The only possibility to support different cards with one combined
	frontend driver was to add hardware dependent tuner code inside the generic
	i2c frontend drivers.  Yuck.
	
	So there was a need for communication between the i2c frontend driver and the
	hardware depenedent driver, for example to exchange initialization code for
	the tuner.  Unfortunately, the i2c infrastructure is one way, from the i2c
	client to the i2c adapter using a non-typesafe ioctl() like interface, which
	is ugly by itself.  Greg K-H and others refused the idea to add an iotctl()
	like interface from the i2c adapter to the i2c client and instead proposed to
	use a typesafe interface instead.  We all agreed with that.
	
	The existing i2c infrastructure heavily depends on the probing facility, ie.
	clients probe for their existence on i2c busses.  This is dumb for most i2c
	busses out there that sit on dedicated hardware.  A DVB card is uniquely
	identified with pci or usb subvendor and subsystem ids, so on that particular
	bus we exactly *know* which kinds of i2c helper chipsets sit on there.
	
	Up to now this wasn't a problem, because we could fix all conflicts manually
	until half a year ago.  By that date, we found two different DVB designs which
	used different demodulators that unfortunately use the same i2c address and
	which cannot be distinguished by hardware tricks (ie.  different number of
	registers, some fixed hw dependent register,...)
	
	Getting a usable DVB card depended on the load order of the modules, because
	the i2c core probed the demodulator drivers one after another and the first
	one won the race.  Compiling all drivers statically into the kernel resulted
	in non-working cards.
	
	Our solution is as follows: we agreed to keep the basic underlying kernel i2c
	infrastructure, but we decided not to register our bussed and chipsets to the
	kernel i2c "probing" infrastructure.  Instead, we killed the tuner parts of
	the frontend drivers and put them into the dedicated hardware drivers (this is
	were they technically belong, they are highly hardware dependent) and we
	changed the frontend drivers to pure demodulator drivers (which are hardware
	independend).  There is now a type-safe functional dependency between the
	drivers and the demodulator drivers, the drivers explicitely ask the
	demodulator drivers to attach to their i2c bus.  The only negative aspect of
	that approach is that for some hardware there are now more dependencies to
	demodulator drivers than needed, ie.  a small amount of memory is wasted.
	
	This patch:
	
	- [DVB] cards.txt: added the USB devices to the card-list
	- [DVB] README.dibusb: follow changes in dibusb-driver
	
	Signed-off-by: Michael Hunold <hunold@linuxtv.org>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<hunold@linuxtv.org>
	[PATCH] dvb: collateral frontend changes
	
	- [DVB] get_dvb_firmware: rework to reflect new frontend design, added
	  additional firmware location
	
	- [DVB] Kconfig and Makefile changes all over the place, remove Makefile.lib
	
	Signed-off-by: Michael Hunold <hunold@linuxtv.org>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<hunold@linuxtv.org>
	[PATCH] dvb: frontend driver refactoring
	
	- [DVB] reafactor or add the following frontend drivers: at76c651, cx22700,
	  ves1x93, ves1820, tda80xx, tda8083, cx22702, tda1004x, tda10021, cx24110,
	  dvb_dummy_fe, l64781, mt312, mt352, stv0299, sp887x, stv0297, nxt6000,
	  sp8870
	
	- [DVB] remove dib3000mb from frontends, it's handled by the hw dependent
	  driver now
	
	Signed-off-by: Michael Hunold <hunold@linuxtv.org>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<hunold@linuxtv.org>
	[PATCH] dvb: saa7146 changes
	
	- [DVB] saa7146_core.c, saa7146_video.c: MODULE_PARM -> module_param, added
	  non-busy waiting option for saa7146_wait_for_debi_done(), make needlessly
	  global code static and remove unused code (thanks to Adrian Bunk
	  <bunk@stusta.de)
	
	- [DVB] saa7146_core.c: dev is kmalloc'ed twice, add missing
	  pci_disable_device(), rename goto labels, propagate the error code from the
	  underlying layers when possible, pci_request_region replaces
	  request_mem_region, other minor cleanups (thanks to Francois Romieu)
	
	- [DVB] saa7146_fops.c, saa7146_i2c.c, saa7146_hlp.c, saa7146_vbi.c: make
	  needlessly global code static, remove unused code (thanks to Adrian Bunk
	  <bunk@stusta.de>)
	
	Signed-off-by: Michael Hunold <hunold@linuxtv.org>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<hunold@linuxtv.org>
	[PATCH] dvb: follow frontend changes in drivers
	
	- [DVB] dvb-ttusb-dec, dvb-ttusb-budget, skystar2, bt878 + dvb-bt8xx: follow
	  frontend changes in driver
	
	- [DVB] DST isn't a real frontend, it's an interface to a frontend
	  microcontroller, so move the hardware dependend stuff to the right place
	
	Signed-off-by: Michael Hunold <hunold@linuxtv.org>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<hunold@linuxtv.org>
	[PATCH] dvb: Cinergy T2 update
	
	- [DVB] cinergyT2: update driver to exploit hardware capabilities
	
	Signed-off-by: Michael Hunold <hunold@linuxtv.org>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<hunold@linuxtv.org>
	[PATCH] dvb: dibusb driver update
	
	- [DVB] dibusb: added remote control event handling, thanks to David
	  Matthews.
	
	- [DVB] dibusb: added support for special Artec devices (with AN2235 usb
	  controller)
	
	- [DVB] dibusb: enable several new devices (even the broken Artec T1)
	
	- [DVB] dibusb: #if 0'ing unused code
	
	- [DVB] dibusb: follow frontend changes
	
	Signed-off-by: Michael Hunold <hunold@linuxtv.org>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<hunold@linuxtv.org>
	[PATCH] dvb: core changes
	
	- [DVB] dvb-core: follow Linux coding style, kill dvb_ksyms.c and move the
	  EXPORT_SYMBOLs to the files where the functions are, thanks to Adrian Bunk
	  <bunk@stusta.de>
	
	- [DVB] dvb-core: #if 0'ing unused code, make needlessly global code static,
	  whitespace and newline cleanups, thanks to Adrian Bunk <bunk@stusta.de>
	
	- [DVB] dvb_ca_en50221.c: support for KNC1/Cinergy CI modules, fix
	  segfaults, enhanced poll_slot_status to support non-IRQ interfaces, Fix
	  module usage count problem
	
	- [DVB] dvb-frontend.c: core changes to support the refactorized frontend
	  drivers
	
	Signed-off-by: Michael Hunold <hunold@linuxtv.org>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<hunold@linuxtv.org>
	[PATCH] dvb: remove dead files
	
	- [DVB] remove obsolete grundig_29504-401, grundig_29504-491, alps_tdlb7 and
	  alps_tdmb7 frontend drivers
	
	- [DVB] remove sp887x firmware file, it's unused thanks to firmware_class
	
	Signed-off-by: Michael Hunold <hunold@linuxtv.org>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<hunold@linuxtv.org>
	[PATCH] dvb: follow changes in dvb-ttpci and budget drivers
	
	- [DVB] dvb-ttpci, budget: updated to fix problems with some CAMs on KNC1
	  cards
	
	- [DVB] dvb-ttpci, budget: make needlessly global code static, whitespace
	  and newline cleanups, thanks to Adrian Bunk <bunk@stusta.de>
	
	- [DVB] dvb-ttpci, budget: follow frontend changes in driver
	
	- [DVB] dvb-ttpci, budget: fix drivers to use new
	  wait_for_debi_done(...,nobusywait) routine.
	
	Signed-off-by: Michael Hunold <hunold@linuxtv.org>
	Signed-off-by: Adrian Bunk <bunk@stusta.de>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<kraxel@bytesex.org>
	[PATCH] msp3400 quick fix
	
	The new "simpler" opmode added by the recent merge from ivtv breaks msp3400
	support for other tv cards.  Not figured yet why.
	
	This patch disables the "simpler" mode by default (can still be enabled by
	insmod option) as quick fix for 2.6.10.
	
	Signed-off-by: Gerd Knorr <kraxel@bytesex.org>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<dougg@torque.net>
	[PATCH] off-by-1 libata-scsi INQUIRY VPD pages 0x80 and 0x83
	
	I have some code (in sginfo) that requests the first 4 bytes
	of SCSI INQUIRY VPD pages to get their length then asks for
	that exact length in a follow up request to fetch the payload.
	Just like I saw with 36 byte standard INQUIRYs (no fixed)
	I get a buffer  full or zeroes.
	
	BTW SCSI standards dictate that in situations where the allocation
	length (in the cdb) is less than what is needed that what can be
	sent shall be sent (i.e. truncated and without any error indication
	or modification to the part of the response returned).
	In other words it is up the the application client to take remedial
	action.
	
	Changelog:
	   - fix off-by-1 allocation length issue with SCSI
	     INQUIRY VPD pages 0x80 and 0x83
	
	Signed-off-by: Jeff Garzik <jgarzik@pobox.com>

<torvalds@ppc970.osdl.org>
	Revert recent ext3_dx_readdir changes
	
	They turn out to be buggy, and result in the same filename being
	reported twice when htree directory indexing is enabled.
	
	Thanks for Kris Karas for helping chase it down. Also reported
	by Holger Kiehl.
	
	Cset exclude: akpm@osdl.org[torvalds]|ChangeSet|20041108040801|49372

<mitch@sfgoth.com>
	[IPV4]: Do not use udp_poll for RAW sockets.
	
	Signed-off-by: Mitchell Blank Jr <mitch@sfgoth.com>
	Signed-off-by: David S. Miller <davem@davemloft.net>

<kaber@trash.net>
	[PKT_SCHED]: Fix hard freeze with QoS in 2.6.10-rc3
	
	The problem is in tcf_action_copy_stats, it assumes a->priv has
	the same layout as struct tcf_act_hdr, which is not true for
	struct tcf_police. This patch rearranges struct tcf_police to
	match tcf_act_hdr.
	
	Signed-off-by: Patrick McHardy <kaber@trash.net>
	Signed-off-by: David S. Miller <davem@davemloft.net>

<torvalds@ppc970.osdl.org>
	Revert isolcpus option fix, pending better fix from Nick.
	
	The real bug was in the debugging code, not the actual domain data
	structure setup.
	
	Cset exclude: sivanich@sgi.com[torvalds]|ChangeSet|20041207160443|30564

<piggin@cyberone.com.au>
	[PATCH] Fix broken domain debugging (aka "isolcpus option broken")
	
	Fix an oops in sched_domain_debug when using the isolcpus= option.
	
	Also move a debug check for validating groups into the "for-each-group"
	loop, where it should be.
	
	Signed-off-by: Nick Piggin <nickpiggin@yahoo.com.au>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<yoshfuji@linux-ipv6.org>
	[IPV6]: Fix check if we're a router.
	
	Signed-off-by: Hideaki YOSHIFUJI <yoshfuji@linux-ipv6.org>
	Signed-off-by: David S. Miller <davem@davemloft.net>

<davem@nuts.davemloft.net>
	[IPV4]: Do not leak IP options.
	
	If the user makes ip_cmsg_send call ip_options_get
	multiple times, we leak kmalloced IP options data.
	
	Noticed by Georgi Guninski.
	
	Signed-off-by: David S. Miller <davem@davemloft.net>

<herbert@gondor.apana.org.au>
	[NET]: Fix CMSG validation checks wrt. signedness.
	
	Noticed by Georgi Guninski.
	
	Signed-off-by: Herbert Xu <herbert@gondor.apana.org.au>
	Signed-off-by: David S. Miller <davem@davemloft.net>

<davem@nuts.davemloft.net>
	[NET]: CMSG compat code needs signedness fixes too.
	
	Signed-off-by: David S. Miller <davem@davemloft.net>

<kaber@trash.net>
	[NETFILTER]: Fix memory leak in ip_conntrack_ftp
	
	Signed-off-by: Patrick McHardy <kaber@trash.net>
	Signed-off-by: David S. Miller <davem@davemloft.net>

<davem@nuts.davemloft.net>
	[SPARC]: asm/mostek.h needs asm/io.h
	
	Noticed by Bob Breuer.
	
	Signed-off-by: David S. Miller <davem@davemloft.net>

<jt@hpl.hp.com>
	[IRDA]: Try to fix the worst abuse of the pci init code in via_ircc
	
	Bugfix suggested by Arkadiusz Miskiewicz.
	
	Signed-off-by: Jean Tourrilhes <jt@hpl.hp.com>
	Signed-off-by: David S. Miller <davem@davemloft.net>

<jt@hpl.hp.com>
	[IRDA]: Use kill_urb() in stir4200
	
	USB changed behaviour of unlink_urb so that it gives warning and backtrace when
	being used synchronously. The correct current behaviour is to us kill_urb
	in that case.
	
	Original patch from Stephen Hemminger
	
	Signed-off-by: Stephen Hemminger <shemminger@osdl.org>
	Signed-off-by: Jean Tourrilhes <jt@hpl.hp.com>
	Signed-off-by: David S. Miller <davem@davemloft.net>

<jt@hpl.hp.com>
	[IRDA]: Use kill_urb() in irda-usb
	
	* change comment about Sigmatel now that there is a driver
	* convert to new module_param
	* places where urb is unlinked synchronously, use usb_kill_urb
	  because that is now a runtime warning.
	
	Original patch from Stephen Hemminger
	
	Signed-off-by: Stephen Hemminger <shemminger@osdl.org>
	Signed-off-by: Jean Tourrilhes <jt@hpl.hp.com>
	Signed-off-by: David S. Miller <davem@davemloft.net>

<kaber@trash.net>
	[PKT_SCHED]: Fix oops in ipt action error path.
	
	This patch fixes an oops when the ipt action is used with a
	non-existant iptables target. It tries to log
	t->u.kernel.target->name, u.kernel.target is part of a union
	and as long as the target wasn't successfully loaded contains
	the name of the target, using it as a pointer results in a
	crash.
	
	Signed-off-by: Patrick McHardy <kaber@trash.net>
	Signed-off-by: David S. Miller <davem@davemloft.net>

<shemminger@osdl.org>
	[PKT_SCHED]: netem forgets to restart device after inserting packets
	
	The version of netem in 2.6.10 moves packets from the delayed queue
	to the qdisc in a timer interrupt. But it forgot to force the device to
	pick them up.
	
	Signed-off-by: Stephen Hemminger <shemminger@osdl.org>
	Signed-off-by: David S. Miller <davem@davemloft.net>

<davem@nuts.davemloft.net>
	[SPARC64]: Update defconfig.
	
	Signed-off-by: David S. Miller <davem@davemloft.net>

<jurij@woodyd.org>
	[SUNSAB]: Fix serial break handling.
	
	We forget to check the BRK condition in
	the interrupt status register when deciding
	to call receive_chars() or not, which is where
	BRK handling occurs.
	
	Signed-off-by: David S. Miller <davem@davemloft.net>

<solar@openwall.com>
	[TCP]: Missing KERN_INFO in remotely triggerable printk.
	
	Signed-off-by: David S. Miller <davem@davemloft.net>

<davem@nuts.davemloft.net>
	[IPV6]: Do not use udp_poll for RAW sockets.
	
	Signed-off-by: David S. Miller <davem@davemloft.net>

<wensong@linux-vs.org>
	[IPVS] add a sysctl variable to expire quiescent template
	
	The patch is from Horms <horms@vergenet.net>
	
	Signed-off-by: Horms <horms@verge.net.au>
	Signed-off-by: David S. Miller <davem@davemloft.net>

<davem@nuts.davemloft.net>
	[SPARC]: Adjust 32-bit ELF_ET_DYN_BASE.
	
	We were using 0x08000000 instead of TASK_UNMAPPED_BASE
	so that running something like "/lib/ld-linux.so.2 emacs"
	would work.
	
	The issue there was that wherever /lib/ld-linux.so.2 gets
	mapped (controlled by ELF_ET_DYN_BASE), that is where the
	BSS start for the process ends up.  Now, emacs allocates
	dynamic memory for LISP objects from the BSS, and needs
	the top 4 bits of the virtual address to be clear so that
	it can encode LISP type and GC marking information there.
	
	But making this obscure emacs case work breaks lots of other
	stuff.  For example, programs with a reasonably large data
	section fail to load via direct ld.so interpreter execution
	because the data section is large enough to begin overlapping
	with the ELF_ET_DYN_BASE area.
	
	The /lib/ld-linux.so.2 emacs case does not work on a lot of
	platforms due to this issue, including i386, so it is not
	worth making work on sparc either.  It is indeed useful
	sometimes when debugging a new experimental build of glibc
	for example, but people doing that can hack the value of
	ELF_ET_DYN_BASE in their kernels.  Perhaps at some point
	we will make a sysctl controllable value.
	
	Signed-off-by: David S. Miller <davem@davemloft.net>

<eradicator@gentoo.org>
	[SPARC]: Make some asm headers more userland friendly.
	
	Signed-off-by: David S. Miller <davem@davemloft.net>

<pisa@cmp.felk.cvut.cz>
	[PATCH] VM86 interrupt emulation fix
	
	Fixes faulty IRQ_NONE value returning by VM86 irq_handler().
	
	The IRQ source is blocked as well until userspace confirms processing.
	This should enable to use VM86 code even for level triggered interrupt
	sources. 
	
	Signed-off-by: Pavel Pisa <pisa@cmp.felk.cvut.cz>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<rddunlap@osdl.org>
	[PATCH] PCI/x86-64: build with PCI=n
	
	Fix (most of) x64-64 kernel build for CONFIG_PCI=n.  Fixes these 2 errors:
	
	1. arch/x86_64/kernel/built-in.o(.text+0x8186): In function `quirk_intel_irqbalance':
	: undefined reference to `raw_pci_ops'
	
	Kconfig change:
	2. arch/x86_64/kernel/pci-gart.c:194: error: `pci_bus_type' undeclared (first use in this function)
	
	Still does not fix this one:
	drivers/built-in.o(.text+0x3dcd8): In function `pnpacpi_allocated_resource':
	: undefined reference to `pcibios_penalize_isa_irq'
	
	Signed-off-by: Randy Dunlap <rddunlap@osdl.org>
	Signed-off-by: Greg Kroah-Hartman <greg@kroah.com>

<stern@rowland.harvard.edu>
	[PATCH] USB UHCI: minor bugfix for port resume
	
	This patch fixes two small problems in the port suspend/resume handling
	for the UHCI driver.  There were a couple of spots where I neglected to
	store I/O addresses in unsigned _long_ variables (required for 64-bit
	architectures).  And it turns out the host controller will continue to
	indicate a resume is in progress for a few microseconds after it has been
	turned off, so an extra delay is needed.
	
	
	Signed-off-by: Alan Stern <stern@rowland.harvard.edu>
	Signed-off-by: Greg Kroah-Hartman <greg@kroah.com>

<david-b@pacbell.net>
	[PATCH] USB: EHCI qh update race fix
	
	This makes the EHCI driver stop trying to update a live QH ... it's
	not like OHCI, that can't be done safely because of a hardware race.
	The fix:
	
	    - Unlinks the QH before updating it; only the tail can safely be
	      updated "live", not the queue head.  The async schedule (all
	      control/bulk QHs) and periodic schedule (interrupt QH) work a
	      bit differently ... high bandwidth transfers will hiccup.
	
	    - Moves "update QH" and "clear toggle" logic into one new
	      qh_refresh() routine, used in several places.
	
	The race shows readily enough under load with the right hardware.
	The controller silicon might be relatively slow, or maybe it's the
	bus that's slow/busy:
	
		Host			Controller
		---			----------
					reads two TD pointers
		update two TD pointers
		wmb()
		activate QH
					reads rest of QH
	
	Net result is that the HC treated old TD pointers as valid, and things
	started misbehaving.  Busy controllers would misbehave worse; some systems
	wouldn't notice more than a slowdown, especially with light USB loads.
	
	This affects behavior in two cases.  The uncommon one is when an endpoint
	gets an error and halts.  The more common one happens when the controller
	runs off the end of its queue and overlays an inactive "dummy" TD into
	the QH ... something the spec says shouldn't happen, but which more
	silicon seems to be doing.  (Presumably to reduce DMA chatter.)
	
	Signed-off-by: David Brownell <dbrownell@users.sourceforge.net>
	Signed-off-by: Greg Kroah-Hartman <greg@kroah.com>

<bunk@stusta.de>
	[PATCH] USB uhci-debug.c: remove an unused function (fwd)
	
	The patch below removes an unused function from
	drivers/usb/host/uhci-debug.c
	
	
	Signed-off-by: Adrian Bunk <bunk@stusta.de>
	Acked-by: Alan Stern <stern@rowland.harvard.edu>
	Signed-off-by: Greg Kroah-Hartman <greg@kroah.com>

<david-b@pacbell.net>
	[PATCH] USB: OHCI "resume"/smp fix
	
	I noticed an SMP deadlock when connecting devices to
	an autosuspended root hub.
	
	This fix just makes the OHCI hub status reporting logic (used
	exclusively by khubd) be a NOP until after the worker task
	(keventd) finishes resuming the port, so they can't deadlock.
	
	Signed-off-by: David Brownell <dbrownell@users.sourceforge.net>
	Signed-off-by: Greg Kroah-Hartman <greg@kroah.com>

<david-b@pacbell.net>
	[PATCH] USB: sl811-hcd driver, replaces hc_sl811
	
	This patch provides a new "sl811-hcd" driver, which should replace the older
	one from Cypress (which has been broken for ages, even on SA-1100).
	
	Key features of this new driver:
	
	 - Small, relatively tight code;
	 - Uses the 2.6 platform_device and usbcore HCD infrastructures;
	 - Compiles (x86, ARM) and works (ARM/PXA255);
	 - Passed a day's worth of "usbtest" stress testing (on 2.6.9).
	
	I've enumerated over a dozen different devices with it, and actually tested
	mice, hubs, keyboards, and usb-storage.  There's a hardware erratum that
	prevents this chip from working with certain external hubs.  There's scope
	yet for some performance work here; and some IRQ quirks linger.
	
	This PIO-only driver should serve as a model for some other non-DMA USB host
	controllers (like isp1161, isp1362, td243) used in embedded Linuxes ... in
	particular, showing how to maintain async and periodic schedules without
	pointless emulation of OHCI DMA queues and/or registers.
	
	The driver should handle ISO, but since it doesn't implement the special
	urb->iso_frame_desc[] "pseudo-queue" model (and since Linux can't guarantee
	low enough IRQ latencies!), ISO is disabled.
	
	Signed-off-by: David Brownell <dbrownell@users.sourceforge.net>
	Signed-off-by: Greg Kroah-Hartman <greg@kroah.com>

<greg@kroah.com>
	USB: fix sparse warnings in sl811-hcd driver.
	
	Signed-off-by: Greg Kroah-Hartman <greg@kroah.com>

<greg@kroah.com>
	USB: fix sparse warning in ehci-hcd driver.
	  
	Signed-off-by: Greg Kroah-Hartman <greg@kroah.com>

<greg@kroah.com>
	USB: removed unused hc_sl811 driver from the tree
	  
	Signed-off-by: Greg Kroah-Hartman <greg@kroah.com>

<greg@kroah.com>
	USB: fix obvious build error in hc_chrisv10.c driver
	
	Signed-off-by: Greg Kroah-Hartman <greg@kroah.com>

<nacc@us.ibm.com>
	[PATCH] USB: add wake-up for waitqueues in usbfs_remove_file() to fix bug 387
	
	Description: Bug 387 (http://bugzilla.kernel.org/show_bug.cgi?id=387)
	is fixed by the attached patch, which sends waitqueue wake-ups to all
	the appropriate wait-queue entries when a device is removed from
	the system.
	
	Signed-off-by: Nishanth Aravamudan <nacc@us.ibm.com>
	Signed-off-by: Greg Kroah-Hartman <greg@kroah.com>

<greg@kroah.com>
	USB: fix another sparse warning in the USB core
	
	Signed-off-by: Greg Kroah-Hartman <greg@kroah.com>

<sfrench@sambaltcdom.austin.ibm.com>
	[CIFS] Check right mid state on hung network responses.  Fix remote 
	dnotify to be disabled by default. Fix dnotify endianness.
	
	Signed-off-by: Steve French (sfrench@us.ibm.com)

<ben-linux@org.rmk.(none)>
	[ARM PATCH] 2299/1: S3C2410 - pm debug patch
	
	Patch from Ben Dooks
	
	If CONFIG_S3C2410_PM_CHECK is set and CONFIG_S3C2410_PM_DEBUG is
	not set, then the pm.c file will not build as uart_save[] is not
	defined.
	
	Signed-off-by: Dimitry Andric
	
	Signed-off-by: Ben Dooks
	Signed-off-by: Russell King

<dvrabel@com.rmk.(none)>
	[ARM PATCH] 2300/1: IXP4xx: remove minor type mismatch warnings
	
	Patch from David Vrabel
	
	Remove some minor type mismatch warnings from some IXP4xx specific code.
	
	Signed-off-by: David Vrabel
	Signed-off-by: Russell King

<nico@org.rmk.(none)>
	[ARM PATCH] 2301/1: fix PXA definition of PSSR_OTGPH
	
	Patch from Nicolas Pitre
	
	Signed-off-by: Nicolas Pitre
	Signed-off-by: Russell King

<stevef@smfhome.smfdom>
	[CIFS] Do not block on FindNotify response
	
	Signed-off-by: Steve French (sfrench@us.ibm.com)

<torvalds@ppc970.osdl.org>
	Make sure VC resizing fits in s16.
	
	Noted by Georgi Guninski

<bzolnier@trik.(none)>
	[ide] remove PLEXTOR CD-R PX-W8432T from the DMA blacklist
	
	Reported to work OK by Junio C Hamano <junkio@cox.net>,
	DervishD <lkml@dervishd.net> and Anton <_xman_@mail.ru>.
	
	Fixes bugzilla bug #3730.
	
	Signed-off-by: Bartlomiej Zolnierkiewicz <bzolnier@gmail.com>

<torvalds@ppc970.osdl.org>
	Clean up open_exec()/kmalloc() error case handling.
	
	It's a purely theoretical bug, since the kmalloc() failure that
	might "leak" file descriptors cannot actually happen (we do not
	ever fail small GFP_KERNEL allocations), but it's good to do
	things properly.
	
	Noted by Brad Spender.

<bzolnier@trik.(none)>
	[ide] remove SAMSUNG CD-ROM SC-148F from the DMA blacklist
	
	Reported to work OK by Alexander E. Patrakov <patrakov@ums.usu.ru>.
	
	Signed-off-by: Bartlomiej Zolnierkiewicz <bzolnier@gmail.com>

<bzolnier@trik.(none)>
	[ide] pdc202xx_old: fix cable detection
	
	pdc202xx_old_cable_detect() always returns '0' (which means 80c cable)
	due to a sloppy coding - result of CIS & mask is truncated to 8 bits
	although CIS holds cable info in bits 10-11.
	
	Signed-off-by: Bartlomiej Zolnierkiewicz <bzolnier@gmail.com>

<bzolnier@trik.(none)>
	[ide] atiixp: add new PCI identifier
	
	From: Pascal Lengard <lklm@lengard.net>
	Signed-off-by: Bartlomiej Zolnierkiewicz <bzolnier@gmail.com>

<bzolnier@trik.(none)>
	[ide] alim15x3: add support for ULi M5228
	
	From: Clear Zhang <Clear.Zhang@uli.com.tw>
	Signed-off-by: Bartlomiej Zolnierkiewicz <bzolnier@gmail.com>

<bzolnier@trik.(none)>
	[ide] ide-cd: fix possible race in PIO mode
	
	From: Alan Cox <alan@lxorguk.ukuu.org.uk>
	
	When we issue an ide command the status bits don't become valid for
	400nS. In the DMA case ide_execute_command handles this but in the PIO
	case we don't do the needed locking, use OUTBSYNC to avoid posting or
	delay. This means that in some situations we can execute the command
	handler in PIO mode before the command status bits are valid and the
	handler may read and act wrongly.
	
	Signed-off-by: Bartlomiej Zolnierkiewicz <bzolnier@gmail.com>

<bzolnier@trik.(none)>
	[ide] final polish on disk ioctl documentation
	
	From: Edward Falk <efalk@google.com>
	Signed-off-by: Bartlomiej Zolnierkiewicz <bzolnier@gmail.com>

<sfrench@sambaltcdom.austin.ibm.com>
	[CIFS] Allow peek to return less than smb header so we do not prematurely kill session to server when 
	socket stack is busy.
	
	Signed-off-by: Steve French (sfrench@us.ibm.com)

<bjorn.helgaas@hp.com>
	[IA64] Document serial device names on ia64
	
	Document how Linux/ia64 names serial devices and how to use them
	as console devices.
	
	Signed-off-by: Bjorn Helgaas <bjorn.helgaas@hp.com>
	Signed-off-by: Tony Luck <tony.luck@intel.com>

<bzolnier@trik.(none)>
	[ide] fix creating of /proc/ide/ entries for legacy VLB modules
	
	Signed-off-by: Bartlomiej Zolnierkiewicz <bzolnier@gmail.com>

<tony.luck@intel.com>
	[IA64] delete offsets.h in mrproper, not in clean rule
	
	Patch from Tigran Aivazian:
	On IA64 architecture the "make clean" does not correspond to its
	definition:
	
	# make clean     Delete most generated files
	#                Leave enough to build external modules
	
	because it deletes include/asm-ia64/offsets.h file which can easily be
	included by a module, e.g. via this header path:
	
	In file included from include/linux/thread_info.h:21,
	from include/linux/spinlock.h:12,
	from include/linux/capability.h:45,
	from include/linux/sched.h:7,
	from include/asm/uaccess.h:37,
	
	So the fix is to remove this file from CLEAN_FILES and add it to
	MRPROPER_FILES, so that it is NOT removed by "make clean" and removed by
	"make mrproper".
	
	Signed-off-by: Tony Luck <tony.luck@intel.com>

<rmk@flint.arm.linux.org.uk>
	[ARM] Add platform-based IrDA device support.
	
	Move the platform specific IrDA support code out of sa1100_ir into
	the platform support files.  This allows sa1100_ir to build again.

<bzolnier@trik.(none)>
	[ide] remove obsolete comment from ide-probe.c
	
	Signed-off-by: Bartlomiej Zolnierkiewicz <bzolnier@gmail.com>

<kadlec@blackhole.kfki.hu>
	[NETFILTER]: TCP window tracking bug fixes.
	
	1) Name IP_CT_TCP_STATE_FLAG_WINDOW_SCALE more consistently.
	2) Client sends SYN, server responds with SYN/ACK.  However
	   the SYN/ACK is lost in transit and the client keeps
	   sending the SYNs.  The server times out, restarts, and
	   sends SYN/ACK with new sequence numbers.  Those packets
	   were however erroneously dropped by the window tracking code.
	3) NFS client and server, client crashes and connects to the
	   server from the same port as before the crash.  Server
	   thinks the connection is still alove and sends an ACK,
	   client responds with a RST and tears down the connection
	   so that it can start a new one.  That was not handled by
	   the previous code.
	4) Occasionally the window tracking code logged BUG lines due
	   to a leftover ack instead of sack in the logging part.
	
	Signed-off-by: Jozsef Kadlecsik <kadlec@blackhole.kfki.hu>
	Signed-off-by: Patrick McHardy <kaber@trash.net>
	Signed-off-by: David S. Miller <davem@davemloft.net>

<rmk@flint.arm.linux.org.uk>
	[ARM] Add resources for sa11x0ir device.

<bunk@stusta.de>
	[PATCH] scsi/qla2xxx/qla_rscn.c: remove unused functions
	
	The patch below removes two unused functions from
	drivers/scsi/qla2xxx/qla_rscn.c
	
	Signed-off-by: Adrian Bunk <bunk@stusta.de>
	Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

<jejb@mulgrave.(none)>
	megaraid: fix a bug in kioc dma buffer deallocation
	
	From: 	Bagalkote, Sreenivas <sreenib@lsil.com>
	
	Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

<markh@osdl.org>
	[PATCH] aacraid: 2.6 fix panic on module removal
	
	This patch moves the list_del before the host data is freed up.  The aac
	struct is invalid once scsi_host_put is called.
	
	Signed-off-by: Mark Haverkamp <markh@osdl.org>
	Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

<axboe@suse.de>
	[PATCH] hack imm.c to work in highmem machines
	
	Currently imm uses page_address() which can crash on highmem. It's not
	directly doable to map the pages properly, at least not without
	changing some code. In lack of a ->bounce_highio member in the scsi
	host template, just set ->unchecked_isa_dma which will just bounce
	everything for us. imm isn't performance critical by any stretch of
	the imagination, so...
	
	Usually I'd not encourage such a silly hack, but in lack of hardware for
	testing (who has it??), this should suffice as it is obviously correct.
	
	Signed-off-by: Jens Axboe <axboe@suse.de>
	Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

<James.Bottomley@steeleye.com>
	[PATCH] Fix cable pull problem with USB storage
	
	Pulling a USB cable on mounted media gives the following oops:
	
	SCSI error: host 4 id 0 lun 0 return code = 4000000
	        Sense class 0, sense error 0, extended sense 0
	Unable to handle kernel NULL pointer dereference at virtual address
	00000008
	 printing eip:
	c021ed03
	*pde = 1707e001
	Oops: 0000 [#1]
	SMP
	Modules linked in: nls_utf8(U) sr_mod(U) usb_storage(U) ehci_hcd(U)
	ohci_hcd(U) mga(U) md5(U) ipv6(U) parport_pc(U) lp(U) parport(U) i2c_dev
	(U) i2c_core(U) nfs(U) lockd(U) sunrpc(U) tg3(U) ext3(U) jbd(U)
	sata_promise(U) libata(U) aic7xxx(U) sd_mod(U) scsi_mod(U)
	CPU:    1
	EIP:    0060:[<c021ed03>]    Not tainted VLI
	EFLAGS: 00210046   (2.6.9-prep)
	EIP is at cfq_insert_request+0x45/0xdf
	eax: c175c808   ebx: d7f728b0   ecx: 00000001   edx: d7f728b0
	esi: 00000001   edi: 00000000   ebp: 00000000   esp: c4b42dac
	ds: 007b   es: 007b   ss: 0068
	Process umount (pid: 4021, threadinfo=c4b42000 task=c6cd26c0)
	Stack: c175c808 c175c808 00000001 d7f728b0 00000001 c0215c86 00000001
	d7f728b0
	       c175c808 c0217b7e 00000000 00200202 c175c808 dead4ead d7f72800
	c4b42e80
	       d885a150 d7f72800 00000000 c4b42e10 d885a324 00000002 d885a27b
	00001388
	Call Trace:
	 [<c0215c86>] __elv_add_request+0x3c/0x71
	 [<c0217b7e>] blk_insert_request+0x6f/0xa1
	 [<d885a150>] scsi_insert_special_req+0x20/0x26 [scsi_mod]
	 [<d885a324>] scsi_wait_req+0x57/0x8c [scsi_mod]
	 [<d885a27b>] scsi_wait_done+0x0/0x52 [scsi_mod]
	 [<c02c433a>] __cond_resched+0x14/0x39
	 [<d89ba113>] sr_do_ioctl+0x83/0x1fe [sr_mod]
	 [<d89b9e9b>] sr_packet+0x1a/0x1f [sr_mod]
	 [<c024797e>] cdrom_get_disc_info+0x3e/0x7b
	 [<c02444cd>] cdrom_mrw_exit+0xd/0x4a
	 [<c01b4c59>] kref_put+0x42/0x45
	 [<c01b49b3>] kobject_release+0x0/0x8
	 [<c0244201>] unregister_cdrom+0x7d/0xa1
	 [<d89b9ed4>] sr_kref_release+0x34/0x4c [sr_mod]
	 [<d89b9ea0>] sr_kref_release+0x0/0x4c [sr_mod]
	 [<c01b4c59>] kref_put+0x42/0x45
	 [<d89b96c3>] sr_block_release+0x59/0x6d [sr_mod]
	 [<c015c448>] blkdev_put+0x8d/0x18f
	 [<c015a768>] deactivate_super+0x5b/0x70
	 [<c016d677>] sys_umount+0x65/0x6c
	 [<c014b029>] unmap_vma_list+0xe/0x17
	 [<c014b363>] do_munmap+0x129/0x137
	 [<c016d689>] sys_oldumount+0xb/0xe
	 [<c02c5d1f>] syscall_call+0x7/0xb
	
	The problem is caused because the object tying of the upper device
	reference and lower device reference is released in the wrong order
	(yes, this is my fault).  Releasing an upper driver can generate I/O
	which is a bit of a problem if you already dropped the last reference to
	the scsi_device.
	
	Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

<rmk@flint.arm.linux.org.uk>
	[ARM] Fix compiler warning for set_speed irda method.

<stevef@smfhome.smfdom>
	Add support for module init parms for number of small and large cifs network
	buffers and for maximum number of simultaneous requests.  Fix directio of 
	userbuffers to use copy_to_user.
	
	Signed-off-by: Steve French (sfrench@us.ibm.com)

<sfrench@sambaltcdom.austin.ibm.com>
	[CIFS] remove sparse warning
	
	Signed-off-by: Steve French (sfrench@us.ibm.com)

<sfrench@sambaltcdom.austin.ibm.com>
	[CIFS] Remove sparse warning in use of cifs_write function
	
	Signed-off-by: Steve French (sfrench@us.ibm.com)

<torvalds@ppc970.osdl.org>
	x86 sysenter: clear %ebp on exit.
	
	It contains the thread info pointer. That's not something that
	user mode can really use for anything interesting, but it's also
	not something that user mode should ever really see.
	
	Pointed out by Brad Spender as being in PaX.

<bunk@stusta.de>
	[PATCH] fm801_gp_probe: fix use after free
	
	The patch below by "Petri T. Koistinen" <petri.koistinen@iki.fi> in
	Rusty's trivial patches is IMHO a candidate for 2.6.10 .
	
	
	Signed-off-by: Adrian Bunk <bunk@stusta.de>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<gwehrman@sgi.com>
	[XFS] Add xfs_rotorstep sysctl for controlling placement of extents for
	new files by the inode32 allocator.
	
	SGI-PV: 912624
	SGI-Modid: xfs-linux:xfs-kern:181032a
	Signed-off-by: Geoffrey Wehrman <gwehrman@sgi.com>
	Signed-off-by: Nathan Scott <nathans@sgi.com>

<jpk@sgi.com>
	[XFS] Allow the option of skipping quotacheck processing.
	
	SGI-PV: 922332
	SGI-Modid: xfs-linux:xfs-kern:181416a
	Signed-off-by: John Keller <jpk@sgi.com>
	Signed-off-by: Nathan Scott <nathans@sgi.com>

<hch@sgi.com>
	[XFS] remove useless S_ISREG check in ->mmap and ->mprotect
	
	SGI-PV: 923607
	SGI-Modid: xfs-linux:xfs-kern:181620a
	Signed-off-by: Christoph Hellwig <hch@sgi.com>
	Signed-off-by: Nathan Scott <nathans@sgi.com>

<hch@sgi.com>
	[XFS] split pagebuf_get into xfs_buf_get_flags and xfs_buf_read_flags.
	
	SGI-PV: 923980
	SGI-Modid: xfs-linux:xfs-kern:181653a
	Signed-off-by: Christoph Hellwig <hch@sgi.com>
	Signed-off-by: Nathan Scott <nathans@sgi.com>

<hch@sgi.com>
	[XFS] handle inode creating race
	
	SGI-PV: 921072
	SGI-Modid: xfs-linux:xfs-kern:181657a
	Signed-off-by: Christoph Hellwig <hch@sgi.com>
	Signed-off-by: Nathan Scott <nathans@sgi.com>

<hch@sgi.com>
	[XFS] call the right function in pagebuf_readahead
	
	SGI-PV: 923980
	SGI-Modid: xfs-linux:xfs-kern:181871a
	Signed-off-by: Christoph Hellwig <hch@sgi.com>
	Signed-off-by: Nathan Scott <nathans@sgi.com>

<sandeen@sgi.com>
	[XFS] Wait for all async buffers to complete before tearing down the
	filesystem at umount time
	
	SGI-PV: 901236
	SGI-Modid: xfs-linux:xfs-kern:182694a
	Signed-off-by: Eric Sandeen <sandeen@sgi.com>
	Signed-off-by: Nathan Scott <nathans@sgi.com>

<tes@sgi.com>
	[XFS] xfs reservation issues with xlog_sync roundoff
	
	SGI-PV: 922265
	SGI-Modid: xfs-linux:xfs-kern:20222a
	Signed-off-by: Tim Shimmin <tes@sgi.com>
	Signed-off-by: Nathan Scott <nathans@sgi.com>

<nathans@sgi.com>
	[XFS] Low memory allocation improvements (quietness and blockdev
	congestion checks).
	
	SGI-PV: 914873
	SGI-Modid: xfs-linux:xfs-kern:20564a
	Signed-off-by: Miquel van Smoorenburg <miquels@cistron.net>
	Signed-off-by: Nathan Scott <nathans@sgi.com>

<nathans@sgi.com>
	[XFS] Mark several functions as being static.
	
	SGI-PV: 904196
	SGI-Modid: xfs-linux:xfs-kern:20565a
	Signed-off-by: Adrian Bunk <bunk@stusta.de>
	Signed-off-by: Nathan Scott <nathans@sgi.com>

<sfrench@sambaltcdom.austin.ibm.com>
	[CIFS] Fix CIFS_MAX_MSGSIZE so it can be configured at module_install time,
	allowing buffer size to be changed
	
	Signed-off-by: Steve French (sfrench@us.ibm.com)

<paulus@samba.org>
	[PATCH] ppc64: make sure lppaca doesn't cross page boundary
	
	This patch is from Will Schmidt <willschm@us.ibm.com>, with some extra
	comments from me.
	
	On iSeries and on POWER5 machines, there is a data structure which is
	used for communication between the hypervisor and the kernel, called
	the `lppaca'.  The kernel tells the hypervisor where it is, and the
	hypervisor requires that it doesn't cross a page boundary.  With other
	changes in the last few months we have ended up with a situation where
	it could cross a page boundary.  This patch increases the alignment
	requirement for the struct to make sure that it can't cross a page
	boundary.
	
	This is a bug fix and should go into 2.6.10.
	
	Signed-off-by:  Will Schmidt  <willschm@us.ibm.com>
	Signed-off-by:  Paul Mackerras <paulus@samba.org>
	Signed-off-by:  Linus Torvalds <torvalds@osdl.org>

<axboe@suse.de>
	[PATCH] highmem.c: fix bio error propagation
	
	Found a subtle bug that caused mount errors on a SATA drive with
	barriers on reiser and ext3, where it should have recovered and just
	turned off barriers. The problem is that the EOPNOTSUPP error isn't
	being propagated properly to the bounced bio. This patch fixes that by
	correctly passing error all the way down.
	
	Signed-off-by: Jens Axboe <axboe@suse.de>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<paulus@samba.org>
	[PATCH] ppc64: make UP kernel run on POWER4 logical partition
	
	Recently I tried booting a UP kernel on a 1-processor logical partition on
	a POWER4 system.  It failed because the CPU we happened to be running on
	was CPU 2, but hard_smp_processor_id() is defined to 0 for !CONFIG_SMP. 
	(Note that this code runs quite early, as part of init_IRQ, so
	hard_smp_processor_id() should be the physical ID of the boot cpu.)
	
	This patch does a minimal fix to make it work.  I think this patch should
	go in 2.6.10.  Ultimately I think the hard_smp_processor_id() definition
	should be removed from include/linux/smp.h, but that carries a risk of
	breaking other architectures and probably shouldn't be done pre 2.6.10.
	
	Signed-off-by: Paul Mackerras <paulus@samba.org>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<akpm@osdl.org>
	[PATCH] direct-io: set PF_SYNCWRITE
	
	We need to set the PF_SYNCWRITE when performing direct-io writes.  Otherwise
	the anticipatory scheduler exhibits bad read-starves-write problems.
	
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<david-b@pacbell.net>
	[PATCH] reduce ext3 log spamming (blank lines)
	
	When drives go offline, e.g.  usb-storage disconnect, the upper layers
	don't behave very intelligently yet: ext3 over scsi keeps retrying reads,
	logging three lines for each error:
	
	10:58:31  scsi0 (0:0): rejecting I/O to dead device
	10:58:31  EXT3-fs error (device sda1): ext3_find_entry: reading directory #18089296 offset 0
	10:58:31 
	10:59:47  EXT3-fs error (device sda1): ext3_find_entry: reading directory #18089296 offset 0
	
	This patch shrinks that log spam by the trivial third, getting rid of those
	needless blank lines.  It's not clear to me why the "no such device" errors
	don't immediately make ext3 (or is it the block layer?) give up ...  maybe
	someone else can make Linux not retry after those errors.
	
	Signed-off-by: David Brownell <dbrownell@users.sourceforge.net>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<akpm@osdl.org>
	[PATCH] do_task_stat() use pid_alive()
	
	Use pid_alive() rather than testing for a zero value of ->pid.  Is the right
	thing to do and addresses an oops dereferencing real_parent which one person
	reported.
	
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<heiko.carstens@de.ibm.com>
	[PATCH] fix ext2/ext3 memory leak
	
	The patch below fixes an ext2/ext3 memory leak: the *_fill_super functions
	allocate percpu data structures but don't free them in *_put_super.
	
	Signed-off-by: Heiko Carstens <heiko.carstens@de.ibm.com>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<kraxel@bytesex.org>
	[PATCH] uml: ramdisk config fix
	
	ObviouslyCorrect[tm] buildfix ;)
	
	Signed-off-by: Gerd Knorr <kraxel@bytesex.org>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<hugh@veritas.com>
	[PATCH] shmctl SHM_LOCK perms
	
	Michael Kerrisk has observed that at present any process can SHM_LOCK any
	shm segment of size within process RLIMIT_MEMLOCK, despite having no
	permissions on the segment: surprising, though not obviously evil.  And any
	process can SHM_UNLOCK any shm segment, despite no permissions on it: that
	is surely wrong.
	
	Unless CAP_IPC_LOCK, restrict both SHM_LOCK and SHM_UNLOCK to when the
	process euid matches the shm owner or creator: that seems the least
	surprising behaviour, which could be relaxed if a need appears later.
	
	Signed-off-by: Hugh Dickins <hugh@veritas.com>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<hugh@veritas.com>
	[PATCH] VmLib wrapped: executable brk
	
	In some cases /proc/<pid>/status shows VmLib: 42949..... kB.
	
	If READ_IMPLIES_EXEC then the break area is VM_EXEC, but omitted from
	exec_vm since do_brk contains no __vm_stat_account call.  Later munmaps
	count its pages out of exec_vm, hence (exec_vm - VmExe) can go negative.
	
	do_brk is right not to call __vm_stat_account, its pages shouldn't need to
	be counted.  What's wrong is that __vm_stat_account is counting all the
	VM_EXEC pages, whereas (to mimic 2.4 and earlier 2.6) it should be leaving
	VM_WRITE areas and non-vm_file areas out of exec_vm.
	
	VmLib may still appear larger than before - where a READ_IMPLIES_EXEC
	personality makes what was a readonly mapping of a file now executable e.g.
	 /usr/lib/locale stuff.  And a program which mprotects its own text as
	writable will appear with wrapped VmLib: sorry, but while it's worth
	showing ordinary programs as ordinary, it's not worth much effort to avoid
	showing odd ones as odd.
	
	Signed-off-by: Hugh Dickins <hugh@veritas.com>
	Acked-by: William Lee Irwin III <wli@holomorphy.com>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<hugh@veritas.com>
	[PATCH] VmLib wrapped: mprotect flags
	
	Sometimes /proc/<pid>/status shows VmLib: 42949..... kB.
	
	mprotect_fixup must note oldflags on entry: if vma_merge is successful,
	vma->vm_flags afterwards may be either the oldflags or the newflags, and
	the extent of the change will be less than the extent of the vma.
	
	And let's use unsigned long for these flags throughout.
	
	Signed-off-by: Hugh Dickins <hugh@veritas.com>
	Acked-by: William Lee Irwin III <wli@holomorphy.com>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<benh@kernel.crashing.org>
	[PATCH] ppc64: Workaround PCI issue on g5
	
	ppc64 has a global called "pci_probe_only" which, when set, prevents the
	arch PCI code from calling pci_assign_unassigned_resources().  This was
	cleared by pmac so far, but a bug in the definition of the variable make
	that ineffective until 2.6.10, and so we never called
	pci_assign_unassigned_resources().
	
	With 2.6.10, that bug was fixed and so we now call it, which results in
	some problems.  Some devices who have perfectly valid assigned addresses by
	firmware end up beeing moved around anyway, which is a BAD thing can can
	break boot on some machines since it breaks the relationship between
	addresses in Open Firmware device-tree and actual location of PCI devices. 
	(Some low level things like the PIC are ioremap'ed based on their OF
	address, way before the PCI based ASIC hosting them has been found).  This
	also break the "offb" default framebuffer driver since the video card ends
	up beeing moved around as well.
	
	For now, the fix is to set pci_probe_only on pmac, thus reverting to the
	old behaviour.  In the long run, it would be interesting to "fix"
	pci_assign_unassigned_resources() so that it does what it's name claims,
	and only assigns things that have been left unassigned instead of moving
	things around gratuituously...
	
	Signed-off-by: Benjamin Herrenschmidt <benh@kernel.crashing.org>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<anton@samba.org>
	[PATCH] ppc64: pSeries shared processor fixes
	
	It turns out there are more issues with our VPA code:
	
	1. vpa_init doesnt report errors when it fails.  This was masking a bug
	   where the VPA spanned 2 pages and phyp failed to register it.
	
	2. We call idle_setup before we initialise the boot cpus vpa.  This
	   means we never select the shared processor idle loop.
	
	3. We dont call vpa_init on UP kernels.
	
	Signed-off-by: Anton Blanchard <anton@samba.org>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<bjorn.helgaas@hp.com>
	[PATCH] Documentation for ia64 serial device name changes
	
	Document how Linux/ia64 names serial devices and how to use them
	as console devices.
	
	Signed-off-by: Bjorn Helgaas <bjorn.helgaas@hp.com>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<trini@kernel.crashing.org>
	[PATCH] Add missing __KERNEL__ (or other) protections
	
	As of 2.6.10-rc3, the following is needed to allow various userland
	packages (sysvinit, dhcp, ppp, libcap, libpcap, lilo) to compile as parts
	that userland needs (e.g.  for ioctls) is in files with stuff userland
	isn't allowed to see.
	
	This adds __KERNEL__ around <linux/ata.h> and some defines (<linux/ata.h>
	isn't needed by userland, and is unhappy right now).  sysvinit and some
	other packages need <linux/hdreg.h> for HDIO_DRIVE_CMD and other IOCTL
	things.  In <linux/types.h> we were unsafely typedef'ing __le64/__be64 as
	__u64 only exists when __GNUC__ && !__STRICT_ANSI__ (causing libcap to
	fail, for example).  Finally, <asm/atomic.h> provides routines userland
	simply cannot use on all arches, but <linux/filter.h> is needed by iputils
	for example.  While not all arches put __KERNEL__ around their header, on
	MIPS including this header currently blows up the build.
	
	Signed-off-by: Tom Rini <trini@kernel.crashing.org>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<pluto@pld-linux.org>
	[PATCH] gcc4 fixes
	
	Fix the below:
	
	drivers/atm/zatm.c:1608: error: invalid lvalue in assignment
	
	drivers/atm/iphase.c:623: error: invalid storage class for function 'ia_pkt_tx'
	
	drivers/cdrom/sbpcd.c: In function 'get_state_T':
	drivers/cdrom/sbpcd.c:1168: error: invalid storage class for function 'cmd_out_T'
	drivers/cdrom/sbpcd.c: In function 'cmd_out_T':
	drivers/cdrom/sbpcd.c:1317: error: invalid storage class for function 'cc_DriveReset'
	
	drivers/media/video/saa7134/saa7134-core.c:90: error: static declaration of 'saa7134_devcount' follows non-static declaration
	drivers/media/video/saa7134/saa7134.h:479: error: previous declaration of 'saa7134_devcount' was here
	
	drivers/net/acenic.c:488: error: invalid storage class for function 'ace_watchdog'
	
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<pavel@ucw.cz>
	[PATCH] swsusp bugfixes: do not oops when not enough memory during resume
	
	This prevents oops when not enough memory is available during resume.
	
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<pavel@ucw.cz>
	[PATCH] swsusp bugfixes: fix memory leak
	
	This fixes memory leak when we are low on memory during suspend.  Ouch and
	nr_needed_pages is only used twice, and only written :-(.  I guess that can
	wait for 2.6.10.
	
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<pavel@ucw.cz>
	[PATCH] swsusp fixes: fix confusing printk
	
	This fixes confusing printk.
	
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<pavel@ucw.cz>
	[PATCH] swsusp: Fix header typo
	
	Fixes typo in header, please apply,
	
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<pavel@ucw.cz>
	[PATCH] swsusp: fix types
	
	This fixes types so that sparse has less stuff to complain about.
	
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<mpm@selenic.com>
	[PATCH] Fix concurrent access to /dev/urandom
	
	This patch fixes a problem where /dev/urandom can return duplicate values
	when two processors read from it at the same time.  It relies on the fact
	that we already are taking a lock in add_entropy_words(), and atomically
	hashes in some freshly mixed in data into the returned randomness.
	
	Signed-off-by: Matt Mackall <mpm@selenic.com>
	Signed-off-by: Theodore Ts'o <tytso@mit.edu>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<hunold@linuxtv.org>
	[PATCH] dvb: saa7146 driver + misc updates
	
	- saa7146: prefix IER_DISABLE and IER_ENABLE with SAA7146_, add
	  SAA7146_ISR_CLEAR
	
	- dvb-bt8xx/dst: fix typo
	
	- cinergyT2: locking in SET_PARAMETERS and some VDR compatibility code for
	  GET_EVENT (thanks to Stefan Lucke)
	
	Signed-off-by: Michael Hunold <hunold@linuxtv.org>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<hunold@linuxtv.org>
	[PATCH] dvb: B2C2 driver splitup
	
	- B2C2: move generic b2c2 code a separate module, added basic b2c2-usb
	  support
	
	- [DVB] Skystar2: add mt312/vp310 support
	
	Signed-off-by: Michael Hunold <hunold@linuxtv.org>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<hunold@linuxtv.org>
	[PATCH] dvb: update dib-usb driver
	
	- added new usb ids for some more clones
	- added option to deliver the complete TS with USB2.0 devices
	- added support for the dib3000mc/p frontend driver
	
	Signed-off-by: Michael Hunold <hunold@linuxtv.org>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<hunold@linuxtv.org>
	[PATCH] dvb: dvb-core update
	
	- dvb-core: remove unused frequency bending code, simplify internal frontend
	  handling
	
	- dvb-net: add ULE dvb-net support according to draft-ietf-ipdvb-ule-03
	
	Signed-off-by: Michael Hunold <hunold@linuxtv.org>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<hunold@linuxtv.org>
	[PATCH] dvb: frontend update
	
	- dib3000: support for dynamically i2c addresses of the demod
	
	- tda1004x: fixed firmware upload problems, forgot to include tune_settings
	  for tda1004x, added setting to allow inversion of OCLK, set
	  fesettings->min_delay_ms = 800 as suggested by Peter Siering
	
	- stv0297: code cleanup
	
	- mt312: added vp310 support
	
	- mt352: decrease verbosity
	
	Signed-off-by: Michael Hunold <hunold@linuxtv.org>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<hunold@linuxtv.org>
	[PATCH] dvb: av7110 driver update
	
	- av7110: fixed av7110_before_after_tune()/av7110_fe_lock_fix(): firmware >=
	  261d: wait for empty message queue, firmware <= 261c: wait 50ms
	
	- av7110: add __user and __iomem annotations, remove some unnecessary cast
	  (patch by C.Y.M)
	
	- av7110: __av7110_send_fw_cmd(): added some sanity checks suggested by
	  Werner Fin
	
	- av7110: added support for full-featured DVB-C cards: 13c2:0000 Siemens
	  DVB-C (full-length card) VES1820/Philips CD1516 and 13c2:0003 Haupauge DVB-C
	  2.1 VES1820/ALPS TDBE2
	
	- av7110: follow saa7146 changes, remove superflous casts, and other misc. 
	  minor cleanups
	
	- av7110: Fixed race condition between driver and av7110 while accessing the
	  COMMAND register in DPRAM.  See
	  http://www.linuxtv.org/mailinglists/vdr/2004/01-2004/msg00331.html
	
	- budget: various cleanups by Adrian bunk 
	
	Signed-off-by: Michael Hunold <hunold@linuxtv.org>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<sundarapandian@gmail.com>
	[PATCH] Code to register amba serial console is missing
	
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<magnus.damm@gmail.com>
	[PATCH] documentation for mem=
	
	I recently learnt that limiting RAM with by using only "mem=xxxM" is no
	good on machines equipped with PCI.  In my case (vanilla 2.6.9) the cardbus
	bridge on my laptop got mapped to the unused RAM area which resulted in
	wierd errors due to the collision.
	
	The right solution is to use "mem=" together with "memmap=" to mark the
	unused RAM area reserved.
	
	Henceforth I force the kernel to use 2016MiB by passing "mem=2016M
	memmap=32M#2016M" instead of just "mem=2016M".
	
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<james4765@gmail.com>
	[PATCH] rocket: documentation changes
	
	Add some configuration information to Documentation/rocket.txt that was
	included with the external driver package.
	
	Signed-off-by: James Nelson <james4765@gmail.com>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<akpm@osdl.org>
	[PATCH] remove speedstep_coppermine docs
	
	Avoid documenting something which isn't there.
	
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<bjorn.helgaas@hp.com>
	[PATCH] hisax: don't look at pci_dev->irq before calling pci_enable_device()
	
	The hisax driver looks at dev_avm->irq before calling pci_enable_device(),
	which means it requests the wrong IRQ.  This patch fixes it.
	
	Thanks to Thorsten Doil for reporting the problem and testing the fix.
	
	Signed-off-by: Bjorn Helgaas <bjorn.helgaas@hp.com>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<js@linuxtv.org>
	[PATCH] fix dvb-net Oops
	
	emard<at>softhome!net discovered an embarrasing bug in dvb_net.c where
	the NET_REMOVE_IF ioctl will cause an Oops when called with an invalid
	interface number. 
	
	Signed-off-by: Johannes Stezenbach <js@linuxtv.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<rmk@flint.arm.linux.org.uk>
	[ARM] Fix ZBOOT_ROM configuration
	
	Fix ZBOOT_ROM options help texts to describe what's going on there
	bettwe.
	
	Make ZBOOT_ROM depend on ZBOOT_ROM_TEXT and ZBOOT_ROM_BSS being
	different values.  This allows all*config-created configurations
	to work where ZBOOT_ROM_TEXT and ZBOOT_ROM_BSS were both zero.

<eranian@hpl.hp.com>
	[IA64] fix pfm_force_terminate() to really cleanup the state.
	
	- fix pfm_force_terminate() to really cleanup the state.
	  There was a bug affecting sessions which use
	  PFM_FL_OVFL_BLOCK flag. It could lead to an assertion
	  failure in pfm_load_regs() in the case where the
	  owner of the session died unexpectedly. The fix is to
	  do the full unload operation.
	
	- simplifies the debug output in pfm_flush_pmds()
	
	- simplifies the debug output in pfm_overflow_handler()
	
	- fix a minor typos in a comment in pfm_flush().
	
	signed-off-by: stephane eranian <eranian@hpl.hp.com>
	Signed-off-by: Tony Luck <tony.luck@intel.com>

<tony.luck@intel.com>
	[IA64] Delete: Documentation/ia64/serial.txt
	
	Andrew took the patch that created this, and Linus applied
	it to his BK tree.  Remove my copy so that we can merge.
	
	Signed-off-by: Tony Luck <tony.luck@intel.com>

<eranian@hpl.hp.com>
	[IA64] perfmon.c: fix bug in previous "fix"
	
	- undo the pfm_context_free() call in pfm_handle_work().
	  The logic is different. In the case of a controlling
	  task exiting while monitored in pfm_handle_work. The
	  context is freed in pfm_close() and not pfm_handle_work().
	
	signed-off-by: stephane eranian <eranian@hpl.hp.com>
	Signed-off-by: Tony Luck <tony.luck@intel.com>

<chrisw@osdl.org>
	[IPV4/IPV6]: IGMP source filter fixes
	
	When adding or deleting from the source list make sure to find matches
	by comparing against the new source address, not the group address.
	Also, check each addr in the list rather than just the first one.
	And, finally, only delete from list when there's a match rather than
	vice-versa.  Drop the effort to keep list sorted, since it's not done
	on full-state api and can create an sl_addr entry that the delta api
	won't be able to delete. Without these fixes sl_count can be corrupted
	which can allow for kernel memory corruption.
	
	Signed-off-by: Chris Wright <chrisw@osdl.org>
	Signed-off-by: David S. Miller <davem@davemloft.net>

<kaber@trash.net>
	[PKT_SCHED]: Keep netem queue running until inner qdisc is empty
	
	Signed-off-by: Patrick McHardy <kaber@trash.net>
	Signed-off-by: David S. Miller <davem@davemloft.net>

<torvalds@ppc970.osdl.org>
	Fix x86 src pointer type for memcpy_fromio().
	
	It's "const volatile __iomem *". The "const" was missing.

<stevef@smfhome.smfdom>
	return the right return code on failed ExtendedSecurity mount to SPNEGO enabled
	servers to avoid mount oops.  Fix case in which tcp stack only returns 3 bytes
	of larger peek of smb header (which would otherwise kill the
	session and cause us to have to reconnect)
	
	Signed-of-by: Steve French (sfrench@us.ibm.com)

<galak@linen.sps.mot.com>
	[PATCH] ppc32: fix SPE state corruption on e500
	
	Unfortunately the restoring of SPE state was causing data corruption
	since we were restoring based on the size of the altivec context and not
	the SPE context.  Also, fixed setting of last_task_used_spe on
	start_thread, flush_thread, and exit_thread. 
	
	Signed-off-by: Kumar Gala <kumar.gala@freescale.com>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<catalin.marinas@com.rmk.(none)>
	[ARM PATCH] 2304/1: versatile_defconfig fixed after adding Versatile/AB support
	
	Patch from Catalin Marinas
	
	CONFIG_ARCH_VERSATILE=y was added to the versatile_defconfig file.
	
	Signed-off-by: Catalin Marinas
	Signed-off-by: Russell King

<catalin.marinas@com.rmk.(none)>
	[ARM PATCH] 2309/1: ARCH->MACH replacement for the Versatile/AB platform
	
	Patch from Catalin Marinas
	
	The Versatile/AB platform is defined as a MACH (not ARCH) in the
	arch/arm/tools/mach-types file.
	
	Signed-off-by: Catalin Marinas
	Signed-off-by: Russell King

<dave.jiang@com.rmk.(none)>
	[ARM PATCH] 2303/1: Remove unused file in iop331 port
	
	Patch from Dave Jiang
	
	remove iop331-mm.c in arch/arm/mach-iop3xx
	
	Signed-off-by: Dave Jiang
	Signed-off-by: Russell King

<trini@kernel.crashing.org>
	[PATCH] ppc32: Compile classic PPC specific ASM only on CONFIG_6xx
	
	Newer binutils (2.15) when they know they aren't assembling for a
	classic target (say e500 instead of 750) disallow certain opcodes,
	causing the compile to fail.
	
	Signed-off-by: Thomas Gleixner <tglx@linutronix.de>
	Signed-off-by: Tom Rini <trini@kernel.crashing.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<mporter@kernel.crashing.org>
	[PATCH] ppc32: PPC4XX DMA polarity init fix
	
	This patch applies to the kernel 2.6.9 and fixes the initialisation of
	the DMA channel polarity in the function ppc4xx_init_dma_channel() for
	the PPC 4XX processor.
	
	Signed-off-by: Colin P Wernham <cwernham@airspan.com>
	Signed-off-by: Matt Porter <mporter@kernel.crashing.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<stelian@popies.net>
	[PATCH] enable meye even when CONFIG_HIGHMEM64G=y
	
	The meye hardware needs to access the main memory for DMA using
	32 bit addresses. The previous version of the meye driver used
	dma_addr_t types to build those addresses and ensured that
	sizeof(dma_addr_t) = 4 by disabling HIGHMEM64G in Kconfig.
	
	However, this way of doing it also makes meye unavailable on
	some kernel configurations. As Arjan said previously, future Fedora
	kernels may have HIGHMEM64G activated by default (davej says it won't
	happen, at least for now...). Other distributions may do the same and
	this will require meye users to recompile the whole kernel.
	
	The attached patch makes the meye driver use dma_addr_t addresses 
	internally, but converts them to u32 before giving them to the
	hardware.
	
	Signed-off-by: Stelian Pop <stelian@popies.net>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<stelian@popies.net>
	[PATCH] correct dma_set_mask return code in DMA-API.txt
	
	The documentation says dma_set_api() returns 1 on success and
	0 on error, which is plain wrong, standard kernel return codes
	are used instead (0 on ok, -ESOMETHING on error).

<rusty@rustcorp.com.au>
	[PATCH] ip_conntrack_irc:parse_dcc should be static
	
	Found by nfsim (-Wmissing-prototypes is your friend).
	
	Signed-off-by: Rusty Russell <rusty@rustcorp.com.au>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<rusty@rustcorp.com.au>
	[PATCH] Fix return value when proc file creation fails in ip_conntrack
	
	We notiecd proc_net_fops_create() failing, and cleaned up, but returned
	0 anyway.
	
	Found by the --failtest flag to nfsim-testsuite.  --failtest rocks my
	world.
	
	Signed-off-by: Rusty Russell <rusty@rustcorp.com.au>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<sfrench@sambaltcdom.austin.ibm.com>
	[CIFS] Fix path based calls to consistently allow up to PATH_MAX (some were
	incorrectly limited to just over 512)
	
	Pointed out by Shaggy.
	
	Signed-off-by: Steve French (sfrench@us.ibm.com)

<sfrench@sambaltcdom.austin.ibm.com>
	Error mapping workaround for NT4 bug of reporting oldstyle DOS error for ERR invalid level (shows up on attempts to do SetPathInfo to NT4).
	Call posix_lock_wait to avoid fs/locks.c panic per Trond's suggestion
	
	Signed-off-by: Steve French (sfrench@us.ibm.com)

<dave.jiang@com.rmk.(none)>
	[ARM PATCH] 2314/1: Enable physmap MTD driver for IOP platforms
	
	Patch from Dave Jiang
	
	Update all IOP def configs to utilize the MTD physmap driver instead of IOP specific MTD maps driver.
	
	Signed-off-by: Dave Jiang
	Signed-off-by: Russell King

<catalin.marinas@com.rmk.(none)>
	[ARM PATCH] 2310/1: CONFIG_FPE_NWFPE enabled in (integrator|versatile)_defconfig
	
	Patch from Catalin Marinas
	
	CONFIG_FPE_NWFPE was enabled and CONFIG_FPE_FASTFPE disabled in the
	(integrator|versatile)_defconfig files because the latter is only
	available as a separate patch.
	
	Signed-off-by: Catalin Marinas
	Signed-off-by: Russell King

<dsaxena@net.rmk.(none)>
	[ARM PATCH] 2305/1: Add IXP46x CPU support
	
	Patch from Deepak Saxena
	
	Add support for Intel's new IXP46x CPU family.
	
	Signed-off-by: Deepak Saxena
	Signed-off-by: Russell King

<catalin.marinas@com.rmk.(none)>
	[ARM PATCH] 2311/1: ARM1176 CPU detection
	
	Patch from Catalin Marinas
	
	The CPU Id register changed with the ARM1176 processor and the
	ARMv6 architecture description field can be either 7 or 0xF.
	This patch also detects the first byte of the part number since
	0xF in the description field will also be used for future ARM
	architectures.
	
	Signed-off-by: Catalin Marinas
	Signed-off-by: Russell King

<catalin.marinas@com.rmk.(none)>
	[ARM PATCH] 2312/1: Cache type information fix
	
	Patch from Catalin Marinas
	
	The CType field in the cache type CP15 register does not always
	specify whether the cache is VIVT or VIPT. The dump_cpu_info()
	function should use the cache_is_(vivt|vipt) macros instead.
	
	Signed-off-by: Catalin Marinas
	Signed-off-by: Russell King

<matthew@wil.cx>
	[IA64]delay.h: udelay() should call cpu_relax()
	
	Signed-off-by: Matthew Wilcox <matthew@wil.cx>
	Signed-off-by: Tony Luck <tony.luck@intel.com>

<rpurdie@net.rmk.(none)>
	[ARM PATCH] 2315/1: PXA PCMCIA Suspend/Resume bugfix
	
	Patch from Richard Purdie
	
	The base PCMCIA code for PXA2xx doesn't work over a suspend/resume 
	cycle as the MECR register isn't preserved. This patch restores 
	the register.
	
	Signed-off-by: Richard Purdie
	Signed-off-by: Russell King

<davidm@hpl.hp.com>
	[IA64] do early_console_setup() on UP, too
	
	Here is trivial patch to enable the early console setup for UP as well.
	Tested on zx1.
	
	Signed-off-by: David Mosberger-Tang <davidm@hpl.hp.com>
	Signed-off-by: Tony Luck <tony.luck@intel.com>

<greg@kroah.com>
	[PATCH] usbfs: Remove extraneous disconnection checks
	
	This patch fixes a bug in the usbfs code.  The driver is too zealous about
	checking for disconnected devices before doing things.  In particular, it
	is necessary to reap all outstanding asynchronous URBs and unbind from
	interfaces when the device file is closed, even if the device is no longer
	connected.
	
	Signed-off-by: Alan Stern <stern@rowland.harvard.edu>
	Signed-off-by: Greg Kroah-Hartman <greg@kroah.com>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<greg@kroah.com>
	[PATCH] USB: avoid OHCI autosuspend on some boxes
	
	Don't try autosuspend if we think the hardware won't resume correctly
	from the OHCI suspend state.  This makes the RWC bit serve double duty,
	but that appears to work OK, and the only penalty is increased power
	consumption (from OHCI clocks) on boards/chips that don't work right.
	
	For example, the amd756 erratum 4 workaround needs this logic; and at
	least one ServerWorks box issues spurious resume IRQs (~3x/second!)
	in the suspend state.
	
	Signed-off-by: David Brownell <dbrownell@users.sourceforge.net>
	Signed-off-by: Greg Kroah-Hartman <greg@kroah.com>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<roland@redhat.com>
	[PATCH] fix bogus ECHILD return from wait* with zombie group leader
	
	Klaus Dittrich observed this bug and posted a test case for it.
	
	This patch fixes both that failure mode and some others possible.  What
	Klaus saw was a false negative (i.e.  ECHILD when there was a child)
	when the group leader was a zombie but delayed because other children
	live; in the test program this happens in a race between the two threads
	dying on a signal.
	
	The change to the TASK_TRACED case avoids a potential false positive
	(blocking, or WNOHANG returning 0, when there are really no children
	left), in the race condition where my_ptrace_child returns zero.
	
	Signed-off-by: Roland McGrath <roland@redhat.com>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<joern@wohnheim.fh-wedel.de>
	[PATCH] phram maintainer update
	
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<olh@suse.de>
	[PATCH] dvb: Kconfig help typo fix
	
	Signed-off-by: Olaf Hering <olh@suse.de>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<heiko.carstens@de.ibm.com>
	[PATCH] s390: z/VM monreader driver bugfix.
	
	From: Gerald Schaefer <geraldsc@de.ibm.com>
	
	 - Use nonseekable_open() to disable seeking and pread()/pwrite().
	
	Signed-off-by: Heiko Carstens <heiko.carstens@de.ibm.com>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<heiko.carstens@de.ibm.com>
	[PATCH] s390: z/VM watchdog driver bugfix.
	
	From: Gerald Schaefer <geraldsc@de.ibm.com>
	
	 - Remove ESPIPE logic, use nonseekable_open() instead.
	
	Signed-off-by: Heiko Carstens <heiko.carstens@de.ibm.com>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<paulus@samba.org>
	[PATCH] ppc64: fix signal handler arguments
	
	This is the first of 3 patches from David Woodhouse which fix various
	problems with signal handling on ppc64.  (This is David's patch plus a
	couple of comment fixes from me.)
	
	Without this patch, a signal handler that is called as a result of delivery
	of a signal while a process is waiting in sigsuspend() will have wrong
	values given to it for the second and third arguments.  The reason is that
	we were returning to userspace via the syscall return path, which doesn't
	bother to restore r4 and r5.  This patch arranges for the return to
	userspace to be done via ret_from_except in this case, which restores all
	registers.
	
	Signed-off-by: Paul Mackerras <paulus@samba.org>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<paulus@samba.org>
	[PATCH] ppc64: fix single-stepping into/out of signal handlers
	
	This is the second of 3 patches from David Woodhouse which fix various
	problems with signal handling on ppc64.
	
	The problem that this patch fixes is that a process being single-stepped
	will execute one instruction too many in certain cases: when a signal is
	delivered, when a signal handler returns, and when a system call
	instruction is single-stepped.  This patch fixes it by checking if the
	process is being single-stepped in the syscall exit path and on signal
	delivery, and stopping it if so.  To avoid slowing down the syscall exit
	path in the normal case, we use a bit in the thread_info flags, which can
	be tested along with the other bits we already test in the syscall exit
	path.
	
	Signed-off-by: Paul Mackerras <paulus@samba.org>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<paulus@samba.org>
	[PATCH] ppc64: fix signal mask restoration when delivery fails
	
	This is the third of 3 patches from David Woodhouse which fix various
	problems with signal handling on ppc64.
	
	At present, if a signal is being delivered, and the process has specified
	delivery of that signal on an alternate stack but the alternate stack that
	has been specified is invalid (i.e.  the kernel gets a fault writing to the
	alternate stack), then we (correctly) give the process a SIGSEGV but we put
	the wrong signal mask in the saved state on the stack - i.e.  we put the
	mask that would have been established for the original signal handler
	there.
	
	This patch fixes it by making setup_rt_frame, handle_rt_signal32 and
	handle_signal32 return a status code to indicate whether they successfully
	established a stack frame.  If they fail, the caller doesn't block the
	signals specified for the signal handler.
	
	Signed-off-by: Paul Mackerras <paulus@samba.org>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<Markus.Lidel@shadowconnect.com>
	[PATCH] i2o: increase timeout for LCT_NOTIFY
	
	Some users have reported problems with the I2O subsystem, which was
	caused by the timeout to fetch the LCT.
	
	- increases the timeout for I2O LCT_GET.  On some systems the time to get
	  a reply from the I2O controller is longer then the timeout to wait.
	
	Signed-off-by: Markus Lidel <Markus.Lidel@shadowconnect.com>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<magnus.damm@gmail.com>
	[PATCH] aty128fb: do not release unrequested range
	
	The aty128fb driver in 2.6.10-rc3 tries to release an unrequested range
	during driver unload.  This results in the following printout on my Apple
	G4 Cube:
	
	Trying to free nonexistent resource <00802400-008024ff>
	
	The remedy is simple - do not release the unrequested range.
	
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<akpm@osdl.org>
	[PATCH] parenthesize init_wait() macro parameters
	
	Addresses bug #3863, from <daveh@dmh2000.com>
	
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<rmk@flint.arm.linux.org.uk>
	[ARM] Clean up vector support code.
	
	Rather than working out where the vector page is mapped, always
	map the vector page at the high vectors location, and conditionally
	handle the coherency issues with the low vector mapping if present.

<rmk@flint.arm.linux.org.uk>
	[ARM] Deny user space mappings in first page even on hi-vec CPUs
	
	Don't allow user space mappings in the first page even if we are
	using high vectors - this may prevent BUG() from working, as well
	as allowing kernel NULL pointer derefs to be silently ignored.

<catalin.marinas@com.rmk.(none)>
	[ARM PATCH] 2316/1: cacheflush.h included in copypage-v6.c
	
	Patch from Catalin Marinas
	
	This is needed to avoid the implicit declaration of the
	cache_is_vipt_aliasing() macro defined in cacheflush.h.
	
	Signed-off-by: Catalin Marinas
	Signed-off-by: Russell King

<ben-linux@org.rmk.(none)>
	[ARM PATCH] 2317/1: S3C2410 - fix clkout0 name in clock.c
	
	Patch from Ben Dooks
	
	clkout0 has the name of clkout1
	
	Signed-off-by: Ben Dooks
	Signed-off-by: Russell King

<davis_g@com.rmk.(none)>
	[ARM PATCH] 2318/1: Enable access to ARMv6 VFP coprocessr
	
	Patch from George G. Davis
	
	Turn on ARMv6 VFP copressor, if present. According to the ARM1136 TRM,
	setting CACR bits will be ignored if the coprocessor is not present. In
	that case, this is change has no effect.
	
	Signed-off-by: George G. Davis
	Signed-off-by: Russell King

<nico@org.rmk.(none)>
	[ARM PATCH] 2289/2: turn off PXA clock to MMC block when not in use
	
	Patch from Nicolas Pitre
	
	... also remove an unused variable warning.
	
	Signed-off-by: Nicolas Pitre
	Signed-off-by: Russell King

<nanhai.zou@intel.com>
	[PATCH] Fix a race condition in pty.c
	
	There is a race condition int pty.c when pty_close wakes up waiter on its
	pair device before set TTY_OTHER_CLOSED flag.
	
	It is possible on SMP or preempt kernel, waiter wakes up too early that it
	will not get TTY_OTHER_CLOSED flag then fall into sleep again - missed wakeup.
	
	hjl reports that this bug will hang some expect scripts on SMP machines.
	
	Signed-off-by: Zou Nan hai <Nanhai.zou@intel.com>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<kronos@kronoz.cjb.net>
	[PATCH] ide-cd: Unable to read multisession DVDs
	
	cdrom_read_toc (ide-cd.c) always reads the TOC using MSF format.  If the
	last session of the disk starts beyond block 1152000 (LBA) there's an
	overflow in the MSF format and kernel complains:
	
	Unable to identify CD-ROM format.
	
	I reported this bug a while ago (see bug #1930 on bugzilla) and Andy
	Polyakov tracked it down.
	
	Read the multi-session TOC in LBA format in order to avoid an overflow
	in MSF format when the last session starts beyond block 1152000 (LBA).
	
	Signed-off-by: Luca Tettamanti <kronos@kronoz.cjb.net>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<pauld@egenera.com>
	[PATCH] fix memory leak in free_percpu
	
	This fixes a memory leak where the percpu internal structure is not freed. 
	Repeated add/remove device illustrates the leak nicely.
	
	Signed-off-by: Philip R. Auld <pauld@egenera.com>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<shemminger@osdl.org>
	[TCP]: Missing newline character in printk.
	
	Signed-off-by: Stephen Hemminger <shemminger@osdl.org>
	Signed-off-by: David S. Miller <davem@davemloft.net>

<tgraf@suug.ch>
	[PKT_SCHED]: Fix double locking in tcindex destroy path.
	
	tcindex's destroy uses its own delete functions to destroy its
	configuration. The delete function (correctly) takes the qdisc_tree_lock
	to prevent list walkings from happening while removing from the list.
	The qdisc_tree_lock is already held if we're comming via the destroy
	path and thus a double locking takes place.
	
	
	Signed-off-by: Thomas Graf <tgraf@suug.ch>
	Signed-off-by: David S. Miller <davem@davemloft.net>

<tgraf@suug.ch>
	[PKT_SCHED]: Provide compat policer stats in action policer
	
	This should go in before 2.6.10. It fixes a forgotten case to provide
	police backward compatibility statistics for old iproute2 versions
	running on a new kernel with actions enabled. Should make distributions
	happy with older iproute2 versions and all-included kernel configs
	since they probably favour actions over plain policer.
	
	Testing results:
	  iproute2-2.4.7 on 2.6.10-rc3-bk8:
	  cls-police: police creation succeeded
	  cls-police: Sending 10 ICMP echo requests
	  cls-police: police dumping succeeded with output:
	  filter protocol ip pref 10 u32 
	  filter protocol ip pref 10 u32 fh 800: ht divisor 1 
	  filter protocol ip pref 10 u32 fh 800::800 order 2048 key ht 800 bkt 0 flowid 10:12 
	  police 3 action drop rate 2Kbit burst 10Kb mtu 2Kb 
	    match 00010000/00ff0000 at 8
	   Sent 420 bytes 10 pkts (dropped 0, overlimits 0)  <-- This would have been missing
	  cls-police: police deletion succeeded
	
	 iproute2-2.6.9 on 2.6.10-rc3-bk8:
	 ...
	  filter protocol ip pref 10 u32 
	  filter protocol ip pref 10 u32 fh 800: ht divisor 1 
	  filter protocol ip pref 10 u32 fh 800::800 order 2048 key ht 800 bkt 0 flowid 10:12  (rule hit 10 success 10)
	    match 00010000/00ff0000 at 8 (success 10 ) 
	   police 0x4 rate 2000bit burst 10Kb mtu 2Kb action drop 
	  ref 1 bind 1
	   Sent 420 bytes 10 pkts (dropped 0, overlimits 0) 
	 ...
	
	 (Same results for fw classifier)
	
	Signed-off-by: Thomas Graf <tgraf@suug.ch>
	Signed-off-by: David S. Miller <davem@davemloft.net>

<ak@suse.de>
	[PATCH] x86_64: fix syscall/signal restart bug
	
	Fix a pretty bad bug that caused sometimes signals on x86-64
	to be restarted like system calls. This corrupted the RIP and
	in general caused undesirable effects.
	
	The problem happens because orig_rax is unsigned on x86-64,
	but it originally was signed when the signal code was written.
	And the if (orig_rax >= 0) ended up always true.
	And gcc didn't warn about this, because the warning is only in 
	-Wextra. 
	
	In 2.4 we still had a cast for it, but somehow it got dropped
	in 2.5.
	
	Credit goes to John Slice for tracking it down and Erich Boleyn
	for the original fix. All blame to me. I fixed it at another
	place too.
	
	Signed-off-by: Andi Kleen <ak@suse.de>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<zecke@org.rmk.(none)>
	[ARM PATCH] 2319/1: SIMpad cill exportation of ChipSelect via ProcFS
	
	Patch from Holger Hans Peter Freyther
	
	Remove the exportation of CS3 via procfs
	
	
	Signed-off-by: Holger Hans Peter Freyther
	Signed-off-by: Russell King

<zecke@org.rmk.(none)>
	[ARM PATCH] 2320/1: SIMpad add Flash device  depends on 2319/1
	
	Patch from Holger Hans Peter Freyther
	
	This patch adds installation of flash devices and partition from within simpad.c . The information of extracted from the old sa1100 flash map.
	
	
	Signed-off-by: Holger Hans Peter Freyther
	Signed-off-by: Russell King

<davis_g@com.rmk.(none)>
	[ARM PATCH] 2321/1: Update integrator_defconfig
	
	Patch from George G. Davis
	
	Just a quick update for integrator_defconfig so it builds a useable
	kernel. These may not be ideal settings for all users but allows
	building kernels for the Integrator AP which basically work "out
	of the box".
	
	Signed-off-by: George G. Davis
	Signed-off-by: Russell King

<drzeus@cx.rmk.(none)>
	[MMC] Add Winbond SD/MMC driver
	
	Patch from Pierre Ossman

<rmk@flint.arm.linux.org.uk>
	[ARM] Add missing newline to a printk message.

<roland@redhat.com>
	[PATCH] back out CPU clock additions to posix-timers
	
	This patch reverts the additions of an ABI supporting thread and process
	CPU clocks in the posix-timers code.  This returns us to 2.6.9's condition,
	there is no support for any new clockid_t values for process CPU clocks.
	
	This also fixes the return value for clock_nanosleep when unsupported (I
	think this is used only by sgi-timer at the moment).  The POSIX-specified
	code for valid clocks that don't support the sleep operation is ENOTSUP.
	On most architectures the kernel doesn't define ENOTSUP and this name is
	defined in userland the same as the kernel's EOPNOTSUPP.
	
	Signed-off-by: Roland McGrath <roland@redhat.com>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<kernel@kolivas.org>
	[PATCH] vm: disable thrashing control by default
	
	It's causing a few as-yet-not-understood problems.  So make a zero value of
	/proc/sys/vm/swap_token_timeout disable the feature, and make the default
	be zero.
	
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<greg@kroah.com>
	[PATCH] USB: fix Scheduling while atomic warning when resuming.
	
	This fixes a warning when resuming the USB EHCI host controller driver.
	
	From: David Brownell <david-b@pacbell.net>
	Signed-off-by: Greg Kroah-Hartman <greg@kroah.com>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<tiwai@suse.de>
	[PATCH] alsa: fix oops with ALSA OSS emulation on PPC
	
	Fix suggested by Benjamin Herrenschmidt <benh@kernel.crashing.org>
	
	On architectures like PPC, char is handled as "unsigned char", thus the
	pcm_format_data table entries with -1 give a positive 255.  This results
	in Oops with OSS-emulation on such architectures.
	
	The patch simply adds the right signed/unsigned prefix to fix this problem.
	
	Signed-off-by: Takashi Iwai <tiwai@suse.de>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<jgarzik@pobox.com>
	[libata sata_nv] fix dev detect by removing sata-reset flag
	
	Remove ATA_FLAG_SATA_RESET.  See comment in code and
	http://bugme.osdl.org/show_bug.cgi?id=3352 for more details.
	
	This problem needs more investigation.  Removing the flag
	appears to fix the problems in the field, so it's the best
	temporary solution.

<alan@lxorguk.ukuu.org.uk>
	[PATCH] Bring Moxa serial back into being
	
	Moxa have released several driver updates now including support up to
	2.6.8 but don't themselves feel its worth the effort of doing a cleaned
	up merge for the base kernel.  So I pulled their latest driver release
	(1.8) and removed all the macro gunge that makes it build on
	2.2.0->2.6.8.  I then fixed it to run on 2.6.9/10 and fixed a bug in the
	break handling.
	
	It still doesn't do PCI hotplug but I don't have any PCI moxa cards to
	really tackle that particular case. 
	
	I've also merged Adriank Bunk's two 'could be static' changes into this
	diff set.
	
	Signed-off-by: Alan Cox <alan@redhat.com>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<greg@kroah.com>
	[PATCH] USB: drivers/usb/atm/usb_atm.c: fix nonzero snd_padding case
	
	This is the patch to fix the case when snd_padding is not zero, updated
	according to Duncan's comments.  Also it changes the driver name to reflect
	its generic nature.
	
	Signed-off-by: Roman Kagan <rkagan@mail.ru>
	Signed-off-by: Greg Kroah-Hartman <greg@kroah.com>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<greg@kroah.com>
	[PATCH] USB: fix up warning messages spit out by the keyspan driver.
	
	I missed this in the previous usb_kill_urb() cleanup.  Thanks to
	Pat Mochel for reporting this.
	
	Signed-off-by: Greg Kroah-Hartman <greg@kroah.com>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<juhl-lkml@dif.dk>
	[PATCH] fix inlining related build failures in mxser.c
	
	This fixes a build failure with gcc-3.4.1, where we use some functions
	before we define them inline. 
	
	The simple way to fix those is to simply un-inline the functions in
	question. Since they are somewhat large that's what I did.
	
	An alternative would be to rework the ordering of the file so the
	functions are defined before their first use.
	
	Signed-off-by: Jesper juhl <juhl-lkml@dif.dk>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<akpm@osdl.org>
	[PATCH] AB-BA deadlock between uidhash_lock and tasklist_lock.
	
	switch_uid() doesn't care about tasklist_lock, so do it outside
	the lock and avoid a subtle (and very very unlikely to trigger)
	AB-BA deadlock.
	
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<axboe@suse.de>
	[PATCH] cfq-iosched: exit deadlock
	
	CFQ v2 has some spare queue logic that was never enabled.  It has an SMP
	deadlock because it attempts to regrab the queue lock in the exit path, so
	kill the spare queue stuff completely for 2.6.10.
	
	Signed-off-by: Jens Axboe <axboe@suse.de>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<akpm@osdl.org>
	[PATCH] fix CONFIG_SWAP=n build
	
	mm/rmap.c contains an open-coded reference to swap_token_default_timeout
	
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<vs@namesys.com>
	[PATCH] reiserfs bug fix: add missing pair of lock_kernel()/unlock_kernel()
	
	This patch adds missing lock_kernel()/unlock_kernel() pair in
	reiserfs_get_dentry
	
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<dtor@mail.ru>
	[PATCH] fix possible evdev usb mouse disconnect oops
	
	evdev, joydev, mousedev, tsdev - remove class device and devfs entry when
	hardware driver disconnects instead of waiting for the last user to drop off. 
	This way hardware drivers can be unloaded at any time.
	
	Signed-off-by: Dmitry Torokhov <dtor@mail.ru>
	Signed-off-by: Andrew Morton <akpm@osdl.org>
	Signed-off-by: Linus Torvalds <torvalds@osdl.org>

<torvalds@ppc970.osdl.org>
	Don't use "-march=pentium3" for gcc tuning.
	
	rth tells me that some versions of gcc may end up using the
	SSE registers for data movement when you do that.
	
	Use "-march=i686 -mtune=xxxx" instead.
	
	(We do the same thing for march=pentium2/4 too, just for
	consistency).

<torvalds@ppc970.osdl.org>
	Linux 2.6.10
	
	Merry Christmas everyone. Ho ho ho!

